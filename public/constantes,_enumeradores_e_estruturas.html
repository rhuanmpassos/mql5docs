<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Constantes, Enumeradores e Estruturas - MQL5 Docs</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
</head>
<body>
    <nav class="sidebar">
        <div class="logo">
            <h1>MQL5 Docs</h1>
            <p>Documenta√ß√£o Completa</p>
        </div>
        <div class="search-box">
            <input type="text" id="search" placeholder="Buscar..." onkeyup="filterNav()">
        </div>
        <ul class="nav-list" id="nav-list">
            <li class=""><a href="index.html">üìö √çndice</a></li>
            <li class=""><a href="introducao.html">Introducao</a></li>
<li class=""><a href="refer√™ncia_mql5.html">Refer√™ncia MQL5</a></li>
<li class=""><a href="elementos_b√°sicos_da_linguagem.html">Elementos B√°sicos da Linguagem</a></li>
<li class="active"><a href="constantes,_enumeradores_e_estruturas.html">Constantes, Enumeradores e Estruturas</a></li>
<li class=""><a href="programas_mql5.html">Programas MQL5</a></li>
<li class=""><a href="vari√°veis_predefinidas.html">Vari√°veis Predefinidas</a></li>
<li class=""><a href="fun√ß√µes_comuns.html">Fun√ß√µes Comuns</a></li>
<li class=""><a href="fun√ß√µes_para_array.html">Fun√ß√µes para Array</a></li>
<li class=""><a href="m√©todos_matriciais_e_vetoriais.html">M√©todos matriciais e vetoriais</a></li>
<li class=""><a href="fun√ß√µes_de_convers√£o.html">Fun√ß√µes de Convers√£o</a></li>
<li class=""><a href="fun√ß√µes_matem√°ticas.html">Fun√ß√µes Matem√°ticas</a></li>
<li class=""><a href="fun√ß√µes_de_string.html">Fun√ß√µes de String</a></li>
<li class=""><a href="data_e_hora.html">Data e Hora</a></li>
<li class=""><a href="informa√ß√µes_de_conta.html">Informa√ß√µes de Conta</a></li>
<li class=""><a href="verificando_estado.html">Verificando Estado</a></li>
<li class=""><a href="manipula√ß√£o_de_eventos.html">Manipula√ß√£o de eventos</a></li>
<li class=""><a href="informa√ß√µes_de_mercado.html">Informa√ß√µes de Mercado</a></li>
<li class=""><a href="calend√°rio_econ√¥mico.html">Calend√°rio econ√¥mico</a></li>
<li class=""><a href="s√©ries_temporais_e_acesso_a_indicadores.html">S√©ries Temporais e Acesso a Indicadores</a></li>
<li class=""><a href="s√≠mbolos_personalizados.html">S√≠mbolos personalizados</a></li>
<li class=""><a href="opera√ß√µes_de_gr√°ficos.html">Opera√ß√µes de Gr√°ficos</a></li>
<li class=""><a href="fun√ß√µes_de_negocia√ß√£o.html">Fun√ß√µes de Negocia√ß√£o</a></li>
<li class=""><a href="gerenciamento_de_sinais.html">Gerenciamento de sinais</a></li>
<li class=""><a href="fun√ß√µes_de_rede.html">Fun√ß√µes de rede</a></li>
<li class=""><a href="vari√°veis_globais_do_terminal.html">Vari√°veis Globais do Terminal</a></li>
<li class=""><a href="fun√ß√µes_de_arquivo.html">Fun√ß√µes de Arquivo</a></li>
<li class=""><a href="indicadores_customizados.html">Indicadores Customizados</a></li>
<li class=""><a href="fun√ß√µes_de_objeto.html">Fun√ß√µes de Objeto</a></li>
<li class=""><a href="indicadores_t√©cnicos.html">Indicadores T√©cnicos</a></li>
<li class=""><a href="trabalhando_com_resultados_de_otimiza√ß√£o.html">Trabalhando com Resultados de Otimiza√ß√£o</a></li>
<li class=""><a href="trabalhando_com_eventos.html">Trabalhando com Eventos</a></li>
<li class=""><a href="trabalhando_com_opencl.html">Trabalhando com OpenCL</a></li>
<li class=""><a href="trabalhar_com_bancos_de_dados.html">Trabalhar com bancos de dados</a></li>
<li class=""><a href="trabalho_com_directx.html">Trabalho com DirectX</a></li>
<li class=""><a href="metatrader_para_python.html">MetaTrader para Python</a></li>
<li class=""><a href="modelos_onnx.html">Modelos ONNX</a></li>
<li class=""><a href="biblioteca_padr√£o.html">Biblioteca Padr√£o</a></li>
<li class=""><a href="migrando_do_mql4.html">Migrando do MQL4</a></li>
<li class=""><a href="lista_de_fun√ß√µes_mql5.html">Lista de Fun√ß√µes MQL5</a></li>
<li class=""><a href="lista_de_constantes_mql5.html">Lista de Constantes MQL5</a></li>

        </ul>
    </nav>
    
    <main class="content">
        <header>
            <button class="menu-toggle" onclick="toggleSidebar()">‚ò∞</button>
            <h1>Constantes, Enumeradores e Estruturas</h1>
        </header>
        
        <article>
            <p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
321
<h3>Constantes, Enumeradores e Estruturas</h3>
Para simplificar a escrita do programa e tornar os textos do programa mais convenientes para
percep√ß√£o, a linguagem MQL5 fornece constantes e enumeradores padr√µes pr√©-definidos. Al√©m disso,
estruturas de servi√ßo s√£o usados para armazenar informa√ß√£o.
Constantes padr√£o s√£o similares a macros e s√£o do tipo int.
As constantes s√£o agrupadas por seus prop√≥sitos:
¬∑ Constantes de Gr√°fico s√£o usadas ao trabalhar com gr√°ficos de pre√ßos: abertura, navega√ß√£o,
defini√ß√£o de par√¢metros;
¬∑ Constantes de objetos s√£o destinadas para processar objetos gr√°ficos que podem ser criados e
exibidos em gr√°ficos;
¬∑ Constantes de indicadores s√£o usadas para trabalhar com indicadores padr√µes ou customizadas;
¬∑ Constantes do estado do ambiente descrevem propriedades do programa MQL5, mostram
informa√ß√µes sobre o terminal do cliente, instrumentos financeiros e conta corrente;
¬∑ Constantes de negocia√ß√£o permite especificar uma variedade de informa√ß√µes no decorrer da
negocia√ß√£o;
¬∑ Constantes nomeadas s√£o constantes da linguagem MQL5;
¬∑ Estruturas de dados descrevem formatos de armazenamento de dados utilizados;
¬∑ C√≥digos de erros e avisos descrevem mensagens do compilador e respostas do servidor de
negocia√ß√£o a solicita√ß√µes de negocia√ß√£o;
¬∑ Constantes de entrada/sa√≠da s√£o projetados para trabalhar com fun√ß√µes de arquivo e exibir de
mensagens na tela atrav√©s da fun√ß√£o MessageBox().</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
322
<h3>Constantes de Gr√°fico</h3>
As constantes descrevendo v√°rias propriedades de gr√°ficos s√£o agrupadas na seguinte forma:
¬∑ Tipos de eventos ‚Äì eventos que ocorrem quando se trabalha com gr√°ficos; 
¬∑ Janelas de tempo (timeframes) de gr√°fico ‚Äì per√≠odos incorporados padr√£o;
¬∑ Propriedades de gr√°fico ‚Äì identificadores que s√£o usados como par√¢metros de fun√ß√µes de gr√°fico;
¬∑ Constantes de posicionamento - valor de um par√¢metro da fun√ß√£o ChartNavigate();
¬∑ Exibi√ß√£o de gr√°ficos - defini√ß√£o da apar√™ncia do gr√°fico.
 </p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
323
<h3>Tipos de Eventos de Gr√°ficos</h3>
Existem 11 tipos de eventos que podem ser processados usando a fun√ß√£o pr√©-definida OnChartEvent().
Para eventos customizados 65535 identificadores s√£o fornecidos na faixa de CHARTEVENT_CUSTOM a
<h3>CHARTEVENT_CUSTOM_LAST</h3>
inclusive. 
<h3>Para</h3>
gerar 
um 
evento 
customizado, 
a 
fun√ß√£o
EventChartCustom() deve ser usada.
<h3>ENUM_CHART_EVENT</h3>
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>CHARTEVENT_KEYDOWN</h3>
<h3>Teclada</h3>
<h3>CHARTEVENT_MOUSE_MOVE</h3>
Movimento de mouse, cliques de mouse (se
<h3>CHART_EVENT_MOUSE_MOVE=true √© definido</h3>
para o gr√°fico)
<h3>CHARTEVENT_MOUSE_WHEEL</h3>
Pressionada o rodada a roda do mouse (se
definida 
a 
propriedade 
para 
o 
gr√°fico
<h3>CHART_EVENT_MOUSE_WHEEL=true)</h3>
<h3>CHARTEVENT_OBJECT_CREATE</h3>
<h3>Objeto</h3>
gr√°fico 
criado 
(se
<h3>CHART_EVENT_OBJECT_CREATE=true √© definido</h3>
para o gr√°fico)
<h3>CHARTEVENT_OBJECT_CHANGE</h3>
<h3>Propriedade do objeto gr√°fico alterada via</h3>
janela de di√°logo de propriedades
<h3>CHARTEVENT_OBJECT_DELETE</h3>
<h3>Objeto</h3>
gr√°ficoexclu√≠do 
(se
<h3>CHART_EVENT_OBJECT_DELETE=true √© definido</h3>
para o gr√°fico)
<h3>CHARTEVENT_CLICK</h3>
<h3>Dar um clique em um gr√°fico</h3>
<h3>CHARTEVENT_OBJECT_CLICK</h3>
Dar um clique em um objeto gr√°fico
<h3>CHARTEVENT_OBJECT_DRAG</h3>
<h3>Arrastar e soltar um objeto gr√°fico</h3>
<h3>CHARTEVENT_OBJECT_ENDEDIT</h3>
Fim de edi√ß√£o de texto no objeto gr√°fico Edit
<h3>CHARTEVENT_CHART_CHANGE</h3>
Altera√ß√£o do tamanho do gr√°fico ou modifica√ß√£o
das propriedades do gr√°fico atrav√©s da janela de
<h3>Propriedades</h3>
<h3>CHARTEVENT_CUSTOM</h3>
O n√∫mero inicial de um evento de uma faixa de
eventos customizados
<h3>CHARTEVENT_CUSTOM_LAST</h3>
O n√∫mero final de um evento de uma faixa de
eventos customizados
Para cada tipo de evento, os par√¢metros de entrada da fun√ß√£o OnChartEvent() t√™m valores definidos
que s√£o requeridos para o processamento deste evento. Os eventos e valores passados atrav√©s destes
par√¢metros s√£o listados na tabela abaixo.</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
324
<h3>Evento</h3>
<h3>Valor</h3>
do
par√¢metro id
<h3>Valor</h3>
do
par√¢metro
lparam
<h3>Valor</h3>
do
par√¢metro
dparam
<h3>Valor</h3>
do
par√¢metro
sparam
<h3>Evento de uma</h3>
teclada
<h3>CHARTEVENT_KE</h3>
<h3>YDOWN</h3>
c√≥digo de uma
tecla pressionada
<h3>Repita</h3>
a
contagem 
(o
n√∫mero de vezes
que a tecla √©
repetida 
como
um resultado de
que 
o 
usu√°rio
pressiona 
a
tecla)
<h3>O valor da string</h3>
de uma pequena
m√°scara 
de
descrever 
o
estado de bot√µes
do teclado
<h3>Eventos</h3>
de
mouse(se
<h3>CHART_EVENT_</h3>
<h3>MOUSE_MOVE=tr</h3>
ue 
√© 
definido
para o gr√°fico)
<h3>CHARTEVENT_MO</h3>
<h3>USE_MOVE</h3>
a coordenada X
a coordenada Y
<h3>O valor de string</h3>
de uma m√°scara
de 
bites
descrevendo 
o
estado de bot√µes
de mouse
<h3>Evento da roda</h3>
do mouse (se,
para o gr√°fico,
definida 
a
propriedade
<h3>CHART_EVENT_</h3>
<h3>MOUSE_WHEEL=</h3>
true)
<h3>CHARTEVENT_MO</h3>
<h3>USE_WHEEL</h3>
<h3>Sinalizadores de</h3>
estados de teclas
e 
bot√µes 
do
mouse,
coordenadas X e
<h3>Y do mouse. A</h3>
descri√ß√£o √© feita
no 
exemplo
abaixo
<h3>Valor Delta</h3>
de
rolagem de roda
de mouse
‚Äî
<h3>Evento</h3>
de
cria√ß√£o 
de
objeto gr√°fico(se
<h3>CHART_EVENT_O</h3>
<h3>BJECT_CREATE=t</h3>
rue √© definido
para o gr√°fico)
<h3>CHARTEVENT_OB</h3>
<h3>JECT_CREATE</h3>
‚Äî
‚Äî
<h3>Nome do objeto</h3>
gr√°fico criado
<h3>Evento</h3>
de
mudan√ßa de uma
propriedade 
de
objeto via janela
de 
di√°logo 
de
propriedades
<h3>CHARTEVENT_OB</h3>
<h3>JECT_CHANGE</h3>
‚Äî
‚Äî
<h3>Nome do objeto</h3>
gr√°fico
modificado
<h3>Evento</h3>
de
exclus√£o 
de
objeto 
gr√°fico
(se
<h3>CHART_EVENT_O</h3>
<h3>BJECT_DELETE=t</h3>
<h3>CHARTEVENT_OB</h3>
<h3>JECT_DELETE</h3>
‚Äî
‚Äî
<h3>Nome do objeto</h3>
gr√°fico exclu√≠do</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
325
<h3>Evento</h3>
<h3>Valor</h3>
do
par√¢metro id
<h3>Valor</h3>
do
par√¢metro
lparam
<h3>Valor</h3>
do
par√¢metro
dparam
<h3>Valor</h3>
do
par√¢metro
sparam
rue est√° definido
para o gr√°fico)
<h3>Evento de</h3>
um
click de mouse
no gr√°fico
<h3>CHARTEVENT_C</h3>
<h3>LICK</h3>
a coordenada X
a coordenada Y
‚Äî
<h3>Evento de</h3>
um
click de mouse
num 
objeto
gr√°fico
pertencente 
ao
gr√°fico
<h3>CHARTEVENT_OB</h3>
<h3>JECT_CLICK</h3>
a coordenada X
a coordenada Y
<h3>Nome do objeto</h3>
gr√°fico, na qual
o evento ocorreu
<h3>Evento de</h3>
um
objeto 
gr√°fico
arrastado usando
o mouse
<h3>CHARTEVENT_OB</h3>
<h3>JECT_DRAG</h3>
‚Äî
‚Äî
<h3>Nome do objeto</h3>
gr√°fico movido
<h3>Evento da edi√ß√£o</h3>
de 
texto
finalizada 
na
caixa de entrada
do objeto gr√°fico
<h3>LabelEdit</h3>
<h3>CHARTEVENT_OB</h3>
<h3>JECT_ENDEDIT</h3>
‚Äî
‚Äî
<h3>Nome do objeto</h3>
gr√°fico
<h3>LabelEdit,</h3>
cuja
edi√ß√£o de texto
foi conclu√≠da
<h3>Evento</h3>
de
altera√ß√£o 
do
tamanho 
do
gr√°fico 
ou
modifica√ß√£o das
propriedades do
gr√°fico 
atrav√©s
da 
janela 
de
<h3>Propriedades</h3>
<h3>CHARTEVENT_C</h3>
<h3>HART_CHANGE</h3>
‚Äî
‚Äî
‚Äî
<h3>ID do evento de</h3>
usu√°rio 
sob 
<h3>N</h3>
n√∫mero
<h3>CHARTEVENT_CU</h3>
<h3>STOM+N</h3>
<h3>Valor</h3>
definido
pela 
fun√ß√£o
<h3>EventChartCusto</h3>
m()
<h3>Valor</h3>
definido
pela 
fun√ß√£o
<h3>EventChartCusto</h3>
m()
<h3>Valor</h3>
definido
pela 
fun√ß√£o
<h3>EventChartCusto</h3>
m()
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
#define KEY_NUMPAD_5       12
#define KEY_LEFT           37
#define KEY_UP             38
#define KEY_RIGHT          39
#define KEY_DOWN           40
#define KEY_NUMLOCK_DOWN   98</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
326
</p>
<pre><code class="language-mql5">
#define KEY_NUMLOCK_LEFT  100
#define KEY_NUMLOCK_5     101
#define KEY_NUMLOCK_RIGHT 102
#define KEY_NUMLOCK_UP    104
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do Expert¬†                               |
//+------------------------------------------------------------------+
int OnInit()
  {
//---
   Print(&quot;O expert com nome &quot;,MQL5InfoString(MQL5_PROGRAM_NAME),&quot; est√° executando&quot;);
//--- Ativar eventos de cria√ß√£o de objetos
   ChartSetInteger(ChartID(),CHART_EVENT_OBJECT_CREATE,true);
//--- Ativar eventos de exclus√£o de objetos
   ChartSetInteger(ChartID(),CHART_EVENT_OBJECT_DELETE,true);
//--- A atualiza√ß√£o for√ßada das propriedades do gr√°fico garante a prontid√£o para o pro
   ChartRedraw();
//---
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√µes ChartEvent¬†                                              |
//+------------------------------------------------------------------+
void OnChartEvent(const int id,         // Identificador de evento
                  const long&amp; lparam,   // Par√¢metro de evento de tipo long
                  const double&amp; dparam, // Par√¢metro de evento de tipo double
                  const string&amp; sparam  // Par√¢metro de evento de tipo string
                  )
  {
//--- o bot√£o esquerdo do mouse foi pressionado no gr√°fico
   if(id==CHARTEVENT_CLICK)
     {
      Print(&quot;As coordenadas do clique do mouse sobre o gr√°fico s√£o: x = &quot;,lparam,&quot;  y 
     }
//--- o mouse foi clicado sobre o objeto gr√°fico
   if(id==CHARTEVENT_OBJECT_CLICK)
     {
      Print(&quot;O mouse foi clicado sobre o objeto com o nome &#x27;&quot;+sparam+&quot;&#x27;&quot;);
     }
//--- a tecla foi pressionada
   if(id==CHARTEVENT_KEYDOWN)
     {
      switch(lparam)
        {
         case KEY_NUMLOCK_LEFT:  Print(&quot;O KEY_NUMLOCK_LEFT foi pressionado&quot;);   break;
         case KEY_LEFT:          Print(&quot;O KEY_LEFT foi pressionado&quot;);           break;
         case KEY_NUMLOCK_UP:    Print(&quot;O KEY_NUMLOCK_UP foi pressionado&quot;);     break;
         case KEY_UP:            Print(&quot;O KEY_UP foi pressionado&quot;);             break;
         case KEY_NUMLOCK_RIGHT: Print(&quot;O KEY_NUMLOCK_RIGHT foi pressionado&quot;);  break;</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
327
</p>
<pre><code class="language-mql5">
         case KEY_RIGHT:         Print(&quot;O KEY_RIGHT foi pressionado&quot;);          break;
         case KEY_NUMLOCK_DOWN:  Print(&quot;O KEY_NUMLOCK_DOWN foi pressionado&quot;);   break;
         case KEY_DOWN:          Print(&quot;O KEY_DOWN foi pressionado&quot;);           break;
         case KEY_NUMPAD_5:      Print(&quot;O KEY_NUMPAD_5 foi pressionado&quot;);       break;
         case KEY_NUMLOCK_5:     Print(&quot;O KEY_NUMLOCK_5 foi pressionado&quot;);      break;
         default:                Print(&quot;Algumas teclas n√£o listadas foram pressionadas
        }
      ChartRedraw();
     }
//--- o objeto foi exclu√≠do
   if(id==CHARTEVENT_OBJECT_DELETE)
     {
      Print(&quot;O objeto com o nome &quot;,sparam,&quot; foi exclu√≠do&quot;);
     }
//--- o objeto foi criado
   if(id==CHARTEVENT_OBJECT_CREATE)
     {
      Print(&quot;O objeto com o nome &quot;,sparam,&quot; foi criado&quot;);
     }
//--- o objeto foi movido ou suas coordenadas de ponto de ancoragem foram alteradas
   if(id==CHARTEVENT_OBJECT_DRAG)
     {
      Print(&quot;O ponto de ancoragem das coordenadas do objeto com o nome &quot;,sparam,&quot; foi 
     }
//--- o texto na Edi√ß√£o do objeto foi alterado
   if(id==CHARTEVENT_OBJECT_ENDEDIT)
     {
      Print(&quot;O texto no campo da Edi√ß√£o do objeto com o nome &quot;,sparam,&quot; foi alterado&quot;)
     }
</code></pre>
<p>
  }
Para o evento CHARTEVENT_MOUSE_MOVE, o par√¢metro string sparam Cont√©m informa√ß√µes sobre o
estado do teclado e bot√µes do mouse:
<h3>Bit</h3>
<h3>Descri√ß√£o</h3>
1
<h3>Estado do bot√£o esquerdo do mouse</h3>
2
<h3>Estado do bot√£o direito do mouse</h3>
3
<h3>Estado do bot√£o SHIFT</h3>
4
<h3>Estado do bot√£o CTRL</h3>
5
Estado do bot√£o do meio do mouse
6
Estado do primeiro bot√£o extra do mouse
7
Estado do segundo bot√£o extra do mouse
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
328
</p>
<pre><code class="language-mql5">
//| Fun√ß√£o de inicializa√ß√£o do Expert¬†                               |
//+------------------------------------------------------------------+
void OnInit()
  {
//--- habilitar mensagens do CHART_EVENT_MOUSE_MOVE
   ChartSetInteger(0,CHART_EVENT_MOUSE_MOVE,1);
// --- desativar o menu de contexto do gr√°fico (√† direita) 
   ChartSetInteger(0,CHART_CONTEXT_MENU,0);     
// --- desativar a cruz (pelo bot√£o do meio)  
   ChartSetInteger(0,CHART_CROSSHAIR_TOOL,0); 
//--- a atualiza√ß√£o for√ßada das propriedades do gr√°fico garante a prontid√£o para o pro
   ChartRedraw();
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| MouseState                                                       |
//+------------------------------------------------------------------+
string MouseState(uint state)
  {
   string res;
   res+=&quot;\nML: &quot;   +(((state&amp; 1)== 1)?&quot;DN&quot;:&quot;UP&quot;);   // mouse esquerdo
   res+=&quot;\nMR: &quot;   +(((state&amp; 2)== 2)?&quot;DN&quot;:&quot;UP&quot;);   // mouse direito
   res+=&quot;\nMM: &quot;   +(((state&amp;16)==16)?&quot;DN&quot;:&quot;UP&quot;);   // mouse do meio
   res+=&quot;\nMX: &quot;   +(((state&amp;32)==32)?&quot;DN&quot;:&quot;UP&quot;);   // mouse primeiro X key
   res+=&quot;\nMY: &quot;   +(((state&amp;64)==64)?&quot;DN&quot;:&quot;UP&quot;);   // mouse segundo X key
   res+=&quot;\nSHIFT: &quot;+(((state&amp; 4)== 4)?&quot;DN&quot;:&quot;UP&quot;);   // shift key
   res+=&quot;\nCTRL: &quot; +(((state&amp; 8)== 8)?&quot;DN&quot;:&quot;UP&quot;);   // control key
   return(res);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√µes ChartEvent¬†                                              |
//+------------------------------------------------------------------+
void OnChartEvent(const int id,const long &amp;lparam,const double &amp;dparam,const string &amp;s
  {
   if(id==CHARTEVENT_MOUSE_MOVE)
      Comment(&quot;POINT: &quot;,(int)lparam,&quot;,&quot;,(int)dparam,&quot;\n&quot;,MouseState((uint)sparam));
</code></pre>
<p>
  }
Para o evento CHARTEVENT_MOUSE_WHEEL, os par√¢metros lparam e dparam cont√™m informa√ß√µes
sobre o estado da tecla Ctrl, Shift, dos bot√µes do mouse, coordenadas da cursor e dimens√£o da
rolagem da roda do mouse. Para entender melhor o funcionamento deste Expert Advisor no gr√°fico,
role a roda do mouse pressionando os diversos bot√µes e teclas descritos no c√≥digo.
<h3>Exemplo de processamento de evento CHARTEVENT_MOUSE_WHEEL:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Expert initialization function                                   |
//+------------------------------------------------------------------+
</code></pre>
<p>
init OnInit()</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
329
</p>
<pre><code class="language-mql5">
  {
//--- ativa√ß√£o da mensagem de rolagem de roda do mouse
   ChartSetInteger(0,CHART_EVENT_MOUSE_WHEEL,1);
//--- a atualiza√ß√£o for√ßada das propriedades do gr√°fico garante a prontid√£o para o pro
   ChartRedraw();
//---
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| ChartEvent function                                              |
//+------------------------------------------------------------------+
void OnChartEvent(const int id,const long &amp;lparam,const double &amp;dparam,const string &amp;s
  {
   if(id==CHARTEVENT_MOUSE_WHEEL)
     {
      //--- analisemos o estado dos bot√µes e da roda do mouse para este evento
      int flg_keys = (int)(lparam&gt;&gt;32);          // sinalizador de estado de teclas Ct
      int x_cursor = (int)(short)lparam;         // coordenada X, em que acontece o ev
      int y_cursor = (int)(short)(lparam&gt;&gt;16);   // coordenada Y, em que acontece o ev
      int delta    = (int)dparam;                // valor total de rolagem da roda, √© 
      //--- processamos o sinalizador 
      string str_keys=&quot;&quot;;
      if((flg_keys&amp;0x0001)!=0) str_keys+=&quot;LMOUSE &quot;;
      if((flg_keys&amp;0x0002)!=0) str_keys+=&quot;RMOUSE &quot;;
      if((flg_keys&amp;0x0004)!=0) str_keys+=&quot;SHIFT &quot;;
      if((flg_keys&amp;0x0008)!=0) str_keys+=&quot;CTRL &quot;;
      if((flg_keys&amp;0x0010)!=0) str_keys+=&quot;MMOUSE &quot;;
      if((flg_keys&amp;0x0020)!=0) str_keys+=&quot;X1MOUSE &quot;;
      if((flg_keys&amp;0x0040)!=0) str_keys+=&quot;X2MOUSE &quot;;
      
      if(str_keys!=&quot;&quot;)
         str_keys=&quot;, keys=&#x27;&quot;+StringSubstr(str_keys,0,StringLen(str_keys)-1) + &quot;&#x27;&quot;;
      PrintFormat(&quot;%s: X=%d, Y=%d, delta=%d%s&quot;,EnumToString(CHARTEVENT_MOUSE_WHEEL),x_
     }
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+ /*
   Exemplo de sa√≠da
   CHARTEVENT_MOUSE_WHEEL: Ctrl pressed: X=193, Y=445, delta=-120
   CHARTEVENT_MOUSE_WHEEL: Shift pressed: X=186, Y=446, delta=120
   CHARTEVENT_MOUSE_WHEEL:  X=178, Y=447, delta=-120
   CHARTEVENT_MOUSE_WHEEL:  X=231, Y=449, delta=120
   CHARTEVENT_MOUSE_WHEEL: MiddleButton pressed: X=231, Y=449, delta=120
   CHARTEVENT_MOUSE_WHEEL: LeftButton pressed: X=279, Y=320, delta=-120
   CHARTEVENT_MOUSE_WHEEL: RightButton pressed: X=253, Y=330, delta=120  */
</code></pre>
<p>
<h3>Veja Tamb√©m</h3>
Fun√ß√µes de Manipula√ß√£o de Evento, Trabalhando com eventos</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
330
<h3>Janela temporal de Gr√°fico</h3>
Todas as janelas de tempo (timeframes) pr√©-definidas de gr√°ficos t√™m identificadores √∫nicos. O
identificador PERIOD_CURRENT significa o per√≠odo corrente de um gr√°fico, no qual um programa MQL5
est√° rodando.
<h3>ENUM_TIMEFRAMES</h3>
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>PERIOD_CURRENT</h3>
<h3>Janela de tempo corrente</h3>
<h3>PERIOD_M1</h3>
1 minuto
<h3>PERIOD_M2</h3>
2 minutos
<h3>PERIOD_M3</h3>
3 minutos
<h3>PERIOD_M4</h3>
4 minutos
<h3>PERIOD_M5</h3>
5 minutos
<h3>PERIOD_M6</h3>
6 minutos
<h3>PERIOD_M10</h3>
10 minutos
<h3>PERIOD_M12</h3>
12 minutos
<h3>PERIOD_M15</h3>
15 minutos
<h3>PERIOD_M20</h3>
20 minutos
<h3>PERIOD_M30</h3>
30 minutos
<h3>PERIOD_H1</h3>
1 hora
<h3>PERIOD_H2</h3>
2 horas
<h3>PERIOD_H3</h3>
3 horas
<h3>PERIOD_H4</h3>
4 horas
<h3>PERIOD_H6</h3>
6 horas
<h3>PERIOD_H8</h3>
8 horas
<h3>PERIOD_H12</h3>
12 horas
<h3>PERIOD_D1</h3>
1 dia
<h3>PERIOD_W1</h3>
1 semana
<h3>PERIOD_MN1</h3>
1 m√™s
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
   string chart_name=&quot;test_Object_Chart&quot;;
   Print(&quot;Vamos tentar criar um objeto gr√°fico com o nome &quot;,chart_name);
//--- Se tal objeto n√£o existir - cri√°-lo</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
331
</p>
<pre><code class="language-mql5">
   if(ObjectFind(0,chart_name)&lt;0)ObjectCreate(0,chart_name,OBJ_CHART,0,0,0,0,0);
//--- Define o ativo
   ObjectSetString(0,chart_name,OBJPROP_SYMBOL,&quot;EURUSD&quot;);
//--- Define a coordenada X do ponto de ancoragem
   ObjectSetInteger(0,chart_name,OBJPROP_XDISTANCE,100);
//--- Define a coordenada Y do ponto de ancoragem
   ObjectSetInteger(0,chart_name,OBJPROP_YDISTANCE,100);
//--- Define a largura do gr√°fico
   ObjectSetInteger(0,chart_name,OBJPROP_XSIZE,400);
//--- Define a altura
   ObjectSetInteger(0,chart_name,OBJPROP_YSIZE,300);
//--- Define a janela de tempo
   ObjectSetInteger(0,chart_name,OBJPROP_PERIOD,PERIOD_D1);
//--- Define escala (de 0 a 5)
   ObjectSetDouble(0,chart_name,OBJPROP_SCALE,4);
//--- Desativa a sele√ß√£o por mouse
   ObjectSetInteger(0,chart_name,OBJPROP_SELECTABLE,false);
</code></pre>
<p>
<h3>Identificadores de timeseries</h3>
Identificadores de timeseries s√£o usados ‚Äãnas fun√ß√µes iHighest() e iLowest(). Pode ser um dos valores
da enumera√ß√£o 
<h3>ENUM_SERIESMODE</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>MODE_OPEN</h3>
<h3>Pre√ßo de abertura</h3>
<h3>MODE_LOW</h3>
<h3>Pre√ßo m√≠nimo</h3>
<h3>MODE_HIGH</h3>
<h3>Pre√ßo m√°ximo</h3>
<h3>MODE_CLOSE</h3>
<h3>Pre√ßo de fechamento</h3>
<h3>MODE_VOLUME</h3>
<h3>Volume de ticks</h3>
<h3>MODE_REAL_VOLUME</h3>
<h3>Volume real</h3>
<h3>MODE_SPREAD</h3>
<h3>Spread</h3>
<h3>Veja Tamb√©m</h3>
PeriodSeconds, Period, Data e Hora, Visibilidade de objetos</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
332
<h3>Propriedades de Gr√°fico</h3>
Identificadores de enumeradores ENUM_CHART_PROPERTY s√£o usados como par√¢metros de fun√ß√µes
para trabalhar com gr√°ficos. A abreviatura de r/o na coluna &quot;Tipo de Propriedade&quot; significa que esta
propriedade √© somente de leitura e n√£o pode ser alterada. A abreviatura w/o na coluna &quot;Tipo de
Propriedade&quot; significa que esta propriedade √© somente leitura e n√£o pode ser recebida. Ao acessar
certas propriedades, √© necess√°rio especificar um par√¢metro adicional, que serve para indicar o
n√∫mero da sub-janela do gr√°fico. 0 significa a janela principal.
As fun√ß√µes que definem as propriedades do gr√°fico s√£o realmente utilizadas para enviar comandos de
altera√ß√£o no gr√°fico. Se essas fun√ß√µes forem executadas com √™xito, o comando ser√° inclu√≠do na fila
comum dos eventos do gr√°fico. As altera√ß√µes s√£o implementadas para o gr√°fico ao manipular a fila
dos eventos gr√°ficos.
Assim, n√£o espere uma atualiza√ß√£o visual imediata do gr√°fico ap√≥s chamar essas fun√ß√µes.
Geralmente, o gr√°fico √© atualizado automaticamente pelo terminal ap√≥s os eventos de altera√ß√£o - uma
nova chegada de cota√ß√£o, redimensionando a janela do gr√°fico, etc. Use a fun√ß√£o ChartRedraw() Para
for√ßar a atualizar do gr√°fico.
<h3>Para fun√ß√µes ChartSetInteger() e ChartGetInteger()</h3>
<h3>ENUM_CHART_PROPERTY_INTEGER</h3>
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo de Propriedade</h3>
<h3>CHART_SHOW</h3>
Plotagem do gr√°fico de pre√ßos. Se estiver
definido o valor false, ser√° desativada a
plotagem de quaisquer atributos do gr√°fico
de pre√ßos e ser√£o exclu√≠dos todos os
recuos das bordas do gr√°fico, isto √©:
escalas de tempo e pre√ßo, barra de
navega√ß√£o r√°pida, eventos de Calend√°rio,
r√≥tulos de transa√ß√µes, dicas de indicadores
e barras, sub-janela de 
indicadores,
histogramas de volumes, etc.
A desativa√ß√£o da plotagem √© uma solu√ß√£o
ideal 
para 
criar 
uma 
interface
personalizada de programa com utiliza√ß√£o
de recursos gr√°ficos.
<h3>Os objetos gr√°ficos s√£o plotados sempre</h3>
independentemente do valor definido da
propriedade CHART_SHOW.
bool
<h3>CHART_IS_OBJECT</h3>
<h3>Identificado</h3>
objeto 
de
&quot;Gr√°fico&quot; (OBJ_CHART) - retorna true para
um objeto gr√°fico. Retorna false para um
gr√°fico real
</p>
<pre><code class="language-mql5">
bool   r/o
</code></pre>
<p>
<h3>CHART_BRING_TO_TO</h3>
<h3>P</h3>
Exibe o gr√°fico no topo de outros gr√°ficos
</p>
<pre><code class="language-mql5">
bool   </p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
333
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo de Propriedade</h3>
<h3>CHART_CONTEXT_ME</h3>
<h3>NU</h3>
<h3>Habilitar/desabilitar o acesso ao menu de</h3>
contexto pressionando o bot√£o direito do
mouse.
<h3>O</h3>
valor 
<h3>CHART_CONTEXT_MENU=false</h3>
desativa apenas o menu de contexto do
gr√°fico, ao acontecer isto, o menu de
contexto, para objetos no gr√°fico, fica
dispon√≠vel.
</p>
<pre><code class="language-mql5">
bool  (valor por padr√£o true)
</code></pre>
<p>
<h3>CHART_CROSSHAIR_T</h3>
<h3>OOL</h3>
<h3>Habilitar/desabilitar</h3>
o 
acesso 
ao
instrumento &quot;Cruz&quot; pressionando o bot√£o
do meio do mouse.
</p>
<pre><code class="language-mql5">
bool  (valor por padr√£o true)
</code></pre>
<p>
<h3>CHART_MOUSE_SCRO</h3>
<h3>LL</h3>
<h3>Rolagem</h3>
do 
gr√°fico 
horizontalmente
usando o bot√£o esquerdo do mouse.
<h3>Rolagem vertical tamb√©m est√° dispon√≠vel</h3>
se for definido como true o valor de todas
as 
seguintes 
propriedades:
<h3>CHART_SCALEFIX,</h3>
<h3>CHART_SCALEFIX_11</h3>
ou CHART_SCALE_PT_PER_BAR
<h3>Se</h3>
<h3>CHART_MOUSE_SCROLL=false,</h3>
a
rolagem do gr√°fico atrav√©s da roda do
mouse estar√° indispon√≠vel.
bool
<h3>CHART_EVENT_MOUS</h3>
<h3>E_WHEEL</h3>
Envio de todos os programas mql5 para o
gr√°fico de notifica√ß√µes sobre eventos da
roda 
do 
mouse
(CHARTEVENT_MOUSE_WHEEL)
</p>
<pre><code class="language-mql5">
bool  (valor por padr√£o true)
</code></pre>
<p>
<h3>CHART_EVENT_MOUS</h3>
<h3>E_MOVE</h3>
<h3>Eventos</h3>
<h3>CHARTEVENT_MOUSE_MOVE)</h3>
envia notifica√ß√µes de movimento de
mouse e clique de mouse a todos os
programas MQL5 num gr√°fico
bool
<h3>CHART_EVENT_OBJEC</h3>
<h3>T_CREATE</h3>
Envia uma notifica√ß√£o de um evento de
cria√ß√£o 
de 
novo 
objeto
(CHARTEVENT_OBJECT_CREATE) 
para
todos os programas MQL5 em um gr√°fico
bool
<h3>CHART_EVENT_OBJEC</h3>
<h3>T_DELETE</h3>
Envia uma notifica√ß√£o de um evento de
exclus√£o 
de 
objeto
(CHARTEVENT_OBJECT_DELETE) 
para
todos os programas MQL5 em um gr√°fico
bool
<h3>CHART_MODE</h3>
Tipo de gr√°fico (candles, barras ou linha)
</p>
<pre><code class="language-mql5">
enum 
 
 
 
</code></pre>
<p>
<h3>ENUM_CHART_MODE</h3>
<h3>CHART_FOREGROUND</h3>
<h3>Gr√°fico de pre√ßos no primeiro plano</h3>
bool
<h3>CHART_SHIFT</h3>
Modo de encaixe do gr√°fico de pre√ßo a
partir da borda direita
bool</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
334
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo de Propriedade</h3>
<h3>CHART_AUTOSCROLL</h3>
<h3>Modo de movimenta√ß√£o autom√°tica para a</h3>
borda direita do gr√°fico
bool
<h3>CHART_KEYBOARD_C</h3>
<h3>ONTROL</h3>
<h3>Autoriza√ß√£o para controlar</h3>
o 
gr√°fico
usando 
as 
teclas 
(&quot;Home&quot;, 
&quot;End&quot;,
&quot;PageUp&quot;, &quot;+&quot;, &quot;-&quot;, &quot;Seta para cima&quot;, 
etc.). 
<h3>Ap√≥s</h3>
definir
<h3>CHART_KEYBOARD_CONTROL=false,</h3>
√©
poss√≠vel desativar o enrolamento e o
ajuste de escala do gr√°fico, no entanto, ao
fazer isto, mantem-se a possibilidade de
receber eventos, ao clicar essas teclas, em
OnChartEvent().
bool
<h3>CHART_QUICK_NAVIG</h3>
<h3>ATION</h3>
<h3>Permite ao gr√°fico interceptar as teclas</h3>
Space e Enter para ativar a barra de
navega√ß√£o. A barra de navega√ß√£o r√°pida √©
exibida 
automaticamente 
abaixo 
do
gr√°fico, ao clicar duas vezes ou pressionar
as teclas Space/Enter. Desse modo, √©
poss√≠vel alterar rapidamente o s√≠mbolo,
timeframe e data da primeira barra
vis√≠vel.
bool
<h3>CHART_SCALE</h3>
<h3>Escala</h3>
</p>
<pre><code class="language-mql5">
int        de 0 a 5
</code></pre>
<p>
<h3>CHART_SCALEFIX</h3>
<h3>Modo de escala fixo</h3>
bool
<h3>CHART_SCALEFIX_11</h3>
<h3>Modo de escala 1:1</h3>
bool
<h3>CHART_SCALE_PT_PE</h3>
<h3>R_BAR</h3>
Escala para ser especificada em pontos por
barra
bool
<h3>CHART_SHOW_TICKE</h3>
<h3>R</h3>
<h3>Exibi√ß√£o no canto superior esquerdo do</h3>
ticker 
do 
s√≠mbolo. 
<h3>Ao</h3>
definir
<h3>CHART_SHOW_TICKER com o valor false</h3>
simultaneamente 
tamb√©m 
define
<h3>CHART_SHOW_OHLC</h3>
como 
false 
e
desativa a exibi√ß√£o de OHLC
bool
<h3>CHART_SHOW_OHLC</h3>
<h3>Exibi√ß√£o no canto superior esquerdo do</h3>
ticker 
do 
s√≠mbolo. 
<h3>Ao</h3>
definir
<h3>CHART_SHOW_OHLC com o valor true</h3>
simultaneamente 
tamb√©m 
define
<h3>CHART_SHOW_TICKER como true e ativa a</h3>
exibi√ß√£o de ticker
bool
<h3>CHART_SHOW_BID_LI</h3>
<h3>NE</h3>
Exibe valores de pre√ßo de venda como uma
linha horizontal em um gr√°fico
bool
<h3>CHART_SHOW_ASK_LI</h3>
<h3>NE</h3>
Exibe valores de pre√ßo de compra como
uma linha horizontal em um gr√°fico
bool</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
335
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo de Propriedade</h3>
<h3>CHART_SHOW_LAST_</h3>
<h3>LINE</h3>
Exibe valores de √∫ltimo pre√ßo como uma
linha horizontal em um gr√°fico
bool
<h3>CHART_SHOW_PERIO</h3>
<h3>D_SEP</h3>
<h3>Exibe separadores verticais entre per√≠odos</h3>
adjacentes
bool
<h3>CHART_SHOW_GRID</h3>
<h3>Exibe grade no gr√°fico</h3>
bool
<h3>CHART_SHOW_VOLU</h3>
<h3>MES</h3>
<h3>Exibe volume no gr√°fico</h3>
</p>
<pre><code class="language-mql5">
enum 
 
 
 
</code></pre>
<p>
<h3>ENUM_CHART_VOLUME_MOD</h3>
<h3>E</h3>
<h3>CHART_SHOW_OBJEC</h3>
<h3>T_DESCR</h3>
<h3>Descri√ß√µes pop-up de objetos gr√°ficos</h3>
bool
<h3>CHART_SHOW_TRADE</h3>
_HISTORY
<h3>Exibi√ß√£o das negocia√ß√µes a partir do</h3>
hist√≥rico de negocia√ß√£o no gr√°fico como
setas de entradas/sa√≠das Veja descri√ß√µes
da op√ß√£o &quot;Mostrar hist√≥rico de negocia√ß√£o&quot;
nas configura√ß√µes da plataforma.
bool
<h3>CHART_VISIBLE_BARS</h3>
O n√∫mero de barras no gr√°fico que podem
ser exibidas
</p>
<pre><code class="language-mql5">
int r/o
</code></pre>
<p>
<h3>CHART_WINDOWS_TO</h3>
<h3>TAL</h3>
O n√∫mero total de janelas de gr√°ficos,
incluindo sub-janelas de indicadores
</p>
<pre><code class="language-mql5">
int r/o
</code></pre>
<p>
<h3>CHART_WINDOW_IS_</h3>
<h3>VISIBLE</h3>
<h3>Visibilidade de sub-janelas</h3>
</p>
<pre><code class="language-mql5">
bool r/o   modificador -
</code></pre>
<p>
n√∫mero de sub-janela
<h3>CHART_WINDOW_HA</h3>
<h3>NDLE</h3>
<h3>Manuseio da janela do gr√°fico (HWND)</h3>
</p>
<pre><code class="language-mql5">
int r/o
</code></pre>
<p>
<h3>CHART_WINDOW_YDI</h3>
<h3>STANCE</h3>
A dist√¢ncia entre a moldura superior da
sub-janela do indicador e a moldura
superior da janela do gr√°fico principal, ao
longo do eixo Y vertical, in pixels. No caso
de um evento de mouse, as coordenadas
do cursor s√£o passadas em termos das
coordenadas da janela do gr√°fico principal,
enquanto que as coordenadas de objetos
gr√°ficos em uma sub-janela do indicador
s√£o definidas em rela√ß√£o ao canto superior
esquerdo da sub-janela.
O valor √© requerido para converter as
coordenadas absolutas do gr√°fico principal
em coordenadas locais da sub-janela para
correto trabalho com os objetos gr√°ficos,
cujas coordenadas s√£o definidas 
em
rela√ß√£o ao canto superior esquerdo da
moldura da sub-janela.
</p>
<pre><code class="language-mql5">
int r/o     modificador -
</code></pre>
<p>
n√∫mero de sub-janela</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
336
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo de Propriedade</h3>
<h3>CHART_FIRST_VISIBLE</h3>
_BAR
<h3>N√∫mero das primeiras barras vis√≠veis no</h3>
gr√°fico. A indexa√ß√£o de barras √© a mesma
para s√©ries de tempo.
</p>
<pre><code class="language-mql5">
int r/o
</code></pre>
<p>
<h3>CHART_WIDTH_IN_BA</h3>
<h3>RS</h3>
<h3>Largura de gr√°fico em barras</h3>
</p>
<pre><code class="language-mql5">
int r/o
</code></pre>
<p>
<h3>CHART_WIDTH_IN_PI</h3>
<h3>XELS</h3>
<h3>Largura de gr√°fico em pixels</h3>
</p>
<pre><code class="language-mql5">
int r/o
</code></pre>
<p>
<h3>CHART_HEIGHT_IN_PI</h3>
<h3>XELS</h3>
<h3>Altura de gr√°fico em pixels</h3>
</p>
<pre><code class="language-mql5">
int      modificador - n√∫mero
</code></pre>
<p>
de sub-janela
<h3>CHART_COLOR_BACK</h3>
<h3>GROUND</h3>
<h3>Cor de fundo do gr√°fico</h3>
color
<h3>CHART_COLOR_FORE</h3>
<h3>GROUND</h3>
Cor dos eixos, escalas e linha OHLC
color
<h3>CHART_COLOR_GRID</h3>
<h3>Cor da grade</h3>
color
<h3>CHART_COLOR_VOLU</h3>
<h3>ME</h3>
Cor dos volumes e n√≠veis de abertura de
posi√ß√£o
color
<h3>CHART_COLOR_CHAR</h3>
<h3>T_UP</h3>
Cor para a barra de alta, sombras e bordas
de candles de alta
color
<h3>CHART_COLOR_CHAR</h3>
<h3>T_DOWN</h3>
Cor para a barra de baixa, sombras e
bordas de candles de baixa
color
<h3>CHART_COLOR_CHAR</h3>
<h3>T_LINE</h3>
Cor de gr√°fico de linha e cor de candles
&quot;Doji&quot; japoneses
color
<h3>CHART_COLOR_CAND</h3>
<h3>LE_BULL</h3>
Cor de corpo de um candle de alta
color
<h3>CHART_COLOR_CAND</h3>
<h3>LE_BEAR</h3>
Cor de corpo de um candle de baixa
color
<h3>CHART_COLOR_BID</h3>
Cor de n√≠vel de pre√ßo de venda
color
<h3>CHART_COLOR_ASK</h3>
Cor de n√≠vel de pre√ßo de compra
color
<h3>CHART_COLOR_LAST</h3>
Cor de linha do √∫ltimo pre√ßo de opera√ß√£o
executada
color
<h3>CHART_COLOR_STOP</h3>
_LEVEL
Cor de n√≠veis de ordem de stop (Stop Loss
e Take Profit)
color
<h3>CHART_SHOW_TRADE</h3>
_LEVELS
<h3>Exibi√ß√£o de n√≠veis de negocia√ß√£o no</h3>
gr√°fico (n√≠veis de abertura de posi√ß√£o,
Stop Loss, Take Profit e ordens pendentes
bool
<h3>CHART_DRAG_TRADE</h3>
_LEVELS
<h3>Permiss√£o para arrastar os n√≠veis de</h3>
negocia√ß√£o num gr√°fico com um mouse. O
bool</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
337
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo de Propriedade</h3>
modo de arrastar √© ativado pelo padr√£o
(valor true)
<h3>CHART_SHOW_DATE_</h3>
<h3>SCALE</h3>
Exibi√ß√£o da escala de tempo em um
gr√°fico
bool
<h3>CHART_SHOW_PRICE</h3>
_SCALE
Exibi√ß√£o da escala de pre√ßo em um gr√°fico
bool
<h3>CHART_SHOW_ONE_C</h3>
<h3>LICK</h3>
Showing the &quot;One click trading&quot; panel on a
chart
bool
<h3>CHART_IS_MAXIMIZE</h3>
<h3>D</h3>
<h3>Janela de gr√°fico maximizada</h3>
</p>
<pre><code class="language-mql5">
bool  r/o
</code></pre>
<p>
<h3>CHART_IS_MINIMIZED</h3>
<h3>Janela de gr√°fico minimizada</h3>
</p>
<pre><code class="language-mql5">
bool  r/o
</code></pre>
<p>
<h3>CHART_IS_DOCKED</h3>
A janela do gr√°fico √© fixa. Se for definido
o valor false, o gr√°fico pode ser arrastado
para fora do terminal
bool
<h3>CHART_FLOAT_LEFT</h3>
<h3>Coordenada</h3>
esquerda 
do 
gr√°fico
desacoplado em rela√ß√£o √† tela virtual
int
<h3>CHART_FLOAT_TOP</h3>
<h3>Coordenada</h3>
superior 
do 
gr√°fico
desacoplado em rela√ß√£o √† tela virtual
int
<h3>CHART_FLOAT_RIGHT</h3>
<h3>Coordenada direita do gr√°fico desacoplado</h3>
em rela√ß√£o √† tela virtual
int
<h3>CHART_FLOAT_BOTT</h3>
<h3>OM</h3>
<h3>Coordenada</h3>
inferior 
do 
gr√°fico
desacoplado em rela√ß√£o √† tela virtual
int
<h3>Para fun√ß√µes ChartSetDouble() e ChartGetDouble()</h3>
<h3>ENUM_CHART_PROPERTY_DOUBLE</h3>
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo de Propriedade</h3>
<h3>CHART_SHIFT_SIZE</h3>
<h3>O</h3>
tamanho 
da
barra 
zero
encaixada 
a
partir da borda
direita 
em
porcentagens
</p>
<pre><code class="language-mql5">
double  (de 10 to 50 porcento)
</code></pre>
<p>
<h3>CHART_FIXED_POSITION</h3>
<h3>Posi√ß√£o fixa do</h3>
gr√°fico a partir
da 
borda
esquerda 
em
valor percentual.
<h3>A posi√ß√£o fixa do</h3>
gr√°fico √© marcada
por um pequeno
double</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
338
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo de Propriedade</h3>
tri√¢ngulo cinza no
eixo 
do 
tempo
horizontal. Ele √©
exibido somente
se 
a 
rolagem
autom√°tica 
do
gr√°fico 
para 
a
direita 
na
chegada de um
tick (pre√ßo novo)
estiver
desabilitada (veja
a 
propriedade
<h3>CHART_AUTOSCR</h3>
<h3>OLL). A barra em</h3>
uma posi√ß√£o fixa
permanece 
no
mesmo lugar ao
se 
ampliar 
e
reduzir o gr√°fico.
<h3>CHART_FIXED_MAX</h3>
<h3>M√°ximo fixo do</h3>
gr√°fico
double
<h3>CHART_FIXED_MIN</h3>
<h3>M√≠nimo fixo do</h3>
gr√°fico
double
<h3>CHART_POINTS_PER_BAR</h3>
<h3>Escala em pontos</h3>
por barra
double
<h3>CHART_PRICE_MIN</h3>
<h3>M√≠nimo do gr√°fico</h3>
</p>
<pre><code class="language-mql5">
double r/o   modificador - n√∫mero de sub-
</code></pre>
<p>
janela
<h3>CHART_PRICE_MAX</h3>
<h3>M√°ximo</h3>
do
gr√°fico
</p>
<pre><code class="language-mql5">
double r/o   modificador - n√∫mero de sub-
</code></pre>
<p>
janela
<h3>Para fun√ß√µes ChartSetString() e ChartGetString()</h3>
<h3>ENUM_CHART_PROPERTY_STRING</h3>
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo de Propriedade</h3>
<h3>CHART_COMMENT</h3>
<h3>Texto</h3>
de 
um
coment√°rio 
em
um gr√°fico
string
<h3>CHART_EXPERT_NAME</h3>
<h3>Nome</h3>
do
conselheiro
executado 
no
gr√°fico 
com
chart_id
especificado
</p>
<pre><code class="language-mql5">
string r/o</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
339
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo de Propriedade</h3>
<h3>CHART_SCRIPT_NAME</h3>
<h3>Nome do script</h3>
executado 
no
gr√°fico 
com
chart_id
especificado
</p>
<pre><code class="language-mql5">
string r/o
</code></pre>
<p>
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
   int chartMode=ChartGetInteger(0,CHART_MODE);
   switch(chartMode)
     {
      case(CHART_BARS):    Print(&quot;CHART_BARS&quot;);   break;
      case(CHART_CANDLES): Print(&quot;CHART_CANDLES&quot;);break;
      default:Print(&quot;CHART_LINE&quot;);
     }
   bool shifted=ChartGetInteger(0,CHART_SHIFT);
   if(shifted) Print(&quot;CHART_SHIFT = true&quot;);
   else Print(&quot;CHART_SHIFT = false&quot;);
   bool autoscroll=ChartGetInteger(0,CHART_AUTOSCROLL);
   if(autoscroll) Print(&quot;CHART_AUTOSCROLL = true&quot;);
   else Print(&quot;CHART_AUTOSCROLL = false&quot;);
   int chartHandle=ChartGetInteger(0,CHART_WINDOW_HANDLE);
   Print(&quot;CHART_WINDOW_HANDLE = &quot;,chartHandle);
   int windows=ChartGetInteger(0,CHART_WINDOWS_TOTAL);
   Print(&quot;CHART_WINDOWS_TOTAL = &quot;,windows);
   if(windows&gt;1)
     {
      for(int i=0;i&lt;windows;i++)
        {
         int height=ChartGetInteger(0,CHART_HEIGHT_IN_PIXELS,i);
         double priceMin=ChartGetDouble(0,CHART_PRICE_MIN,i);
         double priceMax=ChartGetDouble(0,CHART_PRICE_MAX,i);
         Print(i+&quot;: CHART_HEIGHT_IN_PIXELS = &quot;,height,&quot; pixels&quot;);
         Print(i+&quot;: CHART_PRICE_MIN = &quot;,priceMin);
         Print(i+&quot;: CHART_PRICE_MAX = &quot;,priceMax);
        }
     }
</code></pre>
<p>
<h3>Veja Tamb√©m</h3>
Exemplos de como trabalhar com um gr√°fico</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
340
<h3>Constantes de Posicionamento</h3>
Tr√™s identificadores a partir da lista ENUM_CHART_POSITION s√£o os poss√≠veis valores do par√¢metro
de posi√ß√£o para a fun√ß√£o ChartNavigate().
<h3>ENUM_CHART_POSITION</h3>
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>CHART_BEGIN</h3>
Come√ßo do gr√°fico (o pre√ßo mais antigo)
<h3>CHART_CURRENT_POS</h3>
<h3>Posi√ß√£o corrente</h3>
<h3>CHART_END</h3>
Final do gr√°fico (os pre√ßos mais recentes)
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
   long handle=ChartOpen(&quot;EURUSD&quot;,PERIOD_H12);
   if(handle!=0)
     {
      ChartSetInteger(handle,CHART_AUTOSCROLL,false);
      ChartSetInteger(handle,CHART_SHIFT,true);
      ChartSetInteger(handle,CHART_MODE,CHART_LINE);
      ResetLastError();
      bool res=ChartNavigate(handle,CHART_END,150);
      if(!res) Print(&quot;Navegar falhou. Erro = &quot;,GetLastError());
      ChartRedraw();
     }</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
341
<h3>Representa√ß√£o de Gr√°fico</h3>
Os gr√°ficos de pre√ßo podem ser exibidos de tr√™s maneiras:
¬∑ como barras;
¬∑ como candles;
¬∑ como um linha.
A maneira espec√≠fica de exibir o gr√°fico de pre√ßo √© definida definida pela 
fun√ß√£o
ChartSetInteger(chart_handle,CHART_MODE, chart_mode), onde chart_mode √© um dos valores da
enumera√ß√£o ENUM_CHART_MODE.
<h3>ENUM_CHART_MODE</h3>
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>CHART_BARS</h3>
<h3>Exibe como uma seq√º√™ncia de barras</h3>
<h3>CHART_CANDLES</h3>
<h3>Exibe como candles japoneses</h3>
<h3>CHART_LINE</h3>
Exibe como uma linha desenha por pre√ßos de
fechamento
Para especificar o modo de exibi√ß√£o de volumes em um gr√°fico de pre√ßos a fun√ß√£o
ChartSetInteger(chart_handle, CHART_SHOW_VOLUMES, volume_mode) √© usada, onde volume_mode √©
um dos valores da enumera√ß√£o ENUM_CHART_VOLUME_MODE.
<h3>ENUM_CHART_VOLUME_MODE</h3>
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>CHART_VOLUME_HIDE</h3>
<h3>Volumes n√£o s√£o exibidos</h3>
<h3>CHART_VOLUME_TICK</h3>
<h3>Volumes de tick (mudan√ßa de pre√ßo)</h3>
<h3>CHART_VOLUME_REAL</h3>
<h3>Volume de negocia√ß√£o</h3>
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//--- Obt√©m o manuseio do gr√°fico corrente
   long handle=ChartID();
   if(handle&gt;0) // Se bem sucedido, customiza adicionalmente
     {
      //--- Desativa auto-rolagem
      ChartSetInteger(handle,CHART_AUTOSCROLL,false);
      //--- Define o encaixe da borda direita do gr√°fico
      ChartSetInteger(handle,CHART_SHIFT,true);
      //--- Exibe como candles
      ChartSetInteger(handle,CHART_MODE,CHART_CANDLES);
      //--- Rola por 100 barras a partir do come√ßo do hist√≥rico
      ChartNavigate(handle,CHART_CURRENT_POS,100);
      //--- Define o modo de exibi√ß√£o de volume de tick</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
342
</p>
<pre><code class="language-mql5">
      ChartSetInteger(handle,CHART_SHOW_VOLUMES,CHART_VOLUME_TICK);
     }
</code></pre>
<p>
<h3>Tamb√©m Veja</h3>
<h3>ChartOpen, ChartID</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
343
Exemplos de como trabalhar com um gr√°fico
Exemplos de como trabalhar com propriedades do gr√°fico. Uma ou duas fun√ß√µes completas s√£o
exibidas para cada propriedade. Estas fun√ß√µes permitem configurar/receber o valor da propriedade.
Essas fun√ß√µes podem ser utilizadas &quot;como est√£o&quot; em aplicativos personalizados MQL5.
a imagem abaixo mostra o painel gr√°fico ilustrando como modificara propriedade do gr√°ficomudando
sua apar√™ncia. Clicando pr√≥ximo bot√£o permite definir o novo valor da propriedade apropriada e
visualizar as altera√ß√µes na janela do gr√°fico.
 O c√≥digo fonte do painel est√° localizado abaixo.
Propriedades do Gr√°fico e Exemplos de Fun√ß√µes para Trabalhar
com Eles
¬∑ CHART_IS_OBJECT define se um objeto √© um gr√°fico real ou um objeto gr√°fico.
</p>
<pre><code class="language-mql5">
//+-------------------------------------------------------------------------+
//| Definir se um objeto √© um gr√°fico. Se ele for¬†                          |
//| um objeto gr√°fico, o resultado √© verdadeiro. Se ele for um gr√°fico real¬†|
//| o resultado da vari√°vel foi o valor falso.                              |
//+-------------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
344
</p>
<pre><code class="language-mql5">
bool ChartIsObject(bool &amp;result,const long chart_ID=0)
  {
//--- preparar a vari√°vel para obter o valor da propriedade
   long value;
//--- redefine o valor de erro
   ResetLastError();
//--- obter a propriedade do gr√°fico
   if(!ChartGetInteger(chart_ID,CHART_IS_OBJECT,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      //--- retorna false
      return(false);
     }
//--- armazenar o valor da propriedade do gr√°fico na mem√≥ria
   result=value;
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_BRING_TO_TOP exibe o gr√°fico no topo de outros gr√°ficos.
</p>
<pre><code class="language-mql5">
//+-------------------------------------------------------------------------+
//| Enviar comando para o terminal para exibir o gr√°fico acima dos outros.  |
//+-------------------------------------------------------------------------+
bool ChartBringToTop(const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- exibe o gr√°fico no topo de outros gr√°ficos
   if(!ChartSetInteger(chart_ID,CHART_BRING_TO_TOP,0,true))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_MOUSE_SCROLL √© uma propriedade para rolagem do gr√°fico usando bot√£o esquerdo do
mouse.
</p>
<pre><code class="language-mql5">
//+--------------------------------------------------------------------------+
//| A fun√ß√£o define se a rolagem do gr√°fico usando o bot√£o esquerdo do mouse¬†|
//| est√° habilitado.                                                         |
//+--------------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
345
</p>
<pre><code class="language-mql5">
bool ChartMouseScrollGet(bool &amp;result,const long chart_ID=0)
  {
//--- preparar a vari√°vel para obter o valor da propriedade
   long value;
//--- redefine o valor de erro
   ResetLastError();
//--- receber o valor da propriedade
   if(!ChartGetInteger(chart_ID,CHART_MOUSE_SCROLL,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- armazenar o valor da propriedade do gr√°fico na mem√≥ria
   result=value;
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+--------------------------------------------------------------------+
//| A fun√ß√£o habilita/desabilita a rolagem do gr√°fico usando bot√£o¬†    |
//| esquerdo do mouse.                                                 |
//+--------------------------------------------------------------------+
bool ChartMouseScrollSet(const bool value,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- define valor de propriedade
   if(!ChartSetInteger(chart_ID,CHART_MOUSE_SCROLL,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_EVENT_MOUSE_MOVE  √© uma propriedade de enviar mensagens sobre mudan√ßa de eventos
e cliques de mouse para aplica√ß√µes MQL5 CHARTEVENT_MOUSE_MOVE).
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Verificar se mudan√ßa de eventos e cliques de mouse¬†              |
//| s√£o enviadas para todas as aplica√ß√µes mql5 no gr√°fico.           |
//+------------------------------------------------------------------+
bool ChartEventMouseMoveGet(bool &amp;result,const long chart_ID=0)
  {
//--- preparar a vari√°vel para obter o valor da propriedade
   long value;</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
346
</p>
<pre><code class="language-mql5">
//--- redefine o valor de erro
   ResetLastError();
//--- receber o valor da propriedade
   if(!ChartGetInteger(chart_ID,CHART_EVENT_MOUSE_MOVE,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- armazenar o valor da propriedade do gr√°fico na mem√≥ria
   result=value;
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------------------+
//| A fun√ß√£o habilita/desabilita o modo de envio de mensagens sobre mudan√ßa¬†     |
//| de eventos e cliques de mouse para aplica√ß√µes no¬†                            |
//| gr√°fico.                                                                     |
//+------------------------------------------------------------------------------+
bool ChartEventMouseMoveSet(const bool value,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- define valor de propriedade
   if(!ChartSetInteger(chart_ID,CHART_EVENT_MOUSE_MOVE,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_EVENT_OBJECT_CREATE √© uma propriedade de enviar mensagens sobre o evento da
cria√ß√£o do objeto gr√°fico para aplica√ß√µes MQL5 (CHARTEVENT_OBJECT_CREATE).
</p>
<pre><code class="language-mql5">
//+---------------------------------------------------------------------+
//| Verificar se √© mensagens do evento da cria√ß√£o de um objeto gr√°fico¬† |
//| s√£o enviadas para todas as aplica√ß√µes mql5 no gr√°fico.              |
//+---------------------------------------------------------------------+
bool ChartEventObjectCreateGet(bool &amp;result,const long chart_ID=0)
  {
//--- preparar a vari√°vel para obter o valor da propriedade
   long value;
//--- redefine o valor de erro
   ResetLastError();
//--- receber o valor da propriedade</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
347
</p>
<pre><code class="language-mql5">
   if(!ChartGetInteger(chart_ID,CHART_EVENT_OBJECT_CREATE,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- armazenar o valor da propriedade do gr√°fico na mem√≥ria
   result=value;
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+--------------------------------------------------------------------------+
//| A fun√ß√£o habilita/desabilita o modo de envio de mensagens sobre¬†         |
//| o evento da cria√ß√£o do objeto gr√°fico para aplica√ß√µes mql5 no¬†           |
//| gr√°fico.                                                                 |
//+--------------------------------------------------------------------------+
bool ChartEventObjectCreateSet(const bool value,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- define valor de propriedade
   if(!ChartSetInteger(chart_ID,CHART_EVENT_OBJECT_CREATE,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_EVENT_OBJECT_DELETE √© uma propriedade de enviar mensagens sobre o evento da
exclus√£o do objeto gr√°fico para aplica√ß√µes MQL5 (CHARTEVENT_OBJECT_DELETE).
</p>
<pre><code class="language-mql5">
//+---------------------------------------------------------------------+
//| Verificar se mensagens √© do evento da exclus√£o de um objeto gr√°fico |
//| s√£o enviadas para todas as aplica√ß√µes mql5 no gr√°fico.              |
//+---------------------------------------------------------------------+
bool ChartEventObjectDeleteGet(bool &amp;result,const long chart_ID=0)
  {
//--- preparar a vari√°vel para obter o valor da propriedade
   long value;
//--- redefine o valor de erro
   ResetLastError();
//--- receber o valor da propriedade
   if(!ChartGetInteger(chart_ID,CHART_EVENT_OBJECT_DELETE,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
348
</p>
<pre><code class="language-mql5">
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- armazenar o valor da propriedade do gr√°fico na mem√≥ria
   result=value;
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+--------------------------------------------------------------------------+
//| A fun√ß√£o habilita/desabilita o modo de envio de mensagens sobre¬†         |
//| o evento da exclus√£o do objeto gr√°fico para aplica√ß√µes mql5 no¬†          |
//| gr√°fico.                                                                 |
//+--------------------------------------------------------------------------+
bool ChartEventObjectDeleteSet(const bool value,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- define valor de propriedade
   if(!ChartSetInteger(chart_ID,CHART_EVENT_OBJECT_DELETE,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_MODE ‚Äì tipo de gr√°fico (candles, barras ou linha).
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Obter tipo de gr√°fico (candles, barras ou¬†                       |
//| linha).                                                          |
//+------------------------------------------------------------------+
</code></pre>
<p>
<h3>ENUM_CHART_MODE ChartModeGet(const long chart_ID=0)</h3>
</p>
<pre><code class="language-mql5">
  {
//--- preparar a vari√°vel para obter o valor da propriedade
   long result=WRONG_VALUE;
//--- redefine o valor de erro
   ResetLastError();
//--- receber o valor da propriedade
   if(!ChartGetInteger(chart_ID,CHART_MODE,0,result))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
     }
//--- retorna o valor da propriedade do gr√°fico
   return((ENUM_CHART_MODE)result);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
349
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Define tipo de gr√°fico (candles, barras ou¬†                      |
//| linha).                                                          |
//+------------------------------------------------------------------+
bool ChartModeSet(const long value,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- define valor de propriedade
   if(!ChartSetInteger(chart_ID,CHART_MODE,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_FOREGROUND √© uma propriedade de exibi√ß√£o do gr√°fico de pre√ßo no primeiro plano.
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o define se um gr√°fico de pre√ßo √© exibido no¬†             |
//| primeiro plano.                                                  |
//+------------------------------------------------------------------+
bool ChartForegroundGet(bool &amp;result,const long chart_ID=0)
  {
//--- preparar a vari√°vel para obter o valor da propriedade
   long value;
//--- redefine o valor de erro
   ResetLastError();
//--- receber o valor da propriedade
   if(!ChartGetInteger(chart_ID,CHART_FOREGROUND,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- armazenar o valor da propriedade do gr√°fico na mem√≥ria
   result=value;
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+---------------------------------------------------------------------------+
//| A fun√ß√£o habilita/desabilita o modo de exibi√ß√£o do gr√°fico de pre√ßo no¬†   |
//| primeiro plano.                                                           |
//+---------------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
350
</p>
<pre><code class="language-mql5">
bool ChartForegroundSet(const bool value,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- define valor de propriedade
   if(!ChartSetInteger(chart_ID,CHART_FOREGROUND,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_SHIFT ‚Äì modo de encaixe do gr√°fico de pre√ßo a partir da borda direita.
</p>
<pre><code class="language-mql5">
//+-----------------------------------------------------------------------------------
//| A fun√ß√£o define se o modo de deslocamento do gr√°fico de pre√ßo do limite direito¬†  
//| est√° habilitado.                                                                  
//+-----------------------------------------------------------------------------------
bool ChartShiftGet(bool &amp;result,const long chart_ID=0)
  {
//--- preparar a vari√°vel para obter o valor da propriedade
   long value;
//--- redefine o valor de erro
   ResetLastError();
//--- receber o valor da propriedade
   if(!ChartGetInteger(chart_ID,CHART_SHIFT,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- armazenar o valor da propriedade do gr√°fico na mem√≥ria
   result=value;
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+--------------------------------------------------------------------------+
//| A fun√ß√£o habilita/desabilita o modo de exibi√ß√£o do gr√°fico de pre√ßo com¬† |
//| deslocamento do limite direito.                                          |
//+--------------------------------------------------------------------------+
bool ChartShiftSet(const bool value,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- define valor de propriedade</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
351
</p>
<pre><code class="language-mql5">
   if(!ChartSetInteger(chart_ID,CHART_SHIFT,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_AUTOSCROLL ‚Äì modo de movimenta√ß√£o autom√°tica para a borda direita do gr√°fico.
</p>
<pre><code class="language-mql5">
//+---------------------------------------------------------------------+
//| A fun√ß√£o define o modo de auto-rolamento do gr√°fico¬†                |
//| para a direita no caso de chegada de novos ticks estar habilitado.¬† |
//+---------------------------------------------------------------------+
bool ChartAutoscrollGet(bool &amp;result,const long chart_ID=0)
  {
//--- preparar a vari√°vel para obter o valor da propriedade
   long value;
//--- redefine o valor de erro
   ResetLastError();
//--- receber o valor da propriedade
   if(!ChartGetInteger(chart_ID,CHART_AUTOSCROLL,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- armazenar o valor da propriedade do gr√°fico na mem√≥ria
   result=value;
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o habilita/desabilita o modo de auto-rolamento do gr√°fico |
//| para a direita no caso da chegada de novos ticks.¬†               |
//+------------------------------------------------------------------+
bool ChartAutoscrollSet(const bool value,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- define valor de propriedade
   if(!ChartSetInteger(chart_ID,CHART_AUTOSCROLL,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
352
</p>
<pre><code class="language-mql5">
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_SCALE ‚Äì chart scale property.
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Obter escala do gr√°fico (de 0 a 5).                              |
//+------------------------------------------------------------------+
int ChartScaleGet(const long chart_ID=0)
  {
//--- preparar a vari√°vel para obter o valor da propriedade
   long result=-1;
//--- redefine o valor de erro
   ResetLastError();
//--- receber o valor da propriedade
   if(!ChartGetInteger(chart_ID,CHART_SCALE,0,result))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
     }
//--- retorna o valor da propriedade do gr√°fico
   return((int)result);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Definir escala do gr√°fico (de 0 a 5).                            |
//+------------------------------------------------------------------+
bool ChartScaleSet(const long value,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- define valor de propriedade
   if(!ChartSetInteger(chart_ID,CHART_SCALE,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_SCALEFIX ‚Äì o modo de especificar a escala do gr√°fico em pontos por barra.
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o define se o modo de fixar a escala est√° habilitado.     |</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
353
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
bool ChartScaleFixGet(bool &amp;result,const long chart_ID=0)
  {
//--- preparar a vari√°vel para obter o valor da propriedade
   long value;
//--- redefine o valor de erro
   ResetLastError();
//--- receber o valor da propriedade
   if(!ChartGetInteger(chart_ID,CHART_SCALEFIX,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- armazenar o valor da propriedade do gr√°fico na mem√≥ria
   result=value;
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o habilita/desabilita o modo de fixar a escala.              |
//+------------------------------------------------------------------+
bool ChartScaleFixSet(const bool value,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- define valor de propriedade
   if(!ChartSetInteger(chart_ID,CHART_SCALEFIX,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_SCALEFIX_11 ‚Äì modo de escala 1:1.
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o define se a escala &quot;1:1&quot; est√° habilitada.               |
//+------------------------------------------------------------------+
bool ChartScaleFix11Get(bool &amp;result,const long chart_ID=0)
  {
//--- preparar a vari√°vel para obter o valor da propriedade
   long value;
//--- redefine o valor de erro
   ResetLastError();</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
354
</p>
<pre><code class="language-mql5">
//--- receber o valor da propriedade
   if(!ChartGetInteger(chart_ID,CHART_SCALEFIX_11,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- armazenar o valor da propriedade do gr√°fico na mem√≥ria
   result=value;
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o habilita/desabilita o modo de escala &quot;1:1&quot;¬†             |
//+------------------------------------------------------------------+
bool ChartScaleFix11Set(const bool value,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- define valor de propriedade
   if(!ChartSetInteger(chart_ID,CHART_SCALEFIX_11,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_SCALE_PT_PER_BAR ‚Äì o modo de especificar a escala do gr√°fico em pontos por barra.
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------------------+
//| A fun√ß√£o define se o modo de especificar a escala do gr√°fico √© por pontos¬†   |
//| barra est√° habilitada.                                                       |
//+------------------------------------------------------------------------------+
bool ChartScalePerBarGet(bool &amp;result,const long chart_ID=0)
  {
//--- preparar a vari√°vel para obter o valor da propriedade
   long value;
//--- redefine o valor de erro
   ResetLastError();
//--- receber o valor da propriedade
   if(!ChartGetInteger(chart_ID,CHART_SCALE_PT_PER_BAR,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
355
</p>
<pre><code class="language-mql5">
     }
//--- armazenar o valor da propriedade do gr√°fico na mem√≥ria
   result=value;
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+-----------------------------------------------------------------------------------
//| A fun√ß√£o habilita/desabilita o modo de definir a escala do gr√°fico em pontos por¬† 
//| barra.                                                                            
//+-----------------------------------------------------------------------------------
bool ChartScalePerBarSet(const bool value,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- define valor de propriedade
   if(!ChartSetInteger(chart_ID,CHART_SCALE_PT_PER_BAR,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_SHOW_OHLC ‚Äì propriedade de exibe valores OHLC no canto superior esquerdo.
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o define se o modo de exibi√ß√£o dos valores OHLC¬†          |
//| no canto superior esquerdo est√° habilitado.                      |
//+------------------------------------------------------------------+
bool ChartShowOHLCGet(bool &amp;result,const long chart_ID=0)
  {
//--- preparar a vari√°vel para obter o valor da propriedade
   long value;
//--- redefine o valor de erro
   ResetLastError();
//--- receber o valor da propriedade
   if(!ChartGetInteger(chart_ID,CHART_SHOW_OHLC,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- armazenar o valor da propriedade do gr√°fico na mem√≥ria
   result=value;
//--- sucesso na execu√ß√£o
   return(true);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
356
  }
</p>
<pre><code class="language-mql5">
//+--------------------------------------------------------------------------+
//| A fun√ß√£o habilita/desabilita o modo de exibi√ß√£o dos valores OHLC no¬†     |
//| canto superior esquerdo do gr√°fico.                                      |
//+--------------------------------------------------------------------------+
bool ChartShowOHLCSet(const bool value,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- define valor de propriedade
   if(!ChartSetInteger(chart_ID,CHART_SHOW_OHLC,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_SHOW_BID_LINE ‚Äì a propriedade mostra o valor Bid como uma linha horizontal no gr√°fico.
</p>
<pre><code class="language-mql5">
//+-----------------------------------------------------------------------------+
//| A fun√ß√£o define se √© o modo de exibi√ß√£o da linha do valor Bid no gr√°fico¬†   |
//| est√° habilitado.                                                            |
//+-----------------------------------------------------------------------------+
bool ChartShowBidLineGet(bool &amp;result,const long chart_ID=0)
  {
//--- preparar a vari√°vel para obter o valor da propriedade
   long value;
//--- redefine o valor de erro
   ResetLastError();
//--- receber o valor da propriedade
   if(!ChartGetInteger(chart_ID,CHART_SHOW_BID_LINE,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- armazenar o valor da propriedade do gr√°fico na mem√≥ria
   result=value;
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+--------------------------------------------------------------------+
//| A fun√ß√£o habilita/desabilita o modo de exibi√ß√£o da linha Bid no¬†   |
//| gr√°fico.                                                           |
//+--------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
357
</p>
<pre><code class="language-mql5">
bool ChartShowBidLineSet(const bool value,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- define valor de propriedade
   if(!ChartSetInteger(chart_ID,CHART_SHOW_BID_LINE,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_SHOW_ASK_LINE ‚Äì a propriedade de mostrar o valor Ask como uma linha horizontal no
gr√°fico.
</p>
<pre><code class="language-mql5">
//+-----------------------------------------------------------------------+
//| A fun√ß√£o define se √© o modo de exibi√ß√£o da linha de valor Ask no¬†     |
//| gr√°fico.                                                              |
//+-----------------------------------------------------------------------+
bool ChartShowAskLineGet(bool &amp;result,const long chart_ID=0)
  {
//--- preparar a vari√°vel para obter o valor da propriedade
   long value;
//--- redefine o valor de erro
   ResetLastError();
//--- receber o valor da propriedade
   if(!ChartGetInteger(chart_ID,CHART_SHOW_ASK_LINE,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- armazenar o valor da propriedade do gr√°fico na mem√≥ria
   result=value;
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+-----------------------------------------------------------------------+
//| A fun√ß√£o habibita/desabilita o modo de exibi√ß√£o da linha ASk no¬†      |
//| gr√°fico.                                                              |
//+-----------------------------------------------------------------------+
bool ChartShowAskLineSet(const bool value,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
358
</p>
<pre><code class="language-mql5">
//--- define valor de propriedade
   if(!ChartSetInteger(chart_ID,CHART_SHOW_ASK_LINE,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_SHOW_LAST_LINE ‚Äì a propriedade de exibir √∫ltimo valor como uma linha horizontal no
gr√°fico.
</p>
<pre><code class="language-mql5">
//+---------------------------------------------------------------------------------+
//| A fun√ß√£o define se o modo da exibi√ß√£o da linha para a √∫ltima execu√ß√£o¬†          |
//| do pre√ßo de negocia√ß√£o est√° habilitada.                                         |
//+---------------------------------------------------------------------------------+
bool ChartShowLastLineGet(bool &amp;result,const long chart_ID=0)
  {
//--- preparar a vari√°vel para obter o valor da propriedade
   long value;
//--- redefine o valor de erro
   ResetLastError();
//--- receber o valor da propriedade
   if(!ChartGetInteger(chart_ID,CHART_SHOW_LAST_LINE,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- armazenar o valor da propriedade do gr√°fico na mem√≥ria
   result=value;
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+-----------------------------------------------------------------------------------
//| A fun√ß√£o habilita/desabilita o modo da exibi√ß√£o da linha para a √∫ltima execu√ß√£o¬†  
//| do pre√ßo de negocia√ß√£o.                                                           
//+-----------------------------------------------------------------------------------
bool ChartShowLastLineSet(const bool value,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- define valor de propriedade
   if(!ChartSetInteger(chart_ID,CHART_SHOW_LAST_LINE,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
359
</p>
<pre><code class="language-mql5">
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_SHOW_PERIOD_SEP ‚Äì a propriedade de exibir separadores verticais entre os per√≠odos
adjacentes.
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o define se o modo da exibi√ß√£o dos separadores vertical¬†  |
//| entre os per√≠odos adjacentes est√° habilitado.¬†                   |
//+------------------------------------------------------------------+
bool ChartShowPeriodSeparatorGet(bool &amp;result,const long chart_ID=0)
  {
//--- preparar a vari√°vel para obter o valor da propriedade
   long value;
//--- redefine o valor de erro
   ResetLastError();
//--- receber o valor da propriedade
   if(!ChartGetInteger(chart_ID,CHART_SHOW_PERIOD_SEP,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- armazenar o valor da propriedade do gr√°fico na mem√≥ria
   result=value;
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o habilita/desabilita o modo de exibi√ß√£o dos separadores¬† |
//| vertical entre os per√≠odos adjacentes.                           |
//+------------------------------------------------------------------+
bool ChartShowPeriodSepapatorSet(const bool value,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- define valor de propriedade
   if(!ChartSetInteger(chart_ID,CHART_SHOW_PERIOD_SEP,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
360
</p>
<pre><code class="language-mql5">
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_SHOW_GRID ‚Äì a propriedade de mostrar a grade do gr√°fico.
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o define se a grade do gr√°fico √© exibida.¬†                |
//+------------------------------------------------------------------+
bool ChartShowGridGet(bool &amp;result,const long chart_ID=0)
  {
//--- preparar a vari√°vel para obter o valor da propriedade
   long value;
//--- redefine o valor de erro
   ResetLastError();
//--- receber o valor da propriedade
   if(!ChartGetInteger(chart_ID,CHART_SHOW_GRID,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- armazenar o valor da propriedade do gr√°fico na mem√≥ria
   result=value;
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o habilita/desabilita a grade do gr√°fico.                 |
//+------------------------------------------------------------------+
bool ChartShowGridSet(const bool value,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- definir o valor da propriedade
   if(!ChartSetInteger(chart_ID,CHART_SHOW_GRID,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_SHOW_VOLUMES ‚Äì a propriedade de mostrar os volumes num gr√°fico.
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
361
</p>
<pre><code class="language-mql5">
//| A fun√ß√£o define se os volumes s√£o exibidos no gr√°fico (ou n√£o s√£o¬†     |
//| mostrados, ticks s√£o mostrados, os atuais s√£o mostrados).¬†             |
//+------------------------------------------------------------------------+
</code></pre>
<p>
ENUM_CHART_VOLUME_MODE ChartShowVolumesGet(const long chart_ID=0)
</p>
<pre><code class="language-mql5">
  {
//--- preparar a vari√°vel para obter o valor da propriedade
   long result=WRONG_VALUE;
//--- redefine o valor de erro
   ResetLastError();
//--- receber o valor da propriedade
   if(!ChartGetInteger(chart_ID,CHART_SHOW_VOLUMES,0,result))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
     }
//--- retorna o valor da propriedade do gr√°fico
   return((ENUM_CHART_VOLUME_MODE)result);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o define o mode de exibi√ß√£o dos volumes no gr√°fico.¬†      |
//+------------------------------------------------------------------+
bool ChartShowVolumesSet(const long value,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- define valor de propriedade
   if(!ChartSetInteger(chart_ID,CHART_SHOW_VOLUMES,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_SHOW_OBJECT_DESCR ‚Äì a propriedade mostrar descri√ß√µes pop-up do objeto gr√°fico.
</p>
<pre><code class="language-mql5">
//+-------------------------------------------------------------------+
//| A fun√ß√£o define se descri√ß√µes pop-up de objetos gr√°ficos s√£o¬†     |
//| exibidas quando colocado o cursor do mouse sobre eles.¬†           |
//+-------------------------------------------------------------------+
bool ChartShowObjectDescriptionGet(bool &amp;result,const long chart_ID=0)
  {
//--- preparar a vari√°vel para obter o valor da propriedade
   long value;
//--- redefine o valor de erro
   ResetLastError();</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
362
</p>
<pre><code class="language-mql5">
//--- receber o valor da propriedade
   if(!ChartGetInteger(chart_ID,CHART_SHOW_OBJECT_DESCR,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- armazenar o valor da propriedade do gr√°fico na mem√≥ria
   result=value;
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+--------------------------------------------------------------------------+
//| A fun√ß√£o habilita/desabilita o modo de exibi√ß√£o de descri√ß√µes pop-up¬†    |
//| de objetos gr√°ficos quando colocado o cursor do mouse sobre eles.        |
//+--------------------------------------------------------------------------+
bool ChartShowObjectDescriptionSet(const bool value,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- define valor de propriedade
   if(!ChartSetInteger(chart_ID,CHART_SHOW_OBJECT_DESCR,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_VISIBLE_BARS define o n√∫mero de barras no gr√°fico que s√£o disponibilizadas para exibi√ß√£o.
</p>
<pre><code class="language-mql5">
//+-----------------------------------------------------------------------+
//| A fun√ß√£o recebe o n√∫mero de barras que s√£o mostradas (vis√≠veis)¬†      |
//| na janela do gr√°fico.                                                 |
//+-----------------------------------------------------------------------+
int ChartVisibleBars(const long chart_ID=0)
  {
//--- preparar a vari√°vel para obter o valor da propriedade
   long result=-1;
//--- redefine o valor de erro
   ResetLastError();
//--- receber o valor da propriedade
   if(!ChartGetInteger(chart_ID,CHART_VISIBLE_BARS,0,result))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
363
</p>
<pre><code class="language-mql5">
     }
//--- retorna o valor da propriedade do gr√°fico
   return((int)result);
</code></pre>
<p>
  }
¬∑ CHART_WINDOWS_TOTAL define o n√∫mero total de janelas do gr√°fico incluindo sub-janelas do
indicador.
</p>
<pre><code class="language-mql5">
//+--------------------------------------------------------------------------+
//| A fun√ß√£o obt√©m o n√∫mero total de janelas do gr√°fico incluindo¬†           |
//| subjanelas do indicador.                                                 |
//+--------------------------------------------------------------------------+
int ChartWindowsTotal(const long chart_ID=0)
  {
//--- preparar a vari√°vel para obter o valor da propriedade
   long result=-1;
//--- redefine o valor de erro
   ResetLastError();
//--- receber o valor da propriedade
   if(!ChartGetInteger(chart_ID,CHART_WINDOWS_TOTAL,0,result))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
     }
//--- retorna o valor da propriedade do gr√°fico
   return((int)result);
</code></pre>
<p>
  }
¬∑ CHART_WINDOW_IS_VISIBLE define a visibilidade da sub-janela.
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o define se a atual janela do gr√°fico ou sub-janela¬†      |
//| est√° vis√≠vel.                                                    |
//+------------------------------------------------------------------+
bool ChartWindowsIsVisible(bool &amp;result,const long chart_ID=0,const int sub_window=0)
  {
//--- preparar a vari√°vel para obter o valor da propriedade
   long value;
//--- redefine o valor de erro
   ResetLastError();
//--- receber o valor da propriedade
   if(!ChartGetInteger(chart_ID,CHART_WINDOW_IS_VISIBLE,sub_window,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
364
</p>
<pre><code class="language-mql5">
//--- armazenar o valor da propriedade do gr√°fico na mem√≥ria
   result=value;
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_WINDOW_HANDLE retorna o manipulador do gr√°fico.
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o obt√©m o manipulador do gr√°fico¬†                         |
//+------------------------------------------------------------------+
int ChartWindowsHandle(const long chart_ID=0)
  {
//--- preparar a vari√°vel para obter o valor da propriedade
   long result=-1;
//--- redefine o valor de erro
   ResetLastError();
//--- receber o valor da propriedade
   if(!ChartGetInteger(chart_ID,CHART_WINDOW_HANDLE,0,result))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
     }
//--- retorna o valor da propriedade do gr√°fico
   return((int)result);
</code></pre>
<p>
  }
¬∑ CHART_WINDOW_YDISTANCE define a dist√¢ncia em pixels entre a quadro superior do sub-janela do
indicador e o quadro superior da janela principal do gr√°fico.
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o obt√©m a dist√¢ncia em pixels entre a quadro superior da¬† |
//| sub-janela e o quadro superior da janela principal do gr√°fico.¬†  |
//+------------------------------------------------------------------+
int ChartWindowsYDistance(const long chart_ID=0,const int sub_window=0)
  {
//--- preparar a vari√°vel para obter o valor da propriedade
   long result=-1;
//--- redefine o valor de erro
   ResetLastError();
//--- receber o valor da propriedade
   if(!ChartGetInteger(chart_ID,CHART_WINDOW_YDISTANCE,sub_window,result))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
     }
//--- retorna o valor da propriedade do gr√°fico</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
365
</p>
<pre><code class="language-mql5">
   return((int)result);
</code></pre>
<p>
  }
¬∑ CHART_FIRST_VISIBLE_BAR retorna o n√∫mero da primeira barra vis√≠vel no gr√°fico (barra de
indexa√ß√£o que corresponde a s√©rie temporal).
</p>
<pre><code class="language-mql5">
//+-----------------------------------------------------------------------------------
//| A fun√ß√£o recebe o n√∫mero da primeira barra vis√≠vel no gr√°fico.¬†                   
//| Indexa√ß√£o √© executada como em s√©ries temporais, as √∫ltimas barras t√™m √≠ndices meno
//+-----------------------------------------------------------------------------------
int ChartFirstVisibleBar(const long chart_ID=0)
  {
//--- preparar a vari√°vel para obter o valor da propriedade
   long result=-1;
//--- redefine o valor de erro
   ResetLastError();
//--- receber o valor da propriedade
   if(!ChartGetInteger(chart_ID,CHART_FIRST_VISIBLE_BAR,0,result))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
     }
//--- retorna o valor da propriedade do gr√°fico
   return((int)result);
</code></pre>
<p>
  }
¬∑ CHART_WIDTH_IN_BARS retorna a largura do gr√°fico de barras.
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o recebe a largura do gr√°fico de barras.                  |
//+------------------------------------------------------------------+
int ChartWidthInBars(const long chart_ID=0)
  {
//--- preparar a vari√°vel para obter o valor da propriedade
   long result=-1;
//--- redefine o valor de erro
   ResetLastError();
//--- receber o valor da propriedade
   if(!ChartGetInteger(chart_ID,CHART_WIDTH_IN_BARS,0,result))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
     }
//--- retorna o valor da propriedade do gr√°fico
   return((int)result);
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
366
¬∑ CHART_WIDTH_IN_PIXELS retorna a largura da do gr√°fico em pixels.
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o recebe a largura da do gr√°fico em pixels.               |
//+------------------------------------------------------------------+
int ChartWidthInPixels(const long chart_ID=0)
  {
//--- preparar a vari√°vel para obter o valor da propriedade
   long result=-1;
//--- redefine o valor de erro
   ResetLastError();
//--- receber o valor da propriedade
   if(!ChartGetInteger(chart_ID,CHART_WIDTH_IN_PIXELS,0,result))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
     }
//--- retorna o valor da propriedade do gr√°fico
   return((int)result);
</code></pre>
<p>
  }
¬∑ CHART_HEIGHT_IN_PIXELS ‚Äì propriedade em pixels da altura do gr√°fico.
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o recebe o valor da altura do gr√°fico em pixels.          |
//+------------------------------------------------------------------+
int ChartHeightInPixelsGet(const long chart_ID=0,const int sub_window=0)
  {
//--- preparar a vari√°vel para obter o valor da propriedade
   long result=-1;
//--- redefine o valor de erro
   ResetLastError();
//--- receber o valor da propriedade
   if(!ChartGetInteger(chart_ID,CHART_HEIGHT_IN_PIXELS,sub_window,result))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
     }
//--- retorna o valor da propriedade do gr√°fico
   return((int)result);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o define o valor da altura do gr√°fico em pixels.          |
//+------------------------------------------------------------------+
bool ChartHeightInPixelsSet(const int value,const long chart_ID=0,const int sub_window
  {</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
367
</p>
<pre><code class="language-mql5">
//--- redefine o valor de erro
   ResetLastError();
//--- define valor de propriedade
   if(!ChartSetInteger(chart_ID,CHART_HEIGHT_IN_PIXELS,sub_window,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_COLOR_BACKGROUND - cor do fundo do gr√°fico.
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o recebe a cor do fundo do gr√°fico.¬†                      |
//+------------------------------------------------------------------+
</code></pre>
<p>
color ChartBackColorGet(const long chart_ID=0)
</p>
<pre><code class="language-mql5">
  {
//--- preparar a vari√°vel para receber a cor
   long result=clrNONE;
//--- redefine o valor de erro
   ResetLastError();
//--- receber a cor do fundo do gr√°fico
   if(!ChartGetInteger(chart_ID,CHART_COLOR_BACKGROUND,0,result))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
     }
//--- retorna o valor da propriedade do gr√°fico
   return((color)result);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o define a cor de fundo do gr√°fico.                       |
//+------------------------------------------------------------------+
bool ChartBackColorSet(const color clr,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- definir a cor do fundo do gr√°fico
   if(!ChartSetInteger(chart_ID,CHART_COLOR_BACKGROUND,clr))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
368
</p>
<pre><code class="language-mql5">
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_COLOR_FOREGROUND ‚Äì Cor dos eixos, escala e linha OHLC.
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o recebe a cor dos eixos, da escala e da linha OHLC.¬†     |
//+------------------------------------------------------------------+
</code></pre>
<p>
color ChartForeColorGet(const long chart_ID=0)
</p>
<pre><code class="language-mql5">
  {
//--- preparar a vari√°vel para receber a cor
   long result=clrNONE;
//--- redefine o valor de erro
   ResetLastError();
//--- receber cor dos eixos, escala e linha OHLC
   if(!ChartGetInteger(chart_ID,CHART_COLOR_FOREGROUND,0,result))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
     }
//--- retorna o valor da propriedade do gr√°fico
   return((color)result);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o configura a cor dos eixos, da escala e da linha OHLC.   |
//+------------------------------------------------------------------+
bool ChartForeColorSet(const color clr,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- definir cor dos eixos, escala e linha OHLC
   if(!ChartSetInteger(chart_ID,CHART_COLOR_FOREGROUND,clr))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_COLOR_GRID ‚Äì cor da grade do gr√°fico.
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o recebe a cor da grade do gr√°fico.                       |
//+------------------------------------------------------------------+
</code></pre>
<p>
color ChartGridColorGet(const long chart_ID=0)</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
369
</p>
<pre><code class="language-mql5">
  {
//--- preparar a vari√°vel para receber a cor
   long result=clrNONE;
//--- redefine o valor de erro
   ResetLastError();
//--- receber a cor da grade do gr√°fico
   if(!ChartGetInteger(chart_ID,CHART_COLOR_GRID,0,result))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
     }
//--- retorna o valor da propriedade do gr√°fico
   return((color)result);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o configura a cor da grade do gr√°fico.                    |
//+------------------------------------------------------------------+
bool ChartGridColorSet(const color clr,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- configurar a cor da grade do gr√°fico
   if(!ChartSetInteger(chart_ID,CHART_COLOR_GRID,clr))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_COLOR_VOLUME - cor dos volumes e n√≠veis de abertura de posi√ß√£o.
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o recebe cor de volumes e n√≠veis de entrada¬†              |
//| no mercado.                                                     |
//+------------------------------------------------------------------+
</code></pre>
<p>
color ChartVolumeColorGet(const long chart_ID=0)
</p>
<pre><code class="language-mql5">
  {
//--- preparar a vari√°vel para receber a cor
   long result=clrNONE;
//--- redefine o valor de erro
   ResetLastError();
//--- recebe cor de volumes e n√≠veis de entrada no mercado
   if(!ChartGetInteger(chart_ID,CHART_COLOR_VOLUME,0,result))
     {
      //--- exibe uma mensagem para o di√°rio Experts</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
370
</p>
<pre><code class="language-mql5">
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
     }
//--- retorna o valor da propriedade do gr√°fico
   return((color)result);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o configura a cor de volumes e entrada¬†                   |
//| no mercado.                                                      |
//+------------------------------------------------------------------+
bool ChartVolumeColorSet(const color clr,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- configurar cor de volumes e n√≠veis de entrada no mercado
   if(!ChartSetInteger(chart_ID,CHART_COLOR_VOLUME,clr))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_COLOR_CHART_UP ‚Äì cor da barra de alta, sombra e borda da barra de alta (tamb√©m
denominado como casti√ßal ou vela de alta).
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o recebe cor da barra de alta, a sua sombra e¬†            |
//| o limite do corpo do candlestick de alta.                        |
//+------------------------------------------------------------------+
</code></pre>
<p>
color ChartUpColorGet(const long chart_ID=0)
</p>
<pre><code class="language-mql5">
  {
//--- preparar a vari√°vel para receber a cor
   long result=clrNONE;
//--- redefine o valor de erro
   ResetLastError();
//--- recebe cor da barra de alta, a sua sombra e o limite do corpo do candlestick de 
   if(!ChartGetInteger(chart_ID,CHART_COLOR_CHART_UP,0,result))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
     }
//--- retorna o valor da propriedade do gr√°fico
   return((color)result);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o configura cor da barra de alta, sua sombra e¬†           |</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
371
</p>
<pre><code class="language-mql5">
//| o limite do corpo do candlestick de alta.                        |
//+------------------------------------------------------------------+
bool ChartUpColorSet(const color clr,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- configurar a cor da barra de alta, a sua sombra e o limite do corpo do candlesti
   if(!ChartSetInteger(chart_ID,CHART_COLOR_CHART_UP,clr))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_COLOR_CHART_DOWN ‚Äì cor da barra de baixa, a sua sombra e limite do corpo do
candlestick de baixa.
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o recebe cor da barra de alta, a sua sombra e¬†            |
//| limite do corpo do candlestick de baixa.                         |
//+------------------------------------------------------------------+
</code></pre>
<p>
color ChartDownColorGet(const long chart_ID=0)
</p>
<pre><code class="language-mql5">
  {
//--- preparar a vari√°vel para receber a cor
   long result=clrNONE;
//--- redefine o valor de erro
   ResetLastError();
//--- recebe cor da barra de baixa, a sua sombra e o limite do corpo do candlestick de
   if(!ChartGetInteger(chart_ID,CHART_COLOR_CHART_DOWN,0,result))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
     }
//--- retorna o valor da propriedade do gr√°fico
   return((color)result);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o configura a cor da barra de baixa, sua sombra e¬†        |
//| limite do corpo do candlestick de baixa.                         |
//+------------------------------------------------------------------+
bool ChartDownColorSet(const color clr,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- configurar a cor da barra de baixa, sua sombra e e o limite do corpo do candlest</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
372
</p>
<pre><code class="language-mql5">
   if(!ChartSetInteger(chart_ID,CHART_COLOR_CHART_DOWN,clr))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_COLOR_CHART_LINE ‚Äì Cor da linha do gr√°fico e barra Doji (tamb√©m denominado como
casti√ßal ou vela Doji).
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------------+
//| A fun√ß√£o recebe cor da linha do gr√°fico e candlesticks Doji.¬†          |
//+------------------------------------------------------------------------+
</code></pre>
<p>
color ChartLineColorGet(const long chart_ID=0)
</p>
<pre><code class="language-mql5">
  {
//--- preparar a vari√°vel para receber a cor
   long result=clrNONE;
//--- redefine o valor de erro
   ResetLastError();
//--- receber cor da linha do gr√°fico e candlesticks Doji.
   if(!ChartGetInteger(chart_ID,CHART_COLOR_CHART_LINE,0,result))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
     }
//--- retorna o valor da propriedade do gr√°fico
   return((color)result);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o configura a cor da linha do gr√°fico e¬†                  |
//| candlesticks Doji.                                               |
//+------------------------------------------------------------------+
bool ChartLineColorSet(const color clr,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- configurar a cor da linha do gr√°fico e candlesticks Doji
   if(!ChartSetInteger(chart_ID,CHART_COLOR_CHART_LINE,clr))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
373
  }
¬∑ CHART_COLOR_CANDLE_BULL ‚Äì cor do corpo da barra de alta (tamb√©m denominado como casti√ßal
ou vela de alta).
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o recebe a cor do corpo do candlestick de alta.¬†          |
//+------------------------------------------------------------------+
</code></pre>
<p>
color ChartBullColorGet(const long chart_ID=0)
</p>
<pre><code class="language-mql5">
  {
//--- preparar a vari√°vel para receber a cor
   long result=clrNONE;
//--- redefine o valor de erro
   ResetLastError();
//--- receber a cor do corpo do candlestick de alta
   if(!ChartGetInteger(chart_ID,CHART_COLOR_CANDLE_BULL,0,result))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
     }
//--- retorna o valor da propriedade do gr√°fico
   return((color)result);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o configura a cor do corpo do candlestick de alta.        |
//+------------------------------------------------------------------+
bool ChartBullColorSet(const color clr,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- configurar a cor do corpo do candlestick de alta.
   if(!ChartSetInteger(chart_ID,CHART_COLOR_CANDLE_BULL,clr))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_COLOR_CANDLE_BEAR ‚Äì cor do corpo da barra de baixa (tamb√©m denominado como casti√ßal
ou vela de baixa).
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o recebe a cor do corpo do candlestick de baixa.¬†         |
//+------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
374
color ChartBearColorGet(const long chart_ID=0)
</p>
<pre><code class="language-mql5">
  {
//--- preparar a vari√°vel para receber a cor
   long result=clrNONE;
//--- redefine o valor de erro
   ResetLastError();
//--- receber a cor do corpo do candlestick de baixa
   if(!ChartGetInteger(chart_ID,CHART_COLOR_CANDLE_BEAR,0,result))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
     }
//--- retorna o valor da propriedade do gr√°fico
   return((color)result);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o configura a cor do corpo do candlestick de baixa.       |
//+------------------------------------------------------------------+
bool ChartBearColorSet(const color clr,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- configurar a cor do corpo do candlestick de baixa
   if(!ChartSetInteger(chart_ID,CHART_COLOR_CANDLE_BEAR,clr))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_COLOR_BID ‚Äì Cor de linha de pre√ßo de venda.
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o recebe a cor da linha Bid.¬†                             |
//+------------------------------------------------------------------+
</code></pre>
<p>
color ChartBidColorGet(const long chart_ID=0)
</p>
<pre><code class="language-mql5">
  {
//--- preparar a vari√°vel para receber a cor
   long result=clrNONE;
//--- redefine o valor de erro
   ResetLastError();
//--- receber a cor da linha Bid
   if(!ChartGetInteger(chart_ID,CHART_COLOR_BID,0,result))
     {
      //--- exibe uma mensagem para o di√°rio Experts</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
375
</p>
<pre><code class="language-mql5">
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
     }
//--- retorna o valor da propriedade do gr√°fico
   return((color)result);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o configura a cor da linha Bid.¬†                          |
//+------------------------------------------------------------------+
bool ChartBidColorSet(const color clr,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- configurar a cor da linha Bid.
   if(!ChartSetInteger(chart_ID,CHART_COLOR_BID,clr))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_COLOR_ASK ‚Äì Cor de linha de pre√ßo de compra.
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o recebe a cor da linha Ask.¬†                             |
//+------------------------------------------------------------------+
</code></pre>
<p>
color ChartAskColorGet(const long chart_ID=0)
</p>
<pre><code class="language-mql5">
  {
//--- preparar a vari√°vel para receber a cor
   long result=clrNONE;
//--- redefine o valor de erro
   ResetLastError();
//--- receber a cor da linha Ask
   if(!ChartGetInteger(chart_ID,CHART_COLOR_ASK,0,result))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
     }
//--- retorna o valor da propriedade do gr√°fico
   return((color)result);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o configura a cor da linha Ask.¬†                          |
//+------------------------------------------------------------------+
bool ChartAskColorSet(const color clr,const long chart_ID=0)
  {</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
376
</p>
<pre><code class="language-mql5">
//--- redefine o valor de erro
   ResetLastError();
//--- configurar a cor da linha Ask
   if(!ChartSetInteger(chart_ID,CHART_COLOR_ASK,clr))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_COLOR_LAST ‚Äì cor de linha do √∫ltimo pre√ßo de opera√ß√£o executada.
</p>
<pre><code class="language-mql5">
//+----------------------------------------------------------------------+
//| A fun√ß√£o recebe a cor da linha do pre√ßo do √∫ltimo neg√≥cio realizado. |
//+----------------------------------------------------------------------+
</code></pre>
<p>
color ChartLastColorGet(const long chart_ID=0)
</p>
<pre><code class="language-mql5">
  {
//--- preparar a vari√°vel para receber a cor
   long result=clrNONE;
//--- redefine o valor de erro
   ResetLastError();
//--- receber cor de linha do √∫ltimo pre√ßo de opera√ß√£o executada.
   if(!ChartGetInteger(chart_ID,CHART_COLOR_LAST,0,result))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
     }
//--- retorna o valor da propriedade do gr√°fico
   return((color)result);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o configura a cor do pre√ßo do √∫ltimo neg√≥cio realizado¬†   |
//| linha.                                                           |
//+------------------------------------------------------------------+
bool ChartLastColorSet(const color clr,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- configurar a cor da linha do pre√ßo do √∫ltimo neg√≥cio realizado (Last)
   if(!ChartSetInteger(chart_ID,CHART_COLOR_LAST,clr))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
377
</p>
<pre><code class="language-mql5">
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_COLOR_STOP_LEVEL ‚Äì cor de n√≠veis de ordem de stop (Stop Loss e Take Profit).
</p>
<pre><code class="language-mql5">
//+--------------------------------------------------------------------+
//| A fun√ß√£o recebe as cores dos n√≠veis de Stop Loss e Take Profit.¬†   |
//+--------------------------------------------------------------------+
</code></pre>
<p>
color ChartStopLevelColorGet(const long chart_ID=0)
</p>
<pre><code class="language-mql5">
  {
//--- preparar a vari√°vel para receber a cor
   long result=clrNONE;
//--- redefine o valor de erro
   ResetLastError();
//--- receber a cor de n√≠veis de ordem de stop (Stop Loss e Take Profit)
   if(!ChartGetInteger(chart_ID,CHART_COLOR_STOP_LEVEL,0,result))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
     }
//--- retorna o valor da propriedade do gr√°fico
   return((color)result);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o configura cores dos n√≠veis de Stop Loss e Take Profit.  |
//+------------------------------------------------------------------+
bool ChartStopLevelColorSet(const color clr,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- definir a cor de n√≠veis de ordem de stop (Stop Loss e Take Profit)
   if(!ChartSetInteger(chart_ID,CHART_COLOR_STOP_LEVEL,clr))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_SHOW_TRADE_LEVELS ‚Äì propriedade de exibi√ß√£o de n√≠veis de negocia√ß√£o no gr√°fico (n√≠veis
de abertura de posi√ß√£o, Stop Loss, Take Profit e ordens pendentes.
</p>
<pre><code class="language-mql5">
//+---------------------------------------------------------------------+
//| A fun√ß√£o define se n√≠veis de negocia√ß√£o s√£o exibidos no gr√°fico.¬†   |</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
378
</p>
<pre><code class="language-mql5">
//+---------------------------------------------------------------------+
bool ChartShowTradeLevelsGet(bool &amp;result,const long chart_ID=0)
  {
//--- preparar a vari√°vel para obter o valor da propriedade
   long value;
//--- redefine o valor de erro
   ResetLastError();
//--- receber o valor da propriedade
   if(!ChartGetInteger(chart_ID,CHART_SHOW_TRADE_LEVELS,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- armazenar o valor da propriedade do gr√°fico na mem√≥ria
   result=value;
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+----------------------------------------------------------------------+
//| A fun√ß√£o habilita/desabilita o modo de exibi√ß√£o n√≠veis de negocia√ß√£o |
//+----------------------------------------------------------------------+
bool ChartShowTradeLevelsSet(const bool value,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- define valor de propriedade
   if(!ChartSetInteger(chart_ID,CHART_SHOW_TRADE_LEVELS,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_DRAG_TRADE_LEVELS ‚Äì propriedade de habilitar a capacidade de arrastar os n√≠veis de
negocia√ß√£o no gr√°fico usando o mouse.
</p>
<pre><code class="language-mql5">
//+---------------------------------------------------------------------------+
//| Fun√ß√£o define se arrastar os n√≠veis de negocia√ß√£o no gr√°fico com o mouse¬† |
//| √© permitido.                                                              |
//+---------------------------------------------------------------------------+
bool ChartDragTradeLevelsGet(bool &amp;result,const long chart_ID=0)
  {
//--- preparar a vari√°vel para obter o valor da propriedade
   long value;</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
379
</p>
<pre><code class="language-mql5">
//--- redefine o valor de erro
   ResetLastError();
//--- receber o valor da propriedade
   if(!ChartGetInteger(chart_ID,CHART_DRAG_TRADE_LEVELS,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- armazenar o valor da propriedade do gr√°fico na mem√≥ria
   result=value;
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o habilita/desabilita o modo arrastar os n√≠veis de neg√≥cios¬†|
//| no gr√°fico usando o mouse.                                       |
//+------------------------------------------------------------------+
bool ChartDragTradeLevelsSet(const bool value,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- define valor de propriedade
   if(!ChartSetInteger(chart_ID,CHART_DRAG_TRADE_LEVELS,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_SHOW_DATE_SCALE ‚Äì propriedade de exibi√ß√£o da escala de tempo em um gr√°fico.
</p>
<pre><code class="language-mql5">
//+--------------------------------------------------------------------+
//| A fun√ß√£o configura se a escala de tempo √© exibida no gr√°fico.¬†     |
//+--------------------------------------------------------------------+
bool ChartShowDateScaleGet(bool &amp;result,const long chart_ID=0)
  {
//--- preparar a vari√°vel para obter o valor da propriedade
   long value;
//--- redefine o valor de erro
   ResetLastError();
//--- receber o valor da propriedade
   if(!ChartGetInteger(chart_ID,CHART_SHOW_DATE_SCALE,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
380
</p>
<pre><code class="language-mql5">
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- armazenar o valor da propriedade do gr√°fico na mem√≥ria
   result=value;
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+--------------------------------------------------------------------+
//| A fun√ß√£o habilita/desabilita o modo de exibir a escala de tempo no |
//| gr√°fico.                                                           |
//+--------------------------------------------------------------------+
bool ChartShowDateScaleSet(const bool value,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- define valor de propriedade
   if(!ChartSetInteger(chart_ID,CHART_SHOW_DATE_SCALE,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_SHOW_PRICE_SCALE ‚Äì propriedade de mostrar a escala de pre√ßos no gr√°fico.
</p>
<pre><code class="language-mql5">
//+--------------------------------------------------------------------+
//| A fun√ß√£o define se a escala de pre√ßos √© exibida no gr√°fico.¬†       |
//+--------------------------------------------------------------------+
bool ChartShowPriceScaleGet(bool &amp;result,const long chart_ID=0)
  {
//--- preparar a vari√°vel para obter o valor da propriedade
   long value;
//--- redefine o valor de erro
   ResetLastError();
//--- receber o valor da propriedade
   if(!ChartGetInteger(chart_ID,CHART_SHOW_PRICE_SCALE,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- armazenar o valor da propriedade do gr√°fico na mem√≥ria
   result=value;
//--- sucesso na execu√ß√£o</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
381
</p>
<pre><code class="language-mql5">
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+----------------------------------------------------------------------------+
//| A fun√ß√£o habilita/desabilita o modo de exibir a escala de pre√ßos no¬†       |
//| gr√°fico.                                                                   |
//+----------------------------------------------------------------------------+
bool ChartShowPriceScaleSet(const bool value,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- define valor de propriedade
   if(!ChartSetInteger(chart_ID,CHART_SHOW_PRICE_SCALE,0,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_SHOW_ONE_CLICK ‚Äì Propriedade de exibi√ß√£o do painel &quot;negociar √† um clique&quot; num gr√°fico.
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Verifique se o painel &quot;negociar √† um clique&quot; √© exibido no gr√°fico|
//+------------------------------------------------------------------+
bool ChartShowOneClickPanelGet(bool &amp;result,const long chart_ID=0)
  {
//--- Preparar a vari√°vel para obter o valor da propriedade
   long value;
//--- Redefinir o valor de erro
   ResetLastError();
//--- Receber o valor da propriedade
   if(!ChartGetInteger(chart_ID,CHART_SHOW_ONE_CLICK,0,value))
     {
      //--- Exibir a mensagem de erro no di√°rio de Experts
      Print(__FUNCTION__+&quot;, Error Code = &quot;,GetLastError());
      return(false);
     }
//--- Armazenar o valor da propriedade gr√°fica na mem√≥ria
   result=value;
//--- Execu√ß√£o bem-sucedida
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Ativa/desativa a exibi√ß√£o do painel &quot;Negociar √† um clique&quot;       |
//| no gr√°fico                                                       |
//+------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
382
</p>
<pre><code class="language-mql5">
bool ChartShowOneClickPanelSet(const bool value,const long chart_ID=0)
  {
//--- Redefinir o valor de erro
   ResetLastError();
//--- definir o vaolr da propriedade
   if(!ChartSetInteger(chart_ID,CHART_SHOW_ONE_CLICK,0,value))
     {
      //--- Exibir a mensagem de erro no di√°rio de Experts
      Print(__FUNCTION__+&quot;, Error Code = &quot;,GetLastError());
      return(false);
     }
//--- Execu√ß√£o bem-sucedida
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_SHIFT_SIZE ‚Äì o tamanho da barra zero encaixada a partir da borda direita em porcentagens.
</p>
<pre><code class="language-mql5">
//+---------------------------------------------------------------------------+
//| A fun√ß√£o recebe a tamanho do deslocamento da barra zero do limite direito |
//| do gr√°fico em valores percentuais (de 10% at√© 50%).¬†                      |
//+---------------------------------------------------------------------------+
double ChartShiftSizeGet(const long chart_ID=0)
  {
//--- preparar a vari√°vel para obter o resultado
   double result=EMPTY_VALUE;
//--- redefine o valor de erro
   ResetLastError();
//--- receber o valor da propriedade
   if(!ChartGetDouble(chart_ID,CHART_SHIFT_SIZE,0,result))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
     }
//--- retorna o valor da propriedade do gr√°fico
   return(result);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+-----------------------------------------------------------------------------------
//| A fun√ß√£o configura o tamanho do deslocamento da barra zero da direita¬†            
//| limite do gr√°fico em valores percentuais (de 10% at√© 50%).¬†                       
//| Para habilitar o deslocamento modo, valor da propriedade CHART_SHIFT              
//| ser√° configurada para true.                                                       
//+-----------------------------------------------------------------------------------
bool ChartShiftSizeSet(const double value,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- define valor de propriedade
   if(!ChartSetDouble(chart_ID,CHART_SHIFT_SIZE,value))</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
383
</p>
<pre><code class="language-mql5">
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_FIXED_POSITION ‚Äì posi√ß√£o fixa do gr√°fico a partir da borda esquerda em valor percentual.
</p>
<pre><code class="language-mql5">
//+--------------------------------------------------------------------------+
//| A fun√ß√£o recebe a a localiza√ß√£o da posi√ß√£o fixa do gr√°fico de limite¬†    |
//| esquerdo em valor percentual.¬†                                           |
//+--------------------------------------------------------------------------+
double ChartFixedPositionGet(const long chart_ID=0)
  {
//--- preparar a vari√°vel para obter o resultado
   double result=EMPTY_VALUE;
//--- redefine o valor de erro
   ResetLastError();
//--- receber o valor da propriedade
   if(!ChartGetDouble(chart_ID,CHART_FIXED_POSITION,0,result))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
     }
//--- retorna o valor da propriedade do gr√°fico
   return(result);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+---------------------------------------------------------------------+
//| Fun√ß√£o configura a localiza√ß√£o da posi√ß√£o fixa do gr√°fico de limite¬†|
//| esquerdo em valor percentual.¬†   Para visualizar a localiza√ß√£o da¬†  |
//| posi√ß√£o fixa do gr√°fico, o valor de propriedade¬†                    |
//| CHART_AUTOSCROLL deve ser definida como falsa.¬†                     |
//+---------------------------------------------------------------------+
bool ChartFixedPositionSet(const double value,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- define valor de propriedade
   if(!ChartSetDouble(chart_ID,CHART_FIXED_POSITION,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
384
</p>
<pre><code class="language-mql5">
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_FIXED_MAX ‚Äì propriedade para fixa√ß√£o m√°xima do gr√°fico.
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o recebe o valor de fixa√ß√£o m√°xima do gr√°fico.¬†           |
//+------------------------------------------------------------------+
double ChartFixedMaxGet(const long chart_ID=0)
  {
//--- preparar a vari√°vel para obter o resultado
   double result=EMPTY_VALUE;
//--- redefine o valor de erro
   ResetLastError();
//--- receber o valor da propriedade
   if(!ChartGetDouble(chart_ID,CHART_FIXED_MAX,0,result))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
     }
//--- retorna o valor da propriedade do gr√°fico
   return(result);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o configura o valor de fixa√ß√£o m√°xima do gr√°fico.         |
//| Para alterar o valor da propriedade, valor da propriedade¬†       |
//| CHART_SCALEFIX ser√° preliminarmente definida para¬†               |
//| true.                                                            |
//+------------------------------------------------------------------+
bool ChartFixedMaxSet(const double value,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- define valor de propriedade
   if(!ChartSetDouble(chart_ID,CHART_FIXED_MAX,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_FIXED_MIN ‚Äì propriedade para fixa√ß√£o m√≠nima do gr√°fico.
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
385
</p>
<pre><code class="language-mql5">
//| A fun√ß√£o recebe o valor de fixa√ß√£o m√≠nima do gr√°fico.¬†           |
//+------------------------------------------------------------------+
double ChartFixedMinGet(const long chart_ID=0)
  {
//--- preparar a vari√°vel para obter o resultado
   double result=EMPTY_VALUE;
//--- redefine o valor de erro
   ResetLastError();
//--- receber o valor da propriedade
   if(!ChartGetDouble(chart_ID,CHART_FIXED_MIN,0,result))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
     }
//--- retorna o valor da propriedade do gr√°fico
   return(result);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o configura o valor de fixa√ß√£o m√≠nima do gr√°fico.         |
//| Para alterar o valor da propriedade, valor da propriedade¬†       |
//| CHART_SCALEFIX ser√° preliminarmente definida para¬†               |
//| true.                                                            |
//+------------------------------------------------------------------+
bool ChartFixedMinSet(const double value,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- define valor de propriedade
   if(!ChartSetDouble(chart_ID,CHART_FIXED_MIN,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_POINTS_PER_BAR ‚Äì valor da escala em pontos por barra.
</p>
<pre><code class="language-mql5">
//+---------------------------------------------------------------------------+
//| A fun√ß√£o recebe a o valor da escala do gr√°fico em pontos por barra.¬†      |
//+---------------------------------------------------------------------------+
double ChartPointsPerBarGet(const long chart_ID=0)
  {
//--- preparar a vari√°vel para obter o resultado
   double result=EMPTY_VALUE;
//--- redefine o valor de erro</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
386
</p>
<pre><code class="language-mql5">
   ResetLastError();
//--- receber o valor da propriedade
   if(!ChartGetDouble(chart_ID,CHART_POINTS_PER_BAR,0,result))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
     }
//--- retorna o valor da propriedade do gr√°fico
   return(result);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+----------------------------------------------------------------------+
//| Fun√ß√£o configura o valor da escala do gr√°fico em pontos por barra.   |
//| Para ver o resultado da mudan√ßa do valor dessa propriedade,¬†         |
//| o valor de propriedade¬†                                              |
//| CHART_SCALE_PT_PER_BAR deve ser preliminarmente definido como true.¬† |
//+----------------------------------------------------------------------+
bool ChartPointsPerBarSet(const double value,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- define valor de propriedade
   if(!ChartSetDouble(chart_ID,CHART_POINTS_PER_BAR,value))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_PRICE_MIN retorna o valor do m√≠nimo do gr√°fico.
</p>
<pre><code class="language-mql5">
//+---------------------------------------------------------------------------------+
//| A fun√ß√£o recebe a o valor m√≠nimo do gr√°fico na janela principal, ou numa¬†       |
//| subjanela.                                                                      |
//+---------------------------------------------------------------------------------+
double ChartPriceMin(const long chart_ID=0,const int sub_window=0)
  {
//--- preparar a vari√°vel para obter o resultado
   double result=EMPTY_VALUE;
//--- redefine o valor de erro
   ResetLastError();
//--- receber o valor da propriedade
   if(!ChartGetDouble(chart_ID,CHART_PRICE_MIN,sub_window,result))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
387
</p>
<pre><code class="language-mql5">
     }
//--- retorna o valor da propriedade do gr√°fico
   return(result);
</code></pre>
<p>
  }
¬∑ CHART_PRICE_MAX retorna o valor do m√°ximo do gr√°fico.
</p>
<pre><code class="language-mql5">
//+--------------------------------------------------------------------------------+
//| A fun√ß√£o recebe a o valor m√°ximo gr√°fico na janela principal, ou numa¬†         |
//| subjanela.                                                                     |
//+--------------------------------------------------------------------------------+
double ChartPriceMax(const long chart_ID=0,const int sub_window=0)
  {
//--- preparar a vari√°vel para obter o resultado
   double result=EMPTY_VALUE;
//--- redefine o valor de erro
   ResetLastError();
//--- receber o valor da propriedade
   if(!ChartGetDouble(chart_ID,CHART_PRICE_MAX,sub_window,result))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
     }
//--- retorna o valor da propriedade do gr√°fico
   return(result);
</code></pre>
<p>
  }
¬∑ CHART_COMMENT ‚Äì comentar sobre o gr√°fico.
</p>
<pre><code class="language-mql5">
//+----------------------------------------------------------------------+
//| A fun√ß√£o recebe coment√°rio no canto superior esquerdo do gr√°fico.¬†   |
//+----------------------------------------------------------------------+
bool ChartCommentGet(string &amp;result,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- receber o valor da propriedade
   if(!ChartGetString(chart_ID,CHART_COMMENT,result))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
388
</p>
<pre><code class="language-mql5">
//| A fun√ß√£o configura coment√°rio no canto superior esquerda do¬†     |
//| gr√°fico.                                                         |
//+------------------------------------------------------------------+
bool ChartCommentSet(const string str,const long chart_ID=0)
  {
//--- redefine o valor de erro
   ResetLastError();
//--- define valor de propriedade
   if(!ChartSetString(chart_ID,CHART_COMMENT,str))
     {
      //--- exibe uma mensagem para o di√°rio Experts
      Print(__FUNCTION__+&quot;, C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
¬∑ CHART_IS_MAXIMIZED ‚Äì janela do gr√°fico maximizada
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o determina se a janela do gr√°fica est√° maximizada        |
//+------------------------------------------------------------------+
bool ChartWindowsIsMaximized(bool &amp;result,const long chart_ID=0)
  {
//--- preparamos a vari√°vel para o valor da propriedade
   long value;
//--- restauramos o valor de erro
   ResetLastError();
//--- obtemos o valor da propriedade
   if(!ChartGetInteger(chart_ID,CHART_IS_MAXIMIZED))
     {
      //--- exibimos a mensagem de erro no di√°rio do &quot;Expert&quot;
      Print(__FUNCTION__+&quot;, Error Code = &quot;,GetLastError());
      return(false);
     }
//--- memorizamos na vari√°vel o valor dos gr√°ficos
   result=value;
//--- implementa√ß√£o bem-sucedida
   return(true);
</code></pre>
<p>
  }
  
¬∑ CHART_IS_MINIMIZED ‚Äì janela de gr√°fico minimizada</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
389
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| fun√ß√£o determina se a janela do gr√°fica est√° minimizada          |
//+------------------------------------------------------------------+
bool ChartWindowsIsMinimized(bool &amp;result,const long chart_ID=0)
  {
//--- preparamos a vari√°vel para obter o valor da propriedade
   long value;
//--- restauramos o valor de erro
   ResetLastError();
//--- obtemos o valor da propriedade
   if(!ChartGetInteger(chart_ID,CHART_IS_MINIMIZED))
     {
      //--- exibimos a mensagem de erro no di√°rio do &quot;Expert&quot;
      Print(__FUNCTION__+&quot;, Error Code = &quot;,GetLastError());
      return(false);
     }
//--- memorizamos na vari√°vel o valor dos gr√°ficos
   result=value;
//--- implementa√ß√£o bem-sucedida
   return(true);
</code></pre>
<p>
  }
  
<h3>Painel para propriedades do gr√°fico</h3>
</p>
<pre><code class="language-mql5">
//--- conectar a biblioteca de elementos de controle
#include &lt;ChartObjects\ChartObjectsTxtControls.mqh&gt;
//--- constantes predefinidas
#define X_PROPERTY_NAME_1    10  // x coordenadas do nome da propriedade na primeira c
#define X_PROPERTY_VALUE_1   225 // x coordenadas do valor da propriedade na primeira 
#define X_PROPERTY_NAME_2    345 // x coordenadas do nome da propriedade na segunda e 
#define X_PROPERTY_VALUE_2   550 // x coordenadas do valor da propriedade na segunda e
#define X_BUTTON_1           285 // x coordenadas do bot√£o na primeira coluna
#define X_BUTTON_2           700 // x coordenadas do bot√£o na segunda coluna
#define Y_PROPERTY_1         30  // y coordenadas do do in√≠cio da primeira e segunda c
#define Y_PROPERTY_2         286 // y coordenadas do in√≠cio da terceira coluna
#define Y_DISTANCE           16  // eixo y da dist√¢ncia entre as linhas
#define LAST_PROPERTY_NUMBER 111 // n√∫mero da √∫ltima propriedade gr√°fica
//--- par√¢metros de entrada
input color InpFirstColor=clrDodgerBlue; // Cor de linhas √≠mpares
input color InpSecondColor=clrGoldenrod; // Cor de linhas pares
//--- vari√°veis ‚Äãe arrays
</code></pre>
<p>
CChartObjectLabel  ExtLabelsName[];  // etiquetas para exibir nomes das propriedades
CChartObjectLabel  ExtLabelsValue[]; // etiquetas para exibi√ß√£o dos valores da proprie
<h3>CChartObjectButton ExtButtons[];     // bot√µes</h3>
</p>
<pre><code class="language-mql5">
int                ExtNumbers[];     // √≠ndices das propriedades
string             ExtNames[];       // nomes das propriedades
</code></pre>
<p>
uchar              ExtDataTypes[];   // tipos de dados de propriedade (integer, double
uint               ExtGroupTypes[];  // array que armazena os dados de propriedades pe
uchar              ExtDrawTypes[];   // array que armazena os dados sobre o tipo de ex
</p>
<pre><code class="language-mql5">
double             ExtMaxValue[];    // valores m√°ximos poss√≠veis das propriedades par
double             ExtMinValue[];    // valores m√≠nimos poss√≠veis das propriedades par</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
390
</p>
<pre><code class="language-mql5">
double             ExtStep[];        // passos para alterar as propriedades
int                ExtCount;         // n√∫mero total de todas as propriedades
</code></pre>
<p>
color              ExtColors[2];     // array de cores para exibi√ß√£o das linhas
</p>
<pre><code class="language-mql5">
string             ExtComments[2];   // array de coment√°rios (para propriedade CHART_C
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- exibir a coment√°rio no gr√°fico
   Comment(&quot;SomeComment&quot;);
//--- armazenam cores no array para alternarem entre eles mais tarde
   ExtColors[0]=InpFirstColor;
   ExtColors[1]=InpSecondColor;
//--- armazenam coment√°rios no array para alternarem entre eles mais tarde
   ExtComments[0]=&quot;FirstComment&quot;;
   ExtComments[1]=&quot;SecondComment&quot;;
//--- preparar e exibir o painel de controle para o gerenciamento das propriedades do 
   if(!PrepareControls())
      return(INIT_FAILED);
//--- sucesso na execu√ß√£o
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de finaliza√ß√£o do expert¬†                                 |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
//--- remover o coment√°rio no gr√°fico
   Comment(&quot;&quot;);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Manipular eventos de um gr√°fico¬†                                 |
//+------------------------------------------------------------------+
void OnChartEvent(const int id,
                  const long &amp;lparam,
                  const double &amp;dparam,
                  const string &amp;sparam)
  {
//--- verificar o evento clicando no objeto do gr√°fico
   if(id==CHARTEVENT_OBJECT_CLICK)
     {
      //--- divide o nome do objeto pelo separador
      string obj_name[];
      StringSplit(sparam,&#x27;_&#x27;,obj_name);
      //--- verifica se o objeto √© um bot√£o
      if(obj_name[0]==&quot;Button&quot;)
        {
         //--- receber √≠ndice de bot√£o</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
391
</p>
<pre><code class="language-mql5">
         int index=(int)StringToInteger(obj_name[1]);
         //--- desfazer pressionando o bot√£o
         ExtButtons[index].State(false);
         //--- definir o novo valor da propriedade dependendo do seu tipo
         if(ExtDataTypes[index]==&#x27;I&#x27;)
            ChangeIntegerProperty(index);
         if(ExtDataTypes[index]==&#x27;D&#x27;)
            ChangeDoubleProperty(index);
         if(ExtDataTypes[index]==&#x27;S&#x27;)
            ChangeStringProperty(index);
        }
     }
//--- re-desenhar valores de propriedades
   RedrawProperties();
   ChartRedraw();
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Alterar a propriedade inteira do gr√°fico¬†                        |
//+------------------------------------------------------------------+
void ChangeIntegerProperty(const int index)
  {
//--- receber o valor atual da propriedade
   long value=ChartGetInteger(0,(ENUM_CHART_PROPERTY_INTEGER)ExtNumbers[index]);
//--- definir o seguinte valor da propriedade
   switch(ExtDrawTypes[index])
     {
      case &#x27;C&#x27;:
         value=GetNextColor((color)value);
         break;
      default:
         value=(long)GetNextValue((double)value,index);
         break;
     }
//--- definir o novo valor de propriedade
   ChartSetInteger(0,(ENUM_CHART_PROPERTY_INTEGER)ExtNumbers[index],0,value);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Alterar a propriedade double do gr√°fico¬†                         |
//+------------------------------------------------------------------+
void ChangeDoubleProperty(const int index)
  {
//--- receber o valor atual da propriedade
   double value=ChartGetDouble(0,(ENUM_CHART_PROPERTY_DOUBLE)ExtNumbers[index]);
//--- definir o seguinte valor da propriedade
   value=GetNextValue(value,index);
//--- definir o novo valor de propriedade
   ChartSetDouble(0,(ENUM_CHART_PROPERTY_DOUBLE)ExtNumbers[index],value);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
392
</p>
<pre><code class="language-mql5">
//| Alterar a propriedade string do gr√°fico¬†                         |
//+------------------------------------------------------------------+
void ChangeStringProperty(const int index)
  {
//--- vari√°vel est√°tica para comuta√ß√£o dentro do array ExtComments
   static uint comment_index=1;
//--- alterar o √≠ndice para receber outro coment√°rio
   comment_index=1-comment_index;
//--- definir o novo valor de propriedade
   ChartSetString(0,(ENUM_CHART_PROPERTY_STRING)ExtNumbers[index],ExtComments[comment_
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Definir o pr√≥ximos valor da propriedade¬†                         |
//+------------------------------------------------------------------+
double GetNextValue(const double value,const int index)
  {
   if(value+ExtStep[index]&lt;=ExtMaxValue[index])
      return(value+ExtStep[index]);
   else
      return(ExtMinValue[index]);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Receber a pr√≥xima cor para a propriedade tipo color¬†             |
//+------------------------------------------------------------------+
</code></pre>
<p>
color GetNextColor(const color clr)
</p>
<pre><code class="language-mql5">
  {
//--- retornar o seguinte valor de cor
   switch(clr)
     {
      case clrWhite: return(clrRed);
      case clrRed:   return(clrGreen);
      case clrGreen: return(clrBlue);
      case clrBlue:  return(clrBlack);
      default:       return(clrWhite);
     }
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Re-desenhar valores de propriedades¬†                             |
//+------------------------------------------------------------------+
void RedrawProperties(void)
  {
//--- texto de valor da propriedade
   string text;
   long   value;
//--- loop do n√∫mero de propriedades
   for(int i=0;i&lt;ExtCount;i++)
     {
      text=&quot;&quot;;
      switch(ExtDataTypes[i])</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
393
</p>
<pre><code class="language-mql5">
        {
         case &#x27;I&#x27;:
            //--- receber o valor atual da propriedade
            if(!ChartGetInteger(0,(ENUM_CHART_PROPERTY_INTEGER)ExtNumbers[i],0,value))
            break;
            //--- texto de propriedade inteiro
            switch(ExtDrawTypes[i])
              {
               //--- propriedade color
               case &#x27;C&#x27;:
                  text=(string)((color)value);
                  break;
                  //--- propriedade boolean
               case &#x27;B&#x27;:
                  text=(string)((bool)value);
                  break;
                  //--- propriedade do enumerador ENUM_CHART_MODE
               case &#x27;M&#x27;:
                  text=EnumToString((ENUM_CHART_MODE)value);
                  break;
                  //--- propriedade do enumerador ENUM_CHART_VOLUME_MODE
               case &#x27;V&#x27;:
                  text=EnumToString((ENUM_CHART_VOLUME_MODE)value);
                  break;
                  //--- n√∫mero tipo int
               default:
                  text=IntegerToString(value);
                  break;
              }
            break;
         case &#x27;D&#x27;:
            //--- texto de propriedade double
            text=DoubleToString(ChartGetDouble(0,(ENUM_CHART_PROPERTY_DOUBLE)ExtNumber
            break;
         case &#x27;S&#x27;:
            //--- texto de propriedade string
            text=ChartGetString(0,(ENUM_CHART_PROPERTY_STRING)ExtNumbers[i]);
            break;
        }
      //--- mostrar valor de propriedade
      ExtLabelsValue[i].Description(text);
     }
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Criar o painel para o gerenciamento das propriedades do gr√°fico¬† |
//+------------------------------------------------------------------+
bool PrepareControls(void)
  {
//--- alocar mem√≥ria para arrays com uma reserva</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
394
</p>
<pre><code class="language-mql5">
   MemoryAllocation(LAST_PROPERTY_NUMBER+1);
//--- vari√°veis
   int i=0;     // loop vari√°vel
   int col_1=0; // n√∫mero de propriedades na primeira coluna
   int col_2=0; // n√∫mero de propriedade na segunda coluna
   int col_3=0; // m√∫mero de propriedade na terceira coluna
//--- n√∫mero atual de propriedades - 0
   ExtCount=0;
//--- observando propriedades no loop
   while(i&lt;=LAST_PROPERTY_NUMBER)
     {
      //--- armazenar o n√∫mero atual de propriedades
      ExtNumbers[ExtCount]=i;
      //--- incrementar o valor da vari√°vel do loop
      i++;
      //--- verificar se existe uma propriedade com tal n√∫mero
      if(CheckNumber(ExtNumbers[ExtCount],ExtNames[ExtCount],ExtDataTypes[ExtCount],Ex
        {
         //--- criar elementos de controle para a propriedade
         switch(ExtGroupTypes[ExtCount])
           {
            case 1:
               //--- criar etiquetas e um bot√£o para a propriedade
               if(!ShowProperty(ExtCount,0,X_PROPERTY_NAME_1,X_PROPERTY_VALUE_1,X_BUTT
               return(false);
               //--- n√∫mero de elementos na primeira coluna foi incrementado
               col_1++;
               break;
            case 2:
               //--- criar etiquetas e um bot√£o para a propriedade
               if(!ShowProperty(ExtCount,1,X_PROPERTY_NAME_2,X_PROPERTY_VALUE_2,X_BUTT
               return(false);
               //--- n√∫mero de elementos na segunda coluna foi incrementado
               col_2++;
               break;
            case 3:
               //--- criar apenas etiquetas para a propriedade
               if(!ShowProperty(ExtCount,2,X_PROPERTY_NAME_2,X_PROPERTY_VALUE_2,0,Y_PR
               return(false);
               //--- n√∫mero de elementos na terceira coluna foi incrementado
               col_3++;
               break;
           }
         //--- definir o m√°ximo e o m√≠nimo do valor e da etapa da propriedade
         GetMaxMinStep(ExtNumbers[ExtCount],ExtMaxValue[ExtCount],ExtMinValue[ExtCount
         //--- incrementar o n√∫mero de propriedades
         ExtCount++;
        }
     }</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
395
</p>
<pre><code class="language-mql5">
//--- liberar a mem√≥ria n√£o usada pelos arrays
   MemoryAllocation(ExtCount);
//--- re-desenhar valores de propriedades
   RedrawProperties();
   ChartRedraw();
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Alocar mem√≥ria para os arrays¬†                                   |
//+------------------------------------------------------------------+
void MemoryAllocation(const int size)
  {
   ArrayResize(ExtLabelsName,size);
   ArrayResize(ExtLabelsValue,size);
   ArrayResize(ExtButtons,size);
   ArrayResize(ExtNumbers,size);
   ArrayResize(ExtNames,size);
   ArrayResize(ExtDataTypes,size);
   ArrayResize(ExtGroupTypes,size);
   ArrayResize(ExtDrawTypes,size);
   ArrayResize(ExtMaxValue,size);
   ArrayResize(ExtMinValue,size);
   ArrayResize(ExtStep,size);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Verificar se o √≠ndice de propriedade pertence a um de¬†           |
//| enumerador ENUM_CHART_PROPERTIES¬†                                |
//+------------------------------------------------------------------+
bool CheckNumber(const int ind,string &amp;name,uchar &amp;data_type,uint &amp;group_type,uchar &amp;d
  {
//--- verificar se a propriedade √© do tipo integer
   ResetLastError();
   name=EnumToString((ENUM_CHART_PROPERTY_INTEGER)ind);
   if(_LastError==0)
     {
      data_type=&#x27;I&#x27;;                      // propriedade do enumerador ENUM_CHART_PROP
      GetTypes(ind,group_type,draw_type); // definir par√¢metros da propriedade display
      return(true);
     }
//--- verificar se a propriedade √© do tipo double
   ResetLastError();
   name=EnumToString((ENUM_CHART_PROPERTY_DOUBLE)ind);
   if(_LastError==0)
     {
      data_type=&#x27;D&#x27;;                      // propriedade do enumerador ENUM_CHART_PROP
      GetTypes(ind,group_type,draw_type); // definir par√¢metros da propriedade display
      return(true);
     }</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
396
</p>
<pre><code class="language-mql5">
//--- verificar se a proprieade √© do tipo string
   ResetLastError();
   name=EnumToString((ENUM_CHART_PROPERTY_STRING)ind);
   if(_LastError==0)
     {
      data_type=&#x27;S&#x27;;                      // propriedade do enumerador ENUM_CHART_PROP
      GetTypes(ind,group_type,draw_type); // definir par√¢metros da propriedade display
      return(true);
     }
//--- propriedade n√£o pertence a qualquer enumera√ß√£o
   return(false);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Definir o grupo que a propriedade ser√° armazenada em¬†            |
//| bem como seu tipo de exibi√ß√£o¬†                                   |
//+------------------------------------------------------------------+
void GetTypes(const int property_number,uint &amp;group_type,uchar &amp;draw_type)
  {
//--- verificar se a propriedade pertence ao terceiro grupo
//--- propriedades terceiro grupo s√£o apresentados na segunda coluna, a partir de CHAR
   if(CheckThirdGroup(property_number,group_type,draw_type))
      return;
//--- verificar se a propriedade pertence ao segundo grupo
//--- propriedades segundo grupo s√£o apresentados no in√≠cio da segunda coluna
   if(CheckSecondGroup(property_number,group_type,draw_type))
      return;
//--- se voc√™ est√° aqui, a propriedade pertence ao primeiro grupo (primeira coluna)
   CheckFirstGroup(property_number,group_type,draw_type);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+----------------------------------------------------------------------+
//| A fun√ß√£o verifica se a propriedade pertence ao terceiro grupo e¬†     |
//| define o seu tipo display no caso de uma resposta positiva¬†          |
//+----------------------------------------------------------------------+
bool CheckThirdGroup(const int property_number,uint &amp;group_type,uchar &amp;draw_type)
  {
//--- verificar se a propriedade pertence ao terceiro grupo
   switch(property_number)
     {
      //--- propriedades boolean
      case CHART_IS_OBJECT:
      case CHART_WINDOW_IS_VISIBLE:
         draw_type=&#x27;B&#x27;;
         break;
         //--- propriedades inteiro
      case CHART_VISIBLE_BARS:
      case CHART_WINDOWS_TOTAL:
      case CHART_WINDOW_HANDLE:
      case CHART_WINDOW_YDISTANCE:
      case CHART_FIRST_VISIBLE_BAR:</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
397
</p>
<pre><code class="language-mql5">
      case CHART_WIDTH_IN_BARS:
      case CHART_WIDTH_IN_PIXELS:
         draw_type=&#x27;I&#x27;;
         break;
         //--- propriedades double
      case CHART_PRICE_MIN:
      case CHART_PRICE_MAX:
         draw_type=&#x27;D&#x27;;
         break;
         //--- na verdade, esta propriedade √© um comando para exibir o gr√°fico em cima
         //--- n√£o h√° necessidade de aplicar este painel, como a janela sempre ser√°
         //--- em cima das outras antes de a usarmos
      case CHART_BRING_TO_TOP:
         draw_type=&#x27; &#x27;;
         break;
         //--- propriedade n√£o pertencem ao terceiro grupo
      default:
         return(false);
     }
//--- propriedade pertencem ao terceiro grupo
   group_type=3;
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+----------------------------------------------------------------------+
//| A fun√ß√£o verifica se a propriedade pertence ao segundo grupo e¬†      |
//| define o seu tipo display no caso de uma resposta positiva¬†          |
//+----------------------------------------------------------------------+
bool CheckSecondGroup(const int property_number,uint &amp;group_type,uchar &amp;draw_type)
  {
//--- verificar se a propriedade pertence ao segundo grupo
   switch(property_number)
     {
      //--- propriedade de tipo ENUM_CHART_MODE
      case CHART_MODE:
         draw_type=&#x27;M&#x27;;
         break;
         //--- propriedade de tipo ENUM_CHART_VOLUME_MODE
      case CHART_SHOW_VOLUMES:
         draw_type=&#x27;V&#x27;;
         break;
         //--- propriedade string
      case CHART_COMMENT:
         draw_type=&#x27;S&#x27;;
         break;
         //--- propriedade color
      case CHART_COLOR_BACKGROUND:
      case CHART_COLOR_FOREGROUND:
      case CHART_COLOR_GRID:
      case CHART_COLOR_VOLUME:</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
398
</p>
<pre><code class="language-mql5">
      case CHART_COLOR_CHART_UP:
      case CHART_COLOR_CHART_DOWN:
      case CHART_COLOR_CHART_LINE:
      case CHART_COLOR_CANDLE_BULL:
      case CHART_COLOR_CANDLE_BEAR:
      case CHART_COLOR_BID:
      case CHART_COLOR_ASK:
      case CHART_COLOR_LAST:
      case CHART_COLOR_STOP_LEVEL:
         draw_type=&#x27;C&#x27;;
         break;
         //--- propriedade n√£o pertence ao segundo grupo
      default:
         return(false);
     }
//--- propriedade pertence ao segundo grupo
   group_type=2;
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+-----------------------------------------------------------------------+
//| Esta fun√ß√£o √© chamada apenas se ela j√° √© conhecida¬†                   |
//| a propriedade n√£o √© do segundo e terceiro grupos de propriedades¬†     |
//+-----------------------------------------------------------------------+
void CheckFirstGroup(const int property_number,uint &amp;group_type,uchar &amp;draw_type)
  {
//--- a propriedade pertence ao primeiro grupo
   group_type=1;
//--- definir a propriedade tipo display
   switch(property_number)
     {
      //--- propriedades inteiro
      case CHART_SCALE:
      case CHART_HEIGHT_IN_PIXELS:
         draw_type=&#x27;I&#x27;;
         return;
         //--- propriedades double
      case CHART_SHIFT_SIZE:
      case CHART_FIXED_POSITION:
      case CHART_FIXED_MAX:
      case CHART_FIXED_MIN:
      case CHART_POINTS_PER_BAR:
         draw_type=&#x27;D&#x27;;
         return;
         //--- ficaram apenas as propriedades boolean
      default:
         draw_type=&#x27;B&#x27;;
         return;
     }
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
399
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Criar uma etiqueta e um bot√£o para a propriedade¬†                |
//+------------------------------------------------------------------+
bool ShowProperty(const int ind,const int type,const int x1,const int x2,
                  const int xb,const int y,const bool btn)
  {
//--- array est√°tico para comutar dentro do array de cor ExtColors
   static uint color_index[3]={1,1,1};
//--- alterar o √≠ndice para receber uma outra cor
   color_index[type]=1-color_index[type];
//--- etiquetas display e um bot√£o (se btn = true) para a propriedade
   if(!LabelCreate(ExtLabelsName[ind],&quot;name_&quot;+(string)ind,ExtNames[ind],ExtColors[colo
      return(false);
   if(!LabelCreate(ExtLabelsValue[ind],&quot;value_&quot;+(string)ind,&quot;&quot;,ExtColors[color_index[t
      return(false);
   if(btn &amp;&amp; !ButtonCreate(ExtButtons[ind],(string)ind,xb,y+1))
      return(false);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| criar um r√≥tulo¬†                                                 |
//+------------------------------------------------------------------+
bool LabelCreate(CChartObjectLabel &amp;lbl,const string name,const string text,
                 const color clr,const int x,const int y)
  {
   if(!lbl.Create(0,&quot;Label_&quot;+name,0,x,y)) return(false);
   if(!lbl.Description(text))             return(false);
   if(!lbl.FontSize(10))                  return(false);
   if(!lbl.Color(clr))                    return(false);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Criar o bot√£o¬†                                                   |
//+------------------------------------------------------------------+
bool ButtonCreate(CChartObjectButton &amp;btn,const string name,
                  const int x,const int y)
  {
   if(!btn.Create(0,&quot;Button_&quot;+name,0,x,y,50,15)) return(false);
   if(!btn.Description(&quot;Pr√≥ximo&quot;))                  return(false);
   if(!btn.FontSize(10))                         return(false);
   if(!btn.Color(clrBlack))                      return(false);
   if(!btn.BackColor(clrWhite))                  return(false);
   if(!btn.BorderColor(clrBlack))                return(false);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
400
</p>
<pre><code class="language-mql5">
//| Definir o m√°ximo e o m√≠nimo do valor e da etapa propriedade¬†     |
//+------------------------------------------------------------------+
void GetMaxMinStep(const int property_number,double &amp;max,double &amp;min,double &amp;step)
  {
   double value;
//--- definir os valores dependendo do tipo de propriedade
   switch(property_number)
     {
      case CHART_SCALE:
         max=5;
         min=0;
         step=1;
         break;
      case CHART_MODE:
      case CHART_SHOW_VOLUMES:
         max=2;
         min=0;
         step=1;
         break;
      case CHART_SHIFT_SIZE:
         max=50;
         min=10;
         step=2.5;
         break;
      case CHART_FIXED_POSITION:
         max=90;
         min=0;
         step=15;
         break;
      case CHART_POINTS_PER_BAR:
         max=19;
         min=1;
         step=3;
         break;
      case CHART_FIXED_MAX:
         value=ChartGetDouble(0,CHART_FIXED_MAX);
         max=value*1.25;
         min=value;
         step=value/32;
         break;
      case CHART_FIXED_MIN:
         value=ChartGetDouble(0,CHART_FIXED_MIN);
         max=value;
         min=value*0.75;
         step=value/32;
         break;
      case CHART_HEIGHT_IN_PIXELS:
         max=700;
         min=520;</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
401
</p>
<pre><code class="language-mql5">
         step=30;
         break;
         //--- valores padr√£o
      default:
         max=1;
         min=0;
         step=1;
     }
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
402
<h3>Constantes de Objetos</h3>
Existem 44 objetos gr√°ficos que podem ser criados e exibidos no gr√°fico de pre√ßos. Todas as
constantes para se trabalhar com objetos est√£o divididos em 9 grupos:
¬∑ Tipos de Objetos ‚Äì Identificadores de objetos gr√°ficos;
¬∑ Propriedades de objeto ‚Äì atribui√ß√£o e obten√ß√£o de propriedades de objetos gr√°ficos;
¬∑ M√©todos de vincula√ß√£o de objeto ‚Äì constantes de posicionamento no gr√°fico;
¬∑ Canto de vincula√ß√£o ‚Äì uma indica√ß√£o do √¢ngulo da tabela, que est√° posicionada sobre o objeto;
¬∑ Visibilidade de objetos ‚Äì defini√ß√£o de janelas de tempo em que um objeto √© vis√≠vel;
¬∑ N√≠veis de Ondas de Elliott ‚Äì marca√ß√£o de grada√ß√£o de onda;
¬∑ Objetos Gann ‚Äì constantes de tend√™ncia para ventilador de Gann e grade de Gann;
¬∑ Cores Web ‚Äì constantes de cores Web pr√©-definidos;
¬∑ Wingdings ‚Äì c√≥digos de caracteres da fonte Wingdings.</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
403
<h3>Tipos de Objeto</h3>
Quando um objeto gr√°fico √© criado usando a fun√ß√£o ObjectCreate(), √© necess√°rio especificar o tipo de
objeto a ser criado, que pode ser um dos valores da enumera√ß√£o ENUM_OBJECT. Especifica√ß√µes
adicionais de propriedades de objetos s√£o poss√≠veis usando fun√ß√µes para trabalhar com objetos
gr√°ficos.
<h3>ENUM_OBJECT</h3>
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>OBJ_VLINE</h3>
<h3>Linha Vertical</h3>
<h3>OBJ_HLINE</h3>
<h3>Linha Horizontal</h3>
<h3>OBJ_TREND</h3>
<h3>Linha de Tend√™ncia</h3>
<h3>OBJ_TRENDBYANGLE</h3>
<h3>Linha de Tend√™ncia por √Çngulo</h3>
<h3>OBJ_CYCLES</h3>
<h3>Linhas de Ciclo</h3>
<h3>OBJ_ARROWED_LINE</h3>
<h3>Linha de Seta</h3>
<h3>OBJ_CHANNEL</h3>
<h3>Canal Eq√ºidistante</h3>
<h3>OBJ_STDDEVCHANNEL</h3>
<h3>Canal de Desvio Padr√£o</h3>
<h3>OBJ_REGRESSION</h3>
<h3>Canal de Regress√£o Linear</h3>
<h3>OBJ_PITCHFORK</h3>
<h3>Forquilha de Andrews</h3>
<h3>OBJ_GANNLINE</h3>
<h3>Linha Gann</h3>
<h3>OBJ_GANNFAN</h3>
<h3>Ventilador Gann</h3>
<h3>OBJ_GANNGRID</h3>
<h3>Grade Gann</h3>
<h3>OBJ_FIBO</h3>
<h3>Retra√ß√£o de Fibonacci</h3>
<h3>OBJ_FIBOTIMES</h3>
<h3>Fusos Hor√°rios de Fibonacci</h3>
<h3>OBJ_FIBOFAN</h3>
<h3>Fibonacci Fan</h3>
<h3>OBJ_FIBOARC</h3>
<h3>Arcos de Fibonacci</h3>
<h3>OBJ_FIBOCHANNEL</h3>
<h3>Canal de Fibonacci</h3>
<h3>OBJ_EXPANSION</h3>
<h3>Expans√£o de Fibonacci</h3>
<h3>OBJ_ELLIOTWAVE5</h3>
<h3>Onda Motriz de Elliott</h3>
<h3>OBJ_ELLIOTWAVE3</h3>
<h3>Onde de Corre√ß√£o de Elliott</h3>
<h3>OBJ_RECTANGLE</h3>
<h3>Ret√¢ngulo</h3>
<h3>OBJ_TRIANGLE</h3>
<h3>Tri√¢ngulo</h3>
<h3>OBJ_ELLIPSE</h3>
<h3>Elipse</h3>
<h3>OBJ_ARROW_THUMB_UP</h3>
<h3>Polegares para cima</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
404
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>OBJ_ARROW_THUMB_DOWN</h3>
<h3>Polegar para Baixo</h3>
<h3>OBJ_ARROW_UP</h3>
<h3>Seta para cima</h3>
<h3>OBJ_ARROW_DOWN</h3>
<h3>Seta para baixo</h3>
<h3>OBJ_ARROW_STOP</h3>
<h3>Sinal Stop</h3>
<h3>OBJ_ARROW_CHECK</h3>
<h3>Conferido</h3>
<h3>OBJ_ARROW_LEFT_PRICE</h3>
<h3>Etiqueta de Pre√ßo √† Esquerda</h3>
<h3>OBJ_ARROW_RIGHT_PRICE</h3>
<h3>R√≥tulo de Pre√ßo Direito</h3>
<h3>OBJ_ARROW_BUY</h3>
<h3>Comprar</h3>
<h3>OBJ_ARROW_SELL</h3>
<h3>Vender</h3>
<h3>OBJ_ARROW</h3>
<h3>Seta</h3>
<h3>OBJ_TEXT</h3>
<h3>Texto</h3>
<h3>OBJ_LABEL</h3>
<h3>R√≥tulo</h3>
<h3>OBJ_BUTTON</h3>
<h3>Bot√£o</h3>
<h3>OBJ_CHART</h3>
<h3>Gr√°fico</h3>
<h3>OBJ_BITMAP</h3>
<h3>Bitmap</h3>
<h3>OBJ_BITMAP_LABEL</h3>
<h3>R√≥tulo Bitmap</h3>
<h3>OBJ_EDIT</h3>
<h3>Edi√ß√£o</h3>
<h3>OBJ_EVENT</h3>
O objeto &quot;Evento&quot; correspondendo a um evento no
calend√°rio econ√¥mico
<h3>OBJ_RECTANGLE_LABEL</h3>
O objeto &quot;R√≥tulo de Ret√¢ngulo&quot; para cria√ß√£o e design de
interface gr√°fico customizada.</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
405
<h3>OBJ_VLINE</h3>
Linha vertical.
<h3>Observa√ß√£o</h3>
Ao desenhar uma linha vertical, √© poss√≠vel definir o modo de exibi√ß√£o de linha para todas as janelas
do (propriedade OBJPROP_RAY).
<h3>Exemplo</h3>
O seguinte script cria e move a linha vertical no gr√°fico. Fun√ß√µes especiais t√™m sido desenvolvidas
para criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas fun√ß√µes &quot;as is&quot; em
seus pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script desenha objeto gr√°fico \&quot; Linha Vertical\&quot;.&quot;
#property description &quot;Coordenadas do ponto de ancoragem √© configurado em porcentagem 
#property description &quot;largura da janela do gr√°fico em barras.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string          InpName=&quot;VLine&quot;;     // Nome da Linha
input int             InpDate=25;          // Data do Evento, %
input color           InpColor=clrRed;     // Cor da linha
input ENUM_LINE_STYLE InpStyle=STYLE_DASH; // Estilo da linha
input int             InpWidth=3;          // Largura da linha
input bool            InpBack=false;       // Linha de fundo
input bool            InpSelection=true;   // Destaque para mover
input bool            InpRay=true;         // Continua√ß√£o da linha para baixo</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
406
</p>
<pre><code class="language-mql5">
input bool            InpHidden=true;      // Ocultar na lista de objeto
input long            InpZOrder=0;         // Prioridade para clicar no mouse
//+------------------------------------------------------------------+
//| Criar a linha vertical¬†                                          |
//+------------------------------------------------------------------+
bool VLineCreate(const long            chart_ID=0,        // ID do gr√°fico
                 const string          name=&quot;VLine&quot;,      // nome da linha
                 const int             sub_window=0,      // √≠ndice da sub-janela
                 datetime              time=0,            // tempo da linha
                 const color           clr=clrRed,        // cor da linha
                 const ENUM_LINE_STYLE style=STYLE_SOLID, // estilo da linha
                 const int             width=1,           // largura da linha
                 const bool            back=false,        // no fundo
                 const bool            selection=true,    // destaque para mover
                 const bool            ray=true,          // continua√ß√£o da linha para
                 const bool            hidden=true,       //ocultar na lista de objeto
                 const long            z_order=0)         // prioridade para clique do
  {
//--- se o tempo de linha n√£o est√° definido, desenh√°-lo atrav√©s da √∫ltima barra
   if(!time)
      time=TimeCurrent();
//--- redefine o valor de erro
   ResetLastError();
//--- criar uma linha vertical
   if(!ObjectCreate(chart_ID,name,OBJ_VLINE,sub_window,time,0))
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar uma linha vertical! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- definir cor da linha
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir o estilo de exibi√ß√£o da linha
   ObjectSetInteger(chart_ID,name,OBJPROP_STYLE,style);
//--- definir a largura da linha
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,width);
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- habilitar (true) ou desabilitar (false) o modo do movimento da seta com o mouse
//--- ao criar um objeto gr√°fico usando a fun√ß√£o ObjectCreate, o objeto n√£o pode ser
//--- destacado e movimentado por padr√£o. Dentro deste m√©todo, o par√¢metro de sele√ß√£o
//--- √© verdade por padr√£o, tornando poss√≠vel destacar e mover o objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- habilitar (verdadeiro) ou desabilitar (falso) o modo de exibi√ß√£o da linha no gr√°
   ObjectSetInteger(chart_ID,name,OBJPROP_RAY,ray);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
407
</p>
<pre><code class="language-mql5">
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mover a linha vertical¬†                                          |
//+------------------------------------------------------------------+
bool VLineMove(const long   chart_ID=0,   // ID do gr√°fico
               const string name=&quot;VLine&quot;, // nome da linha
               datetime     time=0)       // tempo da linha
  {
//--- se o tempo de linha n√£o est√° definido, mover a linha para a √∫ltima barra
   if(!time)
      time=TimeCurrent();
//--- redefine o valor de erro
   ResetLastError();
//--- mover a linha vertical
   if(!ObjectMove(chart_ID,name,0,time,0))
     {
      Print(__FUNCTION__,
            &quot;: falhou ao mover a linha vertical! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Excluir a linha vertical¬†                                        |
//+------------------------------------------------------------------+
bool VLineDelete(const long   chart_ID=0,   // ID do gr√°fico
                 const string name=&quot;VLine&quot;) // nome da linha
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir a linha vertical
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,
            &quot;: falha ao deletar a linha vertical! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
408
</p>
<pre><code class="language-mql5">
//--- verificar a exatid√£o dos par√¢metros de entrada
   if(InpDate&lt;0 || InpDate&gt;100)
     {
      Print(&quot;Erro! Valores incorretos dos par√¢metros de entrada!&quot;);
      return;
     }
//--- n√∫mero de barras vis√≠veis na janela do gr√°fico
   int bars=(int)ChartGetInteger(0,CHART_VISIBLE_BARS);
//--- array para armazenar a data de valores a serem utilizados
//--- para definir e alterar as coordenadas de pontos de ancoragem
   datetime date[];
//--- aloca√ß√£o de mem√≥ria
   ArrayResize(date,bars);
//--- preencher o array das datas
   ResetLastError();
   if(CopyTime(Symbol(),Period(),0,bars,date)==-1)
     {
      Print(&quot;Falha ao copiar valores de tempo! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- definir os pontos para desenhar a linha
   int d=InpDate*(bars-1)/100;
//--- criar uma linha vertical
   if(!VLineCreate(0,InpName,0,date[d],InpColor,InpStyle,InpWidth,InpBack,
      InpSelection,InpRay,InpHidden,InpZOrder))
      return;
//--- redesenhar o gr√°fico e esperar por um segundo
   ChartRedraw();
   Sleep(1000);
//--- agora, mover a linha
//--- contador de loop
   int h_steps=bars/2;
//--- mover a linha
   for(int i=0;i&lt;h_steps;i++)
     {
      //--- usar o seguinte valor
      if(d&lt;bars-1)
         d+=1;
      //--- mover o ponto
      if(!VLineMove(0,InpName,date[d]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
      // 0.03 segundos de atraso
      Sleep(30);
     }</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
409
</p>
<pre><code class="language-mql5">
//--- 1 segundo de atraso
   Sleep(1000);
//--- excluir o canal do gr√°fico
   VLineDelete(0,InpName);
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
410
<h3>OBJ_HLINE</h3>
Linha Horizontal.
<h3>Exemplo</h3>
O seguinte script cria e move uma linha horizontal no gr√°fico. Fun√ß√µes especiais t√™m sido
desenvolvidas para criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas
fun√ß√µes &quot;as is&quot; em seus pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script desenha o objeto gr√°fico \&quot;Linha Horizontal\&quot;.&quot;
#property description &quot;Ponto de ancoragem do pre√ßo est√° definido em percentagem da alt
#property description &quot;janela do gr√°fico.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string          InpName=&quot;HLine&quot;;     // Nome da linha
input int             InpPrice=25;         // Pre√ßo da linha, %
input color           InpColor=clrRed;     // Cor da linha
input ENUM_LINE_STYLE InpStyle=STYLE_DASH; // Estilo da linha
input int             InpWidth=3;          // Largura da linha
input bool            InpBack=false;       // Linha de fundo
input bool            InpSelection=true;   // Destaque para mover
input bool            InpHidden=true;      // Ocultar na lista de objeto
input long            InpZOrder=0;         // Prioridade para clicar no mouse
//+------------------------------------------------------------------+
//| Criar a linha horizontal¬†                                        |
//+------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
411
</p>
<pre><code class="language-mql5">
bool HLineCreate(const long            chart_ID=0,        // ID de gr√°fico
                 const string          name=&quot;HLine&quot;,      // nome da linha
                 const int             sub_window=0,      // √≠ndice da sub-janela
                 double                price=0,           // line price
                 const color           clr=clrRed,        // cor da linha
                 const ENUM_LINE_STYLE style=STYLE_SOLID, // estilo da linha
                 const int             width=1,           // largura da linha
                 const bool            back=false,        // no fundo
                 const bool            selection=true,    // destaque para mover
                 const bool            hidden=true,       //ocultar na lista de objeto
                 const long            z_order=0)         // prioridade para clique do
  {
//--- se o pre√ßo n√£o est√° definido, defina-o no atual n√≠vel de pre√ßo Bid
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- redefine o valor de erro
   ResetLastError();
//--- criar um linha horizontal
   if(!ObjectCreate(chart_ID,name,OBJ_HLINE,sub_window,0,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar um linha horizontal! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- definir cor da linha
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir o estilo de exibi√ß√£o da linha
   ObjectSetInteger(chart_ID,name,OBJPROP_STYLE,style);
//--- definir a largura da linha
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,width);
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- habilitar (true) ou desabilitar (false) o modo do movimento da seta com o mouse
//--- ao criar um objeto gr√°fico usando a fun√ß√£o ObjectCreate, o objeto n√£o pode ser
//--- destacado e movimentado por padr√£o. Dentro deste m√©todo, o par√¢metro de sele√ß√£o
//--- √© verdade por padr√£o, tornando poss√≠vel destacar e mover o objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mover linha horizontal¬†                                          |
//+------------------------------------------------------------------+
bool HLineMove(const long   chart_ID=0,   // ID do gr√°fico</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
412
</p>
<pre><code class="language-mql5">
               const string name=&quot;HLine&quot;, // nome da linha
               double       price=0)      // pre√ßo da linha
  {
//--- se o pre√ßo n√£o est√° definido, defina-o no atual n√≠vel de pre√ßo Bid
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- redefine o valor de erro
   ResetLastError();
//--- mover um linha horizontal 
   if(!ObjectMove(chart_ID,name,0,0,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao mover um linha horizontal! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Excluir uma linha horizontal¬†                                    |
//+------------------------------------------------------------------+
bool HLineDelete(const long   chart_ID=0,   // ID do gr√°fico
                 const string name=&quot;HLine&quot;) // nome da linha
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir uma linha horizontal
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,
            &quot;: falha ao Excluir um linha horizontal! C√≥digo de erro = &quot;,GetLastError()
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- verificar a exatid√£o dos par√¢metros de entrada
   if(InpPrice&lt;0 || InpPrice&gt;100)
     {
      Print(&quot;Erro! Valores incorretos dos par√¢metros de entrada!&quot;);
      return;
     }
//--- tamanho do array de pre√ßo
   int accuracy=1000;</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
413
</p>
<pre><code class="language-mql5">
//--- array para armazenar data de valores a serem utilizados
//--- para definir e alterar as coordenadas de pontos de ancoragem
   double price[];
//--- aloca√ß√£o de mem√≥ria
   ArrayResize(price,accuracy);
//--- preencher o array de pre√ßos
//--- encontrar os maiores e menores valores do gr√°fico
   double max_price=ChartGetDouble(0,CHART_PRICE_MAX);
   double min_price=ChartGetDouble(0,CHART_PRICE_MIN);
//--- definir uma etapa de mudan√ßa de um pre√ßo e preencher o array
   double step=(max_price-min_price)/accuracy;
   for(int i=0;i&lt;accuracy;i++)
      price[i]=min_price+i*step;
//--- definir os pontos para desenhar a linha
   int p=InpPrice*(accuracy-1)/100;
//--- criar um linha horizontal
   if(!HLineCreate(0,InpName,0,price[p],InpColor,InpStyle,InpWidth,InpBack,
      InpSelection,InpHidden,InpZOrder))
     {
      return;
     }
//--- redesenhar o gr√°fico e esperar por um segundo
   ChartRedraw();
   Sleep(1000);
//--- agora, mover a linha
//--- contador de loop
   int v_steps=accuracy/2;
//--- mover a linha
   for(int i=0;i&lt;v_steps;i++)
     {
      //--- usar o seguinte valor
      if(p&lt;accuracy-1)
         p+=1;
      //--- mover o ponto
      if(!HLineMove(0,InpName,price[p]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- excluir a partir do gr√°fico
   HLineDelete(0,InpName);
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
414
</p>
<pre><code class="language-mql5">
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
415
<h3>OBJ_TREND</h3>
Linha de Tend√™ncia.
<h3>Observa√ß√£o</h3>
Para Linha de Tend√™ncia, √© poss√≠vel especificar o modo de continua√ß√£o da sua exibi√ß√£o para a
direita 
e/ou 
√† 
esquerda 
(de 
acordo 
com 
as 
propriedadesOBJPROP_RAY_RIGHT 
e
OBJPROP_RAY_LEFT).
<h3>Exemplo</h3>
O script a seguir cria e movimenta a linha de tend√™ncia no gr√°fico. Fun√ß√µes especiais t√™m sido
desenvolvidas para criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas
fun√ß√µes &quot;as is&quot; em seus pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script desenha o objeto gr√°fico \&quot;Linha de Tend√™ncia\&quot;.&quot;
#property description &quot;Coordenadas de ponto de ancoragem s√£o definidas em porcentagem 
#property description &quot;tamanho da janela do gr√°fico.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string          InpName=&quot;Trend&quot;;     // Nome da linha
input int             InpDate1=35;         // Data do 1¬∫ ponto, %
input int             InpPrice1=60;        // Pre√ßo do 1¬∫ ponto, %
input int             InpDate2=65;         // Data do 2¬∫ ponto, %
input int             InpPrice2=40;        // Pre√ßo do 2¬∫ ponto, %
input color           InpColor=clrRed;     // Cor da linha</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
416
</p>
<pre><code class="language-mql5">
input ENUM_LINE_STYLE InpStyle=STYLE_DASH; // Estilo da linha
input int             InpWidth=2;          // Largura da linha
input bool            InpBack=false;       // Linha de fundo
input bool            InpSelection=true;   // Destaque para mover
input bool            InpRayLeft=false;    // Continua√ß√£o da Linha para a esquerda
input bool            InpRayRight=false;   // Continua√ß√£o da Linha para a direita
input bool            InpHidden=true;      // Ocultar na lista de objeto
input long            InpZOrder=0;         // Prioridade para clicar no mouse
//+------------------------------------------------------------------+
//| Criar uma linha de tend√™ncia pelas coordenadas fornecidas¬†       |
//+------------------------------------------------------------------+
bool TrendCreate(const long            chart_ID=0,        // ID do gr√°fico
                 const string          name=&quot;TrendLine&quot;,  // nome da linha
                 const int             sub_window=0,      // √≠ndice da sub-janela
                 datetime              time1=0,           // primeiro ponto de tempo
                 double                price1=0,          // primeiro ponto de pre√ßo
                 datetime              time2=0,           // segundo ponto de tempo
                 double                price2=0,          // segundo ponto de pre√ßo
                 const color           clr=clrRed,        // cor da linha
                 const ENUM_LINE_STYLE style=STYLE_SOLID, // estilo da linha
                 const int             width=1,           // largura da linha
                 const bool            back=false,        // no fundo
                 const bool            selection=true,    // destaque para mover
                 const bool            ray_left=false,    // continua√ß√£o da linha para
                 const bool            ray_right=false,   // continua√ß√£o da linha para
                 const bool            hidden=true,       //ocultar na lista de objeto
                 const long            z_order=0)         // prioridade para clique do
  {
//--- definir coordenadas de pontos de ancoragem, se eles n√£o est√£o definidos
   ChangeTrendEmptyPoints(time1,price1,time2,price2);
//--- redefine o valor de erro
   ResetLastError();
//--- criar uma linha de tend√™ncia pelas coordenadas fornecidas
   if(!ObjectCreate(chart_ID,name,OBJ_TREND,sub_window,time1,price1,time2,price2))
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar uma linha de tend√™ncia! C√≥digo de erro = &quot;,GetLastError
      return(false);
     }
//--- definir cor da linha
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir o estilo de exibi√ß√£o da linha
   ObjectSetInteger(chart_ID,name,OBJPROP_STYLE,style);
//--- definir a largura da linha
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,width);
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- habilitar (true) ou desabilitar (false) o modo do movimento da seta com o mouse
//--- ao criar um objeto gr√°fico usando a fun√ß√£o ObjectCreate, o objeto n√£o pode ser</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
417
</p>
<pre><code class="language-mql5">
//--- destacado e movimentado por padr√£o. Dentro deste m√©todo, o par√¢metro de sele√ß√£o
//--- √© verdade por padr√£o, tornando poss√≠vel destacar e mover o objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- habilitar (true) ou desabilitar (false) o modo de continua√ß√£o da exibi√ß√£o da lin
   ObjectSetInteger(chart_ID,name,OBJPROP_RAY_LEFT,ray_left);
//--- habilitar (true) ou desabilitar (false) o modo de continua√ß√£o da exibi√ß√£o da lin
   ObjectSetInteger(chart_ID,name,OBJPROP_RAY_RIGHT,ray_right);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mover o ponto de ancoragem da linha de tend√™ncia¬†                |
//+------------------------------------------------------------------+
bool TrendPointChange(const long   chart_ID=0,       // ID do gr√°fico
                      const string name=&quot;TrendLine&quot;, // nome da linha
                      const int    point_index=0,    // √≠ndice do ponto de ancoragem
                      datetime     time=0,           // coordenada do ponto de ancorag
                      double       price=0)          // coordenada do ponto de ancorag
  {
//--- se a posi√ß√£o do ponto n√£o est√° definida, mover para a barra atual tendo o pre√ßo 
   if(!time)
      time=TimeCurrent();
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- redefine o valor de erro
   ResetLastError();
//--- mover ponto de ancoragem da linha de tend√™ncia
   if(!ObjectMove(chart_ID,name,point_index,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao mover o ponto de ancoragem! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o exclui a linha de tend√™ncia do gr√°fico.¬†                |
//+------------------------------------------------------------------+
bool TrendDelete(const long   chart_ID=0,       // ID do gr√°fico
                 const string name=&quot;TrendLine&quot;) // nome da linha
  {
//--- redefine o valor de erro
   ResetLastError();</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
418
</p>
<pre><code class="language-mql5">
//--- excluir uma linha de tend√™ncia
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,
            &quot;: falha ao excluir uma linha de tend√™ncia! C√≥digo de erro = &quot;,GetLastErro
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Verifique os valores de pontos de ancoragem da linha de tend√™ncia|
//| e definir padr√µes valores padr√£o para aqueles vazios¬†            |
//+------------------------------------------------------------------+
void ChangeTrendEmptyPoints(datetime &amp;time1,double &amp;price1,
                            datetime &amp;time2,double &amp;price2)
  {
//--- se o tempo do primeiro ponto n√£o est√° definido, ser√° na barra atual
   if(!time1)
      time1=TimeCurrent();
//--- se o pre√ßo do primeiro ponto n√£o est√° definido, ele ter√° valor Bid
   if(!price1)
      price1=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- se o tempo do segundo ponto n√£o est√° definido, est√° localizado a 9 barras deixad
   if(!time2)
     {
      //--- array para receber o tempo de abertura das √∫ltimos 10 barras
      datetime temp[10];
      CopyTime(Symbol(),Period(),time1,10,temp);
      //--- definir o segundo ponto 9 barras a esquerda do primeiro
      time2=temp[0];
     }
//--- se o pre√ßo do segundo ponto n√£o est√° definido, √© igual ao primeiro ponto
   if(!price2)
      price2=price1;
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- verificar a exatid√£o dos par√¢metros de entrada
   if(InpDate1&lt;0 || InpDate1&gt;100 || InpPrice1&lt;0 || InpPrice1&gt;100 || 
      InpDate2&lt;0 || InpDate2&gt;100 || InpPrice2&lt;0 || InpPrice2&gt;100)
     {
      Print(&quot;Erro! Valores incorretos dos par√¢metros de entrada!&quot;);
      return;
     }
//--- n√∫mero de barras vis√≠veis na janela do gr√°fico</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
419
</p>
<pre><code class="language-mql5">
   int bars=(int)ChartGetInteger(0,CHART_VISIBLE_BARS);
//--- tamanho do array de pre√ßo
   int accuracy=1000;
//--- arrays para armazenar data e valores de pre√ßo para serem usados
//--- para definir e alterar as coordenadas de pontos de ancoragem da linha
   datetime date[];
   double   price[];
//--- aloca√ß√£o de mem√≥ria
   ArrayResize(date,bars);
   ArrayResize(price,accuracy);
//--- preencher o array das datas
   ResetLastError();
   if(CopyTime(Symbol(),Period(),0,bars,date)==-1)
     {
      Print(&quot;Falha ao copiar valores de tempo! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- preencher o array de pre√ßos
//--- encontrar os maiores e menores valores do gr√°fico
   double max_price=ChartGetDouble(0,CHART_PRICE_MAX);
   double min_price=ChartGetDouble(0,CHART_PRICE_MIN);
//--- definir uma etapa de mudan√ßa de um pre√ßo e preencher o array
   double step=(max_price-min_price)/accuracy;
   for(int i=0;i&lt;accuracy;i++)
      price[i]=min_price+i*step;
//--- definir os pontos para desenhar a linha
   int d1=InpDate1*(bars-1)/100;
   int d2=InpDate2*(bars-1)/100;
   int p1=InpPrice1*(accuracy-1)/100;
   int p2=InpPrice2*(accuracy-1)/100;
//--- criar uma linha de tend√™ncia
   if(!TrendCreate(0,InpName,0,date[d1],price[p1],date[d2],price[p2],InpColor,InpStyle
      InpWidth,InpBack,InpSelection,InpRayLeft,InpRayRight,InpHidden,InpZOrder))
     {
      return;
     }
//--- redesenhar o gr√°fico e esperar por um segundo
   ChartRedraw();
   Sleep(1000);
//--- agora, mover os pontos de ancoragem da linha
//--- contador de loop
   int v_steps=accuracy/5;
//--- mover o primeiro ponto de ancoragem vertical
   for(int i=0;i&lt;v_steps;i++)
     {
      //--- usar o seguinte valor
      if(p1&gt;1)
         p1-=1;
      //--- mover o ponto</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
420
</p>
<pre><code class="language-mql5">
      if(!TrendPointChange(0,InpName,0,date[d1],price[p1]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
     }
//--- mover o segundo ponto de ancoragem vertical
   for(int i=0;i&lt;v_steps;i++)
     {
      //--- usar o seguinte valor
      if(p2&lt;accuracy-1)
         p2+=1;
      //--- mover o ponto
      if(!TrendPointChange(0,InpName,1,date[d2],price[p2]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
     }
//--- meio segundo de atraso
   Sleep(500);
//--- contador de loop
   int h_steps=bars/2;
//--- mover ambos os pontos de ancoragem na horizontal, ao mesmo tempo
   for(int i=0;i&lt;h_steps;i++)
     {
      //--- usar os seguintes valores
      if(d1&lt;bars-1)
         d1+=1;
      if(d2&gt;1)
         d2-=1;
      //--- deslocar os pontos
      if(!TrendPointChange(0,InpName,0,date[d1],price[p1]))
         return;
      if(!TrendPointChange(0,InpName,1,date[d2],price[p2]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
      // 0.03 segundos de atraso
      Sleep(30);
     }
//--- 1 segundo de atraso</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
421
</p>
<pre><code class="language-mql5">
   Sleep(1000);
//--- excluir uma linha de tend√™ncia
   TrendDelete(0,InpName);
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
422
<h3>OBJ_TRENDBYANGLE</h3>
Linha de Tend√™ncia Por √Çngulo.
<h3>Observa√ß√£o</h3>
Para Linha de Tend√™ncia Por Angulo, √© poss√≠vel determinar o modo de continua√ß√£o da sua exibi√ß√£o
para a direita e/ou √† esquerda (de acordo com as propriedades OBJPROP_RAY_RIGHT e
OBJPROP_RAY_LEFT).
Tanto √¢ngulo e coordenadas do segundo ponto de ancoragem podem ser usados para definir a
inclina√ß√£o da linha.
<h3>Exemplo</h3>
O script a seguir cria e movimenta a linha de tend√™ncia no gr√°fico. Fun√ß√µes especiais t√™m sido
desenvolvidas para criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas
fun√ß√µes &quot;as is&quot; em seus pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script desenha objeto gr√°fico \&quot;Linha de Tend√™ncia Por √Çngulo\&quot;
#property description &quot;Coordenadas dos pontos de ancoragem s√£o definidos em percentage
#property description &quot;janela do gr√°fico.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string          InpName=&quot;Trend&quot;;     // Nome da linha
input int             InpDate1=50;         // Data do 1¬∫ ponto, %
input int             InpPrice1=75;        // Pre√ßo do 1¬∫ ponto, %
input int             InpAngle=0;          // √Çngulo de inclina√ß√£o da linha</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
423
</p>
<pre><code class="language-mql5">
input color           InpColor=clrRed;     // Cor da linha
input ENUM_LINE_STYLE InpStyle=STYLE_DASH; // Estilo da linha
input int             InpWidth=2;          // Largura da linha
input bool            InpBack=false;       // Linha de fundo
input bool            InpSelection=true;   // Destaque para mover
input bool            InpRayLeft=false;    // Continua√ß√£o da Linha para a esquerda
input bool            InpRayRight=true;    // Continua√ß√£o da Linha para a direita
input bool            InpHidden=true;      // Ocultar na lista de objeto
input long            InpZOrder=0;         // Prioridade para clicar no mouse
//+------------------------------------------------------------------+
//| Criar uma linha de tend√™ncia por √¢ngulo¬†                         |
//+------------------------------------------------------------------+
bool TrendByAngleCreate(const long            chart_ID=0,        // ID do gr√°fico
                        const string          name=&quot;TrendLine&quot;,  // nome da linha
                        const int             sub_window=0,      // √≠ndice da sub-jane
                        datetime              time=0,            // tempo do ponto
                        double                price=0,           // pre√ßo do ponto
                        const double          angle=45.0,        // √¢ngulo de inclina√ß
                        const color           clr=clrRed,        // cor da linha
                        const ENUM_LINE_STYLE style=STYLE_SOLID, // estilo da linha
                        const int             width=1,           // largura da linha
                        const bool            back=false,        // no fundo
                        const bool            selection=true,    // destaque para move
                        const bool            ray_left=false,    // continua√ß√£o da lin
                        const bool            ray_right=true,    // continua√ß√£o da lin
                        const bool            hidden=true,       // ocultar na lista d
                        const long            z_order=0)         // prioridade para cl
  {
//--- criar o segundo ponto para facilitar, arrastando a linha de tend√™ncia com o mous
   datetime time2=0;
   double   price2=0;
//--- definir coordenadas de pontos de ancoragem, se eles n√£o est√£o definidos
   ChangeTrendEmptyPoints(time,price,time2,price2);
//--- redefine o valor de erro
   ResetLastError();
//--- criar uma linha de tend√™ncia usando dois pontos
   if(!ObjectCreate(chart_ID,name,OBJ_TRENDBYANGLE,sub_window,time,price,time2,price2)
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar uma linha de tend√™ncia! C√≥digo de erro = &quot;,GetLastError
      return(false);
     }
//--- alterar o √¢ngulo de inclina√ß√£o da linha de tend√™ncia, quando se muda o √¢ngulo, a
//--- ponto da linha s√£o redefinidos automaticamente de acordo com o novo valor do √¢ng
   ObjectSetDouble(chart_ID,name,OBJPROP_ANGLE,angle);
//--- definir cor da linha
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir estilo de linha
   ObjectSetInteger(chart_ID,name,OBJPROP_STYLE,style);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
424
</p>
<pre><code class="language-mql5">
//--- definir a largura da linha
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,width);
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- habilitar (true) ou desabilitar (false) o modo do movimento da seta com o mouse
//--- ao criar um objeto gr√°fico usando a fun√ß√£o ObjectCreate, o objeto n√£o pode ser
//--- destacado e movimentado por padr√£o. Dentro deste m√©todo, o par√¢metro de sele√ß√£o
//--- √© verdade por padr√£o, tornando poss√≠vel destacar e mover o objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- habilitar (true) ou desabilitar (false) o modo de continua√ß√£o da exibi√ß√£o da lin
   ObjectSetInteger(chart_ID,name,OBJPROP_RAY_LEFT,ray_left);
//--- habilitar (true) ou desabilitar (false) o modo de continua√ß√£o da exibi√ß√£o da lin
   ObjectSetInteger(chart_ID,name,OBJPROP_RAY_RIGHT,ray_right);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Alterar ponto de ancoragem das coordenadas da linha de tend√™ncia¬†|
//+------------------------------------------------------------------+
bool TrendPointChange(const long   chart_ID=0,       // ID do gr√°fico
                      const string name=&quot;TrendLine&quot;, // nome da linha
                      datetime     time=0,           // coordenada do ponto de ancorag
                      double       price=0)          // coordenada do ponto de ancorag
  {
//--- se a posi√ß√£o do ponto n√£o est√° definida, mover para a barra atual tendo o pre√ßo 
   if(!time)
      time=TimeCurrent();
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- redefine o valor de erro
   ResetLastError();
//--- mover ponto de ancoragem da linha de tend√™ncia
   if(!ObjectMove(chart_ID,name,0,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao mover o ponto de ancoragem! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mudar o √¢ngulo de inclina√ß√£o da linha de tend√™ncia¬†              |
//+------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
425
</p>
<pre><code class="language-mql5">
bool TrendAngleChange(const long   chart_ID=0,       // ID do grafico
                      const string name=&quot;TrendLine&quot;, // nome da linha de tend√™ncia
                      const double angle=45)         // inclina√ß√£o do √¢ngulo da linha 
  {
//--- redefine o valor de erro
   ResetLastError();
//--- mudar o √¢ngulo de inclina√ß√£o da linha de tend√™ncia
   if(!ObjectSetDouble(chart_ID,name,OBJPROP_ANGLE,angle))
     {
      Print(__FUNCTION__,
            &quot;: falha ao mudar a inclina√ß√£o da linha! C√≥digo de erro = &quot;,GetLastError()
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Excluir a linha de tend√™ncia¬†                                    |
//+------------------------------------------------------------------+
bool TrendDelete(const long   chart_ID=0,       // ID do gr√°fico
                 const string name=&quot;TrendLine&quot;) // nome da linha
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir uma linha de tend√™ncia
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,
            &quot;: falha ao excluir uma linha de tend√™ncia! C√≥digo de erro = &quot;,GetLastErro
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Verifique os valores de pontos de ancoragem da linha de tend√™ncia|
//| e definir padr√µes valores padr√£o para aqueles vazios¬†            |
//+------------------------------------------------------------------+
void ChangeTrendEmptyPoints(datetime &amp;time1,double &amp;price1,
                            datetime &amp;time2,double &amp;price2)
  {
//--- se o tempo do primeiro ponto n√£o est√° definido, ser√° na barra atual
   if(!time1)
      time1=TimeCurrent();
//--- se o pre√ßo do primeiro ponto n√£o est√° definido, ele ter√° valor Bid
   if(!price1)
      price1=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- coordenadas do segundo ponto auxiliar
//--- o segundo ponto ser√° 9 barras a esquerda e tendo o mesmo pre√ßo</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
426
</p>
<pre><code class="language-mql5">
   datetime second_point_time[10];
   CopyTime(Symbol(),Period(),time1,10,second_point_time);
   time2=second_point_time[0];
   price2=price1;
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- verificar a exatid√£o dos par√¢metros de entrada
   if(InpDate1&lt;0 || InpDate1&gt;100 || InpPrice1&lt;0 || InpPrice1&gt;100)
     {
      Print(&quot;Erro! Valores incorretos dos par√¢metros de entrada!&quot;);
      return;
     }
//--- n√∫mero de barras vis√≠veis na janela do gr√°fico
   int bars=(int)ChartGetInteger(0,CHART_VISIBLE_BARS);
//--- tamanho do array de pre√ßo
   int accuracy=1000;
//--- arrays para armazenar data e valores de pre√ßo para serem usados
//--- para definir e alterar as coordenadas de pontos de ancoragem da linha
   datetime date[];
   double   price[];
//--- aloca√ß√£o de mem√≥ria
   ArrayResize(date,bars);
   ArrayResize(price,accuracy);
//--- preencher o array das datas
   ResetLastError();
   if(CopyTime(Symbol(),Period(),0,bars,date)==-1)
     {
      Print(&quot;Falha ao copiar valores de tempo! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- preencher o array de pre√ßos
//--- encontrar os maiores e menores valores do gr√°fico
   double max_price=ChartGetDouble(0,CHART_PRICE_MAX);
   double min_price=ChartGetDouble(0,CHART_PRICE_MIN);
//--- definir uma etapa de mudan√ßa de um pre√ßo e preencher o array
   double step=(max_price-min_price)/accuracy;
   for(int i=0;i&lt;accuracy;i++)
      price[i]=min_price+i*step;
//--- definir os pontos para desenhar a linha
   int d1=InpDate1*(bars-1)/100;
   int p1=InpPrice1*(accuracy-1)/100;
//--- criar uma linha de tend√™ncia
   if(!TrendByAngleCreate(0,InpName,0,date[d1],price[p1],InpAngle,InpColor,InpStyle,
      InpWidth,InpBack,InpSelection,InpRayLeft,InpRayRight,InpHidden,InpZOrder))
     {</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
427
</p>
<pre><code class="language-mql5">
      return;
     }
//--- redesenhar o gr√°fico e esperar por um segundo
   ChartRedraw();
   Sleep(1000);
//--- agora, mover e girar a linha
//--- contador de loop
   int v_steps=accuracy/2;
//--- mover o ponto de ancoragem e alterar o √¢ngulo de inclina√ß√£o da linha
   for(int i=0;i&lt;v_steps;i++)
     {
      //--- usar o seguinte valor
      if(p1&gt;1)
         p1-=1;
      //--- mover o ponto
      if(!TrendPointChange(0,InpName,date[d1],price[p1]))
         return;
      if(!TrendAngleChange(0,InpName,18*(i+1)))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- excluir a partir do gr√°fico
   TrendDelete(0,InpName);
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
428
<h3>OBJ_CYCLES</h3>
Linhas Cycle.
<h3>Observa√ß√£o</h3>
A dist√¢ncia entre as linhas √© definida por coordenadas de tempo de dois pontos de ancoragem do
objeto.
<h3>Exemplo</h3>
O seguinte script cria e move a linha cycle no gr√°fico. Fun√ß√µes especiais t√™m sido desenvolvidas
para criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas fun√ß√µes &quot;as is&quot; em
seus pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;script cria a linha cycle no gr√°fico.&quot;
#property description &quot;Coordenadas de ponto de ancoragem s√£o definidas em porcentagem 
#property description &quot;porcentagem do tamanho da janela de gr√°fico.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string          InpName=&quot;Cycles&quot;;   // Nome do objeto
input int             InpDate1=10;        // Data do 1¬∫ ponto, %
input int             InpPrice1=45;       // Pre√ßo do 1¬∫ ponto, %
input int             InpDate2=20;        // Data do 2¬∫ ponto, %
input int             InpPrice2=55;       // Pre√ßo do 2¬∫ ponto, %
input color           InpColor=clrRed;    // Cor das linhas cycle
input ENUM_LINE_STYLE InpStyle=STYLE_DOT; // Estilo das linhas cycle</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
429
</p>
<pre><code class="language-mql5">
input int             InpWidth=1;         // Largura das linhas cycle
input bool            InpBack=false;      // Objeto de Fundo
input bool            InpSelection=true;  // Destaque para mover
input bool            InpHidden=true;     // Ocultar na lista de objeto
input long            InpZOrder=0;        // Prioridade para clicar no mouse
//+------------------------------------------------------------------+
//| Cria√ß√£o das linhas cycle¬†                                        |
//+------------------------------------------------------------------+
bool CyclesCreate(const long            chart_ID=0,        // ID de gr√°fico
                  const string          name=&quot;Cycles&quot;,     // nome do objeto
                  const int             sub_window=0,      // √≠ndice da sub-janela
                  datetime              time1=0,           // primeiro ponto de tempo
                  double                price1=0,          // primeiro ponto de pre√ßo
                  datetime              time2=0,           // segundo ponto de tempo
                  double                price2=0,          // segundo ponto de pre√ßo
                  const color           clr=clrRed,        // cor das linhas cycle
                  const ENUM_LINE_STYLE style=STYLE_SOLID, // estilo das linhas cycle
                  const int             width=1,           // largura das linhas cycle
                  const bool            back=false,        // no fundo
                  const bool            selection=true,    // destaque para mover
                  const bool            hidden=true,       // ocultar na lista de obje
                  const long            z_order=0)         // prioridade para clicar n
  {
//--- definir coordenadas de pontos de ancoragem, se eles n√£o est√£o definidos
   ChangeCyclesEmptyPoints(time1,price1,time2,price2);
//--- redefine o valor de erro
   ResetLastError();
//--- criar linhas cycle pelas coordenadas dadas
   if(!ObjectCreate(chart_ID,name,OBJ_CYCLES,sub_window,time1,price1,time2,price2))
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar linhas cycle! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- definir a cor das linhas
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir a exibi√ß√£o do estilo das linhas
   ObjectSetInteger(chart_ID,name,OBJPROP_STYLE,style);
//--- definir a largura das linhas
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,width);
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- permitir (true) ou desabilitar (false) o modo de movimento das linhas com o mous
//--- ao criar um objeto gr√°fico usando a fun√ß√£o ObjectCreate, o objeto n√£o pode ser
//--- destacado e movimentado por padr√£o. Dentro deste m√©todo, o par√¢metro de sele√ß√£o
//--- √© verdade por padr√£o, tornando poss√≠vel destacar e mover o objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto </p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
430
</p>
<pre><code class="language-mql5">
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mover ponto de ancoragem¬†                                        |
//+------------------------------------------------------------------+
bool CyclesPointChange(const long   chart_ID=0,    // ID do gr√°fico
                       const string name=&quot;Cycles&quot;, // nome do objeto
                       const int    point_index=0, // √≠ndice do ponto de ancoragem
                       datetime     time=0,        // coordenada do ponto de ancoragem
                       double       price=0)       // coordenada do ponto de ancoragem
  {
//--- se a posi√ß√£o do ponto n√£o est√° definida, mover para a barra atual tendo o pre√ßo 
   if(!time)
      time=TimeCurrent();
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- redefine o valor de erro
   ResetLastError();
//--- mover o ponto de ancoragem
   if(!ObjectMove(chart_ID,name,point_index,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao mover o ponto de ancoragem! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Excluir as linhas cycle¬†                                         |
//+------------------------------------------------------------------+
bool CyclesDelete(const long   chart_ID=0,    // ID do gr√°fico
                  const string name=&quot;Cycles&quot;) // nome do objeto
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir as linhas cycle
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,
            &quot;: falha ao excluir linhas cycle! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
431
  }
</p>
<pre><code class="language-mql5">
//+-----------------------------------------------------------------------+
//| Ver os valores de pontos de ancoragem das linhas cycle e definir¬†     |
//| valores padr√£o para valores vazios¬†                                   |
//+-----------------------------------------------------------------------+
void ChangeCyclesEmptyPoints(datetime &amp;time1,double &amp;price1,
                             datetime &amp;time2,double &amp;price2)
  {
//--- se o tempo do primeiro ponto n√£o est√° definido, ser√° na barra atual
   if(!time1)
      time1=TimeCurrent();
//--- se o pre√ßo do primeiro ponto n√£o est√° definido, ele ter√° valor Bid
   if(!price1)
      price1=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- se o tempo do segundo ponto n√£o est√° definido, est√° localizado a 9 barras deixad
   if(!time2)
     {
      //--- array para receber o tempo de abertura das √∫ltimos 10 barras
      datetime temp[10];
      CopyTime(Symbol(),Period(),time1,10,temp);
      //--- definir o segundo ponto 9 barras a esquerda do primeiro
      time2=temp[0];
     }
//--- se o pre√ßo do segundo ponto n√£o est√° definido, √© igual ao primeiro ponto
   if(!price2)
      price2=price1;
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- verificar a exatid√£o dos par√¢metros de entrada
   if(InpDate1&lt;0 || InpDate1&gt;100 || InpPrice1&lt;0 || InpPrice1&gt;100 || 
      InpDate2&lt;0 || InpDate2&gt;100 || InpPrice2&lt;0 || InpPrice2&gt;100)
     {
      Print(&quot;Erro! Valores incorretos dos par√¢metros de entrada!&quot;);
      return;
     }
//--- n√∫mero de barras vis√≠veis na janela do gr√°fico
   int bars=(int)ChartGetInteger(0,CHART_VISIBLE_BARS);
//--- tamanho do array de pre√ßo
   int accuracy=1000;
//--- arrays para armazenar data e valores de pre√ßo para serem usados
//--- para definir e alterar as coordenadas dos pontos de ancoragem das linhas cycle
   datetime date[];
   double   price[];
//--- aloca√ß√£o de mem√≥ria
   ArrayResize(date,bars);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
432
</p>
<pre><code class="language-mql5">
   ArrayResize(price,accuracy);
//--- preencher o array das datas
   ResetLastError();
   if(CopyTime(Symbol(),Period(),0,bars,date)==-1)
     {
      Print(&quot;Falha ao copiar valores de tempo! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- preencher o array de pre√ßos
//--- encontrar os maiores e menores valores do gr√°fico
   double max_price=ChartGetDouble(0,CHART_PRICE_MAX);
   double min_price=ChartGetDouble(0,CHART_PRICE_MIN);
//--- definir uma etapa de mudan√ßa de um pre√ßo e preencher o array
   double step=(max_price-min_price)/accuracy;
   for(int i=0;i&lt;accuracy;i++)
      price[i]=min_price+i*step;
//--- definir os pontos para desenhar as linhas cycle
   int d1=InpDate1*(bars-1)/100;
   int d2=InpDate2*(bars-1)/100;
   int p1=InpPrice1*(accuracy-1)/100;
   int p2=InpPrice2*(accuracy-1)/100;
//--- criar uma linha de tend√™ncia
   if(!CyclesCreate(0,InpName,0,date[d1],price[p1],date[d2],price[p2],InpColor,
      InpStyle,InpWidth,InpBack,InpSelection,InpHidden,InpZOrder))
     {
      return;
     }
//--- redesenhar o gr√°fico e esperar por um segundo
   ChartRedraw();
   Sleep(1000);
//--- agora, mover os pontos de ancoragem
//--- contador de loop
   int h_steps=bars/5;
//--- mover o segundo ponto de ancoragem
   for(int i=0;i&lt;h_steps;i++)
     {
      //--- usar o seguinte valor
      if(d2&lt;bars-1)
         d2+=1;
      //--- mover o ponto
      if(!CyclesPointChange(0,InpName,1,date[d2],price[p2]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
      // 0.05 segundos de atraso
      Sleep(50);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
433
</p>
<pre><code class="language-mql5">
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- contador de loop
   h_steps=bars/4;
//--- mover o primeiro ponto de ancoragem
   for(int i=0;i&lt;h_steps;i++)
     {
      //--- usar o seguinte valor
      if(d1&lt;bars-1)
         d1+=1;
      //--- mover o ponto
      if(!CyclesPointChange(0,InpName,0,date[d1],price[p1]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
      // 0.05 segundos de atraso
      Sleep(50);
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- excluir a etiqueta do gr√°fico
   CyclesDelete(0,InpName);
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
434
<h3>OBJ_ARROWED_LINE</h3>
Linha de seta.
<h3>Exemplo</h3>
O seguinte script cria e move uma linha de seta no gr√°fico. Fun√ß√µes especiais t√™m sido
desenvolvidas para criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas
fun√ß√µes &quot;as is&quot; em seus pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script desenha objeto gr√°fico \&quot; linha Arrowed\&quot;.&quot;
#property description &quot;Coordenadas de ponto de ancoragem s√£o definidas em porcentagem 
#property description &quot;tamanho da janela do gr√°fico.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string          InpName=&quot;ArrowedLine&quot;; // Nome da linha
input int             InpDate1=35;           // Data do 1¬∫ ponto, %
input int             InpPrice1=60;          // Pre√ßo do 1¬∫ ponto, %
input int             InpDate2=65;           // Data do 2¬∫ ponto, %
input int             InpPrice2=40;          // Pre√ßo do 2¬∫ ponto, %
input color           InpColor=clrRed;       // Cor da linha
input ENUM_LINE_STYLE InpStyle=STYLE_DASH;   // Estilo da linha
input int             InpWidth=2;            // Largura da linha
input bool            InpBack=false;         // Linha de fundo
input bool            InpSelection=true;     // Destaque para mover
input bool            InpHidden=true;        // Ocultar na lista de objeto
input long            InpZOrder=0;           // Prioridade para clicar no mouse</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
435
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Criar uma linha de setas pelas coordenadas determinadas¬†         |
//+------------------------------------------------------------------+
bool ArrowedLineCreate(const long            chart_ID=0,         // ID do gr√°fico
                       const string          name=&quot;ArrowedLine&quot;, // nome da linha
                       const int             sub_window=0,       // √≠ndice da sub-jane
                       datetime              time1=0,            // primeiro ponto de 
                       double                price1=0,           // primeiro ponto de 
                       datetime              time2=0,            // segundo ponto de t
                       double                price2=0,           // segundo ponto de p
                       const color           clr=clrRed,         // cor da linha
                       const ENUM_LINE_STYLE style=STYLE_SOLID,  // estilo da linha
                       const int             width=1,            // largura da linha 
                       const bool            back=false,         // no fundo
                       const bool            selection=true,     // destacar para move
                       const bool            hidden=true,        // ocultar na lista d
                       const long            z_order=0)          // prioridade para cl
  {
//--- definir coordenadas de pontos de ancoragem, se eles n√£o est√£o definidos
   ChangeArrowedLineEmptyPoints(time1,price1,time2,price2);
//--- redefine o valor de erro
   ResetLastError();
//--- criar uma linha de setas pelas coordenadas determinadas
   if(!ObjectCreate(chart_ID,name,OBJ_ARROWED_LINE,sub_window,time1,price1,time2,price
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar uma linha de seta! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- definir cor da linha
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir o estilo de exibi√ß√£o da linha
   ObjectSetInteger(chart_ID,name,OBJPROP_STYLE,style);
//--- definir a largura da linha
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,width);
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- habilitar (true) ou desabilitar (false) o modo do movimento da seta com o mouse
//--- ao criar um objeto gr√°fico usando a fun√ß√£o ObjectCreate, o objeto n√£o pode ser
//--- destacado e movimentado por padr√£o. Dentro deste m√©todo, o par√¢metro de sele√ß√£o
//--- √© verdade por padr√£o, tornando poss√≠vel destacar e mover o objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
436
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mover o ponto de ancoragem da linha de seta¬†                     |
//+------------------------------------------------------------------+
bool ArrowedLinePointChange(const long   chart_ID=0,         // ID do gr√°fico
                            const string name=&quot;ArrowedLine&quot;, // nome da linha
                            const int    point_index=0,      // √≠ndice do ponto de anc
                            datetime     time=0,             // coordenada do ponto de
                            double       price=0)            // coordenada do ponto de
  {
//--- se a posi√ß√£o do ponto n√£o est√° definida, mover para a barra atual tendo o pre√ßo 
   if(!time)
      time=TimeCurrent();
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- redefine o valor de erro
   ResetLastError();
//--- mover ponto de ancoragem da linha
   if(!ObjectMove(chart_ID,name,point_index,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao mover o ponto de ancoragem! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o remove a linha de setas a partir do gr√°fico¬†            |
//+------------------------------------------------------------------+
bool ArrowedLineDelete(const long   chart_ID=0,         // ID do gr√°fico
                       const string name=&quot;ArrowedLine&quot;) // nome da linha
  {
//--- redefine o valor de erro
   ResetLastError();
//--- deletar uma linha de seta
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar uma linha de seta! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Conferir valores dos pontos de ancoragem e definir valores padr√£o|
//| para aqueles vazios¬†                                             |
//+------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
437
</p>
<pre><code class="language-mql5">
void ChangeArrowedLineEmptyPoints(datetime &amp;time1,double &amp;price1,
                                  datetime &amp;time2,double &amp;price2)
  {
//--- se o tempo do primeiro ponto n√£o est√° definido, ser√° na barra atual
   if(!time1)
      time1=TimeCurrent();
//--- se o pre√ßo do primeiro ponto n√£o est√° definido, ele ter√° valor Bid
   if(!price1)
      price1=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- se o tempo do segundo ponto n√£o est√° definido, est√° localizado a 9 barras deixad
   if(!time2)
     {
      //--- array para receber o tempo de abertura das √∫ltimos 10 barras
      datetime temp[10];
      CopyTime(Symbol(),Period(),time1,10,temp);
      //--- definir o segundo ponto 9 barras a esquerda do primeiro
      time2=temp[0];
     }
//--- se o pre√ßo do segundo ponto n√£o est√° definido, √© igual ao primeiro ponto
   if(!price2)
      price2=price1;
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- verificar a exatid√£o dos par√¢metros de entrada
   if(InpDate1&lt;0 || InpDate1&gt;100 || InpPrice1&lt;0 || InpPrice1&gt;100 || 
      InpDate2&lt;0 || InpDate2&gt;100 || InpPrice2&lt;0 || InpPrice2&gt;100)
     {
      Print(&quot;Erro! Valores incorretos dos par√¢metros de entrada!&quot;);
      return;
     }
//--- n√∫mero de barras vis√≠veis na janela do gr√°fico
   int bars=(int)ChartGetInteger(0,CHART_VISIBLE_BARS);
//--- tamanho do array de pre√ßo
   int accuracy=1000;
//--- arrays para armazenar data e valores de pre√ßo para serem usados
//--- para definir e alterar as coordenadas de pontos de ancoragem da linha
   datetime date[];
   double   price[];
//--- aloca√ß√£o de mem√≥ria
   ArrayResize(date,bars);
   ArrayResize(price,accuracy);
//--- preencher o array das datas
   ResetLastError();
   if(CopyTime(Symbol(),Period(),0,bars,date)==-1)
     {</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
438
</p>
<pre><code class="language-mql5">
      Print(&quot;Falha ao copiar valores de tempo! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- preencher o array de pre√ßos
//--- encontrar os maiores e menores valores do gr√°fico
   double max_price=ChartGetDouble(0,CHART_PRICE_MAX);
   double min_price=ChartGetDouble(0,CHART_PRICE_MIN);
//--- definir uma etapa de mudan√ßa de um pre√ßo e preencher o array
   double step=(max_price-min_price)/accuracy;
   for(int i=0;i&lt;accuracy;i++)
      price[i]=min_price+i*step;
//--- definir os pontos para desenhar a linha
   int d1=InpDate1*(bars-1)/100;
   int d2=InpDate2*(bars-1)/100;
   int p1=InpPrice1*(accuracy-1)/100;
   int p2=InpPrice2*(accuracy-1)/100;
//--- criar uma linha de seta
   if(!ArrowedLineCreate(0,InpName,0,date[d1],price[p1],date[d2],price[p2],
      InpColor,InpStyle,InpWidth,InpBack,InpSelection,InpHidden,InpZOrder))
     {
      return;
     }
//--- redesenhar o gr√°fico e esperar por um segundo
   ChartRedraw();
   Sleep(1000);
//--- agora, mover os pontos de ancoragem da linha
//--- contador de loop
   int v_steps=accuracy/5;
//--- mover o segundo ponto de ancoragem vertical
   for(int i=0;i&lt;v_steps;i++)
     {
      //--- usar o seguinte valor
      if(p2&lt;accuracy-1)
         p2+=1;
      //--- mover o ponto
      if(!ArrowedLinePointChange(0,InpName,1,date[d2],price[p2]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
     }
//--- mover o primeiro ponto de ancoragem vertical
   for(int i=0;i&lt;v_steps;i++)
     {
      //--- usar o seguinte valor
      if(p1&gt;1)
         p1-=1;</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
439
</p>
<pre><code class="language-mql5">
      //--- mover o ponto
      if(!ArrowedLinePointChange(0,InpName,0,date[d1],price[p1]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
     }
//--- meio segundo de atraso
   Sleep(500);
//--- contador de loop
   int h_steps=bars/2;
//--- mover ambos os pontos de ancoragem na horizontal, ao mesmo tempo
   for(int i=0;i&lt;h_steps;i++)
     {
      //--- usar os seguintes valores
      if(d1&lt;bars-1)
         d1+=1;
      if(d2&gt;1)
         d2-=1;
      //--- deslocar os pontos
      if(!ArrowedLinePointChange(0,InpName,0,date[d1],price[p1]))
         return;
      if(!ArrowedLinePointChange(0,InpName,1,date[d2],price[p2]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
      // 0.03 segundos de atraso
      Sleep(30);
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- deletar uma linha de seta
   ArrowedLineDelete(0,InpName);
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
440
<h3>OBJ_CHANNEL</h3>
<h3>Canal Eq√ºidistante</h3>
<h3>Observa√ß√£o</h3>
Para um canal eq√ºidistante, √© poss√≠vel especificar o modo de sua continua√ß√£o para a direita e/ou
esquerda (de acordo com as propriedades (OBJPROP_RAY_RIGHT e OBJPROP_RAY_LEFT). O modo de
preenchimento colorido do canal tamb√©m pode ser definido.
<h3>Exemplo</h3>
O seguinte script cria e move um canal eq√ºidistante no gr√°fico. Fun√ß√µes especiais t√™m sido
desenvolvidas para criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas
fun√ß√µes &quot;as is&quot; em seus pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script desenha um objeto gr√°fico tipo \&quot;canal eq√ºidistante\&quot;.&quot;
#property description &quot;Coordenadas dos pontos de ancoragem s√£o definidos em percentage
#property description &quot;janela do gr√°fico.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string          InpName=&quot;Channel&quot;;   // Nome do canal
input int             InpDate1=25;         // Data do 1¬∫ ponto, %
input int             InpPrice1=60;        // Pre√ßo do 1¬∫ ponto, %
input int             InpDate2=65;         // Data do 2¬∫ ponto, %
input int             InpPrice2=80;        // Pre√ßo do 2¬∫ ponto, %
input int             InpDate3=30;         // Data do 3¬∫ ponto, %</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
441
</p>
<pre><code class="language-mql5">
input int             InpPrice3=40;        // Pre√ßo do 3¬∫ ponto, %
input color           InpColor=clrRed;     // Cor do canal
input ENUM_LINE_STYLE InpStyle=STYLE_DASH; // Estilo das linhas do canal
input int             InpWidth=2;          // Largura da linha do canal
input bool            InpBack=false;       // Canal de Fundo
input bool            InpFill=false;       // Preenchendo o canal com cor
input bool            InpSelection=true;   // Destaque para mover
input bool            InpRayLeft=false;    // Continua√ß√£o do canal para a esquerda
input bool            InpRayRight=false;   // Continua√ß√£o do canal para a direita
input bool            InpHidden=true;      // Ocultar na lista de objeto
input long            InpZOrder=0;         // Prioridade para clicar no mouse
//+------------------------------------------------------------------+
//| Criar um canal eq√ºidistante pelas coordenadas dadas¬†             |
//+------------------------------------------------------------------+
bool ChannelCreate(const long            chart_ID=0,        // ID de gr√°fico
                   const string          name=&quot;Channel&quot;,    // nome do canal
                   const int             sub_window=0,      // √≠ndice da sub-janela
                   datetime              time1=0,           // primeiro ponto de tempo
                   double                price1=0,          // primeiro ponto de pre√ßo
                   datetime              time2=0,           // segundo ponto de tempo
                   double                price2=0,          // segundo ponto de pre√ßo
                   datetime              time3=0,           // terceiro ponto de tempo
                   double                price3=0,          // terceiro ponto de pre√ßo
                   const color           clr=clrRed,        // cor do sinal
                   const ENUM_LINE_STYLE style=STYLE_SOLID, // estilo das linhas do ca
                   const int             width=1,           // largura das linhas do c
                   const bool            fill=false,        // preenchendo o canal cor
                   const bool            back=false,        // no fundo
                   const bool            selection=true,    // destaque para mover
                   const bool            ray_left=false,    // continua√ß√£o do canal pa
                   const bool            ray_right=false,   // continua√ß√£o do canal pa
                   const bool            hidden=true,       // ocultar na lista de obj
                   const long            z_order=0)         // prioridade para clique 
  {
//--- definir coordenadas de pontos de ancoragem, se eles n√£o est√£o definidos
   ChangeChannelEmptyPoints(time1,price1,time2,price2,time3,price3);
//--- redefine o valor de erro
   ResetLastError();
//--- criar um canal pelas coordenadas dadas
   if(!ObjectCreate(chart_ID,name,OBJ_CHANNEL,sub_window,time1,price1,time2,price2,tim
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar um canal eq√ºidistante! C√≥digo de erro = &quot;,GetLastError()
      return(false);
     }
//--- definir a cor do canal
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir o estilo de linha do canal
   ObjectSetInteger(chart_ID,name,OBJPROP_STYLE,style);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
442
</p>
<pre><code class="language-mql5">
//--- definir a largura da linha do canal
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,width);
//--- habilitar (true) ou desabilitar (false) o modo de preenchimento do canal
   ObjectSetInteger(chart_ID,name,OBJPROP_FILL,fill);
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- habilitar (true) ou desabilitar (false) o modo de preenchimento do canal
//--- ao criar um objeto gr√°fico usando a fun√ß√£o ObjectCreate, o objeto n√£o pode ser
//--- destacado e movimentado por padr√£o. Dentro deste m√©todo, o par√¢metro de sele√ß√£o
//--- √© verdade por padr√£o, tornando poss√≠vel destacar e mover o objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- habilitar (true) ou desabilitar (false) o modo de continua√ß√£o da exibi√ß√£o do can
   ObjectSetInteger(chart_ID,name,OBJPROP_RAY_LEFT,ray_left);
//--- habilitar (true) ou desabilitar (false) o modo de continua√ß√£o da exibi√ß√£o do can
   ObjectSetInteger(chart_ID,name,OBJPROP_RAY_RIGHT,ray_right);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mover ponto de ancoragem¬†                                        |
//+------------------------------------------------------------------+
bool ChannelPointChange(const long   chart_ID=0,     // ID do gr√°fico
                        const string name=&quot;Channel&quot;, // nome do canal
                        const int    point_index=0,  // √≠ndice do ponto de ancoragem
                        datetime     time=0,         // coordenada do ponto de ancorag
                        double       price=0)        // coordenada do ponto de ancorag
  {
//--- se a posi√ß√£o do ponto n√£o est√° definida, mover para a barra atual tendo o pre√ßo 
   if(!time)
      time=TimeCurrent();
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- redefine o valor de erro
   ResetLastError();
//--- mover o ponto de ancoragem
   if(!ObjectMove(chart_ID,name,point_index,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao mover o ponto de ancoragem! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
443
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Excluir o canal¬†                                                 |
//+------------------------------------------------------------------+
bool ChannelDelete(const long   chart_ID=0,     // ID do gr√°fico
                   const string name=&quot;Channel&quot;) // nome do canal
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir o canal
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,
            &quot;: falha ao excluir o canal! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+-------------------------------------------------------------------------+
//| Ver os valores de pontos de ancoragem do canal e definir valores padr√£o¬†|
//| para aqueles que est√£o vazios¬†                                          |
//+-------------------------------------------------------------------------+
void ChangeChannelEmptyPoints(datetime &amp;time1,double &amp;price1,datetime &amp;time2,
                              double &amp;price2,datetime &amp;time3,double &amp;price3)
  {
//--- se o tempo do segundo ponto (a direita)n√£o est√° definido, ser√° na barra atual
   if(!time2)
      time2=TimeCurrent();
//--- se o pre√ßo do segundo ponto n√£o est√° definido, ele ter√° valor Bid
   if(!price2)
      price2=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- se o tempo do primeiro ponto (a esquerda) n√£o est√° definido, est√° localizado 9 b
   if(!time1)
     {
      //--- array para receber o tempo de abertura das √∫ltimos 10 barras
      datetime temp[10];
      CopyTime(Symbol(),Period(),time2,10,temp);
      //--- definir o primeiro ponto 9 barras a esquerda do segundo
      time1=temp[0];
     }
//--- se o pre√ßo do primeiro ponto n√£o est√° definido, mover 300 pontos a mais do que o
   if(!price1)
      price1=price2+300*SymbolInfoDouble(Symbol(),SYMBOL_POINT);
//--- se o tempo do terceiro ponto n√£o est√° definido,ele coincide com o tempo do prime
   if(!time3)
      time3=time1;
//--- se o pre√ßo do terceiro ponto n√£o est√° definido, √© igual ao pre√ßo do segundo pont
   if(!price3)
      price3=price2;</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
444
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- verificar a exatid√£o dos par√¢metros de entrada
   if(InpDate1&lt;0 || InpDate1&gt;100 || InpPrice1&lt;0 || InpPrice1&gt;100 || 
      InpDate2&lt;0 || InpDate2&gt;100 || InpPrice2&lt;0 || InpPrice2&gt;100 || 
      InpDate3&lt;0 || InpDate3&gt;100 || InpPrice3&lt;0 || InpPrice3&gt;100)
     {
      Print(&quot;Erro! Valores incorretos dos par√¢metros de entrada!&quot;);
      return;
     }
//--- n√∫mero de barras vis√≠veis na janela do gr√°fico
   int bars=(int)ChartGetInteger(0,CHART_VISIBLE_BARS);
//--- tamanho do array de pre√ßo
   int accuracy=1000;
//--- arrays para armazenar data e valores de pre√ßo para serem usados
//--- para definir e alterar as coordenadas de pontos de ancoragem do canal
   datetime date[];
   double   price[];
//--- aloca√ß√£o de mem√≥ria
   ArrayResize(date,bars);
   ArrayResize(price,accuracy);
//--- preencher o array das datas
   ResetLastError();
   if(CopyTime(Symbol(),Period(),0,bars,date)==-1)
     {
      Print(&quot;Falha ao copiar valores de tempo! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- preencher o array de pre√ßos
//--- encontrar os maiores e menores valores do gr√°fico
   double max_price=ChartGetDouble(0,CHART_PRICE_MAX);
   double min_price=ChartGetDouble(0,CHART_PRICE_MIN);
//--- definir uma etapa de mudan√ßa de um pre√ßo e preencher o array
   double step=(max_price-min_price)/accuracy;
   for(int i=0;i&lt;accuracy;i++)
      price[i]=min_price+i*step;
//--- definir pontos para desenhar o canal
   int d1=InpDate1*(bars-1)/100;
   int d2=InpDate2*(bars-1)/100;
   int d3=InpDate3*(bars-1)/100;
   int p1=InpPrice1*(accuracy-1)/100;
   int p2=InpPrice2*(accuracy-1)/100;
   int p3=InpPrice3*(accuracy-1)/100;
//--- criar o canal eq√ºidistante
   if(!ChannelCreate(0,InpName,0,date[d1],price[p1],date[d2],price[p2],date[d3],price</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
445
</p>
<pre><code class="language-mql5">
      InpStyle,InpWidth,InpFill,InpBack,InpSelection,InpRayLeft,InpRayRight,InpHidden,
     {
      return;
     }
//--- redesenhar o gr√°fico e esperar por um segundo
   ChartRedraw();
   Sleep(1000);
//--- agora, mover os pontos de ancoragem do canal
//--- contador de loop
   int h_steps=bars/6;
//--- mover o segundo ponto de ancoragem
   for(int i=0;i&lt;h_steps;i++)
     {
      //--- usar o seguinte valor
      if(d2&lt;bars-1)
         d2+=1;
      //--- mover o ponto
      if(!ChannelPointChange(0,InpName,1,date[d2],price[p2]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
      // 0.05 segundos de atraso
      Sleep(50);
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- mover o primeiro ponto de ancoragem
   for(int i=0;i&lt;h_steps;i++)
     {
      //--- usar o seguinte valor
      if(d1&gt;1)
         d1-=1;
      //--- mover o ponto
      if(!ChannelPointChange(0,InpName,0,date[d1],price[p1]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
      // 0.05 segundos de atraso
      Sleep(50);
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- contador de loop</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
446
</p>
<pre><code class="language-mql5">
   int v_steps=accuracy/10;
//--- mover o terceiro ponto de ancoragem
   for(int i=0;i&lt;v_steps;i++)
     {
      //--- usar o seguinte valor
      if(p3&gt;1)
         p3-=1;
      //--- mover o ponto
      if(!ChannelPointChange(0,InpName,2,date[d3],price[p3]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- excluir o canal do gr√°fico
   ChannelDelete(0,InpName);
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
447
<h3>OBJ_STDDEVCHANNEL</h3>
Desvio Padr√£o do Canal.
<h3>Observa√ß√£o</h3>
Para Desvio Padr√£o do Canal, √© poss√≠vel determinar o modo da continua√ß√£o da sua exibi√ß√£o para a
direita 
e/ou 
√† 
esquerda 
(de 
acordo 
com 
as 
propriedades 
<h3>OBJPROP_RAY_RIGHT</h3>
e
OBJPROP_RAY_LEFT). O modo de preenchimento colorido do canal tamb√©m pode ser definido.
Propriedade OBJPROP_DEVIATION √© usada para alterar o valor do desvio do canal.
<h3>Exemplo</h3>
O seguinte script cria e move um Desvio Padr√£o do Canal no gr√°fico. Fun√ß√µes especiais t√™m sido
desenvolvidas para criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas
fun√ß√µes &quot;as is&quot; em seus pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script desenha objeto gr√°fico \&quot;Desvio Padr√£o do Canal\&quot;.&quot;
#property description &quot;Coordenadas dos pontos de ancoragem s√£o definidos em percentage
#property description &quot;janela do gr√°fico.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string          InpName=&quot;StdDevChannel&quot;;   // Nome do canal
input int             InpDate1=10;               // Data do 1¬∫ ponto, %
input int             InpDate2=40;               // Data do 2¬∫ ponto, %
input double          InpDeviation=1.0;          // Desvio
input color           InpColor=clrRed;           // Cor do canal</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
448
</p>
<pre><code class="language-mql5">
input ENUM_LINE_STYLE InpStyle=STYLE_DASHDOTDOT; // Estilo de linhas do canal
input int             InpWidth=2;                // Largura das linhas do canal 
input bool            InpFill=false;             // Preenchendo o canal com cor
input bool            InpBack=false;             // Canal de Fundo
input bool            InpSelection=true;         // Destaque para mover
input bool            InpRayLeft=false;          // Continua√ß√£o do Canal para a esquer
input bool            InpRayRight=false;         // Continua√ß√£o do Canal para a direit
input bool            InpHidden=true;            // Ocultar na lista de objeto
input long            InpZOrder=0;               // Prioridade para clicar no mouse
//+------------------------------------------------------------------+
//| Criar Regress√£o Linear do Canal pelas coordenadas dadas¬†         |
//+------------------------------------------------------------------+
bool StdDevChannelCreate(const long            chart_ID=0,        // ID do gr√°fico
                         const string          name=&quot;Channel&quot;,    // nome do canal
                         const int             sub_window=0,      // √≠ndice da sub-jan
                         datetime              time1=0,           // primeiro ponto de
                         datetime              time2=0,           // segundo ponto de 
                         const double          deviation=1.0,     // desvio
                         const color           clr=clrRed,        // cor do canal
                         const ENUM_LINE_STYLE style=STYLE_SOLID, // estilo das linhas
                         const int             width=1,           // largura das linha
                         const bool            fill=false,        // preenchendo o can
                         const bool            back=false,        // no fundo
                         const bool            selection=true,    // destaque para mov
                         const bool            ray_left=false,    // continua√ß√£o do ca
                         const bool            ray_right=false,   // continua√ß√£o do ca
                         const bool            hidden=true,       // ocultar na lista 
                         const long            z_order=0)         // prioridade para c
  {
//--- definir coordenadas de pontos de ancoragem, se eles n√£o est√£o definidos
   ChangeChannelEmptyPoints(time1,time2);
//--- redefine o valor de erro
   ResetLastError();
//--- criar um canal pelas coordenadas dadas
   if(!ObjectCreate(chart_ID,name,OBJ_STDDEVCHANNEL,sub_window,time1,0,time2,0))
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar o desvio padr√£o do canal! C√≥digo de erro = &quot;,GetLastErro
      return(false);
     }
//--- definir o valor de desvio que afeta a largura do canal
   ObjectSetDouble(chart_ID,name,OBJPROP_DEVIATION,deviation);
//--- definir a cor do canal
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir o estilo de linha do canal
   ObjectSetInteger(chart_ID,name,OBJPROP_STYLE,style);
//--- definir a largura da linha do canal
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,width);
//--- habilitar (true) ou desabilitar (false) o modo de preenchimento do canal</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
449
</p>
<pre><code class="language-mql5">
   ObjectSetInteger(chart_ID,name,OBJPROP_FILL,fill);
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- habilitar (true) ou desabilitar (false) o modo de preenchimento do canal
//--- ao criar um objeto gr√°fico usando a fun√ß√£o ObjectCreate, o objeto n√£o pode ser
//--- destacado e movimentado por padr√£o. Dentro deste m√©todo, o par√¢metro de sele√ß√£o
//--- √© verdade por padr√£o, tornando poss√≠vel destacar e mover o objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- habilitar (true) ou desabilitar (false) o modo de continua√ß√£o da exibi√ß√£o do can
   ObjectSetInteger(chart_ID,name,OBJPROP_RAY_LEFT,ray_left);
//--- habilitar (true) ou desabilitar (false) o modo de continua√ß√£o da exibi√ß√£o do can
   ObjectSetInteger(chart_ID,name,OBJPROP_RAY_RIGHT,ray_right);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mover ponto de ancoragem¬†                                        |
//+------------------------------------------------------------------+
bool StdDevChannelPointChange(const long   chart_ID=0,     // Id do Gr√°fico 
                              const string name=&quot;Channel&quot;, // nome do canal
                              const int    point_index=0,  // √≠ndice do ponto de ancor
                              datetime     time=0)         // coordenada do ponto de a
  {
//--- se o tempo de ponto n√£o est√° definido, mover o ponto para o barra atual
   if(!time)
      time=TimeCurrent();
//--- redefine o valor de erro
   ResetLastError();
//--- mover o ponto de ancoragem
   if(!ObjectMove(chart_ID,name,point_index,time,0))
     {
      Print(__FUNCTION__,
            &quot;: falha ao mover o ponto de ancoragem! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Alterar o desvio do canal¬†                                       |
//+------------------------------------------------------------------+
bool StdDevChannelDeviationChange(const long   chart_ID=0,     // ID do gr√°fico
                                  const string name=&quot;Channel&quot;, // nome do canal
                                  const double deviation=1.0)  // desvio</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
450
</p>
<pre><code class="language-mql5">
  {
//--- redefine o valor de erro
   ResetLastError();
//--- mudar o √¢ngulo de inclina√ß√£o da linha de tend√™ncia
   if(!ObjectSetDouble(chart_ID,name,OBJPROP_DEVIATION,deviation))
     {
      Print(__FUNCTION__,
            &quot;: falha ao mudar o desvio de canal! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Excluir o canal¬†                                                 |
//+------------------------------------------------------------------+
bool StdDevChannelDelete(const long   chart_ID=0,     // ID do gr√°fico
                         const string name=&quot;Channel&quot;) // nome do canal
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir o canal
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,
            &quot;: falha ao excluir o canal! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+-------------------------------------------------------------------------+
//| Ver os valores de pontos de ancoragem do canal e definir valores padr√£o¬†|
//| para aqueles que est√£o vazios¬†                                          |
//+-------------------------------------------------------------------------+
void ChangeChannelEmptyPoints(datetime &amp;time1,datetime &amp;time2)
  {
//--- se o tempo do primeiro ponto n√£o est√° definido, ser√° na barra atual
   if(!time2)
      time2=TimeCurrent();
//--- se o tempo do primeiro ponto n√£o est√° definido, est√° localizado 9 barras a esque
   if(!time1)
     {
      //--- array para receber o tempo de abertura das √∫ltimos 10 barras
      datetime temp[10];
      CopyTime(Symbol(),Period(),time2,10,temp);
      //--- definir o primeiro ponto 9 barras a esquerda do segundo
      time1=temp[0];
     }</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
451
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- verificar a exatid√£o dos par√¢metros de entrada
   if(InpDate1&lt;0 || InpDate1&gt;100 || 
      InpDate2&lt;0 || InpDate2&gt;100)
     {
      Print(&quot;Erro! Valores incorretos dos par√¢metros de entrada!&quot;);
      return;
     }
//--- n√∫mero de barras vis√≠veis na janela do gr√°fico
   int bars=(int)ChartGetInteger(0,CHART_VISIBLE_BARS);
//--- tamanho do array de pre√ßo
   int accuracy=1000;
//--- arrays para armazenar data e valores de pre√ßo para serem usados
//--- para definir e alterar as coordenadas de pontos de ancoragem do canal
   datetime date[];
   double   price[];
//--- aloca√ß√£o de mem√≥ria
   ArrayResize(date,bars);
   ArrayResize(price,accuracy);
//--- preencher o array das datas
   ResetLastError();
   if(CopyTime(Symbol(),Period(),0,bars,date)==-1)
     {
      Print(&quot;Falha ao copiar valores de tempo! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- preencher o array de pre√ßos
//--- encontrar os maiores e menores valores do gr√°fico
   double max_price=ChartGetDouble(0,CHART_PRICE_MAX);
   double min_price=ChartGetDouble(0,CHART_PRICE_MIN);
//--- definir uma etapa de mudan√ßa de um pre√ßo e preencher o array
   double step=(max_price-min_price)/accuracy;
   for(int i=0;i&lt;accuracy;i++)
      price[i]=min_price+i*step;
//--- definir pontos para desenhar o canal
   int d1=InpDate1*(bars-1)/100;
   int d2=InpDate2*(bars-1)/100;
//--- criar desvio padr√£o do canal
   if(!StdDevChannelCreate(0,InpName,0,date[d1],date[d2],InpDeviation,InpColor,InpStyl
      InpWidth,InpFill,InpBack,InpSelection,InpRayLeft,InpRayRight,InpHidden,InpZOrder
     {
      return;
     }
//--- redesenhar o gr√°fico e esperar por um segundo</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
452
</p>
<pre><code class="language-mql5">
   ChartRedraw();
   Sleep(1000);
//--- agora, o canal horizontal para a direita e expandi-lo
//--- contador de loop
   int h_steps=bars/2;
//--- mover o canal
   for(int i=0;i&lt;h_steps;i++)
     {
      //--- usar os seguintes valores
      if(d1&lt;bars-1)
         d1+=1;
      if(d2&lt;bars-1)
         d2+=1;
      //--- mover os pontos de ancoragem  
      if(!StdDevChannelPointChange(0,InpName,0,date[d1]))
         return;
      if(!StdDevChannelPointChange(0,InpName,1,date[d2]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
      // 0.05 segundos de atraso
      Sleep(50);
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- contador de loop
   double v_steps=InpDeviation*2;
//--- expandir o canal
   for(double i=InpDeviation;i&lt;v_steps;i+=10.0/accuracy)
     {
      if(!StdDevChannelDeviationChange(0,InpName,i))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- excluir o canal do gr√°fico
   StdDevChannelDelete(0,InpName);
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//---</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
453
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
454
<h3>OBJ_REGRESSION</h3>
Regress√£o Linear do Canal.
<h3>Observa√ß√£o</h3>
Para Regress√£o Linear do Canal, √© poss√≠vel determinar o modo da continua√ß√£o da sua exibi√ß√£o para
a direita e/ou √† esquerda (de acordo com as propriedades OBJPROP_RAY_RIGHT e
OBJPROP_RAY_LEFT). O modo de preenchimento colorido do canal tamb√©m pode ser definido.
<h3>Exemplo</h3>
O seguinte script cria e move uma Regress√£o Linear do Canal no gr√°fico. Fun√ß√µes especiais t√™m sido
desenvolvidas para criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas
fun√ß√µes &quot;as is&quot; em seus pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script desenha objeto gr√°fico \&quot;Regress√£o Linear do Canal\&quot;.&quot;
#property description &quot;Coordenadas dos pontos de ancoragem s√£o definidos em percentage
#property description &quot;janela do gr√°fico.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string          InpName=&quot;Regression&quot;; // Nome do canal
input int             InpDate1=10;          // Data do 1¬∫ ponto, %
input int             InpDate2=40;          // Data do 2¬∫ ponto, %
input color           InpColor=clrRed;      // Cor do canal
input ENUM_LINE_STYLE InpStyle=STYLE_DASH;  // Estilo das linhas do canal
input int             InpWidth=2;           // Largura das linhas do canal</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
455
</p>
<pre><code class="language-mql5">
input bool            InpFill=false;        // Preenchendo o canal com cor
input bool            InpBack=false;        // Canal de fundo
input bool            InpSelection=true;    // Destaque para mover
input bool            InpRayLeft=false;     // Continua√ß√£o do canal para a esquerda
input bool            InpRayRight=false;    // Continua√ß√£o do canal para a direita
input bool            InpHidden=true;       // Ocultar na lista de objeto
input long            InpZOrder=0;          // Prioridade para clicar no mouse
//+------------------------------------------------------------------+
//| Criar Regress√£o Linear do Canal pelas coordenadas dadas¬†         |
//+------------------------------------------------------------------+
bool RegressionCreate(const long            chart_ID=0,        // ID do gr√°fico
                      const string          name=&quot;Regression&quot;, // nome do canal
                      const int             sub_window=0,      // √≠ndice da sub-janela
                      datetime              time1=0,           // primeiro ponto de te
                      datetime              time2=0,           // segundo ponto de tem
                      const color           clr=clrRed,        // cor do canal
                      const ENUM_LINE_STYLE style=STYLE_SOLID, // estilo das linhas do
                      const int             width=1,           // largura das linhas d
                      const bool            fill=false,        /// preenchendo o canal
                      const bool            back=false,        // no fundo
                      const bool            selection=true,    // destaque para mover
                      const bool            ray_left=false,    // continua√ß√£o do canal
                      const bool            ray_right=false,   // continua√ß√£o do canal
                      const bool            hidden=true,       // ocultar na lista de 
                      const long            z_order=0)         // prioridade para cliq
  {
//--- definir coordenadas de pontos de ancoragem, se eles n√£o est√£o definidos
   ChangeRegressionEmptyPoints(time1,time2);
//--- redefine o valor de erro
   ResetLastError();
//--- criar um canal pelas coordenadas dadas
   if(!ObjectCreate(chart_ID,name,OBJ_REGRESSION,sub_window,time1,0,time2,0))
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar a regress√£o linear do canal! C√≥digo de erro = &quot;,GetLastE
      return(false);
     }
//--- definir a cor do canal
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir o estilo de linha do canal
   ObjectSetInteger(chart_ID,name,OBJPROP_STYLE,style);
//--- definir a largura da linha do canal
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,width);
//--- habilitar (true) ou desabilitar (false) o modo de preenchimento do canal
   ObjectSetInteger(chart_ID,name,OBJPROP_FILL,fill);
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- habilitar (true) ou desabilitar (false) o modo de preenchimento do canal
//--- ao criar um objeto gr√°fico usando a fun√ß√£o ObjectCreate, o objeto n√£o pode ser</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
456
</p>
<pre><code class="language-mql5">
//--- destacado e movimentado por padr√£o. Dentro deste m√©todo, o par√¢metro de sele√ß√£o
//--- √© verdade por padr√£o, tornando poss√≠vel destacar e mover o objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- habilitar (true) ou desabilitar (false) o modo de continua√ß√£o da exibi√ß√£o do can
   ObjectSetInteger(chart_ID,name,OBJPROP_RAY_LEFT,ray_left);
//--- habilitar (true) ou desabilitar (false) o modo de continua√ß√£o da exibi√ß√£o do can
   ObjectSetInteger(chart_ID,name,OBJPROP_RAY_RIGHT,ray_right);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mover ponto de ancoragem¬†                                        |
//+------------------------------------------------------------------+
bool RegressionPointChange(const long   chart_ID=0,     // ID do gr√°fico
                           const string name=&quot;Channel&quot;, // nome do canal
                           const int    point_index=0,  // √≠ndice do ponto de ancorage
                           datetime     time=0)         // coordenada do ponto de anco
  {
//--- se o tempo de ponto n√£o est√° definido, mover o ponto para o barra atual
   if(!time)
      time=TimeCurrent();
//--- redefine o valor de erro
   ResetLastError();
//--- mover o ponto de ancoragem
   if(!ObjectMove(chart_ID,name,point_index,time,0))
     {
      Print(__FUNCTION__,
            &quot;: falha ao mover o ponto de ancoragem! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Excluir o canal¬†                                                 |
//+------------------------------------------------------------------+
bool RegressionDelete(const long   chart_ID=0,     // ID do gr√°fico
                      const string name=&quot;Channel&quot;) // nome do canal
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir o canal
   if(!ObjectDelete(chart_ID,name))
     {</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
457
</p>
<pre><code class="language-mql5">
      Print(__FUNCTION__,
            &quot;: falha ao excluir o canal! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+-------------------------------------------------------------------------+
//| Ver os valores de pontos de ancoragem do canal e definir valores padr√£o¬†|
//| para aqueles que est√£o vazios¬†                                          |
//+-------------------------------------------------------------------------+
void ChangeRegressionEmptyPoints(datetime &amp;time1,datetime &amp;time2)
  {
//--- se o tempo do primeiro ponto n√£o est√° definido, ser√° na barra atual
   if(!time2)
      time2=TimeCurrent();
//--- se o tempo do primeiro ponto n√£o est√° definido, est√° localizado 9 barras a esque
   if(!time1)
     {
      //--- array para receber o tempo de abertura das √∫ltimos 10 barras
      datetime temp[10];
      CopyTime(Symbol(),Period(),time2,10,temp);
      //--- definir o primeiro ponto 9 barras a esquerda do segundo
      time1=temp[0];
     }
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- verificar a exatid√£o dos par√¢metros de entrada
   if(InpDate1&lt;0 || InpDate1&gt;100 || 
      InpDate2&lt;0 || InpDate2&gt;100)
     {
      Print(&quot;Erro! Valores incorretos dos par√¢metros de entrada!&quot;);
      return;
     }
//--- n√∫mero de barras vis√≠veis na janela do gr√°fico
   int bars=(int)ChartGetInteger(0,CHART_VISIBLE_BARS);
//--- tamanho do array de pre√ßo
   int accuracy=1000;
//--- arrays para armazenar data e valores de pre√ßo para serem usados
//--- para definir e alterar as coordenadas de pontos de ancoragem do canal
   datetime date[];
   double   price[];
//--- aloca√ß√£o de mem√≥ria
   ArrayResize(date,bars);
   ArrayResize(price,accuracy);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
458
</p>
<pre><code class="language-mql5">
//--- preencher o array das datas
   ResetLastError();
   if(CopyTime(Symbol(),Period(),0,bars,date)==-1)
     {
      Print(&quot;Falha ao copiar valores de tempo! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- preencher o array de pre√ßos
//--- encontrar os maiores e menores valores do gr√°fico
   double max_price=ChartGetDouble(0,CHART_PRICE_MAX);
   double min_price=ChartGetDouble(0,CHART_PRICE_MIN);
//--- definir uma etapa de mudan√ßa de um pre√ßo e preencher o array
   double step=(max_price-min_price)/accuracy;
   for(int i=0;i&lt;accuracy;i++)
      price[i]=min_price+i*step;
//--- definir pontos para desenhar o canal
   int d1=InpDate1*(bars-1)/100;
   int d2=InpDate2*(bars-1)/100;
//--- criar regress√£o linear do canal
   if(!RegressionCreate(0,InpName,0,date[d1],date[d2],InpColor,InpStyle,InpWidth,
      InpFill,InpBack,InpSelection,InpRayLeft,InpRayRight,InpHidden,InpZOrder))
     {
      return;
     }
//--- redesenhar o gr√°fico e esperar por um segundo
   ChartRedraw();
   Sleep(1000);
//--- agora, o canal horizontal para a direita
//--- contador de loop
   int h_steps=bars/2;
//--- mover o canal
   for(int i=0;i&lt;h_steps;i++)
     {
      //--- usar os seguintes valores
      if(d1&lt;bars-1)
         d1+=1;
      if(d2&lt;bars-1)
         d2+=1;
      //--- mover os pontos de ancoragem  
      if(!RegressionPointChange(0,InpName,0,date[d1]))
         return;
      if(!RegressionPointChange(0,InpName,1,date[d2]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
      // 0.05 segundos de atraso</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
459
</p>
<pre><code class="language-mql5">
      Sleep(50);
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- excluir o canal do gr√°fico
   RegressionDelete(0,InpName);
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
460
<h3>OBJ_PITCHFORK</h3>
Tridente Andrews.
<h3>Observa√ß√£o</h3>
Para Tridente Andrews, √© poss√≠vel determinar o modo da continua√ß√£o da sua exibi√ß√£o para a direita
e/ou √† esquerda (de acordo com as propriedades OBJPROP_RAY_RIGHT e OBJPROP_RAY_LEFT).
Voc√™ tamb√©m pode especificar o n√∫mero de linhas de n√≠veis, os seus valores e cores.
<h3>Exemplo</h3>
O seguinte script cria e move o Tridente Andrews no gr√°fico. Fun√ß√µes especiais t√™m sido
desenvolvidas para criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas
fun√ß√µes &quot;as is&quot; em seus pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script desenha o objeto gr√°fico \&quot;Tridente Andrews\&quot;.&quot;
#property description &quot;Coordenadas de ponto de ancoragem s√£o definidas em porcentagem 
#property description &quot;tamanho da janela do gr√°fico.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string          InpName=&quot;Pitchfork&quot;;  // Nome do Tridente
input int             InpDate1=14;          // Data do 1¬∫ ponto, %
input int             InpPrice1=40;         // Pre√ßo do 1¬∫ ponto, %
input int             InpDate2=18;          // Data do 2¬∫ ponto, %
input int             InpPrice2=50;         // Pre√ßo do 2¬∫ ponto, %
input int             InpDate3=18;          // Data do 3¬∫ ponto, %
input int             InpPrice3=30;         // Pre√ßo do 3¬∫ ponto, %</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
461
</p>
<pre><code class="language-mql5">
input color           InpColor=clrRed;      // Cor do tridente
input ENUM_LINE_STYLE InpStyle=STYLE_SOLID; // Estilo de linhas do tridente
input int             InpWidth=1;           // Largura das linhas do tridente
input bool            InpBack=false;        // Tridente de fundo
input bool            InpSelection=true;    // Destaque para mover
input bool            InpRayLeft=false;     // Continua√ß√£o do Tridente para a esquerda
input bool            InpRayRight=false;    // Continua√ß√£o do Tridente para a direita
input bool            InpHidden=true;       // Ocultar na lista de objeto
input long            InpZOrder=0;          // Prioridade para clicar no mouse
//+------------------------------------------------------------------+
//| Criar Tridente Andrews pelas coordenadas fornecidas¬†             |
//+------------------------------------------------------------------+
bool PitchforkCreate(const long            chart_ID=0,        // ID de gr√°fico
                     const string          name=&quot;Pitchfork&quot;,  // nome do tridente
                     const int             sub_window=0,      // √≠ndice da sub-janela
                     datetime              time1=0,           // primeiro ponto de tem
                     double                price1=0,          // primeiro ponto de pre
                     datetime              time2=0,           // segundo ponto de temp
                     double                price2=0,          // segundo ponto de pre√ß
                     datetime              time3=0,           // terceiro ponto de tem
                     double                price3=0,          // terceiro ponto de pre
                     const color           clr=clrRed,        // cor das linhas do tri
                     const ENUM_LINE_STYLE style=STYLE_SOLID, // estilo das linhas do 
                     const int             width=1,           // largura das linhas do
                     const bool            back=false,        // no fundo
                     const bool            selection=true,    // destaque para mover
                     const bool            ray_left=false,    // continua√ß√£o do triden
                     const bool            ray_right=false,   // continua√ß√£o do triden
                     const bool            hidden=true,       // ocultar na lista de o
                     const long            z_order=0)         // prioridade para cliqu
  {
//--- definir coordenadas de pontos de ancoragem, se eles n√£o est√£o definidos
   ChangeChannelEmptyPoints(time1,price1,time2,price2,time3,price3);
//--- redefine o valor de erro
   ResetLastError();
//--- criar tridente Andrews pelas coordenadas fornecidas
   if(!ObjectCreate(chart_ID,name,OBJ_PITCHFORK,sub_window,time1,price1,time2,price2,t
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar \&quot; Tridente Andrews\&quot;! C√≥digo de erro = &quot;,GetLastError()
      return(false);
     }
//--- definir cor
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir o estilo da linha
   ObjectSetInteger(chart_ID,name,OBJPROP_STYLE,style);
//--- definir a largura das linhas
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,width);
//--- exibir em primeiro plano (false) ou fundo (true)</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
462
</p>
<pre><code class="language-mql5">
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- habilitar (true) ou desabilitar (false) o modo de destaque para mover o tridente
//--- ao criar um objeto gr√°fico usando a fun√ß√£o ObjectCreate, o objeto n√£o pode ser
//--- destacado e movimentado por padr√£o. Dentro deste m√©todo, o par√¢metro de sele√ß√£o
//--- √© verdade por padr√£o, tornando poss√≠vel destacar e mover o objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- habilitar (true) ou desabilitar (false) o modo de continua√ß√£o da exibi√ß√£o do tri
   ObjectSetInteger(chart_ID,name,OBJPROP_RAY_LEFT,ray_left);
//--- habilitar (true) ou desabilitar (false) o modo de continua√ß√£o da exibi√ß√£o do tri
   ObjectSetInteger(chart_ID,name,OBJPROP_RAY_RIGHT,ray_right);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Definir o n√∫mero de n√≠veis do Andrews e seus par√¢metros¬†         |
//+------------------------------------------------------------------+
bool PitchforkLevelsSet(int             levels,           // n√∫mero de linhas dos n√≠ve
                        double          &amp;values[],        // valores de linhas dos n√≠v
                        color           &amp;colors[],        // cor das linhas dos n√≠veis
                        ENUM_LINE_STYLE &amp;styles[],        // estilo das linhas dos n√≠v
                        int             &amp;widths[],        // largura das linhas dos n√≠
                        const long      chart_ID=0,       // ID do gr√°fico
                        const string    name=&quot;Pitchfork&quot;) // nome do tridente
  {
//--- verificar tamanhos do array
   if(levels!=ArraySize(colors) || levels!=ArraySize(styles) ||
      levels!=ArraySize(widths) || levels!=ArraySize(widths))
     {
      Print(__FUNCTION__,&quot;: comprimento do array n√£o corresponder ao n√∫mero de n√≠veis,
      return(false);
     }
//--- definir o n√∫mero de n√≠veis
   ObjectSetInteger(chart_ID,name,OBJPROP_LEVELS,levels);
//--- definir as propriedades de n√≠veis no loop
   for(int i=0;i&lt;levels;i++)
     {
      //--- valor do n√≠vel
      ObjectSetDouble(chart_ID,name,OBJPROP_LEVELVALUE,i,values[i]);
      //--- cor do n√≠vel
      ObjectSetInteger(chart_ID,name,OBJPROP_LEVELCOLOR,i,colors[i]);
      //--- estilo de n√≠vel
      ObjectSetInteger(chart_ID,name,OBJPROP_LEVELSTYLE,i,styles[i]);
      //--- largura de n√≠vel
      ObjectSetInteger(chart_ID,name,OBJPROP_LEVELWIDTH,i,widths[i]);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
463
</p>
<pre><code class="language-mql5">
      //--- descri√ß√£o de n√≠vel
      ObjectSetString(chart_ID,name,OBJPROP_LEVELTEXT,i,DoubleToString(100*values[i],1
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Movimentar ponto de ancoragem do Tridente Andrews¬†               |
//+------------------------------------------------------------------+
bool PitchforkPointChange(const long   chart_ID=0,       // ID do gr√°fico
                          const string name=&quot;Pitchfork&quot;, // nome do canal
                          const int    point_index=0,    // √≠ndice do ponto de ancorag
                          datetime     time=0,           // coordenada do ponto de anc
                          double       price=0)          // coordenada do ponto de anc
  {
//--- se a posi√ß√£o do ponto n√£o est√° definida, mover para a barra atual tendo o pre√ßo 
   if(!time)
      time=TimeCurrent();
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- redefine o valor de erro
   ResetLastError();
//--- mover o ponto de ancoragem
   if(!ObjectMove(chart_ID,name,point_index,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao mover o ponto de ancoragem! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Excluir Tridente Andrews¬†                                        |
//+------------------------------------------------------------------+
bool PitchforkDelete(const long   chart_ID=0,       // ID do gr√°fico
                     const string name=&quot;Pitchfork&quot;) // nome do canal
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir o canal
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,
            &quot;: falha ao excluir \&quot; Tridente Andrews\&quot;! C√≥digo de erro = &quot;,GetLastError
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
464
  }
</p>
<pre><code class="language-mql5">
//+----------------------------------------------------------------------+
//| Ver valores dos pontos de ancoragem do Tridente Andrews e definir¬†   |
//| valores para aqueles vazios¬†                                         |
//+----------------------------------------------------------------------+
void ChangeChannelEmptyPoints(datetime &amp;time1,double &amp;price1,datetime &amp;time2,
                              double &amp;price2,datetime &amp;time3,double &amp;price3)
  {
//--- se o tempo do segundo ponto (acima direita) n√£o est√° definido, ser√° na barra atu
   if(!time2)
      time2=TimeCurrent();
//--- se o pre√ßo do segundo ponto n√£o est√° definido, ele ter√° valor Bid
   if(!price2)
      price2=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- se o tempo do primeiro ponto (a esquerda) n√£o est√° definido, est√° localizado 9 b
   if(!time1)
     {
      //--- array para receber o tempo de abertura das √∫ltimos 10 barras
      datetime temp[10];
      CopyTime(Symbol(),Period(),time2,10,temp);
      //--- definir o primeiro ponto 9 barras a esquerda do segundo
      time1=temp[0];
     }
//--- se o pre√ßo do primeiro ponto n√£o est√° definido, mover 200 pontos a mais do que o
   if(!price1)
      price1=price2-200*SymbolInfoDouble(Symbol(),SYMBOL_POINT);
//--- se o tempo do terceiro ponto n√£o est√° definido, ele coincide com o tempo do segu
   if(!time3)
      time3=time2;
//--- se o pre√ßo do primeiro ponto n√£o est√° definido, mover 200 pontos a mais do que o
   if(!price3)
      price3=price1-200*SymbolInfoDouble(Symbol(),SYMBOL_POINT);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- verificar a exatid√£o dos par√¢metros de entrada
   if(InpDate1&lt;0 || InpDate1&gt;100 || InpPrice1&lt;0 || InpPrice1&gt;100 || 
      InpDate2&lt;0 || InpDate2&gt;100 || InpPrice2&lt;0 || InpPrice2&gt;100 || 
      InpDate3&lt;0 || InpDate3&gt;100 || InpPrice3&lt;0 || InpPrice3&gt;100)
     {
      Print(&quot;Erro! Valores incorretos dos par√¢metros de entrada!&quot;);
      return;
     }
//--- n√∫mero de barras vis√≠veis na janela do gr√°fico
   int bars=(int)ChartGetInteger(0,CHART_VISIBLE_BARS);
//--- tamanho do array de pre√ßo</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
465
</p>
<pre><code class="language-mql5">
   int accuracy=1000;
//--- arrays para armazenar data e valores de pre√ßo para serem usados
//--- para definir e alterar as coordenadas dos pontos de ancoragem do Tridente Andrew
   datetime date[];
   double   price[];
//--- aloca√ß√£o de mem√≥ria
   ArrayResize(date,bars);
   ArrayResize(price,accuracy);
//--- preencher o array das datas
   ResetLastError();
   if(CopyTime(Symbol(),Period(),0,bars,date)==-1)
     {
      Print(&quot;Falha ao copiar valores de tempo! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- preencher o array de pre√ßos
//--- encontrar os maiores e menores valores do gr√°fico
   double max_price=ChartGetDouble(0,CHART_PRICE_MAX);
   double min_price=ChartGetDouble(0,CHART_PRICE_MIN);
//--- definir uma etapa de mudan√ßa de um pre√ßo e preencher o array
   double step=(max_price-min_price)/accuracy;
   for(int i=0;i&lt;accuracy;i++)
      price[i]=min_price+i*step;
//--- definir pontos para desenhar o Tridente Andrews
   int d1=InpDate1*(bars-1)/100;
   int d2=InpDate2*(bars-1)/100;
   int d3=InpDate3*(bars-1)/100;
   int p1=InpPrice1*(accuracy-1)/100;
   int p2=InpPrice2*(accuracy-1)/100;
   int p3=InpPrice3*(accuracy-1)/100;
//--- criar o tridente
   if(!PitchforkCreate(0,InpName,0,date[d1],price[p1],date[d2],price[p2],date[d3],pric
      InpColor,InpStyle,InpWidth,InpBack,InpSelection,InpRayLeft,InpRayRight,InpHidden
     {
      return;
     }
//--- redesenhar o gr√°fico e esperar por um segundo
   ChartRedraw();
   Sleep(1000);
//--- agora, mover os pontos de ancoragem do tridente
//--- contador de loop
   int v_steps=accuracy/10;
//--- mover o primeiro ponto de ancoragem
   for(int i=0;i&lt;v_steps;i++)
     {
      //--- usar o seguinte valor
      if(p1&gt;1)
         p1-=1;
      //--- mover o ponto</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
466
</p>
<pre><code class="language-mql5">
      if(!PitchforkPointChange(0,InpName,0,date[d1],price[p1]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- contador de loop
   int h_steps=bars/8;
//--- mover o terceiro ponto de ancoragem
   for(int i=0;i&lt;h_steps;i++)
     {
      //--- usar o seguinte valor
      if(d3&lt;bars-1)
         d3+=1;
      //--- mover o ponto
      if(!PitchforkPointChange(0,InpName,2,date[d3],price[p3]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
      //--- redesenhar o gr√°fico
      ChartRedraw();
      // 0.05 segundos de atraso
      Sleep(50);
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- contador de loop
   v_steps=accuracy/10;
//--- mover o segundo ponto de ancoragem
   for(int i=0;i&lt;v_steps;i++)
     {
      //--- usar o seguinte valor
      if(p2&gt;1)
         p2-=1;
      //--- mover o ponto
      if(!PitchforkPointChange(0,InpName,1,date[d2],price[p2]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
467
</p>
<pre><code class="language-mql5">
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- excluir a tridente do gr√°fico
   PitchforkDelete(0,InpName);
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
468
<h3>OBJ_GANNLINE</h3>
Linha Gann.
<h3>Observa√ß√£o</h3>
Para Linha Gann, √© poss√≠vel determinar o modo da continua√ß√£o da sua exibi√ß√£o para a direita e/ou √†
esquerda (de acordo com as propriedades OBJPROP_RAY_RIGHT e OBJPROP_RAY_LEFT).
Ambos √¢ngulo de Gann com uma escala e as coordenadas do segundo ponto de ancoragem podem ser
usados para definir a inclina√ß√£o da linha.
<h3>Exemplo</h3>
O seguinte script cria e move o Linha Gann no gr√°fico. Fun√ß√µes especiais t√™m sido desenvolvidas
para criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas fun√ß√µes &quot;as is&quot; em
seus pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script desenha objeto gr√°fico \&quot;Linha Gann\&quot;.&quot;
#property description &quot;Coordenadas de ponto de ancoragem s√£o definidas em porcentagem 
#property description &quot;tamanho da janela do gr√°fico.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string          InpName=&quot;GannLine&quot;;        // Nome da linha
input int             InpDate1=20;               // Data do 1¬∫ ponto, %
input int             InpPrice1=75;              // Pre√ßo do 1¬∫ ponto, %
input int             InpDate2=80;               // Data do 2¬∫ ponto, %
input double          InpAngle=0.0;              // Angulo Gann</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
469
</p>
<pre><code class="language-mql5">
input double          InpScale=1.0;              // Escala
input color           InpColor=clrRed;           // Cor da linha
input ENUM_LINE_STYLE InpStyle=STYLE_DASHDOTDOT; // Estilo da linha
input int             InpWidth=2;                // Largura da linha
input bool            InpBack=false;             // Linha de fundo
input bool            InpSelection=true;         // Destaque para mover
input bool            InpRayLeft=false;          // Continua√ß√£o da Linha para a esquer
input bool            InpRayRight=true;          // Continua√ß√£o da Linha para a direit
input bool            InpHidden=true;            // Ocultar na lista de objeto
input long            InpZOrder=0;               // Prioridade para clicar no mouse
//+------------------------------------------------------------------+
//| Criar Linha Gann pelas coordenadas, √¢ngulo e escala¬†             |
//+------------------------------------------------------------------+
bool GannLineCreate(const long            chart_ID=0,        // ID de gr√°fico
                    const string          name=&quot;GannLine&quot;,   // nome da linha
                    const int             sub_window=0,      // √≠ndice da sub-janela
                    datetime              time1=0,           // primeiro ponto de temp
                    double                price1=0,          // primeiro ponto de pre√ß
                    datetime              time2=0,           // segundo ponto de tempo
                    const double          angle=1.0,         // angulo Gann
                    const double          scale=1.0,         // escala
                    const color           clr=clrRed,        // cor da linha
                    const ENUM_LINE_STYLE style=STYLE_SOLID, // estilo da linha
                    const int             width=1,           // largura da linha 
                    const bool            back=false,        // no fundo
                    const bool            selection=true,    // destaque para mover
                    const bool            ray_left=false,    // continua√ß√£o da linha p
                    const bool            ray_right=true,    // continua√ß√£o da linha p
                    const bool            hidden=true,       // ocultar na lista de ob
                    const long            z_order=0)         // prioridade para o cliq
  {
//--- definir coordenadas de pontos de ancoragem, se eles n√£o est√£o definidos
   ChangeGannLineEmptyPoints(time1,price1,time2);
//--- redefine o valor de erro
   ResetLastError();
//--- criar Linha Gann pelas coordenadas fornecidas
//--- corretas coordenadas do segundo ponto de ancoragem s√£o redefinida
//--- automaticamente ap√≥s o angulo Gann e/ou as mudan√ßas de escala,
   if(!ObjectCreate(chart_ID,name,OBJ_GANNLINE,sub_window,time1,price1,time2,0))
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar \&quot;Linha Gann\&quot;! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- alterar angulo Gann
   ObjectSetDouble(chart_ID,name,OBJPROP_ANGLE,angle);
//--- alterar a escala (n√∫mero de pips por barra)
   ObjectSetDouble(chart_ID,name,OBJPROP_SCALE,scale);
//--- definir cor da linha</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
470
</p>
<pre><code class="language-mql5">
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir o estilo de exibi√ß√£o da linha
   ObjectSetInteger(chart_ID,name,OBJPROP_STYLE,style);
//--- definir a largura da linha
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,width);
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- habilitar (true) ou desabilitar (false) o modo de destaque para mover as linhas
//--- ao criar um objeto gr√°fico usando a fun√ß√£o ObjectCreate, o objeto n√£o pode ser
//--- destacado e movimentado por padr√£o. Dentro deste m√©todo, o par√¢metro de sele√ß√£o
//--- √© verdade por padr√£o, tornando poss√≠vel destacar e mover o objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- habilitar (true) ou desabilitar (false) o modo de continua√ß√£o da exibi√ß√£o da lin
   ObjectSetInteger(chart_ID,name,OBJPROP_RAY_LEFT,ray_left);
//--- habilitar (true) ou desabilitar (false) o modo de continua√ß√£o da exibi√ß√£o da lin
   ObjectSetInteger(chart_ID,name,OBJPROP_RAY_RIGHT,ray_right);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mover ponto de ancoragem do Linha Gann¬†                          |
//+------------------------------------------------------------------+
bool GannLinePointChange(const long   chart_ID=0,      // ID do gr√°fico
                         const string name=&quot;GannLine&quot;, // nome da linha
                         const int    point_index=0,   // √≠ndice do ponto de ancoragem
                         datetime     time=0,          // coordenada do ponto de ancor
                         double       price=0)         // coordenada do ponto de ancor
  {
//--- se a posi√ß√£o do ponto n√£o est√° definida, mover para a barra atual tendo o pre√ßo 
   if(!time)
      time=TimeCurrent();
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- redefine o valor de erro
   ResetLastError();
//--- mover ponto de ancoragem da linha
   if(!ObjectMove(chart_ID,name,point_index,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao mover o ponto de ancoragem! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
471
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Alterar angulo Gann¬†                                             |
//+------------------------------------------------------------------+
bool GannLineAngleChange(const long   chart_ID=0,      // ID do gr√°fico
                         const string name=&quot;GannLine&quot;, // nome da linha
                         const double angle=1.0)       // angulo Gann
  {
//--- redefine o valor de erro
   ResetLastError();
//--- alterar angulo Gann
   if(!ObjectSetDouble(chart_ID,name,OBJPROP_ANGLE,angle))
     {
      Print(__FUNCTION__,
            &quot;: falha ao alterar o angulo Gann! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Alterar escala Gann Line¬†                                        |
//+------------------------------------------------------------------+
bool GannLineScaleChange(const long   chart_ID=0,      // ID do gr√°fico
                         const string name=&quot;GannLine&quot;, // nome da linha
                         const double scale=1.0)       // escala
  {
//--- redefine o valor de erro
   ResetLastError();
//--- alterar a escala (n√∫mero de pips por barra)
   if(!ObjectSetDouble(chart_ID,name,OBJPROP_SCALE,scale))
     {
      Print(__FUNCTION__,
            &quot;: falha ao alterar a escala! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o remove a Linha Gann gr√°fico¬†                            |
//+------------------------------------------------------------------+
bool GannLineDelete(const long   chart_ID=0,      // ID do gr√°fico
                    const string name=&quot;GannLine&quot;) // nome da linha
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir linha Gann
   if(!ObjectDelete(chart_ID,name))</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
472
</p>
<pre><code class="language-mql5">
     {
      Print(__FUNCTION__,
            &quot;: falha ao excluir \&quot;Linha Gann\&quot;! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Ver valores pontos de ancoragem da linha Gann e definir¬†         | 
//| valores padr√£o para aqueles vazios¬†                              |
//+------------------------------------------------------------------+
void ChangeGannLineEmptyPoints(datetime &amp;time1,double &amp;price1,datetime &amp;time2)
  {
//--- se o tempo do primeiro ponto n√£o est√° definido, ser√° na barra atual
   if(!time2)
      time2=TimeCurrent();
//--- se o tempo do primeiro ponto n√£o est√° definido, est√° localizado 9 barras a esque
   if(!time1)
     {
      //--- array para receber o tempo de abertura das √∫ltimos 10 barras
      datetime temp[10];
      CopyTime(Symbol(),Period(),time2,10,temp);
      //--- definir o primeiro ponto 9 barras a esquerda do segundo
      time1=temp[0];
     }
//--- se o pre√ßo do primeiro ponto n√£o est√° definido, ele ter√° valor Bid
   if(!price1)
      price1=SymbolInfoDouble(Symbol(),SYMBOL_BID);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- verificar a exatid√£o dos par√¢metros de entrada
   if(InpDate1&lt;0 || InpDate1&gt;100 || InpPrice1&lt;0 || InpPrice1&gt;100 || 
      InpDate2&lt;0 || InpDate2&gt;100)
     {
      Print(&quot;Erro! Valores incorretos dos par√¢metros de entrada!&quot;);
      return;
     }
//--- n√∫mero de barras vis√≠veis na janela do gr√°fico
   int bars=(int)ChartGetInteger(0,CHART_VISIBLE_BARS);
//--- tamanho do array de pre√ßo
   int accuracy=1000;
//--- arrays para armazenar data e valores de pre√ßo para serem usados
//--- para definir e alterar as coordenadas de pontos de ancoragem da linha
   datetime date[];</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
473
</p>
<pre><code class="language-mql5">
   double   price[];
//--- aloca√ß√£o de mem√≥ria
   ArrayResize(date,bars);
   ArrayResize(price,accuracy);
//--- preencher o array das datas
   ResetLastError();
   if(CopyTime(Symbol(),Period(),0,bars,date)==-1)
     {
      Print(&quot;Falha ao copiar valores de tempo! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- preencher o array de pre√ßos
//--- encontrar os maiores e menores valores do gr√°fico
   double max_price=ChartGetDouble(0,CHART_PRICE_MAX);
   double min_price=ChartGetDouble(0,CHART_PRICE_MIN);
//--- definir uma etapa de mudan√ßa de um pre√ßo e preencher o array
   double step=(max_price-min_price)/accuracy;
   for(int i=0;i&lt;accuracy;i++)
      price[i]=min_price+i*step;
//--- definir os pontos para desenhar a linha Gann
   int d1=InpDate1*(bars-1)/100;
   int d2=InpDate2*(bars-1)/100;
   int p1=InpPrice1*(accuracy-1)/100;
//--- criar Linha Gann
   if(!GannLineCreate(0,InpName,0,date[d1],price[p1],date[d2],InpAngle,InpScale,InpCol
      InpStyle,InpWidth,InpBack,InpSelection,InpRayLeft,InpRayRight,InpHidden,InpZOrde
     {
      return;
     }
//--- redesenhar o gr√°fico e esperar por um segundo
   ChartRedraw();
   Sleep(1000);
//--- agora, mover o ponto de ancoragem da linha e mudar o angulo
//--- contador de loop
   int v_steps=accuracy/2;
//--- mover o primeiro ponto de ancoragem vertical
   for(int i=0;i&lt;v_steps;i++)
     {
      //--- usar o seguinte valor
      if(p1&gt;1)
         p1-=1;
      //--- mover o ponto
      if(!GannLinePointChange(0,InpName,0,date[d1],price[p1]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
474
</p>
<pre><code class="language-mql5">
     }
//--- meio segundo de atraso
   Sleep(500);
//--- definir o valor atual de angulo Gann (alterar
//--- depois de mover o primeiro ponto de ancoragem)
   double curr_angle;
   if(!ObjectGetDouble(0,InpName,OBJPROP_ANGLE,0,curr_angle))
      return;
//--- contador de loop
   v_steps=accuracy/8;
//--- alterar angulo Gann
   for(int i=0;i&lt;v_steps;i++)
     {
      if(!GannLineAngleChange(0,InpName,curr_angle-0.05*i))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- excluir a linha do gr√°fico
   GannLineDelete(0,InpName);
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
475
<h3>OBJ_GANNFAN</h3>
Gann Fan.
<h3>Observa√ß√£o</h3>
<h3>Para</h3>
<h3>Gann</h3>
<h3>Fan,</h3>
√© 
poss√≠vel 
determinar 
o 
tipo 
de 
tend√™ncia 
a 
partir 
enumera√ß√£o
ENUM_GANN_DIRECTION. Ao ajustar o valor da escala(OBJPROP_SCALE), √© poss√≠vel alterar o √¢ngulo
de inclina√ß√£o das linhas do fan.
<h3>Exemplo</h3>
O seguinte script cria e move o Gann Fan no gr√°fico. Fun√ß√µes especiais t√™m sido desenvolvidas para
criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas fun√ß√µes &quot;as is&quot; em seus
pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script desenha o objeto gr√°fico tipo \&quot;Gann Fan\&quot;.&quot;
#property description &quot;Coordenadas de ponto de ancoragem s√£o definidas em porcentagem 
#property description &quot;tamanho da janela do gr√°fico.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string          InpName=&quot;GannFan&quot;;         // Nome do fan
input int             InpDate1=15;               // Data do 1¬∫ ponto, %
input int             InpPrice1=25;              // Pre√ßo do 1¬∫ ponto, %
input int             InpDate2=85;               // Data do 2¬∫ ponto, %
input double          InpScale=2.0;              // Escala
input bool            InpDirection=false;        // Dire√ß√£o da tend√™ncia</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
476
</p>
<pre><code class="language-mql5">
input color           InpColor=clrRed;           // Cor da linha fan
input ENUM_LINE_STYLE InpStyle=STYLE_DASHDOTDOT; // Estilo de linhas fan
input int             InpWidth=1;                // Largura das linhas fan
input bool            InpBack=false;             // Canal de fundo
input bool            InpSelection=true;         // Destaque para mover
input bool            InpHidden=true;            // Ocultar na lista de objeto
input long            InpZOrder=0;               // Prioridade para clicar no mouse
//+------------------------------------------------------------------+
//| Criar Gann Fan¬†                                                  |
//+------------------------------------------------------------------+
bool GannFanCreate(const long            chart_ID=0,        // ID de gr√°fico
                   const string          name=&quot;GannFan&quot;,    // nome do fan
                   const int             sub_window=0,      // √≠ndice da sub-janela
                   datetime              time1=0,           // primeiro ponto de tempo
                   double                price1=0,          // primeiro ponto de pre√ßo
                   datetime              time2=0,           // segundo ponto de tempo
                   const double          scale=1.0,         // escala
                   const bool            direction=true,    // dire√ß√£o da tend√™ncia
                   const color           clr=clrRed,        // cor da linha fan
                   const ENUM_LINE_STYLE style=STYLE_SOLID, // estilo das linhas fan
                   const int             width=1,           // largura das linhas fan
                   const bool            back=false,        // no fundo
                   const bool            selection=true,    // destaque para mover
                   const bool            hidden=true,       // ocultar na lista de obj
                   const long            z_order=0)         // prioridade para clique 
  {
//--- definir coordenadas de pontos de ancoragem, se eles n√£o est√£o definidos
   ChangeGannFanEmptyPoints(time1,price1,time2);
//--- redefine o valor de erro
   ResetLastError();
//--- criar Gann Fan pelas coordenadas fornecidas
   if(!ObjectCreate(chart_ID,name,OBJ_GANNFAN,sub_window,time1,price1,time2,0))
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar \&quot;Gann Fan\&quot;! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- alterar a escala (n√∫mero de pips por barra)
   ObjectSetDouble(chart_ID,name,OBJPROP_SCALE,scale);
//--- mudar a dire√ß√£o de tend√™ncia Gann Fan (true - descendente, false - ascendente)
   ObjectSetInteger(chart_ID,name,OBJPROP_DIRECTION,direction);
//--- definir cor do fan
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir a exibi√ß√£o do estilo das linhas fan
   ObjectSetInteger(chart_ID,name,OBJPROP_STYLE,style);
//--- definir a largura da linha do fan
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,width);
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
477
</p>
<pre><code class="language-mql5">
//--- habilitar (true) ou desabilitar (false) o modo de destaque para mover o fan
//--- ao criar um objeto gr√°fico usando a fun√ß√£o ObjectCreate, o objeto n√£o pode ser
//--- destacado e movimentado por padr√£o. Dentro deste m√©todo, o par√¢metro de sele√ß√£o
//--- √© verdade por padr√£o, tornando poss√≠vel destacar e mover o objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mover ponto de ancoragem do Gann Fan¬†                            |
//+------------------------------------------------------------------+
bool GannFanPointChange(const long   chart_ID=0,     // ID do gr√°fico
                        const string name=&quot;GannFan&quot;, // nome do fan
                        const int    point_index=0,  // √≠ndice do ponto de ancoragem
                        datetime     time=0,         // coordenada do ponto de ancorag
                        double       price=0)        // coordenada do ponto de ancorag
  {
//--- se a posi√ß√£o do ponto n√£o est√° definida, mover para a barra atual tendo o pre√ßo 
   if(!time)
      time=TimeCurrent();
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- redefine o valor de erro
   ResetLastError();
//--- mover ponto de ancoragem do fan
   if(!ObjectMove(chart_ID,name,point_index,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao mover o ponto de ancoragem! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Alterar a escala Gann Fan¬†                                       |
//+------------------------------------------------------------------+
bool GannFanScaleChange(const long   chart_ID=0,     // ID do gr√°fico
                        const string name=&quot;GannFan&quot;, // nome do fan
                        const double scale=1.0)      // escala
  {
//--- redefine o valor de erro
   ResetLastError();
//--- alterar a escala (n√∫mero de pips por barra)</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
478
</p>
<pre><code class="language-mql5">
   if(!ObjectSetDouble(chart_ID,name,OBJPROP_SCALE,scale))
     {
      Print(__FUNCTION__,
            &quot;: falha ao alterar a escala! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Alterar a dire√ß√£o de tend√™ncia Gann Fan¬†                         |
//+------------------------------------------------------------------+
bool GannFanDirectionChange(const long   chart_ID=0,     // ID do gr√°fico
                            const string name=&quot;GannFan&quot;, // nome do fan
                            const bool   direction=true) // dire√ß√£o da tend√™ncia
  {
//--- redefine o valor de erro
   ResetLastError();
//--- alterar a dire√ß√£o de tend√™ncia Gann Fan
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_DIRECTION,direction))
     {
      Print(__FUNCTION__,
            &quot;: falha ao alterar a dire√ß√£o de tend√™ncia! C√≥digo de erro = &quot;,GetLastErro
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o remove o Gann Fan do gr√°fico¬†                           |
//+------------------------------------------------------------------+
bool GannFanDelete(const long   chart_ID=0,     // ID do gr√°fico
                   const string name=&quot;GannFan&quot;) // nome do fan
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir Gann Fan
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,
            &quot;: falha ao excluir \&quot;Gann Fan\&quot;! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Ver valores dos pontos de ancoragem do Gann Fan e definir¬†       | 
//| valores padr√£o para aqueles vazios¬†                              |</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
479
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
void ChangeGannFanEmptyPoints(datetime &amp;time1,double &amp;price1,datetime &amp;time2)
  {
//--- se o tempo do primeiro ponto n√£o est√° definido, ser√° na barra atual
   if(!time2)
      time2=TimeCurrent();
//--- se o tempo do primeiro ponto n√£o est√° definido, est√° localizado 9 barras a esque
   if(!time1)
     {
      //--- array para receber o tempo de abertura das √∫ltimos 10 barras
      datetime temp[10];
      CopyTime(Symbol(),Period(),time2,10,temp);
      //--- definir o primeiro ponto 9 barras a esquerda do segundo
      time1=temp[0];
     }
//--- se o pre√ßo do primeiro ponto n√£o est√° definido, ele ter√° valor Bid
   if(!price1)
      price1=SymbolInfoDouble(Symbol(),SYMBOL_BID);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- verificar a exatid√£o dos par√¢metros de entrada
   if(InpDate1&lt;0 || InpDate1&gt;100 || InpPrice1&lt;0 || InpPrice1&gt;100 || 
      InpDate2&lt;0 || InpDate2&gt;100)
     {
      Print(&quot;Erro! Valores incorretos dos par√¢metros de entrada!&quot;);
      return;
     }
//--- n√∫mero de barras vis√≠veis na janela do gr√°fico
   int bars=(int)ChartGetInteger(0,CHART_VISIBLE_BARS);
//--- tamanho do array de pre√ßo
   int accuracy=1000;
//--- arrays para armazenar data e valores de pre√ßo para serem usados
//--- para definir e alterar as coordenadas dos pontos de ancoragem do fan
   datetime date[];
   double   price[];
//--- aloca√ß√£o de mem√≥ria
   ArrayResize(date,bars);
   ArrayResize(price,accuracy);
//--- preencher o array das datas
   ResetLastError();
   if(CopyTime(Symbol(),Period(),0,bars,date)==-1)
     {
      Print(&quot;Falha ao copiar valores de tempo! C√≥digo de erro = &quot;,GetLastError());
      return;
     }</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
480
</p>
<pre><code class="language-mql5">
//--- preencher o array de pre√ßos
//--- encontrar os maiores e menores valores do gr√°fico
   double max_price=ChartGetDouble(0,CHART_PRICE_MAX);
   double min_price=ChartGetDouble(0,CHART_PRICE_MIN);
//--- definir uma etapa de mudan√ßa de um pre√ßo e preencher o array
   double step=(max_price-min_price)/accuracy;
   for(int i=0;i&lt;accuracy;i++)
      price[i]=min_price+i*step;
//--- definir os pontos para desenhar Gann Fan
   int d1=InpDate1*(bars-1)/100;
   int d2=InpDate2*(bars-1)/100;
   int p1=InpPrice1*(accuracy-1)/100;
//--- criar Gann Fan
   if(!GannFanCreate(0,InpName,0,date[d1],price[p1],date[d2],InpScale,InpDirection,
      InpColor,InpStyle,InpWidth,InpBack,InpSelection,InpHidden,InpZOrder))
     {
      return;
     }
//--- redesenhar o gr√°fico e esperar por um segundo
   ChartRedraw();
   Sleep(1000);
//--- agora, mover os pontos de ancoragem do fan
//--- contador de loop
   int v_steps=accuracy/2;
//--- mover o primeiro ponto de ancoragem vertical
   for(int i=0;i&lt;v_steps;i++)
     {
      //--- usar o seguinte valor
      if(p1&lt;accuracy-1)
         p1+=1;
      //--- mover o ponto
      if(!GannFanPointChange(0,InpName,0,date[d1],price[p1]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- alterar a dire√ß√£o tend√™ncia do fan para um descendente
   GannFanDirectionChange(0,InpName,true);
//--- redesenhar o gr√°fico
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//--- excluir o fan do gr√°fico
   GannFanDelete(0,InpName);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
481
</p>
<pre><code class="language-mql5">
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
482
<h3>OBJ_GANNGRID</h3>
Grade Gann.
<h3>Observa√ß√£o</h3>
Para Grade Gann, √© poss√≠vel determinar o tipo de tend√™ncia a partir do enumerador
ENUM_GANN_DIRECTION. Ao ajustar o valor da escala(OBJPROP_SCALE), √© poss√≠vel alterar o √¢ngulo
de inclina√ß√£o das linhas do grade.
<h3>Exemplo</h3>
O seguinte script cria e move o Grade Gann no gr√°fico. Fun√ß√µes especiais t√™m sido desenvolvidas
para criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas fun√ß√µes &quot;as is&quot; em
seus pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script desenha o objeto gr√°fico tipo \&quot;Grade Gann\&quot;.&quot;
#property description &quot;Coordenadas dos pontos de ancoragem do grade s√£o definidos em p
#property description &quot;tamanho da janela do gr√°fico.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string          InpName=&quot;GannGrid&quot;;        // Nome do grade
input int             InpDate1=15;               // Data do 1¬∫ ponto, %
input int             InpPrice1=25;              // Pre√ßo do 1¬∫ ponto, %
input int             InpDate2=35;               // Data do 2¬∫ ponto, %
input double          InpScale=3.0;              // Escala
input bool            InpDirection=false;        // Dire√ß√£o da tend√™ncia</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
483
</p>
<pre><code class="language-mql5">
input color           InpColor=clrRed;           // Cor do grade
input ENUM_LINE_STYLE InpStyle=STYLE_DASHDOTDOT; // Estilo de linhas do grade
input int             InpWidth=1;                // Largura das linhas fan
input bool            InpBack=false;             // Grade de fundo
input bool            InpSelection=true;         // Destaque para mover
input bool            InpHidden=true;            // Ocultar na lista de objeto
input long            InpZOrder=0;               // Prioridade para clicar no mouse
//+------------------------------------------------------------------+
//| Criar Grade Gann¬†                                                |
//+------------------------------------------------------------------+
bool GannGridCreate(const long            chart_ID=0,        // ID de gr√°fico
                    const string          name=&quot;GannGrid&quot;,   // nome do grade
                    const int             sub_window=0,      // √≠ndice da sub-janela
                    datetime              time1=0,           // primeiro ponto de temp
                    double                price1=0,          // primeiro ponto de pre√ß
                    datetime              time2=0,           // segundo ponto de tempo
                    const double          scale=1.0,         // escala
                    const bool            direction=true,    // dire√ß√£o da tend√™ncia
                    const color           clr=clrRed,        // cor do grade
                    const ENUM_LINE_STYLE style=STYLE_SOLID, // estilo das linhas grad
                    const int             width=1,           // largura das linhas gra
                    const bool            back=false,        // no fundo
                    const bool            selection=true,    // destaque para mover
                    const bool            hidden=true,       // ocultar na lista de ob
                    const long            z_order=0)         // prioridade para o cliq
  {
//--- definir coordenadas de pontos de ancoragem, se eles n√£o est√£o definidos
   ChangeGannGridEmptyPoints(time1,price1,time2);
//--- redefine o valor de erro
   ResetLastError();
//--- Criar Grade Gann pelas coordenadas fornecidas
   if(!ObjectCreate(chart_ID,name,OBJ_GANNGRID,sub_window,time1,price1,time2,0))
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar \&quot;Grade Gann\&quot;! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- alterar a escala (n√∫mero de pips por barra)
   ObjectSetDouble(chart_ID,name,OBJPROP_SCALE,scale);
//--- mudar a dire√ß√£o de tend√™ncia Gann Fan (true - descendente, false - ascendente)
   ObjectSetInteger(chart_ID,name,OBJPROP_DIRECTION,direction);
//--- definir cor do grade
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir a exibi√ß√£o do estilo das linhas grade
   ObjectSetInteger(chart_ID,name,OBJPROP_STYLE,style);
//--- definir a largura da linha do grade
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,width);
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
484
</p>
<pre><code class="language-mql5">
//--- habilitar (true) ou desabilitar (false) o modo de destaque para mover o grid
//--- ao criar um objeto gr√°fico usando a fun√ß√£o ObjectCreate, o objeto n√£o pode ser
//--- destacado e movimentado por padr√£o. Dentro deste m√©todo, o par√¢metro de sele√ß√£o
//--- √© verdade por padr√£o, tornando poss√≠vel destacar e mover o objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mover ponto de ancoragem do Grade Gann¬†                          |
//+------------------------------------------------------------------+
bool GannGridPointChange(const long   chart_ID=0,      // ID do gr√°fico
                         const string name=&quot;GannGrid&quot;, // nome do grade
                         const int    point_index=0,   // √≠ndice do ponto de ancoragem
                         datetime     time=0,          // coordenada do ponto de ancor
                         double       price=0)         // coordenada do ponto de ancor
  {
//--- se a posi√ß√£o do ponto n√£o est√° definida, mover para a barra atual tendo o pre√ßo 
   if(!time)
      time=TimeCurrent();
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- redefine o valor de erro
   ResetLastError();
//--- mover ponto de ancoragem do grade
   if(!ObjectMove(chart_ID,name,point_index,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao mover o ponto de ancoragem! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Alterar a escala Grade Gann¬†                                     |
//+------------------------------------------------------------------+
bool GannGridScaleChange(const long   chart_ID=0,      // ID do gr√°fico
                         const string name=&quot;GannGrid&quot;, // nome do grade
                         const double scale=1.0)       // escala
  {
//--- redefine o valor de erro
   ResetLastError();
//--- alterar a escala (n√∫mero de pips por barra)</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
485
</p>
<pre><code class="language-mql5">
   if(!ObjectSetDouble(chart_ID,name,OBJPROP_SCALE,scale))
     {
      Print(__FUNCTION__,
            &quot;: falha ao alterar a escala! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Alterar a dire√ß√£o de tend√™ncia Grade Gann¬†                       |
//+------------------------------------------------------------------+
bool GannGridDirectionChange(const long   chart_ID=0,      // ID do gr√°fico
                             const string name=&quot;GannGrid&quot;, // nome do grade
                             const bool   direction=true)  // dire√ß√£o da tend√™ncia
  {
//--- redefine o valor de erro
   ResetLastError();
//--- alterar a dire√ß√£o de tend√™ncia Grade Gann
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_DIRECTION,direction))
     {
      Print(__FUNCTION__,
            &quot;: falha ao alterar a dire√ß√£o de tend√™ncia! C√≥digo de erro = &quot;,GetLastErro
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o remove o Gann Fan do gr√°fico¬†                           |
//+------------------------------------------------------------------+
bool GannGridDelete(const long   chart_ID=0,      // ID do gr√°fico
                    const string name=&quot;GannGrid&quot;) // nome do grade
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir Grade Gann
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,
            &quot;: falha ao excluir \&quot;Grade Gann\&quot;! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Ver valores dos pontos de ancoragem do Grade Gann e definir¬†     |
//| valores padr√£o para aqueles vazios¬†                              |</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
486
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
void ChangeGannGridEmptyPoints(datetime &amp;time1,double &amp;price1,datetime &amp;time2)
  {
//--- se o tempo do primeiro ponto n√£o est√° definido, ser√° na barra atual
   if(!time2)
      time2=TimeCurrent();
//--- se o tempo do primeiro ponto n√£o est√° definido, est√° localizado 9 barras a esque
   if(!time1)
     {
      //--- array para receber o tempo de abertura das √∫ltimos 10 barras
      datetime temp[10];
      CopyTime(Symbol(),Period(),time2,10,temp);
      //--- definir o primeiro ponto 9 barras a esquerda do segundo
      time1=temp[0];
     }
//--- se o pre√ßo do primeiro ponto n√£o est√° definido, ele ter√° valor Bid
   if(!price1)
      price1=SymbolInfoDouble(Symbol(),SYMBOL_BID);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- verificar a exatid√£o dos par√¢metros de entrada
   if(InpDate1&lt;0 || InpDate1&gt;100 || InpPrice1&lt;0 || InpPrice1&gt;100 || 
      InpDate2&lt;0 || InpDate2&gt;100)
     {
      Print(&quot;Erro! Valores incorretos dos par√¢metros de entrada!&quot;);
      return;
     }
//--- n√∫mero de barras vis√≠veis na janela do gr√°fico
   int bars=(int)ChartGetInteger(0,CHART_VISIBLE_BARS);
//--- tamanho do array de pre√ßo
   int accuracy=1000;
//--- arrays para armazenar data e valores de pre√ßo para serem usados
//--- para definir e alterar as coordenadas de pontos de ancoragem do grade
   datetime date[];
   double   price[];
//--- aloca√ß√£o de mem√≥ria
   ArrayResize(date,bars);
   ArrayResize(price,accuracy);
//--- preencher o array das datas
   ResetLastError();
   if(CopyTime(Symbol(),Period(),0,bars,date)==-1)
     {
      Print(&quot;Falha ao copiar valores de tempo! C√≥digo de erro = &quot;,GetLastError());
      return;
     }</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
487
</p>
<pre><code class="language-mql5">
//--- preencher o array de pre√ßos
//--- encontrar os maiores e menores valores do gr√°fico
   double max_price=ChartGetDouble(0,CHART_PRICE_MAX);
   double min_price=ChartGetDouble(0,CHART_PRICE_MIN);
//--- definir uma etapa de mudan√ßa de um pre√ßo e preencher o array
   double step=(max_price-min_price)/accuracy;
   for(int i=0;i&lt;accuracy;i++)
      price[i]=min_price+i*step;
//--- definir os pontos para desenhar Grade Gann
   int d1=InpDate1*(bars-1)/100;
   int d2=InpDate2*(bars-1)/100;
   int p1=InpPrice1*(accuracy-1)/100;
//--- criar Grade Gann
   if(!GannGridCreate(0,InpName,0,date[d1],price[p1],date[d2],InpScale,InpDirection,
      InpColor,InpStyle,InpWidth,InpBack,InpSelection,InpHidden,InpZOrder))
     {
      return;
     }
//--- redesenhar o gr√°fico e esperar por um segundo
   ChartRedraw();
   Sleep(1000);
//--- agora, mover os pontos de ancoragem do grade
//--- contador de loop
   int v_steps=accuracy/4;
//--- mover o primeiro ponto de ancoragem vertical
   for(int i=0;i&lt;v_steps;i++)
     {
      //--- usar o seguinte valor
      if(p1&lt;accuracy-1)
         p1+=1;
      if(!GannGridPointChange(0,InpName,0,date[d1],price[p1]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- contador de loop
   int h_steps=bars/4;
//--- mover o segundo ponto de ancoragem vertical
   for(int i=0;i&lt;h_steps;i++)
     {
      //--- usar o seguinte valor
      if(d2&lt;bars-1)
         d2+=1;
      if(!GannGridPointChange(0,InpName,1,date[d2],0))</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
488
</p>
<pre><code class="language-mql5">
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
      // 0.05 segundos de atraso
      Sleep(50);
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- alterar a dire√ß√£o tend√™ncia do grade para um descendente
   GannGridDirectionChange(0,InpName,true);
//--- redesenhar o gr√°fico
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//--- excluir o grade do gr√°fico
   GannGridDelete(0,InpName);
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
489
<h3>OBJ_FIBO</h3>
Retra√ß√£o Fibonacci.
<h3>Observa√ß√£o</h3>
Para &quot;Retra√ß√£o Fibonacci&quot;, √© poss√≠vel determinar o modo da continua√ß√£o da sua exibi√ß√£o para a
direita 
e/ou 
√† 
esquerda 
(de 
acordo 
com 
a 
propriedade 
<h3>OBJPROP_RAY_RIGHT</h3>
e
OBJPROP_RAY_LEFT).
Voc√™ tamb√©m pode especificar o n√∫mero de linhas de n√≠veis, os seus valores e cores.
<h3>Exemplo</h3>
O seguinte script cria e move a Retra√ß√£o Fibonacci no gr√°fico. Fun√ß√µes especiais t√™m sido
desenvolvidas para criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas
fun√ß√µes &quot;as is&quot; em seus pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
</code></pre>
<p>
[parcial]#property description &quot;Script desenha objeto gr√°fico \&quot;Retra√ß√£o Fibonacci\&quot;.&quot;
</p>
<pre><code class="language-mql5">
#property description &quot;Coordenadas de ponto de ancoragem s√£o definidas em porcentagem 
#property description &quot;tamanho da janela do gr√°fico.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string          InpName=&quot;FiboLevels&quot;;      // Nome do objeto
input int             InpDate1=10;               // Data do 1¬∫ ponto, %
input int             InpPrice1=65;              // Pre√ßo do 1¬∫ ponto, %
input int             InpDate2=90;               // Data do 2¬∫ ponto, %
input int             InpPrice2=85;              // Pre√ßo do 2¬∫ ponto, %</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
490
</p>
<pre><code class="language-mql5">
input color           InpColor=clrRed;           // Cor do objeto
input ENUM_LINE_STYLE InpStyle=STYLE_DASHDOTDOT; // Estilo da linha
input int             InpWidth=2;                // Largura da linha
input bool            InpBack=false;             // Objeto de fundo
input bool            InpSelection=true;         // Destaque para mover
input bool            InpRayLeft=false;          // Continua√ß√£o do objeto para a esque
input bool            InpRayRight=false;         // Continua√ß√£o do objeto para a direi
input bool            InpHidden=true;            // Ocultar na lista de objeto
input long            InpZOrder=0;               // Prioridade para clicar no mouse
//+------------------------------------------------------------------+
//| Criar Retra√ß√£o Fibonacci pelas coordenadas fornecidas¬†           |
//+------------------------------------------------------------------+
bool FiboLevelsCreate(const long            chart_ID=0,        // ID de gr√°fico
                      const string          name=&quot;FiboLevels&quot;, // nome do objeto
                      const int             sub_window=0,      // √≠ndice da sub-janela
                      datetime              time1=0,           // primeiro ponto de te
                      double                price1=0,          // primeiro ponto de pr
                      datetime              time2=0,           // segundo ponto de tem
                      double                price2=0,          // segundo ponto de pre
                      const color           clr=clrRed,        // cor do objeto
                      const ENUM_LINE_STYLE style=STYLE_SOLID, // estilo de linha do o
                      const int             width=1,           // largura da linha do 
                      const bool            back=false,        // no fundo
                      const bool            selection=true,    // destaque para mover
                      const bool            ray_left=false,    // continua√ß√£o do objet
                      const bool            ray_right=false,   // continua√ß√£o do objet
                      const bool            hidden=true,       // ocultar na lista de 
                      const long            z_order=0)         // prioridade para cliq
  {
//--- definir coordenadas de pontos de ancoragem, se eles n√£o est√£o definidos
   ChangeFiboLevelsEmptyPoints(time1,price1,time2,price2);
//--- redefine o valor de erro
   ResetLastError();
//--- Criar Retra√ß√£o Fibonacci pelas coordenadas fornecidas
   if(!ObjectCreate(chart_ID,name,OBJ_FIBO,sub_window,time1,price1,time2,price2))
     {
      Print(__FUNCTION__,
            &quot;: falha para criar \&quot;Retra√ß√£o Fibonacci\&quot;! C√≥digo de erro = &quot;,GetLastErro
      return(false);
     }
//--- definir cor
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir estilo de linha
   ObjectSetInteger(chart_ID,name,OBJPROP_STYLE,style);
//--- definir a largura da linha
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,width);
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- habilitar (true) ou desabilitar (false) o modo de preenchimento do canal</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
491
</p>
<pre><code class="language-mql5">
//--- ao criar um objeto gr√°fico usando a fun√ß√£o ObjectCreate, o objeto n√£o pode ser
//--- destacado e movimentado por padr√£o. Dentro deste m√©todo, o par√¢metro de sele√ß√£o
//--- √© verdade por padr√£o, tornando poss√≠vel destacar e mover o objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- habilitar (true) ou desabilitar (false) o modo de continua√ß√£o da exibi√ß√£o do obj
   ObjectSetInteger(chart_ID,name,OBJPROP_RAY_LEFT,ray_left);
//--- habilitar (true) ou desabilitar (false) o modo de continua√ß√£o da exibi√ß√£o do obj
   ObjectSetInteger(chart_ID,name,OBJPROP_RAY_RIGHT,ray_right);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Definir o n√∫mero de n√≠veis e seus par√¢metros¬†                    |
//+------------------------------------------------------------------+
bool FiboLevelsSet(int             levels,            // n√∫mero de linhas dos n√≠veis
                   double          &amp;values[],         // valores de linhas dos n√≠veis
                   color           &amp;colors[],         // cor das linhas dos n√≠veis
                   ENUM_LINE_STYLE &amp;styles[],         // estilo das linhas dos n√≠veis
                   int             &amp;widths[],         // largura das linhas dos n√≠veis
                   const long      chart_ID=0,        // ID do gr√°fico
                   const string    name=&quot;FiboLevels&quot;) // nome do objeto
  {
//--- verificar tamanhos do array
   if(levels!=ArraySize(colors) || levels!=ArraySize(styles) || levels!=ArraySize(widt
     {
      Print(__FUNCTION__,&quot;: comprimento do array n√£o corresponder ao n√∫mero de n√≠veis,
      return(false);
     }
//--- definir o n√∫mero de n√≠veis
   ObjectSetInteger(chart_ID,name,OBJPROP_LEVELS,levels);
//--- definir as propriedades de n√≠veis no loop
   for(int i=0;i&lt;levels;i++)
     {
      //--- valor do n√≠vel
      ObjectSetDouble(chart_ID,name,OBJPROP_LEVELVALUE,i,values[i]);
      //--- cor do n√≠vel
      ObjectSetInteger(chart_ID,name,OBJPROP_LEVELCOLOR,i,colors[i]);
      //--- estilo de n√≠vel
      ObjectSetInteger(chart_ID,name,OBJPROP_LEVELSTYLE,i,styles[i]);
      //--- largura de n√≠vel
      ObjectSetInteger(chart_ID,name,OBJPROP_LEVELWIDTH,i,widths[i]);
      //--- descri√ß√£o de n√≠vel
      ObjectSetString(chart_ID,name,OBJPROP_LEVELTEXT,i,DoubleToString(100*values[i],1
     }</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
492
</p>
<pre><code class="language-mql5">
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mover ponto de ancoragem da Retra√ß√£o Fibonacci¬†                  |
//+------------------------------------------------------------------+
bool FiboLevelsPointChange(const long   chart_ID=0,        // ID do gr√°fico
                           const string name=&quot;FiboLevels&quot;, // nome do objeto
                           const int    point_index=0,     // √≠ndice do ponto de ancor
                           datetime     time=0,            // coordenada do ponto de a
                           double       price=0)           // coordenada do ponto de a
  {
//--- se a posi√ß√£o do ponto n√£o est√° definida, mover para a barra atual tendo o pre√ßo 
   if(!time)
      time=TimeCurrent();
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- redefine o valor de erro
   ResetLastError();
//--- mover o ponto de ancoragem
   if(!ObjectMove(chart_ID,name,point_index,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao mover o ponto de ancoragem! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Excluir Retra√ß√£o Fibonacci¬†                                      |
//+------------------------------------------------------------------+
bool FiboLevelsDelete(const long   chart_ID=0,        // ID do gr√°fico
                      const string name=&quot;FiboLevels&quot;) // nome do objeto
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir o objeto
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,
            &quot;: falha ao excluir \&quot;Retra√ß√£o Fibonacci\&quot;! C√≥digo de erro = &quot;,GetLastErro
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|V√™ valores dos pontos de ancoragem da Retra√ß√£o Fibonacci e¬†       |</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
493
</p>
<pre><code class="language-mql5">
//| definir os valores padr√µes estabelecidos para os pontos vazio¬†   |
//+------------------------------------------------------------------+
void ChangeFiboLevelsEmptyPoints(datetime &amp;time1,double &amp;price1,
                                 datetime &amp;time2,double &amp;price2)
  {
//--- se o tempo do primeiro ponto n√£o est√° definido, ser√° na barra atual
   if(!time2)
      time2=TimeCurrent();
//--- se o pre√ßo do segundo ponto n√£o est√° definido, ele ter√° valor Bid
   if(!price2)
      price2=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- se o tempo do primeiro ponto n√£o est√° definido, est√° localizado 9 barras a esque
   if(!time1)
     {
      //--- array para receber o tempo de abertura das √∫ltimos 10 barras
      datetime temp[10];
      CopyTime(Symbol(),Period(),time2,10,temp);
      //--- definir o primeiro ponto 9 barras a esquerda do segundo
      time1=temp[0];
     }
//--- se o pre√ßo do primeiro ponto n√£o est√° definido, mover 200 pontos a mais do que o
   if(!price1)
      price1=price2-200*SymbolInfoDouble(Symbol(),SYMBOL_POINT);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- verificar a exatid√£o dos par√¢metros de entrada
   if(InpDate1&lt;0 || InpDate1&gt;100 || InpPrice1&lt;0 || InpPrice1&gt;100 || 
      InpDate2&lt;0 || InpDate2&gt;100 || InpPrice2&lt;0 || InpPrice2&gt;100)
     {
      Print(&quot;Erro! Valores incorretos dos par√¢metros de entrada!&quot;);
      return;
     }
//--- n√∫mero de barras vis√≠veis na janela do gr√°fico
   int bars=(int)ChartGetInteger(0,CHART_VISIBLE_BARS);
//--- tamanho do array de pre√ßo
   int accuracy=1000;
//--- arrays para armazenar data e valores de pre√ßo para serem usados
//--- para definir e alterar as coordenadas dos pontos de ancoragem da Retra√ß√£o Fibona
   datetime date[];
   double   price[];
//--- aloca√ß√£o de mem√≥ria
   ArrayResize(date,bars);
   ArrayResize(price,accuracy);
//--- preencher o array das datas
   ResetLastError();</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
494
</p>
<pre><code class="language-mql5">
   if(CopyTime(Symbol(),Period(),0,bars,date)==-1)
     {
      Print(&quot;Falha ao copiar valores de tempo! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- preencher o array de pre√ßos
//--- encontrar os maiores e menores valores do gr√°fico
   double max_price=ChartGetDouble(0,CHART_PRICE_MAX);
   double min_price=ChartGetDouble(0,CHART_PRICE_MIN);
//--- definir uma etapa de mudan√ßa de um pre√ßo e preencher o array
   double step=(max_price-min_price)/accuracy;
   for(int i=0;i&lt;accuracy;i++)
      price[i]=min_price+i*step;
//--- definir os pontos para desenhar Retra√ß√£o Fibonacci
   int d1=InpDate1*(bars-1)/100;
   int d2=InpDate2*(bars-1)/100;
   int p1=InpPrice1*(accuracy-1)/100;
   int p2=InpPrice2*(accuracy-1)/100;
//--- criar um objeto
   if(!FiboLevelsCreate(0,InpName,0,date[d1],price[p1],date[d2],price[p2],InpColor,
      InpStyle,InpWidth,InpBack,InpSelection,InpRayLeft,InpRayRight,InpHidden,InpZOrde
     {
      return;
     }
//--- redesenhar o gr√°fico e esperar por um segundo
   ChartRedraw();
   Sleep(1000);
//--- agora, mover os pontos de ancoragem
//--- contador de loop
   int v_steps=accuracy*2/5;
//--- mover o primeiro ponto de ancoragem
   for(int i=0;i&lt;v_steps;i++)
     {
      //--- usar o seguinte valor
      if(p1&gt;1)
         p1-=1;
      //--- mover o ponto
      if(!FiboLevelsPointChange(0,InpName,0,date[d1],price[p1]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- contador de loop
   v_steps=accuracy*4/5;</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
495
</p>
<pre><code class="language-mql5">
//--- mover o segundo ponto de ancoragem
   for(int i=0;i&lt;v_steps;i++)
     {
      //--- usar o seguinte valor
      if(p2&gt;1)
         p2-=1;
      //--- mover o ponto
      if(!FiboLevelsPointChange(0,InpName,1,date[d2],price[p2]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- excluir a etiqueta do gr√°fico
   FiboLevelsDelete(0,InpName);
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
496
<h3>OBJ_FIBOTIMES</h3>
Fibonacci Zonas de Tempo.
<h3>Observa√ß√£o</h3>
Para &quot;Fibonacci Zonas de Tempo&quot;, √© poss√≠vel determinar o n√∫mero de linhas de n√≠veis, os seus
valores e cores.
<h3>Exemplo</h3>
O seguinte script cria e move a Fibonacci Zonas de Tempo no gr√°fico. Fun√ß√µes especiais t√™m sido
desenvolvidas para criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas
fun√ß√µes &quot;as is&quot; em seus pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script desenha objeto gr√°fico \&quot;Fibonacci Zonas de Tempo\&quot;.&quot;
#property description &quot;Coordenadas dos pontos de ancoragem s√£o definidos em percentage
#property description &quot;janela do gr√°fico.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string          InpName=&quot;FiboTimes&quot;;       // Nome do objeto
input int             InpDate1=10;               // Data do 1¬∫ ponto, %
input int             InpPrice1=45;              // Pre√ßo do 1¬∫ ponto, %
input int             InpDate2=20;               // Data do 2¬∫ ponto, %
input int             InpPrice2=55;              // Pre√ßo do 2¬∫ ponto, %
input color           InpColor=clrRed;           // Cor do objeto
input ENUM_LINE_STYLE InpStyle=STYLE_DASHDOTDOT; // Estilo da linha
input int             InpWidth=2;                // Largura da linha</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
497
</p>
<pre><code class="language-mql5">
input bool            InpBack=false;             // Objeto de fundo
input bool            InpSelection=true;         // Destaque para mover
input bool            InpHidden=true;            // Ocultar na lista de objeto
input long            InpZOrder=0;               // Prioridade para clicar no mouse
//+------------------------------------------------------------------+
//| Criar Fibonacci Zonas de Tempo pelas coordenadas fornecidas¬†     |
//+------------------------------------------------------------------+
bool FiboTimesCreate(const long            chart_ID=0,        // ID de gr√°fico
                     const string          name=&quot;FiboTimes&quot;,  // nome do objeto
                     const int             sub_window=0,      // √≠ndice da sub-janela
                     datetime              time1=0,           // primeiro ponto de tem
                     double                price1=0,          // primeiro ponto de pre
                     datetime              time2=0,           // segundo ponto de temp
                     double                price2=0,          // segundo ponto de pre√ß
                     const color           clr=clrRed,        // cor do objeto
                     const ENUM_LINE_STYLE style=STYLE_SOLID, // estilo de linha do ob
                     const int             width=1,           // largura da linha do o
                     const bool            back=false,        // no fundo
                     const bool            selection=true,    // destaque para mover
                     const bool            hidden=true,       // ocultar na lista de o
                     const long            z_order=0)         // prioridade para cliqu
  {
//--- definir coordenadas de pontos de ancoragem, se eles n√£o est√£o definidos
   ChangeFiboTimesEmptyPoints(time1,price1,time2,price2);
//--- redefine o valor de erro
   ResetLastError();
//--- criar Fibonacci Zonas de Tempo pelas coordenadas fornecidas
   if(!ObjectCreate(chart_ID,name,OBJ_FIBOTIMES,sub_window,time1,price1,time2,price2))
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar \&quot;Fibonacci Zonas de Tempo\&quot;! C√≥digo de erro = &quot;,GetLast
      return(false);
     }
//--- definir cor
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir estilo de linha
   ObjectSetInteger(chart_ID,name,OBJPROP_STYLE,style);
//--- definir a largura da linha
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,width);
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- habilitar (true) ou desabilitar (false) o modo de preenchimento do canal
//--- ao criar um objeto gr√°fico usando a fun√ß√£o ObjectCreate, o objeto n√£o pode ser
//--- destacado e movimentado por padr√£o. Dentro deste m√©todo, o par√¢metro de sele√ß√£o
//--- √© verdade por padr√£o, tornando poss√≠vel destacar e mover o objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
498
</p>
<pre><code class="language-mql5">
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Definir o n√∫mero de n√≠veis e seus par√¢metros¬†                    |
//+------------------------------------------------------------------+
bool FiboTimesLevelsSet(int             levels,           // n√∫mero de linhas dos n√≠ve
                        double          &amp;values[],        // valores de linhas dos n√≠v
                        color           &amp;colors[],        // cor das linhas dos n√≠veis
                        ENUM_LINE_STYLE &amp;styles[],        // estilo das linhas dos n√≠v
                        int             &amp;widths[],        // largura das linhas dos n√≠
                        const long      chart_ID=0,       // ID do gr√°fico
                        const string    name=&quot;FiboTimes&quot;) // nome do objeto
  {
//--- verificar tamanhos do array
   if(levels!=ArraySize(colors) || levels!=ArraySize(styles) ||
      levels!=ArraySize(widths) || levels!=ArraySize(widths))
     {
      Print(__FUNCTION__,&quot;: comprimento do array n√£o corresponder ao n√∫mero de n√≠veis,
      return(false);
     }
//--- definir o n√∫mero de n√≠veis
   ObjectSetInteger(chart_ID,name,OBJPROP_LEVELS,levels);
//--- definir as propriedades de n√≠veis no loop
   for(int i=0;i&lt;levels;i++)
     {
      //--- valor do n√≠vel
      ObjectSetDouble(chart_ID,name,OBJPROP_LEVELVALUE,i,values[i]);
      //--- cor do n√≠vel
      ObjectSetInteger(chart_ID,name,OBJPROP_LEVELCOLOR,i,colors[i]);
      //--- estilo de n√≠vel
      ObjectSetInteger(chart_ID,name,OBJPROP_LEVELSTYLE,i,styles[i]);
      //--- largura de n√≠vel
      ObjectSetInteger(chart_ID,name,OBJPROP_LEVELWIDTH,i,widths[i]);
      //--- descri√ß√£o de n√≠vel
      ObjectSetString(chart_ID,name,OBJPROP_LEVELTEXT,i,DoubleToString(values[i],1));
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mover pontos de ancoragem da Fibonacci Zonas de Tempo¬†           |
//+------------------------------------------------------------------+
bool FiboTimesPointChange(const long   chart_ID=0,       // ID gr√°fico
                          const string name=&quot;FiboTimes&quot;, // nome do objeto
                          const int    point_index=0,    // √≠ndice do ponto de ancorag
                          datetime     time=0,           // coordenada do ponto de anc</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
499
</p>
<pre><code class="language-mql5">
                          double       price=0)          // coordenada do ponto de anc
  {
//--- se a posi√ß√£o do ponto n√£o est√° definida, mover para a barra atual tendo o pre√ßo 
   if(!time)
      time=TimeCurrent();
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- redefine o valor de erro
   ResetLastError();
//--- mover o ponto de ancoragem
   if(!ObjectMove(chart_ID,name,point_index,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao mover o ponto de ancoragem! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Excluir Fibonacci Zonas de Tempo¬†                                |
//+------------------------------------------------------------------+
bool FiboTimesDelete(const long   chart_ID=0,       // ID gr√°fico
                     const string name=&quot;FiboTimes&quot;) // nome do objeto
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir o objeto
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,
            &quot;: falha ao excluir \&quot;Fibonacci Zonas de Tempo\&quot;! C√≥digo de erro = &quot;,GetLa
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Verificar os valores da Fibonacci Zonas de Tempo e¬†              |
//| definir os valores padr√µes estabelecidos para aqueles vazios¬†    |
//+------------------------------------------------------------------+
void ChangeFiboTimesEmptyPoints(datetime &amp;time1,double &amp;price1,
                                datetime &amp;time2,double &amp;price2)
  {
//--- se o tempo do primeiro ponto n√£o est√° definido, ser√° na barra atual
   if(!time1)
      time1=TimeCurrent();
//--- se o pre√ßo do primeiro ponto n√£o est√° definido, ele ter√° valor Bid
   if(!price1)</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
500
</p>
<pre><code class="language-mql5">
      price1=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- se o tempo do segundo ponto n√£o est√° definido, est√° localizado 2 barras deixadas
   if(!time2)
     {
      //--- array para receber o tempo de abertura das √∫ltimos 3 barras
      datetime temp[3];
      CopyTime(Symbol(),Period(),time1,3,temp);
      //--- definir o primeiro ponto 2 barras a esquerda do segundo
      time2=temp[0];
     }
//--- se o pre√ßo do segundo ponto n√£o est√° definido, √© igual ao primeiro ponto
   if(!price2)
      price2=price1;
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- verificar a exatid√£o dos par√¢metros de entrada
   if(InpDate1&lt;0 || InpDate1&gt;100 || InpPrice1&lt;0 || InpPrice1&gt;100 || 
      InpDate2&lt;0 || InpDate2&gt;100 || InpPrice2&lt;0 || InpPrice2&gt;100)
     {
      Print(&quot;Erro! Valores incorretos dos par√¢metros de entrada!&quot;);
      return;
     }
//--- n√∫mero de barras vis√≠veis na janela do gr√°fico
   int bars=(int)ChartGetInteger(0,CHART_VISIBLE_BARS);
//--- tamanho do array de pre√ßo
   int accuracy=1000;
//--- arrays para armazenar data e valores de pre√ßo para serem usados
//--- para definir e alterar as coordenadas dos pontos de ancoragem da Fibonacci Zonas
   datetime date[];
   double   price[];
//--- aloca√ß√£o de mem√≥ria
   ArrayResize(date,bars);
   ArrayResize(price,accuracy);
//--- preencher o array das datas
   ResetLastError();
   if(CopyTime(Symbol(),Period(),0,bars,date)==-1)
     {
      Print(&quot;Falha ao copiar valores de tempo! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- preencher o array de pre√ßos
//--- encontrar os maiores e menores valores do gr√°fico
   double max_price=ChartGetDouble(0,CHART_PRICE_MAX);
   double min_price=ChartGetDouble(0,CHART_PRICE_MIN);
//--- definir uma etapa de mudan√ßa de um pre√ßo e preencher o array</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
501
</p>
<pre><code class="language-mql5">
   double step=(max_price-min_price)/accuracy;
   for(int i=0;i&lt;accuracy;i++)
      price[i]=min_price+i*step;
//--- define pontos para desenhar Fibonacci Zonas de Tempo
   int d1=InpDate1*(bars-1)/100;
   int d2=InpDate2*(bars-1)/100;
   int p1=InpPrice1*(accuracy-1)/100;
   int p2=InpPrice2*(accuracy-1)/100;
//--- criar um objeto
   if(!FiboTimesCreate(0,InpName,0,date[d1],price[p1],date[d2],price[p2],
      InpColor,InpStyle,InpWidth,InpBack,InpSelection,InpHidden,InpZOrder))
     {
      return;
     }
//--- redesenhar o gr√°fico e esperar por um segundo
   ChartRedraw();
   Sleep(1000);
//--- agora, mover os pontos de ancoragem
//--- contador de loop
   int h_steps=bars*2/5;
//--- mover o segundo ponto de ancoragem
   for(int i=0;i&lt;h_steps;i++)
     {
      //--- usar o seguinte valor
      if(d2&lt;bars-1)
         d2+=1;
      //--- mover o ponto
      if(!FiboTimesPointChange(0,InpName,1,date[d2],price[p2]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
      // 0.05 segundos de atraso
      Sleep(50);
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- contador de loop
   h_steps=bars*3/5;
//--- mover o primeiro ponto de ancoragem
   for(int i=0;i&lt;h_steps;i++)
     {
      //--- usar o seguinte valor
      if(d1&lt;bars-1)
         d1+=1;
      //--- mover o ponto
      if(!FiboTimesPointChange(0,InpName,0,date[d1],price[p1]))</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
502
</p>
<pre><code class="language-mql5">
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
      // 0.05 segundos de atraso
      Sleep(50);
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- excluir a etiqueta do gr√°fico
   FiboTimesDelete(0,InpName);
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
503
<h3>OBJ_FIBOFAN</h3>
Fibonacci Fan.
<h3>Observa√ß√£o</h3>
Para &quot;Fibonacci Fan&quot;, √© poss√≠vel determinar o n√∫mero de linhas de n√≠veis, os seus valores e cores.
<h3>Exemplo</h3>
O seguinte script cria e move o Fibonacci Fan no gr√°fico. Fun√ß√µes especiais t√™m sido desenvolvidas
para criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas fun√ß√µes &quot;as is&quot; em
seus pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script desenha o objeto gr√°fico tipo \&quot;Fibonacci Fan\&quot;.&quot;
#property description &quot;Coordenadas de ponto de ancoragem s√£o definidas em porcentagem 
#property description &quot;tamanho da janela do gr√°fico.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string          InpName=&quot;FiboFan&quot;;         // Nome do fan
input int             InpDate1=10;               // Data do 1¬∫ ponto, %
input int             InpPrice1=25;              // Pre√ßo do 1¬∫ ponto, %
input int             InpDate2=30;               // Data do 2¬∫ ponto, %
input int             InpPrice2=50;              // Pre√ßo do 2¬∫ ponto, %
input color           InpColor=clrRed;           // Cor da linha fan
input ENUM_LINE_STYLE InpStyle=STYLE_DASHDOTDOT; // Estilo da linha
input int             InpWidth=2;                // Largura da linha</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
504
</p>
<pre><code class="language-mql5">
input bool            InpBack=false;             // Objeto de fundo
input bool            InpSelection=true;         // Destaque para mover
input bool            InpHidden=true;            // Ocultar na lista de objeto
input long            InpZOrder=0;               // Prioridade para clicar no mouse
//+------------------------------------------------------------------+
//| Criar Fibonacci Fan pelas coordenadas fornecidas¬†                |
//+------------------------------------------------------------------+
bool FiboFanCreate(const long            chart_ID=0,        // ID de gr√°fico
                   const string          name=&quot;FiboFan&quot;,    // nome do fan
                   const int             sub_window=0,      // √≠ndice da sub-janela
                   datetime              time1=0,           // primeiro ponto de tempo
                   double                price1=0,          // primeiro ponto de pre√ßo
                   datetime              time2=0,           // segundo ponto de tempo
                   double                price2=0,          // segundo ponto de pre√ßo
                   const color           clr=clrRed,        // cor da linha fan
                   const ENUM_LINE_STYLE style=STYLE_SOLID, // estilo de linha fan
                   const int             width=1,           // largura da linha fan
                   const bool            back=false,        // no fundo
                   const bool            selection=true,    // destaque para mover
                   const bool            hidden=true,       // ocultar na lista de obj
                   const long            z_order=0)         // prioridade para clique 
  {
//--- definir coordenadas de pontos de ancoragem, se eles n√£o est√£o definidos
   ChangeFiboFanEmptyPoints(time1,price1,time2,price2);
//--- redefine o valor de erro
   ResetLastError();
//--- criar Fibonacci Fan pelas coordenadas fornecidas
   if(!ObjectCreate(chart_ID,name,OBJ_FIBOFAN,sub_window,time1,price1,time2,price2))
     {
      Print(__FUNCTION__,
            &quot;: falha para criar \&quot; Fibonacci Fan\&quot;! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- definir cor
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir estilo de linha
   ObjectSetInteger(chart_ID,name,OBJPROP_STYLE,style);
//--- definir a largura da linha
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,width);
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- habilitar (true) ou desabilitar (false) o modo de destaque para mover o fan
//--- ao criar um objeto gr√°fico usando a fun√ß√£o ObjectCreate, o objeto n√£o pode ser
//--- destacado e movimentado por padr√£o. Dentro deste m√©todo, o par√¢metro de sele√ß√£o
//--- √© verdade por padr√£o, tornando poss√≠vel destacar e mover o objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
505
</p>
<pre><code class="language-mql5">
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Definir o n√∫mero de n√≠veis e seus par√¢metros¬†                    |
//+------------------------------------------------------------------+
bool FiboFanLevelsSet(int             levels,         // n√∫mero de linhas dos n√≠veis
                      double          &amp;values[],      // valores de linhas dos n√≠veis 
                      color           &amp;colors[],      // cor das linhas dos n√≠veis
                      ENUM_LINE_STYLE &amp;styles[],      // estilo das linhas dos n√≠veis
                      int             &amp;widths[],      // largura das linhas dos n√≠veis
                      const long      chart_ID=0,     // ID do gr√°fico
                      const string    name=&quot;FiboFan&quot;) // nome do fan
  {
//--- verificar tamanhos do array
   if(levels!=ArraySize(colors) || levels!=ArraySize(styles) ||
      levels!=ArraySize(widths) || levels!=ArraySize(widths))
     {
      Print(__FUNCTION__,&quot;: comprimento do array n√£o corresponder ao n√∫mero de n√≠veis,
      return(false);
     }
//--- definir o n√∫mero de n√≠veis
   ObjectSetInteger(chart_ID,name,OBJPROP_LEVELS,levels);
//--- definir as propriedades de n√≠veis no loop
   for(int i=0;i&lt;levels;i++)
     {
      //--- valor do n√≠vel
      ObjectSetDouble(chart_ID,name,OBJPROP_LEVELVALUE,i,values[i]);
      //--- cor do n√≠vel
      ObjectSetInteger(chart_ID,name,OBJPROP_LEVELCOLOR,i,colors[i]);
      //--- estilo de n√≠vel
      ObjectSetInteger(chart_ID,name,OBJPROP_LEVELSTYLE,i,styles[i]);
      //--- largura de n√≠vel
      ObjectSetInteger(chart_ID,name,OBJPROP_LEVELWIDTH,i,widths[i]);
      //--- descri√ß√£o de n√≠vel
      ObjectSetString(chart_ID,name,OBJPROP_LEVELTEXT,i,DoubleToString(100*values[i],1
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mover ponto de ancoragem da Fibonacci Fan¬†                       |
//+------------------------------------------------------------------+
bool FiboFanPointChange(const long   chart_ID=0,     // ID do gr√°fico
                        const string name=&quot;FiboFan&quot;, // nome do fan
                        const int    point_index=0,  // √≠ndice do ponto de ancoragem
                        datetime     time=0,         // coordenada do ponto de ancorag</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
506
</p>
<pre><code class="language-mql5">
                        double       price=0)        // coordenada do ponto de ancorag
  {
//--- se a posi√ß√£o do ponto n√£o est√° definida, mover para a barra atual tendo o pre√ßo 
   if(!time)
      time=TimeCurrent();
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- redefine o valor de erro
   ResetLastError();
//--- mover o ponto de ancoragem
   if(!ObjectMove(chart_ID,name,point_index,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao mover o ponto de ancoragem! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Excluir nome da Fibo¬†                                            |
//+------------------------------------------------------------------+
bool FiboFanDelete(const long   chart_ID=0,     // ID do gr√°fico
                   const string name=&quot;FiboFan&quot;) // nome do fan
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir Gann Fan
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,
            &quot;: falha ao excluir \&quot; Fibonacci Fan\&quot;! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Ver valores dos pontos de ancoragem Fibonacci Fan e¬†             |
//| definir os valores padr√µes estabelecidos para os pontos vazio¬†   |
//+------------------------------------------------------------------+
void ChangeFiboFanEmptyPoints(datetime &amp;time1,double &amp;price1,
                              datetime &amp;time2,double &amp;price2)
  {
//--- se o tempo do primeiro ponto n√£o est√° definido, ser√° na barra atual
   if(!time2)
      time2=TimeCurrent();
//--- se o pre√ßo do segundo ponto n√£o est√° definido, ele ter√° valor Bid
   if(!price2)</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
507
</p>
<pre><code class="language-mql5">
      price2=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- se o tempo do primeiro ponto n√£o est√° definido, est√° localizado 9 barras a esque
   if(!time1)
     {
      //--- array para receber o tempo de abertura das √∫ltimos 10 barras
      datetime temp[10];
      CopyTime(Symbol(),Period(),time2,10,temp);
      //--- definir o primeiro ponto 9 barras a esquerda do segundo
      time1=temp[0];
     }
//--- se o pre√ßo do primeiro ponto n√£o est√° definido, mover 200 pontos a mais do que o
   if(!price1)
      price1=price2-200*SymbolInfoDouble(Symbol(),SYMBOL_POINT);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- verificar a exatid√£o dos par√¢metros de entrada
   if(InpDate1&lt;0 || InpDate1&gt;100 || InpPrice1&lt;0 || InpPrice1&gt;100 || 
      InpDate2&lt;0 || InpDate2&gt;100 || InpPrice2&lt;0 || InpPrice2&gt;100)
     {
      Print(&quot;Erro! Valores incorretos dos par√¢metros de entrada!&quot;);
      return;
     }
//--- n√∫mero de barras vis√≠veis na janela do gr√°fico
   int bars=(int)ChartGetInteger(0,CHART_VISIBLE_BARS);
//--- tamanho do array de pre√ßo
   int accuracy=1000;
//--- arrays para armazenar data e valores de pre√ßo para serem usados
//--- para definir e alterar as coordenadas dos pontos de ancoragem da Fibonacci Fan
   datetime date[];
   double   price[];
//--- aloca√ß√£o de mem√≥ria
   ArrayResize(date,bars);
   ArrayResize(price,accuracy);
//--- preencher o array das datas
   ResetLastError();
   if(CopyTime(Symbol(),Period(),0,bars,date)==-1)
     {
      Print(&quot;Falha ao copiar valores de tempo! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- preencher o array de pre√ßos
//--- encontrar os maiores e menores valores do gr√°fico
   double max_price=ChartGetDouble(0,CHART_PRICE_MAX);
   double min_price=ChartGetDouble(0,CHART_PRICE_MIN);
//--- definir uma etapa de mudan√ßa de um pre√ßo e preencher o array</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
508
</p>
<pre><code class="language-mql5">
   double step=(max_price-min_price)/accuracy;
   for(int i=0;i&lt;accuracy;i++)
      price[i]=min_price+i*step;
//--- definir os pontos para desenhar a Fibonacci Fan
   int d1=InpDate1*(bars-1)/100;
   int d2=InpDate2*(bars-1)/100;
   int p1=InpPrice1*(accuracy-1)/100;
   int p2=InpPrice2*(accuracy-1)/100;
//--- criar um objeto
   if(!FiboFanCreate(0,InpName,0,date[d1],price[p1],date[d2],price[p2],
      InpColor,InpStyle,InpWidth,InpBack,InpSelection,InpHidden,InpZOrder))
     {
      return;
     }
//--- redesenhar o gr√°fico e esperar por um segundo
   ChartRedraw();
   Sleep(1000);
//--- agora, mover os pontos de ancoragem do fan
//--- contador de loop
   int v_steps=accuracy/2;
//--- mover o primeiro ponto de ancoragem
   for(int i=0;i&lt;v_steps;i++)
     {
      //--- usar o seguinte valor
      if(p1&lt;accuracy-1)
         p1+=1;
      //--- mover o ponto
      if(!FiboFanPointChange(0,InpName,0,date[d1],price[p1]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- contador de loop
   int h_steps=bars/4;
//--- mover o segundo ponto de ancoragem
   for(int i=0;i&lt;h_steps;i++)
     {
      //--- usar o seguinte valor
      if(d2&lt;bars-1)
         d2+=1;
      //--- mover o ponto
      if(!FiboFanPointChange(0,InpName,1,date[d2],price[p2]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
509
</p>
<pre><code class="language-mql5">
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
      // 0.05 segundos de atraso
      Sleep(50);
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- excluir a etiqueta do gr√°fico
   FiboFanDelete(0,InpName);
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
510
<h3>OBJ_FIBOARC</h3>
Arcos Fibonacci.
<h3>Observa√ß√£o</h3>
Para &quot;Arcos Fibonacci Arcs&quot;, √© poss√≠vel determinar o modo de exibi√ß√£o da elipse inteira. O raio de
curvatura pode ser especificado, alterando a escala e as coordenadas dos pontos de ancoragem.
Voc√™ tamb√©m pode especificar o n√∫mero de linhas de n√≠veis, os seus valores e cores.
<h3>Exemplo</h3>
O seguinte script cria e move a Arcos Fibonacci no gr√°fico. Fun√ß√µes especiais t√™m sido
desenvolvidas para criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas
fun√ß√µes &quot;as is&quot; em seus pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script desenha objeto gr√°fico \&quot;Arcos Fibonacci\&quot;.&quot;
#property description &quot;Coordenadas de ponto de ancoragem s√£o definidas em porcentagem 
#property description &quot;tamanho da janela do gr√°fico.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string          InpName=&quot;FiboArc&quot;;         // Nome do objeto
input int             InpDate1=25;               // Data do 1¬∫ ponto, %
input int             InpPrice1=25;              // Pre√ßo do 1¬∫ ponto, %
input int             InpDate2=35;               // Data do 2¬∫ ponto, %
input int             InpPrice2=55;              // Pre√ßo do 2¬∫ ponto, %
input double          InpScale=3.0;              // Escala</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
511
</p>
<pre><code class="language-mql5">
input bool            InpFullEllipse=true;       // Formas dos arcos
input color           InpColor=clrRed;           // Cor da linha
input ENUM_LINE_STYLE InpStyle=STYLE_DASHDOTDOT; // Estilo da linha
input int             InpWidth=2;                // Largura da linha
input bool            InpBack=false;             // Objeto de fundo
input bool            InpSelection=true;         // Destaque para mover
input bool            InpHidden=true;            // Ocultar na lista de objeto
input long            InpZOrder=0;               // Prioridade para clicar no mouse
//+------------------------------------------------------------------+
//| Criar Arcos Fibonacci pelas coordenadas fornecidas¬†              |
//+------------------------------------------------------------------+
bool FiboArcCreate(const long            chart_ID=0,         // ID do gr√°fico
                   const string          name=&quot;FiboArc&quot;,     // nome do objeto
                   const int             sub_window=0,       // √≠ndice da sub-janela
                   datetime              time1=0,            // primeiro ponto de temp
                   double                price1=0,           // primeiro ponto de pre√ß
                   datetime              time2=0,            // segundo ponto de tempo
                   double                price2=0,           // segundo ponto de pre√ßo
                   const double          scale=1.0,          // escala
                   const bool            full_ellipse=false, // forma dos arcos
                   const color           clr=clrRed,         // cor da linha
                   const ENUM_LINE_STYLE style=STYLE_SOLID,  // estilo da linha
                   const int             width=1,            // largura da linha
                   const bool            back=false,         // no fundo
                   const bool            selection=true,     // destacar para mover
                   const bool            hidden=true,        // ocultar na lista de ob
                   const long            z_order=0)          // prioridade para clicar
  {
//--- definir coordenadas de pontos de ancoragem, se eles n√£o est√£o definidos
   ChangeFiboArcEmptyPoints(time1,price1,time2,price2);
//--- redefine o valor de erro
   ResetLastError();
//--- criar Arcos Fibonacci pelas coordenadas fornecidas
   if(!ObjectCreate(chart_ID,name,OBJ_FIBOARC,sub_window,time1,price1,time2,price2))
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar \&quot;Arcos Fibonacci\&quot;! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- definir a escala
   ObjectSetDouble(chart_ID,name,OBJPROP_SCALE,scale);
//--- definir visualiza√ß√£o dos arcos como uma elipse completa (true) ou a metade dela 
   ObjectSetInteger(chart_ID,name,OBJPROP_ELLIPSE,full_ellipse);
//--- definir cor
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir estilo de linha
   ObjectSetInteger(chart_ID,name,OBJPROP_STYLE,style);
//--- definir a largura da linha
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,width);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
512
</p>
<pre><code class="language-mql5">
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- habilitar (true) ou desabilitar (false) o modo de destaque para mover os arcos
//--- ao criar um objeto gr√°fico usando a fun√ß√£o ObjectCreate, o objeto n√£o pode ser
//--- destacado e movimentado por padr√£o. Dentro deste m√©todo, o par√¢metro de sele√ß√£o
//--- √© verdade por padr√£o, tornando poss√≠vel destacar e mover o objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Definir o n√∫mero de n√≠veis e seus par√¢metros¬†                    |
//+------------------------------------------------------------------+
bool FiboArcLevelsSet(int             levels,         // n√∫mero de linhas dos n√≠veis
                      double          &amp;values[],      // valores de linhas dos n√≠veis 
                      color           &amp;colors[],      // cor das linhas dos n√≠veis
                      ENUM_LINE_STYLE &amp;styles[],      // estilo das linhas dos n√≠veis
                      int             &amp;widths[],      // largura das linhas dos n√≠veis
                      const long      chart_ID=0,     // ID do gr√°fico
                      const string    name=&quot;FiboArc&quot;) // nome do objeto
  {
//--- verificar tamanhos do array
   if(levels!=ArraySize(colors) || levels!=ArraySize(styles) ||
      levels!=ArraySize(widths) || levels!=ArraySize(widths))
     {
      Print(__FUNCTION__,&quot;: comprimento do array n√£o corresponder ao n√∫mero de n√≠veis,
      return(false);
     }
//--- definir o n√∫mero de n√≠veis
   ObjectSetInteger(chart_ID,name,OBJPROP_LEVELS,levels);
//--- definir as propriedades de n√≠veis no loop
   for(int i=0;i&lt;levels;i++)
     {
      //--- valor do n√≠vel
      ObjectSetDouble(chart_ID,name,OBJPROP_LEVELVALUE,i,values[i]);
      //--- cor do n√≠vel
      ObjectSetInteger(chart_ID,name,OBJPROP_LEVELCOLOR,i,colors[i]);
      //--- estilo de n√≠vel
      ObjectSetInteger(chart_ID,name,OBJPROP_LEVELSTYLE,i,styles[i]);
      //--- largura de n√≠vel
      ObjectSetInteger(chart_ID,name,OBJPROP_LEVELWIDTH,i,widths[i]);
      //--- descri√ß√£o de n√≠vel
      ObjectSetString(chart_ID,name,OBJPROP_LEVELTEXT,i,DoubleToString(100*values[i],1
     }</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
513
</p>
<pre><code class="language-mql5">
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mover ponto de ancoragem dos Arcos Fibonacci¬†                    |
//+------------------------------------------------------------------+
bool FiboArcPointChange(const long   chart_ID=0,     // ID do gr√°fico
                        const string name=&quot;FiboArc&quot;, // nome do objeto
                        const int    point_index=0,  // √≠ndice do ponto de ancoragem
                        datetime     time=0,         // coordenada do ponto de ancorag
                        double       price=0)        // coordenada do ponto de ancorag
  {
//--- se a posi√ß√£o do ponto n√£o est√° definida, mover para a barra atual tendo o pre√ßo 
   if(!time)
      time=TimeCurrent();
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- redefine o valor de erro
   ResetLastError();
//--- mover o ponto de ancoragem
   if(!ObjectMove(chart_ID,name,point_index,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao mover o ponto de ancoragem! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Excluir Arcos Fibonacci¬†                                         |
//+------------------------------------------------------------------+
bool FiboArcDelete(const long   chart_ID=0,     // ID do gr√°fico
                   const string name=&quot;FiboArc&quot;) // nome do objeto
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir o objeto
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,
            &quot;: falha ao excluir\&quot;Arcos Fibonacci\&quot;! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Ver valores dos pontos de ancoragem dos Arcos Fibonacci e definir| </p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
514
</p>
<pre><code class="language-mql5">
//| valores padr√£o para aqueles vazios¬†                              |
//+------------------------------------------------------------------+
void ChangeFiboArcEmptyPoints(datetime &amp;time1,double &amp;price1,
                              datetime &amp;time2,double &amp;price2)
  {
//--- se o tempo do primeiro ponto n√£o est√° definido, ser√° na barra atual
   if(!time2)
      time2=TimeCurrent();
//--- se o pre√ßo do segundo ponto n√£o est√° definido, ele ter√° valor Bid
   if(!price2)
      price2=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- se o tempo do primeiro ponto n√£o est√° definido, est√° localizado 9 barras a esque
   if(!time1)
     {
      //--- array para receber o tempo de abertura das √∫ltimos 10 barras
      datetime temp[10];
      CopyTime(Symbol(),Period(),time2,10,temp);
      //--- definir o primeiro ponto 9 barras a esquerda do segundo
      time1=temp[0];
     }
//--- se o pre√ßo do primeiro ponto n√£o est√° definido, mover 300 pontos a mais do que o
   if(!price1)
      price1=price2-300*SymbolInfoDouble(Symbol(),SYMBOL_POINT);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- verificar a exatid√£o dos par√¢metros de entrada
   if(InpDate1&lt;0 || InpDate1&gt;100 || InpPrice1&lt;0 || InpPrice1&gt;100 || 
      InpDate2&lt;0 || InpDate2&gt;100 || InpPrice2&lt;0 || InpPrice2&gt;100)
     {
      Print(&quot;Erro! Valores incorretos dos par√¢metros de entrada!&quot;);
      return;
     }
//--- n√∫mero de barras vis√≠veis na janela do gr√°fico
   int bars=(int)ChartGetInteger(0,CHART_VISIBLE_BARS);
//--- tamanho do array de pre√ßo
   int accuracy=1000;
//--- arrays para armazenar data e valores de pre√ßo para serem usados
//--- para definir e alterar as coordenadas dos pontos de ancoragem dos Arcos Fibonacc
   datetime date[];
   double   price[];
//--- aloca√ß√£o de mem√≥ria
   ArrayResize(date,bars);
   ArrayResize(price,accuracy);
//--- preencher o array das datas
   ResetLastError();</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
515
</p>
<pre><code class="language-mql5">
   if(CopyTime(Symbol(),Period(),0,bars,date)==-1)
     {
      Print(&quot;Falha ao copiar valores de tempo! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- preencher o array de pre√ßos
//--- encontrar os maiores e menores valores do gr√°fico
   double max_price=ChartGetDouble(0,CHART_PRICE_MAX);
   double min_price=ChartGetDouble(0,CHART_PRICE_MIN);
//--- definir uma etapa de mudan√ßa de um pre√ßo e preencher o array
   double step=(max_price-min_price)/accuracy;
   for(int i=0;i&lt;accuracy;i++)
      price[i]=min_price+i*step;
//--- definir os pontos para desenhar Arcos Fibonacci
   int d1=InpDate1*(bars-1)/100;
   int d2=InpDate2*(bars-1)/100;
   int p1=InpPrice1*(accuracy-1)/100;
   int p2=InpPrice2*(accuracy-1)/100;
//--- criar um objeto
   if(!FiboArcCreate(0,InpName,0,date[d1],price[p1],date[d2],price[p2],InpScale,
      InpFullEllipse,InpColor,InpStyle,InpWidth,InpBack,InpSelection,InpHidden,InpZOrd
     {
      return;
     }
//--- redesenhar o gr√°fico e esperar por um segundo
   ChartRedraw();
   Sleep(1000);
//--- agora, mover os pontos de ancoragem
//--- contador de loop
   int v_steps=accuracy/5;
//--- mover o primeiro ponto de ancoragem
   for(int i=0;i&lt;v_steps;i++)
     {
      //--- usar o seguinte valor
      if(p1&lt;accuracy-1)
         p1+=1;
      //--- mover o ponto
      if(!FiboArcPointChange(0,InpName,0,date[d1],price[p1]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- contador de loop
   int h_steps=bars/5;</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
516
</p>
<pre><code class="language-mql5">
//--- mover o segundo ponto de ancoragem
   for(int i=0;i&lt;h_steps;i++)
     {
      //--- usar o seguinte valor
      if(d2&lt;bars-1)
         d2+=1;
      //--- mover o ponto
      if(!FiboArcPointChange(0,InpName,1,date[d2],price[p2]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
      // 0.05 segundos de atraso
      Sleep(50);
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- excluir a etiqueta do gr√°fico
   FiboArcDelete(0,InpName);
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
517
<h3>OBJ_FIBOCHANNEL</h3>
Canal Fibonacci.
<h3>Observa√ß√£o</h3>
Para &quot;Canal Fibonacci&quot;, √© poss√≠vel determinar o modo da continua√ß√£o da sua exibi√ß√£o para a direita
e/ou √† esquerda (de acordo com as propriedades OBJPROP_RAY_RIGHT e OBJPROP_RAY_LEFT).
Voc√™ tamb√©m pode especificar o n√∫mero de linhas de n√≠veis, os seus valores e cores.
<h3>Exemplo</h3>
O seguinte script cria e move o Canal Fibonacci no gr√°fico. Fun√ß√µes especiais t√™m sido
desenvolvidas para criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas
fun√ß√µes &quot;as is&quot; em seus pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script desenha um objeto gr√°fico tipo \&quot;Canal Fibonacci\&quot;.&quot;
#property description &quot;Coordenadas de ponto de ancoragem s√£o definidas em porcentagem 
#property description &quot;tamanho da janela do gr√°fico.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string          InpName=&quot;FiboChannel&quot;;     // Nome do canal
input int             InpDate1=20;               // Data do 1¬∫ ponto, %
input int             InpPrice1=10;              // Pre√ßo do 1¬∫ ponto, %
input int             InpDate2=60;               // Data do 2¬∫ ponto, %
input int             InpPrice2=30;              // Pre√ßo do 2¬∫ ponto, %
input int             InpDate3=20;               // Data do 3¬∫ ponto, %</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
518
</p>
<pre><code class="language-mql5">
input int             InpPrice3=25;              // Pre√ßo do 3¬∫ ponto, %
input color           InpColor=clrRed;           // Cor do canal
input ENUM_LINE_STYLE InpStyle=STYLE_DASHDOTDOT; // Estilo de linhas do canal
input int             InpWidth=2;                // Largura das linhas do canal 
input bool            InpBack=false;             // Canal de Fundo
input bool            InpSelection=true;         // Destaque para mover
input bool            InpRayLeft=false;          // Continua√ß√£o do Canal para a esquer
input bool            InpRayRight=false;         // Continua√ß√£o do Canal para a direit
input bool            InpHidden=true;            // Ocultar na lista de objeto
input long            InpZOrder=0;               // Prioridade para clicar no mouse
//+------------------------------------------------------------------+
//| Criar Canal Fibonacci pelas coordenadas fornecidas¬†              |
//+------------------------------------------------------------------+
bool FiboChannelCreate(const long            chart_ID=0,         // ID do gr√°fico
                       const string          name=&quot;FiboChannel&quot;, // nome do canal
                       const int             sub_window=0,       // √≠ndice da sub-jane
                       datetime              time1=0,            // primeiro ponto de 
                       double                price1=0,           // primeiro ponto de 
                       datetime              time2=0,            // segundo ponto de t
                       double                price2=0,           // segundo ponto de p
                       datetime              time3=0,            // terceiro ponto de 
                       double                price3=0,           // terceiro ponto de 
                       const color           clr=clrRed,         // cor do sinal
                       const ENUM_LINE_STYLE style=STYLE_SOLID,  // estilo das linhas 
                       const int             width=1,            // largura das linhas
                       const bool            back=false,         // no fundo
                       const bool            selection=true,     // destacar para move
                       const bool            ray_left=false,     // continua√ß√£o do can
                       const bool            ray_right=false,    // continua√ß√£o do can
                       const bool            hidden=true,        // ocultar na lista d
                       const long            z_order=0)          // prioridade para cl
  {
//--- definir coordenadas de pontos de ancoragem, se eles n√£o est√£o definidos
   ChangeFiboChannelEmptyPoints(time1,price1,time2,price2,time3,price3);
//--- redefine o valor de erro
   ResetLastError();
//--- criar um canal pelas coordenadas dadas
   if(!ObjectCreate(chart_ID,name,OBJ_FIBOCHANNEL,sub_window,time1,price1,time2,price2
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar \&quot;Canal Fibonacci\&quot;! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- definir a cor do canal
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir o estilo de linha do canal
   ObjectSetInteger(chart_ID,name,OBJPROP_STYLE,style);
//--- definir a largura da linha do canal
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,width);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
519
</p>
<pre><code class="language-mql5">
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- habilitar (true) ou desabilitar (false) o modo de preenchimento do canal
//--- ao criar um objeto gr√°fico usando a fun√ß√£o ObjectCreate, o objeto n√£o pode ser
//--- destacado e movimentado por padr√£o. Dentro deste m√©todo, o par√¢metro de sele√ß√£o
//--- √© verdade por padr√£o, tornando poss√≠vel destacar e mover o objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- habilitar (true) ou desabilitar (false) o modo de continua√ß√£o da exibi√ß√£o do can
   ObjectSetInteger(chart_ID,name,OBJPROP_RAY_LEFT,ray_left);
//--- habilitar (true) ou desabilitar (false) o modo de continua√ß√£o da exibi√ß√£o do can
   ObjectSetInteger(chart_ID,name,OBJPROP_RAY_RIGHT,ray_right);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Definir o n√∫mero de n√≠veis e seus par√¢metros¬†                    |
//+------------------------------------------------------------------+
bool FiboChannelLevelsSet(int             levels,             // n√∫mero de linhas dos 
                          double          &amp;values[],          // valores de linhas dos
                          color           &amp;colors[],          // cor das linhas dos n√≠
                          ENUM_LINE_STYLE &amp;styles[],          // estilo das linhas dos
                          int             &amp;widths[],          // largura das linhas do
                          const long      chart_ID=0,         // ID do gr√°fico
                          const string    name=&quot;FiboChannel&quot;) // nome do objeto
  {
//--- verificar tamanhos do array
   if(levels!=ArraySize(colors) || levels!=ArraySize(styles) ||
      levels!=ArraySize(widths) || levels!=ArraySize(widths))
     {
      Print(__FUNCTION__,&quot;: comprimento do array n√£o corresponder ao n√∫mero de n√≠veis,
      return(false);
     }
//--- definir o n√∫mero de n√≠veis
   ObjectSetInteger(chart_ID,name,OBJPROP_LEVELS,levels);
//--- definir as propriedades de n√≠veis no loop
   for(int i=0;i&lt;levels;i++)
     {
      //--- valor do n√≠vel
      ObjectSetDouble(chart_ID,name,OBJPROP_LEVELVALUE,i,values[i]);
      //--- cor do n√≠vel
      ObjectSetInteger(chart_ID,name,OBJPROP_LEVELCOLOR,i,colors[i]);
      //--- estilo de n√≠vel
      ObjectSetInteger(chart_ID,name,OBJPROP_LEVELSTYLE,i,styles[i]);
      //--- largura de n√≠vel</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
520
</p>
<pre><code class="language-mql5">
      ObjectSetInteger(chart_ID,name,OBJPROP_LEVELWIDTH,i,widths[i]);
      //--- descri√ß√£o de n√≠vel
      ObjectSetString(chart_ID,name,OBJPROP_LEVELTEXT,i,DoubleToString(100*values[i],1
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mover ponto de ancoragem do Canal Fibonacci¬†                     |
//+------------------------------------------------------------------+
bool FiboChannelPointChange(const long   chart_ID=0,         // ID do gr√°fico
                            const string name=&quot;FiboChannel&quot;, // nome do canal
                            const int    point_index=0,      // √≠ndice do ponto de anc
                            datetime     time=0,             // coordenada do ponto de
                            double       price=0)            // coordenada do ponto de
  {
//--- se a posi√ß√£o do ponto n√£o est√° definida, mover para a barra atual tendo o pre√ßo 
   if(!time)
      time=TimeCurrent();
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- redefine o valor de erro
   ResetLastError();
//--- mover o ponto de ancoragem
   if(!ObjectMove(chart_ID,name,point_index,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao mover o ponto de ancoragem! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Excluir o canal¬†                                                 |
//+------------------------------------------------------------------+
bool FiboChannelDelete(const long   chart_ID=0,         // ID do gr√°fico
                       const string name=&quot;FiboChannel&quot;) // nome do canal
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir o canal
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,
            &quot;: falha ao excluir \&quot;Canal Fibonacci\&quot;! C√≥digo de erro = &quot;,GetLastError()
      return(false);
     }
//--- sucesso na execu√ß√£o</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
521
</p>
<pre><code class="language-mql5">
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Ver valores dos pontos de ancoragem do Canal Fibonacci e¬†        |
//| definir os valores padr√µes estabelecidos para os pontos vazio¬†   |
//+------------------------------------------------------------------+
void ChangeFiboChannelEmptyPoints(datetime &amp;time1,double &amp;price1,datetime &amp;time2,
                                  double &amp;price2,datetime &amp;time3,double &amp;price3)
  {
//--- se o tempo do segundo ponto (a direita)n√£o est√° definido, ser√° na barra atual
   if(!time2)
      time2=TimeCurrent();
//--- se o pre√ßo do segundo ponto n√£o est√° definido, ele ter√° valor Bid
   if(!price2)
      price2=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- se o tempo do primeiro ponto (a esquerda) n√£o est√° definido, est√° localizado 9 b
   if(!time1)
     {
      //--- array para receber o tempo de abertura das √∫ltimos 10 barras
      datetime temp[10];
      CopyTime(Symbol(),Period(),time2,10,temp);
      //--- definir o primeiro ponto 9 barras a esquerda do segundo
      time1=temp[0];
     }
//--- se o pre√ßo do primeiro ponto n√£o est√° definido, mover 300 pontos a mais do que o
   if(!price1)
      price1=price2+300*SymbolInfoDouble(Symbol(),SYMBOL_POINT);
//--- se o tempo do terceiro ponto n√£o est√° definido,ele coincide com o tempo do prime
   if(!time3)
      time3=time1;
//--- se o pre√ßo do terceiro ponto n√£o est√° definido, √© igual ao pre√ßo do segundo pont
   if(!price3)
      price3=price2;
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- verificar a exatid√£o dos par√¢metros de entrada
   if(InpDate1&lt;0 || InpDate1&gt;100 || InpPrice1&lt;0 || InpPrice1&gt;100 || 
      InpDate2&lt;0 || InpDate2&gt;100 || InpPrice2&lt;0 || InpPrice2&gt;100 || 
      InpDate3&lt;0 || InpDate3&gt;100 || InpPrice3&lt;0 || InpPrice3&gt;100)
     {
      Print(&quot;Erro! Valores incorretos dos par√¢metros de entrada!&quot;);
      return;
     }
//--- n√∫mero de barras vis√≠veis na janela do gr√°fico
   int bars=(int)ChartGetInteger(0,CHART_VISIBLE_BARS);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
522
</p>
<pre><code class="language-mql5">
//--- tamanho do array de pre√ßo
   int accuracy=1000;
//--- arrays para armazenar data e valores de pre√ßo para serem usados
//--- para definir e alterar as coordenadas de pontos de ancoragem do canal
   datetime date[];
   double   price[];
//--- aloca√ß√£o de mem√≥ria
   ArrayResize(date,bars);
   ArrayResize(price,accuracy);
//--- preencher o array das datas
   ResetLastError();
   if(CopyTime(Symbol(),Period(),0,bars,date)==-1)
     {
      Print(&quot;Falha ao copiar valores de tempo! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- preencher o array de pre√ßos
//--- encontrar os maiores e menores valores do gr√°fico
   double max_price=ChartGetDouble(0,CHART_PRICE_MAX);
   double min_price=ChartGetDouble(0,CHART_PRICE_MIN);
//--- definir uma etapa de mudan√ßa de um pre√ßo e preencher o array
   double step=(max_price-min_price)/accuracy;
   for(int i=0;i&lt;accuracy;i++)
      price[i]=min_price+i*step;
//--- definir pontos para desenhar o canal
   int d1=InpDate1*(bars-1)/100;
   int d2=InpDate2*(bars-1)/100;
   int d3=InpDate3*(bars-1)/100;
   int p1=InpPrice1*(accuracy-1)/100;
   int p2=InpPrice2*(accuracy-1)/100;
   int p3=InpPrice3*(accuracy-1)/100;
//--- criar Canal Fibonacci
   if(!FiboChannelCreate(0,InpName,0,date[d1],price[p1],date[d2],price[p2],date[d3],pr
      InpColor,InpStyle,InpWidth,InpBack,InpSelection,InpRayLeft,InpRayRight,InpHidden
     {
      return;
     }
//--- redesenhar o gr√°fico e esperar por um segundo
   ChartRedraw();
   Sleep(1000);
//--- agora, mover os pontos de ancoragem do canal
//--- contador de loop
   int h_steps=bars/10;
//--- mover o primeiro ponto de ancoragem
   for(int i=0;i&lt;h_steps;i++)
     {
      //--- usar o seguinte valor
      if(d1&gt;1)
         d1-=1;</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
523
</p>
<pre><code class="language-mql5">
      //--- mover o ponto
      if(!FiboChannelPointChange(0,InpName,0,date[d1],price[p1]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
      // 0.05 segundos de atraso
      Sleep(50);
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- contador de loop
   int v_steps=accuracy/10;
//--- mover o segundo ponto de ancoragem
   for(int i=0;i&lt;v_steps;i++)
     {
      //--- usar o seguinte valor
      if(p2&gt;1)
         p2-=1;
      //--- mover o ponto
      if(!FiboChannelPointChange(0,InpName,1,date[d2],price[p2]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- contador de loop
   v_steps=accuracy/15;
//--- mover o terceiro ponto de ancoragem
   for(int i=0;i&lt;v_steps;i++)
     {
      //--- usar o seguinte valor
      if(p3&lt;accuracy-1)
         p3+=1;
      //--- mover o ponto
      if(!FiboChannelPointChange(0,InpName,2,date[d3],price[p3]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
     }</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
524
</p>
<pre><code class="language-mql5">
//--- 1 segundo de atraso
   Sleep(1000);
//--- excluir o canal do gr√°fico
   FiboChannelDelete(0,InpName);
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
525
<h3>OBJ_EXPANSION</h3>
Fibonacci Expansion.
<h3>Observa√ß√£o</h3>
Para &quot;Expans√£o Fibonacci&quot;, √© poss√≠vel determinar o modo da continua√ß√£o da sua exibi√ß√£o para a
direita 
e/ou 
√† 
esquerda 
(de 
acordo 
com 
a 
propriedade 
<h3>OBJPROP_RAY_RIGHT</h3>
e
OBJPROP_RAY_LEFT).
Voc√™ tamb√©m pode especificar o n√∫mero de linhas de n√≠veis, os seus valores e cores.
<h3>Exemplo</h3>
O seguinte script cria e move a Expans√£o Fibonacci no gr√°fico. Fun√ß√µes especiais t√™m sido
desenvolvidas para criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas
fun√ß√µes &quot;as is&quot; em seus pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script desenha objeto gr√°fico \&quot;Expans√£o Fibonacci\&quot;.&quot;
#property description &quot;Coordenadas de ponto de ancoragem s√£o definidas em porcentagem 
#property description &quot;tamanho da janela do gr√°fico.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string          InpName=&quot;FiboExpansion&quot;;   // Nome do objeto
input int             InpDate1=10;               // Data do 1¬∫ ponto, %
input int             InpPrice1=55;              // Pre√ßo do 1¬∫ ponto, %
input int             InpDate2=30;               // Data do 2¬∫ ponto, %
input int             InpPrice2=10;              // Pre√ßo do 2¬∫ ponto, %</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
526
</p>
<pre><code class="language-mql5">
input int             InpDate3=80;               // Data do 3¬∫ ponto, %
input int             InpPrice3=75;              // Pre√ßo do 3¬∫ ponto, %
input color           InpColor=clrRed;           // Cor do objeto
input ENUM_LINE_STYLE InpStyle=STYLE_DASHDOTDOT; // Estilo de linhas 
input int             InpWidth=2;                // Largura das linha
input bool            InpBack=false;             // Objeto de fundo
input bool            InpSelection=true;         // Destaque para mover
input bool            InpRayLeft=false;          // Continua√ß√£o do objeto para a esque
input bool            InpRayRight=false;         // Continua√ß√£o do objeto para a direi
input bool            InpHidden=true;            // Ocultar na lista de objeto
input long            InpZOrder=0;               // Prioridade para clicar no mouse
//+------------------------------------------------------------------+
//| Criar Extens√£o Fibonacci pelas coordenadas fornecidas¬†           |
//+------------------------------------------------------------------+
bool FiboExpansionCreate(const long            chart_ID=0,           // ID de gr√°fico
                         const string          name=&quot;FiboExpansion&quot;, // nome do canal
                         const int             sub_window=0,         // √≠ndice da sub-
                         datetime              time1=0,              // primeiro ponto
                         double                price1=0,             // primeiro ponto
                         datetime              time2=0,              // segundo ponto 
                         double                price2=0,             // segundo ponto 
                         datetime              time3=0,              // terceiro ponto
                         double                price3=0,             // terceiro ponto
                         const color           clr=clrRed,           // cor do objeto
                         const ENUM_LINE_STYLE style=STYLE_SOLID,    // estilo das lin
                         const int             width=1,              // largura das li
                         const bool            back=false,           // no fundo
                         const bool            selection=true,       // destaque para 
                         const bool            ray_left=false,       // continua√ß√£o do
                         const bool            ray_right=false,      // continua√ß√£o do
                         const bool            hidden=true,          // ocultar na lis
                         const long            z_order=0)            // prioridade par
  {
//--- definir coordenadas de pontos de ancoragem, se eles n√£o est√£o definidos
   ChangeFiboExpansionEmptyPoints(time1,price1,time2,price2,time3,price3);
//--- redefine o valor de erro
   ResetLastError();
//--- Criar Extens√£o Fibonacci pelas coordenadas fornecidas
   if(!ObjectCreate(chart_ID,name,OBJ_EXPANSION,sub_window,time1,price1,time2,price2,t
     {
      Print(__FUNCTION__,
            &quot;: falha para criar \&quot;Extens√£o Fibonacci\&quot;! C√≥digo de erro = &quot;,GetLastErro
      return(false);
     }
//--- definir cor do objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir o estilo da linha
   ObjectSetInteger(chart_ID,name,OBJPROP_STYLE,style);
//--- definir a largura das linhas</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
527
</p>
<pre><code class="language-mql5">
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,width);
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- habilitar (true) ou desabilitar (false) o modo de preenchimento do canal
//--- ao criar um objeto gr√°fico usando a fun√ß√£o ObjectCreate, o objeto n√£o pode ser
//--- destacado e movimentado por padr√£o. Dentro deste m√©todo, o par√¢metro de sele√ß√£o
//--- √© verdade por padr√£o, tornando poss√≠vel destacar e mover o objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- habilitar (true) ou desabilitar (false) o modo de continua√ß√£o da exibi√ß√£o do obj
   ObjectSetInteger(chart_ID,name,OBJPROP_RAY_LEFT,ray_left);
//--- habilitar (true) ou desabilitar (false) o modo de continua√ß√£o da exibi√ß√£o do obj
   ObjectSetInteger(chart_ID,name,OBJPROP_RAY_RIGHT,ray_right);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Definir o n√∫mero de n√≠veis e seus par√¢metros¬†                    |
//+------------------------------------------------------------------+
bool FiboExpansionLevelsSet(int             levels,               // n√∫mero de linhas 
                            double          &amp;values[],            // valores de linhas
                            color           &amp;colors[],            // cor das linhas do
                            ENUM_LINE_STYLE &amp;styles[],            // estilo das linhas
                            int             &amp;widths[],            // largura das linha
                            const long      chart_ID=0,           // ID do gr√°fico
                            const string    name=&quot;FiboExpansion&quot;) // nome do objeto
  {
//--- verificar tamanhos do array
   if(levels!=ArraySize(colors) || levels!=ArraySize(styles) ||
      levels!=ArraySize(widths) || levels!=ArraySize(widths))
     {
      Print(__FUNCTION__,&quot;: comprimento do array n√£o corresponder ao n√∫mero de n√≠veis,
      return(false);
     }
//--- definir o n√∫mero de n√≠veis
   ObjectSetInteger(chart_ID,name,OBJPROP_LEVELS,levels);
//--- definir as propriedades de n√≠veis no loop
   for(int i=0;i&lt;levels;i++)
     {
      //--- valor do n√≠vel
      ObjectSetDouble(chart_ID,name,OBJPROP_LEVELVALUE,i,values[i]);
      //--- cor do n√≠vel
      ObjectSetInteger(chart_ID,name,OBJPROP_LEVELCOLOR,i,colors[i]);
      //--- estilo de n√≠vel
      ObjectSetInteger(chart_ID,name,OBJPROP_LEVELSTYLE,i,styles[i]);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
528
</p>
<pre><code class="language-mql5">
      //--- largura de n√≠vel
      ObjectSetInteger(chart_ID,name,OBJPROP_LEVELWIDTH,i,widths[i]);
      //--- descri√ß√£o de n√≠vel
      ObjectSetString(chart_ID,name,OBJPROP_LEVELTEXT,i,&quot;FE &quot;+DoubleToString(100*value
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mover ponto de ancoragem da Expans√£o Fibonacci¬†                  |
//+------------------------------------------------------------------+
bool FiboExpansionPointChange(const long   chart_ID=0,           // ID do gr√°fico
                              const string name=&quot;FiboExpansion&quot;, // nome do objeto
                              const int    point_index=0,        // √≠ndice do ponto de
                              datetime     time=0,               // coordenada do pont
                              double       price=0)              // coordenada do pont
  {
//--- se a posi√ß√£o do ponto n√£o est√° definida, mover para a barra atual tendo o pre√ßo 
   if(!time)
      time=TimeCurrent();
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- redefine o valor de erro
   ResetLastError();
//--- mover o ponto de ancoragem
   if(!ObjectMove(chart_ID,name,point_index,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao mover o ponto de ancoragem! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Excluir Expans√£o Fibonacci¬†                                      |
//+------------------------------------------------------------------+
bool FiboExpansionDelete(const long   chart_ID=0,           // ID do gr√°fico
                         const string name=&quot;FiboExpansion&quot;) // nome do objeto
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir o objeto
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,
            &quot;: falha ao excluir \&quot;Expans√£o Fibonacci\&quot;! C√≥digo de erro = &quot;,GetLastErro
      return(false);
     }</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
529
</p>
<pre><code class="language-mql5">
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| V√™ valores dos pontos de ancoragem da Expans√£o Fibonacci e¬†      |
//| definir os valores padr√µes estabelecidos para os pontos vazio¬†   |
//+------------------------------------------------------------------+
void ChangeFiboExpansionEmptyPoints(datetime &amp;time1,double &amp;price1,datetime &amp;time2,
                                    double &amp;price2,datetime &amp;time3,double &amp;price3)
  {
//--- se o tempo do terceiro ponto (a direita)n√£o est√° definido, ser√° na barra atual
   if(!time3)
      time3=TimeCurrent();
//--- se o pre√ßo do terceiro ponto n√£o est√° definido, ele ter√° valor Bid
   if(!price3)
      price3=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- se o tempo do primeiro ponto (a esquerda) n√£o est√° definido, ele est√° localizado
//--- array para receber o tempo de abertura das √∫ltimas 10 barras
   datetime temp[];
   ArrayResize(temp,10);
   if(!time1)
     {
      CopyTime(Symbol(),Period(),time3,10,temp);
      //--- definir o primeiro ponto 9 barras a esquerda do segundo
      time1=temp[0];
     }
//--- se o pre√ßo do primeiro ponto n√£o est√° definido, √© igual ao terceiro ponto
   if(!price1)
      price1=price3;
//--- se o tempo do segundo ponto n√£o est√° definido, est√° localizado a 7 barras deixad
   if(!time2)
      time2=temp[2];
//--- se o pre√ßo do primeiro ponto n√£o est√° definido, mover 250 pontos a mais do que o
   if(!price2)
      price2=price1-250*SymbolInfoDouble(Symbol(),SYMBOL_POINT);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- verificar a exatid√£o dos par√¢metros de entrada
   if(InpDate1&lt;0 || InpDate1&gt;100 || InpPrice1&lt;0 || InpPrice1&gt;100 || 
      InpDate2&lt;0 || InpDate2&gt;100 || InpPrice2&lt;0 || InpPrice2&gt;100 || 
      InpDate3&lt;0 || InpDate3&gt;100 || InpPrice3&lt;0 || InpPrice3&gt;100)
     {
      Print(&quot;Erro! Valores incorretos dos par√¢metros de entrada!&quot;);
      return;
     }</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
530
</p>
<pre><code class="language-mql5">
//--- n√∫mero de barras vis√≠veis na janela do gr√°fico
   int bars=(int)ChartGetInteger(0,CHART_VISIBLE_BARS);
//--- tamanho do array de pre√ßo
   int accuracy=1000;
//--- arrays para armazenar data e valores de pre√ßo para serem usados
//--- para definir e alterar as coordenadas de pontos de ancoragem
   datetime date[];
   double   price[];
//--- aloca√ß√£o de mem√≥ria
   ArrayResize(date,bars);
   ArrayResize(price,accuracy);
//--- preencher o array das datas
   ResetLastError();
   if(CopyTime(Symbol(),Period(),0,bars,date)==-1)
     {
      Print(&quot;Falha ao copiar valores de tempo! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- preencher o array de pre√ßos
//--- encontrar os maiores e menores valores do gr√°fico
   double max_price=ChartGetDouble(0,CHART_PRICE_MAX);
   double min_price=ChartGetDouble(0,CHART_PRICE_MIN);
//--- definir uma etapa de mudan√ßa de um pre√ßo e preencher o array
   double step=(max_price-min_price)/accuracy;
   for(int i=0;i&lt;accuracy;i++)
      price[i]=min_price+i*step;
//--- definir os pontos para desenhar Expans√£o Fibonacci
   int d1=InpDate1*(bars-1)/100;
   int d2=InpDate2*(bars-1)/100;
   int d3=InpDate3*(bars-1)/100;
   int p1=InpPrice1*(accuracy-1)/100;
   int p2=InpPrice2*(accuracy-1)/100;
   int p3=InpPrice3*(accuracy-1)/100;
//--- criar Expans√£o Fibonacci
   if(!FiboExpansionCreate(0,InpName,0,date[d1],price[p1],date[d2],price[p2],date[d3],
      InpColor,InpStyle,InpWidth,InpBack,InpSelection,InpRayLeft,InpRayRight,InpHidden
     {
      return;
     }
//--- redesenhar o gr√°fico e esperar por um segundo
   ChartRedraw();
   Sleep(1000);
//--- agora, mover os pontos de ancoragem
//--- contador de loop
   int v_steps=accuracy/10;
//--- mover o primeiro ponto de ancoragem
   for(int i=0;i&lt;v_steps;i++)
     {
      //--- usar o seguinte valor</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
531
</p>
<pre><code class="language-mql5">
      if(p1&gt;1)
         p1-=1;
      //--- mover o ponto
      if(!FiboExpansionPointChange(0,InpName,0,date[d1],price[p1]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- contador de loop
   v_steps=accuracy/2;
//--- mover o terceiro ponto de ancoragem
   for(int i=0;i&lt;v_steps;i++)
     {
      //--- usar o seguinte valor
      if(p3&gt;1)
         p3-=1;
      //--- mover o ponto
      if(!FiboExpansionPointChange(0,InpName,2,date[d3],price[p3]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- contador de loop
   v_steps=accuracy*4/5;
//--- mover o segundo ponto de ancoragem
   for(int i=0;i&lt;v_steps;i++)
     {
      //--- usar o seguinte valor
      if(p2&lt;accuracy-1)
         p2+=1;
      //--- mover o ponto
      if(!FiboExpansionPointChange(0,InpName,1,date[d2],price[p2]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
     }</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
532
</p>
<pre><code class="language-mql5">
//--- 1 segundo de atraso
   Sleep(1000);
//--- excluir a etiqueta do gr√°fico
   FiboExpansionDelete(0,InpName);
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
533
<h3>OBJ_ELLIOTWAVE5</h3>
Onda M√≥vel Elliott.
<h3>Observa√ß√£o</h3>
Para &quot;Onda M√≥vel Elliott&quot;, √© poss√≠vel habilitar/desabilitar o modo de pontos de conex√£o das linhas
(propriedade OBJPROP_DRAWLINES), bem como definir o n√≠vel de posicionamento da onda (a partir
da enumera√ß√£o ENUM_ELLIOT_WAVE_DEGREE).
<h3>Exemplo</h3>
[parcial]O seguinte script cria e move onda m√≥vel Elliott no gr√°fico. Fun√ß√µes especiais t√™m sido
desenvolvidas para criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas
fun√ß√µes &quot;as is&quot; em seus pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script desenha \&quot;Onda M√≥vel Elliott\&quot;.&quot;
#property description &quot;Coordenadas dos pontos de ancoragem s√£o definidos em percentage
#property description &quot;janela do gr√°fico.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string                  InpName=&quot;ElliotWave5&quot;;   // Nome do objeto
input int                     InpDate1=10;             // Data do 1¬∫ ponto, %
input int                     InpPrice1=90;            // Pre√ßo do 1¬∫ ponto, %
input int                     InpDate2=20;             // Data do 2¬∫ ponto, %
input int                     InpPrice2=40;            // Pre√ßo do 2¬∫ ponto, %
input int                     InpDate3=30;             // Data do 3¬∫ ponto, %</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
534
</p>
<pre><code class="language-mql5">
input int                     InpPrice3=60;            // Pre√ßo do 3¬∫ ponto, %
input int                     InpDate4=40;             // Data do 4¬∫ ponto, %
input int                     InpPrice4=10;            // Pre√ßo do 4¬∫ ponto, %
input int                     InpDate5=60;             // Data do 5¬∫ ponto, %
input int                     InpPrice5=40;            // Pre√ßo do 5¬∫ ponto, %
input ENUM_ELLIOT_WAVE_DEGREE InpDegree=ELLIOTT_MINOR; // N√≠vel
input bool                    InpDrawLines=true;       // Exibindo as linhas
input color                   InpColor=clrRed;         // Cor das linhas
input ENUM_LINE_STYLE         InpStyle=STYLE_DASH;     // Estilo das linhas
input int                     InpWidth=2;              // Largura das linha
input bool                    InpBack=false;           // Objeto de fundo
input bool                    InpSelection=true;       // Destaque para mover
input bool                    InpHidden=true;          // Ocultar na lista de objetos
input long                    InpZOrder=0;             // Prioridade para clique do mo
//+------------------------------------------------------------------+
//| Criar &quot;Onda M√≥vel Elliott&quot; pelas coordenadas fornecidas¬†         |
//+------------------------------------------------------------------+
bool ElliotWave5Create(const long                    chart_ID=0,              // ID do
                       const string                  name=&quot;ElliotWave3&quot;,      // nome 
                       const int                     sub_window=0,            // √≠ndic
                       datetime                      time1=0,                 // prime
                       double                        price1=0,                //primei
                       datetime                      time2=0,                 // segun
                       double                        price2=0,                // segun
                       datetime                      time3=0,                 // terce
                       double                        price3=0,                // terce
                       datetime                      time4=0,                 // quart
                       double                        price4=0,                // quart
                       datetime                      time5=0,                 // quint
                       double                        price5=0,                // quint
                       const ENUM_ELLIOT_WAVE_DEGREE degree=ELLIOTT_MINUETTE, // grau
                       const bool                    draw_lines=true,         // exibi
                       const color                   clr=clrRed,              // cor d
                       const ENUM_LINE_STYLE         style=STYLE_SOLID,       // estil
                       const int                     width=1,                 // largu
                       const bool                    back=false,              // no fu
                       const bool                    selection=true,          // desta
                       const bool                    hidden=true,             // ocult
                       const long                    z_order=0)               // prior
  {
//--- definir coordenadas de pontos de ancoragem, se eles n√£o est√£o definidos
   ChangeElliotWave5EmptyPoints(time1,price1,time2,price2,time3,price3,time4,price4,ti
//--- redefine o valor de erro
   ResetLastError();
//--- Criar &quot;Onda M√≥vel Elliott&quot; pelas coordenadas fornecidas
   if(!ObjectCreate(chart_ID,name,OBJ_ELLIOTWAVE5,sub_window,time1,price1,time2,price2
      price3,time4,price4,time5,price5))
     {
      Print(__FUNCTION__,</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
535
</p>
<pre><code class="language-mql5">
            &quot;: falha ao criar \&quot;&quot;Onda M√≥vel Elliott&quot;\&quot;! C√≥digo de erro = &quot;,GetLastErro
      return(false);
     }
//--- definir grau (tamanho da onda)
   ObjectSetInteger(chart_ID,name,OBJPROP_DEGREE,degree);
//--- habilitar (true) ou desabilitar (false) o modo de exibi√ß√£o das linhas
   ObjectSetInteger(chart_ID,name,OBJPROP_DRAWLINES,draw_lines);
//--- definir cor do objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir o estilo da linha
   ObjectSetInteger(chart_ID,name,OBJPROP_STYLE,style);
//--- definir a largura das linhas
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,width);
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- habilitar (true) ou desabilitar (false) o modo de preenchimento do canal
//--- ao criar um objeto gr√°fico usando a fun√ß√£o ObjectCreate, o objeto n√£o pode ser
//--- destacado e movimentado por padr√£o. Dentro deste m√©todo, o par√¢metro de sele√ß√£o
//--- √© verdade por padr√£o, tornando poss√≠vel destacar e mover o objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Move o ponto de ancoragem da Onda M√≥vel Elliott¬†                 |
//+------------------------------------------------------------------+
bool ElliotWave5PointChange(const long   chart_ID=0,         // ID do gr√°fico
                            const string name=&quot;ElliotWave5&quot;, // nome do objeto
                            const int    point_index=0,      // √≠ndice do ponto de anc
                            datetime     time=0,             // coordenada do ponto de
                            double       price=0)            // coordenada do ponto de
  {
//--- se a posi√ß√£o do ponto n√£o est√° definida, mover para a barra atual tendo o pre√ßo 
   if(!time)
      time=TimeCurrent();
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- redefine o valor de erro
   ResetLastError();
//--- mover o ponto de ancoragem
   if(!ObjectMove(chart_ID,name,point_index,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao mover o ponto de ancoragem! C√≥digo de erro = &quot;,GetLastError())</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
536
</p>
<pre><code class="language-mql5">
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Excluir Onda M√≥vel Elliott¬†                                      |
//+------------------------------------------------------------------+
bool ElliotWave5Delete(const long   chart_ID=0,         // ID do gr√°fico
                       const string name=&quot;ElliotWave5&quot;) // nome do objeto
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir o objeto
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,
            &quot;: falha ao excluir \&quot;&quot;Onda M√≥vel Elliott&quot;\&quot;! C√≥digo de erro = &quot;,GetLastEr
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Verificar valores de pontos de ancoragem da Onda M√≥vel Elliott¬†  |
//| definir os valores padr√µes estabelecidos para aqueles vazios¬†    |
//+------------------------------------------------------------------+
void ChangeElliotWave5EmptyPoints(datetime &amp;time1,double &amp;price1,
                                  datetime &amp;time2,double &amp;price2,
                                  datetime &amp;time3,double &amp;price3,
                                  datetime &amp;time4,double &amp;price4,
                                  datetime &amp;time5,double &amp;price5)
  {
//--- array para receber o tempo de abertura das √∫ltimas 10 barras
   datetime temp[];
   ArrayResize(temp,10);
//--- receber dados
   CopyTime(Symbol(),Period(),TimeCurrent(),10,temp);
//--- receber o valor de um ponto no gr√°fico atual
   double point=SymbolInfoDouble(Symbol(),SYMBOL_POINT);
//--- se o tempo do primeiro ponto n√£o est√° definido, ser√£o 9 barras a esquerda a part
   if(!time1)
      time1=temp[0];
//--- se o pre√ßo do primeiro ponto n√£o est√° definido, ele ter√° valor Bid
   if(!price1)
      price1=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- se o tempo do primeiro ponto n√£o est√° definido, ser√£o 7 barras a esquerda a part
   if(!time2)
      time2=temp[2];</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
537
</p>
<pre><code class="language-mql5">
//--- se o pre√ßo do primeiro ponto n√£o est√° definido, mover 300 pontos a mais do que o
   if(!price2)
      price2=price1-300*point;
//--- se o tempo do primeiro ponto n√£o est√° definido, ser√£o 5 barras a esquerda a part
   if(!time3)
      time3=temp[4];
//--- se o pre√ßo do primeiro ponto n√£o est√° definido, mover 250 pontos a mais do que o
   if(!price3)
      price3=price1-250*point;
//--- se o tempo do primeiro ponto n√£o est√° definido, ser√£o 3 barras a esquerda a part
   if(!time4)
      time4=temp[6];
//--- se o pre√ßo do primeiro ponto n√£o est√° definido, mover 550 pontos a mais do que o
   if(!price4)
      price4=price1-550*point;
//--- se o tempo do primeiro ponto n√£o est√° definido, ser√° na barra atual
   if(!time5)
      time5=temp[9];
//--- se o pre√ßo do primeiro ponto n√£o est√° definido, mover 450 pontos a mais do que o
   if(!price5)
      price5=price1-450*point;
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- verificar a exatid√£o dos par√¢metros de entrada
   if(InpDate1&lt;0 || InpDate1&gt;100 || InpPrice1&lt;0 || InpPrice1&gt;100 || 
      InpDate2&lt;0 || InpDate2&gt;100 || InpPrice2&lt;0 || InpPrice2&gt;100 || 
      InpDate3&lt;0 || InpDate3&gt;100 || InpPrice3&lt;0 || InpPrice3&gt;100 || 
      InpDate4&lt;0 || InpDate4&gt;100 || InpPrice4&lt;0 || InpPrice4&gt;100 || 
      InpDate5&lt;0 || InpDate5&gt;100 || InpPrice5&lt;0 || InpPrice5&gt;100)
     {
      Print(&quot;Erro! Valores incorretos dos par√¢metros de entrada!&quot;);
      return;
     }
//--- n√∫mero de barras vis√≠veis na janela do gr√°fico
   int bars=(int)ChartGetInteger(0,CHART_VISIBLE_BARS);
//--- tamanho do array de pre√ßo
   int accuracy=1000;
//--- arrays para armazenar data e valores de pre√ßo para serem usados
//--- para definir e alterar as coordenadas de pontos de ancoragem
   datetime date[];
   double   price[];
//--- aloca√ß√£o de mem√≥ria
   ArrayResize(date,bars);
   ArrayResize(price,accuracy);
//--- preencher o array das datas</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
538
</p>
<pre><code class="language-mql5">
   ResetLastError();
   if(CopyTime(Symbol(),Period(),0,bars,date)==-1)
     {
      Print(&quot;Falha ao copiar valores de tempo! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- preencher o array de pre√ßos
//--- encontrar os maiores e menores valores do gr√°fico
   double max_price=ChartGetDouble(0,CHART_PRICE_MAX);
   double min_price=ChartGetDouble(0,CHART_PRICE_MIN);
//--- definir uma etapa de mudan√ßa de um pre√ßo e preencher o array
   double step=(max_price-min_price)/accuracy;
   for(int i=0;i&lt;accuracy;i++)
      price[i]=min_price+i*step;
//--- definir os pontos para desenhar a Onda M√≥vel Elliott
   int d1=InpDate1*(bars-1)/100;
   int d2=InpDate2*(bars-1)/100;
   int d3=InpDate3*(bars-1)/100;
   int d4=InpDate4*(bars-1)/100;
   int d5=InpDate5*(bars-1)/100;
   int p1=InpPrice1*(accuracy-1)/100;
   int p2=InpPrice2*(accuracy-1)/100;
   int p3=InpPrice3*(accuracy-1)/100;
   int p4=InpPrice4*(accuracy-1)/100;
   int p5=InpPrice5*(accuracy-1)/100;
//--- Criar Onda M√≥vel Elliott
   if(!ElliotWave5Create(0,InpName,0,date[d1],price[p1],date[d2],price[p2],date[d3],pr
      date[d4],price[p4],date[d5],price[p5],InpDegree,InpDrawLines,InpColor,InpStyle,I
      InpBack,InpSelection,InpHidden,InpZOrder))
     {
      return;
     }
//--- redesenhar o gr√°fico e esperar por um segundo
   ChartRedraw();
   Sleep(1000);
//--- agora, mover os pontos de ancoragem
//--- contador de loop
   int v_steps=accuracy/5;
//--- mover o quinto ponto de ancoragem
   for(int i=0;i&lt;v_steps;i++)
     {
      //--- usar o seguinte valor
      if(p5&lt;accuracy-1)
         p5+=1;
      //--- mover o ponto
      if(!ElliotWave5PointChange(0,InpName,4,date[d5],price[p5]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
539
</p>
<pre><code class="language-mql5">
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- contador de loop
   v_steps=accuracy/5;
//--- mover o segundo e terceiro ponto de ancoragem
   for(int i=0;i&lt;v_steps;i++)
     {
      //--- usar os seguintes valores
      if(p2&lt;accuracy-1)
         p2+=1;
      if(p3&gt;1)
         p3-=1;
      //--- deslocar os pontos
      if(!ElliotWave5PointChange(0,InpName,1,date[d2],price[p2]))
         return;
      if(!ElliotWave5PointChange(0,InpName,2,date[d3],price[p3]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- contador de loop
   v_steps=accuracy*4/5;
//--- mover o primeiro e quarto ponto de ancoragem
   for(int i=0;i&lt;v_steps;i++)
     {
      //--- usar os seguintes valores
      if(p1&gt;1)
         p1-=1;
      if(p4&lt;accuracy-1)
         p4+=1;
      //--- deslocar os pontos
      if(!ElliotWave5PointChange(0,InpName,0,date[d1],price[p1]))
         return;
      if(!ElliotWave5PointChange(0,InpName,3,date[d4],price[p4]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
540
</p>
<pre><code class="language-mql5">
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- excluir a etiqueta do gr√°fico
   ElliotWave5Delete(0,InpName);
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
541
<h3>OBJ_ELLIOTWAVE3</h3>
Corre√ß√£o Onda Elliott.
<h3>Observa√ß√£o</h3>
Para &quot;Corre√ß√£o Onda Elliott&quot;, √© poss√≠vel habilitar/desabilitar o modo de pontos de conex√£o das linhas
(propriedade OBJPROP_DRAWLINES), bem como definir o n√≠vel de posicionamento da onda (a partir
da enumera√ß√£o ENUM_ELLIOT_WAVE_DEGREE).
<h3>Exemplo</h3>
O seguinte script cria e move a corre√ß√£o da onda Elliott no gr√°fico. Fun√ß√µes especiais t√™m sido
desenvolvidas para criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas
fun√ß√µes &quot;as is&quot; em seus pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script desenha objeto gr√°fico \&quot;Corre√ß√£o da Onda Elliott\&quot;.&quot;
#property description &quot;Coordenadas dos pontos de ancoragem s√£o definidos em percentage
#property description &quot;tamanho.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string                  InpName=&quot;ElliotWave3&quot;;   // Nome do objeto
input int                     InpDate1=10;             // Data do 1¬∫ ponto, %
input int                     InpPrice1=90;            // Pre√ßo do 1¬∫ ponto, %
input int                     InpDate2=30;             // Data do 2¬∫ ponto, %
input int                     InpPrice2=10;            // Pre√ßo do 2¬∫ ponto, %
input int                     InpPrice2=10;            // Data do 3¬∫ ponto, %</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
542
</p>
<pre><code class="language-mql5">
input int                     InpPrice3=40;            // Pre√ßo do 3¬∫ ponto, %
input ENUM_ELLIOT_WAVE_DEGREE InpDegree=ELLIOTT_MINOR; // N√≠vel
input bool                    InpDrawLines=true;       // Exibindo as linhas
input color                   InpColor=clrRed;         // Cor das linhas
input ENUM_LINE_STYLE         InpStyle=STYLE_DASH;     // Estilo das linhas
input int                     InpWidth=2;              // Largura das linha
input bool                    InpBack=false;           // Objeto de fundo
input bool                    InpSelection=true;       // Destaque para mover
input bool                    InpHidden=true;          // Ocultar na lista de objetos
input long                    InpZOrder=0;             // Prioridade para clique do mo
//+------------------------------------------------------------------+
//| Criar &quot;Corre√ß√£o da Onda Elliott&quot; pelas coordenadas fornecidas¬†   |
//+------------------------------------------------------------------+
bool ElliotWave3Create(const long                    chart_ID=0,              // ID do
                       const string                  name=&quot;ElliotWave3&quot;,      // nome 
                       const int                     sub_window=0,            // √≠ndic
                       datetime                      time1=0,                 // prime
                       double                        price1=0,                //primei
                       datetime                      time2=0,                 // segun
                       double                        price2=0,                // segun
                       datetime                      time3=0,                 // terce
                       double                        price3=0,                // terce
                       const ENUM_ELLIOT_WAVE_DEGREE degree=ELLIOTT_MINUETTE, // grau
                       const bool                    draw_lines=true,         // exibi
                       const color                   clr=clrRed,              // cor d
                       const ENUM_LINE_STYLE         style=STYLE_SOLID,       // estil
                       const int                     width=1,                 // largu
                       const bool                    back=false,              // no fu
                       const bool                    selection=true,          // desta
                       const bool                    hidden=true,             // ocult
                       const long                    z_order=0)               // prior
  {
//--- definir coordenadas de pontos de ancoragem, se eles n√£o est√£o definidos
   ChangeElliotWave3EmptyPoints(time1,price1,time2,price2,time3,price3);
//--- redefine o valor de erro
   ResetLastError();
//--- Criar &quot;Corre√ß√£o da Onda Elliott&quot; pelas coordenadas fornecidas
   if(!ObjectCreate(chart_ID,name,OBJ_ELLIOTWAVE3,sub_window,time1,price1,time2,price2
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar \&quot;&quot;Corre√ß√£o da Onda Elliott&quot;\&quot;! C√≥digo de erro = &quot;,GetLa
      return(false);
     }
//--- definir grau (tamanho da onda)
   ObjectSetInteger(chart_ID,name,OBJPROP_DEGREE,degree);
//--- habilitar (true) ou desabilitar (false) o modo de exibi√ß√£o das linhas
   ObjectSetInteger(chart_ID,name,OBJPROP_DRAWLINES,draw_lines);
//--- definir cor do objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
543
</p>
<pre><code class="language-mql5">
//--- definir o estilo da linha
   ObjectSetInteger(chart_ID,name,OBJPROP_STYLE,style);
//--- definir a largura das linhas
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,width);
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- habilitar (true) ou desabilitar (false) o modo de preenchimento do canal
//--- ao criar um objeto gr√°fico usando a fun√ß√£o ObjectCreate, o objeto n√£o pode ser
//--- destacado e movimentado por padr√£o. Dentro deste m√©todo, o par√¢metro de sele√ß√£o
//--- √© verdade por padr√£o, tornando poss√≠vel destacar e mover o objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Move o ponto de ancoragem de Corre√ß√£o da Elliott¬†                |
//+------------------------------------------------------------------+
bool ElliotWave3PointChange(const long   chart_ID=0,         // ID do gr√°fico
                            const string name=&quot;ElliotWave3&quot;, // nome do objeto
                            const int    point_index=0,      // √≠ndice do ponto de anc
                            datetime     time=0,             // coordenada do ponto de
                            double       price=0)            // coordenada do ponto de
  {
//--- se a posi√ß√£o do ponto n√£o est√° definida, mover para a barra atual tendo o pre√ßo 
   if(!time)
      time=TimeCurrent();
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- redefine o valor de erro
   ResetLastError();
//--- mover o ponto de ancoragem
   if(!ObjectMove(chart_ID,name,point_index,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao mover o ponto de ancoragem! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Excluir Corre√ß√£o da Onda Elliott¬†                                |
//+------------------------------------------------------------------+
bool ElliotWave3Delete(const long   chart_ID=0,         // ID do gr√°fico</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
544
</p>
<pre><code class="language-mql5">
                       const string name=&quot;ElliotWave3&quot;) // nome do objeto
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir o objeto
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,
            &quot;: falha ao excluir \&quot;&quot;Corre√ß√£o da Onda Elliott&quot;\&quot;! C√≥digo de erro = &quot;,Get
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Verificar valores de pontos de ancoragem da Corre√ß√£o Onda Elliott|
//| e os valores padr√£o estabelecidos para os pontos vazios¬†         |
//+------------------------------------------------------------------+
void ChangeElliotWave3EmptyPoints(datetime &amp;time1,double &amp;price1,
                                  datetime &amp;time2,double &amp;price2,
                                  datetime &amp;time3,double &amp;price3)
  {
//--- array para receber o tempo de abertura das √∫ltimas 10 barras
   datetime temp[];
   ArrayResize(temp,10);
//--- receber dados
   CopyTime(Symbol(),Period(),TimeCurrent(),10,temp);
//--- receber o valor de um ponto no gr√°fico atual
   double point=SymbolInfoDouble(Symbol(),SYMBOL_POINT);
//--- se o tempo do primeiro ponto n√£o est√° definido, ser√£o 9 barras a esquerda a part
   if(!time1)
      time1=temp[0];
//--- se o pre√ßo do primeiro ponto n√£o est√° definido, ele ter√° valor Bid
   if(!price1)
      price1=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- se o tempo do primeiro ponto n√£o est√° definido, ser√£o 5 barras a esquerda a part
   if(!time2)
      time2=temp[4];
//--- se o pre√ßo do primeiro ponto n√£o est√° definido, mover 300 pontos a mais do que o
   if(!price2)
      price2=price1-300*point;
//--- se o tempo do primeiro ponto n√£o est√° definido, ser√° uma barra a esquerda a part
   if(!time3)
      time3=temp[8];
//--- se o pre√ßo do primeiro ponto n√£o est√° definido, mover 200 pontos a mais do que o
   if(!price3)
      price3=price1-200*point;
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
545
</p>
<pre><code class="language-mql5">
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- verificar a exatid√£o dos par√¢metros de entrada
   if(InpDate1&lt;0 || InpDate1&gt;100 || InpPrice1&lt;0 || InpPrice1&gt;100 || 
      InpDate2&lt;0 || InpDate2&gt;100 || InpPrice2&lt;0 || InpPrice2&gt;100 || 
      InpDate3&lt;0 || InpDate3&gt;100 || InpPrice3&lt;0 || InpPrice3&gt;100)
     {
      Print(&quot;Erro! Valores incorretos dos par√¢metros de entrada!&quot;);
      return;
     }
//--- n√∫mero de barras vis√≠veis na janela do gr√°fico
   int bars=(int)ChartGetInteger(0,CHART_VISIBLE_BARS);
//--- tamanho do array de pre√ßo
   int accuracy=1000;
//--- arrays para armazenar data e valores de pre√ßo para serem usados
//--- para definir e alterar as coordenadas de pontos de ancoragem
   datetime date[];
   double   price[];
//--- aloca√ß√£o de mem√≥ria
   ArrayResize(date,bars);
   ArrayResize(price,accuracy);
//--- preencher o array das datas
   ResetLastError();
   if(CopyTime(Symbol(),Period(),0,bars,date)==-1)
     {
      Print(&quot;Falha ao copiar valores de tempo! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- preencher o array de pre√ßos
//--- encontrar os maiores e menores valores do gr√°fico
   double max_price=ChartGetDouble(0,CHART_PRICE_MAX);
   double min_price=ChartGetDouble(0,CHART_PRICE_MIN);
//--- definir uma etapa de mudan√ßa de um pre√ßo e preencher o array
   double step=(max_price-min_price)/accuracy;
   for(int i=0;i&lt;accuracy;i++)
      price[i]=min_price+i*step;
//--- definir os pontos para desenhar a Corre√ß√£o da Onda Elliott
   int d1=InpDate1*(bars-1)/100;
   int d2=InpDate2*(bars-1)/100;
   int d3=InpDate3*(bars-1)/100;
   int p1=InpPrice1*(accuracy-1)/100;
   int p2=InpPrice2*(accuracy-1)/100;
   int p3=InpPrice3*(accuracy-1)/100;
//--- Criar Corre√ß√£o da Onda Elliott
   if(!ElliotWave3Create(0,InpName,0,date[d1],price[p1],date[d2],price[p2],date[d3],pr
      InpDegree,InpDrawLines,InpColor,InpStyle,InpWidth,InpBack,InpSelection,InpHidden
     {</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
546
</p>
<pre><code class="language-mql5">
      return;
     }
//--- redesenhar o gr√°fico e esperar por um segundo
   ChartRedraw();
   Sleep(1000);
//--- agora, mover os pontos de ancoragem
//--- contador de loop
   int v_steps=accuracy/5;
//--- mover o terceiro ponto de ancoragem
   for(int i=0;i&lt;v_steps;i++)
     {
      //--- usar o seguinte valor
      if(p3&lt;accuracy-1)
         p3+=1;
      //--- mover o ponto
      if(!ElliotWave3PointChange(0,InpName,2,date[d3],price[p3]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- contador de loop
   v_steps=accuracy*4/5;
//--- movimentar o primeiro e segundo ponto de ancoragem
   for(int i=0;i&lt;v_steps;i++)
     {
      //--- usar os seguintes valores
      if(p1&gt;1)
         p1-=1;
      if(p2&lt;accuracy-1)
         p2+=1;
      //--- deslocar os pontos
      if(!ElliotWave3PointChange(0,InpName,0,date[d1],price[p1]))
         return;
      if(!ElliotWave3PointChange(0,InpName,1,date[d2],price[p2]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- excluir a etiqueta do gr√°fico</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
547
</p>
<pre><code class="language-mql5">
   ElliotWave3Delete(0,InpName);
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
548
<h3>OBJ_RECTANGLE</h3>
Ret√¢ngulo.
<h3>Observa√ß√£o</h3>
Para ret√¢ngulo, o modo de preenchimento com a cor pode ser definida usando a propriedade
OBJPROP_FILL.
<h3>Exemplo</h3>
O seguinte script cria e move o ret√¢ngulo no gr√°fico. Fun√ß√µes especiais t√™m sido desenvolvidas para
criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas fun√ß√µes &quot;as is&quot; em seus
pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script cria o ret√¢ngulo no gr√°fico.&quot;
#property description &quot;Coordenadas de ponto de ancoragem s√£o definidas em porcentagem 
#property description &quot;porcentagem do tamanho da janela de gr√°fico.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string          InpName=&quot;Rectangle&quot;; // Nome do ret√¢ngulo
input int             InpDate1=40;         // Data do 1¬∫ ponto, %
input int             InpPrice1=40;        // Pre√ßo do 1¬∫ ponto, %
input int             InpDate2=60;         // Data do 2¬∫ ponto, %
input int             InpPrice2=60;        // Pre√ßo do 2¬∫ ponto, %
input color           InpColor=clrRed;     // Cor do ret√¢ngulo
input ENUM_LINE_STYLE InpStyle=STYLE_DASH; // Estilo das linhas do ret√¢ngulo</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
549
</p>
<pre><code class="language-mql5">
input int             InpWidth=2;          // Largura das linhas do ret√¢ngulo
input bool            InpFill=true;        // Preenchendo o ret√¢ngulo com cor
input bool            InpBack=false;       // Ret√¢ngulo de fundo
input bool            InpSelection=true;   // Destaque para mover
input bool            InpHidden=true;      // Ocultar na lista de objeto
input long            InpZOrder=0;         // Prioridade para clicar no mouse
//+------------------------------------------------------------------+
//| Criar ret√¢ngulo pelas coordenadas fornecidas¬†                    |
//+------------------------------------------------------------------+
bool RectangleCreate(const long            chart_ID=0,        // ID do gr√°fico
                     const string          name=&quot;Rectangle&quot;,  // nome do ret√¢ngulo
                     const int             sub_window=0,      // √≠ndice da sub-janela
                     datetime              time1=0,           // primeiro ponto de tem
                     double                price1=0,          // primeiro ponto de pre
                     datetime              time2=0,           // segundo ponto de temp
                     double                price2=0,          // segundo ponto de pre√ß
                     const color           clr=clrRed,        // cor do ret√¢ngulo
                     const ENUM_LINE_STYLE style=STYLE_SOLID, // estilo das linhas do 
                     const int             width=1,           // largura das linhas do
                     const bool            fill=false,        // preenchimento do ret√¢
                     const bool            back=false,        // no fundo
                     const bool            selection=true,    // destaque para mover
                     const bool            hidden=true,       // ocultar na lista de o
                     const long            z_order=0)         // prioridade para cliqu
  {
//--- definir coordenadas de pontos de ancoragem, se eles n√£o est√£o definidos
   ChangeRectangleEmptyPoints(time1,price1,time2,price2);
//--- redefine o valor de erro
   ResetLastError();
//--- criar um ret√¢ngulo pelas coordenadas dadas
   if(!ObjectCreate(chart_ID,name,OBJ_RECTANGLE,sub_window,time1,price1,time2,price2))
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar um ret√¢ngulo! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- definir a cor do ret√¢ngulo
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir o estilo de linhas do ret√¢ngulo
   ObjectSetInteger(chart_ID,name,OBJPROP_STYLE,style);
//--- definir a largura das linhas do ret√¢ngulo
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,width);
//--- habilitar (true) ou desabilitar (false) o modo de preenchimento do ret√¢ngulo
   ObjectSetInteger(chart_ID,name,OBJPROP_FILL,fill);
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- habilitar (true) ou desabilitar (false) o modo de destaque para mover o ret√¢ngul
//--- ao criar um objeto gr√°fico usando a fun√ß√£o ObjectCreate, o objeto n√£o pode ser
//--- destacado e movimentado por padr√£o. Dentro deste m√©todo, o par√¢metro de sele√ß√£o</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
550
</p>
<pre><code class="language-mql5">
//--- √© verdade por padr√£o, tornando poss√≠vel destacar e mover o objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mover ponto de ancoragem do ret√¢ngulo¬†                           |
//+------------------------------------------------------------------+
bool RectanglePointChange(const long   chart_ID=0,       // ID do gr√°fico
                          const string name=&quot;Rectangle&quot;, // nome do ret√¢ngulo
                          const int    point_index=0,    // √≠ndice do ponto de ancorag
                          datetime     time=0,           // coordenada do ponto de anc
                          double       price=0)          // coordenada do ponto de anc
  {
//--- se a posi√ß√£o do ponto n√£o est√° definida, mover para a barra atual tendo o pre√ßo 
   if(!time)
      time=TimeCurrent();
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- redefine o valor de erro
   ResetLastError();
//--- mover o ponto de ancoragem
   if(!ObjectMove(chart_ID,name,point_index,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao mover o ponto de ancoragem! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Excluir o ret√¢ngulo¬†                                             |
//+------------------------------------------------------------------+
bool RectangleDelete(const long   chart_ID=0,       // ID do gr√°fico
                     const string name=&quot;Rectangle&quot;) // nome do ret√¢ngulo
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir o ret√¢ngulo
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,
            &quot;: falha ao excluir o ret√¢ngulo! C√≥digo de erro = &quot;,GetLastError());</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
551
</p>
<pre><code class="language-mql5">
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Ver valores pontos de ancoragem do ret√¢ngulo e definir¬†          |
//| valores padr√£o para aqueles vazios¬†                              |
//+------------------------------------------------------------------+
void ChangeRectangleEmptyPoints(datetime &amp;time1,double &amp;price1,
                                datetime &amp;time2,double &amp;price2)
  {
//--- se o tempo do primeiro ponto n√£o est√° definido, ser√° na barra atual
   if(!time1)
      time1=TimeCurrent();
//--- se o pre√ßo do primeiro ponto n√£o est√° definido, ele ter√° valor Bid
   if(!price1)
      price1=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- se o tempo do segundo ponto n√£o est√° definido, est√° localizado a 9 barras deixad
   if(!time2)
     {
      //--- array para receber o tempo de abertura das √∫ltimos 10 barras
      datetime temp[10];
      CopyTime(Symbol(),Period(),time1,10,temp);
      //--- definir o segundo ponto 9 barras a esquerda do primeiro
      time2=temp[0];
     }
//--- se o pre√ßo do primeiro ponto n√£o est√° definido, mover 300 pontos a mais do que o
   if(!price2)
      price2=price1-300*SymbolInfoDouble(Symbol(),SYMBOL_POINT);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- verificar a exatid√£o dos par√¢metros de entrada
   if(InpDate1&lt;0 || InpDate1&gt;100 || InpPrice1&lt;0 || InpPrice1&gt;100 || 
      InpDate2&lt;0 || InpDate2&gt;100 || InpPrice2&lt;0 || InpPrice2&gt;100)
     {
      Print(&quot;Erro! Valores incorretos dos par√¢metros de entrada!&quot;);
      return;
     }
//--- n√∫mero de barras vis√≠veis na janela do gr√°fico
   int bars=(int)ChartGetInteger(0,CHART_VISIBLE_BARS);
//--- tamanho do array de pre√ßo
   int accuracy=1000;
//--- arrays para armazenar data e valores de pre√ßo para serem usados
//--- para definir e alterar as coordenadas de pontos de ancoragem do ret√¢ngulo</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
552
</p>
<pre><code class="language-mql5">
   datetime date[];
   double   price[];
//--- aloca√ß√£o de mem√≥ria
   ArrayResize(date,bars);
   ArrayResize(price,accuracy);
//--- preencher o array das datas
   ResetLastError();
   if(CopyTime(Symbol(),Period(),0,bars,date)==-1)
     {
      Print(&quot;Falha ao copiar valores de tempo! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- preencher o array de pre√ßos
//--- encontrar os maiores e menores valores do gr√°fico
   double max_price=ChartGetDouble(0,CHART_PRICE_MAX);
   double min_price=ChartGetDouble(0,CHART_PRICE_MIN);
//--- definir uma etapa de mudan√ßa de um pre√ßo e preencher o array
   double step=(max_price-min_price)/accuracy;
   for(int i=0;i&lt;accuracy;i++)
      price[i]=min_price+i*step;
//--- definir pontos para desenhar o ret√¢ngulo
   int d1=InpDate1*(bars-1)/100;
   int d2=InpDate2*(bars-1)/100;
   int p1=InpPrice1*(accuracy-1)/100;
   int p2=InpPrice2*(accuracy-1)/100;
//--- criar o ret√¢ngulo
   if(!RectangleCreate(0,InpName,0,date[d1],price[p1],date[d2],price[p2],InpColor,
      InpStyle,InpWidth,InpFill,InpBack,InpSelection,InpHidden,InpZOrder))
     {
      return;
     }
//--- redesenhar o gr√°fico e esperar por um segundo
   ChartRedraw();
   Sleep(1000);
//--- agora, mover os pontos de ancoragem do ret√¢ngulo
//--- contador de loop
   int h_steps=bars/2;
//--- mover os pontos de ancoragem
   for(int i=0;i&lt;h_steps;i++)
     {
      //--- usar os seguintes valores
      if(d1&lt;bars-1)
         d1+=1;
      if(d2&gt;1)
         d2-=1;
      //--- deslocar os pontos
      if(!RectanglePointChange(0,InpName,0,date[d1],price[p1]))
         return;
      if(!RectanglePointChange(0,InpName,1,date[d2],price[p2]))</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
553
</p>
<pre><code class="language-mql5">
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
      // 0.05 segundos de atraso
      Sleep(50);
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- contador de loop
   int v_steps=accuracy/2;
//--- mover os pontos de ancoragem
   for(int i=0;i&lt;v_steps;i++)
     {
      //--- usar os seguintes valores
      if(p1&lt;accuracy-1)
         p1+=1;
      if(p2&gt;1)
         p2-=1;
      //--- deslocar os pontos
      if(!RectanglePointChange(0,InpName,0,date[d1],price[p1]))
         return;
      if(!RectanglePointChange(0,InpName,1,date[d2],price[p2]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- excluir o ret√¢ngulo do gr√°fico
   RectangleDelete(0,InpName);
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
554
<h3>OBJ_TRIANGLE</h3>
Tri√¢ngulo.
<h3>Observa√ß√£o</h3>
Para tri√¢ngulo, o modo de preenchimento com pode ser definido usando a propriedade
OBJPROP_FILL.
<h3>Exemplo</h3>
O seguinte script cria e movimenta o tri√¢ngulo no gr√°fico. Fun√ß√µes especiais t√™m sido desenvolvidas
para criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas fun√ß√µes &quot;as is&quot; em
seus pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script cria o tri√¢ngulo no gr√°fico.&quot;
#property description &quot;Coordenadas de ponto de ancoragem s√£o definidas em porcentagem 
#property description &quot;porcentagem do tamanho da janela de gr√°fico.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string          InpName=&quot;Triangle&quot;;        // Nome do tri√¢ngulo
input int             InpDate1=25;               // Data do 1¬∫ ponto, %
input int             InpPrice1=50;              // Pre√ßo do 1¬∫ ponto, %
input int             InpDate2=70;               // Data do 2¬∫ ponto, %
input int             InpPrice2=70;              // Pre√ßo do 2¬∫ ponto, %
input int             InpDate3=65;               // Data do 3¬∫ ponto, %
input int             InpPrice3=20;              // Pre√ßo do 3¬∫ ponto, %</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
555
</p>
<pre><code class="language-mql5">
input color           InpColor=clrRed;           // Cor do tri√¢ngulo
input ENUM_LINE_STYLE InpStyle=STYLE_DASHDOTDOT; // Estilo das linhas triangulo
input int             InpWidth=2;                // Largura das linhas do tri√¢ngulo
input bool            InpFill=false;             // Preenchendo tri√¢ngulos com cor
input bool            InpBack=false;             // Tri√¢ngulo de fundo
input bool            InpSelection=true;         // Destaque para mover
input bool            InpHidden=true;            // Ocultar na lista de objeto
input long            InpZOrder=0;               // Prioridade para clicar no mouse
//+------------------------------------------------------------------+
//| Criar tri√¢ngulo pelas coordenadas determinadas¬†                  |
//+------------------------------------------------------------------+
bool TriangleCreate(const long            chart_ID=0,        // ID do gr√°fico
                    const string          name=&quot;Triangle&quot;,   // nome do tri√¢ngulo
                    const int             sub_window=0,      // √≠ndice da sub-janela
                    datetime              time1=0,           // primeiro ponto de temp
                    double                price1=0,          // primeiro ponto de pre√ß
                    datetime              time2=0,           // segundo ponto de tempo
                    double                price2=0,          // segundo ponto de pre√ßo
                    datetime              time3=0,           // terceiro ponto de temp
                    double                price3=0,          // terceiro ponto de pre√ß
                    const color           clr=clrRed,        // cor do tri√¢ngulo
                    const ENUM_LINE_STYLE style=STYLE_SOLID, // estilo das linhas do t
                    const int             width=1,           // largura das linhas do 
                    const bool            fill=false,        // preenchendo tri√¢ngulo 
                    const bool            back=false,        // no fundo
                    const bool            selection=true,    // destaque para mover
                    const bool            hidden=true,       // ocultar na lista de ob
                    const long            z_order=0)         // prioridade para o cliq
  {
//--- definir coordenadas de pontos de ancoragem, se eles n√£o est√£o definidos
   ChangeTriangleEmptyPoints(time1,price1,time2,price2,time3,price3);
//--- redefine o valor de erro
   ResetLastError();
//--- criar tri√¢ngulo pelas coordenadas determinadas
   if(!ObjectCreate(chart_ID,name,OBJ_TRIANGLE,sub_window,time1,price1,time2,price2,ti
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar tri√¢ngulo! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- definir a cor do tri√¢ngulo
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir o estilo das linhas do tri√¢ngulo
   ObjectSetInteger(chart_ID,name,OBJPROP_STYLE,style);
//--- definir a largura da linha dos tri√¢ngulos
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,width);
//--- habilitar (true) ou desabilitar (false) o modo de preencher o tri√¢ngulo
   ObjectSetInteger(chart_ID,name,OBJPROP_FILL,fill);
//--- exibir em primeiro plano (false) ou fundo (true)</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
556
</p>
<pre><code class="language-mql5">
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- habilitar (true) ou desabilitar (false) o modo de destacar o tri√¢ngulo para move
//--- ao criar um objeto gr√°fico usando a fun√ß√£o ObjectCreate, o objeto n√£o pode ser
//--- destacado e movimentado por padr√£o. Dentro deste m√©todo, o par√¢metro de sele√ß√£o
//--- √© verdade por padr√£o, tornando poss√≠vel destacar e mover o objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mover a ponto de ancoragem do tri√¢ngulo¬†                         |
//+------------------------------------------------------------------+
bool TrianglePointChange(const long   chart_ID=0,      // ID do grafico
                         const string name=&quot;Triangle&quot;, // nome do tri√¢ngulo
                         const int    point_index=0,   // √≠ndice do ponto de ancoragem
                         datetime     time=0,          // coordenada do ponto de ancor
                         double       price=0)         // coordenada do ponto de ancor
  {
//--- se a posi√ß√£o do ponto n√£o est√° definida, mover para a barra atual tendo o pre√ßo 
   if(!time)
      time=TimeCurrent();
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- redefine o valor de erro
   ResetLastError();
//--- mover o ponto de ancoragem
   if(!ObjectMove(chart_ID,name,point_index,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao mover o ponto de ancoragem! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Excluir o tri√¢ngulo¬†                                             |
//+------------------------------------------------------------------+
bool TriangleDelete(const long   chart_ID=0,      // ID do gr√°fico
                    const string name=&quot;Triangle&quot;) // nome do tri√¢ngulo
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir o tri√¢ngulo</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
557
</p>
<pre><code class="language-mql5">
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,
            &quot;: falha ao deletar o tri√¢ngulo! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Confira valores dos pontos de ancoragem do tri√¢ngulo¬†            |
//| e definir padr√£o valores padr√£o para aqueles vazios¬†             |
//+------------------------------------------------------------------+
void ChangeTriangleEmptyPoints(datetime &amp;time1,double &amp;price1,
                               datetime &amp;time2,double &amp;price2,
                               datetime &amp;time3,double &amp;price3)
  {
//--- se o tempo do primeiro ponto n√£o est√° definido, ser√° na barra atual
   if(!time1)
      time1=TimeCurrent();
//--- se o pre√ßo do primeiro ponto n√£o est√° definido, ele ter√° valor Bid
   if(!price1)
      price1=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- se o tempo do segundo ponto n√£o est√° definido, est√° localizado a 9 barras deixad
   if(!time2)
     {
      //--- array para receber o tempo de abertura das √∫ltimos 10 barras
      datetime temp[10];
      CopyTime(Symbol(),Period(),time1,10,temp);
      //--- definir o segundo ponto 9 barras a esquerda do primeiro
      time2=temp[0];
     }
//--- se o pre√ßo do primeiro ponto n√£o est√° definido, mover 300 pontos a mais do que o
   if(!price2)
      price2=price1-300*SymbolInfoDouble(Symbol(),SYMBOL_POINT);
//--- se o tempo do terceiro ponto n√£o est√° definido,ele coincide com o tempo do segun
   if(!time3)
      time3=time2;
//--- se o pre√ßo do terceiro ponto n√£o est√° definido, √© igual aquele do primeiro ponto
   if(!price3)
      price3=price1;
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- verificar a exatid√£o dos par√¢metros de entrada
   if(InpDate1&lt;0 || InpDate1&gt;100 || InpPrice1&lt;0 || InpPrice1&gt;100 || </p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
558
</p>
<pre><code class="language-mql5">
      InpDate2&lt;0 || InpDate2&gt;100 || InpPrice2&lt;0 || InpPrice2&gt;100 || 
      InpDate3&lt;0 || InpDate3&gt;100 || InpPrice3&lt;0 || InpPrice3&gt;100)
     {
      Print(&quot;Erro! Valores incorretos dos par√¢metros de entrada!&quot;);
      return;
     }
//--- n√∫mero de barras vis√≠veis na janela do gr√°fico
   int bars=(int)ChartGetInteger(0,CHART_VISIBLE_BARS);
//--- tamanho do array de pre√ßo
   int accuracy=1000;
//--- arrays para armazenar data e valores de pre√ßo para serem usados
//--- para definir e alterar as coordenadas dos pontos de ancoragem do tri√¢ngulo
   datetime date[];
   double   price[];
//--- aloca√ß√£o de mem√≥ria
   ArrayResize(date,bars);
   ArrayResize(price,accuracy);
//--- preencher o array das datas
   ResetLastError();
   if(CopyTime(Symbol(),Period(),0,bars,date)==-1)
     {
      Print(&quot;Falha ao copiar valores de tempo! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- preencher o array de pre√ßos
//--- encontrar os maiores e menores valores do gr√°fico
   double max_price=ChartGetDouble(0,CHART_PRICE_MAX);
   double min_price=ChartGetDouble(0,CHART_PRICE_MIN);
//--- definir uma etapa de mudan√ßa de um pre√ßo e preencher o array
   double step=(max_price-min_price)/accuracy;
   for(int i=0;i&lt;accuracy;i++)
      price[i]=min_price+i*step;
//--- definir os pontos para desenhar o tri√¢ngulo
   int d1=InpDate1*(bars-1)/100;
   int d2=InpDate2*(bars-1)/100;
   int d3=InpDate3*(bars-1)/100;
   int p1=InpPrice1*(accuracy-1)/100;
   int p2=InpPrice2*(accuracy-1)/100;
   int p3=InpPrice3*(accuracy-1)/100;
//--- criar um tri√¢ngulo
   if(!TriangleCreate(0,InpName,0,date[d1],price[p1],date[d2],price[p2],date[d3],price
      InpColor,InpStyle,InpWidth,InpFill,InpBack,InpSelection,InpHidden,InpZOrder))
     {
      return;
     }
//--- redesenhar o gr√°fico e esperar por um segundo
   ChartRedraw();
   Sleep(1000);
//--- agora, mover os pontos de ancoragem da tri√¢ngulo</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
559
</p>
<pre><code class="language-mql5">
//--- contador de loop
   int v_steps=accuracy*3/10;
//--- mover o primeiro ponto de ancoragem
   for(int i=0;i&lt;v_steps;i++)
     {
      //--- usar o seguinte valor
      if(p1&gt;1)
         p1-=1;
      //--- mover o ponto
      if(!TrianglePointChange(0,InpName,0,date[d1],price[p1]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- contador de loop
   int h_steps=bars*9/20-1;
//--- mover o segundo ponto de ancoragem
   for(int i=0;i&lt;h_steps;i++)
     {
      //--- usar o seguinte valor
      if(d2&gt;1)
         d2-=1;
      //--- mover o ponto
      if(!TrianglePointChange(0,InpName,1,date[d2],price[p2]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
      // 0.05 segundos de atraso
      Sleep(50);
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- contador de loop
   v_steps=accuracy/4;
//--- mover o terceiro ponto de ancoragem
   for(int i=0;i&lt;v_steps;i++)
     {
      //--- usar o seguinte valor
      if(p3&lt;accuracy-1)
         p3+=1;
      //--- mover o ponto</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
560
</p>
<pre><code class="language-mql5">
      if(!TrianglePointChange(0,InpName,2,date[d3],price[p3]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- excluir tri√¢ngulo do gr√°fico
   TriangleDelete(0,InpName);
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
561
<h3>OBJ_ELLIPSE</h3>
Elipse.
<h3>Observa√ß√£o</h3>
Para elipse, o modo de preenchimento com a cor pode ser definida usando a propriedade
OBJPROP_FILL.
<h3>Exemplo</h3>
O seguinte script cria e move a Elipse no gr√°fico. Fun√ß√µes especiais t√™m sido desenvolvidas para
criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas fun√ß√µes &quot;as is&quot; em seus
pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script cria a Elipse no gr√°fico.&quot;
#property description &quot;Coordenadas dos pontos de ancoragem s√£o definidas&quot;
#property description &quot;em porcentagem do tamanho da janela de gr√°fico.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string          InpName=&quot;Ellipse&quot;;         // Nome da elipse
input int             InpDate1=30;               // Data do 1¬∫ ponto, %
input int             InpPrice1=20;              // Pre√ßo do 1¬∫ ponto, %
input int             InpDate2=70;               // Data do 2¬∫ ponto, %
input int             InpPrice2=80;              // Pre√ßo do 2¬∫ ponto, %
input int             InpDate3=50;               // Data do 3¬∫ ponto, %
input int             InpPrice3=60;              // Pre√ßo do 3¬∫ ponto, %
input color           InpColor=clrRed;           // Cor da elipse</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
562
</p>
<pre><code class="language-mql5">
input ENUM_LINE_STYLE InpStyle=STYLE_DASHDOTDOT; // Estilo de linhas da elipse
input int             InpWidth=2;                // Largura das linhas da elipse
input bool            InpFill=false;             // Preenchendo elipse com cor
input bool            InpBack=false;             // Elipse de fundo
input bool            InpSelection=true;         // Destaque para mover
input bool            InpHidden=true;            // Ocultar na lista de objeto
input long            InpZOrder=0;               // Prioridade para clicar no mouse
//+------------------------------------------------------------------+
//| Criar uma elipse pelas coordenadas fornecidas¬†                   |
//+------------------------------------------------------------------+
bool EllipseCreate(const long            chart_ID=0,        // ID de gr√°fico
                   const string          name=&quot;Ellipse&quot;,    // nome da elipse
                   const int             sub_window=0,      // √≠ndice da sub-janela
                   datetime              time1=0,           // primeiro ponto de tempo
                   double                price1=0,          // primeiro ponto de pre√ßo
                   datetime              time2=0,           // segundo ponto de tempo
                   double                price2=0,          // segundo ponto de pre√ßo
                   datetime              time3=0,           // terceiro ponto de tempo
                   double                price3=0,          // terceiro ponto de pre√ßo
                   const color           clr=clrRed,        // cor da elipse
                   const ENUM_LINE_STYLE style=STYLE_SOLID, // estilo das linhas da el
                   const int             width=1,           // largura das linhas da e
                   const bool            fill=false,        // preenchimento da elipse
                   const bool            back=false,        // no fundo
                   const bool            selection=true,    // destaque para mover
                   const bool            hidden=true,       // ocultar na lista de obj
                   const long            z_order=0)         // prioridade para clique 
  {
//--- definir coordenadas de pontos de ancoragem, se eles n√£o est√£o definidos
   ChangeEllipseEmptyPoints(time1,price1,time2,price2,time3,price3);
//--- redefine o valor de erro
   ResetLastError();
//--- criar uma elipse pelas coordenadas fornecidas
   if(!ObjectCreate(chart_ID,name,OBJ_ELLIPSE,sub_window,time1,price1,time2,price2,tim
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar uma elipse! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- definir uma cor de elipse
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir o estilo de linhas da elipse
   ObjectSetInteger(chart_ID,name,OBJPROP_STYLE,style);
//--- definir a largura das linhas da elipse
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,width);
//--- habilitar (true) ou desabilitar (false) o modo de preenchimento da elipse
   ObjectSetInteger(chart_ID,name,OBJPROP_FILL,fill);
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
563
</p>
<pre><code class="language-mql5">
//--- habilitar (true) ou desabilitar (false) o modo de destaque para mover a elipse
//--- ao criar um objeto gr√°fico usando a fun√ß√£o ObjectCreate, o objeto n√£o pode ser
//--- destacado e movimentado por padr√£o. Dentro deste m√©todo, o par√¢metro de sele√ß√£o
//--- √© verdade por padr√£o, tornando poss√≠vel destacar e mover o objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mover ponto de ancoragem da elipse¬†                              |
//+------------------------------------------------------------------+
bool EllipsePointChange(const long   chart_ID=0,     // ID do gr√°fico
                        const string name=&quot;Ellipse&quot;, // nome da elipse
                        const int    point_index=0,  // √≠ndice do ponto de ancoragem
                        datetime     time=0,         // coordenada do ponto de ancorag
                        double       price=0)        // coordenada do ponto de ancorag
  {
//--- se a posi√ß√£o do ponto n√£o est√° definida, mover para a barra atual tendo o pre√ßo 
   if(!time)
      time=TimeCurrent();
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- redefine o valor de erro
   ResetLastError();
//--- mover o ponto de ancoragem
   if(!ObjectMove(chart_ID,name,point_index,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao mover o ponto de ancoragem! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Excluir elipse¬†                                                  |
//+------------------------------------------------------------------+
bool EllipseDelete(const long   chart_ID=0,     // ID do gr√°fico
                   const string name=&quot;Ellipse&quot;) // nome da elipse
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir uma elipse
   if(!ObjectDelete(chart_ID,name))</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
564
</p>
<pre><code class="language-mql5">
     {
      Print(__FUNCTION__,
            &quot;: falha ao excluir uma elipse! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Ver valores de pontos √¢ncora da elipse e definir valores padr√µes¬†|
//| para aqueles vazios¬†                                             |
//+------------------------------------------------------------------+
void ChangeEllipseEmptyPoints(datetime &amp;time1,double &amp;price1,
                              datetime &amp;time2,double &amp;price2,
                              datetime &amp;time3,double &amp;price3)
  {
//--- se o tempo do primeiro ponto n√£o est√° definido, ser√° na barra atual
   if(!time1)
      time1=TimeCurrent();
//--- se o pre√ßo do primeiro ponto n√£o est√° definido, ele ter√° valor Bid
   if(!price1)
      price1=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- se o tempo do segundo ponto n√£o est√° definido, est√° localizado a 9 barras deixad
   if(!time2)
     {
      //--- array para receber o tempo de abertura das √∫ltimos 10 barras
      datetime temp[10];
      CopyTime(Symbol(),Period(),time1,10,temp);
      //--- definir o segundo ponto 9 barras a esquerda do primeiro
      time2=temp[0];
     }
//--- se o pre√ßo do primeiro ponto n√£o est√° definido, mover 300 pontos a mais do que o
   if(!price2)
      price2=price1-300*SymbolInfoDouble(Symbol(),SYMBOL_POINT);
//--- se o tempo do terceiro ponto n√£o est√° definido,ele coincide com o tempo do segun
   if(!time3)
      time3=time2;
//--- se o pre√ßo do terceiro ponto n√£o est√° definido, √© igual aquele do primeiro ponto
   if(!price3)
      price3=price1;
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- verificar a exatid√£o dos par√¢metros de entrada
   if(InpDate1&lt;0 || InpDate1&gt;100 || InpPrice1&lt;0 || InpPrice1&gt;100 || 
      InpDate2&lt;0 || InpDate2&gt;100 || InpPrice2&lt;0 || InpPrice2&gt;100 || </p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
565
</p>
<pre><code class="language-mql5">
      InpDate3&lt;0 || InpDate3&gt;100 || InpPrice3&lt;0 || InpPrice3&gt;100)
     {
      Print(&quot;Erro! Valores incorretos dos par√¢metros de entrada!&quot;);
      return;
     }
//--- n√∫mero de barras vis√≠veis na janela do gr√°fico
   int bars=(int)ChartGetInteger(0,CHART_VISIBLE_BARS);
//--- tamanho do array de pre√ßo
   int accuracy=1000;
//--- arrays para armazenar data e valores de pre√ßo para serem usados
//--- para definir e alterar as coordenadas de pontos de ancoragem da elipse
   datetime date[];
   double   price[];
//--- aloca√ß√£o de mem√≥ria
   ArrayResize(date,bars);
   ArrayResize(price,accuracy);
//--- preencher o array das datas
   ResetLastError();
   if(CopyTime(Symbol(),Period(),0,bars,date)==-1)
     {
      Print(&quot;Falha ao copiar valores de tempo! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- preencher o array de pre√ßos
//--- encontrar os maiores e menores valores do gr√°fico
   double max_price=ChartGetDouble(0,CHART_PRICE_MAX);
   double min_price=ChartGetDouble(0,CHART_PRICE_MIN);
//--- definir uma etapa de mudan√ßa de um pre√ßo e preencher o array
   double step=(max_price-min_price)/accuracy;
   for(int i=0;i&lt;accuracy;i++)
      price[i]=min_price+i*step;
//--- definir pontos para desenhar a elipse
   int d1=InpDate1*(bars-1)/100;
   int d2=InpDate2*(bars-1)/100;
   int d3=InpDate3*(bars-1)/100;
   int p1=InpPrice1*(accuracy-1)/100;
   int p2=InpPrice2*(accuracy-1)/100;
   int p3=InpPrice3*(accuracy-1)/100;
//--- criar uma elipse
   if(!EllipseCreate(0,InpName,0,date[d1],price[p1],date[d2],price[p2],date[d3],price
      InpColor,InpStyle,InpWidth,InpFill,InpBack,InpSelection,InpHidden,InpZOrder))
     {
      return;
     }
//--- redesenhar o gr√°fico e esperar por um segundo
   ChartRedraw();
   Sleep(1000);
//--- agora, mover os pontos de ancoragem da elipse
//--- contador de loop</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
566
</p>
<pre><code class="language-mql5">
   int v_steps=accuracy/5;
//--- movimentar o primeiro e segundo ponto de ancoragem
   for(int i=0;i&lt;v_steps;i++)
     {
      //--- usar os seguintes valores
      if(p1&lt;accuracy-1)
         p1+=1;
      if(p2&gt;1)
         p2-=1;
      //--- deslocar os pontos
      if(!EllipsePointChange(0,InpName,0,date[d1],price[p1]))
         return;
      if(!EllipsePointChange(0,InpName,1,date[d2],price[p2]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- contador de loop
   int h_steps=bars/5;
//--- mover o terceiro ponto de ancoragem
   for(int i=0;i&lt;h_steps;i++)
     {
      //--- usar o seguinte valor
      if(d3&gt;1)
         d3-=1;
      //--- mover o ponto
      if(!EllipsePointChange(0,InpName,2,date[d3],price[p3]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
      // 0.05 segundos de atraso
      Sleep(50);
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- excluir elipse a partir do gr√°fico
   EllipseDelete(0,InpName);
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//---</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
567
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
568
<h3>OBJ_ARROW_THUMB_UP</h3>
Sinal Thumbs Up.
<h3>Observa√ß√£o</h3>
Posi√ß√£o do ponto de ancoragem relativa ao sinal pode ser selecionado a partir do enumerador
ENUM_ARROW_ANCHOR.
Sinais de grande porte (mais de 5) somente ser√£o criados, definindo corretamente o valor da
propriedade OBJPROP_WIDTH ao escrever um c√≥digo no MetaEditor.
<h3>Exemplo</h3>
O seguinte script cria e move sinal Thumbs Up no gr√°fico. Fun√ß√µes especiais t√™m sido desenvolvidas
para criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas fun√ß√µes &quot;as is&quot; em
seus pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script desenha sinal \&quot;Thumbs Up\&quot;.&quot;
#property description &quot;Coordenadas do ponto de ancoragem √© configurado em porcentagem 
#property description &quot;tamanho da janela do gr√°fico.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string            InpName=&quot;ThumbUp&quot;;    // Nome do sinal
input int               InpDate=75;           // Ponto de ancoragem da data em %
input int               InpPrice=25;          // Ponto de ancoragem do pre√ßo em %
input ENUM_ARROW_ANCHOR InpAnchor=ANCHOR_TOP; // Tipo de ancoragem
input color             InpColor=clrRed;      // Cor do sinal</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
569
</p>
<pre><code class="language-mql5">
input ENUM_LINE_STYLE   InpStyle=STYLE_DOT;   // Estilo da linha da borda
input int               InpWidth=5;           // Tamanho do sinal
input bool              InpBack=false;        // Sinal do fundo
input bool              InpSelection=true;    // Destaque para mover
input bool              InpHidden=true;       // Ocultar na lista de objetos
input long              InpZOrder=0;          // Prioridade para clicar no mouse
//+------------------------------------------------------------------+
//| Criar sinal Thumbs Up¬†                                           |
//+------------------------------------------------------------------+
bool ArrowThumbUpCreate(const long              chart_ID=0,           // ID do gr√°fico
                        const string            name=&quot;ThumbUp&quot;,       // nome do sinal
                        const int               sub_window=0,         // √≠ndice da sub
                        datetime                time=0,               // ponto de anco
                        double                  price=0,              // ponto de anco
                        const ENUM_ARROW_ANCHOR anchor=ANCHOR_BOTTOM, // tipo de ancor
                        const color             clr=clrRed,           // cor do sinal
                        const ENUM_LINE_STYLE   style=STYLE_SOLID,    // estilo de lin
                        const int               width=3,              // tamanho do si
                        const bool              back=false,           // no fundo
                        const bool              selection=true,       // destaque para
                        const bool              hidden=true,          // ocultar na li
                        const long              z_order=0)            // prioridade pa
  {
//--- definir as coordenadas de pontos de ancoragem, se eles n√£o est√£o definidos
   ChangeArrowEmptyPoint(time,price);
//--- redefine o valor de erro
   ResetLastError();
//--- criar o sinal
   if(!ObjectCreate(chart_ID,name,OBJ_ARROW_THUMB_UP,sub_window,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar sinal \&quot;Thumbs Up\&quot;! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- tipo de defini√ß√£o de ancoragem
   ObjectSetInteger(chart_ID,name,OBJPROP_ANCHOR,anchor);
//--- definir uma cor de sinal
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir o estilo da linha da borda
   ObjectSetInteger(chart_ID,name,OBJPROP_STYLE,style);
//--- tamanho da defini√ß√£o do sinal
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,width);
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- permitir (true) ou desabilitar (false) o modo de movimento do sinal com o mouse
//--- ao criar um objeto gr√°fico usando a fun√ß√£o ObjectCreate, o objeto n√£o pode ser
//--- destacado e movimentado por padr√£o. Dentro deste m√©todo, o par√¢metro de sele√ß√£o
//--- √© verdade por padr√£o, tornando poss√≠vel destacar e mover o objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
570
</p>
<pre><code class="language-mql5">
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mover ponto de ancoragem¬†                                        |
//+------------------------------------------------------------------+
bool ArrowThumbUpMove(const long   chart_ID=0,     // ID do gr√°fico
                      const string name=&quot;ThumbUp&quot;, // nome do objeto
                      datetime     time=0,         // coordenada do ponto de ancoragem
                      double       price=0)        // coordenada do ponto de ancoragem
  {
//--- se a posi√ß√£o do ponto n√£o est√° definida, mover para a barra atual tendo o pre√ßo 
   if(!time)
      time=TimeCurrent();
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- redefine o valor de erro
   ResetLastError();
//--- mover o ponto de ancoragem
   if(!ObjectMove(chart_ID,name,0,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao mover o ponto de ancoragem! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Alterar tipo de ancoragem do sinal Thumbs Up¬†                    |
//+------------------------------------------------------------------+
bool ArrowThumbUpAnchorChange(const long              chart_ID=0,        // ID do Gr√°f
                              const string            name=&quot;ThumbUp&quot;,    // nome do ob
                              const ENUM_ARROW_ANCHOR anchor=ANCHOR_TOP) // tipo de an
  {
//--- redefine o valor de erro
   ResetLastError();
//--- alterar tipo de ancoragem
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_ANCHOR,anchor))
     {
      Print(__FUNCTION__,
            &quot;: falha para alterar o tipo de ancoragem! C√≥digo de erro = &quot;,GetLastError
      return(false);
     }</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
571
</p>
<pre><code class="language-mql5">
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Excluir sinal Thumbs Up¬†                                         |
//+------------------------------------------------------------------+
bool ArrowThumbUpDelete(const long   chart_ID=0,     // ID do gr√°fico
                        const string name=&quot;ThumbUp&quot;) // nome do sinal 
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir o sinal
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,
            &quot;: falha ao excluir o sinal \&quot;Thumbs Up\&quot;! C√≥digo de erro = &quot;,GetLastError
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Verificar valores de ponto de ancoragem e definir valores padr√£o¬†|
//| para aqueles vazios¬†                                             |
//+------------------------------------------------------------------+
void ChangeArrowEmptyPoint(datetime &amp;time,double &amp;price)
  {
//--- se o tempo do ponto n√£o est√° definido, ser√° na barra atual
   if(!time)
      time=TimeCurrent();
//--- se o pre√ßo do ponto n√£o est√° definido, ele ter√° valor Bid
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- verificar a exatid√£o dos par√¢metros de entrada
   if(InpDate&lt;0 || InpDate&gt;100 || InpPrice&lt;0 || InpPrice&gt;100)
     {
      Print(&quot;Erro! Valores incorretos dos par√¢metros de entrada!&quot;);
      return;
     }
//--- n√∫mero de barras vis√≠veis na janela do gr√°fico
   int bars=(int)ChartGetInteger(0,CHART_VISIBLE_BARS);
//--- tamanho do array de pre√ßo
   int accuracy=1000;</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
572
</p>
<pre><code class="language-mql5">
//--- arrays para armazenar data e valores de pre√ßo para serem usados
//--- para definir e alterar sinal das coordenadas do ponto de ancoragem
   datetime date[];
   double   price[];
//--- aloca√ß√£o de mem√≥ria
   ArrayResize(date,bars);
   ArrayResize(price,accuracy);
//--- preencher o array das datas
   ResetLastError();
   if(CopyTime(Symbol(),Period(),0,bars,date)==-1)
     {
      Print(&quot;Falha ao copiar valores de tempo! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- preencher o array de pre√ßos
//--- encontrar os maiores e menores valores do gr√°fico
   double max_price=ChartGetDouble(0,CHART_PRICE_MAX);
   double min_price=ChartGetDouble(0,CHART_PRICE_MIN);
//--- definir uma etapa de mudan√ßa de um pre√ßo e preencher o array
   double step=(max_price-min_price)/accuracy;
   for(int i=0;i&lt;accuracy;i++)
      price[i]=min_price+i*step;
//--- definir os pontos para desenhar o sinal
   int d=InpDate*(bars-1)/100;
   int p=InpPrice*(accuracy-1)/100;
//--- criar sinal Thumbs Up no gr√°fico
   if(!ArrowThumbUpCreate(0,InpName,0,date[d],price[p],InpAnchor,InpColor,
      InpStyle,InpWidth,InpBack,InpSelection,InpHidden,InpZOrder))
     {
      return;
     }
//--- redesenhar o gr√°fico e esperar por um segundo
   ChartRedraw();
   Sleep(1000);
//--- agora, mover o ponto de ancoragem e alterar sua posi√ß√£o em rela√ß√£o ao sinal
//--- contador de loop
   int h_steps=bars/4;
//--- mover o ponto de ancoragem
   for(int i=0;i&lt;h_steps;i++)
     {
      //--- usar o seguinte valor
      if(d&gt;1)
         d-=1;
      //--- mover o ponto
      if(!ArrowThumbUpMove(0,InpName,date[d],price[p]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
573
</p>
<pre><code class="language-mql5">
      //--- redesenhar o gr√°fico
      ChartRedraw();
      // 0.05 segundos de atraso
      Sleep(50);
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- contador de loop
   int v_steps=accuracy/4;
//--- mover o ponto de ancoragem
   for(int i=0;i&lt;v_steps;i++)
     {
      //--- usar o seguinte valor
      if(p&lt;accuracy-1)
         p+=1;
      //--- mover o ponto
      if(!ArrowThumbUpMove(0,InpName,date[d],price[p]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
     }
//--- alterar a localiza√ß√£o do ponto de ancoragem relativa ao sinal
   ArrowThumbUpAnchorChange(0,InpName,ANCHOR_BOTTOM);
//--- redesenhar o gr√°fico
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//--- deletar o sinal do gr√°fico
   ArrowThumbUpDelete(0,InpName);
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
574
<h3>OBJ_ARROW_THUMB_DOWN</h3>
Sinal Thumbs Down.
<h3>Observa√ß√£o</h3>
Posi√ß√£o do ponto de ancoragem relativa ao sinal pode ser selecionado a partir do enumerador
ENUM_ARROW_ANCHOR.
Sinais de grande porte (mais de 5) somente ser√£o criados, definindo corretamente o valor da
propriedade OBJPROP_WIDTH ao escrever um c√≥digo no MetaEditor.
<h3>Exemplo</h3>
O seguinte script cria e move o sinal Thumbs Down no gr√°fico. Fun√ß√µes especiais t√™m sido
desenvolvidas para criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas
fun√ß√µes &quot;as is&quot; em seus pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script desenha sinal \&quot;Thumbs Down\&quot;.&quot;
#property description &quot;Coordenadas do ponto de ancoragem √© configurado em porcentagem 
#property description &quot;tamanho da janela do gr√°fico.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string            InpName=&quot;ThumbDown&quot;;     // nome do sinal
input int               InpDate=25;              // Ponto de ancoragem da data em %
input int               InpPrice=75;             // Ponto de ancoragem do pre√ßo em %
input ENUM_ARROW_ANCHOR InpAnchor=ANCHOR_BOTTOM; // Tipo de ancoragem</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
575
</p>
<pre><code class="language-mql5">
input color             InpColor=clrRed;         // Cor do sinal
input ENUM_LINE_STYLE   InpStyle=STYLE_DOT;      // Estilo de linha da borda
input int               InpWidth=5;              // Tamanho do Sinal
input bool              InpBack=false;           // Fundo do sinal
input bool              InpSelection=true;       // Destaque para mover
input bool              InpHidden=true;          // Ocultar na lista de objetos
input long              InpZOrder=0;             // Prioridade para clique do mouse
//+------------------------------------------------------------------+
//| Criar sinal Thumbs Down¬†                                         |
//+------------------------------------------------------------------+
bool ArrowThumbDownCreate(const long              chart_ID=0,           // ID do gr√°fi
                          const string            name=&quot;ThumbDown&quot;,     // nome do sin
                          const int               sub_window=0,         // √≠ndice de s
                          datetime                time=0,               // ponto de an
                          double                  price=0,              // ponto de an
                          const ENUM_ARROW_ANCHOR anchor=ANCHOR_BOTTOM, // tipo de anc
                          const color             clr=clrRed,           // cor do sina
                          const ENUM_LINE_STYLE   style=STYLE_SOLID,    // estilo de l
                          const int               width=3,              // tamanho do 
                          const bool              back=false,           // no fundo
                          const bool              selection=true,       // destaque pa
                          const bool              hidden=true,          // ocultar na 
                          const long              z_order=0)            // prioridade 
  {
//--- definir as coordenadas de pontos de ancoragem, se eles n√£o est√£o definidos
   ChangeArrowEmptyPoint(time,price);
//--- redefine o valor de erro
   ResetLastError();
//--- criar o sinal
   if(!ObjectCreate(chart_ID,name,OBJ_ARROW_THUMB_DOWN,sub_window,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar sinal \&quot;Thumbs Down\&quot;! C√≥digo de erro = &quot;,GetLastError()
      return(false);
     }
//--- tipo de defini√ß√£o de ancoragem
   ObjectSetInteger(chart_ID,name,OBJPROP_ANCHOR,anchor);
//--- definir uma cor de sinal
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir o estilo da linha da borda
   ObjectSetInteger(chart_ID,name,OBJPROP_STYLE,style);
//--- tamanho da defini√ß√£o do sinal
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,width);
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- permitir (true) ou desabilitar (false) o modo de movimento do sinal com o mouse
//--- ao criar um objeto gr√°fico usando a fun√ß√£o ObjectCreate, o objeto n√£o pode ser
//--- destacado e movimentado por padr√£o. Dentro deste m√©todo, o par√¢metro de sele√ß√£o
//--- √© verdade por padr√£o, tornando poss√≠vel destacar e mover o objeto</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
576
</p>
<pre><code class="language-mql5">
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mover ponto de ancoragem¬†                                        |
//+------------------------------------------------------------------+
bool ArrowThumbDownMove(const long   chart_ID=0,       // ID do gr√°fico
                        const string name=&quot;ThumbDown&quot;, // nome do objeto
                        datetime     time=0,           // coordenada do ponto de ancor
                        double       price=0)          // coordenada do ponto de ancor
  {
//--- se a posi√ß√£o do ponto n√£o est√° definida, mover para a barra atual tendo o pre√ßo 
   if(!time)
      time=TimeCurrent();
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- redefine o valor de erro
   ResetLastError();
//--- mover o ponto de ancoragem
   if(!ObjectMove(chart_ID,name,0,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao mover o ponto de ancoragem! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Alterar tipo de ancoragem do sinal Thumbs Down¬†                  |
//+------------------------------------------------------------------+
bool ArrowThumbDownAnchorChange(const long              chart_ID=0,        // ID do gr
                                const string            name=&quot;ThumbDown&quot;,  // nome do 
                                const ENUM_ARROW_ANCHOR anchor=ANCHOR_TOP) // tipo de 
  {
//--- redefine o valor de erro
   ResetLastError();
//--- alterar tipo de ancoragem
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_ANCHOR,anchor))
     {
      Print(__FUNCTION__,
            &quot;: falha para alterar o tipo de ancoragem! C√≥digo de erro = &quot;,GetLastError
      return(false);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
577
</p>
<pre><code class="language-mql5">
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Excluir sinal Thumbs Down¬†                                       |
//+------------------------------------------------------------------+
bool ArrowThumbDownDelete(const long   chart_ID=0,       // ID do gr√°fico
                          const string name=&quot;ThumbDown&quot;) // nome do sinal
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir o sinal
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,
            &quot;: falha ao excluir o sinal \&quot;Thumbs Down\&quot;! C√≥digo de erro = &quot;,GetLastErr
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Verificar valores de ponto de ancoragem e definir valores padr√£o¬†|
//| para aqueles vazios¬†                                             |
//+------------------------------------------------------------------+
void ChangeArrowEmptyPoint(datetime &amp;time,double &amp;price)
  {
//--- se o tempo do ponto n√£o est√° definido, ser√° na barra atual
   if(!time)
      time=TimeCurrent();
//--- se o pre√ßo do ponto n√£o est√° definido, ele ter√° valor Bid
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- verificar a exatid√£o dos par√¢metros de entrada
   if(InpDate&lt;0 || InpDate&gt;100 || InpPrice&lt;0 || InpPrice&gt;100)
     {
      Print(&quot;Erro! Valores incorretos dos par√¢metros de entrada!&quot;);
      return;
     }
//--- n√∫mero de barras vis√≠veis na janela do gr√°fico
   int bars=(int)ChartGetInteger(0,CHART_VISIBLE_BARS);
//--- tamanho do array de pre√ßo</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
578
</p>
<pre><code class="language-mql5">
   int accuracy=1000;
//--- arrays para armazenar data e valores de pre√ßo para serem usados
//--- para definir e alterar sinal das coordenadas do ponto de ancoragem
   datetime date[];
   double   price[];
//--- aloca√ß√£o de mem√≥ria
   ArrayResize(date,bars);
   ArrayResize(price,accuracy);
//--- preencher o array das datas
   ResetLastError();
   if(CopyTime(Symbol(),Period(),0,bars,date)==-1)
     {
      Print(&quot;Falha ao copiar valores de tempo! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- preencher o array de pre√ßos
//--- encontrar os maiores e menores valores do gr√°fico
   double max_price=ChartGetDouble(0,CHART_PRICE_MAX);
   double min_price=ChartGetDouble(0,CHART_PRICE_MIN);
//--- definir uma etapa de mudan√ßa de um pre√ßo e preencher o array
   double step=(max_price-min_price)/accuracy;
   for(int i=0;i&lt;accuracy;i++)
      price[i]=min_price+i*step;
//--- definir os pontos para desenhar o sinal
   int d=InpDate*(bars-1)/100;
   int p=InpPrice*(accuracy-1)/100;
//--- criar sinal Thumbs Down no gr√°fico
   if(!ArrowThumbDownCreate(0,InpName,0,date[d],price[p],InpAnchor,InpColor,
      InpStyle,InpWidth,InpBack,InpSelection,InpHidden,InpZOrder))
     {
      return;
     }
//--- redesenhar o gr√°fico e esperar por um segundo
   ChartRedraw();
   Sleep(1000);
//--- agora, mover o ponto de ancoragem e alterar sua posi√ß√£o em rela√ß√£o ao sinal
//--- contador de loop
   int h_steps=bars/4;
//--- mover o ponto de ancoragem
   for(int i=0;i&lt;h_steps;i++)
     {
      //--- usar o seguinte valor
      if(d&lt;bars-1)
         d+=1;
      //--- mover o ponto
      if(!ArrowThumbDownMove(0,InpName,date[d],price[p]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
579
</p>
<pre><code class="language-mql5">
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
      // 0.05 segundos de atraso
      Sleep(50);
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- contador de loop
   int v_steps=accuracy/4;
//--- mover o ponto de ancoragem
   for(int i=0;i&lt;v_steps;i++)
     {
      //--- usar o seguinte valor
      if(p&gt;1)
         p-=1;
      //--- mover o ponto
      if(!ArrowThumbDownMove(0,InpName,date[d],price[p]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
     }
//--- alterar a localiza√ß√£o do ponto de ancoragem relativa ao sinal
   ArrowThumbDownAnchorChange(0,InpName,ANCHOR_TOP);
//--- redesenhar o gr√°fico
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//--- deletar o sinal do gr√°fico
   ArrowThumbDownDelete(0,InpName);
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
580
<h3>OBJ_ARROW_UP</h3>
Sinal Arrow Up.
<h3>Observa√ß√£o</h3>
Posi√ß√£o do ponto de ancoragem relativa ao sinal pode ser selecionado a partir do enumerador
ENUM_ARROW_ANCHOR.
Sinais de grande porte (mais de 5) somente ser√£o criados, definindo corretamente o valor da
propriedade OBJPROP_WIDTH ao escrever um c√≥digo no MetaEditor.
<h3>Exemplo</h3>
O seguinte script cria e move sinal Arrow Up no gr√°fico. Fun√ß√µes especiais t√™m sido desenvolvidas
para criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas fun√ß√µes &quot;as is&quot; em
seus pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script desenha sinal \&quot;Arrow Up\&quot;.&quot;
#property description &quot;Coordenadas do ponto de ancoragem √© definido em&quot;
#property description &quot;porcentagem do tamanho da janela de gr√°fico.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string            InpName=&quot;ArrowUp&quot;;    // Nome do sinal
input int               InpDate=25;           // Ponto de ancoragem da data em %
input int               InpPrice=25;          // Ponto de ancoragem do pre√ßo em %
input ENUM_ARROW_ANCHOR InpAnchor=ANCHOR_TOP; // Tipo de ancoragem
input color             InpColor=clrRed;      // Cor do sinal</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
581
</p>
<pre><code class="language-mql5">
input ENUM_LINE_STYLE   InpStyle=STYLE_DOT;   // Estilo da linha da borda
input int               InpWidth=5;           // Tamanho do sinal
input bool              InpBack=false;        // Sinal do fundo
input bool              InpSelection=false;   // Destaque para mover
input bool              InpHidden=true;       // Ocultar na lista de objetos
input long              InpZOrder=0;          // Prioridade para clicar no mouse
//+------------------------------------------------------------------+
//| Criar sinal Arrow Up¬†                                            |
//+------------------------------------------------------------------+
bool ArrowUpCreate(const long              chart_ID=0,           // ID do gr√°fico
                   const string            name=&quot;ArrowUp&quot;,       // nome do sinal
                   const int               sub_window=0,         // √≠ndice da sub-jane
                   datetime                time=0,               // ponto de ancoragem
                   double                  price=0,              // ponto de ancoragem
                   const ENUM_ARROW_ANCHOR anchor=ANCHOR_BOTTOM, // tipo de ancoragem
                   const color             clr=clrRed,           // cor do sinal
                   const ENUM_LINE_STYLE   style=STYLE_SOLID,    // estilo de linha da
                   const int               width=3,              // tamanho do sinal
                   const bool              back=false,           // no fundo
                   const bool              selection=true,       // destaque para move
                   const bool              hidden=true,          // ocultar na lista d
                   const long              z_order=0)            // prioridade para cl
  {
//--- definir as coordenadas de pontos de ancoragem, se eles n√£o est√£o definidos
   ChangeArrowEmptyPoint(time,price);
//--- redefine o valor de erro
   ResetLastError();
//--- criar o sinal
   if(!ObjectCreate(chart_ID,name,OBJ_ARROW_UP,sub_window,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar o sinal \&quot;Arrow Up\&quot;! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- tipo de defini√ß√£o de ancoragem
   ObjectSetInteger(chart_ID,name,OBJPROP_ANCHOR,anchor);
//--- definir uma cor de sinal
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir o estilo da linha da borda
   ObjectSetInteger(chart_ID,name,OBJPROP_STYLE,style);
//--- tamanho da defini√ß√£o do sinal
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,width);
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- permitir (true) ou desabilitar (false) o modo de movimento do sinal com o mouse
//--- ao criar um objeto gr√°fico usando a fun√ß√£o ObjectCreate, o objeto n√£o pode ser
//--- destacado e movimentado por padr√£o. Dentro deste m√©todo, o par√¢metro de sele√ß√£o
//--- √© verdade por padr√£o, tornando poss√≠vel destacar e mover o objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
582
</p>
<pre><code class="language-mql5">
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mover ponto de ancoragem¬†                                        |
//+------------------------------------------------------------------+
bool ArrowUpMove(const long   chart_ID=0,     // ID do gr√°fico
                 const string name=&quot;ArrowUp&quot;, // nome do objeto
                 datetime     time=0,         // coordenada do ponto de ancoragem de t
                 double       price=0)        // coordenada do ponto de ancoragem de p
  {
//--- se a posi√ß√£o do ponto n√£o est√° definida, mover para a barra atual tendo o pre√ßo 
   if(!time)
      time=TimeCurrent();
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- redefine o valor de erro
   ResetLastError();
//--- mover o ponto de ancoragem
   if(!ObjectMove(chart_ID,name,0,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao mover o ponto de ancoragem! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Alterar o tipo de ancoragem do sinal Arrow Down¬†                 |
//+------------------------------------------------------------------+
bool ArrowUpAnchorChange(const long              chart_ID=0,        // ID do gr√°fico
                         const string            name=&quot;ArrowUp&quot;,    // nome do objeto
                         const ENUM_ARROW_ANCHOR anchor=ANCHOR_TOP) // tipo de ancorag
  {
//--- redefine o valor de erro
   ResetLastError();
//--- alterar a ancoragem do ponto de loca√ß√£o
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_ANCHOR,anchor))
     {
      Print(__FUNCTION__,
            &quot;: falha para alterar o tipo de ancoragem! C√≥digo de erro = &quot;,GetLastError
      return(false);
     }</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
583
</p>
<pre><code class="language-mql5">
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Excluir sinal Arrow Up¬†                                          |
//+------------------------------------------------------------------+
bool ArrowUpDelete(const long   chart_ID=0,     // ID do gr√°fico
                   const string name=&quot;ArrowUp&quot;) // nome sinal
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir o sinal
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,
            &quot;: falha ao excluir o sinal \&quot;Arrow Up\&quot;! C√≥digo de erro = &quot;,GetLastError
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Verificar valores de ponto de ancoragem e definir valores padr√£o¬†|
//| para aqueles vazios¬†                                             |
//+------------------------------------------------------------------+
void ChangeArrowEmptyPoint(datetime &amp;time,double &amp;price)
  {
//--- se o tempo do ponto n√£o est√° definido, ser√° na barra atual
   if(!time)
      time=TimeCurrent();
//--- se o pre√ßo do ponto n√£o est√° definido, ele ter√° valor Bid
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- verificar a exatid√£o dos par√¢metros de entrada
   if(InpDate&lt;0 || InpDate&gt;100 || InpPrice&lt;0 || InpPrice&gt;100)
     {
      Print(&quot;Erro! Valores incorretos dos par√¢metros de entrada!&quot;);
      return;
     }
//--- n√∫mero de barras vis√≠veis na janela do gr√°fico
   int bars=(int)ChartGetInteger(0,CHART_VISIBLE_BARS);
//--- tamanho do array de pre√ßo
   int accuracy=1000;</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
584
</p>
<pre><code class="language-mql5">
//--- arrays para armazenar data e valores de pre√ßo para serem usados
//--- para definir e alterar sinal das coordenadas do ponto de ancoragem
   datetime date[];
   double   price[];
//--- aloca√ß√£o de mem√≥ria
   ArrayResize(date,bars);
   ArrayResize(price,accuracy);
//--- preencher o array das datas
   ResetLastError();
   if(CopyTime(Symbol(),Period(),0,bars,date)==-1)
     {
      Print(&quot;Falha ao copiar valores de tempo! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- preencher o array de pre√ßos
//--- encontrar os maiores e menores valores do gr√°fico
   double max_price=ChartGetDouble(0,CHART_PRICE_MAX);
   double min_price=ChartGetDouble(0,CHART_PRICE_MIN);
//--- definir uma etapa de mudan√ßa de um pre√ßo e preencher o array
   double step=(max_price-min_price)/accuracy;
   for(int i=0;i&lt;accuracy;i++)
      price[i]=min_price+i*step;
//--- definir os pontos para desenhar o sinal
   int d=InpDate*(bars-1)/100;
   int p=InpPrice*(accuracy-1)/100;
//--- criar sinal Arrow Up no gr√°fico
   if(!ArrowUpCreate(0,InpName,0,date[d],price[p],InpAnchor,InpColor,
      InpStyle,InpWidth,InpBack,InpSelection,InpHidden,InpZOrder))
     {
      return;
     }
//--- redesenhar o gr√°fico e esperar por um segundo
   ChartRedraw();
   Sleep(1000);
//--- agora, mover o ponto de ancoragem e alterar sua posi√ß√£o em rela√ß√£o ao sinal
//--- contador de loop
   int v_steps=accuracy/2;
//--- mover o ponto de ancoragem
   for(int i=0;i&lt;v_steps;i++)
     {
      //--- usar o seguinte valor
      if(p&lt;accuracy-1)
         p+=1;
      //--- mover o ponto
      if(!ArrowUpMove(0,InpName,date[d],price[p]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
585
</p>
<pre><code class="language-mql5">
      //--- redesenhar o gr√°fico
      ChartRedraw();
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- alterar a localiza√ß√£o do ponto de ancoragem relativa ao sinal
   ArrowUpAnchorChange(0,InpName,ANCHOR_BOTTOM);
//--- redesenhar o gr√°fico
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//--- deletar o sinal do gr√°fico
   ArrowUpDelete(0,InpName);
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
586
<h3>OBJ_ARROW_DOWN</h3>
Sinal Arrow Down.
<h3>Observa√ß√£o</h3>
Posi√ß√£o do ponto de ancoragem relativa ao sinal pode ser selecionado a partir do enumerador
ENUM_ARROW_ANCHOR.
Sinais de grande porte (mais de 5) somente ser√£o criados, definindo corretamente o valor da
propriedade OBJPROP_WIDTH ao escrever um c√≥digo no MetaEditor.
<h3>Exemplo</h3>
O seguinte script cria e move sinal Arrow Down no gr√°fico. Fun√ß√µes especiais t√™m sido
desenvolvidas para criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas
fun√ß√µes &quot;as is&quot; em seus pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script desenha sinal \&quot;Arrow Down\&quot;.&quot;
#property description &quot;Coordenadas do ponto de ancoragem √© definido em&quot;
#property description &quot;porcentagem do tamanho da janela de gr√°fico.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string            InpName=&quot;ArrowDown&quot;;     // Nome do Sinal
input int               InpDate=75;              // Ponto de ancoragem da data em %
input int               InpPrice=75;             // Ponto de ancoragem do pre√ßo em %
input ENUM_ARROW_ANCHOR InpAnchor=ANCHOR_BOTTOM; // Tipo de Ancoragem
input color             InpColor=clrRed;         // Cor do sinal
input ENUM_LINE_STYLE   InpStyle=STYLE_DOT;      // Estilo de linha da borda</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
587
</p>
<pre><code class="language-mql5">
input int               InpWidth=5;              // Tamanho do Sinal
input bool              InpBack=false;           // Fundo do sinal
input bool              InpSelection=false;      // Destaque para mover
input bool              InpHidden=true;          // Ocultar na lista de objetos
input long              InpZOrder=0;             // Prioridade para clique do mouse
//+------------------------------------------------------------------+
//| Criar sinal Arrow Down¬†                                          |
//+------------------------------------------------------------------+
bool ArrowDownCreate(const long              chart_ID=0,           // ID do gr√°fico
                     const string            name=&quot;ArrowDown&quot;,     // nome do sinal
                     const int               sub_window=0,         // √≠ndice da sub-ja
                     datetime                time=0,               // ponto de ancorag
                     double                  price=0,              // ponto de ancorag
                     const ENUM_ARROW_ANCHOR anchor=ANCHOR_BOTTOM, // tipo de ancorage
                     const color             clr=clrRed,           // cor do sinal
                     const ENUM_LINE_STYLE   style=STYLE_SOLID,    // estilo da linha 
                     const int               width=3,              // tamanho do sinal
                     const bool              back=false,           // no fundo
                     const bool              selection=true,       // destaque para mo
                     const bool              hidden=true,          // Ocultar na lista
                     const long              z_order=0)            // prioridade para 
  {
//--- definir as coordenadas de pontos de ancoragem, se eles n√£o est√£o definidos
   ChangeArrowEmptyPoint(time,price);
//--- redefine o valor de erro
   ResetLastError();
//--- criar o sinal
   if(!ObjectCreate(chart_ID,name,OBJ_ARROW_DOWN,sub_window,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar o sinal \&quot;Arrow Down\&quot;! C√≥digo de erro = &quot;,GetLastError
      return(false);
     }
//--- tipo de ancoragem
   ObjectSetInteger(chart_ID,name,OBJPROP_ANCHOR,anchor);
//--- definir uma cor de sinal
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir o estilo da linha da borda
   ObjectSetInteger(chart_ID,name,OBJPROP_STYLE,style);
//--- tamanho da defini√ß√£o do sinal
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,width);
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- permitir (true) ou desabilitar (false) o modo de movimento do sinal com o mouse
//--- ao criar um objeto gr√°fico usando a fun√ß√£o ObjectCreate, o objeto n√£o pode ser
//--- destacado e movimentado por padr√£o. Dentro deste m√©todo, o par√¢metro de sele√ß√£o
//--- √© verdade por padr√£o, tornando poss√≠vel destacar e mover o objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
588
</p>
<pre><code class="language-mql5">
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mover ponto de ancoragem¬†                                        |
//+------------------------------------------------------------------+
bool ArrowDownMove(const long   chart_ID=0,       // ID do gr√°fico
                   const string name=&quot;ArrowDown&quot;, // nome do objeto
                   datetime     time=0,           // coordenada do ponto de ancoragem 
                   double       price=0)          // coordenada do ponto de ancoragem 
  {
//--- se a posi√ß√£o do ponto n√£o est√° definida, mover para a barra atual tendo o pre√ßo 
   if(!time)
      time=TimeCurrent();
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- redefine o valor de erro
   ResetLastError();
//--- mover o ponto de ancoragem
   if(!ObjectMove(chart_ID,name,0,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao mover o ponto de ancoragem! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Alterar o tipo de ancoragem do sinal Arrow Down¬†                 |
//+------------------------------------------------------------------+
bool ArrowDownAnchorChange(const long              chart_ID=0,        // ID do gr√°fico
                           const string            name=&quot;ArrowDown&quot;,  // nome do objet
                           const ENUM_ARROW_ANCHOR anchor=ANCHOR_TOP) // tipo de ancor
  {
//--- redefine o valor de erro
   ResetLastError();
//--- alterar a ancoragem do ponto de loca√ß√£o
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_ANCHOR,anchor))
     {
      Print(__FUNCTION__,
            &quot;: falha para alterar o tipo de ancoragem! C√≥digo de erro = &quot;,GetLastError
      return(false);
     }
//--- sucesso na execu√ß√£o</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
589
</p>
<pre><code class="language-mql5">
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Excluir sinal Arrow Down¬†                                        |
//+------------------------------------------------------------------+
bool ArrowDownDelete(const long   chart_ID=0,       // ID do gr√°fico
                     const string name=&quot;ArrowDown&quot;) // nome do sinal
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir o sinal
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,
            &quot;: falha ao excluir o sinal\&quot;Arrow Down\&quot;! C√≥digo de erro = &quot;,GetLastError
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Verificar valores de ponto de ancoragem e definir valores padr√£o¬†|
//| para aqueles vazios¬†                                             |
//+------------------------------------------------------------------+
void ChangeArrowEmptyPoint(datetime &amp;time,double &amp;price)
  {
//--- se o tempo do ponto n√£o est√° definido, ser√° na barra atual
   if(!time)
      time=TimeCurrent();
//--- se o pre√ßo do ponto n√£o est√° definido, ele ter√° valor Bid
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- verificar a exatid√£o dos par√¢metros de entrada
   if(InpDate&lt;0 || InpDate&gt;100 || InpPrice&lt;0 || InpPrice&gt;100)
     {
      Print(&quot;Erro! Valores incorretos dos par√¢metros de entrada!&quot;);
      return;
     }
//--- n√∫mero de barras vis√≠veis na janela do gr√°fico
   int bars=(int)ChartGetInteger(0,CHART_VISIBLE_BARS);
//--- tamanho do array de pre√ßo
   int accuracy=1000;
//--- arrays para armazenar data e valores de pre√ßo para serem usados</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
590
</p>
<pre><code class="language-mql5">
//--- para definir e alterar sinal das coordenadas do ponto de ancoragem
   datetime date[];
   double   price[];
//--- aloca√ß√£o de mem√≥ria
   ArrayResize(date,bars);
   ArrayResize(price,accuracy);
//--- preencher o array das datas
   ResetLastError();
   if(CopyTime(Symbol(),Period(),0,bars,date)==-1)
     {
      Print(&quot;Falha ao copiar valores de tempo! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- preencher o array de pre√ßos
//--- encontrar os maiores e menores valores do gr√°fico
   double max_price=ChartGetDouble(0,CHART_PRICE_MAX);
   double min_price=ChartGetDouble(0,CHART_PRICE_MIN);
//--- definir uma etapa de mudan√ßa de um pre√ßo e preencher o array
   double step=(max_price-min_price)/accuracy;
   for(int i=0;i&lt;accuracy;i++)
      price[i]=min_price+i*step;
//--- definir os pontos para desenhar o sinal
   int d=InpDate*(bars-1)/100;
   int p=InpPrice*(accuracy-1)/100;
//--- criar o sinal Arrow Down no gr√°fico
   if(!ArrowDownCreate(0,InpName,0,date[d],price[p],InpAnchor,InpColor,
      InpStyle,InpWidth,InpBack,InpSelection,InpHidden,InpZOrder))
     {
      return;
     }
//--- redesenhar o gr√°fico e esperar por um segundo
   ChartRedraw();
   Sleep(1000);
//--- agora, mover o ponto de ancoragem e alterar sua posi√ß√£o em rela√ß√£o ao sinal
//--- contador de loop
   int v_steps=accuracy/2;
//--- mover o ponto de ancoragem
   for(int i=0;i&lt;v_steps;i++)
     {
      //--- usar o seguinte valor
      if(p&gt;1)
         p-=1;
      //--- mover o ponto
      if(!ArrowDownMove(0,InpName,date[d],price[p]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
591
</p>
<pre><code class="language-mql5">
      ChartRedraw();
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- alterar a localiza√ß√£o do ponto de ancoragem relativa ao sinal
   ArrowDownAnchorChange(0,InpName,ANCHOR_TOP);
//--- redesenhar o gr√°fico
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//--- deletar o sinal do gr√°fico
   ArrowDownDelete(0,InpName);
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
592
<h3>OBJ_ARROW_STOP</h3>
Sinal Stop.
<h3>Observa√ß√£o</h3>
Posi√ß√£o do ponto de ancoragem relativa ao sinal pode ser selecionado a partir do enumerador
ENUM_ARROW_ANCHOR.
Sinais de grande porte (mais de 5) somente ser√£o criados, definindo corretamente o valor da
propriedade OBJPROP_WIDTH ao escrever um c√≥digo no MetaEditor.
<h3>Exemplo</h3>
O seguinte script cria e move sinal Stop no gr√°fico. Fun√ß√µes especiais t√™m sido desenvolvidas para
criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas fun√ß√µes &quot;as is&quot; em seus
pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script desenha sinal\&quot;Stop\&quot;.&quot;
#property description &quot;Coordenadas do ponto de ancoragem √© definido em&quot;
#property description &quot;porcentagem do tamanho da janela de gr√°fico.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string            InpName=&quot;ArrowStop&quot;;     // Nome do sinal
input int               InpDate=10;              // Ponto de ancoragem da data em %
input int               InpPrice=50;             // Ponto de ancoragem do pre√ßo em %
input ENUM_ARROW_ANCHOR InpAnchor=ANCHOR_BOTTOM; // Tipo de ancoragem
input color             InpColor=clrRed;         // Cor do sinal</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
593
</p>
<pre><code class="language-mql5">
input ENUM_LINE_STYLE   InpStyle=STYLE_DOT;      // Estilo de linha da borda
input int               InpWidth=5;              // Tamanho do Sinal
input bool              InpBack=false;           // Fundo do sinal
input bool              InpSelection=false;      // Destaque para mover
input bool              InpHidden=true;          // Ocultar na lista de objetos
input long              InpZOrder=0;             // Prioridade para clique do mouse
//+------------------------------------------------------------------+
//| Criar sinal Stop¬†                                                |
//+------------------------------------------------------------------+
bool ArrowStopCreate(const long              chart_ID=0,           // ID do gr√°fico
                     const string            name=&quot;ArrowStop&quot;,     // nome do sinal
                     const int               sub_window=0,         // √≠ndice da sub-ja
                     datetime                time=0,               // ponto de ancorag
                     double                  price=0,              // ponto de ancorag
                     const ENUM_ARROW_ANCHOR anchor=ANCHOR_BOTTOM, // tipo de ancorage
                     const color             clr=clrRed,           // cor do sinal
                     const ENUM_LINE_STYLE   style=STYLE_SOLID,    // estilo da linha 
                     const int               width=3,              // tamanho do sinal
                     const bool              back=false,           // no fundo
                     const bool              selection=true,       // destaque para mo
                     const bool              hidden=true,          // Ocultar na lista
                     const long              z_order=0)            // prioridade para 
  {
//--- definir as coordenadas de pontos de ancoragem, se eles n√£o est√£o definidos
   ChangeArrowEmptyPoint(time,price);
//--- redefine o valor de erro
   ResetLastError();
//--- criar o sinal
   if(!ObjectCreate(chart_ID,name,OBJ_ARROW_STOP,sub_window,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar o sinal\&quot;Stop\&quot;! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- tipo de defini√ß√£o de ancoragem
   ObjectSetInteger(chart_ID,name,OBJPROP_ANCHOR,anchor);
//--- definir uma cor de sinal
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir o estilo da linha da borda
   ObjectSetInteger(chart_ID,name,OBJPROP_STYLE,style);
//--- tamanho da defini√ß√£o do sinal
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,width);
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- permitir (true) ou desabilitar (false) o modo de movimento do sinal com o mouse
//--- ao criar um objeto gr√°fico usando a fun√ß√£o ObjectCreate, o objeto n√£o pode ser
//--- destacado e movimentado por padr√£o. Dentro deste m√©todo, o par√¢metro de sele√ß√£o
//--- √© verdade por padr√£o, tornando poss√≠vel destacar e mover o objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
594
</p>
<pre><code class="language-mql5">
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mover ponto de ancoragem¬†                                        |
//+------------------------------------------------------------------+
bool ArrowStopMove(const long   chart_ID=0,       // ID do gr√°fico
                   const string name=&quot;ArrowStop&quot;, // nome do objeto
                   datetime     time=0,           // coordenada do ponto de ancoragem 
                   double       price=0)          // coordenada do ponto de ancoragem 
  {
//--- se a posi√ß√£o do ponto n√£o est√° definida, mover para a barra atual tendo o pre√ßo 
   if(!time)
      time=TimeCurrent();
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- redefine o valor de erro
   ResetLastError();
//--- mover o ponto de ancoragem
   if(!ObjectMove(chart_ID,name,0,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao mover o ponto de ancoragem! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Alterar tipo de ancoragem do sinal Stop¬†                         |
//+------------------------------------------------------------------+
bool ArrowStopAnchorChange(const long              chart_ID=0,        // ID do gr√°fico
                           const string            name=&quot;ArrowStop&quot;,  // nome do objet
                           const ENUM_ARROW_ANCHOR anchor=ANCHOR_TOP) // posi√ß√£o do po
  {
//--- redefine o valor de erro
   ResetLastError();
//--- alterar tipo de ancoragem
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_ANCHOR,anchor))
     {
      Print(__FUNCTION__,
            &quot;: falha para alterar o tipo de ancoragem! C√≥digo de erro = &quot;,GetLastError
      return(false);
     }</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
595
</p>
<pre><code class="language-mql5">
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Excluir sinal Stop¬†                                              |
//+------------------------------------------------------------------+
bool ArrowStopDelete(const long   chart_ID=0,       // ID do gr√°fico
                     const string name=&quot;ArrowStop&quot;) // nome da etiqueta
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir o sinal
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,
            &quot;: falha ao excluir o sinal \&quot;Stop\&quot;! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Verificar valores de ponto de ancoragem e definir valores padr√£o¬†|
//| para aqueles vazios¬†                                             |
//+------------------------------------------------------------------+
void ChangeArrowEmptyPoint(datetime &amp;time,double &amp;price)
  {
//--- se o tempo do ponto n√£o est√° definido, ser√° na barra atual
   if(!time)
      time=TimeCurrent();
//--- se o pre√ßo do ponto n√£o est√° definido, ele ter√° valor Bid
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- verificar a exatid√£o dos par√¢metros de entrada
   if(InpDate&lt;0 || InpDate&gt;100 || InpPrice&lt;0 || InpPrice&gt;100)
     {
      Print(&quot;Erro! Valores incorretos dos par√¢metros de entrada!&quot;);
      return;
     }
//--- n√∫mero de barras vis√≠veis na janela do gr√°fico
   int bars=(int)ChartGetInteger(0,CHART_VISIBLE_BARS);
//--- tamanho do array de pre√ßo
   int accuracy=1000;</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
596
</p>
<pre><code class="language-mql5">
//--- arrays para armazenar data e valores de pre√ßo para serem usados
//--- para definir e alterar sinal das coordenadas do ponto de ancoragem
   datetime date[];
   double   price[];
//--- aloca√ß√£o de mem√≥ria
   ArrayResize(date,bars);
   ArrayResize(price,accuracy);
//--- preencher o array das datas
   ResetLastError();
   if(CopyTime(Symbol(),Period(),0,bars,date)==-1)
     {
      Print(&quot;Falha ao copiar valores de tempo! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- preencher o array de pre√ßos
//--- encontrar os maiores e menores valores do gr√°fico
   double max_price=ChartGetDouble(0,CHART_PRICE_MAX);
   double min_price=ChartGetDouble(0,CHART_PRICE_MIN);
//--- definir uma etapa de mudan√ßa de um pre√ßo e preencher o array
   double step=(max_price-min_price)/accuracy;
   for(int i=0;i&lt;accuracy;i++)
      price[i]=min_price+i*step;
//--- definir os pontos para desenhar o sinal
   int d=InpDate*(bars-1)/100;
   int p=InpPrice*(accuracy-1)/100;
//--- criar sinal Stop no gr√°fico
   if(!ArrowStopCreate(0,InpName,0,date[d],price[p],InpAnchor,InpColor,
      InpStyle,InpWidth,InpBack,InpSelection,InpHidden,InpZOrder))
     {
      return;
     }
//--- redesenhar o gr√°fico e esperar por um segundo
   ChartRedraw();
   Sleep(1000);
//--- agora, mover o ponto de ancoragem e alterar sua posi√ß√£o em rela√ß√£o ao sinal
//--- contador de loop
   int h_steps=bars*2/5;
//--- mover o ponto de ancoragem
   for(int i=0;i&lt;h_steps;i++)
     {
      //--- usar o seguinte valor
      if(d&lt;bars-1)
         d+=1;
      //--- mover o ponto
      if(!ArrowStopMove(0,InpName,date[d],price[p]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
597
</p>
<pre><code class="language-mql5">
      //--- redesenhar o gr√°fico
      ChartRedraw();
      // 0.025 segundos de atraso
      Sleep(25);
     }
//--- alterar a localiza√ß√£o do ponto de ancoragem relativa ao sinal
   ArrowStopAnchorChange(0,InpName,ANCHOR_TOP);
//--- redesenhar o gr√°fico
   ChartRedraw();
//--- contador de loop
   h_steps=bars*2/5;
//--- mover o ponto de ancoragem
   for(int i=0;i&lt;h_steps;i++)
     {
      //--- usar o seguinte valor
      if(d&lt;bars-1)
         d+=1;
      //--- mover o ponto
      if(!ArrowStopMove(0,InpName,date[d],price[p]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
      // 0.025 segundos de atraso
      Sleep(25);
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- deletar o sinal do gr√°fico
   ArrowStopDelete(0,InpName);
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
598
<h3>OBJ_ARROW_CHECK</h3>
Check sign.
<h3>Observa√ß√£o</h3>
Posi√ß√£o do ponto de ancoragem relativa ao sinal pode ser selecionado a partir do enumerador
ENUM_ARROW_ANCHOR.
Sinais de grande porte (mais de 5) somente ser√£o criados, definindo corretamente o valor da
propriedade OBJPROP_WIDTH ao escrever um c√≥digo no MetaEditor.
<h3>Exemplo</h3>
O script seguinte cria e move o sinal Check no gr√°fico. Fun√ß√µes especiais t√™m sido desenvolvidas
para criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas fun√ß√µes &quot;as is&quot; em
seus pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script desenha o sinal \&quot;Check\&quot;.&quot;
#property description &quot;Coordenadas do ponto de ancoragem √© definido em&quot;
#property description &quot;porcentagem do tamanho da janela de gr√°fico.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string            InpName=&quot;ArrowCheck&quot;; // Nome do sinal
input int               InpDate=10;           // Ponto de ancoragem da data em %
input int               InpPrice=50;          // Ponto de ancoragem do pre√ßo em %
input ENUM_ARROW_ANCHOR InpAnchor=ANCHOR_TOP; // Tipo de ancoragem
input color             InpColor=clrRed;      // Cor do sinal</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
599
</p>
<pre><code class="language-mql5">
input ENUM_LINE_STYLE   InpStyle=STYLE_DOT;   // Estilo da linha da borda
input int               InpWidth=5;           // Tamanho do sinal
input bool              InpBack=false;        // Sinal do fundo
input bool              InpSelection=false;   // Destaque para mover
input bool              InpHidden=true;       // Ocultar na lista de objetos
input long              InpZOrder=0;          // Prioridade para clicar no mouse
//+------------------------------------------------------------------+
//| Criar sinal Check¬†                                               |
//+------------------------------------------------------------------+
bool ArrowCheckCreate(const long              chart_ID=0,           // ID do gr√°fico
                      const string            name=&quot;ArrowCheck&quot;,    // nome do sinal
                      const int               sub_window=0,         // √≠ndice da sub-j
                      datetime                time=0,               // ponto de ancora
                      double                  price=0,              // ponto de ancora
                      const ENUM_ARROW_ANCHOR anchor=ANCHOR_BOTTOM, // tipo de ancorag
                      const color             clr=clrRed,           // cor do sinal
                      const ENUM_LINE_STYLE   style=STYLE_SOLID,    // estilo a linha 
                      const int               width=3,              // tamanho do sina
                      const bool              back=false,           // no fundo
                      const bool              selection=true,       // destaque para m
                      const bool              hidden=true,          // Ocultar na list
                      const long              z_order=0)            // prioridade para
  {
//--- definir as coordenadas de pontos de ancoragem, se eles n√£o est√£o definidos
   ChangeArrowEmptyPoint(time,price);
//--- redefine o valor de erro
   ResetLastError();
//--- criar o sinal
   if(!ObjectCreate(chart_ID,name,OBJ_ARROW_CHECK,sub_window,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar o sinal\&quot;Check\&quot;! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- tipo de defini√ß√£o de ancoragem
   ObjectSetInteger(chart_ID,name,OBJPROP_ANCHOR,anchor);
//--- definir uma cor de sinal
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir o estilo da linha da borda
   ObjectSetInteger(chart_ID,name,OBJPROP_STYLE,style);
//--- tamanho da defini√ß√£o do sinal
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,width);
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- permitir (true) ou desabilitar (false) o modo de movimento do sinal com o mouse
//--- ao criar um objeto gr√°fico usando a fun√ß√£o ObjectCreate, o objeto n√£o pode ser
//--- destacado e movimentado por padr√£o. Dentro deste m√©todo, o par√¢metro de sele√ß√£o
//--- √© verdade por padr√£o, tornando poss√≠vel destacar e mover o objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
600
</p>
<pre><code class="language-mql5">
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mover ponto de ancoragem¬†                                        |
//+------------------------------------------------------------------+
bool ArrowCheckMove(const long   chart_ID=0,        // ID do gr√°fico
                    const string name=&quot;ArrowCheck&quot;, // nome do objeto
                    datetime     time=0,            // coordenada do ponto de ancorage
                    double       price=0)           // coordenada do ponto de ancorage
  {
//--- se a posi√ß√£o do ponto n√£o est√° definida, mover para a barra atual tendo o pre√ßo 
   if(!time)
      time=TimeCurrent();
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- redefine o valor de erro
   ResetLastError();
//--- mover o ponto de ancoragem
   if(!ObjectMove(chart_ID,name,0,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao mover o ponto de ancoragem! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Alterar o tipo de ancoragem Check¬†                               |
//+------------------------------------------------------------------+
bool ArrowCheckAnchorChange(const long              chart_ID=0,        // ID do gr√°fic
                            const string            name=&quot;ArrowCheck&quot;, // nome do obje
                            const ENUM_ARROW_ANCHOR anchor=ANCHOR_TOP) // tipo de anco
  {
//--- redefine o valor de erro
   ResetLastError();
//--- alterar tipo de ancoragem
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_ANCHOR,anchor))
     {
      Print(__FUNCTION__,
            &quot;: falha para alterar o tipo de ancoragem! C√≥digo de erro = &quot;,GetLastError
      return(false);
     }</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
601
</p>
<pre><code class="language-mql5">
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Excluir os sinal Check¬†                                          |
//+------------------------------------------------------------------+
bool ArrowCheckDelete(const long   chart_ID=0,        // ID do gr√°fico
                      const string name=&quot;ArrowCheck&quot;) // nome do sinal
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir o sinal
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,
            &quot;: falha ao excluir o sinal \&quot;Check\&quot;! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Verificar valores de ponto de ancoragem e definir valores padr√£o¬†|
//| para aqueles vazios¬†                                             |
//+------------------------------------------------------------------+
void ChangeArrowEmptyPoint(datetime &amp;time,double &amp;price)
  {
//--- se o tempo do ponto n√£o est√° definido, ser√° na barra atual
   if(!time)
      time=TimeCurrent();
//--- se o pre√ßo do ponto n√£o est√° definido, ele ter√° valor Bid
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- verificar a exatid√£o dos par√¢metros de entrada
   if(InpDate&lt;0 || InpDate&gt;100 || InpPrice&lt;0 || InpPrice&gt;100)
     {
      Print(&quot;Erro! Valores incorretos dos par√¢metros de entrada!&quot;);
      return;
     }
//--- n√∫mero de barras vis√≠veis na janela do gr√°fico
   int bars=(int)ChartGetInteger(0,CHART_VISIBLE_BARS);
//--- tamanho do array de pre√ßo
   int accuracy=1000;</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
602
</p>
<pre><code class="language-mql5">
//--- arrays para armazenar data e valores de pre√ßo para serem usados
//--- para definir e alterar sinal das coordenadas do ponto de ancoragem
   datetime date[];
   double   price[];
//--- aloca√ß√£o de mem√≥ria
   ArrayResize(date,bars);
   ArrayResize(price,accuracy);
//--- preencher o array das datas
   ResetLastError();
   if(CopyTime(Symbol(),Period(),0,bars,date)==-1)
     {
      Print(&quot;Falha ao copiar valores de tempo! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- preencher o array de pre√ßos
//--- encontrar os maiores e menores valores do gr√°fico
   double max_price=ChartGetDouble(0,CHART_PRICE_MAX);
   double min_price=ChartGetDouble(0,CHART_PRICE_MIN);
//--- definir uma etapa de mudan√ßa de um pre√ßo e preencher o array
   double step=(max_price-min_price)/accuracy;
   for(int i=0;i&lt;accuracy;i++)
      price[i]=min_price+i*step;
//--- definir os pontos para desenhar o sinal
   int d=InpDate*(bars-1)/100;
   int p=InpPrice*(accuracy-1)/100;
//--- criar o sinal Check no gr√°fico
   if(!ArrowCheckCreate(0,InpName,0,date[d],price[p],InpAnchor,InpColor,
      InpStyle,InpWidth,InpBack,InpSelection,InpHidden,InpZOrder))
     {
      return;
     }
//--- redesenhar o gr√°fico e esperar por um segundo
   ChartRedraw();
   Sleep(1000);
//--- agora, mover o ponto de ancoragem e alterar sua posi√ß√£o em rela√ß√£o ao sinal
//--- contador de loop
   int h_steps=bars*2/5;
//--- mover o ponto de ancoragem
   for(int i=0;i&lt;h_steps;i++)
     {
      //--- usar o seguinte valor
      if(d&lt;bars-1)
         d+=1;
      //--- mover o ponto
      if(!ArrowCheckMove(0,InpName,date[d],price[p]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
603
</p>
<pre><code class="language-mql5">
      //--- redesenhar o gr√°fico
      ChartRedraw();
      // 0.025 segundos de atraso
      Sleep(25);
     }
//--- alterar a localiza√ß√£o do ponto de ancoragem relativa ao sinal
   ArrowCheckAnchorChange(0,InpName,ANCHOR_BOTTOM);
//--- redesenhar o gr√°fico
   ChartRedraw();
//--- contador de loop
   h_steps=bars*2/5;
//--- mover o ponto de ancoragem
   for(int i=0;i&lt;h_steps;i++)
     {
      //--- usar o seguinte valor
      if(d&lt;bars-1)
         d+=1;
      //--- mover o ponto
      if(!ArrowCheckMove(0,InpName,date[d],price[p]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
      // 0.025 segundos de atraso
      Sleep(25);
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- deletar o sinal do gr√°fico
   ArrowCheckDelete(0,InpName);
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
604
<h3>OBJ_ARROW_LEFT_PRICE</h3>
<h3>Etiqueta de Pre√ßo √† Esquerda</h3>
<h3>Exemplo</h3>
O seguinte script cria e move a Etiqueta Pre√ßo Lado Esquerdo no gr√°fico. Fun√ß√µes especiais t√™m
sido desenvolvidas para criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas
fun√ß√µes &quot;as is&quot; em seus pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script cria a Etiqueta Pre√ßo Lado Esquerdo no gr√°fico.&quot;
#property description &quot;Coordenadas do ponto de ancoragem √© definido em&quot;
#property description &quot;porcentagem do tamanho da janela de gr√°fico.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string            InpName=&quot;LeftPrice&quot;;  // Nome da Etiqueta Pre√ßo
input int               InpDate=100;          // Ponto de ancoragem da data em %
input int               InpPrice=10;          // Ponto de ancoragem do pre√ßo em %
input color             InpColor=clrRed;      // Cor da Etiqueta Pre√ßo
input ENUM_LINE_STYLE   InpStyle=STYLE_SOLID; // Estilo de linha da borda
input int               InpWidth=2;           // Tamanho da Etiqueta Pre√ßo
input bool              InpBack=false;        // Fundo Etiqueta
input bool              InpSelection=true;    // Destaque para mover
input bool              InpHidden=true;       // Ocultar na lista de objetos
input long              InpZOrder=0;          // Prioridade para clicar no mouse
//+------------------------------------------------------------------+
//| Criar Etiqueta Pre√ßo Lado Esquerdo¬†                             |</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
605
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
bool ArrowLeftPriceCreate(const long            chart_ID=0,        // ID do gr√°fico
                          const string          name=&quot;LeftPrice&quot;,  // nome da etiqueta
                          const int             sub_window=0,      // √≠ndice da sub-ja
                          datetime              time=0,            // ponto de ancorag
                          double                price=0,           // ponto de ancorag
                          const color           clr=clrRed,        // cor da etiqueta 
                          const ENUM_LINE_STYLE style=STYLE_SOLID, // estilo de linha 
                          const int             width=1,           // tamanho da etiqu
                          const bool            back=false,        // no fundo
                          const bool            selection=true,    // destaque para mo
                          const bool            hidden=true,       // ocultar na lista
                          const long            z_order=0)         // prioridade para 
  {
//--- definir as coordenadas de pontos de ancoragem, se eles n√£o est√£o definidos
   ChangeArrowEmptyPoint(time,price);
//--- redefine o valor de erro
   ResetLastError();
//--- criar uma etiqueta de pre√ßo
   if(!ObjectCreate(chart_ID,name,OBJ_ARROW_LEFT_PRICE,sub_window,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar a etiqueta pre√ßo lado esquerdo! C√≥digo de erro = &quot;,GetLa
      return(false);
     }
//--- definir a cor da etiqueta
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir o estilo da linha da borda
   ObjectSetInteger(chart_ID,name,OBJPROP_STYLE,style);
//--- definir o tamanho da etiqueta
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,width);
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- Habilitar (true) ou desabilitar (false) o modo de movimento da etiqueta pelo mou
//--- ao criar um objeto gr√°fico usando a fun√ß√£o ObjectCreate, o objeto n√£o pode ser
//--- destacado e movimentado por padr√£o. Dentro deste m√©todo, o par√¢metro de sele√ß√£o
//--- √© verdade por padr√£o, tornando poss√≠vel destacar e mover o objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mover ponto de ancoragem¬†                                        |
//+------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
606
</p>
<pre><code class="language-mql5">
bool ArrowLeftPriceMove(const long   chart_ID=0,       // ID do gr√°fico
                        const string name=&quot;LeftPrice&quot;, // nome da etiqueta
                        datetime     time=0,           // coordenada do ponto de ancor
                        double       price=0)          // coordenada do ponto de ancor
  {
//--- se a posi√ß√£o do ponto n√£o est√° definida, mover para a barra atual tendo o pre√ßo 
   if(!time)
      time=TimeCurrent();
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- redefine o valor de erro
   ResetLastError();
//--- mover o ponto de ancoragem
   if(!ObjectMove(chart_ID,name,0,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao mover o ponto de ancoragem! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Excluir a etiqueta pre√ßo lado esquerdo do gr√°fico¬†               |
//+------------------------------------------------------------------+
bool ArrowLeftPriceDelete(const long   chart_ID=0,       // ID gr√°fico
                          const string name=&quot;LeftPrice&quot;) // nome etiqueta
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir a etiqueta
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,
            &quot;: falha ao excluir a etiqueta pre√ßo lado esquerda! C√≥digo de erro = &quot;,Get
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Verificar valores de ponto de ancoragem e definir valores padr√£o¬†|
//| para aqueles vazios¬†                                             |
//+------------------------------------------------------------------+
void ChangeArrowEmptyPoint(datetime &amp;time,double &amp;price)
  {
//--- se o tempo do ponto n√£o est√° definido, ser√° na barra atual
   if(!time)
      time=TimeCurrent();</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
607
</p>
<pre><code class="language-mql5">
//--- se o pre√ßo do ponto n√£o est√° definido, ele ter√° valor Bid
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- verificar a exatid√£o dos par√¢metros de entrada
   if(InpDate&lt;0 || InpDate&gt;100 || InpPrice&lt;0 || InpPrice&gt;100)
     {
      Print(&quot;Erro! Valores incorretos dos par√¢metros de entrada!&quot;);
      return;
     }
//--- n√∫mero de barras vis√≠veis na janela do gr√°fico
   int bars=(int)ChartGetInteger(0,CHART_VISIBLE_BARS);
//--- tamanho do array de pre√ßo
   int accuracy=1000;
//--- arrays para armazenar data e valores de pre√ßo para serem usados
//--- para configura√ß√£o e altera√ß√£o das coordenadas do ponto de ancoragem da etiqueta
   datetime date[];
   double   price[];
//--- aloca√ß√£o de mem√≥ria
   ArrayResize(date,bars);
   ArrayResize(price,accuracy);
//--- preencher o array das datas
   ResetLastError();
   if(CopyTime(Symbol(),Period(),0,bars,date)==-1)
     {
      Print(&quot;Falha ao copiar valores de tempo! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- preencher o array de pre√ßos
//--- encontrar os maiores e menores valores do gr√°fico
   double max_price=ChartGetDouble(0,CHART_PRICE_MAX);
   double min_price=ChartGetDouble(0,CHART_PRICE_MIN);
//--- definir uma etapa de mudan√ßa de um pre√ßo e preencher o array
   double step=(max_price-min_price)/accuracy;
   for(int i=0;i&lt;accuracy;i++)
      price[i]=min_price+i*step;
//--- definir os pontos por desenhar a etiqueta
   int d=InpDate*(bars-1)/100;
   int p=InpPrice*(accuracy-1)/100;
//--- criar etiqueta pre√ßo lado esquerdo no gr√°fico
   if(!ArrowLeftPriceCreate(0,InpName,0,date[d],price[p],InpColor,
      InpStyle,InpWidth,InpBack,InpSelection,InpHidden,InpZOrder))
     {
      return;</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
608
</p>
<pre><code class="language-mql5">
     }
//--- redesenhar o gr√°fico e esperar por um segundo
   ChartRedraw();
   Sleep(1000);
//--- agora, mover o ponto de ancoragem
//--- contador de loop
   int v_steps=accuracy*4/5;
//--- mover o ponto de ancoragem
   for(int i=0;i&lt;v_steps;i++)
     {
      //--- usar o seguinte valor
      if(p&lt;accuracy-1)
         p+=1;
      //--- mover o ponto
      if(!ArrowLeftPriceMove(0,InpName,date[d],price[p]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- excluir a etiqueta do gr√°fico
   ArrowLeftPriceDelete(0,InpName);
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
609
<h3>OBJ_ARROW_RIGHT_PRICE</h3>
Etiqueta Pre√ßo Lado Direito.
<h3>Exemplo</h3>
O seguinte script cria e move a Etiqueta Pre√ßo Lado Direito no gr√°fico. Fun√ß√µes especiais t√™m sido
desenvolvidas para criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas
fun√ß√µes &quot;as is&quot; em seus pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script cria a Etiqueta Pre√ßo Lado Direito no gr√°fico.&quot;
#property description &quot;Coordenadas do ponto de ancoragem √© definido em&quot;
#property description &quot;porcentagem do tamanho da janela de gr√°fico.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string            InpName=&quot;RightPrice&quot;; // Nome da Etiqueta Pre√ßo
input int               InpDate=0;            // Ponto de ancoragem da data em %
input int               InpPrice=90;          // Ponto de ancoragem do pre√ßo em %
input color             InpColor=clrRed;      // Cor da Etiqueta Pre√ßo
input ENUM_LINE_STYLE   InpStyle=STYLE_SOLID; // Estilo de linha da borda
input int               InpWidth=2;           // Tamanho da Etiqueta Pre√ßo
input bool              InpBack=false;        // Fundo Etiqueta
input bool              InpSelection=true;    // Destaque para mover
input bool              InpHidden=true;       // Ocultar na lista de objetos
input long              InpZOrder=0;          // Prioridade para clicar no mouse
//+------------------------------------------------------------------+
//| Criar a etiqueta pre√ßo lado direito¬†                             |</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
610
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
bool ArrowRightPriceCreate(const long            chart_ID=0,        // ID do gr√°fico
                           const string          name=&quot;RightPrice&quot;, // nome do pre√ßo d
                           const int             sub_window=0,      // √≠ndice da sub-j
                           datetime              time=0,            // ponto de ancora
                           double                price=0,           // ponto de ancora
                           const color           clr=clrRed,        // cor da etiqueta
                           const ENUM_LINE_STYLE style=STYLE_SOLID, // estilo de linha
                           const int             width=1,           // tamanho da etiq
                           const bool            back=false,        // no fundo
                           const bool            selection=true,    // destaque para m
                           const bool            hidden=true,       // ocultar na list
                           const long            z_order=0)         // prioridade para
  {
//--- definir as coordenadas de pontos de ancoragem, se eles n√£o est√£o definidos
   ChangeArrowEmptyPoint(time,price);
//--- redefine o valor de erro
   ResetLastError();
//--- criar uma etiqueta de pre√ßo
   if(!ObjectCreate(chart_ID,name,OBJ_ARROW_RIGHT_PRICE,sub_window,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar a etiqueta de pre√ßo lado direito! C√≥digo de erro = &quot;,Get
      return(false);
     }
//--- definir a cor da etiqueta
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir o estilo da linha da borda
   ObjectSetInteger(chart_ID,name,OBJPROP_STYLE,style);
//--- definir o tamanho da etiqueta
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,width);
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- Habilitar (true) ou desabilitar (false) o modo de movimento da etiqueta pelo mou
//--- ao criar um objeto gr√°fico usando a fun√ß√£o ObjectCreate, o objeto n√£o pode ser
//--- destacado e movimentado por padr√£o. Dentro deste m√©todo, o par√¢metro de sele√ß√£o
//--- √© verdade por padr√£o, tornando poss√≠vel destacar e mover o objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mover ponto de ancoragem¬†                                        |
//+------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
611
</p>
<pre><code class="language-mql5">
bool ArrowRightPriceMove(const long   chart_ID=0,        // ID do gr√°fico
                         const string name=&quot;RightPrice&quot;, // nome da etiqueta
                         datetime     time=0,            // coordenada do ponto de anc
                         double       price=0)           // coordenada do ponto de anc
  {
//--- se a posi√ß√£o do ponto n√£o est√° definida, mover para a barra atual tendo o pre√ßo 
   if(!time)
      time=TimeCurrent();
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- redefine o valor de erro
   ResetLastError();
//--- mover o ponto de ancoragem
   if(!ObjectMove(chart_ID,name,0,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao mover o ponto de ancoragem! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Excluir a etiqueta de pre√ßo lado direito do gr√°fico¬†             |
//+------------------------------------------------------------------+
bool ArrowRightPriceDelete(const long   chart_ID=0,        // ID Gr√°fico
                           const string name=&quot;RightPrice&quot;) // nome da etiqueta
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir a etiqueta
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,
            &quot;: falha ao excluir a etiqueta de pre√ßo lado direito! C√≥digo de erro = &quot;,G
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Verificar valores de ponto de ancoragem e definir valores padr√£o¬†|
//| para aqueles vazios¬†                                             |
//+------------------------------------------------------------------+
void ChangeArrowEmptyPoint(datetime &amp;time,double &amp;price)
  {
//--- se o tempo do ponto n√£o est√° definido, ser√° na barra atual
   if(!time)
      time=TimeCurrent();</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
612
</p>
<pre><code class="language-mql5">
//--- se o pre√ßo do ponto n√£o est√° definido, ele ter√° valor Bid
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- verificar a exatid√£o dos par√¢metros de entrada
   if(InpDate&lt;0 || InpDate&gt;100 || InpPrice&lt;0 || InpPrice&gt;100)
     {
      Print(&quot;Erro! Valores incorretos dos par√¢metros de entrada!&quot;);
      return;
     }
//--- n√∫mero de barras vis√≠veis na janela do gr√°fico
   int bars=(int)ChartGetInteger(0,CHART_VISIBLE_BARS);
//--- tamanho do array de pre√ßo
   int accuracy=1000;
//--- arrays para armazenar data e valores de pre√ßo para serem usados
//--- para configura√ß√£o e altera√ß√£o das coordenadas do ponto de ancoragem da etiqueta
   datetime date[];
   double   price[];
//--- aloca√ß√£o de mem√≥ria
   ArrayResize(date,bars);
   ArrayResize(price,accuracy);
//--- preencher o array das datas
   ResetLastError();
   if(CopyTime(Symbol(),Period(),0,bars,date)==-1)
     {
      Print(&quot;Falha ao copiar valores de tempo! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- preencher o array de pre√ßos
//--- encontrar os maiores e menores valores do gr√°fico
   double max_price=ChartGetDouble(0,CHART_PRICE_MAX);
   double min_price=ChartGetDouble(0,CHART_PRICE_MIN);
//--- definir uma etapa de mudan√ßa de um pre√ßo e preencher o array
   double step=(max_price-min_price)/accuracy;
   for(int i=0;i&lt;accuracy;i++)
      price[i]=min_price+i*step;
//--- definir os pontos por desenhar a etiqueta
   int d=InpDate*(bars-1)/100;
   int p=InpPrice*(accuracy-1)/100;
//--- criar a etiqueta de pre√ßo lado direito
   if(!ArrowRightPriceCreate(0,InpName,0,date[d],price[p],InpColor,
      InpStyle,InpWidth,InpBack,InpSelection,InpHidden,InpZOrder))
     {
      return;</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
613
</p>
<pre><code class="language-mql5">
     }
//--- redesenhar o gr√°fico e esperar por um segundo
   ChartRedraw();
   Sleep(1000);
//--- agora, mover o ponto de ancoragem
//--- contador de loop
   int v_steps=accuracy*4/5;
//--- mover o ponto de ancoragem
   for(int i=0;i&lt;v_steps;i++)
     {
      //--- usar o seguinte valor
      if(p&gt;1)
         p-=1;
      //--- mover o ponto
      if(!ArrowRightPriceMove(0,InpName,date[d],price[p]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- excluir a etiqueta do gr√°fico
   ArrowRightPriceDelete(0,InpName);
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
614
<h3>OBJ_ARROW_BUY</h3>
Sinal Buy.
<h3>Exemplo</h3>
O seguinte script cria e move o sinal Buy no gr√°fico. Fun√ß√µes especiais t√™m sido desenvolvidas para
criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas fun√ß√µes &quot;as is&quot; em seus
pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script desenha sinais \&quot;Buy\&quot; na janela do gr√°fico.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input color InpColor=C&#x27;3,95,172&#x27;; // Cores dos sinais
//+------------------------------------------------------------------+
//| Criar sinal Buy¬†                                                 |
//+------------------------------------------------------------------+
bool ArrowBuyCreate(const long            chart_ID=0,        // ID de gr√°fico
                    const string          name=&quot;ArrowBuy&quot;,   // nome do sinal
                    const int             sub_window=0,      // √≠ndice da sub-janela
                    datetime              time=0,            // ponto de ancoragem do 
                    double                price=0,           // ponto de ancoragem do 
                    const color           clr=C&#x27;3,95,172&#x27;,   // cor do sinal
                    const ENUM_LINE_STYLE style=STYLE_SOLID, // estilo de linha (quand
                    const int             width=1,           // tamanho da linha (quan
                    const bool            back=false,        // no fundo
                    const bool            selection=false,   // destaque para mover</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
615
</p>
<pre><code class="language-mql5">
                    const bool            hidden=true,       // ocultar na lista de ob
                    const long            z_order=0)         // prioridade para o cliq
  {
//--- definir as coordenadas de pontos de ancoragem, se eles n√£o est√£o definidos
   ChangeArrowEmptyPoint(time,price);
//--- redefine o valor de erro
   ResetLastError();
//--- criar o sinal
   if(!ObjectCreate(chart_ID,name,OBJ_ARROW_BUY,sub_window,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar sinal \&quot;Buy\&quot;! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- definir uma cor de sinal
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir um estilo de linha (quando destacado)
   ObjectSetInteger(chart_ID,name,OBJPROP_STYLE,style);
//--- definir um tamanho de linha (quando destacado)
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,width);
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- permitir (true) ou desabilitar (false) o modo de movimento do sinal com o mouse
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mover ponto de ancoragem¬†                                        |
//+------------------------------------------------------------------+
bool ArrowBuyMove(const long   chart_ID=0,      // ID do gr√°fico
                  const string name=&quot;ArrowBuy&quot;, // nome do objeto
                  datetime     time=0,          // coordenar o ponto de ancoragem do t
                  double       price=0)         // coordenar o ponto de ancoragem do p
  {
//--- se a posi√ß√£o do ponto n√£o est√° definida, mover para a barra atual tendo o pre√ßo 
   if(!time)
      time=TimeCurrent();
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- redefine o valor de erro
   ResetLastError();
//--- mover o ponto de ancoragem
   if(!ObjectMove(chart_ID,name,0,time,price))</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
616
</p>
<pre><code class="language-mql5">
     {
      Print(__FUNCTION__,
            &quot;: falha ao mover o ponto de ancoragem! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Excluir sinal Buy¬†                                               |
//+------------------------------------------------------------------+
bool ArrowBuyDelete(const long   chart_ID=0,      // ID do gr√°fico
                    const string name=&quot;ArrowBuy&quot;) // nome do sinal 
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir o sinal
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,
            &quot;: falha ao excluir o sinal \&quot;Buy\&quot;! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Verificar valores de ponto de ancoragem e definir valores padr√£o¬†|
//| para aqueles vazios¬†                                             |
//+------------------------------------------------------------------+
void ChangeArrowEmptyPoint(datetime &amp;time,double &amp;price)
  {
//--- se o tempo do ponto n√£o est√° definido, ser√° na barra atual
   if(!time)
      time=TimeCurrent();
//--- se o pre√ßo do ponto n√£o est√° definido, ele ter√° valor Bid
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
   datetime date[]; // array para armazenar datas das barras vis√≠veis
   double   low[];  // array para armazenar pre√ßos Baixos das barras vis√≠veis
   double   high[]; // array para armazenar pre√ßos Altos das barras vis√≠veis
//--- n√∫mero de barras vis√≠veis na janela do gr√°fico
   int bars=(int)ChartGetInteger(0,CHART_VISIBLE_BARS);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
617
</p>
<pre><code class="language-mql5">
//--- aloca√ß√£o de mem√≥ria
   ArrayResize(date,bars);
   ArrayResize(low,bars);
   ArrayResize(high,bars);
//--- preencher o array das datas
   ResetLastError();
   if(CopyTime(Symbol(),Period(),0,bars,date)==-1)
     {
      Print(&quot;Falha ao copiar valores de tempo! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- preencher o array dos pre√ßos Baixos
   if(CopyLow(Symbol(),Period(),0,bars,low)==-1)
     {
      Print(&quot;Falha ao copiar os valores dos pre√ßos Baixos! C√≥digo de erro = &quot;,GetLastE
      return;
     }
//--- preencher o array dos pre√ßos Altos
   if(CopyHigh(Symbol(),Period(),0,bars,high)==-1)
     {
      Print(&quot;Falha ao copiar os valores dos pre√ßos Altos! C√≥digo de erro = &quot;,GetLastEr
      return;
     }
//--- criar sinais Buy de ponto de baixa para cada barra vis√≠vel
   for(int i=0;i&lt;bars;i++)
     {
      if(!ArrowBuyCreate(0,&quot;ArrowBuy_&quot;+(string)i,0,date[i],low[i],InpColor))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
      // 0.05 segundos de atraso
      Sleep(50);
     }
//--- mover sinal Buy de ponto alto para cada barra vis√≠vel
   for(int i=0;i&lt;bars;i++)
     {
      if(!ArrowBuyMove(0,&quot;ArrowBuy_&quot;+(string)i,date[i],high[i]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
      // 0.05 segundos de atraso
      Sleep(50);
     }</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
618
</p>
<pre><code class="language-mql5">
//--- excluir sinais Buy
   for(int i=0;i&lt;bars;i++)
     {
      if(!ArrowBuyDelete(0,&quot;ArrowBuy_&quot;+(string)i))
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
      // 0.05 segundos de atraso
      Sleep(50);
     }
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
619
<h3>OBJ_ARROW_SELL</h3>
Sell sign.
<h3>Exemplo</h3>
O seguinte script cria e move o sinal Sell no gr√°fico. Fun√ß√µes especiais t√™m sido desenvolvidas para
criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas fun√ß√µes &quot;as is&quot; em seus
pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script desenha sinal \&quot;Sell\&quot; na janela do gr√°fico.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input color InpColor=C&#x27;225,68,29&#x27;; // Cor do sinal
//+------------------------------------------------------------------+
//| Criar sinal Sell¬†                                                |
//+------------------------------------------------------------------+
bool ArrowSellCreate(const long            chart_ID=0,        // ID do gr√°fico
                     const string          name=&quot;ArrowSell&quot;,  // nome do sinal
                     const int             sub_window=0,      // √≠ndice da sub-janela
                     datetime              time=0,            // ponto de ancoragem do
                     double                price=0,           // ponto de ancoragem do
                     const color           clr=C&#x27;225,68,29&#x27;,  // cor do sinal
                     const ENUM_LINE_STYLE style=STYLE_SOLID, // estilo de linha (quan
                     const int             width=1,           // tamanho da linha (qua
                     const bool            back=false,        // no fundo
                     const bool            selection=false,   // destaque para mover</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
620
</p>
<pre><code class="language-mql5">
                     const bool            hidden=true,       // ocultar na lista de o
                     const long            z_order=0)         // prioridade para cliqu
  {
//--- definir as coordenadas de pontos de ancoragem, se eles n√£o est√£o definidos
   ChangeArrowEmptyPoint(time,price);
//--- redefine o valor de erro
   ResetLastError();
//--- criar o sinal
   if(!ObjectCreate(chart_ID,name,OBJ_ARROW_SELL,sub_window,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar sinal \&quot;Sell\&quot;! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- definir uma cor de sinal
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir um estilo de linha (quando destacado)
   ObjectSetInteger(chart_ID,name,OBJPROP_STYLE,style);
//--- definir um tamanho de linha (quando destacado)
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,width);
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- permitir (true) ou desabilitar (false) o modo de movimento do sinal com o mouse
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mover ponto de ancoragem¬†                                        |
//+------------------------------------------------------------------+
bool ArrowSellMove(const long   chart_ID=0,       // ID do gr√°fico
                   const string name=&quot;ArrowSell&quot;, // nome do objeto
                   datetime     time=0,           // coordenada do ponto de ancoragem 
                   double       price=0)          // coordenada do ponto de ancoragem 
  {
//--- se a posi√ß√£o do ponto n√£o est√° definida, mover para a barra atual tendo o pre√ßo 
   if(!time)
      time=TimeCurrent();
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- redefine o valor de erro
   ResetLastError();
//--- mover o ponto de ancoragem
   if(!ObjectMove(chart_ID,name,0,time,price))</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
621
</p>
<pre><code class="language-mql5">
     {
      Print(__FUNCTION__,
            &quot;: falha ao mover o ponto de ancoragem! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Excluir sinal Sell¬†                                              |
//+------------------------------------------------------------------+
bool ArrowSellDelete(const long   chart_ID=0,       // ID do gr√°fico
                     const string name=&quot;ArrowSell&quot;) // nome do sinal
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir o sinal
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,
            &quot;: falha ao excluir o sinal\&quot;Sell\&quot;! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Verificar valores de ponto de ancoragem e definir valores padr√£o¬†|
//| para aqueles vazios¬†                                             |
//+------------------------------------------------------------------+
void ChangeArrowEmptyPoint(datetime &amp;time,double &amp;price)
  {
//--- se o tempo do ponto n√£o est√° definido, ser√° na barra atual
   if(!time)
      time=TimeCurrent();
//--- se o pre√ßo do ponto n√£o est√° definido, ele ter√° valor Bid
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
   datetime date[]; // array para armazenar datas das barras vis√≠veis
   double   low[];  // array para armazenar pre√ßos Baixos das barras vis√≠veis
   double   high[]; // array para armazenar pre√ßos Altos das barras vis√≠veis
//--- n√∫mero de barras vis√≠veis na janela do gr√°fico
   int bars=(int)ChartGetInteger(0,CHART_VISIBLE_BARS);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
622
</p>
<pre><code class="language-mql5">
//--- aloca√ß√£o de mem√≥ria
   ArrayResize(date,bars);
   ArrayResize(low,bars);
   ArrayResize(high,bars);
//--- preencher o array das datas
   ResetLastError();
   if(CopyTime(Symbol(),Period(),0,bars,date)==-1)
     {
      Print(&quot;Falha ao copiar valores de tempo! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- preencher o array dos pre√ßos Baixos
   if(CopyLow(Symbol(),Period(),0,bars,low)==-1)
     {
      Print(&quot;Falha ao copiar os valores dos pre√ßos Baixos! C√≥digo de erro = &quot;,GetLastE
      return;
     }
//--- preencher o array dos pre√ßos Altos
   if(CopyHigh(Symbol(),Period(),0,bars,high)==-1)
     {
      Print(&quot;Falha ao copiar os valores dos pre√ßos Altos! C√≥digo de erro = &quot;,GetLastEr
      return;
     }
//--- criar sinais Sell no ponto Alto para cada barra vis√≠vel
   for(int i=0;i&lt;bars;i++)
     {
      if(!ArrowSellCreate(0,&quot;ArrowSell_&quot;+(string)i,0,date[i],high[i],InpColor))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
      // 0.05 segundos de atraso
      Sleep(50);
     }
//--- mover sinais Sell para ponto Baixo em cada barra vis√≠vel
   for(int i=0;i&lt;bars;i++)
     {
      if(!ArrowSellMove(0,&quot;ArrowSell_&quot;+(string)i,date[i],low[i]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
      // 0.05 segundos de atraso
      Sleep(50);
     }</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
623
</p>
<pre><code class="language-mql5">
//--- excluir sinal Sell
   for(int i=0;i&lt;bars;i++)
     {
      if(!ArrowSellDelete(0,&quot;ArrowSell_&quot;+(string)i))
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
      // 0.05 segundos de atraso
      Sleep(50);
     }
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
624
<h3>OBJ_ARROW</h3>
Objeto Seta.
<h3>Observa√ß√£o</h3>
<h3>Posi√ß√£o</h3>
do 
ponto 
de 
ancoragem 
relativo 
ao 
objeto 
ser√° 
selecionado 
a 
partir 
do
ENUM_ARROW_ANCHOR.
As setas grandes (mais do que 5) somente ser√£o criadas pela configura√ß√£o de valores apropriados da
propriedade OBJPROP_WIDTH quando escrever um c√≥digo no MetaEditor.
O tipo de seta necess√°rio podem ser selecionado, definindo um dos c√≥digos dos s√≠mbolos da fonte
Wingdings.
<h3>Exemplo</h3>
O seguinte script cria um objeto Seta no gr√°fico e altera seu tipo. Fun√ß√µes especiais t√™m sido
desenvolvidas para criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas
fun√ß√µes &quot;as is&quot; em seus pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script cria uma seta aleat√≥ria na janela do gr√°fico.&quot;
#property description &quot;Coordenadas do ponto de ancoragem √© definido em&quot;
#property description &quot;porcentagem do tamanho da janela de gr√°fico.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string            InpName=&quot;Arrow&quot;;        // Nome da seta
input int               InpDate=50;             // Ponto de ancoragem da data em %</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
625
</p>
<pre><code class="language-mql5">
input int               InpPrice=50;            // Ponto de ancoragem do pre√ßo em %
input ENUM_ARROW_ANCHOR InpAnchor=ANCHOR_TOP;   // Tipo de ancoragem
input color             InpColor=clrDodgerBlue; // Cor da seta
input ENUM_LINE_STYLE   InpStyle=STYLE_SOLID;   // Estilo de linha da borda
input int               InpWidth=10;            // Tamanho da seta
input bool              InpBack=false;          // Seta do fundo
input bool              InpSelection=false;     // Destaque para mover
input bool              InpHidden=true;         // Ocultar na lista de objeto
input long              InpZOrder=0;            // Prioridade para clicar no mouse
//+------------------------------------------------------------------+
//| Criar a seta¬†                                                   |
//+------------------------------------------------------------------+
bool ArrowCreate(const long              chart_ID=0,           // ID do gr√°fico
                 const string            name=&quot;Arrow&quot;,         // nome da seta
                 const int               sub_window=0,         // √≠ndice da sub-janela
                 datetime                time=0,               // ponto de ancoragem d
                 double                  price=0,              // ponto de ancoragem d
                 const uchar             arrow_code=252,       // c√≥digo da seta
                 const ENUM_ARROW_ANCHOR anchor=ANCHOR_BOTTOM, // posi√ß√£o do ponto de 
                 const color             clr=clrRed,           // cor da seta
                 const ENUM_LINE_STYLE   style=STYLE_SOLID,    // estilo da linha da b
                 const int               width=3,              // tamanho da seta
                 const bool              back=false,           // no fundo
                 const bool              selection=true,       // destaque para mover
                 const bool              hidden=true,          // ocultar na lista de 
                 const long              z_order=0)            // prioridade para clic
  {
//--- definir as coordenadas de pontos de ancoragem, se eles n√£o est√£o definidos
   ChangeArrowEmptyPoint(time,price);
//--- redefine o valor de erro
   ResetLastError();
//--- criar uma seta
   if(!ObjectCreate(chart_ID,name,OBJ_ARROW,sub_window,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar uma seta! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- definir o c√≥digo da seta
   ObjectSetInteger(chart_ID,name,OBJPROP_ARROWCODE,arrow_code);
//--- tipo de defini√ß√£o de ancoragem
   ObjectSetInteger(chart_ID,name,OBJPROP_ANCHOR,anchor);
//--- definir a cor da seta
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir o estilo da linha da borda
   ObjectSetInteger(chart_ID,name,OBJPROP_STYLE,style);
//--- definir o tamanho da seta
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,width);
//--- exibir em primeiro plano (false) ou fundo (true)</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
626
</p>
<pre><code class="language-mql5">
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- habilitar (true) ou desabilitar (true) o modo do movimento da seta com o mouse
//--- ao criar um objeto gr√°fico usando a fun√ß√£o ObjectCreate, o objeto n√£o pode ser
//--- destacado e movimentado por padr√£o. Dentro deste m√©todo, o par√¢metro de sele√ß√£o
//--- √© verdade por padr√£o, tornando poss√≠vel destacar e mover o objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mover ponto de ancoragem¬†                                        |
//+------------------------------------------------------------------+
bool ArrowMove(const long   chart_ID=0,   // ID do gr√°fico
               const string name=&quot;Arrow&quot;, // nome do objeto
               datetime     time=0,       // coordenada do ponto de ancoragem de tempo
               double       price=0)      // coordenada do ponto de ancoragem de pre√ßo
  {
//--- se a posi√ß√£o do ponto n√£o est√° definida, mover para a barra atual tendo o pre√ßo 
   if(!time)
      time=TimeCurrent();
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- redefine o valor de erro
   ResetLastError();
//--- mover o ponto de ancoragem
   if(!ObjectMove(chart_ID,name,0,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao mover o ponto de ancoragem! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Alterar o c√≥digo da seta¬†                                        |
//+------------------------------------------------------------------+
bool ArrowCodeChange(const long   chart_ID=0,   // ID do gr√°fico
                     const string name=&quot;Arrow&quot;, // nome do objeto
                     const uchar  code=252)     // c√≥digo da seta
  {
//--- redefine o valor de erro
   ResetLastError();
//--- alterar o c√≥digo da seta</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
627
</p>
<pre><code class="language-mql5">
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_ARROWCODE,code))
     {
      Print(__FUNCTION__,
            &quot;: falha ao alterar o c√≥digo da seta! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Alterar tipo de ancoragem¬†                                       |
//+------------------------------------------------------------------+
bool ArrowAnchorChange(const long              chart_ID=0,        // ID do gr√°fico
                       const string            name=&quot;Arrow&quot;,      // nome do objeto
                       const ENUM_ARROW_ANCHOR anchor=ANCHOR_TOP) // tipo de ancoragem
  {
//--- redefine o valor de erro
   ResetLastError();
//--- alterar tipo de ancoragem
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_ANCHOR,anchor))
     {
      Print(__FUNCTION__,
            &quot;: falha para alterar o tipo de ancoragem! C√≥digo de erro = &quot;,GetLastError
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Excluir uma seta¬†                                                |
//+------------------------------------------------------------------+
bool ArrowDelete(const long   chart_ID=0,   // ID do gr√°fico
                 const string name=&quot;Arrow&quot;) // nome da seta
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir uma seta
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,
            &quot;: falha ao excluir uma seta! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Verificar valores de ponto de ancoragem e definir valores padr√£o¬†|
//| para aqueles vazios¬†                                             |</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
628
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
void ChangeArrowEmptyPoint(datetime &amp;time,double &amp;price)
  {
//--- se o tempo do ponto n√£o est√° definido, ser√° na barra atual
   if(!time)
      time=TimeCurrent();
//--- se o pre√ßo do ponto n√£o est√° definido, ele ter√° valor Bid
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- verificar a exatid√£o dos par√¢metros de entrada
   if(InpDate&lt;0 || InpDate&gt;100 || InpPrice&lt;0 || InpPrice&gt;100)
     {
      Print(&quot;Erro! Valores incorretos dos par√¢metros de entrada!&quot;);
      return;
     }
//--- n√∫mero de barras vis√≠veis na janela do gr√°fico
   int bars=(int)ChartGetInteger(0,CHART_VISIBLE_BARS);
//--- tamanho do array de pre√ßo
   int accuracy=1000;
//--- arrays para armazenar data e valores de pre√ßo para serem usados
//--- para definir e alterar sinal das coordenadas do ponto de ancoragem
   datetime date[];
   double   price[];
//--- aloca√ß√£o de mem√≥ria
   ArrayResize(date,bars);
   ArrayResize(price,accuracy);
//--- preencher o array das datas
   ResetLastError();
   if(CopyTime(Symbol(),Period(),0,bars,date)==-1)
     {
      Print(&quot;Falha ao copiar valores de tempo! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- preencher o array de pre√ßos
//--- encontrar os maiores e menores valores do gr√°fico
   double max_price=ChartGetDouble(0,CHART_PRICE_MAX);
   double min_price=ChartGetDouble(0,CHART_PRICE_MIN);
//--- definir uma etapa de mudan√ßa de um pre√ßo e preencher o array
   double step=(max_price-min_price)/accuracy;
   for(int i=0;i&lt;accuracy;i++)
      price[i]=min_price+i*step;
//--- definir pontos para desenhar a seta
   int d=InpDate*(bars-1)/100;</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
629
</p>
<pre><code class="language-mql5">
   int p=InpPrice*(accuracy-1)/100;
//--- criar uma seta no gr√°fico
   if(!ArrowCreate(0,InpName,0,date[d],price[p],32,InpAnchor,InpColor,
      InpStyle,InpWidth,InpBack,InpSelection,InpHidden,InpZOrder))
     {
      return;
     }
//--- redesenhar o gr√°fico
   ChartRedraw();
//--- analisar todos os casos de cria√ß√£o de setas no loop
   for(int i=33;i&lt;256;i++)
     {
      if(!ArrowCodeChange(0,InpName,(uchar)i))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
      // meio segundo de atraso
      Sleep(500);
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- excluir a seta do gr√°fico
   ArrowDelete(0,InpName);
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
630
<h3>OBJ_TEXT</h3>
Objeto Texto.
<h3>Observa√ß√£o</h3>
Posi√ß√£o de ponto de ancoragem em rela√ß√£o ao texto pode ser selecionado a partir do enumerador
ENUM_ANCHOR_POINT. Voc√™ tamb√©m pode alterar o √¢ngulo de inclina√ß√£o de texto usando a
propriedade OBJPROP_ANGLE.
<h3>Exemplo</h3>
O seguinte o script cria v√°rios objetos de texto no gr√°fico. Fun√ß√µes especiais t√™m sido
desenvolvidas para criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas
fun√ß√µes &quot;as is&quot; em seus pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script cria objeto gr√°fico de \&quot;Texto\&quot;.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string            InpFont=&quot;Arial&quot;;         // Fonte
input int               InpFontSize=10;          // Tamanho da fonte
input color             InpColor=clrRed;         // Cor
input double            InpAngle=90.0;           // √Çngulo de inclina√ß√£o em graus
input ENUM_ANCHOR_POINT InpAnchor=ANCHOR_LEFT;   // Tipo de ancoragem
input bool              InpBack=false;           // Objeto de fundo
input bool              InpSelection=false;      // Destaque para mover
input bool              InpHidden=true;          // Ocultar na lista de objetos</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
631
</p>
<pre><code class="language-mql5">
input long              InpZOrder=0;             // Prioridade para clique do mouse
//+------------------------------------------------------------------+
//| Criando objeto Texto¬†                                            |
//+------------------------------------------------------------------+
bool TextCreate(const long              chart_ID=0,               // ID do gr√°fico
                const string            name=&quot;Text&quot;,              // nome do objeto
                const int               sub_window=0,             // √≠ndice da sub-jan
                datetime                time=0,                   // ponto de ancorage
                double                  price=0,                  // ponto de ancorage
                const string            text=&quot;Text&quot;,              // o pr√≥prio texto
                const string            font=&quot;Arial&quot;,             // fonte
                const int               font_size=10,             // tamanho da fonte
                const color             clr=clrRed,               // cor
                const double            angle=0.0,                // inclina√ß√£o do tex
                const ENUM_ANCHOR_POINT anchor=ANCHOR_LEFT_UPPER, // tipo de ancoragem
                const bool              back=false,               / no fundo
                const bool              selection=false,          // destaque para mov
                const bool              hidden=true,              // ocultar na lista 
                const long              z_order=0)                // prioridade para c
  {
//--- definir as coordenadas de pontos de ancoragem, se eles n√£o est√£o definidos
   ChangeTextEmptyPoint(time,price);
//--- redefine o valor de erro
   ResetLastError();
//--- criar objeto Texto
   if(!ObjectCreate(chart_ID,name,OBJ_TEXT,sub_window,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar objeto \&quot;Texto\&quot;! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- definir o texto
   ObjectSetString(chart_ID,name,OBJPROP_TEXT,text);
//--- definir o texto fonte
   ObjectSetString(chart_ID,name,OBJPROP_FONT,font);
//--- definir tamanho da fonte
   ObjectSetInteger(chart_ID,name,OBJPROP_FONTSIZE,font_size);
//--- definir o √¢ngulo de inclina√ß√£o do texto
   ObjectSetDouble(chart_ID,name,OBJPROP_ANGLE,angle);
//--- tipo de defini√ß√£o de ancoragem
   ObjectSetInteger(chart_ID,name,OBJPROP_ANCHOR,anchor);
//--- definir cor
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- habilitar (true) ou desabilitar (false) o modo de mover o objeto com o mouse
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto </p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
632
</p>
<pre><code class="language-mql5">
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mover ponto de ancoragem¬†                                        |
//+------------------------------------------------------------------+
bool TextMove(const long   chart_ID=0,  // ID do gr√°fico
              const string name=&quot;Text&quot;, // nome do objeto
              datetime     time=0,      // coordenada do ponto de ancoragem do tempo
              double       price=0)     // coordenada do ponto de ancoragem do pre√ßo
  {
//--- se a posi√ß√£o do ponto n√£o est√° definida, mover para a barra atual tendo o pre√ßo 
   if(!time)
      time=TimeCurrent();
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- redefine o valor de erro
   ResetLastError();
//--- mover o ponto de ancoragem
   if(!ObjectMove(chart_ID,name,0,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao mover o ponto de ancoragem! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Alterar o texto do objeto¬†                                       |
//+------------------------------------------------------------------+
bool TextChange(const long   chart_ID=0,  // ID do Gr√°fico
                const string name=&quot;Text&quot;, // nome do objeto
                const string text=&quot;Text&quot;) // texto
  {
//--- redefine o valor de erro
   ResetLastError();
//--- alterar texto do objeto
   if(!ObjectSetString(chart_ID,name,OBJPROP_TEXT,text))
     {
      Print(__FUNCTION__,
            &quot;: falha ao alterar texto! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
633
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Excluir objeto Texto¬†                                            |
//+------------------------------------------------------------------+
bool TextDelete(const long   chart_ID=0,  // Id do Gr√°fico
                const string name=&quot;Text&quot;) // nome do objeto
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir o objeto
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,
            &quot;: falha ao excluir o objeto \&quot;Texto\&quot;! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Verificar valores de ponto de ancoragem e definir valores padr√£o¬†|
//| para aqueles vazios¬†                                             |
//+------------------------------------------------------------------+
void ChangeTextEmptyPoint(datetime &amp;time,double &amp;price)
  {
//--- se o tempo do ponto n√£o est√° definido, ser√° na barra atual
   if(!time)
      time=TimeCurrent();
//--- se o pre√ßo do ponto n√£o est√° definido, ele ter√° valor Bid
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
   datetime date[]; // array para armazenar datas das barras vis√≠veis
   double   low[];  // array para armazenar pre√ßos Baixos das barras vis√≠veis
   double   high[]; // array para armazenar pre√ßos Altos das barras vis√≠veis
//--- n√∫mero de barras vis√≠veis na janela do gr√°fico
   int bars=(int)ChartGetInteger(0,CHART_VISIBLE_BARS);
//--- aloca√ß√£o de mem√≥ria
   ArrayResize(date,bars);
   ArrayResize(low,bars);
   ArrayResize(high,bars);
//--- preencher o array das datas
   ResetLastError();
   if(CopyTime(Symbol(),Period(),0,bars,date)==-1)</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
634
</p>
<pre><code class="language-mql5">
     {
      Print(&quot;Falha ao copiar valores de tempo! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- preencher o array dos pre√ßos Baixos
   if(CopyLow(Symbol(),Period(),0,bars,low)==-1)
     {
      Print(&quot;Falha ao copiar os valores dos pre√ßos Baixos! C√≥digo de erro = &quot;,GetLastE
      return;
     }
//--- preencher o array dos pre√ßos Altos
   if(CopyHigh(Symbol(),Period(),0,bars,high)==-1)
     {
      Print(&quot;Falha ao copiar os valores dos pre√ßos Altos! C√≥digo de erro = &quot;,GetLastEr
      return;
     }
//--- definir a forma como muitas vezes os textos ser√£o exibidos
   int scale=(int)ChartGetInteger(0,CHART_SCALE);
//--- definir o passo
   int step=1;
   switch(scale)
     {
      case 0:
         step=12;
         break;
      case 1:
         step=6;
         break;
      case 2:
         step=4;
         break;
      case 3:
         step=2;
         break;
     }
//--- criar textos para os valores de barras de Alta e de Baixa (com intervalos)
   for(int i=0;i&lt;bars;i+=step)
     {
      //--- criar os textos
      if(!TextCreate(0,&quot;TextHigh_&quot;+(string)i,0,date[i],high[i],DoubleToString(high[i],
         InpColor,InpAngle,InpAnchor,InpBack,InpSelection,InpHidden,InpZOrder))
        {
         return;
        }
      if(!TextCreate(0,&quot;TextLow_&quot;+(string)i,0,date[i],low[i],DoubleToString(low[i],5),
         InpColor,-InpAngle,InpAnchor,InpBack,InpSelection,InpHidden,InpZOrder))
        {
         return;
        }</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
635
</p>
<pre><code class="language-mql5">
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
      // 0.05 segundos de atraso
      Sleep(50);
     }
//--- meio segundo de atraso
   Sleep(500);
//--- excluir os textos
   for(int i=0;i&lt;bars;i+=step)
     {
      if(!TextDelete(0,&quot;TextHigh_&quot;+(string)i))
         return;
      if(!TextDelete(0,&quot;TextLow_&quot;+(string)i))
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
      // 0.05 segundos de atraso
      Sleep(50);
     }
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
636
<h3>OBJ_LABEL</h3>
Objeto Etiqueta.
<h3>Observa√ß√£o</h3>
Posi√ß√£o do ponto de ancoragem relativa a etiqueta pode ser selecionada do enumerador
ENUM_ANCHOR_POINT. Coordenadas do ponto de ancoragem s√£o em pixels.
Voc√™ tamb√©m pode selecionar uma ancoragem de etiqueta de texto no canto a partir do enumerador
ENUM_BASE_CORNER.
<h3>Exemplo</h3>
O seguinte script cria e move o objeto Edit no gr√°fico. Fun√ß√µes especiais t√™m sido desenvolvidas
para criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas fun√ß√µes &quot;as is&quot; em
seus pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script cria objeto gr√°fico \&quot;Etiqueta\&quot;.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string            InpName=&quot;Label&quot;;         // Nome etiqueta
input int               InpX=150;                // dist√¢ncia do eixo X
input int               InpY=150;                // dist√¢ncia do eixo Y
input string            InpFont=&quot;Arial&quot;;         // Fonte
input int               InpFontSize=14;          // Tamanho da fonte
input color             InpColor=clrRed;         // Cor
input double            InpAngle=0.0;            // √Çngulo de inclina√ß√£o em graus</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
637
</p>
<pre><code class="language-mql5">
input ENUM_ANCHOR_POINT InpAnchor=ANCHOR_CENTER; // Tipo de ancoragem
input bool              InpBack=false;           // Objeto de fundo
input bool              InpSelection=true;       // Destaque para mover
input bool              InpHidden=true;          // Ocultar na lista de objetos
input long              InpZOrder=0;             // Prioridade para clique do mouse
//+------------------------------------------------------------------+
//| Criar um a etiqueta de texto¬†                                    |
//+------------------------------------------------------------------+
bool LabelCreate(const long              chart_ID=0,               // ID do gr√°fico
                 const string            name=&quot;Label&quot;,             // nome da etiqueta
                 const int               sub_window=0,             // √≠ndice da sub-ja
                 const int               x=0,                      // coordenada X
                 const int               y=0,                      // coordenada Y
                 const ENUM_BASE_CORNER  corner=CORNER_LEFT_UPPER, // canto do gr√°fico
                 const string            text=&quot;Label&quot;,             // texto
                 const string            font=&quot;Arial&quot;,             // fonte
                 const int               font_size=10,             // tamanho da fonte
                 const color             clr=clrRed,               // cor
                 const double            angle=0.0,                // inclina√ß√£o do te
                 const ENUM_ANCHOR_POINT anchor=ANCHOR_LEFT_UPPER, // tipo de ancorage
                 const bool              back=false,               // no fundo
                 const bool              selection=false,          // destaque para mo
                 const bool              hidden=true,              // ocultar na lista
                 const long              z_order=0)                // prioridade para 
  {
//--- redefine o valor de erro
   ResetLastError();
//--- criar um a etiqueta de texto
   if(!ObjectCreate(chart_ID,name,OBJ_LABEL,sub_window,0,0))
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar uma etiqueta de texto! C√≥digo de erro = &quot;,GetLastError()
      return(false);
     }
//--- definir coordenadas da etiqueta
   ObjectSetInteger(chart_ID,name,OBJPROP_XDISTANCE,x);
   ObjectSetInteger(chart_ID,name,OBJPROP_YDISTANCE,y);
//--- determinar o canto do gr√°fico onde as coordenadas do ponto s√£o definidas
   ObjectSetInteger(chart_ID,name,OBJPROP_CORNER,corner);
//--- definir o texto
   ObjectSetString(chart_ID,name,OBJPROP_TEXT,text);
//--- definir o texto fonte
   ObjectSetString(chart_ID,name,OBJPROP_FONT,font);
//--- definir tamanho da fonte
   ObjectSetInteger(chart_ID,name,OBJPROP_FONTSIZE,font_size);
//--- definir o √¢ngulo de inclina√ß√£o do texto
   ObjectSetDouble(chart_ID,name,OBJPROP_ANGLE,angle);
//--- tipo de defini√ß√£o de ancoragem
   ObjectSetInteger(chart_ID,name,OBJPROP_ANCHOR,anchor);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
638
</p>
<pre><code class="language-mql5">
//--- definir cor
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- Habilitar (true) ou desabilitar (false) o modo de movimento da etiqueta pelo mou
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mover a etiqueta de texto¬†                                       |
//+------------------------------------------------------------------+
bool LabelMove(const long   chart_ID=0,   // ID do gr√°fico
               const string name=&quot;Label&quot;, // nome da etiqueta
               const int    x=0,          // coordenada X
               const int    y=0)          // coordenada Y
  {
//--- redefine o valor de erro
   ResetLastError();
//--- mover a etiqueta de texto
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_XDISTANCE,x))
     {
      Print(__FUNCTION__,
            &quot;: falha para mover coordenada X do objeto! C√≥digo de erro = &quot;,GetLastErro
      return(false);
     }
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_YDISTANCE,y))
     {
      Print(__FUNCTION__,
            &quot;: falha para mover coordenada X do objeto! C√≥digo de erro = &quot;,GetLastErro
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Alterar canto do gr√°fico para vincula√ß√£o da etiqueta¬†            |
//+------------------------------------------------------------------+
bool LabelChangeCorner(const long             chart_ID=0,               // ID do gr√°fi
                       const string           name=&quot;Label&quot;,             // nome da eti
                       const ENUM_BASE_CORNER corner=CORNER_LEFT_UPPER) // canto do gr
  {
//--- redefine o valor de erro
   ResetLastError();</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
639
</p>
<pre><code class="language-mql5">
//--- alterar canto de ancoragem
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_CORNER,corner))
     {
      Print(__FUNCTION__,
            &quot;: falha ao alterar canto de ancoragem! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Alterar o texto do objeto¬†                                       |
//+------------------------------------------------------------------+
bool LabelTextChange(const long   chart_ID=0,   // ID do gr√°fico
                     const string name=&quot;Label&quot;, // nome do objeto
                     const string text=&quot;Text&quot;)  // texto
  {
//--- redefine o valor de erro
   ResetLastError();
//--- alterar texto do objeto
   if(!ObjectSetString(chart_ID,name,OBJPROP_TEXT,text))
     {
      Print(__FUNCTION__,
            &quot;: falha ao alterar texto! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Apagar uma etiqueta de texto¬†                                    |
//+------------------------------------------------------------------+
bool LabelDelete(const long   chart_ID=0,   // ID do gr√°fico
                 const string name=&quot;Label&quot;) // nome da etiqueta
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir a etiqueta
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,
            &quot;: falha ao excluir a etiqueta de texto! C√≥digo de erro = &quot;,GetLastError()
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
640
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
void OnStart()
  {
//--- armazenar as coordenadas das etiquetas nas vari√°veis locais
   int x=InpX;
   int y=InpY;
//--- tamanho da janela do gr√°fico
   long x_distance;
   long y_distance;
//--- definir tamanho da janela
   if(!ChartGetInteger(0,CHART_WIDTH_IN_PIXELS,0,x_distance))
     {
      Print(&quot;Falha ao obter a largura do gr√°fico! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
   if(!ChartGetInteger(0,CHART_HEIGHT_IN_PIXELS,0,y_distance))
     {
      Print(&quot;Falha ao obter a altura do gr√°fico! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- verificar a exatid√£o dos par√¢metros de entrada
   if(InpX&lt;0 || InpX&gt;x_distance-1 || InpY&lt;0 || InpY&gt;y_distance-1)
     {
      Print(&quot;Erro! Valores incorretos dos par√¢metros de entrada!&quot;);
      return;
     }
//--- preparar texto inicial para a etiqueta
   string text;
   StringConcatenate(text,&quot;Canto inferior direito: &quot;,x,&quot;,&quot;,y);
//--- criar uma etiqueta de texto no gr√°fico
   if(!LabelCreate(0,InpName,0,InpX,InpY,CORNER_LEFT_UPPER,text,InpFont,InpFontSize,
      InpColor,InpAngle,InpAnchor,InpBack,InpSelection,InpHidden,InpZOrder))
     {
      return;
     }
//--- redesenhar o gr√°fico e esperar por um segundo
   ChartRedraw();
   Sleep(500);
//--- mover a etiqueta e alterar o seu texto simultaneamente
//--- n√∫mero de itera√ß√µes por eixos
   int h_steps=(int)(x_distance/2-InpX);
   int v_steps=(int)(y_distance/2-InpY);
//--- mover a etiqueta para baixo
   for(int i=0;i&lt;v_steps;i++)
     {
      //--- alterar a coordenada
      y+=2;
      //--- mover a etiqueta e alterar o seu texto 
      MoveAndTextChange(x,y,&quot;Canto superior esquerdo: &quot;);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
641
</p>
<pre><code class="language-mql5">
     }
//--- meio segundo de atraso
   Sleep(500);
//--- mover a etiqueta para a direita
   for(int i=0;i&lt;h_steps;i++)
     {
      //--- alterar a coordenada
      x+=2;
      //--- mover a etiqueta e alterar o seu texto 
      MoveAndTextChange(x,y,&quot;Canto superior esquerdo: &quot;);
     }
//--- meio segundo de atraso
   Sleep(500);
//--- mover a etiqueta para cima
   for(int i=0;i&lt;v_steps;i++)
     {
      //--- alterar a coordenada
      y-=2;
      //--- mover a etiqueta e alterar o seu texto 
      MoveAndTextChange(x,y,&quot;Canto superior esquerdo: &quot;);
     }
//--- meio segundo de atraso
   Sleep(500);
//--- mover a etiqueta para a esquerda
   for(int i=0;i&lt;h_steps;i++)
     {
      //--- alterar a coordenada
      x-=2;
      //--- mover a etiqueta e alterar o seu texto 
      MoveAndTextChange(x,y,&quot;Canto superior esquerdo: &quot;);
     }
//--- meio segundo de atraso
   Sleep(500);
//--- agora, mover o ponto para mudar o canto de ancoragem
//--- mover para o canto inferior esquerdo
   if(!LabelChangeCorner(0,InpName,CORNER_LEFT_LOWER))
      return;
//--- alterar texto da etiqueta
   StringConcatenate(text,&quot;Canto inferior direito: &quot;,x,&quot;,&quot;,y);
   if(!LabelTextChange(0,InpName,text))
      return;
//--- redesenhar o gr√°fico e esperar por dois segundos
   ChartRedraw();
   Sleep(2000);
//--- mover para o canto inferior direito
   if(!LabelChangeCorner(0,InpName,CORNER_RIGHT_LOWER))
      return;
//--- alterar texto da etiqueta
   StringConcatenate(text,&quot;Canto direito inferior: &quot;,x,&quot;,&quot;,y);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
642
</p>
<pre><code class="language-mql5">
   if(!LabelTextChange(0,InpName,text))
      return;
//--- redesenhar o gr√°fico e esperar por dois segundos
   ChartRedraw();
   Sleep(2000);
//--- mover para o canto superior direito
   if(!LabelChangeCorner(0,InpName,CORNER_RIGHT_UPPER))
      return;
//--- alterar texto da etiqueta
   StringConcatenate(text,&quot;Canto inferior direito: &quot;,x,&quot;,&quot;,y);
   if(!LabelTextChange(0,InpName,text))
      return;
//--- redesenhar o gr√°fico e esperar por dois segundos
   ChartRedraw();
   Sleep(2000);
//--- mover para o canto superior esquerdo
   if(!LabelChangeCorner(0,InpName,CORNER_LEFT_UPPER))
      return;
//--- alterar texto da etiqueta
   StringConcatenate(text,&quot;Canto inferior direito: &quot;,x,&quot;,&quot;,y);
   if(!LabelTextChange(0,InpName,text))
      return;
//--- redesenhar o gr√°fico e esperar por dois segundos
   ChartRedraw();
   Sleep(2000);
//--- excluir a etiqueta
   LabelDelete(0,InpName);
//--- redesenhar o gr√°fico e esperar por um segundo
   ChartRedraw();
   Sleep(500);
//---
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o movimenta o objeto e altera o seu texto¬†                |
//+------------------------------------------------------------------+
bool MoveAndTextChange(const int x,const int y,string text)
  {
//--- mover a etiqueta
   if(!LabelMove(0,InpName,x,y))
      return(false);
//--- alterar texto da etiqueta
   StringConcatenate(text,text,x,&quot;,&quot;,y);
   if(!LabelTextChange(0,InpName,text))
      return(false);
//--- verificar se o funcionamento do script foi desativado a for√ßa
   if(IsStopped())
      return(false);
//--- redesenhar o gr√°fico
   ChartRedraw();</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
643
</p>
<pre><code class="language-mql5">
// 0.01 segundos de atraso
   Sleep(10);
//--- sair da fun√ß√£o
   return(true);
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
644
<h3>OBJ_BUTTON</h3>
Objeto Bot√£o.
<h3>Observa√ß√£o</h3>
Coordenadas do ponto de ancoragem s√£o em pixels. Voc√™ pode selecionar o bot√£o de ancoragem de
canto a partir da ENUM_BASE_CORNER.
<h3>Exemplo</h3>
O seguinte script cria e move o objeto Bot√£o no gr√°fico. Fun√ß√µes especiais t√™m sido desenvolvidas
para criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas fun√ß√µes &quot;as is&quot; em
seus pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script cria o Bot√£o no gr√°fico.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string           InpName=&quot;Button&quot;;            // Nome do Bot√£o
input ENUM_BASE_CORNER InpCorner=CORNER_LEFT_UPPER; // Canto do gr√°fico para ancoragem
input string           InpFont=&quot;Arial&quot;;             // Fonte
input int              InpFontSize=14;              // Tamanho da fonte
input color            InpColor=clrBlack;           // Cor do texto
input color            InpBackColor=C&#x27;236,233,216&#x27;; // Fundo da cor
input color            InpBorderColor=clrNONE;      // Cor da Borda
input bool             InpState=false;              // Pressionado/Liberado
input bool             InpBack=false;               // Objeto de Fundo
input bool             InpSelection=false;          // Destaque para mover</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
645
</p>
<pre><code class="language-mql5">
input bool             InpHidden=true;              // Ocultar na lista de objeto
input long             InpZOrder=0;                 // Prioridade para clique do mouse
//+------------------------------------------------------------------+
//| Criar o bot√£o¬†                                                   |
//+------------------------------------------------------------------+
bool ButtonCreate(const long              chart_ID=0,               // ID do gr√°fico
                  const string            name=&quot;Button&quot;,            // nome do bot√£o
                  const int               sub_window=0,             // √≠ndice da sub-j
                  const int               x=0,                      // coordenada X
                  const int               y=0,                      // coordenada Y
                  const int               width=50,                 // largura do bot√£
                  const int               height=18,                // altura do bot√£o
                  const ENUM_BASE_CORNER  corner=CORNER_LEFT_UPPER, // canto do gr√°fic
                  const string            text=&quot;Button&quot;,            // texto
                  const string            font=&quot;Arial&quot;,             // fonte
                  const int               font_size=10,             // tamanho da font
                  const color             clr=clrBlack,             // cor do texto
                  const color             back_clr=C&#x27;236,233,216&#x27;,  // cor do fundo
                  const color             border_clr=clrNONE,       // cor da borda
                  const bool              state=false,              // pressionada/lib
                  const bool              back=false,               // no fundo
                  const bool              selection=false,          // destaque para m
                  const bool              hidden=true,              // ocultar na list
                  const long              z_order=0)                // prioridade para
  {
//--- redefine o valor de erro
   ResetLastError();
//--- criar o bot√£o
   if(!ObjectCreate(chart_ID,name,OBJ_BUTTON,sub_window,0,0))
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar o bot√£o! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- definir coordenadas do bot√£o
   ObjectSetInteger(chart_ID,name,OBJPROP_XDISTANCE,x);
   ObjectSetInteger(chart_ID,name,OBJPROP_YDISTANCE,y);
//--- definir tamanho do bot√£o
   ObjectSetInteger(chart_ID,name,OBJPROP_XSIZE,width);
   ObjectSetInteger(chart_ID,name,OBJPROP_YSIZE,height);
//--- determinar o canto do gr√°fico onde as coordenadas do ponto s√£o definidas
   ObjectSetInteger(chart_ID,name,OBJPROP_CORNER,corner);
//--- definir o texto
   ObjectSetString(chart_ID,name,OBJPROP_TEXT,text);
//--- definir o texto fonte
   ObjectSetString(chart_ID,name,OBJPROP_FONT,font);
//--- definir tamanho da fonte
   ObjectSetInteger(chart_ID,name,OBJPROP_FONTSIZE,font_size);
//--- definir a cor do texto</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
646
</p>
<pre><code class="language-mql5">
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir a cor de fundo
   ObjectSetInteger(chart_ID,name,OBJPROP_BGCOLOR,back_clr);
//--- definir a cor da borda
   ObjectSetInteger(chart_ID,name,OBJPROP_BORDER_COLOR,border_clr);
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- set button state
   ObjectSetInteger(chart_ID,name,OBJPROP_STATE,state);
//--- habilitar (true) ou desabilitar (false) o modo do movimento do bot√£o com o mouse
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mover o bot√£o¬†                                                   |
//+------------------------------------------------------------------+
bool ButtonMove(const long   chart_ID=0,    // ID do gr√°fico
                const string name=&quot;Button&quot;, // nome do bot√£o
                const int    x=0,           // coordenada X
                const int    y=0)           // coordenada Y
  {
//--- redefine o valor de erro
   ResetLastError();
//--- mover o bot√£o
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_XDISTANCE,x))
     {
      Print(__FUNCTION__,
            &quot;: falha para mover coordenada X do bot√£o! C√≥digo de erro = &quot;,GetLastError
      return(false);
     }
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_YDISTANCE,y))
     {
      Print(__FUNCTION__,
            &quot;: falha para mover coordenada Y do bot√£o! C√≥digo de erro = &quot;,GetLastError
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Alterar o tamanho do bot√£o¬†                                      |
//+------------------------------------------------------------------+
bool ButtonChangeSize(const long   chart_ID=0,    // ID do gr√°fico</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
647
</p>
<pre><code class="language-mql5">
                      const string name=&quot;Button&quot;, // nome do bot√£o
                      const int    width=50,      // largura do bot√£o
                      const int    height=18)     // altura do bot√£o
  {
//--- redefine o valor de erro
   ResetLastError();
//--- alterar o tamanho do bot√£o
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_XSIZE,width))
     {
      Print(__FUNCTION__,
            &quot;: falha ao alterar a largura do bot√£o! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_YSIZE,height))
     {
      Print(__FUNCTION__,
            &quot;: falha ao alterar a altura do bot√£o! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Alterar canto do gr√°fico para vincula√ß√£o do bot√£o¬†               |
//+------------------------------------------------------------------+
bool ButtonChangeCorner(const long             chart_ID=0,               // ID do gr√°f
                        const string           name=&quot;Button&quot;,            // nome do bo
                        const ENUM_BASE_CORNER corner=CORNER_LEFT_UPPER) // canto do g
  {
//--- redefine o valor de erro
   ResetLastError();
//--- alterar canto de ancoragem
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_CORNER,corner))
     {
      Print(__FUNCTION__,
            &quot;: falha ao alterar canto de ancoragem! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Alterar texto do bot√£o¬†                                          |
//+------------------------------------------------------------------+
bool ButtonTextChange(const long   chart_ID=0,    // ID do gr√°fico
                      const string name=&quot;Button&quot;, // nome do bot√£o
                      const string text=&quot;Text&quot;)   // texto
  {
//--- redefine o valor de erro</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
648
</p>
<pre><code class="language-mql5">
   ResetLastError();
//--- alterar texto do objeto
   if(!ObjectSetString(chart_ID,name,OBJPROP_TEXT,text))
     {
      Print(__FUNCTION__,
            &quot;: falha ao alterar texto! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Excluir o bot√£o¬†                                                 |
//+------------------------------------------------------------------+
bool ButtonDelete(const long   chart_ID=0,    // ID do gr√°fico
                  const string name=&quot;Button&quot;) // nome do bot√£o
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir o bot√£o
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,
            &quot;: falha ao excluir o bot√£o! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- tamanho da janela do gr√°fico
   long x_distance;
   long y_distance;
//--- definir tamanho da janela
   if(!ChartGetInteger(0,CHART_WIDTH_IN_PIXELS,0,x_distance))
     {
      Print(&quot;Falha ao obter a largura do gr√°fico! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
   if(!ChartGetInteger(0,CHART_HEIGHT_IN_PIXELS,0,y_distance))
     {
      Print(&quot;Falha ao obter a altura do gr√°fico! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- definir a etapa de alterar o tamanho do bot√£o</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
649
</p>
<pre><code class="language-mql5">
   int x_step=(int)x_distance/32;
   int y_step=(int)y_distance/32;
//--- definir as coordenadas bot√£o e seu tamanho
   int x=(int)x_distance/32;
   int y=(int)y_distance/32;
   int x_size=(int)x_distance*15/16;
   int y_size=(int)y_distance*15/16;
//--- criar o bot√£o
   if(!ButtonCreate(0,InpName,0,x,y,x_size,y_size,InpCorner,&quot;Press&quot;,InpFont,InpFontSiz
      InpColor,InpBackColor,InpBorderColor,InpState,InpBack,InpSelection,InpHidden,Inp
     {
      return;
     }
//--- redesenhar o gr√°fico
   ChartRedraw();
//--- reduzir o bot√£o no loop
   int i=0;
   while(i&lt;13)
     {
      //--- meio segundo de atraso
      Sleep(500);
      //--- mudar o bot√£o para o estado pressionado
      ObjectSetInteger(0,InpName,OBJPROP_STATE,true);
      //--- redesenhar o gr√°fico e esperar por 0.2 segundos
      ChartRedraw();
      Sleep(200);
      //--- redefinir as coordenadas e tamanho do bot√£o
      x+=x_step;
      y+=y_step;
      x_size-=x_step*2;
      y_size-=y_step*2;
      //--- reduzir o bot√£o
      ButtonMove(0,InpName,x,y);
      ButtonChangeSize(0,InpName,x_size,y_size);
      //--- trazer o bot√£o de volta ao estado liberado
      ObjectSetInteger(0,InpName,OBJPROP_STATE,false);
      //--- redesenhar o gr√°fico
      ChartRedraw();
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- incrementar um contador de loop
      i++;
     }
//--- meio segundo de atraso
   Sleep(500);
//--- excluir o bot√£o
   ButtonDelete(0,InpName);
   ChartRedraw();</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
650
</p>
<pre><code class="language-mql5">
//--- esperar por um segundo
   Sleep(1000);
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
651
<h3>OBJ_CHART</h3>
Objeto Chart.
<h3>Observa√ß√£o</h3>
Objetos do tipo &quot;OBJ_CHART&quot; n√£o s√£o suportados (n√£o s√£o exibidos) durante o teste visual.
Coordenadas do ponto de ancoragem s√£o em pixels. Voc√™ tamb√©m pode selecionar uma ancoragem
do bitmap no canto a partir do enumerador ENUM_BASE_CORNER.
S√≠mbolo, per√≠odo e escala podem ser selecionados para o objeto Chart. Escala de pre√ßo e modo de
exibi√ß√£o de data tamb√©m pode ser habilitado/desabilitado.
<h3>Exemplo</h3>
O seguinte script cria e move o objeto Chart no gr√°fico. Fun√ß√µes especiais t√™m sido desenvolvidas
para criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas fun√ß√µes &quot;as is&quot; em
seus pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script cria objeto \&quot;Chart\&quot;.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string           InpName=&quot;Chart&quot;;             // Nome do objeto
input string           InpSymbol=&quot;EURUSD&quot;;          // S√≠mbolo
input ENUM_TIMEFRAMES  InpPeriod=PERIOD_H1;         // Per√≠odo
input ENUM_BASE_CORNER InpCorner=CORNER_LEFT_UPPER; // Canto de ancoragem
input int              InpScale=2;                  // Escala</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
652
</p>
<pre><code class="language-mql5">
input bool             InpDateScale=true;           // Exibi√ß√£o da escala de tempo
input bool             InpPriceScale=true;          // Exibi√ß√£o da escala de pre√ßo
input color            InpColor=clrRed;             // Cor da borda quando destacada
input ENUM_LINE_STYLE  InpStyle=STYLE_DASHDOTDOT;   // Estilo da linha quando destacad
input int              InpPointWidth=1;             // Tamanho do ponto para movimento
input bool             InpBack=false;               // Objeto de Fundo
input bool             InpSelection=true;           // Destaque para mover
input bool             InpHidden=true;              // Ocultar na lista de objeto
input long             InpZOrder=0;                 // Prioridade para clique do mouse
//+------------------------------------------------------------------+
//| Criando objeto Chart¬†                                            |
//+------------------------------------------------------------------+
bool ObjectChartCreate(const long              chart_ID=0,               // ID do gr√°f
                       const string            name=&quot;Chart&quot;,             // nome do ob
                       const int               sub_window=0,             // √≠ndice da 
                       const string            symbol=&quot;EURUSD&quot;,          // s√≠mbolo
                       const ENUM_TIMEFRAMES   period=PERIOD_H1,         // per√≠odo
                       const int               x=0,                      // coordenada
                       const int               y=0,                      // coordenada
                       const int               width=300,                // largura
                       const int               height=200,               // altura
                       const ENUM_BASE_CORNER  corner=CORNER_LEFT_UPPER, // canto de a
                       const int               scale=2,                  // escala
                       const bool              date_scale=true,          // exibi√ß√£o e
                       const bool              price_scale=true,         // exibi√ß√£o e
                       const color             clr=clrRed,               // a cor da b
                       const ENUM_LINE_STYLE   style=STYLE_SOLID,        // estilo da 
                       const int               point_width=1,            // mover tama
                       const bool              back=false,               // no fundo
                       const bool              selection=false,          // destaque p
                       const bool              hidden=true,              // ocultar na
                       const long              z_order=0)                // prioridade
  {
//--- redefine o valor de erro
   ResetLastError();
//--- criar objeto Chart
   if(!ObjectCreate(chart_ID,name,OBJ_CHART,sub_window,0,0))
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar objeto \&quot;Chart\&quot;! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- definir coordenadas do objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_XDISTANCE,x);
   ObjectSetInteger(chart_ID,name,OBJPROP_YDISTANCE,y);
//--- definir tamanho do objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_XSIZE,width);
   ObjectSetInteger(chart_ID,name,OBJPROP_YSIZE,height);
//--- determinar o canto do gr√°fico onde as coordenadas do ponto s√£o definidas</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
653
</p>
<pre><code class="language-mql5">
   ObjectSetInteger(chart_ID,name,OBJPROP_CORNER,corner);
//--- definir o s√≠mbolo
   ObjectSetString(chart_ID,name,OBJPROP_SYMBOL,symbol);
//--- definir o per√≠odo
   ObjectSetInteger(chart_ID,name,OBJPROP_PERIOD,period);
//--- definir a escala
   ObjectSetInteger(chart_ID,name,OBJPROP_CHART_SCALE,scale);
//--- exibir (true) ou ocultar (false) a escala de tempo
   ObjectSetInteger(chart_ID,name,OBJPROP_DATE_SCALE,date_scale);
//--- exibir (true) ou ocultar (false) a escala de pre√ßo
   ObjectSetInteger(chart_ID,name,OBJPROP_PRICE_SCALE,price_scale);
//--- definir a cor da borda quando o modo de destaque do objeto √© habilitado
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir o estilo de linha quando o modo de destaque do objeto √© habilitado
   ObjectSetInteger(chart_ID,name,OBJPROP_STYLE,style);
//--- definir o tamanho do ponto de ancoragem para movimentar o objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,point_width);
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- Habilitar (true) ou desabilitar (false) o modo de movimento da etiqueta pelo mou
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Definir o s√≠mbolo e per√≠odo de tempo do objeto Chart¬†            |
//+------------------------------------------------------------------+
bool ObjectChartSetSymbolAndPeriod(const long            chart_ID=0,       // ID do gr
                                   const string          name=&quot;Chart&quot;,     // nome do 
                                   const string          symbol=&quot;EURUSD&quot;,  // s√≠mbolo
                                   const ENUM_TIMEFRAMES period=PERIOD_H1) // per√≠odo 
  {
//--- redefine o valor de erro
   ResetLastError();
//--- definir s√≠mbolo e per√≠odo de tempo do objeto Chart
   if(!ObjectSetString(chart_ID,name,OBJPROP_SYMBOL,symbol))
     {
      Print(__FUNCTION__,
            &quot;: falha para definir o s√≠mbolo do objeto \&quot;Chart\&quot;! C√≥digo de erro = &quot;,Ge
      return(false);
     }
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_PERIOD,period))
     {
      Print(__FUNCTION__,</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
654
</p>
<pre><code class="language-mql5">
            &quot;: falha para definir o s√≠mbolo do objeto \&quot;Chart\&quot;! C√≥digo de erro = &quot;,Ge
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mover objeto Chart¬†                                              |
//+------------------------------------------------------------------+
bool ObjectChartMove(const long   chart_ID=0,   // ID do gr√°fico (n√£o objeto de um Gr√°
                     const string name=&quot;Chart&quot;, // nome do objeto
                     const int    x=0,          // coordenada X
                     const int    y=0)          // coordenada Y
  {
//--- redefine o valor de erro
   ResetLastError();
//--- mover o objeto
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_XDISTANCE,x))
     {
      Print(__FUNCTION__,
            &quot;: falha ao mover coordenada X do objeto \&quot;Chart\&quot;! C√≥digo de erro = &quot;,Get
      return(false);
     }
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_YDISTANCE,y))
     {
      Print(__FUNCTION__,
            &quot;: falha ao mover coordenada Y do objeto \&quot;Chart\&quot;! C√≥digo de erro = &quot;,Get
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Alterar o tamanho do objeto Chart¬†                               |
//+------------------------------------------------------------------+
bool ObjectChartChangeSize(const long   chart_ID=0,   // ID do gr√°fico (n√£o objeto de 
                           const string name=&quot;Chart&quot;, // nome do objeto
                           const int    width=300,    // largura
                           const int    height=200)   // altura
  {
//--- redefine o valor de erro
   ResetLastError();
//--- alterar o tamanho do objeto
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_XSIZE,width))
     {
      Print(__FUNCTION__,
            &quot;: falha ao alterar a largura do objeto \&quot;Chart\&quot; ! C√≥digo de erro = &quot;,Get
      return(false);
     }</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
655
</p>
<pre><code class="language-mql5">
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_YSIZE,height))
     {
      Print(__FUNCTION__,
            &quot;: falha ao alterar a altura do objeto \&quot;Chart\&quot; ! C√≥digo de erro = &quot;,GetL
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Retorno do ID do objeto Chart¬†                                   |
//+------------------------------------------------------------------+
</code></pre>
<p>
long ObjectChartGetID(const long   chart_ID=0,   // ID do gr√°fico (n√£o objeto de um Gr
</p>
<pre><code class="language-mql5">
                      const string name=&quot;Chart&quot;) // nome do objeto
  {
//--- preparar a vari√°vel para obter o ID do objeto Chart
   long id=-1;
//--- redefine o valor de erro
   ResetLastError();
//--- obter ID
   if(!ObjectGetInteger(chart_ID,name,OBJPROP_CHART_ID,0,id))
     {
      Print(__FUNCTION__,
            &quot;: falha ao obter o ID do objeto \&quot;Chart\&quot;! C√≥digo de erro = &quot;,GetLastErro
     }
//--- retorno do resultado
   return(id);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Deletar o objeto Chart¬†                                          |
//+------------------------------------------------------------------+
bool ObjectChartDelete(const long   chart_ID=0,   // ID do gr√°fico (n√£o objeto de um G
                       const string name=&quot;Chart&quot;) // nome do objeto
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir o bot√£o
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,
            &quot;: falha ao deletar objeto \&quot;Chart\&quot;! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
656
</p>
<pre><code class="language-mql5">
void OnStart()
  {
//--- obter o n√∫mero de s√≠mbolos na Observa√ß√£o do Mercado
   int  symbols=SymbolsTotal(true);
//--- verificar se o s√≠mbolo com um nome especifico est√° presente na lista de s√≠mbolo
   bool exist=false;
   for(int i=0;i&lt;symbols;i++)
      if(InpSymbol==SymbolName(i,true))
        {
         exist=true;
         break;
        }
   if(!exist)
     {
      Print(&quot;Erro! &quot;,InpSymbol,&quot; s√≠mbolo n√£o est√° presente na \&quot;Observa√ß√£o do Mercado\
      return;
     }
//--- verificar a validade dos par√¢metros de entrada
   if(InpScale&lt;0 || InpScale&gt;5)
     {
      Print(&quot;Erro! Valores incorretos dos par√¢metros de entrada!&quot;);
      return;
     }
//--- tamanho da janela do gr√°fico
   long x_distance;
   long y_distance;
//--- definir tamanho da janela
   if(!ChartGetInteger(0,CHART_WIDTH_IN_PIXELS,0,x_distance))
     {
      Print(&quot;Falha ao obter a largura do gr√°fico! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
   if(!ChartGetInteger(0,CHART_HEIGHT_IN_PIXELS,0,y_distance))
     {
      Print(&quot;Falha ao obter a altura do gr√°fico! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- definir as coordenadas do objeto gr√°fico e seu tamanho
   int x=(int)x_distance/16;
   int y=(int)y_distance/16;
   int x_size=(int)x_distance*7/16;
   int y_size=(int)y_distance*7/16;
//--- criar objeto Chart
   if(!ObjectChartCreate(0,InpName,0,InpSymbol,InpPeriod,x,y,x_size,y_size,InpCorner,I
      InpPriceScale,InpColor,InpStyle,InpPointWidth,InpBack,InpSelection,InpHidden,Inp
     {
      return;
     }</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
657
</p>
<pre><code class="language-mql5">
//--- redesenhar o gr√°fico e esperar por um segundo
   ChartRedraw();
   Sleep(1000);
//--- estender objeto Chart
   int steps=(int)MathMin(x_distance*7/16,y_distance*7/16);
   for(int i=0;i&lt;steps;i++)
     {
      //--- redimensionar
      x_size+=1;
      y_size+=1;
      if(!ObjectChartChangeSize(0,InpName,x_size,y_size))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico e esperar por 0.01 segundos
      ChartRedraw();
      Sleep(10);
     }
//--- meio segundo de atraso
   Sleep(500);
//--- alterar per√≠odo de tempo do gr√°fico
   if(!ObjectChartSetSymbolAndPeriod(0,InpName,InpSymbol,PERIOD_M1))
      return;
   ChartRedraw();
//--- tr√™s segundos de atraso
   Sleep(3000);
//--- excluir o objeto
   ObjectChartDelete(0,InpName);
   ChartRedraw();
//--- esperar por um segundo
   Sleep(1000);
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
658
<h3>OBJ_BITMAP</h3>
Objeto Bitmap.
<h3>Observa√ß√£o</h3>
Para objeto Bitmap, voc√™ pode selecionar o escopo de visibilidade de uma imagem.
<h3>Exemplo</h3>
O seguinte script cria v√°rios bitmaps no gr√°fico. Fun√ß√µes especiais t√™m sido desenvolvidas para
criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas fun√ß√µes &quot;as is&quot; em seus
pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script cria um bitmap na janela do gr√°fico.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string          InpFile=&quot;\\Images\\dollar.bmp&quot;; // Nome do arquivo Bitmap
input int             InpWidth=24;                    // Coordenada X do escopo de vis
input int             InpHeight=24;                   // Coordenada Y do escopo de vis
input int             InpXOffset=4;                   // Deslocamento do escopo de vis
input int             InpYOffset=4;                   // Deslocamento do escopo de vis
input color           InpColor=clrRed;                // Cor da borda quando destacada
input ENUM_LINE_STYLE InpStyle=STYLE_SOLID;           // Estilo de linha quando destac
input int             InpPointWidth=1;                // Tamanho do ponto para movimen
input bool            InpBack=false;                  // Objeto de Fundo
input bool            InpSelection=false;             // Destaque para mover</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
659
</p>
<pre><code class="language-mql5">
input bool            InpHidden=true;                 // Ocultar na lista de objeto
input long            InpZOrder=0;                    // Prioridade para clicar no mou
//+------------------------------------------------------------------+
//| Criar um bitmap na janela do gr√°fico¬†                            |
//+------------------------------------------------------------------+
bool BitmapCreate(const long            chart_ID=0,        // ID do gr√°fico
                  const string          name=&quot;Bitmap&quot;,     // nome do bitmap
                  const int             sub_window=0,      // √≠ndice da sub-janela
                  datetime              time=0,            // ponto de ancoragem do te
                  double                price=0,           // ponto de ancoragem do pr
                  const string          file=&quot;&quot;,           // nome do arquivo bitmap
                  const int             width=10,          // coordenada X do escopo d
                  const int             height=10,         // coordenada Y do escopo d
                  const int             x_offset=0,        // escopo de visibilidade d
                  const int             y_offset=0,        // escopo de visibilidade d
                  const color           clr=clrRed,        // cor da borda quando dest
                  const ENUM_LINE_STYLE style=STYLE_SOLID, // estilo de linha quando d
                  const int             point_width=1,     // mover tamanho do ponto
                  const bool            back=false,        // no fundo
                  const bool            selection=false,   // destaque para mover
                  const bool            hidden=true,       // ocultar na lista de obje
                  const long            z_order=0)         // prioridade para clicar n
  {
//--- definir as coordenadas de pontos de ancoragem, se eles n√£o est√£o definidos
   ChangeBitmapEmptyPoint(time,price);
//--- redefine o valor de erro
   ResetLastError();
//--- criar um bitmap
   if(!ObjectCreate(chart_ID,name,OBJ_BITMAP,sub_window,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar um bitmap na janela do gr√°fico! C√≥digo de erro = &quot;,GetLa
      return(false);
     }
//--- definir o caminho para o arquivo da imagem
   if(!ObjectSetString(chart_ID,name,OBJPROP_BMPFILE,file))
     {
      Print(__FUNCTION__,
            &quot;: falha ao carregar a imagem! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- definir escopo de visibilidade para a imagem, se os valores da largura ou altura
//--- excederem a largura e a altura (respectivamente) de uma imagem de origem,
//--- n√£o ser√° desenhada, no caso oposto
//--- apenas a parte correspondente a esses valores ser√° desenhada
   ObjectSetInteger(chart_ID,name,OBJPROP_XSIZE,width);
   ObjectSetInteger(chart_ID,name,OBJPROP_YSIZE,height);
//--- definir a parte de uma imagem que est√° sendo exibida no escopo de visibilidade,
//--- a parte padr√£o √© a √°rea superior esquerda de uma imagem, os valores permitem</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
660
</p>
<pre><code class="language-mql5">
//--- realizar uma mudan√ßa a partir desta √°rea de exibi√ß√£o de uma outra parte da image
   ObjectSetInteger(chart_ID,name,OBJPROP_XOFFSET,x_offset);
   ObjectSetInteger(chart_ID,name,OBJPROP_YOFFSET,y_offset);
//--- definir a cor da borda quando o modo de destaque do objeto √© habilitado
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir o estilo de linha quando o modo de destaque do objeto √© habilitado
   ObjectSetInteger(chart_ID,name,OBJPROP_STYLE,style);
//--- definir o tamanho do ponto de ancoragem para movimentar o objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,point_width);
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- Habilitar (true) ou desabilitar (false) o modo de movimento da etiqueta pelo mou
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Definir uma nova imagem para o bitmap¬†                           |
//+------------------------------------------------------------------+
bool BitmapSetImage(const long   chart_ID=0,    // ID do gr√°fico
                    const string name=&quot;Bitmap&quot;, // nome do bitmap
                    const string file=&quot;&quot;)       // caminho para o arquivo
  {
//--- redefine o valor de erro
   ResetLastError();
//--- definir o caminho para o arquivo da imagem
   if(!ObjectSetString(chart_ID,name,OBJPROP_BMPFILE,file))
     {
      Print(__FUNCTION__,
            &quot;: falha ao carregar a imagem! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Criar um bitmap na janela do gr√°fico¬†                            |
//+------------------------------------------------------------------+
bool BitmapMove(const long   chart_ID=0,    // ID do gr√°fico
                const string name=&quot;Bitmap&quot;, // nome do bitmap
                datetime     time=0,        // ponto de ancoragem do tempo
                double       price=0)       // ponto de ancoragem do pre√ßo
  {
//--- se a posi√ß√£o do ponto n√£o est√° definida, mover para a barra atual tendo o pre√ßo </p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
661
</p>
<pre><code class="language-mql5">
   if(!time)
      time=TimeCurrent();
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);
//--- redefine o valor de erro
   ResetLastError();
//--- mover o ponto de ancoragem
   if(!ObjectMove(chart_ID,name,0,time,price))
     {
      Print(__FUNCTION__,
            &quot;: falha ao mover o ponto de ancoragem! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Alterar tamanho do escopo de visibilidade (objeto)¬†              |
//+------------------------------------------------------------------+
bool BitmapChangeSize(const long   chart_ID=0,    // ID do gr√°fico
                      const string name=&quot;Bitmap&quot;, // nome do bitmap
                      const int    width=0,       // largura do bitmap
                      const int    height=0)      // altura do bitmap
  {
//--- redefine o valor de erro
   ResetLastError();
//--- alterar tamanho do bitmap
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_XSIZE,width))
     {
      Print(__FUNCTION__,
            &quot;: falha ao alterar a largura do bitmap! C√≥digo de erro = &quot;,GetLastError()
      return(false);
     }
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_YSIZE,height))
     {
      Print(__FUNCTION__,
            &quot;: falha ao alterar a altura do bitmap! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+--------------------------------------------------------------------+
//| Mudar coordenada canto superior esquerdo do escopo de visibilidade |
//+--------------------------------------------------------------------+
bool BitmapMoveVisibleArea(const long   chart_ID=0,    // ID do gr√°fico
                           const string name=&quot;Bitmap&quot;, // nome do bitmap
                           const int    x_offset=0,    // coordenada X do escopo de vi
                           const int    y_offset=0)    // coordenada Y do escopo de vi</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
662
</p>
<pre><code class="language-mql5">
  {
//--- redefine o valor de erro
   ResetLastError();
//--- alterar as coordenadas do escopo de visibilidade do bitmap
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_XOFFSET,x_offset))
     {
      Print(__FUNCTION__,
            &quot;: falha para alterar coordenada X do escopo de visibilidade! C√≥digo de er
      return(false);
     }
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_YOFFSET,y_offset))
     {
      Print(__FUNCTION__,
            &quot;: falha para alterar coordenada Y do escopo de visibilidade! C√≥digo de er
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Excluir um bitmap¬†                                               |
//+------------------------------------------------------------------+
bool BitmapDelete(const long   chart_ID=0,    // ID do gr√°fico
                  const string name=&quot;Bitmap&quot;) // nome do bitmap
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir a etiqueta
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,
            &quot;: falha ao excluir um bitmap! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Verificar valores de ponto de ancoragem e definir valores padr√£o¬†|
//| para aqueles vazios¬†                                             |
//+------------------------------------------------------------------+
void ChangeBitmapEmptyPoint(datetime &amp;time,double &amp;price)
  {
//--- se o tempo do ponto n√£o est√° definido, ser√° na barra atual
   if(!time)
      time=TimeCurrent();
//--- se o pre√ßo do ponto n√£o est√° definido, ele ter√° valor Bid
   if(!price)
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
663
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
   datetime date[];  // array para armazenar datas das barras vis√≠veis
   double   close[]; // array para armazenar Fechamento de pre√ßos
//--- nome do arquivo bitmap
   string   file=&quot;\\Images\\dollar.bmp&quot;;
//--- n√∫mero de barras vis√≠veis na janela do gr√°fico
   int bars=(int)ChartGetInteger(0,CHART_VISIBLE_BARS);
//--- aloca√ß√£o de mem√≥ria
   ArrayResize(date,bars);
   ArrayResize(close,bars);
//--- preencher o array das datas
   ResetLastError();
   if(CopyTime(Symbol(),Period(),0,bars,date)==-1)
     {
      Print(&quot;Falha ao copiar valores de tempo! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- preencher o array dos pre√ßos Baixos
   if(CopyClose(Symbol(),Period(),0,bars,close)==-1)
     {
      Print(&quot;Falha ao copiar os valores dos pre√ßos Baixos! C√≥digo de erro = &quot;,GetLastE
      return;
     }
//--- definir como frequentemente as imagens devem ser exibidas
   int scale=(int)ChartGetInteger(0,CHART_SCALE);
//--- definir o passo
   int step=1;
   switch(scale)
     {
      case 0:
         step=27;
         break;
      case 1:
         step=14;
         break;
      case 2:
         step=7;
         break;
      case 3:
         step=4;
         break;
      case 4:
         step=2;
         break;</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
664
</p>
<pre><code class="language-mql5">
     }
//--- criar bitmaps para valores de barra Alta e Baixa (com intervalos)
   for(int i=0;i&lt;bars;i+=step)
     {
      //--- criar os bitmaps
      if(!BitmapCreate(0,&quot;Bitmap_&quot;+(string)i,0,date[i],close[i],InpFile,InpWidth,InpHe
         InpYOffset,InpColor,InpStyle,InpPointWidth,InpBack,InpSelection,InpHidden,Inp
        {
         return;
        }
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
      // 0.05 segundos de atraso
      Sleep(50);
     }
//--- meio segundo de atraso
   Sleep(500);
//--- excluir sinal Sell
   for(int i=0;i&lt;bars;i+=step)
     {
      if(!BitmapDelete(0,&quot;Bitmap_&quot;+(string)i))
         return;
      if(!BitmapDelete(0,&quot;Bitmap_&quot;+(string)i))
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
      // 0.05 segundos de atraso
      Sleep(50);
     }
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
665
<h3>OBJ_BITMAP_LABEL</h3>
Objeto Etiqueta Bitmap.
<h3>Observa√ß√£o</h3>
Posi√ß√£o do ponto de ancoragem relativa a etiqueta pode ser selecionada do enumerador
ENUM_ANCHOR_POINT. Coordenadas do ponto de ancoragem s√£o em pixels.
Voc√™ tamb√©m pode selecionar uma ancoragem do bitmap no canto a partir da enumera√ß√£o
ENUM_BASE_CORNER.
Para etiqueta bitmap, voc√™ pode selecionar no escopo de visibilidade de uma imagem.
<h3>Exemplo</h3>
O seguinte script cria v√°rios bitmaps no gr√°fico. Fun√ß√µes especiais t√™m sido desenvolvidas para
criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas fun√ß√µes &quot;as is&quot; em seus
pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script criando objeto \&quot;Bitmap Label\&quot;.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string            InpName=&quot;BmpLabel&quot;;               // Nome etiqueta
input string            InpFileOn=&quot;\\Images\\dollar.bmp&quot;; // O nome do arquivo para o 
input string            InpFileOff=&quot;\\Images\\euro.bmp&quot;;  // O nome do arquivo para o 
input bool              InpState=false;                   // Etiqueta pressionada/libe
input ENUM_BASE_CORNER  InpCorner=CORNER_LEFT_UPPER;      // Canto do gr√°fico para anc
input ENUM_ANCHOR_POINT InpAnchor=ANCHOR_CENTER;          // Tipo de ancoragem</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
666
</p>
<pre><code class="language-mql5">
input color             InpColor=clrRed;                  // A cor da borda quando des
input ENUM_LINE_STYLE   InpStyle=STYLE_SOLID;             // Estilo da linha quando de
input int               InpPointWidth=1;                  // Tamanho do ponto para mov
input bool              InpBack=false;                    // Objeto de fundo
input bool              InpSelection=false;               // Destaque para mover
input bool              InpHidden=true;                   // Ocultar na lista de objet
input long              InpZOrder=0;                      // Prioridade para clicar no
//+------------------------------------------------------------------+
//| Criar objeto Etiqueta Bitmap¬†                                    |
//+------------------------------------------------------------------+
bool BitmapLabelCreate(const long              chart_ID=0,               // ID do gr√°f
                       const string            name=&quot;BmpLabel&quot;,          // nome da et
                       const int               sub_window=0,             // √≠ndice da 
                       const int               x=0,                      // coordenada
                       const int               y=0,                      // coordenada
                       const string            file_on=&quot;&quot;,               // imagem em 
                       const string            file_off=&quot;&quot;,              // imagem em 
                       const int               width=0,                  // coordenada
                       const int               height=0,                 // coordenada
                       const int               x_offset=10,              // escopo de 
                       const int               y_offset=10,              // escopo de 
                       const bool              state=false,              // pressionad
                       const ENUM_BASE_CORNER  corner=CORNER_LEFT_UPPER, // canto do g
                       const ENUM_ANCHOR_POINT anchor=ANCHOR_LEFT_UPPER, // tipo de an
                       const color             clr=clrRed,               // a cor da b
                       const ENUM_LINE_STYLE   style=STYLE_SOLID,        // estilo da 
                       const int               point_width=1,            // mover tama
                       const bool              back=false,               // no fundo
                       const bool              selection=false,          // destaque p
                       const bool              hidden=true,              // ocultar na
                       const long              z_order=0)                // prioridade
  {
//--- redefine o valor de erro
   ResetLastError();
//--- criar uma etiqueta bitmap
   if(!ObjectCreate(chart_ID,name,OBJ_BITMAP_LABEL,sub_window,0,0))
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar objeto \&quot;Etiqueta Bitmap\&quot;! C√≥digo de erro = &quot;,GetLastEr
      return(false);
     }
//--- definir as imagens para os modos ligar (On) e desligar (Off)
   if(!ObjectSetString(chart_ID,name,OBJPROP_BMPFILE,0,file_on))
     {
      Print(__FUNCTION__,
            &quot;: falha para carregar a imagem para o modo On! C√≥digo de erro = &quot;,GetLast
      return(false);
     }
   if(!ObjectSetString(chart_ID,name,OBJPROP_BMPFILE,1,file_off))</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
667
</p>
<pre><code class="language-mql5">
     {
      Print(__FUNCTION__,
            &quot;: falha para carregar a imagem para o modo Off! C√≥digo de erro = &quot;,GetLas
      return(false);
     }
//--- definir coordenadas da etiqueta
   ObjectSetInteger(chart_ID,name,OBJPROP_XDISTANCE,x);
   ObjectSetInteger(chart_ID,name,OBJPROP_YDISTANCE,y);
//--- definir escopo de visibilidade para a imagem, se os valores da largura ou altura
//--- excederem a largura e a altura (respectivamente) de uma imagem de origem,
//--- n√£o ser√° desenhada, no caso oposto
//--- apenas a parte correspondente a esses valores ser√° desenhada
   ObjectSetInteger(chart_ID,name,OBJPROP_XSIZE,width);
   ObjectSetInteger(chart_ID,name,OBJPROP_YSIZE,height);
//--- definir a parte de uma imagem que est√° sendo exibida no escopo de visibilidade,
//--- a parte padr√£o √© a √°rea superior esquerda de uma imagem, os valores permitem
//--- realizar uma mudan√ßa a partir desta √°rea de exibi√ß√£o de uma outra parte da image
   ObjectSetInteger(chart_ID,name,OBJPROP_XOFFSET,x_offset);
   ObjectSetInteger(chart_ID,name,OBJPROP_YOFFSET,y_offset);
//--- definir os status da etiqueta(pressionada ou liberada)
   ObjectSetInteger(chart_ID,name,OBJPROP_STATE,state);
//--- determinar o canto do gr√°fico onde as coordenadas do ponto s√£o definidas
   ObjectSetInteger(chart_ID,name,OBJPROP_CORNER,corner);
//--- tipo de defini√ß√£o de ancoragem
   ObjectSetInteger(chart_ID,name,OBJPROP_ANCHOR,anchor);
//--- definir a cor da borda quando o modo de destaque do objeto √© habilitado
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir o estilo de linha quando o modo de destaque do objeto √© habilitado
   ObjectSetInteger(chart_ID,name,OBJPROP_STYLE,style);
//--- definir o tamanho do ponto de ancoragem para movimentar o objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,point_width);
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- Habilitar (true) ou desabilitar (false) o modo de movimento da etiqueta pelo mou
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Definir uma nova imagem para objeto etiqueta Bitmap¬†             |
//+------------------------------------------------------------------+
bool BitmapLabelSetImage(const long   chart_ID=0,      // ID do gr√°fico
                         const string name=&quot;BmpLabel&quot;, // nome da etiqueta
                         const int    on_off=0,        // modificador (On ou Off)</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
668
</p>
<pre><code class="language-mql5">
                         const string file=&quot;&quot;)         // caminho para o arquivo
  {
//--- redefine o valor de erro
   ResetLastError();
//--- definir o caminho para o arquivo da imagem
   if(!ObjectSetString(chart_ID,name,OBJPROP_BMPFILE,on_off,file))
     {
      Print(__FUNCTION__,
            &quot;: falha para carregar a imagem! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mover objeto Etiqueta Bitmap¬†                                    |
//+------------------------------------------------------------------+
bool BitmapLabelMove(const long   chart_ID=0,      // ID do gr√°fico
                     const string name=&quot;BmpLabel&quot;, // nome da etiqueta
                     const int    x=0,             // coordenada X
                     const int    y=0)             // coordenada Y
  {
//--- redefine o valor de erro
   ResetLastError();
//--- mover o objeto
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_XDISTANCE,x))
     {
      Print(__FUNCTION__,
            &quot;: falha para mover coordenada X do objeto! C√≥digo de erro = &quot;,GetLastErro
      return(false);
     }
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_YDISTANCE,y))
     {
      Print(__FUNCTION__,
            &quot;: falha para mover coordenada Y do objeto! C√≥digo de erro = &quot;,GetLastErro
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Alterar tamanho do escopo de visibilidade (objeto)¬†              |
//+------------------------------------------------------------------+
bool BitmapLabelChangeSize(const long   chart_ID=0,      // ID do gr√°fico
                           const string name=&quot;BmpLabel&quot;, // nome da etiqueta
                           const int    width=0,         // largura da etiqueta
                           const int    height=0)        // altura da etiqueta
  {
//--- redefine o valor de erro</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
669
</p>
<pre><code class="language-mql5">
   ResetLastError();
//--- alterar o tamanho do objeto
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_XSIZE,width))
     {
      Print(__FUNCTION__,
            &quot;: falha ao alterar a largura do objeto! C√≥digo de erro = &quot;,GetLastError()
      return(false);
     }
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_YSIZE,height))
     {
      Print(__FUNCTION__,
            &quot;: falha ao alterar a altura do objeto! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+--------------------------------------------------------------------+
//| Mudar coordenada canto superior esquerdo do escopo de visibilidade |
//+--------------------------------------------------------------------+
bool BitmapLabelMoveVisibleArea(const long   chart_ID=0,      // ID do grafico
                                const string name=&quot;BmpLabel&quot;, // nome da etiqueta
                                const int    x_offset=0,      // coordenada X do escop
                                const int    y_offset=0)      // coordenada Y do escop
  {
//--- redefine o valor de erro
   ResetLastError();
//--- alterar as coordenadas do escopo de visibilidade do objeto
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_XOFFSET,x_offset))
     {
      Print(__FUNCTION__,
            &quot;: falha para alterar coordenada X do escopo de visibilidade! C√≥digo de er
      return(false);
     }
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_YOFFSET,y_offset))
     {
      Print(__FUNCTION__,
            &quot;: falha para alterar coordenada Y do escopo de visibilidade! C√≥digo de er
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Excluir o Objeto &quot;Bitmap label&quot;¬†                                 |
//+------------------------------------------------------------------+
bool BitmapLabelDelete(const long   chart_ID=0,      // ID do gr√°fico
                       const string name=&quot;BmpLabel&quot;) // nome da etiqueta
  {</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
670
</p>
<pre><code class="language-mql5">
//--- redefine o valor de erro
   ResetLastError();
//--- excluir a etiqueta
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,
            &quot;: falha ao excluir objeto \&quot;Bitmap label\&quot;! C√≥digo de erro = &quot;,GetLastErr
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- tamanho da janela do gr√°fico
   long x_distance;
   long y_distance;
//--- definir tamanho da janela
   if(!ChartGetInteger(0,CHART_WIDTH_IN_PIXELS,0,x_distance))
     {
      Print(&quot;Falha ao obter a largura do gr√°fico! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
   if(!ChartGetInteger(0,CHART_HEIGHT_IN_PIXELS,0,y_distance))
     {
      Print(&quot;Falha ao obter a altura do gr√°fico! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- definir coordenadas da etiqueta bitmap
   int x=(int)x_distance/2;
   int y=(int)y_distance/2;
//--- definir o tamanho da etiqueta e a coordenada do escopo de visibilidade
   int width=32;
   int height=32;
   int x_offset=0;
   int y_offset=0;
//--- local da etiqueta bitmap no centro da janela
   if(!BitmapLabelCreate(0,InpName,0,x,y,InpFileOn,InpFileOff,width,height,x_offset,y_
      InpCorner,InpAnchor,InpColor,InpStyle,InpPointWidth,InpBack,InpSelection,InpHidd
     {
      return;
     }
//--- redesenhar o gr√°fico e esperar um segundo
   ChartRedraw();
   Sleep(1000);
//--- alterar tamanho do escopo de visibilidade da etiqueta em loop</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
671
</p>
<pre><code class="language-mql5">
   for(int i=0;i&lt;6;i++)
     {
      //--- alterar o tamanho do escopo
      width--;
      height--;
      if(!BitmapLabelChangeSize(0,InpName,width,height))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
      // 0.3 segundos de atraso
      Sleep(300);
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- alterar as coordenadas do escopo de visibilidade da etiqueta em loop
   for(int i=0;i&lt;2;i++)
     {
      //--- alterar coordenadas do escopo de visibilidade
      x_offset++;
      y_offset++;
      if(!BitmapLabelMoveVisibleArea(0,InpName,x_offset,y_offset))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
      // 0.3 segundos de atraso
      Sleep(300);
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- excluir a etiqueta
   BitmapLabelDelete(0,InpName);
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
672
<h3>OBJ_EDIT</h3>
Objeto Edit.
<h3>Observa√ß√£o</h3>
Coordenadas do ponto de ancoragem s√£o em pixels. Voc√™ tamb√©m pode selecionar uma ancoragem
do Edit no canto a partir do enumerador ENUM_BASE_CORNER.
Voc√™ tamb√©m pode selecionar um dos tipos de alinhamento de texto dentro de Edit a partir da
enumera√ß√£o ENUM_ALIGN_MODE.
<h3>Exemplo</h3>
O seguinte script cria e move o objeto Edit no gr√°fico. Fun√ß√µes especiais t√™m sido desenvolvidas
para criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas fun√ß√µes &quot;as is&quot; em
seus pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script cria objeto \&quot;Edit\&quot;.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string           InpName=&quot;Edit&quot;;              // Nome do objeto
input string           InpText=&quot;Text&quot;;              // Texto de objeto
input string           InpFont=&quot;Arial&quot;;             // Fonte
input int              InpFontSize=14;              // Tamanho da fonte
input ENUM_ALIGN_MODE  InpAlign=ALIGN_CENTER;       // Tipo de alinhamento de texto
input bool             InpReadOnly=false;           // Habilidade de editar
input ENUM_BASE_CORNER InpCorner=CORNER_LEFT_UPPER; // Canto do gr√°fico para ancoragem
input color            InpColor=clrBlack;           // Cor do texto</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
673
</p>
<pre><code class="language-mql5">
input color            InpBackColor=clrWhite;       // Fundo da cor
input color            InpBorderColor=clrBlack;     // Cor da borda
input bool             InpBack=false;               // Objeto de Fundo
input bool             InpSelection=false;          // Destaque para mover
input bool             InpHidden=true;              // Ocultar na lista de objeto
input long             InpZOrder=0;                 // Prioridade para clique do mouse
//+------------------------------------------------------------------+
//| Criar o objeto Edit¬†                                             |
//+------------------------------------------------------------------+
bool EditCreate(const long             chart_ID=0,               // ID do gr√°fico
                const string           name=&quot;Edit&quot;,              // nome do objeto
                const int              sub_window=0,             // √≠ndice da sub-jane
                const int              x=0,                      // coordenada X
                const int              y=0,                      // coordenada Y
                const int              width=50,                 // largura
                const int              height=18,                // altura
                const string           text=&quot;Text&quot;,              // texto
                const string           font=&quot;Arial&quot;,             // fonte
                const int              font_size=10,             // tamanho da fonte
                const ENUM_ALIGN_MODE  align=ALIGN_CENTER,       // tipo de alinhament
                const bool             read_only=false,          // habilidade para ed
                const ENUM_BASE_CORNER corner=CORNER_LEFT_UPPER, // canto do gr√°fico p
                const color            clr=clrBlack,             // cor do texto
                const color            back_clr=clrWhite,        // cor do fundo
                const color            border_clr=clrNONE,       // cor da borda
                const bool             back=false,               // no fundo
                const bool             selection=false,          // destaque para move
                const bool             hidden=true,              // ocultar na lista d
                const long             z_order=0)                // prioridade para cl
  {
//--- redefine o valor de erro
   ResetLastError();
//--- criar campo de edi√ß√£o
   if(!ObjectCreate(chart_ID,name,OBJ_EDIT,sub_window,0,0))
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar objeto \&quot;Edit\&quot;! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- definir coordenadas do objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_XDISTANCE,x);
   ObjectSetInteger(chart_ID,name,OBJPROP_YDISTANCE,y);
//--- definir tamanho do objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_XSIZE,width);
   ObjectSetInteger(chart_ID,name,OBJPROP_YSIZE,height);
//--- definir o texto
   ObjectSetString(chart_ID,name,OBJPROP_TEXT,text);
//--- definir o texto fonte
   ObjectSetString(chart_ID,name,OBJPROP_FONT,font);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
674
</p>
<pre><code class="language-mql5">
//--- definir tamanho da fonte
   ObjectSetInteger(chart_ID,name,OBJPROP_FONTSIZE,font_size);
//--- definir o tipo de alinhamento do texto no objeto
   ObjectSetInteger(chart_ID,name,OBJPROP_ALIGN,align);
//--- habilitar (true) ou cancelar (false) modo de somente leitura
   ObjectSetInteger(chart_ID,name,OBJPROP_READONLY,read_only);
//--- definir o canto do gr√°fico onde as coordenadas do objeto s√£o definidas
   ObjectSetInteger(chart_ID,name,OBJPROP_CORNER,corner);
//--- definir a cor do texto
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir a cor de fundo
   ObjectSetInteger(chart_ID,name,OBJPROP_BGCOLOR,back_clr);
//--- definir a cor da borda
   ObjectSetInteger(chart_ID,name,OBJPROP_BORDER_COLOR,border_clr);
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- Habilitar (true) ou desabilitar (false) o modo de movimento da etiqueta pelo mou
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mover objeto Edit¬†                                               |
//+------------------------------------------------------------------+
bool EditMove(const long   chart_ID=0,  // ID do gr√°fico
              const string name=&quot;Edit&quot;, // nome do objeto
              const int    x=0,         // coordenada X
              const int    y=0)         // coordenada Y
  {
//--- redefine o valor de erro
   ResetLastError();
//--- mover o objeto
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_XDISTANCE,x))
     {
      Print(__FUNCTION__,
            &quot;: falha para mover coordenada X do objeto! C√≥digo de erro = &quot;,GetLastErro
      return(false);
     }
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_YDISTANCE,y))
     {
      Print(__FUNCTION__,
            &quot;: falha para mover coordenada Y do objeto! C√≥digo de erro = &quot;,GetLastErro
      return(false);
     }</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
675
</p>
<pre><code class="language-mql5">
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Redimensionar objeto Edit¬†                                       |
//+------------------------------------------------------------------+
bool EditChangeSize(const long   chart_ID=0,  // ID do gr√°fico
                    const string name=&quot;Edit&quot;, // nome do objeto
                    const int    width=0,     // largura
                    const int    height=0)    // altura
  {
//--- redefine o valor de erro
   ResetLastError();
//--- alterar o tamanho do objeto
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_XSIZE,width))
     {
      Print(__FUNCTION__,
            &quot;: falha ao alterar a largura do objeto! C√≥digo de erro = &quot;,GetLastError()
      return(false);
     }
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_YSIZE,height))
     {
      Print(__FUNCTION__,
            &quot;: falha ao alterar a altura do objeto! C√≥digo de erro = &quot;,GetLastError())
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Alterar texto do objeto Edit¬†                                    |
//+------------------------------------------------------------------+
bool EditTextChange(const long   chart_ID=0,  // ID do gr√°fico
                    const string name=&quot;Edit&quot;, // nome do objeto
                    const string text=&quot;Text&quot;) // texto
  {
//--- redefine o valor de erro
   ResetLastError();
//--- alterar texto do objeto
   if(!ObjectSetString(chart_ID,name,OBJPROP_TEXT,text))
     {
      Print(__FUNCTION__,
            &quot;: falha ao alterar texto! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
676
</p>
<pre><code class="language-mql5">
//| Retornar texto de objeto¬†                                        |
//+------------------------------------------------------------------+
bool EditTextGet(string      &amp;text,        // texto
                 const long   chart_ID=0,  // ID do gr√°fico
                 const string name=&quot;Edit&quot;) // nome do objeto
  {
//--- redefine o valor de erro
   ResetLastError();
//--- obter texto do objeto
   if(!ObjectGetString(chart_ID,name,OBJPROP_TEXT,0,text))
     {
      Print(__FUNCTION__,
            &quot;: falha ao obter o texto! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Excluir objeto Edit¬†                                             |
//+------------------------------------------------------------------+
bool EditDelete(const long   chart_ID=0,  // ID do gr√°fico
                const string name=&quot;Edit&quot;) // nome do objeto
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir a etiqueta
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,
            &quot;: falha ao deletar objeto \&quot;Edit\&quot;! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- tamanho da janela do gr√°fico
   long x_distance;
   long y_distance;
//--- definir tamanho da janela
   if(!ChartGetInteger(0,CHART_WIDTH_IN_PIXELS,0,x_distance))
     {
      Print(&quot;Falha ao obter a largura do gr√°fico! C√≥digo de erro = &quot;,GetLastError());
      return;</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
677
</p>
<pre><code class="language-mql5">
     }
   if(!ChartGetInteger(0,CHART_HEIGHT_IN_PIXELS,0,y_distance))
     {
      Print(&quot;Falha ao obter a altura do gr√°fico! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- definir o passo para mudar o campo edit
   int x_step=(int)x_distance/64;
//--- definir coordenadas do campo edit e seu tamanho
   int x=(int)x_distance/8;
   int y=(int)y_distance/2;
   int x_size=(int)x_distance/8;
   int y_size=InpFontSize*2;
//--- armazenar o texto na vari√°vel local
   string text=InpText;
//--- criar campo de edi√ß√£o
   if(!EditCreate(0,InpName,0,x,y,x_size,y_size,InpText,InpFont,InpFontSize,InpAlign,I
      InpCorner,InpColor,InpBackColor,InpBorderColor,InpBack,InpSelection,InpHidden,In
     {
      return;
     }
//--- redesenhar o gr√°fico e esperar por um segundo
   ChartRedraw();
   Sleep(1000);
//--- estender o campo edit
   while(x_size-x&lt;x_distance*5/8)
     {
      //--- aumentar a largura do campo edit
      x_size+=x_step;
      if(!EditChangeSize(0,InpName,x_size,y_size))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico e esperar por 0.05 segundos
      ChartRedraw();
      Sleep(50);
     }
//--- meio segundo de atraso
   Sleep(500);
//--- alterar o texto
   for(int i=0;i&lt;20;i++)
     {
      //--- adicionar &quot;+&quot; no in√≠cio e no final
      text=&quot;+&quot;+text+&quot;+&quot;;
      if(!EditTextChange(0,InpName,text))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
678
</p>
<pre><code class="language-mql5">
         return;
      //--- redesenhar o gr√°fico e esperar por 0.1 segundos
      ChartRedraw();
      Sleep(100);
     }
//--- meio segundo de atraso
   Sleep(500);
//--- excluir campo edit
   EditDelete(0,InpName);
   ChartRedraw();
//--- esperar por um segundo
   Sleep(1000);
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
679
<h3>OBJ_EVENT</h3>
Objeto Evento.
<h3>Observa√ß√£o</h3>
Quando mover o mouse sobre o evento, o texto aparece.
<h3>Exemplo</h3>
O seguinte script cria e move o objeto Evento no gr√°fico. Fun√ß√µes especiais t√™m sido desenvolvidas
para criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas fun√ß√µes &quot;as is&quot; em
seus pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script desenha objeto gr√°fico \&quot;Evento\&quot;.&quot;
#property description &quot;Coordenadas do ponto de ancoragem √© configurado em porcentagem 
#property description &quot;largura da janela do gr√°fico em barras.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string          InpName=&quot;Event&quot;;    // Nome do evento
input int             InpDate=25;         // Data do Evento, %
input string          InpText=&quot;Text&quot;;     // Texto do Evento
input color           InpColor=clrRed;    // Cor do Evento
input int             InpWidth=1;         // Tamanho do ponto quando destacado
input bool            InpBack=false;      // Evento de Fundo
input bool            InpSelection=false; // Destaque para mover
input bool            InpHidden=true;     // Ocultar na lista de objeto</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
680
</p>
<pre><code class="language-mql5">
input long            InpZOrder=0;        // Prioridade para clicar no mouse
//+------------------------------------------------------------------+
//| Create objeto Evento no gr√°fico                                 |
//+------------------------------------------------------------------+
bool EventCreate(const long            chart_ID=0,      // ID de gr√°fico
                 const string          name=&quot;Event&quot;,    // nome do evento
                 const int             sub_window=0,    // √≠ndice da sub-janela
                 const string          text=&quot;Text&quot;,     // texto do evento
                 datetime              time=0,          // tempo
                 const color           clr=clrRed,      // cor
                 const int             width=1,         // largura do ponto quando em 
                 const bool            back=false,      // no fundo
                 const bool            selection=false, // destaque para mover
                 const bool            hidden=true,     // ocultar na lista de objetos
                 const long            z_order=0)       // prioridade para clique do m
  {
//--- se o tempo n√£o estiver definido, criar o objeto no √∫ltimo bar
   if(!time)
      time=TimeCurrent();
//--- redefine o valor de erro
   ResetLastError();
//--- criar objeto Evento
   if(!ObjectCreate(chart_ID,name,OBJ_EVENT,sub_window,time,0))
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar objeto \&quot;Evento\&quot;! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- definir texto do evento
   ObjectSetString(chart_ID,name,OBJPROP_TEXT,text);
//--- definir cor
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir a largura de ponto de ancoragem se o objeto √© destacado
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,width);
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- permitir (true) ou desabilitar (false) o modo de movimento do evento com o mouse
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Alterar o texto do objeto Evento¬†                                |
//+------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
681
</p>
<pre><code class="language-mql5">
bool EventTextChange(const long   chart_ID=0,   // ID do gr√°fico
                     const string name=&quot;Event&quot;, // nome do evento
                     const string text=&quot;Text&quot;)  // texto
  {
//--- redefine o valor de erro
   ResetLastError();
//--- alterar texto do objeto
   if(!ObjectSetString(chart_ID,name,OBJPROP_TEXT,text))
     {
      Print(__FUNCTION__,
            &quot;: falha ao alterar texto! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mover objeto Evento¬†                                             |
//+------------------------------------------------------------------+
bool EventMove(const long   chart_ID=0,   // ID do gr√°fico
               const string name=&quot;Event&quot;, // nome do evento
               datetime     time=0)       // tempo
  {
//--- se o tempo n√£o estiver definido, mover evento at√© o √∫ltimo bar
   if(!time)
      time=TimeCurrent();
//--- redefine o valor de erro
   ResetLastError();
//--- mover o objeto
   if(!ObjectMove(chart_ID,name,0,time,0))
     {
      Print(__FUNCTION__,
            &quot;: falha ao mover objeto \&quot;Evento\&quot;! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Excluir objeto Evento¬†                                           |
//+------------------------------------------------------------------+
bool EventDelete(const long   chart_ID=0,   // ID do gr√°fico
                 const string name=&quot;Event&quot;) // nome do evento
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir o objeto
   if(!ObjectDelete(chart_ID,name))
     {</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
682
</p>
<pre><code class="language-mql5">
      Print(__FUNCTION__,
            &quot;: falha ao deletar objeto \&quot;Evento\&quot;! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- verificar a exatid√£o dos par√¢metros de entrada
   if(InpDate&lt;0 || InpDate&gt;100)
     {
      Print(&quot;Erro! Valores incorretos dos par√¢metros de entrada!&quot;);
      return;
     }
//--- n√∫mero de barras vis√≠veis na janela do gr√°fico
   int bars=(int)ChartGetInteger(0,CHART_VISIBLE_BARS);
//--- array para armazenar a data de valores a serem utilizados
//--- para definir e alterar as coordenadas de pontos de ancoragem
   datetime date[];
//--- aloca√ß√£o de mem√≥ria
   ArrayResize(date,bars);
//--- preencher o array das datas
   ResetLastError();
   if(CopyTime(Symbol(),Period(),0,bars,date)==-1)
     {
      Print(&quot;Falha ao copiar valores de tempo! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- definir os pontos para criar um objeto
   int d=InpDate*(bars-1)/100;
//--- criar objeto Evento
   if(!EventCreate(0,InpName,0,InpText,date[d],InpColor,InpWidth,
      InpBack,InpSelection,InpHidden,InpZOrder))
     {
      return;
     }
//--- redesenhar o gr√°fico e esperar por um segundo
   ChartRedraw();
   Sleep(1000);
//--- agora, mover o objeto
//--- contador de loop
   int h_steps=bars/2;
//--- mover o objeto
   for(int i=0;i&lt;h_steps;i++)
     {</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
683
</p>
<pre><code class="language-mql5">
      //--- usar o seguinte valor
      if(d&lt;bars-1)
         d+=1;
      //--- mover o ponto
      if(!EventMove(0,InpName,date[d]))
         return;
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico
      ChartRedraw();
      // 0.05 segundos de atraso
      Sleep(50);
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- excluir o canal do gr√°fico
   EventDelete(0,InpName);
   ChartRedraw();
//--- 1 segundo de atraso
   Sleep(1000);
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
684
<h3>OBJ_RECTANGLE_LABEL</h3>
Objeto Etiqueta Retangular.
<h3>Observa√ß√£o</h3>
Coordenadas do ponto de ancoragem s√£o em pixels. √â poss√≠vel a ancoragem no canto de uma
etiqueta retangular a partir do enumerador ENUM_BASE_CORNER. O tipo de borda da etiqueta
retangular pode ser selecionado a partir do enumerador ENUM_BORDER_TYPE.
O objeto √© usado para criar e projetar a interface gr√°fica personalizada.
<h3>Exemplo</h3>
O seguinte script cria e move o objeto Etiqueta Retangular no gr√°fico. Fun√ß√µes especiais t√™m sido
desenvolvidas para criar e alterar as propriedades do objeto gr√°fico. Voc√™ pode utilizar estas
fun√ß√µes &quot;as is&quot; em seus pr√≥prios aplicativos.
</p>
<pre><code class="language-mql5">
//--- descri√ß√£o
#property description &quot;Script cria objeto gr√°fico \&quot;Etiqueta Retangular\&quot;.&quot;
//--- janela de exibi√ß√£o dos par√¢metros de entrada durante inicializa√ß√£o do script
#property script_show_inputs
//--- entrada de par√¢metros do script
input string           InpName=&quot;RectLabel&quot;;         // Nome etiqueta
input color            InpBackColor=clrSkyBlue;     // Fundo da cor
input ENUM_BORDER_TYPE InpBorder=BORDER_FLAT;       // Tipo de Borda
input ENUM_BASE_CORNER InpCorner=CORNER_LEFT_UPPER; // Canto do gr√°fico para ancoragem
input color            InpColor=clrDarkBlue;        // Cor da borda plana (Flat)
input ENUM_LINE_STYLE  InpStyle=STYLE_SOLID;        // Estilo da borda plana (Flat)
input int              InpLineWidth=3;              // Largura da borda plana (Flat)</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
685
</p>
<pre><code class="language-mql5">
input bool             InpBack=false;               // Objeto de Fundo
input bool             InpSelection=true;           // Destaque para mover
input bool             InpHidden=true;              // Ocultar na lista de objeto
input long             InpZOrder=0;                 // Prioridade para clique do mouse
//+------------------------------------------------------------------+
//| Criar etiqueta retangular¬†                                       |
//+------------------------------------------------------------------+
bool RectLabelCreate(const long             chart_ID=0,               // ID do gr√°fico
                     const string           name=&quot;RectLabel&quot;,         // nome da etiqu
                     const int              sub_window=0,             // √≠ndice da sub
                     const int              x=0,                      // coordenada X
                     const int              y=0,                      // coordenada Y
                     const int              width=50,                 // largura
                     const int              height=18,                // altura
                     const color            back_clr=C&#x27;236,233,216&#x27;,  // cor do fundo
                     const ENUM_BORDER_TYPE border=BORDER_SUNKEN,     // tipo de borda
                     const ENUM_BASE_CORNER corner=CORNER_LEFT_UPPER, // canto do gr√°f
                     const color            clr=clrRed,               // cor da borda 
                     const ENUM_LINE_STYLE  style=STYLE_SOLID,        // estilo da bor
                     const int              line_width=1,             // largura da bo
                     const bool             back=false,               // no fundo
                     const bool             selection=false,          // destaque para
                     const bool             hidden=true,              // ocultar na li
                     const long             z_order=0)                // prioridade pa
  {
//--- redefine o valor de erro
   ResetLastError();
//--- criar uma etiqueta retangular
   if(!ObjectCreate(chart_ID,name,OBJ_RECTANGLE_LABEL,sub_window,0,0))
     {
      Print(__FUNCTION__,
            &quot;: falha ao criar uma etiqueta retangular! C√≥digo de erro = &quot;,GetLastError
      return(false);
     }
//--- definir coordenadas da etiqueta
   ObjectSetInteger(chart_ID,name,OBJPROP_XDISTANCE,x);
   ObjectSetInteger(chart_ID,name,OBJPROP_YDISTANCE,y);
//--- definir tamanho da etiqueta
   ObjectSetInteger(chart_ID,name,OBJPROP_XSIZE,width);
   ObjectSetInteger(chart_ID,name,OBJPROP_YSIZE,height);
//--- definir a cor de fundo
   ObjectSetInteger(chart_ID,name,OBJPROP_BGCOLOR,back_clr);
//--- definir o tipo de borda
   ObjectSetInteger(chart_ID,name,OBJPROP_BORDER_TYPE,border);
//--- determinar o canto do gr√°fico onde as coordenadas do ponto s√£o definidas
   ObjectSetInteger(chart_ID,name,OBJPROP_CORNER,corner);
//--- definir a cor da borda plana (no modo Flat)
   ObjectSetInteger(chart_ID,name,OBJPROP_COLOR,clr);
//--- definir o estilo da linha da borda plana</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
686
</p>
<pre><code class="language-mql5">
   ObjectSetInteger(chart_ID,name,OBJPROP_STYLE,style);
//--- definir a largura da borda plana
   ObjectSetInteger(chart_ID,name,OBJPROP_WIDTH,line_width);
//--- exibir em primeiro plano (false) ou fundo (true)
   ObjectSetInteger(chart_ID,name,OBJPROP_BACK,back);
//--- Habilitar (true) ou desabilitar (false) o modo de movimento da etiqueta pelo mou
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTABLE,selection);
   ObjectSetInteger(chart_ID,name,OBJPROP_SELECTED,selection);
//--- ocultar (true) ou exibir (false) o nome do objeto gr√°fico na lista de objeto 
   ObjectSetInteger(chart_ID,name,OBJPROP_HIDDEN,hidden);
//--- definir a prioridade para receber o evento com um clique do mouse no gr√°fico
   ObjectSetInteger(chart_ID,name,OBJPROP_ZORDER,z_order);
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Mover a etiqueta retangular¬†                                     |
//+------------------------------------------------------------------+
bool RectLabelMove(const long   chart_ID=0,       // ID do gr√°fico
                   const string name=&quot;RectLabel&quot;, // nome da etiqueta
                   const int    x=0,              // coordenada X
                   const int    y=0)              // coordenada Y
  {
//--- redefine o valor de erro
   ResetLastError();
//--- mover a etiqueta retangular
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_XDISTANCE,x))
     {
      Print(__FUNCTION__,
            &quot;: falha para mover coordenada X do objeto! C√≥digo de erro = &quot;,GetLastErro
      return(false);
     }
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_YDISTANCE,y))
     {
      Print(__FUNCTION__,
            &quot;: falha para mover coordenada X do objeto! C√≥digo de erro = &quot;,GetLastErro
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Alterar o tamanho da etiqueta retangular¬†                        |
//+------------------------------------------------------------------+
bool RectLabelChangeSize(const long   chart_ID=0,       // ID do gr√°fico
                         const string name=&quot;RectLabel&quot;, // nome da etiqueta
                         const int    width=50,         // largura da etiqueta
                         const int    height=18)        // altura da etiqueta
  {</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
687
</p>
<pre><code class="language-mql5">
//--- redefine o valor de erro
   ResetLastError();
//--- alterar tamanho da etiqueta
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_XSIZE,width))
     {
      Print(__FUNCTION__,
            &quot;: falha ao alterar a largura da etiqueta! C√≥digo de erro = &quot;,GetLastError
      return(false);
     }
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_YSIZE,height))
     {
      Print(__FUNCTION__,
            &quot;: falha ao alterar a altura da etiqueta! C√≥digo de erro = &quot;,GetLastError
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Alterar o tipo de borda da etiqueta retangular¬†                  |
//+------------------------------------------------------------------+
bool RectLabelChangeBorderType(const long             chart_ID=0,           // ID do g
                               const string           name=&quot;RectLabel&quot;,     // nome da
                               const ENUM_BORDER_TYPE border=BORDER_SUNKEN) // tipo de
  {
//--- redefine o valor de erro
   ResetLastError();
//--- alterar tipo de borda
   if(!ObjectSetInteger(chart_ID,name,OBJPROP_BORDER_TYPE,border))
     {
      Print(__FUNCTION__,
            &quot;: falha ao alterar tipo de borda! C√≥digo de erro = &quot;,GetLastError());
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Excluir etiqueta retangular¬†                                     |
//+------------------------------------------------------------------+
bool RectLabelDelete(const long   chart_ID=0,       // ID do gr√°fico
                     const string name=&quot;RectLabel&quot;) // nome da etiqueta
  {
//--- redefine o valor de erro
   ResetLastError();
//--- excluir a etiqueta
   if(!ObjectDelete(chart_ID,name))
     {
      Print(__FUNCTION__,</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
688
</p>
<pre><code class="language-mql5">
            &quot;: falha ao excluir a etiqueta retangular! C√≥digo de erro = &quot;,GetLastError
      return(false);
     }
//--- sucesso na execu√ß√£o
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- tamanho da janela do gr√°fico
   long x_distance;
   long y_distance;
//--- definir tamanho da janela
   if(!ChartGetInteger(0,CHART_WIDTH_IN_PIXELS,0,x_distance))
     {
      Print(&quot;Falha ao obter a largura do gr√°fico! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
   if(!ChartGetInteger(0,CHART_HEIGHT_IN_PIXELS,0,y_distance))
     {
      Print(&quot;Falha ao obter a altura do gr√°fico! C√≥digo de erro = &quot;,GetLastError());
      return;
     }
//--- definir as coordenadas da etiqueta retangular
   int x=(int)x_distance/4;
   int y=(int)y_distance/4;
//--- definir tamanho da etiqueta
   int width=(int)x_distance/4;
   int height=(int)y_distance/4;
//--- criar uma etiqueta retangular
   if(!RectLabelCreate(0,InpName,0,x,y,width,height,InpBackColor,InpBorder,InpCorner,
      InpColor,InpStyle,InpLineWidth,InpBack,InpSelection,InpHidden,InpZOrder))
     {
      return;
     }
//--- redesenhar o gr√°fico e esperar um segundo
   ChartRedraw();
   Sleep(1000);
//--- alterar o tamanho da etiqueta retangular
   int steps=(int)MathMin(x_distance/4,y_distance/4);
   for(int i=0;i&lt;steps;i++)
     {
      //--- redimensionar
      width+=1;
      height+=1;
      if(!RectLabelChangeSize(0,InpName,width,height))
         return;</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
689
</p>
<pre><code class="language-mql5">
      //--- verificar se o funcionamento do script foi desativado a for√ßa
      if(IsStopped())
         return;
      //--- redesenhar o gr√°fico e esperar por 0.01 segundos
      ChartRedraw();
      Sleep(10);
     }
//--- 1 segundo de atraso
   Sleep(1000);
//--- alterar tipo de borda
   if(!RectLabelChangeBorderType(0,InpName,BORDER_RAISED))
      return;
//--- redesenhar o gr√°fico e esperar por um segundo
   ChartRedraw();
   Sleep(1000);
//--- alterar tipo de borda
   if(!RectLabelChangeBorderType(0,InpName,BORDER_SUNKEN))
      return;
//--- redesenhar o gr√°fico e esperar por um segundo
   ChartRedraw();
   Sleep(1000);
//--- excluir a etiqueta
   RectLabelDelete(0,InpName);
   ChartRedraw();
//--- esperar por um segundo
   Sleep(1000);
//---
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
690
<h3>Propriedades do Objeto</h3>
Os objetos gr√°ficos podem ter muitas propriedades dependendo do tipo de objeto. A configura√ß√£o e a
obten√ß√£o de valores das propriedades dos objetos s√£o efetuadas de acordo com as fun√ß√µes de trabalho
com objetos gr√°ficos. 
Todos os objetos usados na an√°lise t√©cnica s√£o vinculados aos gr√°ficos nas coordenadas de pre√ßo e
tempo: linha de tend√™ncia, canais, ferramentas de Fibonacci, etc.  Mas h√° uma s√©rie de objetos de
apoio projetados para melhorar a interface, e que est√£o vinculados √† parte sempre vis√≠vel do gr√°fico
(janela principal ou subjanela do gr√°fico do indicador):
<h3>Objeto</h3>
<h3>Identificador</h3>
<h3>X/Y</h3>
<h3>Width/</h3>
<h3>Height</h3>
<h3>Date/Pr</h3>
ice
<h3>OBJPRO</h3>
<h3>P_COR</h3>
<h3>NER</h3>
<h3>OBJPRO</h3>
<h3>P_ANC</h3>
<h3>HOR</h3>
<h3>OBJPRO</h3>
<h3>P_ANGL</h3>
<h3>E</h3>
<h3>Text</h3>
<h3>OBJ_TEXT</h3>
‚Äî
‚Äî
<h3>Sim</h3>
‚Äî
<h3>Sim</h3>
<h3>Sim</h3>
<h3>Label</h3>
<h3>OBJ_LABEL</h3>
<h3>Sim</h3>
<h3>Sim</h3>
(apena
s
leitura)
‚Äî
<h3>Sim</h3>
<h3>Sim</h3>
<h3>Sim</h3>
<h3>Button</h3>
<h3>OBJ_BUTTON</h3>
<h3>Sim</h3>
<h3>Sim</h3>
‚Äî
<h3>Sim</h3>
‚Äî
‚Äî
<h3>Bitmap</h3>
<h3>OBJ_BITMAP</h3>
‚Äî
<h3>Sim</h3>
(apena
s
leitura)
<h3>Sim</h3>
‚Äî
<h3>Sim</h3>
‚Äî
<h3>Bitmap</h3>
<h3>Label</h3>
<h3>OBJ_BITMAP_LABEL</h3>
<h3>Sim</h3>
<h3>Sim</h3>
(apena
s
leitura)
‚Äî
<h3>Sim</h3>
<h3>Sim</h3>
‚Äî
<h3>Edit</h3>
<h3>OBJ_EDIT</h3>
<h3>Sim</h3>
<h3>Sim</h3>
‚Äî
<h3>Sim</h3>
‚Äî
‚Äî
<h3>Rectan</h3>
gle
<h3>Label</h3>
<h3>OBJ_RECTANGLE_LABEL</h3>
<h3>Sim</h3>
<h3>Sim</h3>
‚Äî
<h3>Sim</h3>
‚Äî
‚Äî
Na tabela s√£o utilizadas as seguintes denomina√ß√µes:
¬∑ X/Y ‚Äì as coordenadas do ponto √¢ncora s√£o especificadas em pixels em rela√ß√£o a um dos cantos do
gr√°fico;
¬∑ Width/Height ‚Äì os objetos t√™m largura e altura. Se voc√™ definir &quot;apenas leitura&quot;, isso significa que
os valores para largura e altura s√£o calculados somente ap√≥s o processamento do objeto no gr√°fico;
¬∑ Date/Price ‚Äì as coordenadas do ponto √¢ncora s√£o definidas pelo par data/pre√ßo;
¬∑ OBJPROP_CORNER ‚Äì define o √¢ngulo do gr√°fico, que especifica as coordenadas do ponto de √¢ncora.
Pode ser um dos 4 valores de enumera√ß√£o ENUM_BASE_CORNER;
¬∑ OBJPROP_ANCHOR ‚Äì define a posi√ß√£o do ponto de √¢ncora no objeto, e pode ser um dos 9 valores de
enumera√ß√£o ENUM_ANCHOR_POINT. Precisamente a partir desse ponto at√© ao canto selecionado s√£o
expecificadas as cordenadas em pixels;</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
691
¬∑ OBJPROP_ANGLE ‚Äì define o √¢ngulo de rota√ß√£o do objeto no sentido anti-hor√°rio.
As fun√ß√µes que definem as propriedades dos objetos gr√°ficos, bem como as opera√ß√µes ObjectCreate()
e ObjectMove() para criar e mover objetos ao longo do gr√°fico s√£o, na verdade, usadas para enviar
comandos para o gr√°fico. Se essas fun√ß√µes forem executadas com √™xito, o comando ser√° inclu√≠do na
fila comum dos eventos do gr√°fico. As mudan√ßas visuais nas propriedades dos objetos gr√°ficos s√£o
implementadas ao lidar com a fila dos eventos do gr√°fico.
Assim, n√£o espere uma atualiza√ß√£o visual imediata de objetos gr√°ficos ap√≥s chamar essas fun√ß√µes.
Geralmente, os objetos gr√°ficos no gr√°fico s√£o atualizados automaticamente pelo terminal ap√≥s a
mudan√ßa de eventos - a chegada de uma nova cota√ß√£o, o redimensionamento da janela de gr√°fico,
etc. Use a fun√ß√£o ChartRedraw() para for√ßar a atualiza√ß√£o dos objetos gr√°ficos.
<h3>Para fun√ß√µes ChartSetDouble() e ChartGetDouble()</h3>
<h3>ENUM_OBJECT_PROPERTY_INTEGER</h3>
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo de Propriedade</h3>
<h3>OBJPROP_COLOR</h3>
<h3>Cor</h3>
color
<h3>OBJPROP_STYLE</h3>
<h3>Estil</h3>
o
<h3>ENUM_LINE_STYLE</h3>
<h3>OBJPROP_WIDTH</h3>
<h3>Esp</h3>
essu
ra
de
linh
a
int
<h3>OBJPROP_BACK</h3>
<h3>Obj</h3>
eto
no
pan
o de
fund
o
bool
<h3>OBJPROP_ZORDER</h3>
<h3>Prio</h3>
rida
de
de
um
obje
to
gr√°f
ico
para
rece
ber
eve
long</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
692
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo de Propriedade</h3>
ntos
de
clica
gem
em
um
gr√°f
ico
(CH
<h3>ART</h3>
<h3>EVE</h3>
<h3>NT_</h3>
<h3>CLI</h3>
CK).
<h3>O</h3>
valo
r
zero
defa
ult √©
defi
nido
ao
se
cria
r
um
obje
to;
a
prio
rida
de
pod
e
ser
aum
enta
da
se
nec
ess√°
rio.
<h3>Ao</h3>
colo
car
obje</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
693
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo de Propriedade</h3>
tos
um
sobr
e o
outr
o,
som
ente
aqu
ele
com
a
mai
or
prio
rida
de
rece
ber√°
o
eve
nto
<h3>CHA</h3>
<h3>RTE</h3>
<h3>VEN</h3>
<h3>T_C</h3>
<h3>LICK</h3>
.
<h3>OBJPROP_FILL</h3>
<h3>Pree</h3>
nch
e
um
obje
to
com
cor
(par
a
<h3>OBJ</h3>
_RE
<h3>CTA</h3>
<h3>NGL</h3>
<h3>E,</h3>
<h3>OBJ</h3>
_TR
<h3>IAN</h3>
<h3>GLE</h3>
bool</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
694
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo de Propriedade</h3>
,
<h3>OBJ</h3>
_EL
<h3>LIPS</h3>
<h3>E,</h3>
<h3>OBJ</h3>
_CH
<h3>ANN</h3>
<h3>EL,</h3>
<h3>OBJ</h3>
_ST
<h3>DDE</h3>
<h3>VCH</h3>
<h3>ANN</h3>
<h3>EL,</h3>
<h3>OBJ</h3>
_RE
<h3>GRE</h3>
<h3>SSI</h3>
<h3>ON)</h3>
<h3>OBJPROP_HIDDEN</h3>
<h3>Pro√≠</h3>
be
exib
ir o
nom
e de
um
obje
to
gr√°f
ico
na
lista
de
obje
tos
do
men
u do
ter
min
al
&quot;Gr√°
fico
s&quot; -
&quot;Obj
etos
bool</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
695
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo de Propriedade</h3>
&quot; 
-
&quot;Lis
ta
de
obje
tos&quot;
. O
valo
r
true
per
mit
e
ocul
tar
um
obje
to
da
lista
.
<h3>Por</h3>
defa
ult,
true
√©
defi
nido
para
os
obje
tos
que
exib
em
eve
ntos
de
cale
nd√°r
io,
hist
√≥ric
o de
neg
ocia
√ß√£o</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
696
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo de Propriedade</h3>
e
para
obje
tos
cria
dos
a
part
ir
de
prog
ram
as
<h3>MQL</h3>
5.
<h3>Para</h3>
ver
tais
obje
tos
gr√°f
icos
e
aces
sar
suas
prop
ried
ade
s,
cliq
ue
no
bot√£
o
&quot;TO
<h3>DOS</h3>
&quot; na
jane
la
&quot;Lis
ta
de
obje
tos&quot;
. </p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
697
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo de Propriedade</h3>
<h3>OBJPROP_SELECTED</h3>
<h3>Obj</h3>
eto
√©
sele
cion
ado
bool
<h3>OBJPROP_READONLY</h3>
<h3>Cap</h3>
acid
ade
de
edit
ar
text
o no
obje
to
<h3>Edit</h3>
bool
<h3>OBJPROP_TYPE</h3>
<h3>Tipo</h3>
de
obje
to
<h3>ENUM_OBJECT   r/o</h3>
<h3>OBJPROP_TIME</h3>
<h3>Coo</h3>
rden
ada
de
tem
po
datetime   modificador=n√∫mero do ponto de ancoragem
<h3>OBJPROP_SELECTABLE</h3>
<h3>Disp</h3>
onib
ilida
de
de
obje
to
bool
<h3>OBJPROP_CREATETIME</h3>
<h3>Hor</h3>
a de
cria
√ß√£o
do
obje
to
datetime    r/o
<h3>OBJPROP_LEVELS</h3>
<h3>N√∫m</h3>
ero
de
int</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
698
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo de Propriedade</h3>
n√≠ve
is
<h3>OBJPROP_LEVELCOLOR</h3>
<h3>Cor</h3>
das
linh
as
de
n√≠ve
l
color   modificador=n√∫mero de n√≠vel
<h3>OBJPROP_LEVELSTYLE</h3>
<h3>Estil</h3>
o da
linh
a de
n√≠ve
l
<h3>ENUM_LINE_STYLE modificador=n√∫mero de n√≠vel</h3>
<h3>OBJPROP_LEVELWIDTH</h3>
<h3>Espe</h3>
ssur
a do
n√≠vel
de
linha
</p>
<pre><code class="language-mql5">
int      modificador=n√∫mero de n√≠vel
</code></pre>
<p>
<h3>OBJPROP_ALIGN</h3>
<h3>Alin</h3>
ham
ento
de
text
o
hori
zont
al
no
obje
to
&quot;Edi
t&quot; (
<h3>OBJ</h3>
_EDI
<h3>T)</h3>
<h3>ENUM_ALIGN_MODE</h3>
<h3>OBJPROP_FONTSIZE</h3>
<h3>Tam</h3>
anh
o de
font
e
int</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
699
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo de Propriedade</h3>
<h3>OBJPROP_RAY_LEFT</h3>
<h3>Raio</h3>
s
indo
para
esq
uerd
a
bool
<h3>OBJPROP_RAY_RIGHT</h3>
<h3>Raio</h3>
s
indo
para
dire
ita
bool
<h3>OBJPROP_RAY</h3>
<h3>Uma</h3>
linh
a
vert
ical
indo
atra
v√©s
de
toda
s as
jane
las
de
um
gr√°f
ico
bool
<h3>OBJPROP_ELLIPSE</h3>
<h3>Exib</h3>
i√ß√£o
da
elip
se
com
plet
a do
obje
to
<h3>Arco</h3>
de
<h3>Fibo</h3>
nacc
i
bool</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
700
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo de Propriedade</h3>
(OB
<h3>J_FI</h3>
<h3>BOA</h3>
<h3>RC)</h3>
<h3>OBJPROP_ARROWCODE</h3>
<h3>C√≥di</h3>
go
de
seta
para
o
obje
to
<h3>Seta</h3>
uchar
<h3>OBJPROP_TIMEFRAMES</h3>
<h3>Visi</h3>
bilid
ade
de
um
obje
to
nas
jane
las
de
tem
po
conjunto de flags
<h3>OBJPROP_ANCHOR</h3>
<h3>Loc</h3>
aliz
a√ß√£
o do
pont
o de
anc
orag
em
de
um
obje
to
gr√°f
ico
<h3>ENUM_ARROW_ANCHOR (for OBJ_ARROW),</h3>
<h3>ENUM_ANCHOR_POINT</h3>
(for 
<h3>OBJ_LABEL,</h3>
<h3>OBJ_BITMAP_LABEL and OBJ_TEXT)</h3>
<h3>OBJPROP_XDISTANCE</h3>
<h3>A</h3>
dist
√¢nci
a
int</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
701
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo de Propriedade</h3>
em
pixe
ls
ao
long
o do
eixo
<h3>X a</h3>
part
ir
do
cant
o de
vinc
ula√ß
√£o
(see
note
)
<h3>OBJPROP_YDISTANCE</h3>
<h3>A</h3>
dist
√¢nci
a
em
pixe
ls
ao
long
o do
eixo
<h3>Y a</h3>
part
ir
do
cant
o de
vinc
ula√ß
√£o
(see
note
)
int
<h3>OBJPROP_DIRECTION</h3>
<h3>Ten</h3>
d√™n
cia
do
<h3>ENUM_GANN_DIRECTION</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
702
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo de Propriedade</h3>
obje
to
<h3>Gan</h3>
n
<h3>OBJPROP_DEGREE</h3>
<h3>N√≠ve</h3>
l de
mar
ca√ß√£
o da
<h3>Ond</h3>
a de
<h3>Ellio</h3>
tt
<h3>ENUM_ELLIOT_WAVE_DEGREE</h3>
<h3>OBJPROP_DRAWLINES</h3>
<h3>Exib</h3>
i√ß√£o
de
linh
as
para
mar
ca√ß√£
o da
<h3>Ond</h3>
a de
<h3>Ellio</h3>
tt
bool
<h3>OBJPROP_STATE</h3>
<h3>Esta</h3>
do
do
bot√£
o
(pre
ssio
nad
o /
n√£o
pres
sion
ado)
bool
<h3>OBJPROP_CHART_ID</h3>
<h3>ID</h3>
do
obje
to
&quot;Ch
art&quot;
long   r/o</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
703
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo de Propriedade</h3>
(OB
<h3>J_C</h3>
<h3>HAR</h3>
T).
<h3>Per</h3>
mit
e
trab
alha
r
com
as
prop
ried
ade
s
dest
e
obje
to
com
o
um
gr√°f
ico
nor
mal
usa
ndo
as
fun√ß
√µes
desc
rita
s
em
<h3>Ope</h3>
ra√ß√µ
es
de
<h3>Gr√°f</h3>
ico,
mas
exis
tem
algu
mas</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
704
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo de Propriedade</h3>
exc
e√ß√µ
es.
<h3>OBJPROP_XSIZE</h3>
<h3>O</h3>
tam
anh
o do
obje
to
<h3>Cha</h3>
rt
ao
long
o do
eixo
<h3>X</h3>
(lar
gura
em
pixe
ls) √©
esp
ecifi
cad
o
para
obje
tos
<h3>OBJ</h3>
_LA
<h3>BEL</h3>
(rea
d
only
),
<h3>OBJ</h3>
_BU
<h3>TTO</h3>
<h3>N,</h3>
<h3>OBJ</h3>
_CH
<h3>ART</h3>
,
<h3>OBJ</h3>
_BIT
<h3>MAP</h3>
,
int</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
705
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo de Propriedade</h3>
<h3>OBJ</h3>
_BIT
<h3>MAP</h3>
_LA
<h3>BEL,</h3>
<h3>OBJ</h3>
_EDI
<h3>T,</h3>
<h3>OBJ</h3>
_RE
<h3>CTA</h3>
<h3>NGL</h3>
<h3>E_L</h3>
<h3>ABE</h3>
L.
<h3>OBJPROP_YSIZE</h3>
<h3>O</h3>
tam
anh
o do
obje
to
<h3>Cha</h3>
rt
ao
long
o do
eixo
<h3>X</h3>
(lar
gura
em
pixe
ls) √©
esp
ecifi
cad
o
para
obje
tos
<h3>OBJ</h3>
_LA
<h3>BEL</h3>
(rea
d
only
),
int</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
706
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo de Propriedade</h3>
<h3>OBJ</h3>
_BU
<h3>TTO</h3>
<h3>N,</h3>
<h3>OBJ</h3>
_CH
<h3>ART</h3>
,
<h3>OBJ</h3>
_BIT
<h3>MAP</h3>
,
<h3>OBJ</h3>
_BIT
<h3>MAP</h3>
_LA
<h3>BEL,</h3>
<h3>OBJ</h3>
_EDI
<h3>T,</h3>
<h3>OBJ</h3>
_RE
<h3>CTA</h3>
<h3>NGL</h3>
<h3>E_L</h3>
<h3>ABE</h3>
L.
<h3>OBJPROP_XOFFSET</h3>
<h3>A</h3>
coor
den
ada
<h3>X do</h3>
cant
o
sup
erio
r
esq
uerd
o da
√°rea
vis√≠
vel
reta
ngul
ar
nos
int</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
707
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo de Propriedade</h3>
obje
tos
gr√°f
icos
&quot;Bit
map
<h3>Lab</h3>
el&quot; e
&quot;Bit
map
&quot; (O
<h3>BJ_</h3>
<h3>BIT</h3>
<h3>MAP</h3>
_LA
<h3>BEL</h3>
e
<h3>OBJ</h3>
_BIT
<h3>MAP</h3>
). O
valo
r √©
defi
nido
em
pixe
ls
em
rela
√ß√£o
ao
cant
o
sup
erio
r
esq
uerd
o da
ima
gem
orig
inal.
<h3>OBJPROP_YOFFSET</h3>
<h3>A</h3>
coor
den
int</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
708
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo de Propriedade</h3>
ada
<h3>X do</h3>
cant
o
sup
erio
r
esq
uerd
o da
√°rea
vis√≠
vel
reta
ngul
ar
nos
obje
tos
gr√°f
icos
&quot;Bit
map
<h3>Lab</h3>
el&quot; e
&quot;Bit
map
&quot; (O
<h3>BJ_</h3>
<h3>BIT</h3>
<h3>MAP</h3>
_LA
<h3>BEL</h3>
e
<h3>OBJ</h3>
_BIT
<h3>MAP</h3>
). O
valo
r √©
defi
nido
em
pixe
ls
em
rela</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
709
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo de Propriedade</h3>
√ß√£o
ao
cant
o
sup
erio
r
esq
uerd
o da
ima
gem
orig
inal.
<h3>OBJPROP_PERIOD</h3>
<h3>Jan</h3>
ela
de
tem
po
para
o
obje
to
<h3>Cha</h3>
rt
<h3>ENUM_TIMEFRAMES</h3>
<h3>OBJPROP_DATE_SCALE</h3>
<h3>Exib</h3>
i√ß√£o
da
esca
la
de
tem
po
para
o
obje
to
<h3>Cha</h3>
rt
bool
<h3>OBJPROP_PRICE_SCALE</h3>
<h3>Exib</h3>
i√ß√£o
da
esca
la
de
bool</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
710
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo de Propriedade</h3>
pre√ß
o
para
o
obje
to
<h3>Cha</h3>
rt
<h3>OBJPROP_CHART_SCALE</h3>
<h3>A</h3>
esca
la
para
o
obje
to
<h3>Cha</h3>
rt
</p>
<pre><code class="language-mql5">
int   valor na faixa de 0‚Äì5
</code></pre>
<p>
<h3>OBJPROP_BGCOLOR</h3>
<h3>A</h3>
cor
de
fund
o
para
<h3>OBJ</h3>
_EDI
<h3>T,</h3>
<h3>OBJ</h3>
_BU
<h3>TTO</h3>
<h3>N,</h3>
<h3>OBJ</h3>
_RE
<h3>CTA</h3>
<h3>NGL</h3>
<h3>E_L</h3>
<h3>ABE</h3>
<h3>L</h3>
color
<h3>OBJPROP_CORNER</h3>
<h3>O</h3>
cant
o do
gr√°f
ico
para
link
ar
<h3>ENUM_BASE_CORNER</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
711
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo de Propriedade</h3>
um
obje
to
gr√°f
ico
<h3>OBJPROP_BORDER_TYPE</h3>
<h3>Tipo</h3>
de
bord
a
para
o
obje
to
&quot;Rec
tang
le
labe
l&quot;
<h3>ENUM_BORDER_TYPE</h3>
<h3>OBJPROP_BORDER_COLOR</h3>
<h3>Cor</h3>
de
bord
a
para
os
obje
tos
<h3>OBJ</h3>
_EDI
<h3>T e</h3>
<h3>OBJ</h3>
_BU
<h3>TTO</h3>
<h3>N</h3>
color
Ao usar opera√ß√µes de gr√°fico para o objeto &quot;Chart&quot; (OBJ_CHART), as seguintes limita√ß√µes s√£o
impostas:
¬∑ Ele n√£o pode ser fechado usando ChartClose();
¬∑ Ativo/per√≠odo n√£o podem ser alterados usando a fun√ß√£o ChartSetSymbolPeriod();
¬∑ As 
seguintes 
propriedades 
s√£o 
sem 
efeito: 
<h3>CHART_SCALE,</h3>
<h3>CHART_BRING_TO_TOP,</h3>
CHART_SHOW_DATE_SCALE e CHART_SHOW_PRICE_SCALE (ENUM_CHART_PROPERTY_INTEGER).
Para os objetos OBJ_BITMAP_LABEL e OBJ_BITMAP, um modo especial de exibi√ß√£o de imagem pode
ser definido por programa√ß√£o. Neste modo, somente parte da imagem original (na qual uma √°rea</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
712
vis√≠vel retangular √© aplicada) √© exibida, enquanto o resto da imagem fica invis√≠vel. O tamanho desta
√°rea deve ser definido usando a propriedade OBJPROP_XSIZE e OBJPROP_YSIZE. A √°rea vis√≠vel pode
ser &quot;movida&quot; somente dentro da imagem original usando as propriedades OBJPROP_XOFFSET e
OBJPROP_YOFFSET.
Para objetos de tamanho fixo: OBJ_BUTTON, OBJ_RECTANGLE_LABEL, OBJ_EDIT e OBJ_CHART
propriedades OBJPROP_XDISTANCE e OBJPROP_YDISTANCE defina a posi√ß√£o do canto superior
esquerdo do ponto do objeto em rela√ß√£o ao canto de gr√°fico (OBJPROP_CORNER), a partir das quais as
coordenadas X e Y ser√£o contadas em pixels.
<h3>Para as fun√ß√µes ObjectSetDouble() e ObjectGetDouble()</h3>
<h3>ENUM_OBJECT_PROPERTY_DOUBLE</h3>
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo de Propriedade</h3>
<h3>OBJPROP_PRICE</h3>
<h3>Coo</h3>
rden
ada
de
<h3>Pre√ß</h3>
o
</p>
<pre><code class="language-mql5">
double    modificador=n√∫mero do ponto de ancoragem
</code></pre>
<p>
<h3>OBJPROP_LEVELVALUE</h3>
<h3>Valo</h3>
r de
n√≠ve
l
</p>
<pre><code class="language-mql5">
double    modificador=n√∫mero de n√≠vel
</code></pre>
<p>
<h3>OBJPROP_SCALE</h3>
<h3>Esca</h3>
la
(pro
prie
dad
es
de
obje
tos
<h3>Gan</h3>
n e
<h3>Arco</h3>
s de
<h3>Fibo</h3>
nna
cci)
double
<h3>OBJPROP_ANGLE</h3>
<h3>√Çng</h3>
ulo.
double</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
713
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo de Propriedade</h3>
<h3>Para</h3>
os
obje
tos
sem
√¢ng
ulo
esp
ecifi
cad
o,
cria
do a
part
ir
de
um
prog
ram
a, o
valo
r √©
igua
l 
a
<h3>EMP</h3>
<h3>TY_</h3>
<h3>VAL</h3>
<h3>UE</h3>
<h3>OBJPROP_DEVIATION</h3>
<h3>Des</h3>
vio
para
o
<h3>Can</h3>
al
de
<h3>Des</h3>
vio
<h3>Padr</h3>
√£o
double
<h3>Para as fun√ß√µes ObjectSetString() e ObjectGetString()</h3>
<h3>ENUM_OBJECT_PROPERTY_STRING</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
714
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo de Propriedade</h3>
<h3>OBJPROP_NAME</h3>
<h3>Nom</h3>
e de
obje
to
string
<h3>OBJPROP_TEXT</h3>
<h3>Des</h3>
cri√ß
√£o
do
obje
to
(o
text
o
cont
ido
no
obje
to)
string
<h3>OBJPROP_TOOLTIP</h3>
<h3>O</h3>
text
o de
um
&quot;too
ltip&quot;
(dic
a).
<h3>Se a</h3>
prop
ried
ade
n√£o
√©
defi
nida
,
ent√£
o o
&quot;too
ltip&quot;
gera
do
auto
mat
ica
men
te
string</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
715
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo de Propriedade</h3>
pelo
ter
min
al √©
exib
ido.
<h3>Um</h3>
&quot;too
ltip&quot;
pod
e
ser
des
abili
tado
atra
v√©s
da
atri
bui√ß
√£o
do
valo
r
&quot;\n&quot;
(que
bra
de
linh
a) a
ele
<h3>OBJPROP_LEVELTEXT</h3>
<h3>N√≠ve</h3>
l de
desc
ri√ß√£
o
</p>
<pre><code class="language-mql5">
string    modificador=n√∫mero de n√≠vel
</code></pre>
<p>
<h3>OBJPROP_FONT</h3>
<h3>Font</h3>
string
<h3>OBJPROP_BMPFILE</h3>
<h3>O</h3>
nom
e do
arqu
ivo
<h3>BMP</h3>
para
r√≥tu
</p>
<pre><code class="language-mql5">
string    modificador: 0-estado Ligado, 1-estado
</code></pre>
<p>
<h3>Desligado</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
716
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo de Propriedade</h3>
lo
<h3>Bit</h3>
map
.
<h3>Veja</h3>
tam
b√©m
<h3>Rec</h3>
urso
s
<h3>OBJPROP_SYMBOL</h3>
<h3>Ativ</h3>
o
para
o
obje
to
<h3>Cha</h3>
rt
string
Para o objeto OBJ_RECTANGLE_LABEL (&quot;R√≥tulo de Ret√¢ngulo&quot;) um dentre os tr√™s modos de design
podem ser definidos, correspondendo aos valores de ENUM_BORDER_TYPE.
<h3>ENUM_BORDER_TYPE</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>BORDER_FLAT</h3>
<h3>Forma lisa</h3>
<h3>BORDER_RAISED</h3>
<h3>Forma em relevo</h3>
<h3>BORDER_SUNKEN</h3>
<h3>Forma cavada</h3>
Para o objeto OBJ_EDIT (&quot;Edit&quot;) e para a fun√ß√£o ChartScreenShot(), pode-se especificar o tipo de
alinhamento horizontal usando os valores da enumera√ß√£o ENUM_ALIGN_MODE.
<h3>ENUM_ALIGN_MODE</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>ALIGN_LEFT</h3>
<h3>Alinhamento a esquerda</h3>
<h3>ALIGN_CENTER</h3>
<h3>Centrado (somente para o objeto Edit)</h3>
<h3>ALIGN_RIGHT</h3>
<h3>Alinhamento a direita</h3>
<h3>Exemplo:</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
717
</p>
<pre><code class="language-mql5">
#define  UP          &quot;\x0431&quot;
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//---
   string label_name=&quot;my_OBJ_LABEL_object&quot;;
   if(ObjectFind(0,label_name)&lt;0)
     {
      Print(&quot;Objeto &quot;,label_name,&quot; n√£o encontrado. C√≥digo de erro = &quot;,GetLastError());
      //--- cria objeto R√≥tulo
      ObjectCreate(0,label_name,OBJ_LABEL,0,0,0);           
      //--- define coordenada X
      ObjectSetInteger(0,label_name,OBJPROP_XDISTANCE,200);
      //--- define coordenada Y
      ObjectSetInteger(0,label_name,OBJPROP_YDISTANCE,300);
      //--- define cor de texto
      ObjectSetInteger(0,label_name,OBJPROP_COLOR,clrWhite);
      //--- define texto para objeto R√≥tulo
      ObjectSetString(0,label_name,OBJPROP_TEXT,UP);
      //--- define fonte
      ObjectSetString(0,label_name,OBJPROP_FONT,&quot;Wingdings&quot;);
      //--- define tamanho de fonte
      ObjectSetInteger(0,label_name,OBJPROP_FONTSIZE,10);
      //--- rota√ß√£o de 45 graus em sentido hor√°rio
      ObjectSetDouble(0,label_name,OBJPROP_ANGLE,-45);
      //--- desabilita sele√ß√£o de mouse
      ObjectSetInteger(0,label_name,OBJPROP_SELECTABLE,false);
      //--- desenha o objeto no gr√°fico
      ChartRedraw(0);                                      
     }
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
718
<h3>M√©todos de Vincula√ß√£o de Objeto</h3>
Os objetos de gr√°ficos Text, Label, Bitmap e Bitmap Label (OBJ_TEXT, OBJ_LABEL, OBJ_BITMAP e
OBJ_BITMAP_LABEL) podem ter uma de 9 maneiras diferentes de vincular suas coordenadas, as quais
foram especificadas pela propriedade OBJPROP_ANCHOR.
<h3>Objeto</h3>
<h3>Identific</h3>
ador
<h3>X/Y</h3>
<h3>Largura/A</h3>
ltura
<h3>Data/Pre√ß</h3>
o
<h3>OBJPROP</h3>
_CORNER
<h3>OBJPROP</h3>
_ANCHOR
<h3>OBJPROP</h3>
_ANGLE
<h3>Texto</h3>
<h3>OBJ_TEX</h3>
<h3>T</h3>
‚Äî
‚Äî
<h3>Sim</h3>
‚Äî
<h3>Sim</h3>
<h3>Sim</h3>
etiqueta
<h3>OBJ_LAB</h3>
<h3>EL</h3>
<h3>Sim</h3>
<h3>Sim</h3>
(apenas
leitura)
‚Äî
<h3>Sim</h3>
<h3>Sim</h3>
<h3>Sim</h3>
<h3>Bot√£o</h3>
<h3>OBJ_BUT</h3>
<h3>TON</h3>
<h3>Sim</h3>
<h3>Sim</h3>
‚Äî
<h3>Sim</h3>
‚Äî
‚Äî
<h3>Bitmap</h3>
<h3>OBJ_BIT</h3>
<h3>MAP</h3>
‚Äî
<h3>Sim</h3>
(apenas
leitura)
<h3>Sim</h3>
‚Äî
<h3>Sim</h3>
‚Äî
<h3>Bitmap</h3>
<h3>Label</h3>
<h3>OBJ_BIT</h3>
<h3>MAP_LAB</h3>
<h3>EL</h3>
<h3>Sim</h3>
<h3>Sim</h3>
(apenas
leitura)
‚Äî
<h3>Sim</h3>
<h3>Sim</h3>
‚Äî
<h3>Edit</h3>
<h3>OBJ_EDIT</h3>
<h3>Sim</h3>
<h3>Sim</h3>
‚Äî
<h3>Sim</h3>
‚Äî
‚Äî
etiqueta
retangula
r
<h3>OBJ_REC</h3>
<h3>TANGLE_</h3>
<h3>LABEL</h3>
<h3>Sim</h3>
<h3>Sim</h3>
‚Äî
<h3>Sim</h3>
‚Äî
‚Äî
Na tabela s√£o utilizadas as seguintes denomina√ß√µes:
¬∑ X/Y ‚Äì as coordenadas do ponto √¢ncora s√£o especificadas em pixels em rela√ß√£o a um dos cantos do
gr√°fico;
¬∑ Width/Height ‚Äì os objetos t√™m largura e altura. Se voc√™ definir &quot;apenas leitura&quot;, isso significa que
os valores para largura e altura s√£o calculados somente ap√≥s o processamento do objeto no gr√°fico;
¬∑ Date/Price ‚Äì as coordenadas do ponto √¢ncora s√£o definidas pelo par data/pre√ßo;
¬∑ OBJPROP_CORNER ‚Äì define o √¢ngulo do gr√°fico, que especifica as coordenadas do ponto de √¢ncora.
Pode ser um dos 4 valores de enumera√ß√£o ENUM_BASE_CORNER;
¬∑ OBJPROP_ANCHOR ‚Äì define a posi√ß√£o do ponto de √¢ncora no objeto, e pode ser um dos 9 valores de
enumera√ß√£o ENUM_ANCHOR_POINT. Precisamente a partir desse ponto at√© ao canto selecionado s√£o
expecificadas as cordenadas em pixels;
¬∑ OBJPROP_ANGLE ‚Äì define o √¢ngulo de rota√ß√£o do objeto no sentido anti-hor√°rio.
A variante necess√°ria pode ser especificada usando a fun√ß√£o ObjectSetInteger(chart_handle,
object_name, OBJPROP_ANCHOR, anchor_point_mode), onde anchor_point_mode √© um dos valores de
ENUM_ANCHOR_POINT.
<h3>ENUM_ANCHOR_POINT</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
719
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>ANCHOR_LEFT_UPPER</h3>
Ponto de ancoragem no canto superior esquerdo
<h3>ANCHOR_LEFT</h3>
Ponto de ancoragem para a esquerda no centro
<h3>ANCHOR_LEFT_LOWER</h3>
Ponto de ancoragem no canto inferior esquerdo
<h3>ANCHOR_LOWER</h3>
<h3>Ponto de ancoragem abaixo no centro</h3>
<h3>ANCHOR_RIGHT_LOWER</h3>
Ponto de ancoragem no canto inferior direito
<h3>ANCHOR_RIGHT</h3>
Ponto de ancoragem para a direita no centro
<h3>ANCHOR_RIGHT_UPPER</h3>
Ponto de ancoragem no canto superior direito
<h3>ANCHOR_UPPER</h3>
<h3>Ponto de ancoragem acima no centro</h3>
<h3>ANCHOR_CENTER</h3>
<h3>Ponto de ancoragem rigorosamente no centro</h3>
do objeto
Os objetos OBJ_BUTTON, OBJ_RECTANGLE_LABEL, OBJ_EDIT e OBJ_CHART possuem um ponto de
ancoragem fixo no canto superior esquerdo (ANCHOR_LEFT_UPPER).
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
   string text_name=&quot;my_OBJ_TEXT_object&quot;;
   if(ObjectFind(0,text_name)&lt;0)
     {
      Print(&quot;Objeto &quot;,text_name,&quot; n√£o encontrado. C√≥digo de erro = &quot;,GetLastError());
      //--- Obt√©m o pre√ßo m√°ximo do gr√°fico
      double chart_max_price=ChartGetDouble(0,CHART_PRICE_MAX,0);
      //--- Cria o objeto Label (R√≥tulo)
      ObjectCreate(0,text_name,OBJ_TEXT,0,TimeCurrent(),chart_max_price);
      //--- Define cor do texto
      ObjectSetInteger(0,text_name,OBJPROP_COLOR,clrWhite);
      //--- Define cor de fundo
      ObjectSetInteger(0,text_name,OBJPROP_BGCOLOR,clrGreen);
      //--- Define texto para o objeto Label (R√≥tulo)
      ObjectSetString(0,text_name,OBJPROP_TEXT,TimeToString(TimeCurrent()));
      //--- Define fonte de texto
      ObjectSetString(0,text_name,OBJPROP_FONT,&quot;Trebuchet MS&quot;);
      //--- Define tamanho de fonte
      ObjectSetInteger(0,text_name,OBJPROP_FONTSIZE,10);
      //--- Vincula no canto superior direito
      ObjectSetInteger(0,text_name,OBJPROP_ANCHOR,ANCHOR_RIGHT_UPPER);
      //--- Gira 90 graus em sentido anti-hor√°rio
      ObjectSetDouble(0,text_name,OBJPROP_ANGLE,90);
      //--- Pro√≠be a sele√ß√£o do objeto pelo mouse
      ObjectSetInteger(0,text_name,OBJPROP_SELECTABLE,false);
      //--- redesenha objeto
      ChartRedraw(0);
     }</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
720
Objetos gr√°ficos de Seta (OBJ_ARROW) t√™m somente 2 formas de linkar suas coordenadas. Os
identificadores est√£o listados em ENUM_ARROW_ANCHOR.
<h3>ENUM_ARROW_ANCHOR</h3>
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>ANCHOR_TOP</h3>
<h3>Ancoragem no lado de cima</h3>
<h3>ANCHOR_BOTTOM</h3>
<h3>Ancoragem no lado de baixo</h3>
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
void OnStart()
  {
//--- Arrays auxiliares
   double Ups[],Downs[];
   datetime Time[];
//--- Define os arrays como s√©ries de tempo
   ArraySetAsSeries(Ups,true);
   ArraySetAsSeries(Downs,true);
   ArraySetAsSeries(Time,true);
//--- Cria handle do Indicador Fractais
   int FractalsHandle=iFractals(NULL,0);
   Print(&quot;FractalsHandle = &quot;,FractalsHandle);
//--- Define valor do √∫ltimo erro para Zero
   ResetLastError();
//--- Tenta copiar os valores do indicador
   int copied=CopyBuffer(FractalsHandle,0,0,1000,Ups);
   if(copied&lt;=0)
     {
      Print(&quot;N√£o √© poss√≠vel copiar os fractais de alta. Erro = &quot;,GetLastError());
      return;
     }
   ResetLastError();
//--- Tenta copiar os valores do indicador
   copied=CopyBuffer(FractalsHandle,1,0,1000,Downs);
   if(copied&lt;=0)
     {
      Print(&quot;N√£o √© poss√≠vel copiar os fractais de baixa. Erro = &quot;,GetLastError());
      return;
     }
   ResetLastError();
//--- Copia a s√©rie de tempo contendo as barras de abertura das √∫ltimas 1000 barras
   copied=CopyTime(NULL,0,0,1000,Time);
   if(copied&lt;=0)
     {
      Print(&quot;N√£o √© poss√≠vel copiar o tempo de abertura das √∫ltimas 1000 barras&quot;);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
721
</p>
<pre><code class="language-mql5">
      return;
     }
   int upcounter=0,downcounter=0; // conta o n√∫mero de setas
   bool created;// recebe o resultado das tentativas de criar um objeto
   for(int i=2;i&lt;copied;i++)// Passa pelos valores do indicador iFractals
     {
      if(Ups[i]!=EMPTY_VALUE)// Encontrado o fractal de cima
        {
         if(upcounter&lt;10)// N√£o cria mais que 10 setas &quot;Up&quot;
           {
            //--- Tenta criar um objeto &quot;Up&quot;
            created=ObjectCreate(0,string(Time[i]),OBJ_ARROW_THUMB_UP,0,Time[i],Ups[i]
            if(created)// Se constru√≠do - vamos fazer ajuste nele
              {
               //--- Ponto de ancoragem √© em baixo, a fim de n√£o cobrir a barra
               ObjectSetInteger(0,string(Time[i]),OBJPROP_ANCHOR,ANCHOR_BOTTOM);
               //--- Toque final - colorido
               ObjectSetInteger(0,string(Time[i]),OBJPROP_COLOR,clrBlue);
               upcounter++;
              }
           }
        }
      if(Downs[i]!=EMPTY_VALUE)// Encontrado o menor fractal
        {
         if(downcounter&lt;10)// N√£o cria mais que 10 setas &quot;Down&quot;
           {
            //--- Tenta criar um objeto &quot;Down&quot;
            created=ObjectCreate(0,string(Time[i]),OBJ_ARROW_THUMB_DOWN,0,Time[i],Down
            if(created)// Se constru√≠do - vamos fazer ajuste nele
              {
               //--- Ponto de ancoragem √© em acima, a fim de n√£o cobrir a barra
               ObjectSetInteger(0,string(Time[i]),OBJPROP_ANCHOR,ANCHOR_TOP);
               //--- Toque final - colorido
               ObjectSetInteger(0,string(Time[i]),OBJPROP_COLOR,clrRed);
               downcounter++;
              }
           }
        }
     }
</code></pre>
<p>
  }
Ap√≥s a execu√ß√£o do script o gr√°fico se parecer√° com esta figura.</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
722</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
723
O Canto do Gr√°fico no Qual um Objeto Fica Ligado
Existe uma s√©rie de objetos gr√°ficos, para os quais voc√™ pode definir o √¢ngulo, que especifica as
coordenadas do ponto de √¢ncora. Esses s√£o os seguintes tipos de objetos (os identificadores de tipo
de objeto est√£o entre par√™nteses):
¬∑ Label (OBJ_LABEL); R√≥tulo do texto
¬∑ Button (OBJ_BUTTON); Bot√£o
¬∑ Bitmap Label (OBJ_BITMAP_LABEL); R√≥tulo do gr√°fico
¬∑ Edit (OBJ_EDIT); Campo de entrada
¬∑ Rectangle Label (OBJ_RECTANGLE_LABEL). R√≥tulo retangular
<h3>Objeto</h3>
<h3>Identific</h3>
ador
<h3>X/Y</h3>
<h3>Width/He</h3>
ight
<h3>Date/Pric</h3>
e
<h3>OBJPROP</h3>
_CORNER
<h3>OBJPROP</h3>
_ANCHOR
<h3>OBJPROP</h3>
_ANGLE
<h3>Text</h3>
<h3>OBJ_TEX</h3>
<h3>T</h3>
‚Äî
‚Äî
<h3>Sim</h3>
‚Äî
<h3>Sim</h3>
<h3>Sim</h3>
<h3>Label</h3>
<h3>OBJ_LAB</h3>
<h3>EL</h3>
<h3>Sim</h3>
<h3>Sim</h3>
(apenas
leitura)
‚Äî
<h3>Sim</h3>
<h3>Sim</h3>
<h3>Sim</h3>
<h3>Button</h3>
<h3>OBJ_BUT</h3>
<h3>TON</h3>
<h3>Sim</h3>
<h3>Sim</h3>
‚Äî
<h3>Sim</h3>
‚Äî
‚Äî
<h3>Bitmap</h3>
<h3>OBJ_BIT</h3>
<h3>MAP</h3>
‚Äî
<h3>Sim</h3>
(apenas
leitura)
<h3>Sim</h3>
‚Äî
<h3>Sim</h3>
‚Äî
<h3>Bitmap</h3>
<h3>Label</h3>
<h3>OBJ_BIT</h3>
<h3>MAP_LAB</h3>
<h3>EL</h3>
<h3>Sim</h3>
<h3>Sim</h3>
(apenas
leitura)
‚Äî
<h3>Sim</h3>
<h3>Sim</h3>
‚Äî
<h3>Edit</h3>
<h3>OBJ_EDIT</h3>
<h3>Sim</h3>
<h3>Sim</h3>
‚Äî
<h3>Sim</h3>
‚Äî
‚Äî
<h3>Rectangl</h3>
e Label
<h3>OBJ_REC</h3>
<h3>TANGLE_</h3>
<h3>LABEL</h3>
<h3>Sim</h3>
<h3>Sim</h3>
‚Äî
<h3>Sim</h3>
‚Äî
‚Äî
Na tabela s√£o utilizadas as seguintes denomina√ß√µes:
¬∑ X/Y ‚Äì as coordenadas do ponto √¢ncora s√£o especificadas em pixels em rela√ß√£o a um dos cantos do
gr√°fico;
¬∑ Width/Height ‚Äì os objetos t√™m largura e altura. Se voc√™ definir &quot;apenas leitura&quot;, isso significa que
os valores para largura e altura s√£o calculados somente ap√≥s o processamento do objeto no gr√°fico;
¬∑ Date/Price ‚Äì as coordenadas do ponto √¢ncora s√£o definidas pelo par data/pre√ßo;
¬∑ OBJPROP_CORNER ‚Äì define o √¢ngulo do gr√°fico, que especifica as coordenadas do ponto de √¢ncora.
Pode ser um dos 4 valores de enumera√ß√£o ENUM_BASE_CORNER;
¬∑ OBJPROP_ANCHOR ‚Äì define a posi√ß√£o do ponto de √¢ncora no objeto, e pode ser um dos 9 valores de
enumera√ß√£o ENUM_ANCHOR_POINT. Precisamente a partir desse ponto at√© ao canto selecionado s√£o
expecificadas as cordenadas em pixels;</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
724
¬∑ OBJPROP_ANGLE ‚Äì define o √¢ngulo de rota√ß√£o do objeto no sentido anti-hor√°rio.
A fim de especificar o canto do gr√°fico, a partir do qual as coordenadas X e Y ser√£o medidas em
pixels, use ObjectSetInteger(chartID, name, OBJPROP_CORNER, chart_corner), onde:
¬∑ chartID - identificador do gr√°fico;
¬∑ name ‚Äì nome de um objeto gr√°fico;
¬∑ OBJPROP_CORNER ‚Äì propriedade ID para especificar o canto para vincula√ß√£o;
¬∑ chart_corner ‚Äì o canto desejado do gr√°fico, pode ser um dos valores da enumera√ß√£o
ENUM_BASE_CORNER.
<h3>ENUM_BASE_CORNER</h3>
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>CORNER_LEFT_UPPER</h3>
Centro de coordenadas est√° no canto superior
esquerdo do gr√°fico
<h3>CORNER_LEFT_LOWER</h3>
Centro de coordenadas est√° no canto inferior
esquerdo do gr√°fico
<h3>CORNER_RIGHT_LOWER</h3>
Centro de coordenadas est√° no canto inferior
direito do gr√°fico
<h3>CORNER_RIGHT_UPPER</h3>
Centro de coordenadas est√° no canto superior
direito do gr√°fico
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
void CreateLabel(long   chart_id,
                 string name,
                 int    chart_corner,
                 int    anchor_point,
                 string text_label,
                 int    x_ord,
                 int    y_ord)
  {
//---
   if(ObjectCreate(chart_id,name,OBJ_LABEL,0,0,0))
     {
      ObjectSetInteger(chart_id,name,OBJPROP_CORNER,chart_corner);
      ObjectSetInteger(chart_id,name,OBJPROP_ANCHOR,anchor_point);
      ObjectSetInteger(chart_id,name,OBJPROP_XDISTANCE,x_ord);
      ObjectSetInteger(chart_id,name,OBJPROP_YDISTANCE,y_ord);
      ObjectSetString(chart_id,name,OBJPROP_TEXT,text_label);
     }
   else
      Print(&quot;–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –æ–±—ä–µ–∫—Ç OBJ_LABEL &quot;,name,&quot;, –ö–æ–¥ –æ—à–∏–±–∫–∏ = &quot;, GetLastErro
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Script program start function                                    |
//+------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
725
</p>
<pre><code class="language-mql5">
void OnStart()
  {
//---
   int height=(int)ChartGetInteger(0,CHART_HEIGHT_IN_PIXELS,0);
   int width=(int)ChartGetInteger(0,CHART_WIDTH_IN_PIXELS,0);
   string arrows[4]={&quot;LEFT_UPPER&quot;,&quot;RIGHT_UPPER&quot;,&quot;RIGHT_LOWER&quot;,&quot;LEFT_LOWER&quot;};
   CreateLabel(0,arrows[0],CORNER_LEFT_UPPER,ANCHOR_LEFT_UPPER,arrows[0],50,50);
   CreateLabel(0,arrows[1],CORNER_RIGHT_UPPER,ANCHOR_RIGHT_UPPER,arrows[1],50,50);
   CreateLabel(0,arrows[2],CORNER_RIGHT_LOWER,ANCHOR_RIGHT_LOWER,arrows[2],50,50);
   CreateLabel(0,arrows[3],CORNER_LEFT_LOWER,ANCHOR_LEFT_LOWER,arrows[3],50,50);
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
726
<h3>Visibilidade de Objetos</h3>
A combina√ß√£o de flags de visibilidade de objeto determina as janelas de tempo de gr√°fico, onde o
objeto √© vis√≠vel. Para definir/obter o valor da propriedade OBJPROP_TIMEFRAMES, voc√™ pode usar as
fun√ß√µes ObjectSetInteger()/ObjectGetInteger().
<h3>ID</h3>
<h3>Valor</h3>
<h3>Descri√ß√£o</h3>
<h3>OBJ_NO_PERIODS</h3>
0
<h3>O objeto n√£o desenhado em</h3>
nenhuma janela de tempo
<h3>OBJ_PERIOD_M1</h3>
0x00000001
<h3>O objeto √© desenhado em</h3>
gr√°ficos de 1 minuto
<h3>OBJ_PERIOD_M2</h3>
0x00000002
<h3>O objeto √© desenhado em</h3>
gr√°ficos de 2 minutos
<h3>OBJ_PERIOD_M3</h3>
0x00000004
<h3>O objeto √© desenhado em</h3>
gr√°ficos de 3 minutos
<h3>OBJ_PERIOD_M4</h3>
0x00000008
<h3>O objeto √© desenhado em</h3>
gr√°ficos de 4 minutos
<h3>OBJ_PERIOD_M5</h3>
0x00000010
<h3>O objeto √© desenhado em</h3>
gr√°ficos de 5 minutos
<h3>OBJ_PERIOD_M6</h3>
0x00000020
<h3>O objeto √© desenhado em</h3>
gr√°ficos de 6 minutos
<h3>OBJ_PERIOD_M10</h3>
0x00000040
<h3>O objeto √© desenhado em</h3>
gr√°ficos de 10 minutos
<h3>OBJ_PERIOD_M12</h3>
0x00000080
<h3>O objeto √© desenhado em</h3>
gr√°ficos de 12 minutos
<h3>OBJ_PERIOD_M15</h3>
0x00000100
<h3>O objeto √© desenhado em</h3>
gr√°ficos de 15 minutos
<h3>OBJ_PERIOD_M20</h3>
0x00000200
<h3>O objeto √© desenhado em</h3>
gr√°ficos de 20 minutos
<h3>OBJ_PERIOD_M30</h3>
0x00000400
<h3>O objeto √© desenhado em</h3>
gr√°ficos de 30 minutos
<h3>OBJ_PERIOD_H1</h3>
0x00000800
<h3>O objeto √© desenhado em</h3>
gr√°ficos de 1 hora
<h3>OBJ_PERIOD_H2</h3>
0x00001000
<h3>O objeto √© desenhado em</h3>
gr√°ficos de 2 horas
<h3>OBJ_PERIOD_H3</h3>
0x00002000
<h3>O objeto √© desenhado em</h3>
gr√°ficos de 3 horas
<h3>OBJ_PERIOD_H4</h3>
0x00004000
<h3>O objeto √© desenhado em</h3>
gr√°ficos de 4 horas</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
727
<h3>ID</h3>
<h3>Valor</h3>
<h3>Descri√ß√£o</h3>
<h3>OBJ_PERIOD_H6</h3>
0x00008000
<h3>O objeto √© desenhado em</h3>
gr√°ficos de 6 horas
<h3>OBJ_PERIOD_H8</h3>
0x00010000
<h3>O objeto √© desenhado em</h3>
gr√°ficos de 8 horas
<h3>OBJ_PERIOD_H12</h3>
0x00020000
<h3>O objeto √© desenhado em</h3>
gr√°ficos de 12 horas
<h3>OBJ_PERIOD_D1</h3>
0x00040000
<h3>O objeto √© desenhado em</h3>
gr√°ficos di√°rios
<h3>OBJ_PERIOD_W1</h3>
0x00080000
<h3>O objeto √© desenhado em</h3>
gr√°ficos semanais
<h3>OBJ_PERIOD_MN1</h3>
0x00100000
<h3>O objeto √© desenhado em</h3>
gr√°ficos mensais
<h3>OBJ_ALL_PERIODS</h3>
0x001fffff
<h3>O objeto √© desenhado em</h3>
todas das janelas de tempo
Os flags de visibilidade podem ser combinados usando o s√≠mbolo &quot;|&quot;, por exemplo, a combina√ß√£o de
flags OBJ_PERIOD_M10|OBJ_PERIOD_H4 significa que o objeto ser√° vis√≠vel nas janelas de tempo de
10-minutos e 4-horas.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
void OnStart()
  {
//---
   string highlevel=&quot;PreviousDayHigh&quot;;
   string lowlevel=&quot;PreviousDayLow&quot;;
   double prevHigh;           // O M√°xima do dia anterior
   double prevLow;            // O M√≠nimo do dia anterior
   double highs[],lows[];     // Arrays de M√°ximo e M√≠nimo
//--- redefine o c√≥digo de erro
   ResetLastError();
//--- Obt√©m os 2 √∫ltimos valores de M√°ximo na janela de tempo di√°ria
   int highsgot=CopyHigh(Symbol(),PERIOD_D1,0,2,highs);
   if(highsgot&gt;0) // Se c√≥pia foi bem sucedida
     {
      Print(&quot;Os pre√ßos em alta dos √∫ltimos dois dias foram obtidos com sucesso&quot;);
      prevHigh=highs[0]; // O M√°ximo do dia anterior
      Print(&quot;prevHigh = &quot;,prevHigh);
      if(ObjectFind(0,highlevel)&lt;0) // Objeto com o mesmo highlevel n√£o encontrado
        {
         ObjectCreate(0,highlevel,OBJ_HLINE,0,0,0); // Cria o objeto de linha Horizont
        }
      //--- Define valor para n√≠vel de pre√ßo para a linha highlevel
      ObjectSetDouble(0,highlevel,OBJPROP_PRICE,0,prevHigh);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
728
</p>
<pre><code class="language-mql5">
      //--- Define a visibilidade apenas para PERIOD_M10 e PERIOD_H4
      ObjectSetInteger(0,highlevel,OBJPROP_TIMEFRAMES,OBJ_PERIOD_M10|OBJ_PERIOD_H4);
     }
   else
     {
      Print(&quot;N√£o foi poss√≠vel obter pre√ßos em lata nos √∫ltimos dois dias, Erro = &quot;,Get
     }
//--- redefine o c√≥digo de erro
   ResetLastError();
//--- Obt√©m os 2 √∫ltimos valores de M√≠nimo na janela de tempo di√°ria
   int lowsgot=CopyLow(Symbol(),PERIOD_D1,0,2,lows);
   if(lowsgot&gt;0) // Se c√≥pia foi bem sucedida
     {
      Print(&quot;Os pre√ßos em baixa dos √∫ltimos dois dias foram obtidos com sucesso&quot;);
      prevLow=lows[0]; // O M√≠nimo do dia anterior
      Print(&quot;prevLow = &quot;,prevLow);
      if(ObjectFind(0,lowlevel)&lt;0) // Objeto com o mesmo lowlevel n√£o encontrado
        {
         ObjectCreate(0,lowlevel,OBJ_HLINE,0,0,0); // Cria o objeto linha Horizontal
        }
      //--- Define valor para o n√≠vel de pre√ßo para a linha lowlevel
      ObjectSetDouble(0,lowlevel,OBJPROP_PRICE,0,prevLow);
      //--- Define a visibilidade apenas para PERIOD_M10 e PERIOD_H4
      ObjectSetInteger(0,lowlevel,OBJPROP_TIMEFRAMES,OBJ_PERIOD_M10|OBJ_PERIOD_H4);
     }
   else Print(&quot;N√£o foi poss√≠vel obter pre√ßos em baixa nos √∫ltimos dois dias, Erro = &quot;,
   ChartRedraw(0); // redesenha o gr√°fico de forma for√ßada
</code></pre>
<p>
  }
<h3>Tamb√©m Veja</h3>
PeriodSeconds, Period, Janela de Tempo de Gr√°fico, Data e Hora</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
729
<h3>N√≠veis de Onda de Elliott</h3>
Ondas de Elliott s√£o representadas por dois objetos gr√°ficos do tipo OBJ_ELLIOTWAVE5 e
OBJ_ELLIOTWAVE3. Para definir o tamanho da onda (m√©todo de rotula√ß√£o de onda), a propriedade
OBJPROP_DEGREE √© usada, para a qual os valores da enumera√ß√£o ENUM_ELLIOT_WAVE_DEGREE
podem ser atribu√≠dos.
<h3>ENUM_ELLIOT_WAVE_DEGREE</h3>
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>ELLIOTT_GRAND_SUPERCYCLE</h3>
<h3>Grande Super-ciclo</h3>
<h3>ELLIOTT_SUPERCYCLE</h3>
<h3>Super-ciclo</h3>
<h3>ELLIOTT_CYCLE</h3>
<h3>Ciclo</h3>
<h3>ELLIOTT_PRIMARY</h3>
<h3>Prim√°rio</h3>
<h3>ELLIOTT_INTERMEDIATE</h3>
<h3>Intermedi√°rio</h3>
<h3>ELLIOTT_MINOR</h3>
<h3>Menor</h3>
<h3>ELLIOTT_MINUTE</h3>
<h3>Minuto</h3>
<h3>ELLIOTT_MINUETTE</h3>
<h3>Minuette</h3>
<h3>ELLIOTT_SUBMINUETTE</h3>
<h3>Subminuette</h3>
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
   for(int i=0;i&lt;ObjectsTotal(0);i++)
     {
      string currobj=ObjectName(0,i);
      if((ObjectGetInteger(0,currobj,OBJPROP_TYPE)==OBJ_ELLIOTWAVE3) || 
         ((ObjectGetInteger(0,currobj,OBJPROP_TYPE)==OBJ_ELLIOTWAVE5)))
        {
         //--- define o n√≠vel de marca√ß√£o para INTERMEDI√ÅRIO
         ObjectSetInteger(0,currobj,OBJPROP_DEGREE,ELLIOTT_INTERMEDIATE);
         //--- exibe linhas entre topos de ondas
         ObjectSetInteger(0,currobj,OBJPROP_DRAWLINES,true);
         //--- define cor de linha
         ObjectSetInteger(0,currobj,OBJPROP_COLOR,clrBlue);
         //--- define largura de linha
         ObjectSetInteger(0,currobj,OBJPROP_WIDTH,5);
         //--- define descri√ß√£o
         ObjectSetString(0,currobj,OBJPROP_TEXT,&quot;test script&quot;);
        }
     }</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
730
<h3>Objetos Gann</h3>
Para objetos Gann Fan (OBJ_GANNFAN) e Gann Grade (OBJ_GANNGRID) voc√™ pode especificar dois
valores da enumera√ß√£o ENUM_GANN_DIRECTION que definem a dire√ß√£o da tend√™ncia.
<h3>ENUM_GANN_DIRECTION</h3>
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>GANN_UP_TREND</h3>
<h3>Linha correspondente √† tend√™ncia de alta</h3>
<h3>GANN_DOWN_TREND</h3>
<h3>Linha correspondente √† tend√™ncia de baixa</h3>
Para definir a escala da linha principal como 1x1, use a fun√ß√£o ObjectSetDouble(chart_handle,
gann_object_name, OBJPROP_SCALE, scale), onde:
¬∑ chart_handle ‚Äì janela do gr√°fico onde o objeto est√° localizado;
¬∑ gann_object_name ‚Äì nome do objeto;
¬∑ OBJPROP_SCALE ‚Äì identificador da propriedade &quot;Escala&quot;;
¬∑ scale ‚Äì escala requerida em unidades de Pips/Barra.
Exemplo de cria√ß√£o de um Ventilador Gann:
</p>
<pre><code class="language-mql5">
void OnStart()
  {
//---
   string my_gann=&quot;OBJ_GANNFAN object&quot;;
   if(ObjectFind(0,my_gann)&lt;0)// Objeto n√£o encontrado
     {
      //--- Informe sobre a falha
      Print(&quot;Objeto &quot;,my_gann,&quot; n√£o encontrado. C√≥digo de erro = &quot;,GetLastError());
      //--- Obt√©m o pre√ßo m√°ximo do gr√°fico
      double chart_max_price=ChartGetDouble(0,CHART_PRICE_MAX,0);
      //--- Obt√©m o pre√ßo m√≠nimo do gr√°fico
      double chart_min_price=ChartGetDouble(0,CHART_PRICE_MIN,0);
      //--- Quantas barras est√£o exibidas no gr√°fico</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
731
</p>
<pre><code class="language-mql5">
      int bars_on_chart=ChartGetInteger(0,CHART_VISIBLE_BARS);
      //--- Cria um array, para escrever nele a hora de abertura de cada barra
      datetime Time[];
      //--- Arruma acesso ao array como o de s√©rie de tempo
      ArraySetAsSeries(Time,true);
      //--- Agora copia dados de barras vis√≠veis no gr√°fico para dentro deste array
      int times=CopyTime(NULL,0,0,bars_on_chart,Time);
      if(times&lt;=0)
        {
         Print(&quot;N√£o foi poss√≠vel copiar o array com o tempo aberto!&quot;);
         return;
        }
      //--- Prepara√ß√µes preliminares conclu√≠das
      //--- √çndice da barra central no gr√°fico
      int center_bar=bars_on_chart/2;
      //--- Equador do gr√°fico - entre o m√°ximo e m√≠nimo
      double mean=(chart_max_price+chart_min_price)/2.0;
      //--- Define as coordenadas do primeiro ponto de ancoragem para o centro
      ObjectCreate(0,my_gann,OBJ_GANNFAN,0,Time[center_bar],mean,
                   //--- Segundo ponto de ancoragem para a direita
                   Time[center_bar/2],(mean+chart_min_price)/2.0);
      Print(&quot;Time[center_bar] = &quot;+(string)Time[center_bar]+&quot;  Time[center_bar/2] = &quot;+
      //Print(&quot;Time[center_bar]/=&quot;+Time[center_bar]+&quot;  Time[center_bar/2]=&quot;+Time[cente
      //--- Define a escala em unidades de Pips / Barra
      ObjectSetDouble(0,my_gann,OBJPROP_SCALE,10);
      //--- Define a tend√™ncia da linha
      ObjectSetInteger(0,my_gann,OBJPROP_DIRECTION,GANN_UP_TREND);
      //--- Define a largura da linha
      ObjectSetInteger(0,my_gann,OBJPROP_WIDTH,1);
      //--- Define o estilo da linha
      ObjectSetInteger(0,my_gann,OBJPROP_STYLE,STYLE_DASHDOT);
      //--- Define a cor da linha
      ObjectSetInteger(0,my_gann,OBJPROP_COLOR,clrYellowGreen);
      //--- Permite ao usu√°rio selecionar um objeto
      ObjectSetInteger(0,my_gann,OBJPROP_SELECTABLE,true);
      //--- Seleciona ele voc√™ mesmo
      ObjectSetInteger(0,my_gann,OBJPROP_SELECTED,true);
      //--- Desenha ele no gr√°fico
      ChartRedraw(0);
     }
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
732
<h3>Cores Web</h3>
As seguintes contantes de cor s√£o definidas para o tipo color:
clrBlack
clrDarkGre
en
clrDarkSlat
eGray
clrOlive
clrGreen
clrTeal
clrNavy
clrPurple
clrMaroon
clrIndigo
clrMidnigh
tBlue
clrDarkBlu
e
clrDarkOliv
eGreen
clrSaddleB
rown
clrForestG
reen
clrOliveDra
b
clrSeaGre
en
clrDarkGol
denrod
clrDarkSlat
eBlue
clrSienna
clrMedium
<h3>Blue</h3>
clrBrown
clrDarkTur
quoise
clrDimGray
clrLightSe
aGreen
clrDarkViol
et
clrFireBric
k
clrMedium
<h3>VioletRed</h3>
clrMedium
<h3>SeaGreen</h3>
clrChocola
te
clrCrimson
clrSteelBlu
e
clrGoldenr
od
clrMedium
<h3>SpringGre</h3>
en
clrLawnGr
een
clrCadetBl
ue
clrDarkOrc
hid
clrYellowG
reen
clrLimeGre
en
clrOrange
<h3>Red</h3>
clrDarkOra
nge
clrOrange
clrGold
clrYellow
clrChartre
use
clrLime
clrSpringG
reen
clrAqua
clrDeepSk
yBlue
clrBlue
clrMagent
a
clrRed
clrGray
clrSlateGra
y
clrPeru
clrBlueViol
et
clrLightSla
teGray
clrDeepPin
k
clrMedium
<h3>Turquoise</h3>
clrDodgerB
lue
clrTurquoi
se
clrRoyalBlu
e
clrSlateBlu
e
clrDarkKha
ki
clrIndianR
ed
clrMedium
<h3>Orchid</h3>
clrGreenY
ellow
clrMedium
<h3>Aquamarin</h3>
e
clrDarkSea
<h3>Green</h3>
clrTomato
clrRosyBro
wn
clrOrchid
clrMedium
<h3>Purple</h3>
clrPaleViol
etRed
clrCoral
clrCornflo
werBlue
clrDarkGra
y
clrSandyBr
own
clrMedium
<h3>SlateBlue</h3>
clrTan
clrDarkSal
mon
clrBurlyWo
od
clrHotPink
clrSalmon
clrViolet
clrLightCor
al
clrSkyBlue
clrLightSal
mon
clrPlum
clrKhaki
clrLightGr
een
clrAquama
rine
clrSilver
clrLightSky
<h3>Blue</h3>
clrLightSte
elBlue
clrLightBlu
e
clrPaleGre
en
clrThistle
clrPowder
<h3>Blue</h3>
clrPaleGol
denrod
clrPaleTur
quoise
clrLightGra
y
clrWheat
clrNavajoW
hite
clrMoccasi
n
clrLightPin
k
clrGainsbo
ro
clrPeachP
uff
clrPink
clrBisque
clrLightGol
denrod
clrBlanche
dAlmond
clrLemonC
hiffon
clrBeige
clrAntique
<h3>White</h3>
clrPapaya
<h3>Whip</h3>
clrCornsilk
clrLightYel
low
clrLightCya
n
clrLinen
clrLavende
r
clrMistyRo
se
clrOldLace
clrWhiteS
moke
clrSeashell
clrIvory
clrHoneyd
ew
clrAliceBlu
e
clrLavend
erBlush
clrMintCre
am
clrSnow
clrWhite
A cor pode ser definida para um objeto usando a fun√ß√£o ObjectSetInteger(). Para definir a cor de um
indicador customizado a fun√ß√£o PlotIndexSetInteger() √© usada. Para obter valores de cor existem
fun√ß√µes similares ObjectGetInteger() e PlotIndexGetInteger().</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
733
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//---- configurando um indicador
#property indicator_chart_window
#property indicator_buffers 3
#property indicator_plots   3
#property indicator_type1   DRAW_LINE
#property indicator_type2   DRAW_LINE
#property indicator_type3   DRAW_LINE
#property indicator_color1  clrBlue
#property indicator_color2  clrRed
#property indicator_color3  clrLime</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
734
<h3>Wingdings</h3>
Caracteres de Wingdings usados com o objeto OBJ_ARROW:
Um caractere necess√°rio pode ser definido usando a fun√ß√£o ObjectSetInteger().
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
void OnStart()
  {
//---
   string up_arrow=&quot;up_arrow&quot;;
   datetime time=TimeCurrent();
   double lastClose[1];
   int close=CopyClose(Symbol(),Period(),0,1,lastClose);     // Obt√©m o pre√ßo de Fecha
//--- Se o pre√ßo foi obtido
   if(close&gt;0)
     {
      ObjectCreate(0,up_arrow,OBJ_ARROW,0,0,0,0,0);          // Cria uma seta
      ObjectSetInteger(0,up_arrow,OBJPROP_ARROWCODE,241);    // Define o c√≥digo da set
      ObjectSetInteger(0,up_arrow,OBJPROP_TIME,time);        // Define hora
      ObjectSetDouble(0,up_arrow,OBJPROP_PRICE,lastClose[0]);// Define pre√ßo
      ChartRedraw(0);                                        // Desenha a seta agora
     }
   else
      Print(&quot;N√£o foi poss√≠vel obter o √∫ltimo Fechamento de pre√ßo!&quot;);
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
735
<h3>Constantes de Indicador</h3>
Existem 37 indicadores t√©cnicos pr√©-definidos, que podem ser usados em programas escritos na
linguagem MQL5. Al√©m disso, existe uma oportunidade para criar indicadores customizados usando a
fun√ß√£o iCustom(). Todas as constantes requeridas para isso est√£o divididas em 5 grupos:
¬∑ Constantes de pre√ßo ‚Äì para sele√ß√£o do tipo de pre√ßo ou volume, sob o qual um indicador √© calculado;
¬∑ M√©todos de suaviza√ß√£o ‚Äì m√©todos de suaviza√ß√£o internos usados em indicadores;
¬∑ Linhas de indicador ‚Äì identificadores de buffers do indicador ao acessar valores do indicador usando
<h3>CopyBuffer();</h3>
¬∑ Estilos de desenho ‚Äì para indicar um dos 18 tipos de desenhos e configura√ß√µes de estilo de desenho
da linha;
¬∑ Propriedades de indicadores customizados s√£o usados em fun√ß√µes para trabalhar com indicadores
customizados;
¬∑ Tipos de indicadores s√£o usados para especificar o tipo de indicador t√©cnico ao criar um handle
usando IndicatorCreate();
¬∑ Identificadores de tipos de dado s√£o usados para especificar o tipo de dado passado em um array do
tipo MqlParam para dentro de uma fun√ß√£o IndicatorCreate().</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
736
<h3>Constantes de Pre√ßo</h3>
C√°lculos de indicatores t√©cnicos requerem valores de pre√ßo e/ou valores de volumes, sob os quais
c√°lculos ser√£o realizados. Existem 7 indicadores pr√©-definidos a partir da 
enumera√ß√£o
ENUM_APPLIED_PRICE, usados para especificar o pre√ßo base desejado para os c√°lculos.
<h3>ENUM_APPLIED_PRICE</h3>
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>PRICE_CLOSE</h3>
<h3>Pre√ßo de Fechamento</h3>
<h3>PRICE_OPEN</h3>
<h3>Pre√ßo de Abertura</h3>
<h3>PRICE_HIGH</h3>
<h3>O pre√ßo m√°ximo para o per√≠odo</h3>
<h3>PRICE_LOW</h3>
<h3>O pre√ßo m√≠nimo para o per√≠odo</h3>
<h3>PRICE_MEDIAN</h3>
<h3>O pre√ßo mediano, (m√°ximo + m√≠nimo)/2</h3>
<h3>PRICE_TYPICAL</h3>
<h3>Pre√ßo</h3>
t√≠pico, 
(m√°ximo 
+ 
m√≠nimo 
+
fechamento)/3
<h3>PRICE_WEIGHTED</h3>
Pre√ßo m√©dio, (m√°ximo + m√≠nimo + fechamento
+ fechamento)/4
Caso o volume seja usado nos c√°lculos, √© necess√°rio especificar um dos dois valores a partir da
enumera√ß√£o ENUM_APPLIED_VOLUME.
<h3>ENUM_APPLIED_VOLUME</h3>
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>VOLUME_TICK</h3>
<h3>Volume de Tick</h3>
<h3>VOLUME_REAL</h3>
<h3>Volume de negocia√ß√£o</h3>
O indicador t√©cnico iStochastic() pode ser calculado de duas formas usando:
¬∑ ou somente pre√ßos de Fechamento;
¬∑ ou pre√ßos de M√°ximo e M√≠nimo.
Para selecionar uma variante necess√°ria para o c√°lculo, especifique um dos valores da enumera√ß√£o
ENUM_STO_PRICE.
<h3>ENUM_STO_PRICE</h3>
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>STO_LOWHIGH</h3>
<h3>C√°lculo √© baseado em pre√ßos M√≠nimo/M√°ximo</h3>
<h3>STO_CLOSECLOSE</h3>
<h3>C√°lculo</h3>
√© 
baseado 
em 
pre√ßos
<h3>Fechamento/Fechamento</h3>
Se um indicador t√©cnico usa nos c√°lculos dados de pre√ßo, seu tipo √© definido por
ENUM_APPLIED_PRICE, ent√£o o handle de qualquer indicador (incorporado no terminal ou escrito por
um usu√°rio) pode ser usado como a s√©rie de pre√ßo de entrada. Neste caso, os valores do buffer zero</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
737
do indicador ser√£o utilizados para os c√°lculos. Isso torna f√°cil construir valores de um indicador usando
valores de um outro indicador. O handle de um indicador customizado √© criado por meio de chamada
da fun√ß√£o iCustom().
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
#property indicator_separate_window
#property indicator_buffers 2
#property indicator_plots   2
//--- par√¢metros de entrada
input int      RSIperiod=14;         // Per√≠odo para c√°lculo do RSI
input int      Smooth=8;             // Per√≠odo de suaviza√ß√£o do RSI
input ENUM_MA_METHOD meth=MODE_SMMA; // M√©todo de suaviza√ß√£o
//---- plotar RSI
#property indicator_label1  &quot;RSI&quot;
#property indicator_type1   DRAW_LINE
#property indicator_color1  clrRed
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1
//---- plotar RSI_Smoothed
#property indicator_label2  &quot;RSI_Smoothed&quot;
#property indicator_type2   DRAW_LINE
#property indicator_color2  clrNavy
#property indicator_style2  STYLE_SOLID
#property indicator_width2  1
//--- buffers do indicador
double         RSIBuffer[];          // Aqui n√≥s armazenamos os valores do RSI
double         RSI_SmoothedBuffer[]; // Aqui estar√£o os valores suavizados dos RSI
int            RSIhandle;            // Handle do indicador RSI
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
void OnInit()
  {
//--- mapeamento de buffers do indicador
   SetIndexBuffer(0,RSIBuffer,INDICATOR_DATA);
   SetIndexBuffer(1,RSI_SmoothedBuffer,INDICATOR_DATA);
   IndicatorSetString(INDICATOR_SHORTNAME,&quot;iRSI&quot;);
   IndicatorSetInteger(INDICATOR_DIGITS,2);
//--- 
   RSIhandle=iRSI(NULL,0,RSIperiod,PRICE_CLOSE);
//---
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                 const int prev_calculated,
                 const int begin,</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
738
</p>
<pre><code class="language-mql5">
                 const double &amp;price[]
                 )
  {
//---  Redefine o valor do √∫ltimo erro
   ResetLastError();
//--- Obt√©m dados do indicador RSI em um array RSIBuffer[]
   int copied=CopyBuffer(RSIhandle,0,0,rates_total,RSIBuffer);
   if(copied&lt;=0)
     {
      Print(&quot;N√£o √© poss√≠vel copiar os valores do indicador RSI. Erro = &quot;,
            GetLastError(),&quot;,  copiado =&quot;,copied);
      return(0);
     }
//--- Cria o indicador de valores m√©dios usando valores do RSI
   int RSI_MA_handle=iMA(NULL,0,Smooth,0,meth,RSIhandle);
   copied=CopyBuffer(RSI_MA_handle,0,0,rates_total,RSI_SmoothedBuffer);
   if(copied&lt;=0)
     {
      Print(&quot;N√£o √© poss√≠vel copiar o indicador suavizado do RSI. Erro = &quot;,
            GetLastError(),&quot;,  copiado =&quot;,copied);
      return(0);
     }
//--- valor retorno de prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
739
<h3>M√©todos de Suaviza√ß√£o</h3>
Muitos indicadores t√©cnicos s√£o baseados em v√°rios m√©todos de suaviza√ß√£o de s√©ries de pre√ßo. Alguns
indicadores t√©cnicos padr√µes requerem especifica√ß√£o da tipo de suaviza√ß√£o como um par√¢metro de
entrada. Para especificar o tipo desejado de suaviza√ß√£o, identificadores listados na enumera√ß√£o
ENUM_MA_METHOD s√£o usados.
<h3>ENUM_MA_METHOD</h3>
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>MODE_SMA</h3>
<h3>M√©dia simples</h3>
<h3>MODE_EMA</h3>
<h3>M√©dia exponencial</h3>
<h3>MODE_SMMA</h3>
<h3>M√©dia suavizada</h3>
<h3>MODE_LWMA</h3>
<h3>M√©dia linear-ponderada</h3>
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
double ExtJaws[];
double ExtTeeth[];
double ExtLips[];
//---- handles para m√©dias m√≥veis
int    ExtJawsHandle;
int    ExtTeethHandle;
int    ExtLipsHandle;
//--- obt√©m handles de MA&#x27;s
</code></pre>
<p>
ExtJawsHandle=iMA(NULL,0,JawsPeriod,0,MODE_SMMA,PRICE_MEDIAN);
ExtTeethHandle=iMA(NULL,0,TeethPeriod,0,MODE_SMMA,PRICE_MEDIAN);
ExtLipsHandle=iMA(NULL,0,LipsPeriod,0,MODE_SMMA,PRICE_MEDIAN);</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
740
<h3>Linhas de Indicadores</h3>
Alguns indicadores t√©cnicos t√™m v√°rios buffers desenhados no gr√°fico. A numera√ß√£o de buffers de um
indicador come√ßa com 0. Ao copiar valores de indicador usando a fun√ß√£o CopyBuffer() em um array do
tipo double, para alguns indicadores, pode-se indicar o identificador de um buffer copiado ao inv√©s de
seu n√∫mero.
Identificadores de linhas de indicador permitidos ao copiar valores de iMACD(), iRVI() e iStochastic(). 
<h3>Constante</h3>
<h3>Valor</h3>
<h3>Descri√ß√£o</h3>
<h3>MAIN_LINE</h3>
0
<h3>Linha principal</h3>
<h3>SIGNAL_LINE</h3>
1
<h3>Linha de sinal</h3>
Identificadores de linhas de indicador permitidos ao copiar valores de ADX() e ADXW(). 
<h3>Constante</h3>
<h3>Valor</h3>
<h3>Descri√ß√£o</h3>
<h3>MAIN_LINE</h3>
0
<h3>Linha principal</h3>
<h3>PLUSDI_LINE</h3>
1
<h3>Linha +DI</h3>
<h3>MINUSDI_LINE</h3>
2
<h3>Linha ‚ÄìDI</h3>
Identificadores de linhas de indicador permitidos ao copiar valores de iBands().
<h3>Constante</h3>
<h3>Valor</h3>
<h3>Descri√ß√£o</h3>
<h3>BASE_LINE</h3>
0
<h3>Linha principal</h3>
<h3>UPPER_BAND</h3>
1
<h3>Limite superior</h3>
<h3>LOWER_BAND</h3>
2
<h3>Limite inferior</h3>
Identificadores de linhas de indicador permitidos ao copiar valores de iEnvelopes() e iFractals().
<h3>Constante</h3>
<h3>Valor</h3>
<h3>Descri√ß√£o</h3>
<h3>UPPER_LINE</h3>
0
<h3>Linha de cima</h3>
<h3>LOWER_LINE</h3>
1
<h3>Linha de baixo</h3>
Identificadores de linhas de indicador permitidos ao copiar valores de iGator()
<h3>Constante</h3>
<h3>Valor</h3>
<h3>Descri√ß√£o</h3>
<h3>UPPER_HISTOGRAM</h3>
0
<h3>Histograma superior</h3>
<h3>LOWER_HISTOGRAM</h3>
2
<h3>Histograma inferior</h3>
Identificadores de linhas de indicador permitidos ao copiar valores de iAlligator().</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
741
<h3>Constante</h3>
<h3>Valor</h3>
<h3>Descri√ß√£o</h3>
<h3>GATORJAW_LINE</h3>
0
<h3>Linha Jaw</h3>
<h3>GATORTEETH_LINE</h3>
1
<h3>Linha Teeth</h3>
<h3>GATORLIPS_LINE</h3>
2
<h3>Linha Lips</h3>
Identificadores de linhas de indicador permitidos ao copiar valores de iIchimoku().
<h3>Constante</h3>
<h3>Valor</h3>
<h3>Descri√ß√£o</h3>
<h3>TENKANSEN_LINE</h3>
0
<h3>Linha Tenkan-sen</h3>
<h3>KIJUNSEN_LINE</h3>
1
<h3>Linha Kijun-sen</h3>
<h3>SENKOUSPANA_LINE</h3>
2
<h3>Linha Senkou Span A</h3>
<h3>SENKOUSPANB_LINE</h3>
3
<h3>Linha Senkou Span B</h3>
<h3>CHIKOUSPAN_LINE</h3>
4
<h3>Linha Chikou Span</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
742
<h3>Estilos de Desenho</h3>
Ao criarum indicador customizado, pode-se especificar um dos 18 tipos de plotagem gr√°fica (como
exibidos na janela do gr√°fico principal ou em uma sub-janela do gr√°fico), cujos valores s√£o
especificados na enumera√ß√£o ENUM_DRAW_TYPE. 
Em um indicador customizado, √© permitido usar quaisquer tipos de indicador constru√≠do/desenho.
Cada tipo de constru√ß√£o requer especifica√ß√£o de um a cinco arrays globais para armazenar dados
necess√°rios para o desenho. Estes arrays de dados devem ser associados com buffers de indicador
usando a fun√ß√£o SetIndexBuffer(). O tipo de dados de ENUM_INDEXBUFFER_TYPE deve ser especificado
para cada buffer.
Dependendo do estilo de desenho, pode-se necessitar de um a quatro buffers de valor (marcados como
INDICADOR_DATA). Se um estilo admite alterna√ß√£o din√¢mica de cores (todos os estilos cont√©m COLOR
nos seus nomes), ent√£o voc√™ precisar√° de um buffer adicional de cor (tipo indicado
INDICATOR_COLOR_INDEX). Os buffers de cor s√£o sempre vinculados ap√≥s os buffers de valores
correspondendo ao estilo.
<h3>ENUM_DRAW_TYPE</h3>
<h3>ID</h3>
<h3>Descri√ß√£</h3>
o
<h3>Estruturas de Dados</h3>
<h3>Buffers de cor</h3>
<h3>DRAW_NONE</h3>
<h3>N√£o</h3>
desenhad
o
1
0
<h3>DRAW_LINE</h3>
<h3>Linha</h3>
1
0
<h3>DRAW_SECTION</h3>
<h3>Se√ß√£o</h3>
1
0
<h3>DRAW_HISTOGRAM</h3>
<h3>Histogra</h3>
ma 
a
partir da
linha
zero
1
0
<h3>DRAW_HISTOGRAM2</h3>
<h3>Histogra</h3>
ma 
de
dois
buffers
do
indicador
2
0
<h3>DRAW_ARROW</h3>
<h3>Desenha</h3>
setas
1
0
<h3>DRAW_ZIGZAG</h3>
<h3>Estilo</h3>
<h3>Zigzag</h3>
permite
divis√£o
vertical
na barra
2
0</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
743
<h3>ID</h3>
<h3>Descri√ß√£</h3>
o
<h3>Estruturas de Dados</h3>
<h3>Buffers de cor</h3>
<h3>DRAW_FILLING</h3>
<h3>Preenchi</h3>
mento de
cor entre
dos dois
n√≠veis
2
0
<h3>DRAW_BARS</h3>
<h3>Exibe</h3>
como
uma
seq√º√™nci
a 
de
barras
4
0
<h3>DRAW_CANDLES</h3>
<h3>Exibe</h3>
como um
seq√º√™nci
a 
de
candles
4
0
<h3>DRAW_COLOR_LINE</h3>
<h3>Linha</h3>
<h3>Multicolo</h3>
rida
1
1
<h3>DRAW_COLOR_SECTION</h3>
<h3>Divis√£o</h3>
<h3>Multicolo</h3>
rida
1
1
<h3>DRAW_COLOR_HISTOGRAM</h3>
<h3>Histogra</h3>
ma
multicolo
rida 
a
partir da
linha
zero
1
1
<h3>DRAW_COLOR_HISTOGRAM2</h3>
<h3>Histogra</h3>
ma
multicolo
rido dos
dois
buffers
do
indicador
2
1
<h3>DRAW_COLOR_ARROW</h3>
<h3>Desenho</h3>
de setas
multicolo
ridas
1
1
<h3>DRAW_COLOR_ZIGZAG</h3>
<h3>ZigZag</h3>
<h3>Multicolo</h3>
2
1</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
744
<h3>ID</h3>
<h3>Descri√ß√£</h3>
o
<h3>Estruturas de Dados</h3>
<h3>Buffers de cor</h3>
rido
<h3>DRAW_COLOR_BARS</h3>
<h3>Barras</h3>
multicolo
ridas
4
1
<h3>DRAW_COLOR_CANDLES</h3>
<h3>Candles</h3>
multicolo
ridos
4
1
Para refinar a exibi√ß√£o dos tipos de desenho selecionados, identificadores listados em
ENUM_PLOT_PROPERTY s√£o usados.
<h3>Para fun√ß√µes PlotIndexSetInteger() e PlotIndexGetInteger()</h3>
<h3>ENUM_PLOT_PROPERTY_INTEGER</h3>
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo da Propriedade</h3>
<h3>PLOT_ARROW</h3>
<h3>C√≥digo de seta</h3>
para 
estilo
<h3>DRAW_ARROW</h3>
uchar
<h3>PLOT_ARROW_SHIFT</h3>
<h3>Deslocamento</h3>
vertical de setas
para 
estilo
<h3>DRAW_ARROW</h3>
int
<h3>PLOT_DRAW_BEGIN</h3>
<h3>N√∫mero de barras</h3>
iniciais 
sem
desenho e valores
na 
<h3>Janela</h3>
de
<h3>Dados</h3>
int
<h3>PLOT_DRAW_TYPE</h3>
<h3>Tipo</h3>
de
constru√ß√£o
gr√°fica
<h3>ENUM_DRAW_TYPE</h3>
<h3>PLOT_SHOW_DATA</h3>
<h3>Sinal de exibi√ß√£o</h3>
de 
valores 
de
constru√ß√£o 
na
<h3>Janela de Dados</h3>
bool
<h3>PLOT_SHIFT</h3>
<h3>Deslocamento da</h3>
plotagem 
do
indicador 
ao
longo 
do 
eixo
tempo em barras
int
<h3>PLOT_LINE_STYLE</h3>
<h3>Estilo de linha de</h3>
desenho
<h3>ENUM_LINE_STYLE</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
745
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo da Propriedade</h3>
<h3>PLOT_LINE_WIDTH</h3>
<h3>A espessura da</h3>
linha de desenho
int
<h3>PLOT_COLOR_INDEXES</h3>
<h3>O</h3>
n√∫mero 
de
cores
int
<h3>PLOT_LINE_COLOR</h3>
<h3>O √≠ndice de um</h3>
buffer contendo a
cor de desenho
color       modificador = n√∫mero de √≠ndice
de cores
<h3>Para a fun√ß√£o PlotIndexSetDouble()</h3>
<h3>ENUM_PLOT_PROPERTY_DOUBLE</h3>
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo da Propriedade</h3>
<h3>PLOT_EMPTY_VALUE</h3>
<h3>Um valor vazio</h3>
para 
plotagem,
para a qual n√£o
h√° desenho
double
<h3>Para a fun√ß√£o PlotIndexSetString()</h3>
<h3>ENUM_PLOT_PROPERTY_STRING</h3>
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo da Propriedade</h3>
<h3>PLOT_LABEL</h3>
<h3>O nome da s√©rie</h3>
gr√°fica 
do
indicador 
para
exibir na Janela
de 
<h3>Dados</h3>
<h3>Ao</h3>
trabalhar 
com
estilos 
gr√°ficos
complexos
exigindo 
v√°rios
buffers 
de
indicador para a
exposi√ß√£o, 
os
nomes para cada
buffer pode ser
especificado
utilizando 
&quot;;&quot;
como separador.
<h3>O</h3>
c√≥digo 
de
exemplo 
√©
mostrado 
na
<h3>DRAW_CANDLES</h3>
string
5 estilos podem ser usados para desenhar linhas em indicadores customizados. Eles s√£o v√°lidos
somente para a espessura de linha 0 ou 1.</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
746
<h3>ENUM_LINE_STYLE</h3>
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>STYLE_SOLID</h3>
<h3>Linha s√≥lida</h3>
<h3>STYLE_DASH</h3>
<h3>Linha tracejada</h3>
<h3>STYLE_DOT</h3>
<h3>Linha pontilhada</h3>
<h3>STYLE_DASHDOT</h3>
<h3>Linha tra√ßo-ponto</h3>
<h3>STYLE_DASHDOTDOT</h3>
<h3>Tra√ßo - dois pontos</h3>
Para definir o estilo de desenho de linha e o tipo de desenho, a fun√ß√£o PlotIndexSetInteger()√© usada.
Para as extens√µes de Fibonacci, a espessura e o estilo de desenho dos n√≠veis podem ser indicados
usando a fun√ß√£o ObjectSetInteger().
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
#property indicator_chart_window
#property indicator_buffers 1
#property indicator_plots   1
//--- buffers do indicador
double         MABuffer[];
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
void OnInit()
  {
//--- Associa o array ao buffer do indicador com √≠ndice 0
   SetIndexBuffer(0,MABuffer,INDICATOR_DATA);
//--- Define o desenho da linha
   PlotIndexSetInteger(0,PLOT_DRAW_TYPE,DRAW_LINE);
//--- Define o estilo da linha
   PlotIndexSetInteger(0,PLOT_LINE_STYLE,STYLE_DOT);
//--- Define cor de linha
   PlotIndexSetInteger(0,PLOT_LINE_COLOR,clrRed);
//--- Define espessura de linha
   PlotIndexSetInteger(0,PLOT_LINE_WIDTH,1);
//--- Define r√≥tulos para a linha
   PlotIndexSetString(0,PLOT_LABEL,&quot;Moving Average&quot;);
//---
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                 const int prev_calculated,
                 const datetime &amp;time[],
                 const double &amp;open[],</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
747
</p>
<pre><code class="language-mql5">
                 const double &amp;high[],
                 const double &amp;low[],
                 const double &amp;close[],
                 const long &amp;tick_volume[],
                 const long &amp;volume[],
                 const int &amp;spread[])
  {
//--- 
   for(int i=prev_calculated;i&lt;rates_total;i++)
     {
      MABuffer[i]=close[i];
     }
//--- valor retorno de prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
748
<h3>Propriedades de Indicador Customizado</h3>
O n√∫mero de buffers de indicador que podem ser usados em um indicador customizado √© ilimitado.
Mas para cada array que √© designado como um buffer de indicador usando a fun√ß√£o SetIndexBuffer(), √©
necess√°rio especificar o tipo de dado que ele armazenar√°. Este pode ser um dos valores da
enumera√ß√£o ENUM_INDEXBUFFER_TYPE.
<h3>ENUM_INDEXBUFFER_TYPE</h3>
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>INDICATOR_DATA</h3>
<h3>Dados para desenho</h3>
<h3>INDICATOR_COLOR_INDEX</h3>
<h3>Cor</h3>
<h3>INDICATOR_CALCULATIONS</h3>
<h3>Buffers auxiliares para c√°lculos intermedi√°rios</h3>
Um indicador customizado tem muitas configura√ß√µes para fornecer uma exibi√ß√£o conveniente. Estas
configura√ß√µes s√£o feitas atrav√©s da atribui√ß√£o de propriedades de indicador correspondentes usando a
fun√ß√µes IndicatorSetDouble(), IndicatorSetInteger() e IndicatorSetString(). Identificadores de
propriedades de indicador s√£o listados na enumera√ß√£o ENUM_CUSTOMIND_PROPERTY.
<h3>ENUM_CUSTOMIND_PROPERTY_INTEGER</h3>
<h3>ID</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo da Propriedade</h3>
<h3>INDICATOR_DIGITS</h3>
<h3>Acur</h3>
acid
ade
de
des
enh
o de
valo
res
de
indi
cad
or
int
<h3>INDICATOR_HEIGHT</h3>
<h3>Altu</h3>
ra
fixa
da
jane
la
do
indi
cad
or
(o
int</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
749
<h3>ID</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo da Propriedade</h3>
com
and
o de
pr√©-
proc
essa
dor
#pro
pert
y
indi
cato
r_he
ight
)
<h3>INDICATOR_LEVELS</h3>
<h3>N√∫m</h3>
ero
de
n√≠ve
is
na
jane
la
do
indi
cad
or
int
<h3>INDICATOR_LEVELCOLOR</h3>
<h3>Cor</h3>
da
linh
a de
n√≠ve
l
color                      modificador = n√∫mero de n√≠vel
<h3>INDICATOR_LEVELSTYLE</h3>
<h3>Estil</h3>
o da
linh
a de
n√≠ve
l
<h3>ENUM_LINE_STYLE  modificador = n√∫mero de n√≠vel</h3>
<h3>INDICATOR_LEVELWIDTH</h3>
<h3>Esp</h3>
essu
ra
da
linh
a de
</p>
<pre><code class="language-mql5">
int                         modificador = n√∫mero de n√≠vel</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
750
<h3>ID</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo da Propriedade</h3>
n√≠ve
l
<h3>INDICATOR_FIXED_MINIMUM</h3>
<h3>M√≠ni</h3>
mo
fixo
para
a
jane
la
do
indi
cad
or.
<h3>A</h3>
prop
ried
ade
s√≥
pod
e
ser
grav
ada
pela
fun√ß
√£o
<h3>Indi</h3>
cato
rSet
<h3>Inte</h3>
ger(
)
bool
<h3>INDICATOR_FIXED_MAXIMUM</h3>
<h3>M√°x</h3>
imo
fixo
para
a
jane
la
do
indi
cad
or.
<h3>A</h3>
prop
ried
bool</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
751
<h3>ID</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo da Propriedade</h3>
ade
s√≥
pod
e
ser
grav
ada
pela
fun√ß
√£o
<h3>Indi</h3>
cato
rSet
<h3>Inte</h3>
ger(
)
<h3>ENUM_CUSTOMIND_PROPERTY_DOUBLE</h3>
<h3>ID</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo da Propriedade</h3>
<h3>INDICATOR_MINIMUM</h3>
<h3>M√≠ni</h3>
mo
da
jane
la
do
indi
cad
or
double
<h3>INDICATOR_MAXIMUM</h3>
<h3>M√°x</h3>
imo
da
jane
la
do
indi
cad
or
double
<h3>INDICATOR_LEVELVALUE</h3>
<h3>Valo</h3>
r de
n√≠ve
l
</p>
<pre><code class="language-mql5">
double                    modificador = n√∫mero de n√≠vel
</code></pre>
<p>
<h3>ENUM_CUSTOMIND_PROPERTY_STRING</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
752
<h3>ID</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo da Propriedade</h3>
<h3>INDICATOR_SHORTNAME</h3>
<h3>Nom</h3>
e do
indi
cad
or
abre
viad
o
string
<h3>INDICATOR_LEVELTEXT</h3>
<h3>N√≠ve</h3>
l de
desc
ri√ß√£
o
</p>
<pre><code class="language-mql5">
string                    modificador = n√∫mero de n√≠vel
</code></pre>
<p>
<h3>Exemplos:</h3>
</p>
<pre><code class="language-mql5">
//--- configura√ß√µes do indicador
#property indicator_separate_window
#property indicator_buffers 4
#property indicator_plots   2
#property indicator_type1   DRAW_LINE
#property indicator_type2   DRAW_LINE
#property indicator_color1  clrLightSeaGreen
#property indicator_color2  clrRed
//--- par√¢metros de entrada
extern int KPeriod=5;
extern int DPeriod=3;
extern int Slowing=3;
//--- buffers do indicador
double MainBuffer[];
double SignalBuffer[];
double HighesBuffer[];
double LowesBuffer[];
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
void OnInit()
  {
//--- mapeamento de buffers do indicador
   SetIndexBuffer(0,MainBuffer,INDICATOR_DATA);
   SetIndexBuffer(1,SignalBuffer,INDICATOR_DATA);
   SetIndexBuffer(2,HighesBuffer,INDICATOR_CALCULATIONS);
   SetIndexBuffer(3,LowesBuffer,INDICATOR_CALCULATIONS);
//--- define acuracidade
   IndicatorSetInteger(INDICATOR_DIGITS,2);
//--- define n√≠veis</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
753
</p>
<pre><code class="language-mql5">
   IndicatorSetInteger(INDICATOR_LEVELS,2);
   IndicatorSetDouble(INDICATOR_LEVELVALUE,0,20);
   IndicatorSetDouble(INDICATOR_LEVELVALUE,1,80);
//--- define m√°ximo e m√≠nimo para sub-janela
   IndicatorSetDouble(INDICATOR_MINIMUM,0);
   IndicatorSetDouble(INDICATOR_MAXIMUM,100);
//--- define a primeira barra a partir do qual o √≠ndice ser√° desenhado
   PlotIndexSetInteger(0,PLOT_DRAW_BEGIN,KPeriod+Slowing-2);
   PlotIndexSetInteger(1,PLOT_DRAW_BEGIN,KPeriod+Slowing+DPeriod);
//--- define estilo STYLE_DOT para a segunda linha
   PlotIndexSetInteger(1,PLOT_LINE_STYLE,STYLE_DOT);
//--- nome para Janela de Dados e r√≥tulo da sub-janela do indicador
   IndicatorSetString(INDICATOR_SHORTNAME,&quot;Stoch(&quot;+KPeriod+&quot;,&quot;+DPeriod+&quot;,&quot;+Slowing+&quot;)&quot;
   PlotIndexSetString(0,PLOT_LABEL,&quot;Main&quot;);
   PlotIndexSetString(1,PLOT_LABEL,&quot;Signal&quot;);
//--- define valor vazio para linha de desenho
   PlotIndexSetDouble(0,PLOT_EMPTY_VALUE,0.0);
   PlotIndexSetDouble(1,PLOT_EMPTY_VALUE,0.0);
//--- inicializa√ß√£o conclu√≠da
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
754
<h3>Indicadores T√©cnicos</h3>
Existem duas formas de criar via programa√ß√£o um indicador para posteriormente acessar seus
valores. A primeira forma √© especificar diretamente um nome de fun√ß√£o da lista de indicadores
t√©cnicos. A segunda forma √©, usando a fun√ß√£o IndicatorCreate(), criar de forma uniforme um handle
de qualquer indicador atrav√©s da atribui√ß√£o de um identificador da enumera√ß√£o ENUM_INDICATOR.
Ambos as formas de criar handles s√£o iguais, voc√™ pode usar aquela que for mais conveniente em um
caso particular ao escrever um programa em MQL5.
Ao criar um indicador do tipo IND_CUSTOM, o campo type do primeiro elemento de um array de
par√¢metros de entrada MqlParam deve ter valor TYPE_STRING da enumera√ß√£o ENUM_DATATYPE,
enquanto que o campo string_value do primeiro elemento deve conter o nome do indicador
customizado.
<h3>ENUM_INDICATOR</h3>
<h3>Identificador</h3>
<h3>Indicador</h3>
<h3>IND_AC</h3>
<h3>Accelerator Oscillator</h3>
<h3>IND_AD</h3>
<h3>Accumulation/Distribution</h3>
<h3>IND_ADX</h3>
<h3>Average Directional Index</h3>
<h3>IND_ADXW</h3>
<h3>ADX by Welles Wilder</h3>
<h3>IND_ALLIGATOR</h3>
<h3>Alligator</h3>
<h3>IND_AMA</h3>
<h3>Adaptive Moving Average</h3>
<h3>IND_AO</h3>
<h3>Awesome Oscillator</h3>
<h3>IND_ATR</h3>
<h3>Average True Range</h3>
<h3>IND_BANDS</h3>
<h3>Bollinger Bands¬Æ</h3>
<h3>IND_BEARS</h3>
<h3>Bears Power</h3>
<h3>IND_BULLS</h3>
<h3>Bulls Power</h3>
<h3>IND_BWMFI</h3>
<h3>Market Facilitation Index</h3>
<h3>IND_CCI</h3>
<h3>Commodity Channel Index</h3>
<h3>IND_CHAIKIN</h3>
<h3>Chaikin Oscillator</h3>
<h3>IND_CUSTOM</h3>
<h3>Custom indicator</h3>
<h3>IND_DEMA</h3>
<h3>Double Exponential Moving Average</h3>
<h3>IND_DEMARKER</h3>
<h3>DeMarker</h3>
<h3>IND_ENVELOPES</h3>
<h3>Envelopes</h3>
<h3>IND_FORCE</h3>
<h3>Force Index</h3>
<h3>IND_FRACTALS</h3>
<h3>Fractals</h3>
<h3>IND_FRAMA</h3>
<h3>Fractal Adaptive Moving Average</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
755
<h3>Identificador</h3>
<h3>Indicador</h3>
<h3>IND_GATOR</h3>
<h3>Gator Oscillator</h3>
<h3>IND_ICHIMOKU</h3>
<h3>Ichimoku Kinko Hyo</h3>
<h3>IND_MA</h3>
<h3>Moving Average</h3>
<h3>IND_MACD</h3>
<h3>MACD</h3>
<h3>IND_MFI</h3>
<h3>Money Flow Index</h3>
<h3>IND_MOMENTUM</h3>
<h3>Momentum</h3>
<h3>IND_OBV</h3>
<h3>On Balance Volume</h3>
<h3>IND_OSMA</h3>
<h3>OsMA</h3>
<h3>IND_RSI</h3>
<h3>Relative Strength Index</h3>
<h3>IND_RVI</h3>
<h3>Relative Vigor Index</h3>
<h3>IND_SAR</h3>
<h3>Parabolic SAR</h3>
<h3>IND_STDDEV</h3>
<h3>Standard Deviation</h3>
<h3>IND_STOCHASTIC</h3>
<h3>Stochastic Oscillator</h3>
<h3>IND_TEMA</h3>
<h3>Triple Exponential Moving Average</h3>
<h3>IND_TRIX</h3>
<h3>Triple Exponential Moving Averages Oscillator</h3>
<h3>IND_VIDYA</h3>
<h3>Variable Index Dynamic Average</h3>
<h3>IND_VOLUMES</h3>
<h3>Volumes</h3>
<h3>IND_WPR</h3>
<h3>Williams&#x27; Percent Range</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
756
<h3>Identificadores de Tipo de Dados</h3>
Quando criar um indicador usando a fun√ß√£o IndicatorCreate(), um array de tipo MqlParam deve ser
especificado como o √∫ltimo par√¢metro. Por sua vez, a estrutura MqlParam, descrevendo o indicador,
cont√©m um tipo de campo especial. Este campo cont√©m informa√ß√£o sobre o tipo de dado (real, integer
pi string type) que √© passado por um elemento espec√≠fico do array. O valor deste campo da estrutura
MqlParam pode ser um dos valores ENUM_DATATYPE.
<h3>ENUM_DATATYPE</h3>
<h3>Identificador</h3>
<h3>Tipo de dado</h3>
<h3>TYPE_BOOL</h3>
bool
<h3>TYPE_CHAR</h3>
char
<h3>TYPE_UCHAR</h3>
uchar
<h3>TYPE_SHORT</h3>
short
<h3>TYPE_USHORT</h3>
ushort
<h3>TYPE_COLOR</h3>
color
<h3>TYPE_INT</h3>
int
<h3>TYPE_UINT</h3>
uint
<h3>TYPE_DATETIME</h3>
datetime
<h3>TYPE_LONG</h3>
long
<h3>TYPE_ULONG</h3>
ulong
<h3>TYPE_FLOAT</h3>
float
<h3>TYPE_DOUBLE</h3>
double
<h3>TYPE_STRING</h3>
string
Cada elemento do array descreve o correspondente par√¢metro de entrada de um indicador t√©cnico
criado, assim o tipo e a ordem dos elementos no array devem ser rigorosamente mantidos em
concord√¢ncia com a descri√ß√£o.</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
757
<h3>Estado de Ambiente</h3>
As constantes que descrevem o ambiente de execu√ß√£o corrente de um programa MQL5 est√£o divididas
em grupos:
¬∑ Propriedades do terminal cliente ‚Äì informa√ß√µes sobre o terminal cliente;
¬∑ Propriedades do programa-MQL5 executado ‚Äì propriedades do programa MQL5, que ajuda a
controlar sua execu√ß√£o;
¬∑ Propriedades do ativo ‚Äì obten√ß√£o de informa√ß√µes sobre um ativo;
¬∑ Propriedades da conta ‚Äì informa√ß√µes sobre a conta atual;
¬∑ Estat√≠sticas de teste ‚Äì resultados de teste de um Expert Advisor.</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
758
<h3>Propriedades do Terminal Cliente</h3>
Identificadores para obter informa√ß√µes do terminal do cliente com as fun√ß√µes TerminalInfoInteger() e
TerminalInfoString(). 
<h3>Como</h3>
par√¢metro, 
essas 
fun√ß√µes 
recebem 
valores 
dos 
enums
ENUM_TERMINAL_INFO_INTEGER e ENUM_TERMINAL_INFO_STRING, respectivamente.
<h3>ENUM_TERMINAL_INFO_INTEGER</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo</h3>
<h3>TERMINAL_BUILD</h3>
<h3>N√∫mero do build do terminal em</h3>
execu√ß√£o
int
<h3>TERMINAL_COMMUNITY_ACCOUNT</h3>
<h3>Flag indicando presen√ßa de dados</h3>
de 
autentica√ß√£o 
da
<h3>MQL5.community no terminal</h3>
int
<h3>TERMINAL_COMMUNITY_CONNECTION</h3>
<h3>Presen√ßa</h3>
de 
conex√£o 
com 
a
<h3>MQL5.community</h3>
bool
<h3>TERMINAL_CONNECTED</h3>
<h3>Presen√ßa</h3>
de 
conex√£o 
com 
o
servidor de negocia√ß√£o
bool
<h3>TERMINAL_DLLS_ALLOWED</h3>
<h3>Permiss√£o para uso de DLL</h3>
bool
<h3>TERMINAL_TRADE_ALLOWED</h3>
<h3>Permiss√£o para negociar</h3>
bool
<h3>TERMINAL_EMAIL_ENABLED</h3>
<h3>Permiss√£o para envio de e-mails</h3>
utilizando o servidor SMTP e login
especificados nas configura√ß√µes do
terminal
bool
<h3>TERMINAL_FTP_ENABLED</h3>
<h3>Permiss√£o para envio de relat√≥rios</h3>
via FTP para o servidor indicado
na 
conta 
de 
negocia√ß√£o
configurada no terminal
bool
<h3>TERMINAL_NOTIFICATIONS_ENABLED</h3>
<h3>Permiss√£o</h3>
para 
envio 
de
notifica√ß√µes para smartphone
bool
<h3>TERMINAL_MAXBARS</h3>
<h3>Quantidade m√°xima de barras no</h3>
gr√°fico
int
<h3>TERMINAL_MQID</h3>
<h3>Flag</h3>
indicando 
presen√ßa 
de
<h3>MetaQuotes ID para envio de</h3>
notifica√ß√µes Push
bool
<h3>TERMINAL_CODEPAGE</h3>
<h3>N√∫mero da p√°gina de c√≥digo do</h3>
idioma configurado no terminal do
cliente
int
<h3>TERMINAL_CPU_CORES</h3>
<h3>N√∫mero</h3>
de 
processadores 
no
sistema
int
<h3>TERMINAL_DISK_SPACE</h3>
<h3>Espa√ßo livre em disco dispon√≠vel</h3>
para 
a 
pasta 
<h3>MQL5\Files</h3>
do
int</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
759
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo</h3>
terminal (agente), em MB
<h3>TERMINAL_MEMORY_PHYSICAL</h3>
<h3>Tamanho da mem√≥ria f√≠sica do</h3>
sistema, em MB
int
<h3>TERMINAL_MEMORY_TOTAL</h3>
<h3>Tamanho da mem√≥ria dispon√≠vel</h3>
para o 
processo 
do 
terminal
(agente), em MB
int
<h3>TERMINAL_MEMORY_AVAILABLE</h3>
<h3>Mem√≥ria livre do processo do</h3>
terminal (agente), MB
int
<h3>TERMINAL_MEMORY_USED</h3>
<h3>Mem√≥ria</h3>
usada 
pelo 
terminal
(agente), MB
int
<h3>TERMINAL_X64</h3>
<h3>Indica√ß√£o do &quot;terminal 64-bit&quot;</h3>
bool
<h3>TERMINAL_OPENCL_SUPPORT</h3>
<h3>A vers√£o do OpenCL suportado no</h3>
formato 0x00010002 = 1.2.  &quot;0&quot;
significa 
que 
<h3>OpenCL</h3>
n√£o 
√©
suportado
int
<h3>TERMINAL_SCREEN_DPI</h3>
<h3>A qualidade de resolu√ß√£o ao exibir</h3>
informa√ß√µes no ecr√£ √© medida pelo
n√∫mero de pontos por polegada
linear da superf√≠cie (DPI).
<h3>O conhecimento desse par√¢metro</h3>
permite que voc√™ especifique as
dimens√µes dos objetos gr√°ficos de
modo que pare√ßam iguais em
monitores com uma 
resolu√ß√£o
diferente.
int
<h3>TERMINAL_SCREEN_LEFT</h3>
<h3>Coordenada</h3>
esquerda 
da 
tela
virtual. A tela virtual √© o ret√¢ngulo
que cobre todos os monitores. Se
o sistema tiver dois monitores e
sua ordem for definida da direita
para a esquerda, a coordenada
esquerda da tela virtual poder√°
estar na borda de dois monitores.
int
<h3>TERMINAL_SCREEN_TOP</h3>
<h3>Coordenada</h3>
superior 
da 
tela
virtual
int
<h3>TERMINAL_SCREEN_WIDTH</h3>
<h3>Largura do terminal</h3>
int
<h3>TERMINAL_SCREEN_HEIGHT</h3>
<h3>Altura do terminal</h3>
int
<h3>TERMINAL_LEFT</h3>
<h3>Coordenada esquerda do terminal</h3>
em rela√ß√£o √† tela virtual
int
<h3>TERMINAL_TOP</h3>
<h3>Coordenada direita do terminal em</h3>
rela√ß√£o √† tela virtual
int</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
760
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo</h3>
<h3>TERMINAL_RIGHT</h3>
<h3>Coordenada superior do terminal</h3>
em rela√ß√£o √† tela virtual
int
<h3>TERMINAL_BOTTOM</h3>
<h3>Coordenada inferior do terminal</h3>
em rela√ß√£o √† tela virtual
int
<h3>TERMINAL_PING_LAST</h3>
<h3>√öltimo valor conhecido do ping at√©</h3>
ao servidor de negocia√ß√£o em
microssegundos. Em um segundo
existe 
um 
milh√£o 
de
microssegundos
int
<h3>TERMINAL_VPS</h3>
Sinal de que o terminal est√° sendo
executado 
no 
servidor 
virtual
<h3>MetaTrader Vitrtual Hosting (VPS</h3>
<h3>MetaTrader)</h3>
bool
<h3>Identificador de tecla</h3>
<h3>Descri√ß√£o</h3>
<h3>TERMINAL_KEYSTATE_LEFT</h3>
<h3>Status da tecla &quot;Seta para a</h3>
esquerda&quot;
int
<h3>TERMINAL_KEYSTATE_UP</h3>
<h3>Status da tecla &quot;Seta para cima&quot;</h3>
int
<h3>TERMINAL_KEYSTATE_RIGHT</h3>
<h3>Status da tecla &quot;Seta para a</h3>
direita&quot;
int
<h3>TERMINAL_KEYSTATE_DOWN</h3>
<h3>Status da tecla &quot;Seta para baixo&quot;</h3>
int
<h3>TERMINAL_KEYSTATE_SHIFT</h3>
<h3>Status da tecla &quot;Shift&quot;</h3>
int
<h3>TERMINAL_KEYSTATE_CONTROL</h3>
<h3>Status da tecla &quot;Ctrl&quot;</h3>
int
<h3>TERMINAL_KEYSTATE_MENU</h3>
<h3>Status da tecla &quot;Windows&quot;</h3>
int
<h3>TERMINAL_KEYSTATE_CAPSLOCK</h3>
<h3>Status da tecla &quot;CapsLock&quot;</h3>
int
<h3>TERMINAL_KEYSTATE_NUMLOCK</h3>
<h3>Status da tecla &quot;NumLock&quot;</h3>
int
<h3>TERMINAL_KEYSTATE_SCRLOCK</h3>
<h3>Status da tecla &quot;ScrollLock&quot;</h3>
int
<h3>TERMINAL_KEYSTATE_ENTER</h3>
<h3>Status da tecla &quot;Enter&quot;</h3>
int
<h3>TERMINAL_KEYSTATE_INSERT</h3>
<h3>Status da tecla &quot;Insert&quot;</h3>
int
<h3>TERMINAL_KEYSTATE_DELETE</h3>
<h3>Status da tecla &quot;Delete&quot;</h3>
int
<h3>TERMINAL_KEYSTATE_HOME</h3>
<h3>Status da tecla &quot;Home&quot;</h3>
int
<h3>TERMINAL_KEYSTATE_END</h3>
<h3>Status da tecla &quot;End&quot;</h3>
int
<h3>TERMINAL_KEYSTATE_TAB</h3>
<h3>Status da tecla &quot;Tab&quot;</h3>
int
<h3>TERMINAL_KEYSTATE_PAGEUP</h3>
<h3>Status da tecla &quot;PageUp&quot;</h3>
int
<h3>TERMINAL_KEYSTATE_PAGEDOWN</h3>
<h3>Status da tecla &quot;PageDown&quot;</h3>
int
<h3>TERMINAL_KEYSTATE_ESCAPE</h3>
<h3>Status da tecla &quot;Escape&quot;</h3>
int</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
761
A chamada TerminalInfoInteger(TERMINAL_KEYSTATE_XXX) retorna o mesmo c√≥digo de estado da tecla
que a fun√ß√£o GetKeyState() da MSDN.
Exemplo de c√°lculo do fator de escala:
</p>
<pre><code class="language-mql5">
//--- criamos um bot√£o com largura de 1.5 polegada na tela
int screen_dpi = TerminalInfoInteger(TERMINAL_SCREEN_DPI); // obtemos o DPI do monitor
int base_width = 144;                                      // largura b√°sica em pixels
int width      = (button_width * screen_dpi) / 96;         // calculamos a largura do 
</code></pre>
<p>
...
</p>
<pre><code class="language-mql5">
//--- c√°lculo do fator de escala em porcentagem
int scale_factor=(TerminalInfoInteger(TERMINAL_SCREEN_DPI) * 100) / 96;
//--- uso do fator de escala
</code></pre>
<p>
width=(base_width * scale_factor) / 100;
Com esse uso, o recurso gr√°fico manter√° o mesmo tamanho visual em monitores com diferentes
resolu√ß√µes. Al√©m disso, os tamanhos dos elementos de controle (bot√µes, janelas de di√°logo etc.)
corresponder√£o √†s configura√ß√µes de personaliza√ß√£o.
<h3>ENUM_TERMINAL_INFO_DOUBLE</h3>
<h3>Identifier</h3>
<h3>Descri√ß√£o</h3>
tipo
<h3>TERMINAL_COMMUNITY_BALANCE</h3>
<h3>Saldo no MQL5.community</h3>
double
<h3>TERMINAL_RETRANSMISSION</h3>
<h3>Porcentagem de pacotes de rede</h3>
re-enviados no protocolo TCP/IP
para 
todos 
os 
aplicativos 
e
servi√ßos 
executados 
no
computador. A perda de pacotes
ocorre mesmo em redes r√°pidas e
configuradas 
corretamente.
<h3>Quando</h3>
ela 
ocorre, 
n√£o 
h√°
confirma√ß√£o da entrega de pacotes
entre o receptor e o remetente.
<h3>Por</h3>
conseguinte, 
pacotes
&quot;perdidos&quot; s√£o reenviados.
<h3>Ele n√£o √© uma indica√ß√£o da</h3>
qualidade da conex√£o entre um
terminal particular e um servidor
de negocia√ß√£o, uma vez que a
porcentagem √© calculada para toda
a atividade da rede, incluindo a de
sistema e de fundo.
double</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
762
<h3>Identifier</h3>
<h3>Descri√ß√£o</h3>
tipo
<h3>O valor TERMINAL_TRESSMISSION</h3>
√© solicitado no sistema operacional
uma vez por minuto. O pr√≥prio
terminal n√£o calcula estes valores.
Opera√ß√µes de arquivo podem ser realizadas somente em dois diret√≥rios; os caminhos correspondentes
podem 
ser 
obtidos 
usando 
solicita√ß√£o 
para 
as 
propriedades 
<h3>TERMINAL_DATA_PATH</h3>
e
TERMINAL_COMMONDATA_PATH.
<h3>ENUM_TERMINAL_INFO_STRING</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo</h3>
<h3>TERMINAL_LANGUAGE</h3>
<h3>Linguagem do terminal</h3>
string
<h3>TERMINAL_COMPANY</h3>
<h3>Nome da empresa</h3>
string
<h3>TERMINAL_NAME</h3>
<h3>Nome do terminal</h3>
string
<h3>TERMINAL_PATH</h3>
Pasta a partir da qual o terminal
foi iniciado
string
<h3>TERMINAL_DATA_PATH</h3>
<h3>Pasta na qual dados do terminal</h3>
s√£o armazenados
string
<h3>TERMINAL_COMMONDATA_PATH</h3>
<h3>Caminho comum para todos os</h3>
terminais 
instalados 
em 
um
computador
string
<h3>TERMINAL_CPU_NAME</h3>
<h3>Nome do processador</h3>
string
<h3>TERMINAL_CPU_ARCHITECTURE</h3>
<h3>Arquitetura do processador</h3>
string
<h3>TERMINAL_OS_VERSION</h3>
<h3>Nome do sistema operacional do</h3>
usu√°rio
string
<h3>TERMINAL_COLORTHEME_NAME</h3>
<h3>Esquema de cores do terminal,</h3>
valores poss√≠veis: Light e Dark.
string
Para melhor compreens√£o dos caminhos armazenados nas propriedades 
dos 
par√¢metros
TERMINAL_PATH, TERMINAL_DATA_PATH e TERMINAL_COMMONDATA_PATH, 
√© 
recomend√°vel
executar um script que informe esses valores para a c√≥pia do terminal instalada no seu computador.
Example: Script retorna informa√ß√µes sobre os caminhos do terminal cliente
</p>
<pre><code class="language-mql5">
//+----------¬¥--------------------------------------------------------+
//|                                          Check_TerminalPaths.mq5 |
//|                        Copyright 2009, MetaQuotes Software Corp. |
//|                                              https://www.mql5.com |
//+----------¬¥--------------------------------------------------------+
#property copyright &quot;2009, MetaQuotes Software Corp.&quot;
#property link      &quot;https://www.mql5.com&quot;</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
763
</p>
<pre><code class="language-mql5">
#property version   &quot;1.00&quot;
//+----------¬¥--------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+----------¬¥--------------------------------------------------------+
void OnStart()
  {
//---
   Print(&quot;TERMINAL_PATH = &quot;,TerminalInfoString(TERMINAL_PATH));
   Print(&quot;TERMINAL_DATA_PATH = &quot;,TerminalInfoString(TERMINAL_DATA_PATH));
   Print(&quot;TERMINAL_COMMONDATA_PATH = &quot;,TerminalInfoString(TERMINAL_COMMONDATA_PATH));
</code></pre>
<p>
  }
Como resultado da execu√ß√£o do script no Di√°rio de Experts, voc√™ ver√° mensagens, como as seguintes:
Obten√ß√£o de informa√ß√µes sobre o esquema de cores do terminal
O terminal permite definir esquemas de cores: claro (padr√£o) e escuro. Ao criar aplicativos
personalizados que possuem interface gr√°fica para intera√ß√£o com o usu√°rio, os desenvolvedores
precisam considerar o esquema de cores atual do terminal. Portanto, √© necess√°rio adaptar
dinamicamente os componentes visuais usados no aplicativo para oferecer conforto aos usu√°rios.
Para isso, foram adicionadas fun√ß√µes para determinar o esquema de cores do terminal:
¬∑ O valor TERMINAL_COLORTHEME_NAME do enum ENUM_TERMINAL_INFO_STRING permite obter o
nome do esquema de cores usando a fun√ß√£o TerminalInfoString. Valores poss√≠veis: Light e Dark.
¬∑ Use as propriedades THEME_COLOR_* do enum ENUM_TERMINAL_INFO_INTEGER para obter as cores
de elementos espec√≠ficos da interface usando a fun√ß√£o TerminalInfoInteger.
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo de</h3>
propriedade
<h3>THEME_COLOR_WINDOW</h3>
<h3>Fundo da janela</h3>
color
<h3>THEME_COLOR_WINDOWTEXT</h3>
<h3>Texto na janela</h3>
color
<h3>THEME_COLOR_WINDOW</h3>
<h3>Fundo da janela</h3>
color
<h3>THEME_COLOR_WINDOWTEXT</h3>
<h3>Texto na janela</h3>
color
<h3>THEME_COLOR_BTNTEXT</h3>
<h3>Texto nos bot√µes</h3>
color
<h3>THEME_COLOR_GRAYTEXT</h3>
<h3>Texto inativo (desativado)</h3>
color</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
764
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo de</h3>
propriedade
<h3>THEME_COLOR_INFOTEXT</h3>
<h3>Texto em dicas</h3>
color
<h3>THEME_COLOR_INFOBK</h3>
<h3>Fundo das dicas</h3>
color
<h3>THEME_COLOR_3DFACE</h3>
<h3>Frente de elementos 3D</h3>
color
<h3>THEME_COLOR_3DLIGHT</h3>
<h3>Lado claro de elementos 3D</h3>
color
<h3>THEME_COLOR_3DSHADOW</h3>
<h3>Lado com sombra de elementos</h3>
3D
color
<h3>THEME_COLOR_3DDKSHADOW</h3>
<h3>Sombra escura de elementos 3D</h3>
color
<h3>THEME_COLOR_3DHILIGHT</h3>
<h3>Realce de elementos 3D</h3>
color
<h3>THEME_COLOR_HIGHLIGHT</h3>
<h3>Fundo</h3>
dos 
elementos
selecionados
color
<h3>THEME_COLOR_HIGHLIGHTTEXT</h3>
<h3>Texto</h3>
dos 
elementos
selecionados
color
<h3>THEME_COLOR_BTNFACE</h3>
<h3>Frente dos bot√µes</h3>
color
<h3>THEME_COLOR_BTNHILIGHT</h3>
<h3>Realce dos bot√µes</h3>
color
<h3>THEME_COLOR_BTNSHADOW</h3>
<h3>Sombra dos bot√µes</h3>
color
<h3>THEME_COLOR_MENU</h3>
<h3>Fundo do menu</h3>
color
<h3>THEME_COLOR_MENUBAR</h3>
<h3>Fundo da barra de menu</h3>
color
<h3>THEME_COLOR_MENUTEXT</h3>
<h3>Texto do menu</h3>
color
<h3>THEME_COLOR_MENUHILIGHT</h3>
<h3>Realce</h3>
do 
item 
de 
menu
selecionado
color
<h3>THEME_COLOR_ACTIVECAPTION</h3>
<h3>T√≠tulo da janela ativa</h3>
color
<h3>THEME_COLOR_INACTIVECAPTION</h3>
<h3>T√≠tulo da janela inativa</h3>
color
<h3>THEME_COLOR_GRADIENTINACTIVECAPTION</h3>
<h3>Gradiente do t√≠tulo da janela</h3>
inativa
color
<h3>THEME_COLOR_CAPTIONTEXT</h3>
<h3>Texto do t√≠tulo da janela</h3>
color
<h3>THEME_COLOR_INACTIVECAPTIONTEXT</h3>
<h3>Texto do t√≠tulo da janela inativa</h3>
color
<h3>THEME_COLOR_HOTTEXT</h3>
<h3>Hyperlinks ou elementos ativos</h3>
color
<h3>THEME_COLOR_NONE</h3>
<h3>Cor n√£o selecionada</h3>
color
<h3>THEME_COLOR_SEPARATOR</h3>
<h3>Separador</h3>
color
<h3>THEME_COLOR_SCROLLBACK</h3>
<h3>Barra de rolagem</h3>
color
<h3>THEME_COLOR_LINE1</h3>
Cor de fundo de linha √≠mpar no
log
color</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
765
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo de</h3>
propriedade
<h3>THEME_COLOR_LINE2</h3>
Cor de fundo de linha par no log
color
<h3>THEME_COLOR_GRID</h3>
<h3>Cor da grade no log</h3>
color
<h3>THEME_COLOR_SUMMARY</h3>
Cor de fundo da linha de total no
log
color
<h3>THEME_COLOR_ERROR</h3>
<h3>Cor do texto de erro</h3>
color
<h3>THEME_COLOR_INVALID</h3>
<h3>Cor do texto de valor inv√°lido</h3>
color
<h3>THEME_COLOR_NEGATIVE</h3>
<h3>Cor de valor negativo</h3>
color
<h3>THEME_COLOR_POSITIVE</h3>
<h3>Cor de valor positivo</h3>
color
<h3>THEME_COLOR_LINK</h3>
<h3>Cor do link</h3>
color
<h3>THEME_COLOR_LINKHOVER</h3>
Cor do link ao passar o mouse
color
<h3>THEME_COLOR_LINKTESTER</h3>
<h3>Cor dos links em cache de</h3>
resultados 
de 
execu√ß√µes
anteriores de testes/otimiza√ß√µes
color
<h3>THEME_COLOR_TEXTUP</h3>
<h3>Bot√£o n√£o pressionado</h3>
color
<h3>THEME_COLOR_TEXTDOWN</h3>
<h3>Bot√£o pressionado</h3>
color
<h3>THEME_COLOR_BACKUP</h3>
Cor dos bot√µes &quot;BUY&quot; e &quot;SELL&quot; na
janela 
&quot;One 
<h3>Click</h3>
<h3>Trading&quot;</h3>
quando o pre√ßo proposto sobe
color
<h3>THEME_COLOR_BACKDOWN</h3>
Cor dos bot√µes &quot;BUY&quot; e &quot;SELL&quot; na
janela 
&quot;One 
<h3>Click</h3>
<h3>Trading&quot;</h3>
quando o pre√ßo proposto desce
color
<h3>THEME_COLOR_CLOSE</h3>
<h3>Bot√£o de opera√ß√£o &quot;Close&quot;</h3>
color
<h3>THEME_COLOR_BUY</h3>
<h3>Bot√£o de opera√ß√£o &quot;BUY&quot;</h3>
color
<h3>THEME_COLOR_SELL</h3>
<h3>Bot√£o de opera√ß√£o &quot;SELL&quot;</h3>
color
<h3>THEME_COLOR_DEPOSIT</h3>
<h3>Cor do bot√£o &quot;Deposit&quot;</h3>
color
<h3>THEME_COLOR_WITHDRAWAL</h3>
<h3>Cor do bot√£o &quot;Withdrawal&quot;</h3>
color
<h3>THEME_COLOR_BID</h3>
<h3>Cor da linha &quot;Bid&quot;</h3>
color
<h3>THEME_COLOR_ASK</h3>
<h3>Cor da linha &quot;Ask&quot;</h3>
color
<h3>THEME_COLOR_STOPS</h3>
<h3>Cor da linha &quot;Stop&quot;</h3>
color
<h3>THEME_COLOR_STOPS_RED</h3>
<h3>Realce do valor StopLoss quando</h3>
o lucro est√° negativo na aba de
<h3>Negocia√ß√£o</h3>
color
<h3>THEME_COLOR_STOPS_GREEN</h3>
<h3>Realce do valor StopLoss quando</h3>
o lucro est√° positivo na aba de
color</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
766
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo de</h3>
propriedade
<h3>Negocia√ß√£o</h3>
<h3>THEME_COLOR_CONFIRM</h3>
<h3>Cor do bot√£o &quot;Accept&quot; na janela</h3>
de envio de ordem
color
<h3>THEME_COLOR_REQUOTE</h3>
<h3>Cor do bot√£o &quot;Requote&quot; na janela</h3>
de envio de ordem
color
<h3>THEME_COLOR_REJECT</h3>
<h3>Cor do bot√£o &quot;Reject&quot; na janela</h3>
de envio de ordem
color
<h3>THEME_COLOR_NOTIFICATION</h3>
<h3>Cor do texto de altera√ß√µes do</h3>
servidor na janela de envio de
ordem
color
<h3>THEME_COLOR_RATING</h3>
<h3>Cor da barra de avalia√ß√£o em</h3>
sistema de aprendizado
color
<h3>THEME_COLOR_BOOK_BUY</h3>
<h3>Cor do fundo dos n√≠veis de</h3>
compra no Livro de Ofertas
color
<h3>THEME_COLOR_BOOK_SELL</h3>
Cor do fundo dos n√≠veis de venda
no Livro de Ofertas
color
<h3>THEME_COLOR_BOOK_LAST</h3>
<h3>Cor da √∫ltima negocia√ß√£o no</h3>
<h3>Livro de Ofertas</h3>
color
<h3>THEME_COLOR_BOOK_STOP</h3>
Cor do n√≠vel StopLoss no Livro de
<h3>Ofertas</h3>
color
<h3>THEME_COLOR_BOOK_SPREAD</h3>
<h3>Cor do fundo dos n√≠veis dentro</h3>
do spread no Livro de Ofertas
color
<h3>THEME_COLOR_TICKS_BID</h3>
Cor da linha Bid no gr√°fico de
ticks na janela de envio de
ordem
color
<h3>THEME_COLOR_TICKS_ASK</h3>
Cor da linha Ask no gr√°fico de
ticks na janela de envio de
ordem
color
<h3>THEME_COLOR_TICKS_LAST</h3>
Cor da linha Last no gr√°fico de
ticks na janela de envio de
ordem
color
<h3>THEME_COLOR_TICKS_CROSS</h3>
<h3>Cor do cursor cruzado no gr√°fico</h3>
de ticks na janela de envio de
ordem
color
<h3>THEME_COLOR_TICKS_SL</h3>
<h3>Cor da linha StopLoss no gr√°fico</h3>
de ticks na janela de envio de
ordem
color</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
767
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo de</h3>
propriedade
<h3>THEME_COLOR_TICKS_TP</h3>
<h3>Cor da linha</h3>
<h3>TakeProfit</h3>
no
gr√°fico de ticks na janela de
envio de ordem
color
<h3>THEME_COLOR_TESTER_START</h3>
<h3>Cor</h3>
do 
bot√£o 
&quot;Start&quot; 
do
teste/otimiza√ß√£o
color
<h3>THEME_COLOR_TESTER_STOP</h3>
<h3>Cor</h3>
do 
bot√£o 
&quot;Stop&quot; 
do
teste/otimiza√ß√£o
color
<h3>THEME_COLOR_TESTER_START_FRAME</h3>
Cor da borda do bot√£o &quot;Start&quot; do
teste/otimiza√ß√£o
color
<h3>THEME_COLOR_TESTER_STOP_FRAME</h3>
Cor da borda do bot√£o &quot;Stop&quot; do
teste/otimiza√ß√£o
color
<h3>THEME_COLOR_TESTER_PROGRESS</h3>
<h3>Cor da barra de progresso do</h3>
teste/otimiza√ß√£o
color
<h3>THEME_COLOR_TESTER_BALANCE</h3>
<h3>Cor da linha de Balan√ßo no</h3>
testador de estrat√©gias
color
<h3>THEME_COLOR_TESTER_EQUITY</h3>
<h3>Cor da linha de Equity no</h3>
testador de estrat√©gias
color
<h3>THEME_COLOR_TESTER_MARGIN</h3>
<h3>Cor do gr√°fico de carregamento</h3>
do dep√≥sito no testador de
estrat√©gias
color
<h3>THEME_COLOR_PROFILER_CALL</h3>
<h3>Cor da linha de c√≥digo com</h3>
chamada no Perfilador
color
<h3>THEME_COLOR_PROFILER_CALLSEL</h3>
<h3>Cor da linha de c√≥digo destacada</h3>
com chamada no Perfilador
color
<h3>THEME_COLOR_PROFILER_LINE</h3>
Cor da linha no log do Perfilador
color
<h3>THEME_COLOR_PROFILER_LINESEL</h3>
Cor da linha destacada no log do
<h3>Perfilador</h3>
color</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
768
<h3>Propriedades do Programa MQL5 em Execu√ß√£o</h3>
Para obter informa√ß√µes sobre o programa mql5 em execu√ß√£o no momento, as constantes
ENUM_MQL_INFO_INTEGER e ENUM_MQL_INFO_STRING s√£o usadas.
<h3>Para a fun√ß√£o MQLInfoInteger</h3>
<h3>ENUM_MQL_INFO_INTEGER</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo</h3>
<h3>MQL_HANDLES_USED</h3>
<h3>N√∫mero atual de</h3>
identificadores de
objetos 
ativos.
<h3>S√£o considerados</h3>
tanto 
objetos
din√¢micos
(criados por meio
de 
new), 
bem
como objetos n√£o
din√¢micos,
vari√°veis
globais/locais ou
membros 
de
classe. 
<h3>Quanto</h3>
mais
identificadores
um 
programa
usa, 
mais
recursos 
ele
consome.
int
<h3>MQL_MEMORY_LIMIT</h3>
<h3>Quantidade</h3>
m√°xima poss√≠vel
de 
mem√≥ria
din√¢mica para o
programa 
<h3>MQL5</h3>
em MB
int
<h3>MQL_MEMORY_USED</h3>
<h3>O</h3>
tamanho 
de
mem√≥ria 
usado
pelo 
programa
<h3>MQL5 em MB</h3>
int
<h3>MQL_PROGRAM_TYPE</h3>
<h3>Tipo do programa</h3>
<h3>MQL5</h3>
<h3>ENUM_PROGRAM_TYPE</h3>
<h3>MQL_DLLS_ALLOWED</h3>
<h3>A permiss√£o para</h3>
usar DLL para o
dado 
programa
executado
bool</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
769
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo</h3>
<h3>MQL_TRADE_ALLOWED</h3>
<h3>A permiss√£o para</h3>
negociar para o
dado 
programa
executado
bool
<h3>MQL_SIGNALS_ALLOWED</h3>
<h3>A permiss√£o para</h3>
modificar 
os
<h3>Sinais</h3>
para 
o
determinado
programa
executado
bool
<h3>MQL_DEBUG</h3>
<h3>O flag, que indica</h3>
o 
modo 
de
depura√ß√£o
bool
<h3>MQL_PROFILER</h3>
<h3>O flag, que indica</h3>
que o programa
est√° operando em
modo de profiling
de c√≥digo
bool
<h3>MQL_TESTER</h3>
<h3>O flag, que indica</h3>
o 
processo 
do
testador
bool
<h3>MQL_FORWARD</h3>
<h3>O flag que indica</h3>
o 
processo 
de
otimiza√ß√£o 
para
frente 
(forward
testing)
bool
<h3>MQL_OPTIMIZATION</h3>
<h3>O flag, que indica</h3>
o 
processo 
de
otimiza√ß√£o
bool
<h3>MQL_VISUAL_MODE</h3>
<h3>O flag, que indica</h3>
o 
processo 
de
testador visual
bool
<h3>MQL_FRAME_MODE</h3>
<h3>O</h3>
sinalizador,
indicando que o
<h3>Expert</h3>
<h3>Advisor</h3>
est√° operando na
coleta 
de
resultado 
no
modo 
de
otimiza√ß√£o 
dos
quadros
bool
<h3>MQL_LICENSE_TYPE</h3>
<h3>Tipo de licen√ßa do</h3>
m√≥dulo 
EX5. 
<h3>A</h3>
licen√ßa refere-se
<h3>ENUM_LICENSE_TYPE</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
770
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo</h3>
ao m√≥dulo EX5, a
partir do qual √©
feita 
uma
solicita√ß√£o
usando
<h3>MQLInfoInteger(M</h3>
<h3>QL_LICENSE_TYP</h3>
E).
<h3>MQL_STARTED_FROM_CONFIG</h3>
<h3>Returns true if</h3>
the script/expert
was 
launched
from the StartUp
section 
of 
the
configuration file.
<h3>This means that</h3>
this script/expert
was registered in
the configuration
file with 
which
the terminal was
launched.
bool
<h3>Para a fun√ß√£o MQLInfoString</h3>
<h3>ENUM_MQL_INFO_STRING</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo</h3>
<h3>MQL_PROGRAM_NAME</h3>
<h3>Nome</h3>
do
programa 
<h3>MQL5</h3>
executado
string
<h3>MQL_PROGRAM_PATH</h3>
<h3>Caminho para o</h3>
dado 
programa
executado
string
Para obter informa√ß√µes sobre o tipo do programa em execu√ß√£o, s√£o utilizados valores de
ENUM_PROGRAM_TYPE.
<h3>ENUM_PROGRAM_TYPE</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>PROGRAM_SCRIPT</h3>
<h3>Script</h3>
<h3>PROGRAM_EXPERT</h3>
<h3>Expert</h3>
<h3>PROGRAM_INDICATOR</h3>
<h3>Indicador</h3>
<h3>PROGRAM_SERVICE</h3>
<h3>Servi√ßo</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
771
<h3>ENUM_LICENSE_TYPE</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>LICENSE_FREE</h3>
<h3>Um vers√£o gratuita ilimitada</h3>
<h3>LICENSE_DEMO</h3>
Um vers√£o trial de um produto pago do Market.
<h3>Funciona somente no Provador de Estrat√©gia</h3>
<h3>LICENSE_FULL</h3>
Uma vers√£o licenciada adquirida permite pelo menos
5 ativa√ß√µes. O vendedor pode aumentar o n√∫mero
permitido de ativa√ß√µes.
<h3>LICENSE_TIME</h3>
Uma vers√£o com termo de licen√ßa limitada
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
   ENUM_PROGRAM_TYPE mql_program=(ENUM_PROGRAM_TYPE)MQLInfoInteger(MQL_PROGRAM_TYPE);
   switch(mql_program)
     {
      case PROGRAM_SCRIPT:
        {
         Print(__FILE__+&quot; is script&quot;);
         break;
        }
      case PROGRAM_EXPERT:
        {
         Print(__FILE__+&quot; is Expert Advisor&quot;);
         break;
        }
      case PROGRAM_INDICATOR:
        {
         Print(__FILE__+&quot; is custom indicator&quot;);
         break;
        }
      default:Print(&quot;MQL5 type value is &quot;,mql_program);
   //---
   Print(&quot;MQLInfoInteger(MQL_MEMORY_LIMIT)=&quot;, MQLInfoInteger(MQL_MEMORY_LIMIT), &quot; MB&quot;)
   Print(&quot;MQLInfoInteger(MQL_MEMORY_USED)=&quot;, MQLInfoInteger(MQL_MEMORY_USED), &quot; MB&quot;);
   Print(&quot;MQLInfoInteger(MQL_HANDLES_USED)=&quot;, MQLInfoInteger(MQL_HANDLES_USED), &quot; hand</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
772
<h3>Propriedades do Ativo</h3>
Para obter as informa√ß√µes atuais do mercado, existem v√°rias fun√ß√µes: SymbolInfoInteger(),
SymbolInfoDouble() e SymbolInfoString(). O primeiro par√¢metro √© o nome do ativo, os valores do
segundo par√¢metro da fun√ß√£o podem ser um dos identificadores ENUM_SYMBOL_INFO_INTEGER,
ENUM_SYMBOL_INFO_DOUBLE e ENUM_SYMBOL_INFO_STRING.
<h3>Para a fun√ß√£o SymbolInfoInteger()</h3>
<h3>ENUM_SYMBOL_INFO_INTEGER</h3>
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo</h3>
<h3>SYMBOL_SUBSCRIPTION_DELAY</h3>
<h3>Indi</h3>
ca
que
os
dad
os
do
s√≠m
bolo
sofr
era
m
atra
so.
<h3>A</h3>
prop
ried
ade
s√≥
pod
e
ser
cons
ulta
da
para
s√≠m
bolo
s
sele
cion
ado
s
em
<h3>Mar</h3>
ket
<h3>Wat</h3>
bool</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
773
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo</h3>
ch
(SY
<h3>MBO</h3>
<h3>L_S</h3>
<h3>ELE</h3>
<h3>CT</h3>
=
true
).
<h3>Um</h3>
erro
ser√°
gera
do
para
s√≠m
bolo
s
n√£o
sele
cion
ado
s
<h3>ERR</h3>
_MA
<h3>RKE</h3>
<h3>T_N</h3>
<h3>OT_</h3>
<h3>SEL</h3>
<h3>ECT</h3>
<h3>ED</h3>
(430
2)
<h3>SYMBOL_SECTOR</h3>
<h3>O</h3>
seto
r da
eco
nom
ia
ao
qual
pert
enc
e o
ativ
o
<h3>ENUM_SYMBOL_SECTOR</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
774
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo</h3>
<h3>SYMBOL_INDUSTRY</h3>
<h3>Tipo</h3>
de
ind√∫
stri
a ou
ram
o da
eco
nom
ia
ao
qual
pert
enc
e o
ativ
o
<h3>ENUM_SYMBOL_INDUSTRY</h3>
<h3>SYMBOL_CUSTOM</h3>
<h3>Indi</h3>
ca
que
o
ativ
o √©
pers
onal
izad
o,
em
outr
as
pala
vras
,
cria
do
artif
icial
men
te
com
bas
e
em
outr
os
s√≠m
bolo
bool</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
775
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo</h3>
s da
jane
la
<h3>Obs</h3>
erva
√ß√£o
de
mer
cad
o
ou/
e
font
es
de
dad
os
exte
rnas
<h3>SYMBOL_BACKGROUND_COLOR</h3>
<h3>Cor</h3>
de
fund
o
que
dest
aca
o
um
s√≠m
bolo
na
<h3>Obs</h3>
erva
√ß√£o
de
mer
cad
o
color
<h3>SYMBOL_CHART_MODE</h3>
<h3>Tipo</h3>
de
pre√ß
o
para
cons
tru√ß
√£o
<h3>ENUM_SYMBOL_CHART_MODE</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
776
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo</h3>
de
barr
as ‚Äì
<h3>Bid</h3>
ou
<h3>Last</h3>
<h3>SYMBOL_EXIST</h3>
<h3>Sina</h3>
l de
que
exis
te
um
s√≠m
bolo
com
o
mes
mo
nom
e
bool
<h3>SYMBOL_SELECT</h3>
<h3>O</h3>
ativ
o
(s√≠m
bolo
) √©
sele
cion
ado
na
jane
la
<h3>Obs</h3>
erva
√ß√£o
de
<h3>Mer</h3>
cad
o
bool
<h3>SYMBOL_VISIBLE</h3>
<h3>Indi</h3>
ca
que
o
s√≠m
bolo
bool</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
777
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo</h3>
sele
cion
ado
√©
exib
ido
na
<h3>Obs</h3>
erva
√ß√£o
de
<h3>Mer</h3>
cad
o.
<h3>Algu</h3>
ns
s√≠m
bolo
s
(nor
mal
men
te,
taxa
s
tran
sver
sais
nec
ess√°
rias
para
o
c√°lc
ulo
de
requ
isito
s de
mar
gem
e
lucr
o na
moe
da</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
778
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo</h3>
dep
√≥sit
o)
s√£o
sele
cion
ado
s
auto
mat
ica
men
te,
mas
,
nest
e
caso
,
n√£o
pod
em
ser
mos
trad
os
na
<h3>Obs</h3>
erva
√ß√£o
de
<h3>Mer</h3>
cad
o.
<h3>Para</h3>
sere
m
exib
idos
,
esse
s
s√≠m
bolo
s
dev
em</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
779
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo</h3>
ser
sele
cion
ado
s
expl
icita
men
te.
<h3>SYMBOL_SESSION_DEALS</h3>
<h3>N√∫m</h3>
ero
de
oper
a√ß√µ
es
(dea
ls)
na
sess
√£o
atua
l
long
<h3>SYMBOL_SESSION_BUY_ORDERS</h3>
<h3>N√∫m</h3>
ero
de
orde
ns
de
<h3>Com</h3>
pra
no
mo
men
to
long
<h3>SYMBOL_SESSION_SELL_ORDERS</h3>
<h3>N√∫m</h3>
ero
de
orde
ns
de
<h3>Ven</h3>
da
no
mo
long</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
780
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo</h3>
men
to
<h3>SYMBOL_VOLUME</h3>
<h3>Volu</h3>
me
da
√∫lti
ma
oper
a√ß√£
o
(dea
l)
long
<h3>SYMBOL_VOLUMEHIGH</h3>
<h3>Volu</h3>
me
di√°r
io
m√°x
imo
long
<h3>SYMBOL_VOLUMELOW</h3>
<h3>Volu</h3>
me
di√°r
io
m√≠ni
mo
long
<h3>SYMBOL_TIME</h3>
<h3>Hor</h3>
a da
√∫lti
ma
cota
√ß√£o
datetime
<h3>SYMBOL_DIGITS</h3>
<h3>D√≠gi</h3>
tos
ap√≥
s
um
pont
o
deci
mal
int
<h3>SYMBOL_SPREAD_FLOAT</h3>
<h3>Indi</h3>
ca√ß√£
o de
um
spre
bool</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
781
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo</h3>
ad
flut
uant
e
<h3>SYMBOL_SPREAD</h3>
<h3>Valo</h3>
r do
spre
ad
em
pont
os
int
<h3>SYMBOL_TICKS_BOOKDEPTH</h3>
<h3>N√∫m</h3>
ero
m√°x
imo
de
solic
ita√ß
√µes
exib
idas
na
<h3>Prof</h3>
undi
dad
e do
<h3>Mer</h3>
cad
o.
<h3>Para</h3>
ativ
os
que
n√£o
tem
fila
de
solic
ita√ß
√µes,
o
valo
r √©
igua
l 
a
int</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
782
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo</h3>
zero
.
<h3>SYMBOL_TRADE_CALC_MODE</h3>
<h3>Mod</h3>
o de
c√°lc
ulo
de
pre√ß
o de
cont
rato
<h3>ENUM_SYMBOL_CALC_MODE</h3>
<h3>SYMBOL_TRADE_MODE</h3>
<h3>Tipo</h3>
de
exe
cu√ß√£
o de
orde
m
<h3>ENUM_SYMBOL_TRADE_MODE</h3>
<h3>SYMBOL_START_TIME</h3>
<h3>Dat</h3>
a do
in√≠ci
o de
neg
ocia
√ß√£o
do
ativ
o
(ger
alm
ente
usa
do
para
futu
ros)
datetime
<h3>SYMBOL_EXPIRATION_TIME</h3>
<h3>Dat</h3>
a do
fim
de
neg
ocia
√ß√£o
do
ativ
datetime</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
783
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo</h3>
o
(ger
alm
ente
usa
do
para
futu
ros)
<h3>SYMBOL_TRADE_STOPS_LEVEL</h3>
<h3>M√≠ni</h3>
ma
dist
√¢nci
a
em
pont
os a
part
ir
do
pre√ß
o de
fech
ame
nto
atua
l
para
colo
car
orde
ns
de
<h3>Stop</h3>
int
<h3>SYMBOL_TRADE_FREEZE_LEVEL</h3>
<h3>Dist</h3>
√¢nci
a
para
con
gela
r
oper
a√ß√µ
es
de
neg
int</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
784
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo</h3>
ocia
√ß√£o
em
pont
os
<h3>SYMBOL_TRADE_EXEMODE</h3>
<h3>Mod</h3>
o de
exe
cu√ß√£
o de
oper
a√ß√£
o
(dea
l)
<h3>ENUM_SYMBOL_TRADE_EXECUTION</h3>
<h3>SYMBOL_SWAP_MODE</h3>
<h3>Mod</h3>
elo
de
c√°lc
ulo
de
<h3>Swa</h3>
p
<h3>ENUM_SYMBOL_SWAP_MODE</h3>
<h3>SYMBOL_SWAP_ROLLOVER3DAYS</h3>
<h3>Dia</h3>
da
sem
ana
para
cobr
ar
rola
gem
de
swa
p de
3
dias
<h3>ENUM_DAY_OF_WEEK</h3>
<h3>SYMBOL_MARGIN_HEDGED_USE_LEG</h3>
<h3>Mod</h3>
o de
c√°lc
ulo
de
mar
gem
de
bool</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
785
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo</h3>
cob
ertu
ra
de
acor
do
com
o
lado
mai
or -
leg -
(Buy
ou
<h3>Sell)</h3>
<h3>SYMBOL_EXPIRATION_MODE</h3>
<h3>Flag</h3>
s de
mod
os
de
expi
ra√ß√£
o de
orde
ns
per
miti
das
int
<h3>SYMBOL_FILLING_MODE</h3>
<h3>Flag</h3>
s de
mod
os
de
pree
nchi
men
to
de
orde
ns
per
miti
das
int
<h3>SYMBOL_ORDER_MODE</h3>
<h3>Flag</h3>
s de
int</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
786
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo</h3>
mod
os
de
pree
nchi
men
to
de
orde
ns
per
miti
das
<h3>SYMBOL_ORDER_GTC_MODE</h3>
<h3>Praz</h3>
o de
vali
dad
e do
<h3>Sto</h3>
pLo
ss e
<h3>Tak</h3>
ePro
fit
das
orde
ns,
se
<h3>SYM</h3>
<h3>BOL</h3>
_EX
<h3>PIR</h3>
<h3>ATI</h3>
<h3>ON_</h3>
<h3>MO</h3>
<h3>DE=</h3>
<h3>SYM</h3>
<h3>BOL</h3>
_EX
<h3>PIR</h3>
<h3>ATI</h3>
<h3>ON_</h3>
<h3>GTC</h3>
(Go
od
till
canc
<h3>ENUM_SYMBOL_ORDER_GTC_MODE</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
787
<h3>Identificador</h3>
<h3>Des</h3>
cri√ß
√£o
<h3>Tipo</h3>
elle
d)
<h3>SYMBOL_OPTION_MODE</h3>
<h3>Tipo</h3>
de
op√ß
√£o
<h3>ENUM_SYMBOL_OPTION_MODE</h3>
<h3>SYMBOL_OPTION_RIGHT</h3>
<h3>Op√ß</h3>
√£o
dire
ita
(Call
/Put
)
<h3>ENUM_SYMBOL_OPTION_MODE</h3>
<h3>Para a fun√ß√£o SymbolInfoDouble()</h3>
<h3>ENUM_SYMBOL_INFO_DOUBLE</h3>
<h3>Identificador</h3>
<h3>Descri√ß</h3>
√£o
<h3>Tipo</h3>
<h3>SYMBOL_BID</h3>
<h3>Pre√ßo</h3>
de
<h3>Venda</h3>
(Bid) 
-
melhor
oferta
de
venda
double
<h3>SYMBOL_BIDHIGH</h3>
<h3>M√°ximo</h3>
<h3>Pre√ßo</h3>
de
<h3>Venda</h3>
do dia
double
<h3>SYMBOL_BIDLOW</h3>
<h3>M√≠nimo</h3>
<h3>Pre√ßo</h3>
de
<h3>Venda</h3>
do dia
double
<h3>SYMBOL_ASK</h3>
<h3>Pre√ßo</h3>
de
<h3>Compra</h3>
(Ask) -
melhor
oferta
double</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
788
<h3>Identificador</h3>
<h3>Descri√ß</h3>
√£o
<h3>Tipo</h3>
de
compra
<h3>SYMBOL_ASKHIGH</h3>
<h3>M√°ximo</h3>
<h3>Pre√ßo</h3>
de
<h3>Compra</h3>
do dia
double
<h3>SYMBOL_ASKLOW</h3>
<h3>M√≠nimo</h3>
<h3>Pre√ßo</h3>
de
<h3>Compra</h3>
do dia
double
<h3>SYMBOL_LAST</h3>
<h3>Pre√ßo</h3>
da
√∫ltimo
opera√ß√£
o (deal)
double
<h3>SYMBOL_LASTHIGH</h3>
<h3>M√°ximo</h3>
dos
pre√ßos
negocia
dos do
dia
double
<h3>SYMBOL_LASTLOW</h3>
<h3>M√≠nimo</h3>
dos
pre√ßos
negocia
dos do
dia
double
<h3>SYMBOL_VOLUME_REAL</h3>
<h3>Volume</h3>
da
√∫ltima
opera√ß√£
o (deal)
double
<h3>SYMBOL_VOLUMEHIGH_REAL</h3>
<h3>Volume</h3>
di√°rio
m√°ximo
double
<h3>SYMBOL_VOLUMELOW_REAL</h3>
<h3>Volume</h3>
di√°rio
m√≠nimo
double
<h3>SYMBOL_OPTION_STRIKE</h3>
<h3>O pre√ßo</h3>
do
strike
double</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
789
<h3>Identificador</h3>
<h3>Descri√ß</h3>
√£o
<h3>Tipo</h3>
de uma
op√ß√£o.
<h3>O pre√ßo</h3>
que um
compra
dor 
de
op√ß√µes
pode
comprar
(numa
op√ß√£o
de
compra)
ou
vender
(numa
op√ß√£o
de
venda)
o ativo
subjace
nte e o
vended
or 
de
op√ß√µes
√©
obrigad
o 
a
vender
ou 
a
comprar
a
quantia
adequa
da 
do
ativo
subjace
nte.
<h3>SYMBOL_POINT</h3>
<h3>Valor de</h3>
um
ponto
do ativo
double
<h3>SYMBOL_TRADE_TICK_VALUE</h3>
<h3>Valor do</h3>
<h3>SYMBOL</h3>
_TRADE
_TICK_V
double</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
790
<h3>Identificador</h3>
<h3>Descri√ß</h3>
√£o
<h3>Tipo</h3>
<h3>ALUE_P</h3>
<h3>ROFIT</h3>
<h3>SYMBOL_TRADE_TICK_VALUE_PROFIT</h3>
<h3>Pre√ßo</h3>
de tick
calculad
o 
para
uma
posi√ß√£o
lucrativ
a
double
<h3>SYMBOL_TRADE_TICK_VALUE_LOSS</h3>
<h3>Pre√ßo</h3>
de tick
calculad
o 
para
um
posi√ß√£o
perdedo
ra
double
<h3>SYMBOL_TRADE_TICK_SIZE</h3>
<h3>M√≠nima</h3>
mudan√ß
a 
de
pre√ßo
double
<h3>SYMBOL_TRADE_CONTRACT_SIZE</h3>
<h3>Tamanh</h3>
o 
do
contrat
o 
de
negocia
√ß√£o
double
<h3>SYMBOL_TRADE_ACCRUED_INTEREST</h3>
<h3>Os</h3>
<h3>Juros</h3>
acumula
doss√£o
uma
parte
dos
juros
dos
t√≠tulos e
√©
calculad
o
proporci
onalme
nte 
ao
n√∫mero
double</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
791
<h3>Identificador</h3>
<h3>Descri√ß</h3>
√£o
<h3>Tipo</h3>
de dias
a partir
da data
de
emiss√£o
do
cupom
ou 
da
data de
pagame
nto 
do
juro
anterior
.
<h3>SYMBOL_TRADE_FACE_VALUE</h3>
<h3>O valor</h3>
nominal
√© 
o
valor
inicial -
de 
um
t√≠tulo -
definido
pelo
emissor
double
<h3>SYMBOL_TRADE_LIQUIDITY_RATE</h3>
<h3>O √≠ndice</h3>
de
liquidez
√© 
a
propor√ß
√£o 
do
valor do
ativo
que
pode
ser
usada
como
garanti
a.
double
<h3>SYMBOL_VOLUME_MIN</h3>
<h3>M√≠nimo</h3>
volume
para
uma
opera√ß√£
o (deal)
double</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
792
<h3>Identificador</h3>
<h3>Descri√ß</h3>
√£o
<h3>Tipo</h3>
<h3>SYMBOL_VOLUME_MAX</h3>
<h3>M√°ximo</h3>
volume
para
uma
opera√ß√£
o (deal)
double
<h3>SYMBOL_VOLUME_STEP</h3>
<h3>M√≠nimo</h3>
passo
de
mudan√ß
a 
de
volume
para
execu√ß√£
o 
de
uma
opera√ß√£
o (deal)
double
<h3>SYMBOL_VOLUME_LIMIT</h3>
<h3>M√°ximo</h3>
volume
agregad
o
permiti
do 
de
uma
posi√ß√£o
aberta
e
ordens
pendent
es 
em
uma
dire√ß√£o
(compra
ou
venda)
para um
ativo.
<h3>Por</h3>
exempl
o, com
a
limita√ß√£
o de 5
lotes,
voc√™
pode
double</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
793
<h3>Identificador</h3>
<h3>Descri√ß</h3>
√£o
<h3>Tipo</h3>
ter uma
posi√ß√£o
compra
da
aberta
com 
o
volume
de 
5
lotes e
colocar
uma
ordem
pendent
e 
de
<h3>Sell</h3>
<h3>Limit</h3>
com 
o
volume
de 
5
lotes.
<h3>Mas</h3>
neste
caso
voc√™
n√£o
pode
colocar
um
ordem
pendent
e 
de
<h3>Buy</h3>
<h3>Limite</h3>
(j√° que
o total
de
volume
em uma
dire√ß√£o
exceder
ia 
o
limite)
ou
colocar
<h3>Sell</h3>
<h3>Limit</h3>
com 
o
volume</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
794
<h3>Identificador</h3>
<h3>Descri√ß</h3>
√£o
<h3>Tipo</h3>
maior
que 
5
lotes.
<h3>SYMBOL_SWAP_LONG</h3>
<h3>Valor de</h3>
swap
compra
do
double
<h3>SYMBOL_SWAP_SHORT</h3>
<h3>Valor de</h3>
swap
vendido
double
<h3>SYMBOL_SWAP_SUNDAY</h3>
<h3>Coeficie</h3>
nte 
de
acumula
√ß√£o de
swaps
(SYMBO
<h3>L_SWAP</h3>
_LONG
ou
<h3>SYMBOL</h3>
_SWAP_
<h3>SHORT)</h3>
ao
transfer
ir uma
posi√ß√£o
de 
um
determi
nado 
-
para
(SUNDA
<h3>Y)</h3>
-
para 
o
pr√≥ximo
.
<h3>Podem-</h3>
se
aplicar
os
seguint
es
valores:
¬∑ 0
‚Äì
n
√£
double</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
795
<h3>Identificador</h3>
<h3>Descri√ß</h3>
√£o
<h3>Tipo</h3>
o
s
√£
o
a
c
u
m
u
l
a
d
o
s
s
w
a
p
s
¬∑ 1
‚Äì
√∫
n
i
c
o
s
w
a
p
a
c
u
m
u
l
a
d
o
¬∑ 3
‚Äì
t
r
i
p
l
o</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
796
<h3>Identificador</h3>
<h3>Descri√ß</h3>
√£o
<h3>Tipo</h3>
s
w
a
p
a
c
u
m
u
l
a
d
o
<h3>SYMBOL_SWAP_MONDAY</h3>
<h3>Coeficie</h3>
nte 
de
acumula
√ß√£o de
swaps
(SYMBO
<h3>L_SWAP</h3>
_LONG
ou
<h3>SYMBOL</h3>
_SWAP_
<h3>SHORT)</h3>
ao
transfer
ir 
a
posi√ß√£o
de
segunda
para
ter√ßa-
feira
double
<h3>SYMBOL_SWAP_TUESDAY</h3>
<h3>Coeficie</h3>
nte 
de
acumula
√ß√£o de
swaps
(SYMBO
<h3>L_SWAP</h3>
_LONG
ou
<h3>SYMBOL</h3>
_SWAP_
<h3>SHORT)</h3>
ao
double</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
797
<h3>Identificador</h3>
<h3>Descri√ß</h3>
√£o
<h3>Tipo</h3>
transfer
ir 
a
posi√ß√£o
de ter√ßa
para
quarta-
feira
<h3>SYMBOL_SWAP_WEDNESDAY</h3>
<h3>Coeficie</h3>
nte 
de
acumula
√ß√£o de
swaps
(SYMBO
<h3>L_SWAP</h3>
_LONG
ou
<h3>SYMBOL</h3>
_SWAP_
<h3>SHORT)</h3>
ao
transfer
ir 
a
posi√ß√£o
de
quarta
para
quinta-
feira
double
<h3>SYMBOL_SWAP_THURSDAY</h3>
<h3>Coeficie</h3>
nte 
de
acumula
√ß√£o de
swaps
(SYMBO
<h3>L_SWAP</h3>
_LONG
ou
<h3>SYMBOL</h3>
_SWAP_
<h3>SHORT)</h3>
ao
transfer
ir 
a
posi√ß√£o
de
quinta
para
double</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
798
<h3>Identificador</h3>
<h3>Descri√ß</h3>
√£o
<h3>Tipo</h3>
sexta-
feira
<h3>SYMBOL_SWAP_FRIDAY</h3>
<h3>Coeficie</h3>
nte 
de
acumula
√ß√£o de
swaps
(SYMBO
<h3>L_SWAP</h3>
_LONG
ou
<h3>SYMBOL</h3>
_SWAP_
<h3>SHORT)</h3>
ao
transfer
ir 
a
posi√ß√£o
de
sexta
para
s√°bado
double
<h3>SYMBOL_SWAP_SATURDAY</h3>
<h3>Coeficie</h3>
nte 
de
acumula
√ß√£o de
swaps
(SYMBO
<h3>L_SWAP</h3>
_LONG
ou
<h3>SYMBOL</h3>
_SWAP_
<h3>SHORT)</h3>
ao
transfer
ir 
a
posi√ß√£o
de
s√°bado
para
doming
o
double
<h3>SYMBOL_MARGIN_INITIAL</h3>
<h3>Margem</h3>
inicial
signific
double</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
799
<h3>Identificador</h3>
<h3>Descri√ß</h3>
√£o
<h3>Tipo</h3>
a 
a
quantia
de
moeda
de
margem
requeri
da para
abrir
uma
posi√ß√£o
com 
o
volume
de 
um
lote. √â
usada
para
verifica
r 
os
ativos
de 
um
cliente
quando
ele 
ou
ele
entra
no
mercad
o.
<h3>A</h3>
fun√ß√£o
<h3>SymbolI</h3>
nfoMarg
inRate()
fornece
informa
√ß√µes
sobre o
valor da
margem
cobrada
,
depend
endo do
tipo 
e
dire√ß√£o</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
800
<h3>Identificador</h3>
<h3>Descri√ß</h3>
√£o
<h3>Tipo</h3>
da
ordem.
<h3>SYMBOL_MARGIN_MAINTENANCE</h3>
<h3>A</h3>
margem
de
manute
n√ß√£o.
<h3>Se</h3>
for
definida
, 
ele
represe
nta 
a
quantia
de
margem
na
moeda
de
margem
do ativo
cobrada
de 
um
lote. √â
usada
parar
verifica
r 
os
ativos
de 
um
cliente
quando
o
estado
da
conta
dele/del
a muda.
<h3>Se</h3>
a
margem
de
manute
n√ß√£o √©
igual a
0, 
a
margem
inicial √©
usada.
double</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
801
<h3>Identificador</h3>
<h3>Descri√ß</h3>
√£o
<h3>Tipo</h3>
<h3>A</h3>
fun√ß√£o
<h3>SymbolI</h3>
nfoMarg
inRate()
fornece
informa
√ß√µes
sobre o
valor da
margem
cobrada
,
depend
endo do
tipo 
e
dire√ß√£o
da
ordem.
<h3>SYMBOL_SESSION_VOLUME</h3>
<h3>Volume</h3>
resumo
de
opera√ß√µ
es 
da
sess√£o
atual
double
<h3>SYMBOL_SESSION_TURNOVER</h3>
<h3>Rotativi</h3>
dade
resumo
da
sess√£o
atual
double
<h3>SYMBOL_SESSION_INTEREST</h3>
<h3>Juros</h3>
de
abertur
a
resumo
double
<h3>SYMBOL_SESSION_BUY_ORDERS_VOLUME</h3>
<h3>Volume</h3>
atual de
ordens
de
<h3>Compra</h3>
double
<h3>SYMBOL_SESSION_SELL_ORDERS_VOLUME</h3>
<h3>Volume</h3>
atual de
ordens
double</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
802
<h3>Identificador</h3>
<h3>Descri√ß</h3>
√£o
<h3>Tipo</h3>
de
<h3>Venda</h3>
<h3>SYMBOL_SESSION_OPEN</h3>
<h3>Pre√ßo</h3>
de
abertur
a 
da
sess√£o
atual
double
<h3>SYMBOL_SESSION_CLOSE</h3>
<h3>Pre√ßo</h3>
de
fecham
ento da
sess√£o
atual
double
<h3>SYMBOL_SESSION_AW</h3>
<h3>Pre√ßo</h3>
m√©dio
pondera
do 
da
sess√£o
atual
double
<h3>SYMBOL_SESSION_PRICE_SETTLEMENT</h3>
<h3>Pre√ßo</h3>
de
liquida√ß
√£o 
da
sess√£o
atual
double
<h3>SYMBOL_SESSION_PRICE_LIMIT_MIN</h3>
<h3>M√≠nimo</h3>
pre√ßo
da
sess√£o
atual
double
<h3>SYMBOL_SESSION_PRICE_LIMIT_MAX</h3>
<h3>M√°ximo</h3>
pre√ßo
da
sess√£o
atual
double
<h3>SYMBOL_MARGIN_HEDGED</h3>
<h3>Tamanh</h3>
o 
do
contrat
o 
ou
margem
para um
lote de
posi√ß√µe
double</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
803
<h3>Identificador</h3>
<h3>Descri√ß</h3>
√£o
<h3>Tipo</h3>
s
sobrepo
stas
(posi√ß√µ
es com
v√°rias
dire√ß√µe
s
segundo
um
mesmo
s√≠mbolo
). 
<h3>H√°</h3>
duas
maneira
s 
de
calcular
a
margem
dessas
posi√ß√µe
s. 
<h3>O</h3>
m√©todo
de
c√°lculo
√©
determi
nado
pela
corretor
a.
<h3>C√°lculo</h3>
b√°sico:
¬∑ Se,
para
o
instru
ment
o,
tiver
sido
estab
elecid
a
uma
marg
em</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
804
<h3>Identificador</h3>
<h3>Descri√ß</h3>
√£o
<h3>Tipo</h3>
inicial
(SYM
<h3>BOL_</h3>
<h3>MARG</h3>
<h3>IN_INI</h3>
<h3>TIAL)</h3>
,
ent√£o
, 
a
marg
em
de
cober
tura √©
indica
da
como
valor
absol
uto
(em
dinhe
iro).
¬∑ Se
n√£o
se
tiver
estab
elecid
o
uma
marg
em
inicial
(igual
a 0),
ent√£o
, 
no
camp
o
<h3>SYMB</h3>
<h3>OL_M</h3>
<h3>ARGI</h3>
<h3>N_HE</h3>
<h3>DGED</h3>
indica
-se o
tama</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
805
<h3>Identificador</h3>
<h3>Descri√ß</h3>
√£o
<h3>Tipo</h3>
nho
do
contr
ato
que
ser√°
usado
no
c√°lcul
o da
marg
em
segun
do a
f√≥rmu
la
corre
spond
ente
ao
tipo
de
instru
ment
o de
negoc
ia√ß√£o
(SYM
<h3>BOL_</h3>
<h3>TRAD</h3>
<h3>E_CA</h3>
<h3>LC_M</h3>
ODE).
<h3>C√°lculo</h3>
pela
maior
posi√ß√£o
:
¬∑ O
valor
do
<h3>SYMB</h3>
<h3>OL_M</h3>
<h3>ARGI</h3>
<h3>N_HE</h3>
<h3>DGED</h3>
n√£o √©</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
806
<h3>Identificador</h3>
<h3>Descri√ß</h3>
√£o
<h3>Tipo</h3>
tido
em
conta
.
¬∑ Calcul
a-se
o
volum
e de
todas
as
posi√ß
√µes
tanto
curta
s
como
longa
s
segun
do o
instru
ment
o.
¬∑ Para
cada
lado
calcul
a-se
o
pre√ßo
m√©di
o
ponde
rado
tanto
de
abert
ura,
como
de
conve
rs√£o
para
a
moed
a do</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
807
<h3>Identificador</h3>
<h3>Descri√ß</h3>
√£o
<h3>Tipo</h3>
dep√≥s
ito.
¬∑  
<h3>A</h3>
segui
r,
segun
do as
f√≥rmu
las
corre
spond
entes
ao
tipo
de
instru
ment
o de
negoc
ia√ß√£o
(SYM
<h3>BOL_</h3>
<h3>TRAD</h3>
<h3>E_CA</h3>
<h3>LC_M</h3>
<h3>ODE),</h3>
calcul
a-se
a
marg
em
para
o lado
curto
e
longo
.
¬∑ Como
valor
final
usa-
se 
o
maior
.
<h3>SYMBOL_PRICE_CHANGE</h3>
<h3>Altera√ß√£</h3>
o 
do
pre√ßo
atual
double</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
808
<h3>Identificador</h3>
<h3>Descri√ß</h3>
√£o
<h3>Tipo</h3>
em
rela√ß√£o
ao final
do 
dia
anterior
,
express
o 
em
porcent
agem.
<h3>SYMBOL_PRICE_VOLATILITY</h3>
<h3>Volatilid</h3>
ade
percent
ual
double
<h3>SYMBOL_PRICE_THEORETICAL</h3>
<h3>Pre√ßo</h3>
te√≥rico
da
op√ß√£o
double
<h3>SYMBOL_PRICE_DELTA</h3>
<h3>Delta da</h3>
op√ß√£o/g
arantia.
<h3>Mostra</h3>
quanto
o pre√ßo
da
op√ß√£o
muda
em
unidade
s
quando
o pre√ßo
do ativo
subjace
nte
mudar 1
unidade
double
<h3>SYMBOL_PRICE_THETA</h3>
<h3>Teta da</h3>
op√ß√£o/g
arantia.
<h3>O</h3>
n√∫mero
de
pontos
que 
o
pre√ßo
double</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
809
<h3>Identificador</h3>
<h3>Descri√ß</h3>
√£o
<h3>Tipo</h3>
da
op√ß√£o
perder√°
cada
dia
devido
a
deterior
a√ß√£o
tempor
√°ria, ou
seja,
quando
a 
data
de
vencim
ento se
aproxim
a
<h3>SYMBOL_PRICE_GAMMA</h3>
<h3>Gama</h3>
da
op√ß√£o/g
arantia.
<h3>Mostra</h3>
a 
taxa
de
altera√ß√£
o 
de
delta,
isto √©,
exibe
com
que
rapidez
ou
lentid√£o
muda o
pr√™mio
da
op√ß√£o
double
<h3>SYMBOL_PRICE_VEGA</h3>
<h3>Vega da</h3>
op√ß√£o/g
arantia.
<h3>Mostra</h3>
o
n√∫mero
de
double</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
810
<h3>Identificador</h3>
<h3>Descri√ß</h3>
√£o
<h3>Tipo</h3>
pontos
que
mudar√°
o pre√ßo
da
op√ß√£o
quando
a
volatilid
ade
mudar
1%
<h3>SYMBOL_PRICE_RHO</h3>
<h3>R√¥</h3>
da
op√ß√£o/g
arantia.
<h3>Reflete</h3>
a
sensibili
dade do
pre√ßo
te√≥rico
da
op√ß√£o a
varia√ß√µ
es 
de
1% 
da
taxa de
juros
double
<h3>SYMBOL_PRICE_OMEGA</h3>
<h3>Omega</h3>
da
op√ß√£o/g
arantia.
<h3>A</h3>
elastici
dade da
op√ß√£o √©
a
varia√ß√£
o
percent
ual 
no
pre√ßo
da
op√ß√£o
em
rela√ß√£o
√†
double</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
811
<h3>Identificador</h3>
<h3>Descri√ß</h3>
√£o
<h3>Tipo</h3>
varia√ß√£
o
percent
ual 
no
pre√ßo
do ativo
subjace
nte
<h3>SYMBOL_PRICE_SENSITIVITY</h3>
<h3>Sensibil</h3>
idade
da
op√ß√£o/g
arantia.
<h3>Mostra</h3>
quantos
pontos
deve
mudar o
pre√ßo
do ativo
subjace
nte 
da
op√ß√£o
para
que 
o
pre√ßo
da
op√ß√£o
mude
um
ponto
double
<h3>Para a fun√ß√£o SymbolInfoString()</h3>
<h3>ENUM_SYMBOL_INFO_STRING</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo</h3>
<h3>SYMBOL_BASIS</h3>
<h3>O</h3>
ativo
subjacent
e de um
derivado
string
<h3>SYMBOL_CATEGORY</h3>
<h3>Nome da</h3>
categoria
ou 
setor
ao 
qual
pertence
o ativo
string</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
812
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo</h3>
<h3>SYMBOL_COUNTRY</h3>
<h3>Pa√≠s para</h3>
o 
qual
pertence
o
instrumen
to
financeiro
string
<h3>SYMBOL_SECTOR_NAME</h3>
<h3>Setor</h3>
da
economia
ao 
qual
pertence
o
instrumen
to
financeiro
string
<h3>SYMBOL_INDUSTRY_NAME</h3>
<h3>Ramo da</h3>
economia
ou tipo de
ind√∫stria
ao 
qual
pertence
o
instrumen
to
financeiro
string
<h3>SYMBOL_CURRENCY_BASE</h3>
<h3>Moeda</h3>
base 
de
um ativo
string
<h3>SYMBOL_CURRENCY_PROFIT</h3>
<h3>Moeda de</h3>
lucro
string
<h3>SYMBOL_CURRENCY_MARGIN</h3>
<h3>Moeda de</h3>
margem
string
<h3>SYMBOL_BANK</h3>
<h3>Fornecedo</h3>
r 
da
cota√ß√£o
atual
string
<h3>SYMBOL_DESCRIPTION</h3>
<h3>Descri√ß√£o</h3>
do ativo
string
<h3>SYMBOL_EXCHANGE</h3>
<h3>Nome da</h3>
bolsa 
de
valores ou
da
plataform
a 
de
string</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
813
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo</h3>
negocia√ß√£
o em que
√©
negociado
o ativo
<h3>SYMBOL_FORMULA</h3>
<h3>F√≥rmula</h3>
para
construir
o pre√ßo de
um
s√≠mbolo
personaliz
ado. Se o
nome 
do
instrumen
to
financeiro
inclu√≠do
na
f√≥rmula
come√ßar
com 
um
d√≠gito ou
contiver
um
caractere
especial
(&quot;&quot;, 
&quot;.&quot;,
&quot;-&quot;, 
&quot;&amp;&quot;,
&quot;#&quot;, etc.),
o 
nome
desse
instrumen
to dever√°
ser
colocado
entre
aspas.
¬∑ S
√≠
m
b
o
l
o
s
i
n
string</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
814
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo</h3>
t
√©
t
i
c
o
:
&quot;
@
<h3>E</h3>
<h3>S</h3>
<h3>U</h3>
1
9
&quot;
/
<h3>E</h3>
<h3>U</h3>
<h3>R</h3>
<h3>C</h3>
<h3>A</h3>
<h3>D</h3>
¬∑ S
p
r
e
a
d
d
e
c
a
l
e
n
d
√°
r
i
o
:
&quot;
<h3>S</h3>
i
-
9
.
1
3</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
815
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo</h3>
&quot;
-
&quot;
<h3>S</h3>
i
-
6
.
1
3
&quot;
¬∑ √ç
n
d
i
c
e
e
u
r
o
:
3
4
.
3
8
8
0
5
7
2
6
*
p
o
w
(
<h3>E</h3>
<h3>U</h3>
<h3>R</h3>
<h3>U</h3>
<h3>S</h3>
<h3>D</h3>
,
0
.
3
1</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
816
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo</h3>
5
5
)
*
p
o
w
(
<h3>E</h3>
<h3>U</h3>
<h3>R</h3>
<h3>G</h3>
<h3>B</h3>
<h3>P</h3>
,
0
.
3
0
5
6
)
*
p
o
w
(
<h3>E</h3>
<h3>U</h3>
<h3>R</h3>
<h3>J</h3>
<h3>P</h3>
<h3>Y</h3>
,
0
.
1
8
9
1
)
*
p
o
w
(
<h3>E</h3>
<h3>U</h3>
<h3>R</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
817
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo</h3>
<h3>C</h3>
<h3>H</h3>
<h3>F</h3>
,
0
.
1
1
1
3
)
*
p
o
w
(
<h3>E</h3>
<h3>U</h3>
<h3>R</h3>
<h3>S</h3>
<h3>E</h3>
<h3>K</h3>
,
0
.
0
7
8
5
)
<h3>SYMBOL_ISIN</h3>
<h3>O</h3>
nome
de 
um
ativo 
no
sistema
<h3>ISIN</h3>
(Internati
onal
<h3>Securities</h3>
<h3>Identificat</h3>
ion
Number).
<h3>O</h3>
<h3>Internatio</h3>
nal
<h3>Securities</h3>
<h3>Identificat</h3>
ion
<h3>Number √©</h3>
string</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
818
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo</h3>
um c√≥digo
de 
12
d√≠gitos
alfanum√©r
ico 
que
identifica
de forma
√∫nica um
ativo
financeiro
. 
<h3>A</h3>
presen√ßa
desta
proprieda
de 
de
ativo 
√©
determina
da no lado
do
servidor
de
negocia√ß√£
o.
<h3>SYMBOL_PAGE</h3>
<h3>Endere√ßo</h3>
de p√°gina
com
informa√ß√µ
es sobre o
s√≠mbolo.
<h3>Esse</h3>
endere√ßo
ser√°
mostrado
como um
refer√™ncia
durante a
visualiza√ß
√£o 
de
proprieda
des 
do
s√≠mbolo
no
terminal
string
<h3>SYMBOL_PATH</h3>
<h3>Caminho</h3>
da √°rvore
de ativos
string</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
819
O gr√°fico de pre√ßo segundo o s√≠mbolo pode ser constru√≠do com base no pre√ßo Bid ou Last. A maneira
como s√£o geradas e exibidas as barras - no terminal - depende da escolha do pre√ßo para construir
gr√°ficos. Poss√≠veis valores da propriedade SYMBOL_CHART_MODE s√£o dadas na enumera√ß√£o
<h3>ENUM_SYMBOL_CHART_MODE</h3>
<h3>ENUM_SYMBOL_CHART_MODE</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>SYMBOL_CHART_MODE_BID</h3>
Barras s√£o constru√≠das segundo o pre√ßo Bid
<h3>SYMBOL_CHART_MODE_LAST</h3>
Barras s√£o constru√≠das segundo o pre√ßo Last
Para cada ativo v√°rios modos de expira√ß√£o de ordens pendentes podem ser especificados. Uma flag √©
associado a cada modo. Flags pode ser combinados usando a opera√ß√£o de  OR l√≥gico (|), por exemplo,
SYMBOL_EXPIRATION_GTC|SYMBOL_EXPIRATION_SPECIFIED. A fim de verificar se um certo modo √©
permitido para um ativo, o resultado doAND(&amp;)deve ser comparado ao flag do modo.
Se o flag SYMBOL_EXPIRATION_SPECIFIED for especificado para um ativo, ent√£o ao enviar uma ordem
pendente, voc√™ pode especificar at√© que momento esta ordem pendente √© v√°lida.
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>Descri√ß√£o</h3>
<h3>SYMBOL_EXPIRATION_GTC</h3>
1
<h3>A ordem √© v√°lida durante um</h3>
per√≠odo de tempo ilimitado, at√©
que 
ela 
seja 
explicitamente
cancelada
<h3>SYMBOL_EXPIRATION_DAY</h3>
2
A ordem √© v√°lida at√© o fim do dia
<h3>SYMBOL_EXPIRATION_SPECIFIED</h3>
4
<h3>A hora de expira√ß√£o √© especificada</h3>
na ordem
<h3>SYMBOL_EXPIRATION_SPECIFIED_DAY</h3>
8
<h3>A data de expira√ß√£o √© especificada</h3>
na ordem
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Verifica se um modo de expira√ß√£o especifico √© permitido¬†         |
//+------------------------------------------------------------------+
bool IsExpirationTypeAllowed(string symbol,int exp_type)
  {
//--- Obt√©m o valor da propriedade que descreve os modos de expira√ß√£o permitidos
   int expiration=(int)SymbolInfoInteger(symbol,SYMBOL_EXPIRATION_MODE);
//--- Retorna true, se o modo exp_type √© permitido
   return((expiration&amp;exp_type)==exp_type);
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
820
Se a propriedade SYMBOL_EXPIRATION_MODE tem o valor SYMBOL_EXPIRATION_GTC (ordem v√°lida
at√© ser cancelada), a validade das ordens pendentes e os n√≠veis colocados StopLoss/TakeProfit s√£o
definidos adicionalmente usando a enumera√ß√£o ENUM_SYMBOL_ORDER_GTC_MODE.
<h3>ENUM_SYMBOL_ORDER_GTC_MODE</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>SYMBOL_ORDERS_GTC</h3>
Ordens pendentes e n√≠veis Stop Loss/Take Profit
s√£o validas de maneira ilimitada no tempo at√© a
cancela√ß√£o explicita
<h3>SYMBOL_ORDERS_DAILY</h3>
As ordens s√£o v√°lidas apenas dentro de um √∫nico
dia de negocia√ß√£o. Ap√≥s a conclus√£o, todos os
n√≠veis de StopLoss e TakeProfit s√£o removidos,
bem como ordens pendentes s√£o exclu√≠das
<h3>SYMBOL_ORDERS_DAILY_EXCLUDING_STOPS</h3>
Ao mudar o dia de negocia√ß√£o s√£o exclu√≠das
apenas as ordens pendentes, enquanto os n√≠veis
StopLoss e TakeProfit s√£o salvos.
Ao enviar uma ordem, voc√™ pode especificar a pol√≠tica de preenchimento do volume declarado na
ordem de negocia√ß√£o. As op√ß√µes permitidas de execu√ß√£o de ordem por volume para cada ativo s√£o
mostradas na tabela. Para cada ativo, podem ser definidos v√°rios modos por meio de uma combina√ß√£o
de flags. A combina√ß√£o de flags √© expressa pela opera√ß√£o l√≥gica OU (|), por exemplo,
SYMBOL_FILLING_FOK|SYMBOL_FILLING_IOC. Para verificar a resolu√ß√£o de um modo espec√≠fico para
um ativo, voc√™ precisa comparar o resultado de E (&amp;) com o flag de modo - exemplo.
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
<h3>Tudo/Nada</h3>
<h3>SYMBOL_FILLING_FOK</h3>
1
<h3>A</h3>
o
r
d
e
m
p
o
d
e
s
e
r</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
821
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
e
x
e
c
u
t
a
d
a
a
p
e
n
a
s
c
o
m
o
v
o
l
u
m
e
e
s
p
e
c
if
i
c
a
d
o
.
<h3>S</h3>
e
n</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
822
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
√£
o
h
o
u
v
e
r
v
o
l
u
m
e
d
o
a
ti
v
o
fi
n
a
n
c
e
ir
o
n
o
m
e
r
c
a
d
o
n
√£
o
f</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
823
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
o
r
s
u
fi
c
i
e
n
t
e
n
o
m
o
m
e
n
t
o
,
a
o
r
d
e
m
n
√£
o
s
e
r
√°
e
x
e
c
u
t
a</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
824
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
d
a
.
<h3>O</h3>
v
o
l
u
m
e
n
e
c
e
s
s
√°
ri
o
p
o
d
e
s
e
r
c
o
m
p
o
s
t
o
p
o
r
d
i
v
e</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
825
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
r
s
a
s
o
f
e
r
t
a
s
a
t
u
a
l
m
e
n
t
e
d
i
s
p
o
n
√≠
v
e
i
s
n
o
m
e
r
c
a
d</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
826
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
o
.
<h3>C</h3>
o
m
e
s
t
a
p
o
l√≠
ti
c
a
,
a
o
e
n
v
i
a
r
u
m
a
o
r
d
e
m
,
v
o
c
√™
d
e
v</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
827
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
e
e
s
p
e
c
if
i
c
a
r
o
ti
p
o
d
e
p
r
e
e
n
c
h
i
m
e
n
t
o
<h3>O</h3>
<h3>R</h3>
<h3>D</h3>
<h3>E</h3>
<h3>R</h3>
_
<h3>F</h3>
<h3>I</h3>
<h3>L</h3>
<h3>L</h3>
<h3>I</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
828
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
<h3>N</h3>
<h3>G</h3>
_
<h3>F</h3>
<h3>O</h3>
.
<h3>A</h3>
p
o
s
s
i
b
i
l
i
d
a
d
e
d
e
u
s
a
r
o
r
d
e
n
s
<h3>F</h3>
<h3>O</h3>
<h3>K</h3>
√©
d
e
t
e</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
829
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
r
m
i
n
a
d
a
n
o
s
e
r
v
i
d
o
r
d
e
n
e
g
o
c
i
a
√ß
√£
o
.
<h3>Tudo/Parcial</h3>
<h3>SYMBOL_FILLING_IOC</h3>
2
<h3>O</h3>
t
r
a
d
e
r
a
c
e
it</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
830
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
a
e
x
e
c
u
t
a
r
a
t
r
a
n
s
a
√ß
√£
o
c
o
m
o
v
o
l
u
m
e
m
√°
x
i
m
o
d
i
s
p
o
n</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
831
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
√≠
v
e
l
n
o
m
e
r
c
a
d
o
,
d
e
n
t
r
o
d
o
s
li
m
it
e
s
e
s
p
e
c
if
i
c
a
d
o
s
n</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
832
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
a
o
r
d
e
m
.
<h3>S</h3>
e
a
e
x
e
c
u
√ß
√£
o
c
o
m
p
l
e
t
a
n
√£
o
f
o
r
p
o
s
s
√≠
v
e
l,
a</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
833
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
o
r
d
e
m
s
e
r
√°
e
x
e
c
u
t
a
d
a
c
o
m
o
v
o
l
u
m
e
d
i
s
p
o
n
√≠
v
e
l,
e
o
v</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
834
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
o
l
u
m
e
n
√£
o
e
x
e
c
u
t
a
d
o
d
a
o
r
d
e
m
s
e
r
√°
c
a
n
c
e
l
a
d
o
.
<h3>C</h3>
o</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
835
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
m
e
s
t
a
p
o
l√≠
ti
c
a
,
a
o
e
n
v
i
a
r
u
m
a
o
r
d
e
m
,
v
o
c
√™
d
e
v
e
e
s
p
e</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
836
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
c
if
i
c
a
r
o
ti
p
o
d
e
p
r
e
e
n
c
h
i
m
e
n
t
o
<h3>O</h3>
<h3>R</h3>
<h3>D</h3>
<h3>E</h3>
<h3>R</h3>
_
<h3>F</h3>
<h3>I</h3>
<h3>L</h3>
<h3>L</h3>
<h3>I</h3>
<h3>N</h3>
<h3>G</h3>
_
<h3>I</h3>
<h3>O</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
837
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
<h3>C</h3>
.
<h3>A</h3>
p
o
s
s
i
b
il
i
d
a
d
e
d
e
u
s
a
r
o
r
d
e
n
s
<h3>I</h3>
<h3>O</h3>
<h3>C</h3>
√©
d
e
t
e
r
m
i
n
a</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
838
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
d
a
n
o
s
e
r
v
i
d
o
r
d
e
n
e
g
o
c
i
a
√ß
√£
o
.
<h3>Passiva</h3>
<h3>SYMBOL_FILLING_BOC</h3>
4
<h3>A</h3>
p
o
l
√≠
t
i
c
a
<h3>B</h3>
o
<h3>C</h3>
(
<h3>B</h3>
o
o</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
839
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
k
-
o
r
-
<h3>C</h3>
a
n
c
e
l
)
i
m
p
l
i
c
a
q
u
e
o
p
e
d
i
d
o
s
√≥
p
o
d
e
s
e
r
c
o
l</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
840
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
o
c
a
d
o
n
o
l
i
v
r
o
d
e
o
f
e
r
t
a
s
e
n
√£
o
p
o
d
e
s
e
r
e
x
e
c
u
t
a
d
o</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
841
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
i
m
e
d
i
a
t
a
m
e
n
t
e
.
<h3>S</h3>
e
a
o
r
d
e
m
p
o
d
e
s
e
r
e
x
e
c
u
t
a
d
a
i
m</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
842
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
e
d
i
a
t
a
m
e
n
t
e
q
u
a
n
d
o
c
o
l
o
c
a
d
a
,
e
l
a
√©
r
e
t
i
r
a
d
a
.</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
843
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
<h3>N</h3>
a
v
e
r
d
a
d
e
,
e
s
t
a
p
o
l
√≠
t
i
c
a
d
e
e
x
e
c
u
√ß
√£
o
s
√≥
p
o
d
e
s
e
r</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
844
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
e
s
p
e
c
i
f
i
c
a
d
a
q
u
a
n
d
o
o
p
r
e
√ß
o
d
a
o
r
d
e
m
c
o
l
o
c
a
d
a
f
o</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
845
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
r
p
i
o
r
d
o
q
u
e
o
m
e
r
c
a
d
o
a
t
u
a
l
.
<h3>A</h3>
s
o
r
d
e
n
s
<h3>B</h3>
<h3>O</h3>
<h3>C</h3>
s
√£
o
u
t
i</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
846
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
l
i
z
a
d
a
s
p
a
r
a
n
e
g
o
c
i
a
√ß
√£
o
p
a
s
s
i
v
a
,
g
a
r
a
n
t
i
n
d
o
q
u</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
847
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
e
a
o
r
d
e
m
n
√£
o
s
e
j
a
e
x
e
c
u
t
a
d
a
i
m
e
d
i
a
t
a
m
e
n
t
e
a
p
√≥
s
a</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
848
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
c
o
l
o
c
a
√ß
√£
o
,
e
q
u
e
n
√£
o
a
f
e
t
e
a
l
i
q
u
i
d
e
z
a
t
u
a
l
.
<h3>E</h3>
l
a</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
849
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
√©
s
u
p
o
r
t
a
d
a
s
o
m
e
n
t
e
p
a
r
a
o
r
d
e
n
s
l
i
m
i
t
e
e
s
t
o
p
-
l
i</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
850
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
m
i
t
,
o
u
s
e
j
a
,
s
e
o
s
i
n
a
l
i
z
a
d
o
r
<h3>S</h3>
<h3>Y</h3>
<h3>M</h3>
<h3>B</h3>
<h3>O</h3>
<h3>L</h3>
_
<h3>O</h3>
<h3>R</h3>
<h3>D</h3>
<h3>E</h3>
<h3>R</h3>
_
<h3>M</h3>
<h3>O</h3>
<h3>D</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
851
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
<h3>E</h3>
c
o
n
t
√©
m
v
a
l
o
r
e
s
<h3>S</h3>
<h3>Y</h3>
<h3>M</h3>
<h3>B</h3>
<h3>O</h3>
<h3>L</h3>
_
<h3>O</h3>
<h3>R</h3>
<h3>D</h3>
<h3>E</h3>
<h3>R</h3>
_
<h3>L</h3>
<h3>I</h3>
<h3>M</h3>
<h3>I</h3>
<h3>T</h3>
o
/
o
u
<h3>S</h3>
<h3>Y</h3>
<h3>M</h3>
<h3>B</h3>
<h3>O</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
852
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
<h3>L</h3>
_
<h3>O</h3>
<h3>R</h3>
<h3>D</h3>
<h3>E</h3>
<h3>R</h3>
_
<h3>S</h3>
<h3>T</h3>
<h3>O</h3>
<h3>P</h3>
_
<h3>L</h3>
<h3>I</h3>
<h3>M</h3>
<h3>I</h3>
<h3>T</h3>
.
<h3>Retornar</h3>
<h3>Sem identificador</h3>
<h3>E</h3>
m
c
a
s
o
d
e
e
x
e
c
u
√ß
√£
o
p
a
r
c
i
a</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
853
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
l,
u
m
a
o
r
d
e
m
a
m
e
r
c
a
d
o
o
u
li
m
it
e
c
o
m
v
o
l
u
m
e
r
e
s
i
d
u
a
l
c</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
854
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
o
n
ti
n
u
a
e
m
v
i
g
o
r
,
e
m
v
e
z
d
e
s
e
r
r
e
m
o
v
i
d
a
.
<h3>C</h3>
o
m
e
s
t
a</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
855
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
p
o
l√≠
ti
c
a
,
a
o
e
n
v
i
a
r
u
m
a
o
r
d
e
m
,
v
o
c
√™
d
e
v
e
e
s
p
e
c
if
i
c
a</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
856
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
r
o
ti
p
o
d
e
p
r
e
e
n
c
h
i
m
e
n
t
o
<h3>O</h3>
<h3>R</h3>
<h3>D</h3>
<h3>E</h3>
<h3>R</h3>
_
<h3>F</h3>
<h3>I</h3>
<h3>L</h3>
<h3>L</h3>
<h3>I</h3>
<h3>N</h3>
<h3>G</h3>
_
<h3>R</h3>
<h3>E</h3>
<h3>T</h3>
<h3>U</h3>
<h3>R</h3>
<h3>N</h3>
.</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
857
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
<h3>O</h3>
r
d
e
n
s
<h3>R</h3>
e
t
u
r
n
n
√£
o
s
√£
o
p
e
r
m
i
t
i
d
a
s
n
o
m
o
d
o
<h3>M</h3>
a
r
k
e
t</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
858
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
<h3>E</h3>
x
e
c
u
t
i
o
n
(
e
x
e
c
u
√ß
√£
o
d
e
o
r
d
e
n
s
a
m
e
r
c
a
d
o
-
<h3>S</h3>
<h3>Y</h3>
<h3>M</h3>
<h3>B</h3>
<h3>O</h3>
<h3>L</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
859
<h3>Pol√≠tica de preenchimento</h3>
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>D</h3>
e
s
c
r
i
√ß
√£
o
_
<h3>T</h3>
<h3>R</h3>
<h3>A</h3>
<h3>D</h3>
<h3>E</h3>
_
<h3>E</h3>
<h3>X</h3>
<h3>E</h3>
<h3>C</h3>
<h3>U</h3>
<h3>T</h3>
<h3>I</h3>
<h3>O</h3>
<h3>N</h3>
_
<h3>M</h3>
<h3>A</h3>
<h3>R</h3>
<h3>K</h3>
<h3>E</h3>
<h3>T</h3>
)
.
Ao enviar a ordem de negocia√ß√£o usando a fun√ß√£o OrderSend(), a devida pol√≠tica de execu√ß√£o quanto
ao volume pode ser definida no campo type_filling na estrutura especial MqlTradeRequest, com
valores v√°lidos da enumera√ß√£o ENUM_ORDER_TYPE_FILLING. Se o tipo de preenchimento n√£o for
especificado, ORDER_FILLING_RETURN ser√° automaticamente substitu√≠do na ordem de negocia√ß√£o.
Vale a pena ressaltar que o tipo de preenchimento ORDER_FILLING_RETURN √© permitido para qualquer
modo de execu√ß√£o, exceto para o modo &quot;Execu√ß√£o a mercado&quot; (SYMBOL_TRADE_EXECUTION_MARKET).
Ao enviar uma ordem de negocia√ß√£o para ser executada no momento atual (time in force), √©
necess√°rio ter em conta que nos mercados financeiros n√£o existe garantia de que num dado momento
para dado ativo financeiro todo o volume solicitado estar√° dispon√≠vel ao pre√ßo pretendido. √â por esse
motivo que a realiza√ß√£o de opera√ß√µes de negocia√ß√£o em tempo real √© regulada pelos modos de
execu√ß√£o com base no pre√ßo e no volume. Os modos, ou seja, as pol√≠ticas de execu√ß√£o, definem as
regras para os casos em que o pre√ßo mudou ou o volume solicitado n√£o pode ser totalmente cumprido
no momento.</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
860
<h3>Modo de execu√ß√£o</h3>
<h3>Descri√ß</h3>
√£o
<h3>Valor em ENUM_SYMBOL_TRADE_EXECUTION</h3>
<h3>Modo de execu√ß√£o</h3>
(Request Execution)
<h3>Execu√ß</h3>
√£o 
da
ordem
de
mercad
o 
ao
pre√ßo
previa
mente
recebid
o 
da
correto
ra.
<h3>Antes</h3>
de uma
ordem
de
mercad
o 
ser
enviad
a, s√£o
solicita
dos 
√†
correto
ra 
os
pre√ßos
pelos
qual
ela
ser√°
execut
ada.
<h3>Ap√≥s</h3>
serem
recebid
os, 
a
execu√ß
√£o 
da
ordem
a 
um
determ
inado
pre√ßo
pode
ser
confir
mada
<h3>SYMBOL_TRADE_EXECUTION_REQUEST</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
861
<h3>Modo de execu√ß√£o</h3>
<h3>Descri√ß</h3>
√£o
<h3>Valor em ENUM_SYMBOL_TRADE_EXECUTION</h3>
ou
rejeita
da.
<h3>Execu√ß√£o imediata</h3>
(Instant Execution)
<h3>Execu√ß</h3>
√£o
imedia
ta 
de
uma
ordem
de
mercad
o 
ao
pre√ßo
especif
icado.
<h3>Ao</h3>
enviar
uma
ordem
de
negoci
a√ß√£o
para
ser
execut
ada, a
platafo
rma
substit
ui
automa
ticame
nte os
pre√ßos
atuais
na
ordem.
¬∑ S
e
a
c
o
r
r
e
t
<h3>SYMBOL_TRADE_EXECUTION_INSTANT</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
862
<h3>Modo de execu√ß√£o</h3>
<h3>Descri√ß</h3>
√£o
<h3>Valor em ENUM_SYMBOL_TRADE_EXECUTION</h3>
o
r
a
a
c
e
i
t
a
r
o
p
r
e
√ß
o
,
a
o
r
d
e
m
s
e
r
√°
e
x
e
c
u
t
a
d
a
.
¬∑ S
e
a
c
o
r
r
e
t
o
r</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
863
<h3>Modo de execu√ß√£o</h3>
<h3>Descri√ß</h3>
√£o
<h3>Valor em ENUM_SYMBOL_TRADE_EXECUTION</h3>
a
n
√£
o
a
c
e
i
t
a
r
o
p
r
e
√ß
o
s
o
l
i
c
i
t
a
d
o
,
o
c
o
r
r
e
a
c
h
a
m
a
d
a
&quot;
r
e
c
o
t</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
864
<h3>Modo de execu√ß√£o</h3>
<h3>Descri√ß</h3>
√£o
<h3>Valor em ENUM_SYMBOL_TRADE_EXECUTION</h3>
a
√ß
√£
o
&quot;
(
<h3>R</h3>
e
q
u
o
t
e
)
-
a
c
o
r
r
e
t
o
r
a
r
e
t
o
r
n
a
o
s
p
r
e
√ß
o
s
a
o
s
q
u
a
i
s</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
865
<h3>Modo de execu√ß√£o</h3>
<h3>Descri√ß</h3>
√£o
<h3>Valor em ENUM_SYMBOL_TRADE_EXECUTION</h3>
a
o
r
d
e
m
p
o
d
e
s
e
r
e
x
e
c
u
t
a
d
a
.
<h3>Execu√ß√£o a mercado</h3>
(Market Execution)
<h3>A</h3>
decis√£o
sobre o
pre√ßo
de
execu√ß
√£o 
√©
feita
pela
correto
ra sem
acordo
adicion
al com
o
trader.
<h3>O</h3>
envio
de uma
ordem
a
mercad
o nesta
<h3>SYMBOL_TRADE_EXECUTION_MARKET</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
866
<h3>Modo de execu√ß√£o</h3>
<h3>Descri√ß</h3>
√£o
<h3>Valor em ENUM_SYMBOL_TRADE_EXECUTION</h3>
modali
dade
implica
que se
aceita
antecip
adame
nte 
o
pre√ßo a
que
ser√°
execut
ada.
<h3>Execu√ß√£o de bolsa</h3>
(Exchange Execution)
<h3>As</h3>
opera√ß
√µes de
negoci
a√ß√£o
s√£o
realiza
das aos
pre√ßos
das
cota√ß√µ
es
atuais
de
mercad
o.
<h3>SYMBOL_TRADE_EXECUTION_EXCHANGE</h3>
Antes de enviar uma ordem para ser executada no momento atual, para a correta configura√ß√£o do
valor ORDER_TYPE_FILLING (tipo de execu√ß√£o por volume), para cada ativo financeiro por meio da
fun√ß√£o SymbolInfoInteger() voc√™ pode obter o valor da propriedade SYMBOL_FILLING_MODE que
mostra os tipos de preenchimento por volume (permitidos para este s√≠mbolo) como uma combina√ß√£o
de flags. Deve-se observar que o tipo de preenchimento ORDER_FILLING_RETURN √© sempre permitido,
exceto para o modo &quot;Execu√ß√£o da mercado&quot; (SYMBOL_TRADE_EXECUTION_MARKET).
O uso de tipos de preenchimento dependendo do modo de execu√ß√£o pode ser representado na forma
de uma tabela:
<h3>Modo de execu√ß√£o\Pol√≠tica de</h3>
preenchimento
<h3>Tudo/Nada</h3>
(FOK
<h3>ORDER_FILLIN</h3>
<h3>G_FOK)</h3>
<h3>Tudo/Parcial</h3>
(IOC
<h3>ORDER_FILLING</h3>
_IOC)
<h3>Retornar</h3>
(Return
<h3>ORDER_FILLING</h3>
_RETURN)
<h3>Execu√ß√£o imediata</h3>
(SYMBOL_TRADE_EXECUTION_INSTANT)
+
(independente
mente 
da
+
(independente
mente 
da
+ (sempre)</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
867
<h3>Modo de execu√ß√£o\Pol√≠tica de</h3>
preenchimento
<h3>Tudo/Nada</h3>
(FOK
<h3>ORDER_FILLIN</h3>
<h3>G_FOK)</h3>
<h3>Tudo/Parcial</h3>
(IOC
<h3>ORDER_FILLING</h3>
_IOC)
<h3>Retornar</h3>
(Return
<h3>ORDER_FILLING</h3>
_RETURN)
configura√ß√£o
do ativo)
configura√ß√£o
do ativo)
<h3>Execu√ß√µes a pedido</h3>
<h3>SYMBOL_TRADE_EXECUTION_REQUEST</h3>
+
(independente
mente 
da
configura√ß√£o
do ativo)
+
(independente
mente 
da
configura√ß√£o
do ativo)
+ (sempre)
<h3>Execu√ß√£o a mercado</h3>
<h3>SYMBOL_TRADE_EXECUTION_MARKET</h3>
+ (definido nas
configura√ß√µes
do ativo)
+ (definido nas
configura√ß√µes
do ativo)
- 
(proibido
independentem
ente 
da
configura√ß√£o
do ativo)
<h3>Execu√ß√£o de bolsa</h3>
<h3>SYMBOL_TRADE_EXECUTION_EXCHANGE</h3>
+ (definido nas
configura√ß√µes
do ativo)
+ (definido nas
configura√ß√µes
do ativo)
+ (sempre)
Para ordens pendentes, independentemente do modo de execu√ß√£o (SYMBOL_TRADE_EXEMODE) √©
necess√°rio utilizar o tipo de preenchimento ORDER_FILLING_RETURN, uma vez que essas ordens s√£o
executadas no momento do envio. Ao usar ordens pendentes, o trader aceita com anteced√™ncia que
quando as condi√ß√µes para realiza√ß√£o da transa√ß√£o nesta ordem forem atendidas, a corretora usar√° o
tipo de preenchimento que √© suportado por dada plataforma de negocia√ß√£o.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| verifica se o modo de preenchimento especificado √© permitido     |
//+------------------------------------------------------------------+
bool IsFillingTypeAllowed(string symbol,int fill_type)
  {
//--- obtemos o valor da propriedade que descreve o modo de preenchimento
   int filling=(int)SymbolInfoInteger(symbol,SYMBOL_FILLING_MODE);
//--- retornamos true, se o modo fill_type estive habilitado
   return((filling&amp;fill_type)==fill_type);
</code></pre>
<p>
  }
Ao enviar um pedido de com√©rcio usando a fun√ß√£o OrderSend(), um tipo de ordem do enumerador
ENUM_ORDER_TYPE enumeration deve ser especificada para algumas opera√ß√µes. Nem todos os tipos
de ordens podem ser autorizadas por um s√≠mbolo espec√≠fico. Propriedade SYMBOL_ORDER_MODE
descreve os sinalizadores dos tipos de ordens permitidas. </p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
868
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>Descri√ß√£o</h3>
<h3>SYMBOL_ORDER_MARKET</h3>
1
<h3>Ordens de mercado s√£o permitidas</h3>
(Buy e Sell)
<h3>SYMBOL_ORDER_LIMIT</h3>
2
<h3>Ordens de limite s√£o permitidas</h3>
(Buy Limit e Sell Limit)
<h3>SYMBOL_ORDER_STOP</h3>
4
<h3>Ordens de parada s√£o permitidas</h3>
(Buy Stop e Sell Stop)
<h3>SYMBOL_ORDER_STOP_LIMIT</h3>
8
<h3>Ordens de limite de parada s√£o</h3>
permitidas (Buy Stop Limit e Sell
<h3>Stop Limit)</h3>
<h3>SYMBOL_ORDER_SL</h3>
16
<h3>Stop Loss √© permitido</h3>
<h3>SYMBOL_ORDER_TP</h3>
32
<h3>Take Profit √© permitido</h3>
<h3>SYMBOL_ORDER_CLOSEBY</h3>
64
<h3>Autoriza√ß√£o para fechar a posi√ß√£o</h3>
usando outra oposta, quer dizer,
usando uma posi√ß√£o aberta na
dire√ß√£o oposta, no mesmo mesmo
instrumento. 
<h3>A</h3>
propriedade 
√©
definida para contas com sistema
de 
cobertura
(ACCOUNT_MARGIN_MODE_RETAIL
_HEDGING)
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| A fun√ß√£o imprime tipos de ordens permitidas para um s√≠mbolo¬†     |
//+------------------------------------------------------------------+
void Check_SYMBOL_ORDER_MODE(string symbol)
  {
//--- receber o valor da propriedade descrevendo os tipos de ordens permitidas
   int symbol_order_mode=(int)SymbolInfoInteger(symbol,SYMBOL_ORDER_MODE);
//--- verificar se h√° ordens de mercado (Execu√ß√£o de Mercado)
   if((SYMBOL_ORDER_MARKET&amp;symbol_order_mode)==SYMBOL_ORDER_MARKET)
      Print(symbol+&quot;: Ordens de mercado s√£o permitidas (Buy e Sell)&quot;);
//--- verificar se h√° ordens de Limite
   if((SYMBOL_ORDER_LIMIT&amp;symbol_order_mode)==SYMBOL_ORDER_LIMIT)
      Print(symbol+&quot;: Ordens Buy Limit e Sell Limit s√£o permitidas&quot;);
//--- verificar se h√° ordens de Parada
   if((SYMBOL_ORDER_STOP&amp;symbol_order_mode)==SYMBOL_ORDER_STOP)
      Print(symbol+&quot;: Ordens Buy Stop e Sell Stop s√£o permitidas&quot;);
//--- verificar se h√° ordens Stop Limit
   if((SYMBOL_ORDER_STOP_LIMIT&amp;symbol_order_mode)==SYMBOL_ORDER_STOP_LIMIT)
      Print(symbol+&quot;: Ordens Buy Stop Limit e Sell Stop Limit s√£o permitidas&quot;);
//--- verificar se a coloca√ß√£o de uma ordem Stop Loss √© permitida
   if((SYMBOL_ORDER_SL&amp;symbol_order_mode)==SYMBOL_ORDER_SL)
      Print(symbol+&quot;: Ordens de Stop Loss s√£o permitidas&quot;);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
869
</p>
<pre><code class="language-mql5">
//--- verificar se a coloca√ß√£o de uma ordem Take Profit √© permitida
   if((SYMBOL_ORDER_TP&amp;symbol_order_mode)==SYMBOL_ORDER_TP)
      Print(symbol+&quot;: Ordens de Take Profit s√£o permitidas&quot;);
//--- verificar se a permiss√£o para fechar uma posi√ß√£o usando uma posi√ß√£o oposta
   if((SYMBOL_ORDER_TP&amp;symbol_order_mode)==SYMBOL_ORDER_CLOSEBY)
      Print(symbol+&quot;: Permitido fechamento com posi√ß√£o oposta&quot;);
//---
</code></pre>
<p>
  }
A enumera√ß√£o ENUM_SYMBOL_CALC_MODE √© usada para obter informa√ß√£o sobre como os
requerimentos de margem para um ativo s√£o calculados.
<h3>ENUM_SYMBOL_CALC_MODE</h3>
<h3>Identificador</h3>
<h3>Desc</h3>
ri√ß√£o
<h3>F√≥rmula</h3>
<h3>SYMBOL_CALC_MODE_FOREX</h3>
<h3>Modo</h3>
<h3>Fore</h3>
x 
-
c√°lcu
lo de
lucro
e
marg
em
para
<h3>Fore</h3>
x
Margin:  Lots * Contract_Size / Leverage *
<h3>Margin_Rate</h3>
<h3>Profit:</h3>
 
 
(close_price 
- 
open_price) 
*
<h3>Contract_Size*Lots</h3>
<h3>SYMBOL_CALC_MODE_FOREX_NO_LEV</h3>
<h3>ERAGE</h3>
<h3>Fore</h3>
x No
<h3>Leve</h3>
rage
mod
e 
‚Äì
c√°lcu
lo de
lucro
e
marg
em
para
o
merc
ado
<h3>Fore</h3>
x
sem
levar
<h3>Margin:  Lots * Contract_Size * Margin_Rate</h3>
<h3>Profit:   (close_price - open_price) * Contract_Size</h3>
* Lots</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
870
<h3>Identificador</h3>
<h3>Desc</h3>
ri√ß√£o
<h3>F√≥rmula</h3>
em
cont
a 
a
alava
ncag
em
<h3>SYMBOL_CALC_MODE_FUTURES</h3>
<h3>Modo</h3>
<h3>Futur</h3>
os -
c√°lcu
lo de
marg
em e
lucro
para
futur
os
<h3>Margin: Lots * InitialMargin * Margin_Rate</h3>
Profit:  (close_price - open_price) * TickPrice /
<h3>TickSize*Lots</h3>
<h3>SYMBOL_CALC_MODE_CFD</h3>
<h3>Modo</h3>
<h3>CFD</h3>
-
c√°lcu
lo de
marg
em e
lucro
para
<h3>CFD</h3>
Margin: Lots * ContractSize * MarketPrice *
<h3>Margin_Rate</h3>
Profit:  (close_price - open_price) * Contract_Size *
<h3>Lots</h3>
<h3>SYMBOL_CALC_MODE_CFDINDEX</h3>
<h3>Modo</h3>
√≠ndic
e
<h3>CFD</h3>
-
c√°lcu
lo de
marg
em e
lucro
para
<h3>CFD</h3>
por
√≠ndic
es
Margin: (Lots * ContractSize * MarketPrice) *
<h3>TickPrice / TickSize * Margin_Rate</h3>
Profit:  (close_price - open_price) * Contract_Size *
<h3>Lots</h3>
<h3>SYMBOL_CALC_MODE_CFDLEVERAGE</h3>
<h3>Modo</h3>
<h3>Alav</h3>
anca
do
Margin: (Lots * ContractSize * MarketPrice) /
<h3>Leverage * Margin_Rate</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
871
<h3>Identificador</h3>
<h3>Desc</h3>
ri√ß√£o
<h3>F√≥rmula</h3>
<h3>CFD</h3>
-
c√°lcu
lo de
marg
em e
lucro
para
<h3>CFD</h3>
em
nego
cia√ß√£
o
alava
ncad
a
<h3>Profit:  (close_price-open_price) * Contract_Size *</h3>
<h3>Lots</h3>
<h3>SYMBOL_CALC_MODE_EXCH_STOCKS</h3>
<h3>Modo</h3>
<h3>Exch</h3>
ange
-
c√°lcu
lo de
marg
em e
lucro
para
nego
cia√ß√£
o de
t√≠tulo
s na
bolsa
de
valor
es
Margin: Lots * ContractSize * LastPrice *
<h3>Margin_Rate</h3>
Profit:  (close_price - open_price) * Contract_Size *
<h3>Lots</h3>
<h3>SYMBOL_CALC_MODE_EXCH_FUTURE</h3>
<h3>S</h3>
<h3>Modo</h3>
<h3>Futur</h3>
es -
c√°lcu
lo da
marg
em e
lucro
para
os
contr
atos
Margin: Lots * InitialMargin * Margin_Rate ou Lots *
<h3>MaintenanceMargin * Margin_Rate</h3>
Profit:  (close_price - open_price) * Lots * TickPrice
/ TickSize</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
872
<h3>Identificador</h3>
<h3>Desc</h3>
ri√ß√£o
<h3>F√≥rmula</h3>
futur
os de
nego
cia√ß√£
o na
bolsa
de
valor
es
<h3>SYMBOL_CALC_MODE_EXCH_FUTURE</h3>
<h3>S_FORTS</h3>
<h3>Modo</h3>
<h3>FOR</h3>
<h3>TS</h3>
<h3>Futur</h3>
es -
c√°lcu
lo de
marg
em e
lucro
para
futur
os
contr
atos
de
come
rciali
za√ß√£
o nos
<h3>FOR</h3>
TS.
<h3>A</h3>
marg
em
pode
ser
redu
zida
pela
quan
tidad
e de
desvi
o
<h3>Marg</h3>
inDis
coun
t de
Margin: Lots * InitialMargin * Margin_Rate ou  Lots
* MaintenanceMargin * Margin_Rate
Profit:  (close_price - open_price) * Lots * TickPrice
/ TickSize</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
873
<h3>Identificador</h3>
<h3>Desc</h3>
ri√ß√£o
<h3>F√≥rmula</h3>
acor
do
com
as
regra
s
segui
ntes:
1. Se
o
pre√ß
o de
uma
posi√ß
√£o
long
(orde
m
<h3>BUY)</h3>
√©
men
or do
que
o
pre√ß
o
esti
mad
o,
<h3>Marg</h3>
inDis
coun
t 
=
<h3>Lots*</h3>
((Pri
ceSe
ttle-
<h3>Price</h3>
<h3>Orde</h3>
r)
*Tick
<h3>Price</h3>
/Tic
kSize
)
2. Se
o
pre√ß</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
874
<h3>Identificador</h3>
<h3>Desc</h3>
ri√ß√£o
<h3>F√≥rmula</h3>
o de
uma
posi√ß
√£o
short
(orde
m
<h3>SELL</h3>
) 
√©
supe
rior
ao
pre√ß
o
esti
mad
o,
<h3>Marg</h3>
inDis
coun
t 
=
<h3>Lots*</h3>
((Pri
ceOr
der-
<h3>Price</h3>
<h3>Settl</h3>
e)
*Tick
<h3>Price</h3>
/Tic
kSize
)
onde
:
o P
r
i
c
e
<h3>S</h3>
e
t
t
l
e
‚Äì
p</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
875
<h3>Identificador</h3>
<h3>Desc</h3>
ri√ß√£o
<h3>F√≥rmula</h3>
r
e
√ß
o
e
s
t
i
m
a
d
o
(
l
i
m
p
a
n
d
o
)
d
a
s
e
s
s
√£
o
a
n
t
e
r
i
o
r
;
o P
r
i
c
e
<h3>O</h3>
r
d
e</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
876
<h3>Identificador</h3>
<h3>Desc</h3>
ri√ß√£o
<h3>F√≥rmula</h3>
r
-
p
r
e
√ß
o
m
√©
d
i
o
p
o
n
d
e
r
a
d
o
d
e
p
o
s
i
√ß
√£
o
o
u
p
r
e
√ß
o
d
e
a
b
e
r
t
u
r
a
d</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
877
<h3>Identificador</h3>
<h3>Desc</h3>
ri√ß√£o
<h3>F√≥rmula</h3>
e
f
i
n
i
d
o
n
a
o
r
d
e
m
(
p
e
d
i
d
o
)
;
o T
i
c
k
<h3>P</h3>
r
i
c
e
-
<h3>P</h3>
r
e
√ß
o
d
e
t
i
c
k
(
c
u
s</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
878
<h3>Identificador</h3>
<h3>Desc</h3>
ri√ß√£o
<h3>F√≥rmula</h3>
t
o
d
a
m
u
d
a
n
√ß
a
d
o
p
r
e
√ß
o
p
o
r
u
m
p
o
n
t
o
)
o T
i
c
k
<h3>S</h3>
i
z
e
-
t
a
m
a
n
h
o
t
i
c</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
879
<h3>Identificador</h3>
<h3>Desc</h3>
ri√ß√£o
<h3>F√≥rmula</h3>
k
(
p
a
s
s
o
d
e
a
l
t
e
r
a
√ß
√£
o
d
e
p
r
e
√ß
o
m
√≠
n
i
m
a
)
<h3>SYMBOL_CALC_MODE_EXCH_BONDS</h3>
<h3>Exch</h3>
ange
<h3>Bond</h3>
s
mod
e 
‚Äì
c√°lcu
lo da
gara
ntia
e do
lucro
para
nego
ciar
t√≠tulo
Margin: Lots * ContractSize * FaceValue *
open_price * /100
Profit:  Lots * close_price * FaceValue *
<h3>Contract_Size  + AccruedInterest * Lots *</h3>
<h3>ContractSize</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
880
<h3>Identificador</h3>
<h3>Desc</h3>
ri√ß√£o
<h3>F√≥rmula</h3>
s na
bolsa
de
valor
es
<h3>SYMBOL_CALC_MODE_EXCH_STOCKS</h3>
_MOEX
<h3>Exch</h3>
ange
<h3>MOE</h3>
<h3>X</h3>
<h3>Stoc</h3>
ks
mod
e 
‚Äì
c√°lcu
lo da
gara
ntia
e do
lucro
para
nego
ciar
t√≠tulo
s na
<h3>Bolsa</h3>
de
<h3>Mosc</h3>
ou
Margin: Lots * ContractSize * LastPrice *
<h3>Margin_Rate</h3>
Profit:  (close_price - open_price) * Contract_Size *
<h3>Lots</h3>
<h3>SYMBOL_CALC_MODE_EXCH_BONDS_</h3>
<h3>MOEX</h3>
<h3>Exch</h3>
ange
<h3>MOE</h3>
<h3>X</h3>
<h3>Bond</h3>
s
mod
e 
‚Äì
c√°lcu
lo da
gara
ntia
e do
lucro
para
nego
ciar
t√≠tulo
s de
Margin: Lots * ContractSize * FaceValue *
open_price * /100
Profit:  Lots * close_price * FaceValue *
<h3>Contract_Size  + AccruedInterest * Lots *</h3>
<h3>ContractSize</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
881
<h3>Identificador</h3>
<h3>Desc</h3>
ri√ß√£o
<h3>F√≥rmula</h3>
d√≠vid
a na
<h3>Bolsa</h3>
de
<h3>Mosc</h3>
ou
<h3>SYMBOL_CALC_MODE_SERV_COLLATE</h3>
<h3>RAL</h3>
<h3>Colla</h3>
teral
mod
e - a
symb
ol is
used
as a
non-
trada
ble
asset
on a
tradi
ng
acco
unt.
<h3>The</h3>
mark
et
value
of an
open
posit
ion
is
calcu
lated
base
d on
the
volu
me,
curre
nt
mark
et
price
,
contr
act
size
<h3>Margin: no</h3>
<h3>Profit:  no</h3>
Market Value: Lots * ContractSize * MarketPrice *
<h3>LiqudityRate</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
882
<h3>Identificador</h3>
<h3>Desc</h3>
ri√ß√£o
<h3>F√≥rmula</h3>
and
liqui
dity
ratio
. The
value
is
inclu
ded
into
<h3>Asse</h3>
ts,
whic
h are
adde
d to
<h3>Equit</h3>
y.
<h3>Open</h3>
posit
ions
of
such
symb
ols
incre
ase
the
<h3>Free</h3>
<h3>Marg</h3>
in
amo
unt
and
are
used
as
addit
ional
marg
in
(colla
teral
) for
open
posit
ions
of</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
883
<h3>Identificador</h3>
<h3>Desc</h3>
ri√ß√£o
<h3>F√≥rmula</h3>
trada
ble
instr
ume
nts.
Existem v√°rios modos de negocia√ß√£o de ativos. Informa√ß√£o sobre modos de negocia√ß√£o de um certo
ativo √© refletido nos valores da enumera√ß√£o ENUM_SYMBOL_TRADE_MODE.
<h3>ENUM_SYMBOL_TRADE_MODE</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>SYMBOL_TRADE_MODE_DISABLED</h3>
<h3>Negocia√ß√£o est√° desabilitada para o ativo</h3>
<h3>SYMBOL_TRADE_MODE_LONGONLY</h3>
<h3>Permitido somente posi√ß√µes compradas</h3>
<h3>SYMBOL_TRADE_MODE_SHORTONLY</h3>
<h3>Permitido somente posi√ß√µes vendidas</h3>
<h3>SYMBOL_TRADE_MODE_CLOSEONLY</h3>
<h3>Permitido somente opera√ß√µes de fechamento de</h3>
posi√ß√£o
<h3>SYMBOL_TRADE_MODE_FULL</h3>
<h3>Sem restri√ß√µes de negocia√ß√£o</h3>
Os poss√≠veis modos de execu√ß√£o de uma opera√ß√£o (deal) para um certo ativo s√£o definidos na
enumera√ß√£o ENUM_SYMBOL_TRADE_EXECUTION.
<h3>ENUM_SYMBOL_TRADE_EXECUTION</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>SYMBOL_TRADE_EXECUTION_REQUEST</h3>
<h3>Execu√ß√£o por solicita√ß√£o</h3>
<h3>SYMBOL_TRADE_EXECUTION_INSTANT</h3>
<h3>Execu√ß√£o instant√¢nea</h3>
<h3>SYMBOL_TRADE_EXECUTION_MARKET</h3>
<h3>Execu√ß√£o a Mercado</h3>
<h3>SYMBOL_TRADE_EXECUTION_EXCHANGE</h3>
Execu√ß√£o em um sistema de negocia√ß√£o externo
(Exchange)
M√©todos de c√°lculo de swap na transfer√™ncia de posi√ß√£o s√£o especificados na enumera√ß√£o
ENUM_SYMBOL_SWAP_MODE. O m√©todo de c√°lculo de swap determina a unidade de medida dos
par√¢metros SYMBOL_SWAP_LONG e SYMBOL_SWAP_SHORT. Por exemplo, se swaps s√£o cobrados na
moeda de dep√≥sito do cliente, ent√£o os valores destes par√¢metros s√£o especificados como uma
quantia de dinheiro na moeda de dep√≥sito do cliente.
<h3>ENUM_SYMBOL_SWAP_MODE</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
884
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>SYMBOL_SWAP_MODE_DISABLED</h3>
<h3>Desabilita swaps (sem swaps)</h3>
<h3>SYMBOL_SWAP_MODE_POINTS</h3>
<h3>Swaps s√£o cobrados em pontos</h3>
<h3>SYMBOL_SWAP_MODE_CURRENCY_SYMBOL</h3>
Swaps s√£o cobrados em dinheiro na moeda base
do ativo
<h3>SYMBOL_SWAP_MODE_CURRENCY_MARGIN</h3>
Swaps s√£o cobrados em dinheiro na moeda de
margem do ativo
<h3>SYMBOL_SWAP_MODE_CURRENCY_DEPOSIT</h3>
Swaps s√£o cobrados em dinheiro na moeda de
dep√≥sito do cliente
<h3>SYMBOL_SWAP_MODE_CURRENCY_PROFIT</h3>
Swaps s√£o creditados em dinheiro na moeda do
c√°lculo de lucro
<h3>SYMBOL_SWAP_MODE_INTEREST_CURRENT</h3>
Swaps s√£o cobrados como juro anual especificado
a partir do pre√ßo de instrumento no c√°lculo do
swap (ano banc√°rio padr√£o √© 360 dias)
<h3>SYMBOL_SWAP_MODE_INTEREST_OPEN</h3>
Swaps s√£o cobradas como juro anual especificado
a partir do pre√ßo de abertura da posi√ß√£o (ano
banc√°rio padr√£o √© 360 dias)
<h3>SYMBOL_SWAP_MODE_REOPEN_CURRENT</h3>
Swaps s√£o cobradas atrav√©s de posi√ß√µes reabertas
Ao final de um dia de negocia√ß√£o a posi√ß√£o √©
encerrada. No dia seguinte ela √© reaberta atrav√©s
do pre√ßo de fechamento +/- um n√∫mero espec√≠fico
de pontos (par√¢metros SYMBOL_SWAP_LONG e
<h3>SYMBOL_SWAP_SHORT)</h3>
<h3>SYMBOL_SWAP_MODE_REOPEN_BID</h3>
Swaps s√£o cobradas atrav√©s de posi√ß√µes reabertas
Ao final de um dia de negocia√ß√£o a posi√ß√£o √©
encerrada. No dia seguinte ela √© reaberta atrav√©s
do pre√ßo de Venda (Bid) atual +/- um n√∫mero
espec√≠fico 
de 
pontos 
(par√¢metros
<h3>SYMBOL_SWAP_LONG e SYMBOL_SWAP_SHORT)</h3>
Os valores da enumera√ß√£o ENUM_DAY_OF_WEEK s√£o usados para especificar dias da semana.
<h3>ENUM_DAY_OF_WEEK</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>SUNDAY</h3>
<h3>Domingo</h3>
<h3>MONDAY</h3>
<h3>Segunda-feira</h3>
<h3>TUESDAY</h3>
<h3>Ter√ßa-feira</h3>
<h3>WEDNESDAY</h3>
<h3>Quarta-feira</h3>
<h3>THURSDAY</h3>
<h3>Quinta-feira</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
885
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>FRIDAY</h3>
<h3>Sexta-feira</h3>
<h3>SATURDAY</h3>
<h3>S√°bado</h3>
An option is a contract, which gives the right, but not the obligation, to buy or sell an underlying asset
(goods, stocks, futures, etc.) at a specified price on or before a specific date. The following
enumerations describe option properties, including the option type and the right arising from it.  
<h3>ENUM_SYMBOL_OPTION_RIGHT</h3>
<h3>Identifier</h3>
<h3>Descri√ß√£o</h3>
<h3>SYMBOL_OPTION_RIGHT_CALL</h3>
A call option gives you the right to buy an asset at
a specified price
<h3>SYMBOL_OPTION_RIGHT_PUT</h3>
A put option gives you the right to sell an asset at
a specified price
<h3>ENUM_SYMBOL_OPTION_MODE</h3>
<h3>Identifier</h3>
<h3>Descri√ß√£o</h3>
<h3>SYMBOL_OPTION_MODE_EUROPEAN</h3>
A op√ß√£o europeia s√≥ pode ser exercida em uma
data especificada (validade, data de assinatura,
data de entrega)
<h3>SYMBOL_OPTION_MODE_AMERICAN</h3>
A op√ß√£o americana pode ser exercida em qualquer
dia de negocia√ß√£o ou antes do termo. O prazo
dentro do qual o comprador pode exercer a op√ß√£o
√© especificado para ele
Os instrumentos financeiros s√£o distribu√≠dos por setores da economia. Um setor de uma economia √©
definido por suas caracter√≠sticas, objetivos econ√¥micos, fun√ß√µes e comportamento gerais, o que o
permite diferenciar de outras parcelas da economia. ENUM_SYMBOL_SECTOR lista os setores da
economia aos quais um instrumento comercial pode pertencer.
<h3>ENUM_SYMBOL_SECTOR</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>SECTOR_UNDEFINED</h3>
<h3>Indefinido</h3>
<h3>SECTOR_BASIC_MATERIALS</h3>
<h3>Commodities</h3>
<h3>SECTOR_COMMUNICATION_SERVICES</h3>
<h3>Servi√ßos de comunica√ß√£o</h3>
<h3>SECTOR_CONSUMER_CYCLICAL</h3>
<h3>Consumo c√≠clico de demanda</h3>
<h3>SECTOR_CONSUMER_DEFENSIVE</h3>
<h3>Consumo b√°sico</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
886
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>SECTOR_CURRENCY</h3>
<h3>Moedas</h3>
<h3>SECTOR_CURRENCY_CRYPTO</h3>
<h3>Criptomoedas</h3>
<h3>SECTOR_ENERGY</h3>
<h3>Energia</h3>
<h3>SECTOR_FINANCIAL</h3>
<h3>Finan√ßas</h3>
<h3>SECTOR_HEALTHCARE</h3>
<h3>Cuidados de sa√∫de</h3>
<h3>SECTOR_INDUSTRIALS</h3>
<h3>Ind√∫stria</h3>
<h3>SECTOR_REAL_ESTATE</h3>
<h3>Imobili√°rio</h3>
<h3>SECTOR_TECHNOLOGY</h3>
<h3>Tecnologia</h3>
<h3>SECTOR_UTILITIES</h3>
<h3>Servi√ßos p√∫blicos</h3>
<h3>SECTOR_INDEXES</h3>
<h3>√çndices</h3>
<h3>SECTOR_COMMODITIES</h3>
<h3>Mercadorias</h3>
Cada instrumento financeiro pode pertencer a um tipo espec√≠fico de ind√∫stria ou setor. Um setor da
economia √© um conjunto de empresas que produzem produtos homog√™neos ou espec√≠ficos usando o
mesmo tipo de tecnologia. ENUM_SYMBOL_INDUSTRY lista os tipos de ind√∫stria aos quais um
instrumento comercial pode pertencer.
<h3>ENUM_SYMBOL_INDUSTRY</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>INDUSTRY_UNDEFINED</h3>
<h3>Indefinido</h3>
<h3>Commodities</h3>
<h3>INDUSTRY_AGRICULTURAL_INPUTS</h3>
<h3>Recursos agr√≠colas</h3>
<h3>INDUSTRY_ALUMINIUM</h3>
<h3>Alum√≠nio</h3>
<h3>INDUSTRY_BUILDING_MATERIALS</h3>
<h3>Materiais de constru√ß√£o</h3>
<h3>INDUSTRY_CHEMICALS</h3>
<h3>Produtos qu√≠micos</h3>
<h3>INDUSTRY_COKING_COAL</h3>
<h3>Coque</h3>
<h3>INDUSTRY_COPPER</h3>
<h3>Cobre</h3>
<h3>INDUSTRY_GOLD</h3>
<h3>Ouro</h3>
<h3>INDUSTRY_LUMBER_WOOD</h3>
<h3>Produ√ß√£o de madeira</h3>
<h3>INDUSTRY_INDUSTRIAL_METALS</h3>
<h3>Outros metais e minera√ß√£o industrial</h3>
<h3>INDUSTRY_PRECIOUS_METALS</h3>
<h3>Outros metais preciosos e minera√ß√£o</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
887
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>INDUSTRY_PAPER</h3>
<h3>Produtos de papel e celulose</h3>
<h3>INDUSTRY_SILVER</h3>
<h3>Prata</h3>
<h3>INDUSTRY_SPECIALTY_CHEMICALS</h3>
<h3>Produtos qu√≠micos especializados</h3>
<h3>INDUSTRY_STEEL</h3>
<h3>A√ßo</h3>
<h3>Servi√ßos de comunica√ß√£o</h3>
<h3>INDUSTRY_ADVERTISING</h3>
<h3>Agencias de propaganda</h3>
<h3>INDUSTRY_BROADCASTING</h3>
<h3>Transmiss√£o</h3>
<h3>INDUSTRY_GAMING_MULTIMEDIA</h3>
<h3>Jogos eletr√¥nicos e multim√≠dia</h3>
<h3>INDUSTRY_ENTERTAINMENT</h3>
<h3>Entretenimento</h3>
<h3>INDUSTRY_INTERNET_CONTENT</h3>
<h3>Conte√∫do e informa√ß√µes da Internet</h3>
<h3>INDUSTRY_PUBLISHING</h3>
<h3>Editorial</h3>
<h3>INDUSTRY_TELECOM</h3>
<h3>Servi√ßos de telecomunica√ß√µes</h3>
<h3>Consumo c√≠clico de demanda</h3>
<h3>INDUSTRY_APPAREL_MANUFACTURING</h3>
<h3>Fabrica√ß√£o de vestu√°rio</h3>
<h3>INDUSTRY_APPAREL_RETAIL</h3>
<h3>Varejo de vestu√°rio</h3>
<h3>INDUSTRY_AUTO_MANUFACTURERS</h3>
<h3>Fabricantes de autom√≥veis</h3>
<h3>INDUSTRY_AUTO_PARTS</h3>
<h3>Autope√ßas</h3>
<h3>INDUSTRY_AUTO_DEALERSHIP</h3>
<h3>Concession√°rias de carros e caminh√µes</h3>
<h3>INDUSTRY_DEPARTMENT_STORES</h3>
<h3>Lojas de departamento</h3>
<h3>INDUSTRY_FOOTWEAR_ACCESSORIES</h3>
<h3>Cal√ßados e acess√≥rios</h3>
<h3>INDUSTRY_FURNISHINGS</h3>
<h3>M√≥veis, acess√≥rios e eletrodom√©sticos</h3>
<h3>INDUSTRY_GAMBLING</h3>
<h3>Empresas de jogos de azar</h3>
<h3>INDUSTRY_HOME_IMPROV_RETAIL</h3>
Com√©rcio varejista de artigos para o lar
<h3>INDUSTRY_INTERNET_RETAIL</h3>
<h3>Varejo on-line</h3>
<h3>INDUSTRY_LEISURE</h3>
<h3>Lazer</h3>
<h3>INDUSTRY_LODGING</h3>
<h3>Alojamento</h3>
<h3>INDUSTRY_LUXURY_GOODS</h3>
<h3>Produtos de luxo</h3>
<h3>INDUSTRY_PACKAGING_CONTAINERS</h3>
<h3>Embalagem</h3>
<h3>INDUSTRY_PERSONAL_SERVICES</h3>
<h3>Servi√ßos pessoais</h3>
<h3>INDUSTRY_RECREATIONAL_VEHICLES</h3>
<h3>Ve√≠culos de lazer</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
888
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>INDUSTRY_RESIDENT_CONSTRUCTION</h3>
<h3>Constru√ß√£o de moradias</h3>
<h3>INDUSTRY_RESORTS_CASINOS</h3>
<h3>Resorts e cassinos</h3>
<h3>INDUSTRY_RESTAURANTS</h3>
<h3>Restaurantes</h3>
<h3>INDUSTRY_SPECIALTY_RETAIL</h3>
<h3>Varejo especializado</h3>
<h3>INDUSTRY_TEXTILE_MANUFACTURING</h3>
<h3>Produ√ß√£o t√™xtil</h3>
<h3>INDUSTRY_TRAVEL_SERVICES</h3>
<h3>Servi√ßos tur√≠sticos</h3>
<h3>Consumo b√°sico</h3>
<h3>INDUSTRY_BEVERAGES_BREWERS</h3>
<h3>Bebidas - Cervejeiros</h3>
<h3>INDUSTRY_BEVERAGES_NON_ALCO</h3>
<h3>Bebidas - N√£o alco√≥licas</h3>
<h3>INDUSTRY_BEVERAGES_WINERIES</h3>
<h3>Bebidas - Vin√≠colas e Destilarias</h3>
<h3>INDUSTRY_CONFECTIONERS</h3>
<h3>Confeiteiros</h3>
<h3>INDUSTRY_DISCOUNT_STORES</h3>
<h3>Lojas de desconto</h3>
<h3>INDUSTRY_EDUCATION_TRAINIG</h3>
<h3>Educa√ß√£o e forma√ß√£o</h3>
<h3>INDUSTRY_FARM_PRODUCTS</h3>
<h3>Produtos agr√≠colas</h3>
<h3>INDUSTRY_FOOD_DISTRIBUTION</h3>
<h3>Distribui√ß√£o de alimentos</h3>
<h3>INDUSTRY_GROCERY_STORES</h3>
<h3>Mercearias e supermercados</h3>
<h3>INDUSTRY_HOUSEHOLD_PRODUCTS</h3>
<h3>Produtos dom√©sticos e pessoais</h3>
<h3>INDUSTRY_PACKAGED_FOODS</h3>
<h3>Produtos embalados</h3>
<h3>INDUSTRY_TOBACCO</h3>
<h3>Tabaco</h3>
<h3>Energia</h3>
<h3>INDUSTRY_OIL_GAS_DRILLING</h3>
Perfura√ß√£o de po√ßos de petr√≥leo e g√°s
<h3>INDUSTRY_OIL_GAS_EP</h3>
Extra√ß√£o e processamento de petr√≥leo e g√°s
<h3>INDUSTRY_OIL_GAS_EQUIPMENT</h3>
Equipamento e servi√ßos de petr√≥leo e g√°s
<h3>INDUSTRY_OIL_GAS_INTEGRATED</h3>
<h3>Empresas integradas de petr√≥leo e g√°s</h3>
<h3>INDUSTRY_OIL_GAS_MIDSTREAM</h3>
<h3>Transporte de petr√≥leo e g√°s</h3>
<h3>INDUSTRY_OIL_GAS_REFINING</h3>
Refina√ß√£o e comercializa√ß√£o de petr√≥leo e g√°s
<h3>INDUSTRY_THERMAL_COAL</h3>
<h3>Carv√£o t√©rmico</h3>
<h3>INDUSTRY_URANIUM</h3>
<h3>Urano</h3>
<h3>Finan√ßas</h3>
<h3>INDUSTRY_EXCHANGE_TRADED_FUND</h3>
<h3>Fundo de c√¢mbio</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
889
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>INDUSTRY_ASSETS_MANAGEMENT</h3>
<h3>Gest√£o de ativos</h3>
<h3>INDUSTRY_BANKS_DIVERSIFIED</h3>
<h3>Bancos - Diversificados</h3>
<h3>INDUSTRY_BANKS_REGIONAL</h3>
<h3>Bancos - Regionais</h3>
<h3>INDUSTRY_CAPITAL_MARKETS</h3>
<h3>Mercados financeiros</h3>
<h3>INDUSTRY_CLOSE_END_FUND_DEBT</h3>
<h3>Fundo fechado - Instrumentos de d√≠vida</h3>
<h3>INDUSTRY_CLOSE_END_FUND_EQUITY</h3>
<h3>Fundo fechado - A√ß√µes</h3>
<h3>INDUSTRY_CLOSE_END_FUND_FOREIGN</h3>
<h3>Fundo fechado - Estrangeiros</h3>
<h3>INDUSTRY_CREDIT_SERVICES</h3>
<h3>Servi√ßos de cr√©dito</h3>
<h3>INDUSTRY_FINANCIAL_CONGLOMERATE</h3>
<h3>Conglomerados financeiros</h3>
<h3>INDUSTRY_FINANCIAL_DATA_EXCHANGE</h3>
<h3>Dados financeiros e bolsa</h3>
<h3>INDUSTRY_INSURANCE_BROKERS</h3>
<h3>Corretores de seguros</h3>
<h3>INDUSTRY_INSURANCE_DIVERSIFIED</h3>
<h3>Seguros - Diversificados</h3>
<h3>INDUSTRY_INSURANCE_LIFE</h3>
<h3>Seguros - Vida</h3>
<h3>INDUSTRY_INSURANCE_PROPERTY</h3>
<h3>Seguros - Imobili√°rio e acidentes</h3>
<h3>INDUSTRY_INSURANCE_REINSURANCE</h3>
<h3>Seguros - Resseguros</h3>
<h3>INDUSTRY_INSURANCE_SPECIALTY</h3>
<h3>Seguros - Especial</h3>
<h3>INDUSTRY_MORTGAGE_FINANCE</h3>
<h3>Financiamento hipotec√°rio</h3>
<h3>INDUSTRY_SHELL_COMPANIES</h3>
<h3>Empresas Shell</h3>
<h3>Cuidados de sa√∫de</h3>
<h3>INDUSTRY_BIOTECHNOLOGY</h3>
<h3>Biotecnologia</h3>
<h3>INDUSTRY_DIAGNOSTICS_RESEARCH</h3>
<h3>Diagn√≥stico e pesquisa</h3>
<h3>INDUSTRY_DRUGS_MANUFACTURERS</h3>
<h3>Fabrica√ß√£o farmac√™utica - Geral</h3>
<h3>INDUSTRY_DRUGS_MANUFACTURERS_SPEC</h3>
<h3>Fabrica√ß√£o farmac√™utica - Especialidades e</h3>
gen√©ricos
<h3>INDUSTRY_HEALTHCARE_PLANS</h3>
<h3>Planos de sa√∫de</h3>
<h3>INDUSTRY_HEALTH_INFORMATION</h3>
<h3>Servi√ßos de informa√ß√£o em sa√∫de</h3>
<h3>INDUSTRY_MEDICAL_FACILITIES</h3>
<h3>Institui√ß√µes m√©dicas</h3>
<h3>INDUSTRY_MEDICAL_DEVICES</h3>
<h3>Equipamento m√©dico</h3>
<h3>INDUSTRY_MEDICAL_DISTRIBUTION</h3>
<h3>Distribuidores m√©dicos</h3>
<h3>INDUSTRY_MEDICAL_INSTRUMENTS</h3>
<h3>Instrumentos e suprimentos m√©dicos</h3>
<h3>INDUSTRY_PHARM_RETAILERS</h3>
<h3>Varejistas farmac√™uticos</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
890
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>Ind√∫stria</h3>
<h3>INDUSTRY_AEROSPACE_DEFENSE</h3>
<h3>Aeroespacial e defesa</h3>
<h3>INDUSTRY_AIRLINES</h3>
<h3>Companhias a√©reas</h3>
<h3>INDUSTRY_AIRPORTS_SERVICES</h3>
<h3>Aeroportos e transporte a√©reo</h3>
<h3>INDUSTRY_BUILDING_PRODUCTS</h3>
<h3>Materiais e equipamentos de constru√ß√£o</h3>
<h3>INDUSTRY_BUSINESS_EQUIPMENT</h3>
<h3>Equipamentos e materiais comerciais</h3>
<h3>INDUSTRY_CONGLOMERATES</h3>
<h3>Conglomerados</h3>
<h3>INDUSTRY_CONSULTING_SERVICES</h3>
<h3>Servi√ßos de consultoria</h3>
<h3>INDUSTRY_ELECTRICAL_EQUIPMENT</h3>
<h3>Equipamento el√©trico e pe√ßas de reposi√ß√£o</h3>
<h3>INDUSTRY_ENGINEERING_CONSTRUCTION</h3>
<h3>Engenharia e constru√ß√£o</h3>
<h3>INDUSTRY_FARM_HEAVY_MACHINERY</h3>
<h3>Equipamento de constru√ß√£o agr√≠cola e pesada</h3>
<h3>INDUSTRY_INDUSTRIAL_DISTRIBUTION</h3>
<h3>Distribuidores industriais</h3>
<h3>INDUSTRY_INFRASTRUCTURE_OPERATIONS</h3>
<h3>Opera√ß√µes de infraestrutura</h3>
<h3>INDUSTRY_FREIGHT_LOGISTICS</h3>
<h3>Transporte e log√≠stica integrados</h3>
<h3>INDUSTRY_MARINE_SHIPPING</h3>
<h3>Remessa</h3>
<h3>INDUSTRY_METAL_FABRICATION</h3>
<h3>Produ√ß√£o de metal</h3>
<h3>INDUSTRY_POLLUTION_CONTROL</h3>
<h3>Controle de contamina√ß√£o e limpeza</h3>
<h3>INDUSTRY_RAILROADS</h3>
<h3>Ferrovias</h3>
<h3>INDUSTRY_RENTAL_LEASING</h3>
<h3>Aluguel e loca√ß√£o</h3>
<h3>INDUSTRY_SECURITY_PROTECTION</h3>
<h3>Seguran√ßa e prote√ß√£o</h3>
<h3>INDUSTRY_SPEALITY_BUSINESS_SERVICES</h3>
<h3>Servi√ßos empresariais especializados</h3>
<h3>INDUSTRY_SPEALITY_MACHINERY</h3>
<h3>M√°quinas industriais especializadas</h3>
<h3>INDUSTRY_STUFFING_EMPLOYMENT</h3>
<h3>Servi√ßos de emprego</h3>
<h3>INDUSTRY_TOOLS_ACCESSORIES</h3>
<h3>Ferramentas e invent√°rio</h3>
<h3>INDUSTRY_TRUCKING</h3>
<h3>Transporte de carga</h3>
<h3>INDUSTRY_WASTE_MANAGEMENT</h3>
<h3>Gest√£o de res√≠duos</h3>
<h3>Imobili√°rio</h3>
<h3>INDUSTRY_REAL_ESTATE_DEVELOPMENT</h3>
<h3>Im√≥veis - Constru√ß√£o</h3>
<h3>INDUSTRY_REAL_ESTATE_DIVERSIFIED</h3>
<h3>Im√≥veis - Diversificado</h3>
<h3>INDUSTRY_REAL_ESTATE_SERVICES</h3>
<h3>Servi√ßos imobili√°rios</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
891
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>INDUSTRY_REIT_DIVERSIFIED</h3>
<h3>Fundo de investimento imobili√°rio - Diversificado</h3>
<h3>INDUSTRY_REIT_HEALTCARE</h3>
<h3>Fundo de investimento imobili√°rio - Institui√ß√µes</h3>
<h3>M√©dicas</h3>
<h3>INDUSTRY_REIT_HOTEL_MOTEL</h3>
<h3>Fundo de investimento imobili√°rio - Hot√©is</h3>
<h3>INDUSTRY_REIT_INDUSTRIAL</h3>
<h3>Fundo de investimento imobili√°rio - Ind√∫stria</h3>
<h3>INDUSTRY_REIT_MORTAGE</h3>
<h3>Fundo de investimento imobili√°rio - Hipoteca</h3>
<h3>INDUSTRY_REIT_OFFICE</h3>
<h3>Fundo de investimento imobili√°rio - Escrit√≥rios</h3>
<h3>INDUSTRY_REIT_RESIDENTAL</h3>
<h3>Fundo de investimento imobili√°rio - Residencial</h3>
<h3>INDUSTRY_REIT_RETAIL</h3>
<h3>Fundo de investimento imobili√°rio - Varejo</h3>
<h3>INDUSTRY_REIT_SPECIALITY</h3>
<h3>Fundo de investimento imobili√°rio - Instala√ß√µes</h3>
especiais
<h3>Tecnologia</h3>
<h3>INDUSTRY_COMMUNICATION_EQUIPMENT</h3>
<h3>Equipamento de comunica√ß√£o</h3>
<h3>INDUSTRY_COMPUTER_HARDWARE</h3>
<h3>Equipamento inform√°tico</h3>
<h3>INDUSTRY_CONSUMER_ELECTRONICS</h3>
<h3>Eletr√¥nicos de consumo</h3>
<h3>INDUSTRY_ELECTRONIC_COMPONENTS</h3>
<h3>Componentes eletr√¥nicos</h3>
<h3>INDUSTRY_ELECTRONIC_DISTRIBUTION</h3>
<h3>Distribui√ß√£o de eletr√¥nicos e computadores</h3>
<h3>INDUSTRY_IT_SERVICES</h3>
<h3>Servi√ßos de tecnologia da informa√ß√£o</h3>
<h3>INDUSTRY_SCIENTIFIC_INSTRUMENTS</h3>
<h3>Ferramentas cient√≠ficas e t√©cnicas</h3>
<h3>INDUSTRY_SEMICONDUCTOR_EQUIPMENT</h3>
<h3>Equipamentos e materiais semicondutores</h3>
<h3>INDUSTRY_SEMICONDUCTORS</h3>
<h3>Semicondutores</h3>
<h3>INDUSTRY_SOFTWARE_APPLICATION</h3>
<h3>Software - Aplicativos</h3>
<h3>INDUSTRY_SOFTWARE_INFRASTRUCTURE</h3>
<h3>Software - Infraestrutura</h3>
<h3>INDUSTRY_SOLAR</h3>
<h3>Energia solar</h3>
<h3>Servi√ßos p√∫blicos</h3>
<h3>INDUSTRY_UTILITIES_DIVERSIFIED</h3>
<h3>Servi√ßos p√∫blicos - Diversificado</h3>
<h3>INDUSTRY_UTILITIES_POWERPRODUCERS</h3>
<h3>Servi√ßos p√∫blicos - Produtores de</h3>
energia
independentes
<h3>INDUSTRY_UTILITIES_RENEWABLE</h3>
<h3>Servi√ßos p√∫blicos - Energia renov√°vel</h3>
<h3>INDUSTRY_UTILITIES_REGULATED_ELECTRIC</h3>
<h3>Servi√ßos</h3>
p√∫blicos 
- 
<h3>Companhias</h3>
el√©tricas
reguladas
<h3>INDUSTRY_UTILITIES_REGULATED_GAS</h3>
Servi√ßos p√∫blicos - Empresas de g√°s reguladas</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
892
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>INDUSTRY_UTILITIES_REGULATED_WATER</h3>
<h3>Servi√ßos</h3>
p√∫blicos 
- 
<h3>Companhias</h3>
el√©tricas
reguladas</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
893
<h3>Propriedades da Conta</h3>
Para obter informa√ß√µes sobre a conta atual existem v√°rias fun√ß√µes: AccountInfoInteger(),
AccountInfoDouble() e AccountInfoString(). Os valores dos par√¢metros destas fun√ß√µes podem aceitar
valores das enumera√ß√µes de ENUM_ACCOUNT_INFO.
<h3>Para a fun√ß√£o AccountInfoInteger()</h3>
<h3>ENUM_ACCOUNT_INFO_INTEGER</h3>
<h3>Identificador</h3>
<h3>Descri√ß</h3>
√£o
<h3>Tipo</h3>
<h3>ACCOUNT_LOGIN</h3>
<h3>N√∫mero</h3>
da
conta
long
<h3>ACCOUNT_TRADE_MODE</h3>
<h3>Modo</h3>
de
negocia
√ß√£o da
conta
<h3>ENUM_ACCOUNT_TRADE_MODE</h3>
<h3>ACCOUNT_LEVERAGE</h3>
<h3>Alavanc</h3>
agem
da
conta
long
<h3>ACCOUNT_LIMIT_ORDERS</h3>
<h3>N√∫mero</h3>
permiti
do
m√°xim
o 
de
ordens
penden
tes
ativas
int
<h3>ACCOUNT_MARGIN_SO_MODE</h3>
<h3>Modo</h3>
para
definir
a
marge
m
permiti
da
m√≠nima
<h3>ENUM_ACCOUNT_STOPOUT_MODE</h3>
<h3>ACCOUNT_TRADE_ALLOWED</h3>
<h3>Negocia</h3>
√ß√£o
permiti
da para
a conta
atual
bool</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
894
<h3>Identificador</h3>
<h3>Descri√ß</h3>
√£o
<h3>Tipo</h3>
<h3>ACCOUNT_TRADE_EXPERT</h3>
<h3>Negocia</h3>
√ß√£o
permiti
da para
um
<h3>Expert</h3>
<h3>Advisor</h3>
bool
<h3>ACCOUNT_MARGIN_MODE</h3>
<h3>Modo</h3>
de
c√°lculo
da
marge
m
<h3>ENUM_ACCOUNT_MARGIN_MODE</h3>
<h3>ACCOUNT_CURRENCY_DIGITS</h3>
<h3>N√∫mero</h3>
de
casas
decimai
s, para
a
moeda
da
conta,
necess√°
rio para
exibir
com
precis√£
o 
os
resulta
dos da
negocia
√ß√£o
int
<h3>ACCOUNT_FIFO_CLOSE</h3>
<h3>Indica</h3>
que 
a
posi√ß√£o
pode
ser
fechada
apenas
pelo
princ√≠pi
o FIFO.
<h3>Se</h3>
o
valor
da
proprie
bool</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
895
<h3>Identificador</h3>
<h3>Descri√ß</h3>
√£o
<h3>Tipo</h3>
dade
for
igual a
true,
ser√°
permiti
do
fechar
a
posi√ß√£o
de cada
s√≠mbolo
apenas
segund
o 
a
ordem
em que
foram
abertas
, 
quer
dizer,
primeir
o, 
a
mais
antiga,
em
seguida
, 
a
mais
recente
e assim
por
diante.
<h3>Ao</h3>
tentar
fechar
posi√ß√µe
s 
em
uma
ordem
diferen
te,
aparece
r√° 
um
erro. 
<h3>Para</h3>
contas</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
896
<h3>Identificador</h3>
<h3>Descri√ß</h3>
√£o
<h3>Tipo</h3>
sem
registo
de
posi√ß√µe
s
usando
cobertu
ra
(ACCOU
<h3>NT_MA</h3>
<h3>RGIN_M</h3>
<h3>ODE!=A</h3>
<h3>CCOUN</h3>
<h3>T_MAR</h3>
<h3>GIN_M</h3>
<h3>ODE_RE</h3>
<h3>TAIL_H</h3>
<h3>EDGING</h3>
), 
a
proprie
dade
sempre
ser√°
igual a
false 
<h3>ACCOUNT_HEDGE_ALLOWED</h3>
<h3>Indica</h3>
que s√£o
permiti
das
posi√ß√µe
s
opostas
de um
s√≠mbolo
de cada
vez
bool
<h3>Para a fun√ß√£o AccountInfoDouble()</h3>
<h3>ENUM_ACCOUNT_INFO_DOUBLE</h3>
<h3>Identificador</h3>
<h3>Descri√ß</h3>
√£o
<h3>Tipo</h3>
<h3>ACCOUNT_BALANCE</h3>
<h3>Saldo</h3>
da
conta
na
double</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
897
<h3>Identificador</h3>
<h3>Descri√ß</h3>
√£o
<h3>Tipo</h3>
moeda
de
dep√≥sit
o
<h3>ACCOUNT_CREDIT</h3>
<h3>Cr√©dito</h3>
da
conta
na
moeda
de
dep√≥sit
o
double
<h3>ACCOUNT_PROFIT</h3>
<h3>Lucro</h3>
atual
de uma
conta
na
moeda
de
dep√≥sit
o
double
<h3>ACCOUNT_EQUITY</h3>
<h3>Saldo a</h3>
mercad
o 
da
conta
na
moeda
de
dep√≥sit
o
double
<h3>ACCOUNT_MARGIN</h3>
<h3>Marge</h3>
m 
da
conta
usada
na
moeda
de
dep√≥sit
o
double
<h3>ACCOUNT_MARGIN_FREE</h3>
<h3>Marge</h3>
m livre
de uma
conta
na
moeda
double</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
898
<h3>Identificador</h3>
<h3>Descri√ß</h3>
√£o
<h3>Tipo</h3>
de
dep√≥sit
o
<h3>ACCOUNT_MARGIN_LEVEL</h3>
<h3>N√≠vel</h3>
de
marge
m 
de
conta
em
percent
agem
double
<h3>ACCOUNT_MARGIN_SO_CALL</h3>
<h3>N√≠vel</h3>
de
chamad
a 
de
marge
m.
<h3>Depend</h3>
endo da
defini√ß
√£o,
<h3>ACCOU</h3>
<h3>NT_MA</h3>
<h3>RGIN_S</h3>
<h3>O_MOD</h3>
<h3>E</h3>
√©
express
o 
em
percent
agem
ou em
moeda
de
dep√≥sit
o
double
<h3>ACCOUNT_MARGIN_SO_SO</h3>
<h3>N√≠vel</h3>
de
marge
m 
de
<h3>Stop</h3>
<h3>Out</h3>
(encerr
amento
for√ßado
).
<h3>Depend</h3>
double</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
899
<h3>Identificador</h3>
<h3>Descri√ß</h3>
√£o
<h3>Tipo</h3>
endo da
defini√ß
√£o,
<h3>ACCOU</h3>
<h3>NT_MA</h3>
<h3>RGIN_S</h3>
<h3>O_MOD</h3>
<h3>E</h3>
√©
express
o 
em
percent
agem
ou em
moeda
de
dep√≥sit
o
<h3>ACCOUNT_MARGIN_INITIAL</h3>
<h3>Marge</h3>
m
inicial.
<h3>O</h3>
montan
te
reserva
do
numa
conta
para
cobrir a
marge
m 
de
todas
as
ordens
penden
tes
double
<h3>ACCOUNT_MARGIN_MAINTENANCE</h3>
<h3>Marge</h3>
m 
de
manute
n√ß√£o. O
patrim√¥
nio
l√≠quido
m√≠nimo
reserva
do
numa
double</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
900
<h3>Identificador</h3>
<h3>Descri√ß</h3>
√£o
<h3>Tipo</h3>
conta
para
cobrir o
valor
m√≠nimo
de
todas
as
posi√ß√µe
s 
em
aberto
<h3>ACCOUNT_ASSETS</h3>
<h3>Os</h3>
ativos
atuais
de uma
conta
double
<h3>ACCOUNT_LIABILITIES</h3>
<h3>As</h3>
respons
abilidad
es
atuais
de uma
conta
double
<h3>ACCOUNT_COMMISSION_BLOCKED</h3>
<h3>O valor</h3>
da
comiss
√£o
bloquea
da
atual
numa
conta
double
<h3>Para a fun√ß√£o AccountInfoString()</h3>
<h3>ENUM_ACCOUNT_INFO_STRING</h3>
<h3>Identificador</h3>
<h3>Descri√ß</h3>
√£o
<h3>Tipo</h3>
<h3>ACCOUNT_NAME</h3>
<h3>Nome</h3>
do
cliente
string
<h3>ACCOUNT_SERVER</h3>
<h3>Nome</h3>
do
servido
string</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
901
<h3>Identificador</h3>
<h3>Descri√ß</h3>
√£o
<h3>Tipo</h3>
r 
de
negocia
√ß√£o
<h3>ACCOUNT_CURRENCY</h3>
<h3>Moeda</h3>
da
conta
string
<h3>ACCOUNT_COMPANY</h3>
<h3>Nome</h3>
de uma
empres
a 
que
serve a
conta
string
Existem v√°rios tipos de contas que podem ser abertos em um servidor de negocia√ß√£o. O tipo de conta
sobre o qual um programa MQL5 est√° sendo executado pode ser encontrado usando a enumera√ß√£o
ENUM_ACCOUNT_TRADE_MODE.
<h3>ENUM_ACCOUNT_TRADE_MODE</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>ACCOUNT_TRADE_MODE_DEMO</h3>
<h3>Conta de Demonstra√ß√£o</h3>
<h3>ACCOUNT_TRADE_MODE_CONTEST</h3>
<h3>Conta de torneio</h3>
<h3>ACCOUNT_TRADE_MODE_REAL</h3>
<h3>Conta real</h3>
No caso do saldo a mercado n√£o ser suficiente para manter posi√ß√µes em aberto ocorre a situa√ß√£o de
Stop Out, ou seja o encerramento for√ßado. O n√≠vel de margem m√≠nimo no qual o Stop Out ocorre pode
ser definido em percentagem ou em termos monet√°rios. Para descobrir a configura√ß√£o de modo da
conta use a enumera√ß√£o ENUM_ACCOUNT_STOPOUT_MODE.
<h3>ENUM_ACCOUNT_STOPOUT_MODE</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>ACCOUNT_STOPOUT_MODE_PERCENT</h3>
Modo stop out da conta em percentagem
<h3>ACCOUNT_STOPOUT_MODE_MONEY</h3>
Modo stop out da conta em dinheiro
<h3>ENUM_ACCOUNT_MARGIN_MODE</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>ACCOUNT_MARGIN_MODE_RETAIL_NETTING</h3>
Usa-se para o mercado de balc√£o ao registrar
as posi√ß√µes no modo &quot;compensa√ß√£o&quot; (segundo
um s√≠mbolo pode existir apenas uma posi√ß√£o).
O c√°lculo da margem √© realizado com base no
tipo 
de 
instrumento
(SYMBOL_TRADE_CALC_MODE). </p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
902
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>ACCOUNT_MARGIN_MODE_EXCHANGE</h3>
Usa-se para o mercado de bolsa. O c√°lculo da
margem √© realizado com base nos descontos
indicados nas configura√ß√µes dos instrumentos.
<h3>Os descontos s√£o estabelecidos pela corretora,</h3>
no entanto n√£o podem ser inferiores aos
valores determinados pela bolsa.
<h3>ACCOUNT_MARGIN_MODE_RETAIL_HEDGING</h3>
Usa-se para o mercado de balc√£o ao ser
realizado o registro independente de posi√ß√µes
(&quot;cobertura&quot;, segundo um s√≠mbolo, podem
existir v√°rias posi√ß√µes). O c√°lculo da margem
realiza-se com base no tipo de instrumento
(SYMBOL_TRADE_CALC_MODE) e tendo em
conta o tamanho da margem de cobertura
(SYMBOL_MARGIN_HEDGED).
Os dados do tipo float s√£o exibidos com 5 d√≠gitos ap√≥s o ponto decimal.
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- Nome da empresa
   string company=AccountInfoString(ACCOUNT_COMPANY);
//--- Nome do cliente
   string name=AccountInfoString(ACCOUNT_NAME);
//--- N√∫mero da conta
   long login=AccountInfoInteger(ACCOUNT_LOGIN);
//--- Nome do servidor
   string server=AccountInfoString(ACCOUNT_SERVER);
//--- Moeda da conta
   string currency=AccountInfoString(ACCOUNT_CURRENCY);
//--- Conta demo, de torneio ou real
   ENUM_ACCOUNT_TRADE_MODE account_type=(ENUM_ACCOUNT_TRADE_MODE)AccountInfoInteger(AC
//--- Agora transforma o valor da enumera√ß√£o em uma forma intelig√≠vel
   string trade_mode;
   switch(account_type)
     {
      case  ACCOUNT_TRADE_MODE_DEMO:
         trade_mode=&quot;demo&quot;;
         break;
      case  ACCOUNT_TRADE_MODE_CONTEST:
         trade_mode=&quot;concurso&quot;;
         break;
      default:
         trade_mode=&quot;real&quot;;
         break;</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
903
</p>
<pre><code class="language-mql5">
     }
//--- Stop Out √© definida em percentagem ou dinheiro
   ENUM_ACCOUNT_STOPOUT_MODE stop_out_mode=(ENUM_ACCOUNT_STOPOUT_MODE)AccountInfoInteg
//--- Obt√©m os valores dos n√≠veis quando a Chamada de Margem e Stop Out (encerramento 
   double margin_call=AccountInfoDouble(ACCOUNT_MARGIN_SO_CALL);
   double stop_out=AccountInfoDouble(ACCOUNT_MARGIN_SO_SO);
//--- Exibe informa√ß√µes resumidas sobre a conta
   PrintFormat(&quot;A conta do do cliente &#x27;%s&#x27; #%d %s aberta em &#x27;%s&#x27; no servidor &#x27;%s&#x27;&quot;,
               name,login,trade_mode,company,server);
   PrintFormat(&quot;Moeda da conta - %s, n√≠veis de MarginCall e StopOut s√£o configurados e
               currency,(stop_out_mode==ACCOUNT_STOPOUT_MODE_PERCENT)?&quot;porcentagem&quot;:&quot; 
   PrintFormat(&quot;MarginCall=%G, StopOut=%G&quot;,margin_call,stop_out);
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
904
<h3>Estat√≠sticas de Teste</h3>
Depois que o teste √© finalizado, diferentes par√¢metros das estat√≠sticas dos resultados das negocia√ß√µes
s√£o calculados. Os valores dos par√¢metros podem ser obtidos usando a fun√ß√£o TesterStatistics(),
atrav√©s da especifica√ß√£o do par√¢metro ID a partir da enumera√ß√£o ENUM_STATISTICS.
Embora dois tipo de par√¢metros (int e double) serem usados nos c√°lculos das est√°ticas, a fun√ß√£o
retorna todos os valores na forma double. Todos os valores estat√≠sticos do tipo double s√£o expressos
na moeda corrente por default, a mesmo que especificado de outro modo.
<h3>ENUM_STATISTICS</h3>
<h3>ID</h3>
<h3>Descri√ß√£o do</h3>
par√¢metro estat√≠stico
<h3>Tipo</h3>
<h3>STAT_INITIAL_DEPOSIT</h3>
<h3>O valor do dep√≥sito</h3>
inicial
double
<h3>STAT_WITHDRAWAL</h3>
<h3>Dinheiro</h3>
sacado 
da
conta
double
<h3>STAT_PROFIT</h3>
<h3>Lucro l√≠quido ap√≥s o</h3>
teste, 
a 
soma 
de
<h3>STAT_GROSS_PROFIT</h3>
e STAT_GROSS_LOSS
(STAT_GROSS_LOSS √©
sempre menor ou igual
a zero)
double
<h3>STAT_GROSS_PROFIT</h3>
<h3>Lucro total, a soma de</h3>
todas as negocia√ß√µes
lucrativas (positivas).
<h3>O valor √© maior ou</h3>
igual a zero
double
<h3>STAT_GROSS_LOSS</h3>
<h3>Preju√≠zo total, a soma</h3>
de 
todas 
as
negocia√ß√µes
negativas. O valor √©
menor ou igual a zero
double
<h3>STAT_MAX_PROFITTRADE</h3>
<h3>Lucro</h3>
m√°ximo 
- 
o
maior 
valor 
dentre
todas as negocia√ß√µes
lucrativas O valor √©
maior ou igual a zero
double
<h3>STAT_MAX_LOSSTRADE</h3>
<h3>Preju√≠zo M√°ximo - o</h3>
menor 
valor 
dentre
todos as negocia√ß√µes
(trades) perdedoras O
valor √© menor ou igual
a zero
double</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
905
<h3>ID</h3>
<h3>Descri√ß√£o do</h3>
par√¢metro estat√≠stico
<h3>Tipo</h3>
<h3>STAT_CONPROFITMAX</h3>
<h3>Lucro m√°ximo em uma</h3>
s√©rie de negocia√ß√µes
lucrativas. O valor √©
maior ou igual a zero
double
<h3>STAT_CONPROFITMAX_TRADES</h3>
<h3>O</h3>
n√∫mero 
de
negocia√ß√µes 
que
formaram
oSTAT_CONPROFITMA
<h3>X(lucro</h3>
m√°ximo 
em
uma 
s√©rie 
de
negocia√ß√µes
lucrativas)
int
<h3>STAT_MAX_CONWINS</h3>
<h3>O lucro total da mais</h3>
longa 
s√©rie 
de
negocia√ß√µes lucrativas
double
<h3>STAT_MAX_CONPROFIT_TRADES</h3>
<h3>O</h3>
n√∫mero 
de
negocia√ß√µes na mais
longa 
s√©rie 
de
negocia√ß√µes
lucrativasSTAT_MAX_C
<h3>ONWINS</h3>
int
<h3>STAT_CONLOSSMAX</h3>
<h3>Preju√≠zo m√°ximo em</h3>
uma 
s√©rie 
de
negocia√ß√µes
perdedoras. O valor √©
menor ou igual a zero
double
<h3>STAT_CONLOSSMAX_TRADES</h3>
<h3>O</h3>
n√∫mero 
de
negocia√ß√µes 
(trades)
que 
formaram
oSTAT_CONLOSSMAX(
m√°ximo preju√≠zo em
uma 
s√©rie 
de
negocia√ß√µes
perdedoras)
int
<h3>STAT_MAX_CONLOSSES</h3>
<h3>O total de preju√≠zo da</h3>
mais longa s√©rie de
negocia√ß√µes
perdedoras
double
<h3>STAT_MAX_CONLOSS_TRADES</h3>
<h3>O</h3>
n√∫mero 
de
negocia√ß√µes na mais
longa 
s√©rie 
de
negocia√ß√µes
perdedoras
int</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
906
<h3>ID</h3>
<h3>Descri√ß√£o do</h3>
par√¢metro estat√≠stico
<h3>Tipo</h3>
<h3>STAT_MAX_CONLOSSE</h3>
<h3>S</h3>
<h3>STAT_BALANCEMIN</h3>
<h3>Valor do saldo m√≠nimo</h3>
double
<h3>STAT_BALANCE_DD</h3>
<h3>M√°xima</h3>
queda 
de
saldo 
em 
termos
monet√°rios 
<h3>Em</h3>
um
processo 
de
negocia√ß√£o, um saldo
pode sofrer numerosas
quedas; aqui o maior
valor √© tomado
double
<h3>STAT_BALANCEDD_PERCENT</h3>
<h3>Queda de saldo como</h3>
uma percentagem que
foi 
registrada 
no
momento da m√°xima
queda do saldo em
termos 
monet√°rios
(STAT_BALANCE_DD).
double
<h3>STAT_BALANCE_DDREL_PERCENT</h3>
<h3>M√°xima</h3>
queda 
de
saldo 
com 
uma
percentagem. Em um
processo 
de
negocia√ß√£o, um saldo
pode sofrer numerosas
quedas, para cada qual
a 
valor 
da 
queda
relativa 
em
percentagem 
√©
calculada. 
<h3>O</h3>
maior
valor √© retornado
double
<h3>STAT_BALANCE_DD_RELATIVE</h3>
<h3>Queda de saldo em</h3>
termos monet√°rios que
foi 
registrada 
no
momento da m√°xima
queda do saldo como
uma 
percentagem
(STAT_BALANCE_DDRE
L_PERCENT).
double
<h3>STAT_EQUITYMIN</h3>
<h3>M√≠nimo valor do saldo</h3>
a mercado
double
<h3>STAT_EQUITY_DD</h3>
<h3>M√°xima</h3>
queda 
do
saldo a mercado em
termos 
monet√°rios.
<h3>Em um processo de</h3>
double</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
907
<h3>ID</h3>
<h3>Descri√ß√£o do</h3>
par√¢metro estat√≠stico
<h3>Tipo</h3>
negocia√ß√£o,
numerosas 
quedas
podem 
ocorrer 
no
saldo a mercado; aqui
o 
maior 
valor 
√©
tomado
<h3>STAT_EQUITYDD_PERCENT</h3>
<h3>Queda</h3>
em
percentagem que foi
registrada 
no
momento da m√°xima
queda 
do 
saldo 
a
mercado em termos
monet√°rios
(STAT_EQUITY_DD).
double
<h3>STAT_EQUITY_DDREL_PERCENT</h3>
<h3>M√°xima</h3>
queda 
do
saldo a mercado como
uma percentagem. Em
um 
processo 
de
negocia√ß√£o, um saldo
a mercado pode sofrer
numerosas 
quedas,
para cada qual o valor
da queda relativa em
percentagem 
√©
calculado. 
<h3>O</h3>
maior
valor √© retornado
double
<h3>STAT_EQUITY_DD_RELATIVE</h3>
<h3>Queda</h3>
do 
saldo 
a
mercado em termos
monet√°rios 
que 
foi
registrada 
no
momento da m√°xima
queda 
do 
saldo 
a
mercado 
em
percentagem
(STAT_EQUITY_DDREL
_PERCENT).
double
<h3>STAT_EXPECTED_PAYOFF</h3>
<h3>Recompensa esperada</h3>
double
<h3>STAT_PROFIT_FACTOR</h3>
<h3>Fator de lucro, igual a</h3>
raz√£o 
de
<h3>STAT_GROSS_PROFIT/</h3>
STAT_GROSS_LOSS.
<h3>Se</h3>
<h3>STAT_GROSS_LOSS=0,</h3>
o fator de lucro √© igual
aDBL_MAX
double</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
908
<h3>ID</h3>
<h3>Descri√ß√£o do</h3>
par√¢metro estat√≠stico
<h3>Tipo</h3>
<h3>STAT_RECOVERY_FACTOR</h3>
<h3>Fator de recupera√ß√£o,</h3>
igual 
a 
raz√£o 
de
<h3>STAT_PROFIT/STAT_B</h3>
<h3>ALANCE_DD</h3>
double
<h3>STAT_SHARPE_RATIO</h3>
<h3>Raz√£o Sharpe</h3>
double
<h3>STAT_MIN_MARGINLEVEL</h3>
<h3>Valor m√≠nimo do n√≠vel</h3>
de margem
double
<h3>STAT_CUSTOM_ONTESTER</h3>
<h3>O valor do crit√©rio de</h3>
otimiza√ß√£o
customizado calculado
retornado atrav√©s da
fun√ß√£o OnTester()
double
<h3>STAT_DEALS</h3>
<h3>N√∫mero de opera√ß√µes</h3>
(deals)
int
<h3>STAT_TRADES</h3>
<h3>N√∫mero</h3>
de
negocia√ß√µes (trades)
int
<h3>STAT_PROFIT_TRADES</h3>
<h3>Negocia√ß√µes</h3>
compradas lucrativas
int
<h3>STAT_LOSS_TRADES</h3>
<h3>Negocia√ß√µes</h3>
perdedoras
int
<h3>STAT_SHORT_TRADES</h3>
<h3>Negocia√ß√µes Vendidas</h3>
int
<h3>STAT_LONG_TRADES</h3>
<h3>Negocia√ß√µes</h3>
<h3>Compradas</h3>
int
<h3>STAT_PROFIT_SHORTTRADES</h3>
<h3>Negocia√ß√µes vendidas</h3>
lucrativas
int
<h3>STAT_PROFIT_LONGTRADES</h3>
<h3>Negocia√ß√µes</h3>
compradas lucrativas
int
<h3>STAT_PROFITTRADES_AVGCON</h3>
<h3>Comprimento</h3>
m√©dio
de 
uma 
s√©rie 
de
negocia√ß√µes lucrativas
int
<h3>STAT_LOSSTRADES_AVGCON</h3>
<h3>Comprimento</h3>
m√©dio
de 
uma 
s√©rie 
de
negocia√ß√µes
perdedores
int
<h3>STAT_COMPLEX_CRITERION</h3>
<h3>Crit√©rio de otimiza√ß√£o</h3>
complexo</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
909
<h3>Constantes de Negocia√ß√£o (Trade)</h3>
As v√°rias constantes usadas para programar estrat√©gias de negocia√ß√£o est√£o divididas nos seguintes
grupos:
¬∑ Propriedades de banco de dados de hist√≥rico ‚Äì recebimento de informa√ß√µes gerais sobre um ativo;
¬∑ Propriedades de ordem ‚Äì obten√ß√£o de informa√ß√µes sobre ordens de negocia√ß√£o;
¬∑ Propriedades de posi√ß√£o ‚Äì obten√ß√£o de informa√ß√µes sobre posi√ß√µes correntes;
¬∑ Propriedades de uma opera√ß√£o (deal) ‚Äì obten√ß√£o de informa√ß√µes sobre opera√ß√µes (deals);
¬∑ Tipos de opera√ß√µes de negocia√ß√£o (trade) ‚Äì descri√ß√£o das opera√ß√µes de negocia√ß√£o dispon√≠veis;
¬∑ Tipos de transa√ß√£o de negocia√ß√£o - descri√ß√£o dos poss√≠veis tipos de transa√ß√µes de negocia√ß√£o;
¬∑ Ordens de negocia√ß√£o no DOM (Profundidade de Mercado) ‚Äì separa√ß√£o de ordens de acordo com a
dire√ß√£o de uma opera√ß√£o solicitada.</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
910
Propriedades de uma Base Hist√≥rica de Dados
Ao acessar uma s√©rie de tempo a fun√ß√£o SeriesInfoInteger() √© usada para obter informa√ß√µes adicionais
de um ativo (symbol). Um identificador de uma propriedade solicitada √© passada como par√¢metro da
fun√ß√£o. O identificar pode ser um dos valores do ENUM_SERIES_INFO_INTEGER.
<h3>ENUM_SERIES_INFO_INTEGER</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo</h3>
<h3>SERIES_BARS_COUNT</h3>
<h3>Quantidade de barras para</h3>
o 
ativo-per√≠odo 
para 
o
momento corrente
long
<h3>SERIES_FIRSTDATE</h3>
<h3>A primeira data para o</h3>
ativo-per√≠odo 
para 
o
momento corrente
datetime
<h3>SERIES_LASTBAR_DATE</h3>
<h3>Hora de abertura da √∫ltima</h3>
barra do ativo-per√≠odo
datetime
<h3>SERIES_SERVER_FIRSTDATE</h3>
<h3>A primeira data no hist√≥rico</h3>
do 
ativo 
no 
servidor
independentemente 
da
janela de tempo
datetime
<h3>SERIES_TERMINAL_FIRSTDATE</h3>
<h3>A primeira data no hist√≥rico</h3>
do 
ativo 
no 
terminal
cliente, independentemente
da janela de tempo
datetime
<h3>SERIES_SYNCHRONIZED</h3>
<h3>Flag de sincroniza√ß√£o de</h3>
dados de um ativo/per√≠odo
para o momento corrente
bool</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
911
<h3>Propriedades de uma Ordem</h3>
As solicita√ß√µes para executar opera√ß√µes de negocia√ß√£o s√£o formalizadas como ordens. Cada ordem
tem uma variedade de propriedades para leitura. As informa√ß√µes sobre elas podem ser obtidas usando
as fun√ß√µes OrderGet...() e HistoryOrderGet...().
Para as fun√ß√µes OrderGetInteger() e HistoryOrderGetInteger()
<h3>ENUM_ORDER_PROPERTY_INTEGER</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo</h3>
<h3>ORDER_TICKET</h3>
<h3>Bilhete</h3>
da
ordem. 
<h3>Um</h3>
n√∫mero
exclusivo
atribu√≠do 
a
cada ordem
long
<h3>ORDER_TIME_SETUP</h3>
<h3>Hora</h3>
de
configura√ß√£o
de uma ordem
datetime
<h3>ORDER_TYPE</h3>
<h3>Tipo de ordem</h3>
<h3>ENUM_ORDER_TYPE</h3>
<h3>ORDER_STATE</h3>
<h3>Estado de uma</h3>
ordem
<h3>ENUM_ORDER_STATE</h3>
<h3>ORDER_TIME_EXPIRATION</h3>
<h3>Hora</h3>
de
expira√ß√£o 
de
uma ordem
datetime
<h3>ORDER_TIME_DONE</h3>
<h3>Hora</h3>
de
execu√ß√£o 
ou
cancelamento
de uma ordem
datetime
<h3>ORDER_TIME_SETUP_MSC</h3>
<h3>O tempo para</h3>
colocar 
uma
ordem 
de
execu√ß√£o em
milissegundos
desde
01.01.1970
long
<h3>ORDER_TIME_DONE_MSC</h3>
<h3>Tempo</h3>
de
execu√ß√£o 
e
cancelamento
de ordens em
milissegundos
desde
01.01.1970
long
<h3>ORDER_TYPE_FILLING</h3>
<h3>Type</h3>
de
preenchiment
<h3>ENUM_ORDER_TYPE_FILLING</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
912
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo</h3>
o 
de 
uma
ordem
<h3>ORDER_TYPE_TIME</h3>
tempo 
de
dura√ß√£o 
de
uma ordem
<h3>ENUM_ORDER_TYPE_TIME</h3>
<h3>ORDER_MAGIC</h3>
<h3>ID</h3>
de 
um
<h3>Expert Advisor</h3>
que colocou a
ordem
(projetado
para garantir
que 
cada
<h3>Expert Advisor</h3>
coloque 
seu
pr√≥prio
n√∫mero √∫nico)
long
<h3>ORDER_REASON</h3>
<h3>Raz√£o</h3>
ou
origem para a
coloca√ß√£o 
da
ordem
<h3>ENUM_ORDER_REASON</h3>
<h3>ORDER_POSITION_ID</h3>
<h3>Identificador</h3>
de 
posi√ß√£o
que √© definido
para 
uma
ordem 
t√£o
logo 
ela 
√©
executada.
<h3>Cada</h3>
ordem
executada
resulta 
em
uma opera√ß√£o
que abre ou
modifica uma
posi√ß√£o 
j√°
existente. 
<h3>O</h3>
identificador
desta 
exata
posi√ß√£o 
√©
atribu√≠da 
√†
ordem
executada
neste
momento.
long
<h3>ORDER_POSITION_BY_ID</h3>
<h3>Identificador</h3>
da 
posi√ß√£o
long</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
913
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo</h3>
oposta para as
ordens do tipo
<h3>Para as fun√ß√µes OrderGetDouble() e HistoryOrderGetDouble()</h3>
<h3>ENUM_ORDER_PROPERTY_DOUBLE</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo</h3>
<h3>ORDER_VOLUME_INITIAL</h3>
<h3>Volume inicial</h3>
de uma ordem
double
<h3>ORDER_VOLUME_CURRENT</h3>
<h3>Volume</h3>
corrente 
de
uma ordem
double
<h3>ORDER_PRICE_OPEN</h3>
<h3>Pre√ßo</h3>
especificado
na ordem
double
<h3>ORDER_SL</h3>
<h3>Valor de Stop</h3>
<h3>Loss</h3>
double
<h3>ORDER_TP</h3>
<h3>Valor de Take</h3>
<h3>Profit</h3>
double
<h3>ORDER_PRICE_CURRENT</h3>
<h3>O</h3>
pre√ßo
corrente 
do
ativo de uma
ordem
double
<h3>ORDER_PRICE_STOPLIMIT</h3>
<h3>O</h3>
pre√ßo 
de
ordem 
<h3>Limit</h3>
para 
uma
ordem
<h3>StopLimit</h3>
double
<h3>Para as fun√ß√µes OrderGetString() e HistoryOrderGetString()</h3>
<h3>ENUM_ORDER_PROPERTY_STRING</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo</h3>
<h3>ORDER_SYMBOL</h3>
<h3>Ativo (symbol)</h3>
de uma ordem
string
<h3>ORDER_COMMENT</h3>
<h3>Coment√°rio</h3>
sobre a ordem
string
Ao enviar uma solicita√ß√£o de negocia√ß√£o usando a fun√ß√£o OrderSend(), algumas opera√ß√µes requerem a
indica√ß√£o do tipo da ordem. O tipo de uma ordem √© especificado no campo type da estrutura especial
MqlTradeRequest, e pode aceitar valores da enumera√ß√£o ENUM_ORDER_TYPE.</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
914
<h3>ENUM_ORDER_TYPE</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>ORDER_TYPE_BUY</h3>
<h3>Ordem de Comprar a Mercado</h3>
<h3>ORDER_TYPE_SELL</h3>
<h3>Ordem de Vender a Mercado</h3>
<h3>ORDER_TYPE_BUY_LIMIT</h3>
<h3>Ordem pendente Buy Limit</h3>
<h3>ORDER_TYPE_SELL_LIMIT</h3>
<h3>Ordem pendente Sell Limit</h3>
<h3>ORDER_TYPE_BUY_STOP</h3>
<h3>Ordem pendente Buy Stop</h3>
<h3>ORDER_TYPE_SELL_STOP</h3>
<h3>Ordem pendente Sell Stop</h3>
<h3>ORDER_TYPE_BUY_STOP_LIMIT</h3>
Ao alcan√ßar o pre√ßo da ordem, uma ordem pendente Buy
<h3>Limit √© colocada no pre√ßo StopLimit</h3>
<h3>ORDER_TYPE_SELL_STOP_LIMIT</h3>
Ao alcan√ßar o pre√ßo da ordem, uma ordem pendente Sell
<h3>Limit √© colocada no pre√ßo StopLimit</h3>
<h3>ORDER_TYPE_CLOSE_BY</h3>
<h3>Ordem de fechamento da posi√ß√£o oposta</h3>
Cada ordem tem um status que descreve o seu estado. Para obter informa√ß√µes, use OrderGetInteger()
ou HistoryOrderGetInteger() com o modificador ORDER_STATE. Valores permitidos s√£o armazenados
na enumera√ß√£o ENUM_ORDEM_STATE.
<h3>ENUM_ORDER_STATE</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>ORDER_STATE_STARTED</h3>
Ordem verificada, mas ainda n√£o aceita pela corretora
(broker)
<h3>ORDER_STATE_PLACED</h3>
<h3>Ordem aceita</h3>
<h3>ORDER_STATE_CANCELED</h3>
<h3>Ordem cancelada pelo cliente</h3>
<h3>ORDER_STATE_PARTIAL</h3>
<h3>Ordem executada parcialmente</h3>
<h3>ORDER_STATE_FILLED</h3>
<h3>Ordem executada completamente</h3>
<h3>ORDER_STATE_REJECTED</h3>
<h3>Ordem rejeitada</h3>
<h3>ORDER_STATE_EXPIRED</h3>
<h3>Ordem expirada</h3>
<h3>ORDER_STATE_REQUEST_ADD</h3>
Ordem est√° sendo registrada (aplica√ß√£o para o sistema de
negocia√ß√£o)
<h3>ORDER_STATE_REQUEST_MODIFY</h3>
Ordem est√° sendo modificada (alterando seus par√¢metros)
<h3>ORDER_STATE_REQUEST_CANCEL</h3>
Ordem est√° sendo exclu√≠da (excluindo a partir do sistema de
negocia√ß√£o)</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
915
Ao enviar uma ordem de negocia√ß√£o para ser executada no momento atual (time in force) √©
necess√°rio especificar o pre√ßo e o volume de compra/venda. Ao fazer isso, vale a pena recordar que
nos mercados financeiros n√£o existe garantia de que num dado momento para dado ativo financeiro
todo o volume solicitado estar√° dispon√≠vel ao pre√ßo pretendido. √â por esse motivo que a realiza√ß√£o de
opera√ß√µes de negocia√ß√£o em tempo real √© regulada pelos modos de execu√ß√£o com base no pre√ßo e no
volume. Os modos, ou seja, as pol√≠ticas de execu√ß√£o, definem as regras para os casos em que o pre√ßo
mudou ou o volume solicitado n√£o pode ser totalmente cumprido no momento.
Modo de execu√ß√£o do pre√ßo - pode ser obtido na propriedade do s√≠mbolo SYMBOL_TRADE_EXEMODE
que cont√©m uma combina√ß√£o de flags a partir da enumera√ß√£o ENUM_SYMBOL_TRADE_EXECUTION. 
<h3>Modo de execu√ß√£o</h3>
<h3>Descri√ß</h3>
√£o
<h3>Valor em ENUM_SYMBOL_TRADE_EXECUTION</h3>
<h3>Modo de execu√ß√£o</h3>
(Request Execution)
<h3>Execu√ß</h3>
√£o 
da
ordem
de
mercad
o 
ao
pre√ßo
previa
mente
recebid
o 
da
correto
ra.
<h3>Antes</h3>
de uma
ordem
de
mercad
o 
ser
enviad
a, s√£o
solicita
dos 
√†
correto
ra 
os
pre√ßos
pelos
qual
ela
ser√°
execut
ada.
<h3>Ap√≥s</h3>
serem
recebid
os, 
a
execu√ß
<h3>SYMBOL_TRADE_EXECUTION_REQUEST</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
916
<h3>Modo de execu√ß√£o</h3>
<h3>Descri√ß</h3>
√£o
<h3>Valor em ENUM_SYMBOL_TRADE_EXECUTION</h3>
√£o 
da
ordem
a 
um
determ
inado
pre√ßo
pode
ser
confir
mada
ou
rejeita
da.
<h3>Execu√ß√£o imediata</h3>
(Instant Execution)
<h3>Execu√ß</h3>
√£o
imedia
ta 
de
uma
ordem
de
mercad
o 
ao
pre√ßo
especif
icado.
<h3>Ao</h3>
enviar
uma
ordem
de
negoci
a√ß√£o
para
ser
execut
ada, a
platafo
rma
substit
ui
automa
ticame
nte os
pre√ßos
atuais
na
ordem.
<h3>SYMBOL_TRADE_EXECUTION_INSTANT</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
917
<h3>Modo de execu√ß√£o</h3>
<h3>Descri√ß</h3>
√£o
<h3>Valor em ENUM_SYMBOL_TRADE_EXECUTION</h3>
¬∑ S
e
a
c
o
r
r
e
t
o
r
a
a
c
e
i
t
a
r
o
p
r
e
√ß
o
,
a
o
r
d
e
m
s
e
r
√°
e
x
e
c
u
t
a
d
a
.
¬∑ S
e</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
918
<h3>Modo de execu√ß√£o</h3>
<h3>Descri√ß</h3>
√£o
<h3>Valor em ENUM_SYMBOL_TRADE_EXECUTION</h3>
a
c
o
r
r
e
t
o
r
a
n
√£
o
a
c
e
i
t
a
r
o
p
r
e
√ß
o
s
o
l
i
c
i
t
a
d
o
,
o
c
o
r
r
e
a
c
h
a
m</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
919
<h3>Modo de execu√ß√£o</h3>
<h3>Descri√ß</h3>
√£o
<h3>Valor em ENUM_SYMBOL_TRADE_EXECUTION</h3>
a
d
a
&quot;
r
e
c
o
t
a
√ß
√£
o
&quot;
(
<h3>R</h3>
e
q
u
o
t
e
)
-
a
c
o
r
r
e
t
o
r
a
r
e
t
o
r
n
a
o
s
p
r
e
√ß
o</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
920
<h3>Modo de execu√ß√£o</h3>
<h3>Descri√ß</h3>
√£o
<h3>Valor em ENUM_SYMBOL_TRADE_EXECUTION</h3>
s
a
o
s
q
u
a
i
s
a
o
r
d
e
m
p
o
d
e
s
e
r
e
x
e
c
u
t
a
d
a
.
<h3>Execu√ß√£o a mercado</h3>
(Market Execution)
<h3>A</h3>
decis√£o
sobre o
pre√ßo
de
execu√ß
√£o 
√©
feita
pela
correto
ra sem
acordo
adicion
al com
<h3>SYMBOL_TRADE_EXECUTION_MARKET</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
921
<h3>Modo de execu√ß√£o</h3>
<h3>Descri√ß</h3>
√£o
<h3>Valor em ENUM_SYMBOL_TRADE_EXECUTION</h3>
o
trader.
<h3>O</h3>
envio
de uma
ordem
a
mercad
o nesta
modali
dade
implica
que se
aceita
antecip
adame
nte 
o
pre√ßo a
que
ser√°
execut
ada.
<h3>Execu√ß√£o de bolsa</h3>
(Exchange Execution)
<h3>As</h3>
opera√ß
√µes de
negoci
a√ß√£o
s√£o
realiza
das aos
pre√ßos
das
cota√ß√µ
es
atuais
de
mercad
o.
<h3>SYMBOL_TRADE_EXECUTION_EXCHANGE</h3>
 Pol√≠tica de preenchimento de volume‚Äì especificada na propriedade ORDER_TYPE_FILLING da ordem
e s√≥ pode conter valores da enumera√ß√£o ENUM_ORDER_TYPE_FILLING
<h3>Pol√≠tica de execu√ß√£o</h3>
<h3>Descri√ß</h3>
√£o
<h3>Valor em ENUM_ORDER_TYPE_FILLING</h3>
<h3>Tudo/Nada (Fill or Kill)</h3>
<h3>A</h3>
ordem
<h3>ORDER_FILLING_FOK</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
922
<h3>Pol√≠tica de execu√ß√£o</h3>
<h3>Descri√ß</h3>
√£o
<h3>Valor em ENUM_ORDER_TYPE_FILLING</h3>
pode
ser
execut
ada
apenas
com o
volume
especif
icado.
<h3>Se n√£o</h3>
houver
volume
do
ativo
financ
eiro no
merca
do n√£o
for
suficie
nte no
mome
nto, a
ordem
n√£o
ser√°
execut
ada.
<h3>O</h3>
volume
necess
√°rio
pode
ser
compo
sto por
divers
as
ofertas
atualm
ente
dispon√≠
veis no
merca
do.</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
923
<h3>Pol√≠tica de execu√ß√£o</h3>
<h3>Descri√ß</h3>
√£o
<h3>Valor em ENUM_ORDER_TYPE_FILLING</h3>
<h3>A</h3>
possibi
lidade
de
usar
ordens
<h3>FOK √©</h3>
determ
inada
no
servid
or 
de
negoci
a√ß√£o.
<h3>Tudo/Parcial (Immediate or Cancel)</h3>
<h3>O</h3>
trader
aceita
execut
ar 
a
transa
√ß√£o
com o
volume
m√°xim
o
dispon√≠
vel no
merca
do,
dentro
dos
limites
especif
icados
na
ordem.
<h3>Se</h3>
a
execu√ß
√£o
comple
ta n√£o
for
poss√≠v
el, 
a
ordem
ser√°
execut
<h3>ORDER_FILLING_IOC</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
924
<h3>Pol√≠tica de execu√ß√£o</h3>
<h3>Descri√ß</h3>
√£o
<h3>Valor em ENUM_ORDER_TYPE_FILLING</h3>
ada
com o
volume
dispon√≠
vel, e
o
volume
n√£o
execut
ado da
ordem
ser√°
cancel
ado.
<h3>A</h3>
possibi
lidade
de
usar
ordens
<h3>IOC √©</h3>
determ
inada
no
servid
or 
de
negoci
a√ß√£o.
<h3>Passiva (Book or Cancel)</h3>
<h3>Uma</h3>
ordem
<h3>BoC</h3>
implica
que o
pedido
s√≥
pode
ser
coloca
do no
livro
de
ofertas
e n√£o
pode
ser
execut
<h3>ORDER_FILLING_BOC</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
925
<h3>Pol√≠tica de execu√ß√£o</h3>
<h3>Descri√ß</h3>
√£o
<h3>Valor em ENUM_ORDER_TYPE_FILLING</h3>
ado
imedia
tament
e.  Se
a
ordem
pode
ser
execut
ada
imedia
tament
e
quando
coloca
da, ela
√©
retirad
a.
<h3>Na</h3>
verdad
e, 
a
pol√≠tic
a 
do
<h3>COB</h3>
garant
e que
o
pre√ßo
da
ordem
coloca
da
ser√°
pior do
que o
merca
do
atual.
<h3>As</h3>
ordens
<h3>BOC</h3>
s√£o
utiliza
das
para
negoci</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
926
<h3>Pol√≠tica de execu√ß√£o</h3>
<h3>Descri√ß</h3>
√£o
<h3>Valor em ENUM_ORDER_TYPE_FILLING</h3>
a√ß√£o
passiv
a,
garanti
ndo
que a
ordem
n√£o
seja
execut
ada
imedia
tament
e ap√≥s
a
coloca√ß
√£o, 
e
que
n√£o
afete a
liquide
z
atual.
<h3>Ela</h3>
√©
suport
ada
somen
te para
ordens
limite
e stop-
limit
(ORDE
<h3>R_TYP</h3>
<h3>E_BUY</h3>
_LIMIT
,
<h3>ORDER</h3>
_TYPE
_SELL_
<h3>LIMIT,</h3>
<h3>ORDER</h3>
_TYPE
_BUY_
<h3>STOP_</h3>
<h3>LIMIT,</h3>
<h3>ORDER</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
927
<h3>Pol√≠tica de execu√ß√£o</h3>
<h3>Descri√ß</h3>
√£o
<h3>Valor em ENUM_ORDER_TYPE_FILLING</h3>
_TYPE
_SELL_
<h3>STOP_</h3>
<h3>LIMIT)</h3>
.
<h3>Retornar (Return)</h3>
<h3>Em</h3>
caso
de
execu√ß
√£o
parcial
, a
ordem
com o
volume
residu
al
contin
ua em
vigor,
em vez
de ser
removi
da.
<h3>Ordens</h3>
<h3>Return</h3>
n√£o
s√£o
permit
idas no
modo
<h3>Market</h3>
<h3>Execut</h3>
ion
(execu
√ß√£o de
ordens
a
merca
do -
<h3>SYMBO</h3>
<h3>L_TRA</h3>
<h3>DE_EX</h3>
<h3>ECUTI</h3>
<h3>ON_MA</h3>
RKET).
<h3>ORDER_FILLING_RETURN</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
928
Ao enviar a ordem de negocia√ß√£o usando a fun√ß√£o OrderSend(), a devida pol√≠tica de execu√ß√£o quanto
ao volume pode ser definida no campo type_filling na estrutura especial MqlTradeRequest, com
valores v√°lidos da enumera√ß√£o ENUM_ORDER_TYPE_FILLING. Para obter o valor desta propriedade em
uma ordem espec√≠fica ativa/conclu√≠da, use a fun√ß√£o OrderGetInteger() ou HistoryOrderGetInteger()
com o modificador ORDER_TYPE_FILLING.
Antes de enviar uma ordem para ser executada no momento atual, para a correta configura√ß√£o do
valor ORDER_TYPE_FILLING (tipo de execu√ß√£o por volume), para cada ativo financeiro por meio da
fun√ß√£o SymbolInfoInteger() voc√™ pode obter o valor da propriedade SYMBOL_FILLING_MODE que
mostra os tipos de preenchimento por volume (permitidos para este s√≠mbolo) como uma combina√ß√£o
de flags. Deve-se observar que o tipo de preenchimento ORDER_FILLING_RETURN √© sempre permitido,
exceto para o modo &quot;Execu√ß√£o da mercado&quot; (SYMBOL_TRADE_EXECUTION_MARKET).
O uso de tipos de preenchimento dependendo do modo de execu√ß√£o pode ser representado na forma
de uma tabela:
<h3>Modo de execu√ß√£o\Pol√≠tica de</h3>
preenchimento
<h3>Tudo/Nada</h3>
(FOK
<h3>ORDER_FILLIN</h3>
<h3>G_FOK)</h3>
<h3>Tudo/Parcial</h3>
(IOC
<h3>ORDER_FILLING</h3>
_IOC)
<h3>Retornar</h3>
(Return
<h3>ORDER_FILLING</h3>
_RETURN)
<h3>Execu√ß√£o imediata</h3>
(SYMBOL_TRADE_EXECUTION_INSTANT)
+
(independente
mente 
da
configura√ß√£o
do ativo)
+
(independente
mente 
da
configura√ß√£o
do ativo)
+ (sempre)
<h3>Execu√ß√µes a pedido</h3>
<h3>SYMBOL_TRADE_EXECUTION_REQUEST</h3>
+
(independente
mente 
da
configura√ß√£o
do ativo)
+
(independente
mente 
da
configura√ß√£o
do ativo)
+ (sempre)
<h3>Execu√ß√£o a mercado</h3>
<h3>SYMBOL_TRADE_EXECUTION_MARKET</h3>
+ (definido nas
configura√ß√µes
do ativo)
+ (definido nas
configura√ß√µes
do ativo)
- 
(proibido
independentem
ente 
da
configura√ß√£o
do ativo)
<h3>Execu√ß√£o de bolsa</h3>
<h3>SYMBOL_TRADE_EXECUTION_EXCHANGE</h3>
+ (definido nas
configura√ß√µes
do ativo)
+ (definido nas
configura√ß√µes
do ativo)
+ (sempre)
Para ordens pendentes, independentemente do modo de execu√ß√£o (SYMBOL_TRADE_EXEMODE) √©
necess√°rio utilizar o tipo de preenchimento ORDER_FILLING_RETURN, uma vez que essas ordens s√£o
executadas no momento do envio. Ao usar ordens pendentes, o trader aceita com anteced√™ncia que
quando as condi√ß√µes para realiza√ß√£o da transa√ß√£o nesta ordem forem atendidas, a corretora usar√° o
tipo de preenchimento que √© suportado por dada plataforma de negocia√ß√£o.</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
929
O per√≠odo de validade de uma ordem pode ser definida no campo type_time da estrutura especial
MqlTradeRequest ao enviar uma solicita√ß√£o de negocia√ß√£o usando a fun√ß√£o OrderSend(). Valores da
enumera√ß√£o ENUM_ORDER_TYPE_TIME enumeration s√£o permitidos. Para obter o valor desta
propriedade use a fun√ß√£o OrderGetInteger() ou HistoryOrderGetInteger() com o modificador
ORDER_TYPE_TIME.
<h3>ENUM_ORDER_TYPE_TIME</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>ORDER_TIME_GTC</h3>
<h3>Ordem v√°lida at√© cancelamento</h3>
<h3>ORDER_TIME_DAY</h3>
Ordem v√°lida at√© o final do dia corrente de negocia√ß√£o
<h3>ORDER_TIME_SPECIFIED</h3>
<h3>Ordem v√°lida at√© expira√ß√£o</h3>
<h3>ORDER_TIME_SPECIFIED_DAY</h3>
A ordem permanecer√° efetiva at√© 23:59:59 do dia
especificado. Se esta hora est√° fora de uma sess√£o de
negocia√ß√£o, a ordem expira na hora de negocia√ß√£o mais
pr√≥xima.
A propriedade ORDER_REASON cont√©m a raz√£o para a coloca√ß√£o da ordem. A ordem pode ser colocada
usando um programa MQL5, a partir de um aplicativo m√≥vel ou como resultado de um evento StopOut,
etc. Os valores poss√≠veis ORDER_REASON s√£o descritos na enumera√ß√£o ENUM_ORDER_REASON.
<h3>ENUM_ORDER_REASON</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>ORDER_REASON_CLIENT</h3>
Ordem colocada a partir de um terminal desktop
<h3>ORDER_REASON_MOBILE</h3>
Ordem colocada a partir de um aplicativo m√≥vel
<h3>ORDER_REASON_WEB</h3>
Ordem colocada a partir da plataforma web
<h3>ORDER_REASON_EXPERT</h3>
Ordem colocada a partir de um programa MQL5, Expert
<h3>Advisor ou script</h3>
<h3>ORDER_REASON_SL</h3>
Ordem colocada como resultado da ativa√ß√£o do Stop Loss
<h3>ORDER_REASON_TP</h3>
Ordem colocada como resultado da ativa√ß√£o do Take Profit
<h3>ORDER_REASON_SO</h3>
Ordem colocada como resultado do evento Stop Out</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
930
<h3>Propriedades de uma Posi√ß√£o</h3>
A execu√ß√£o de opera√ß√µes de negocia√ß√£o resulta na abertura de uma posi√ß√£o, altera√ß√£o de seu volume,
e/ou dire√ß√£o, ou no seu desaparecimento . Opera√ß√µes de negocia√ß√£o s√£o conduzidos baseados em
ordens, enviados pela fun√ß√£o OrderSend() na forma de solicita√ß√µes de negocia√ß√£o. Para cada  ativo
financeiro (symbol) apenas uma posi√ß√£o em aberto √© poss√≠vel. Uma posi√ß√£o tem um conjunto de
propriedades dispon√≠veis para leitura atrav√©s de fun√ß√µes PositionGet...().
<h3>Para a fun√ß√£o PositionGetInteger()</h3>
<h3>ENUM_POSITION_PROPERTY_INTEGER</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo</h3>
<h3>POSITION_TICKET</h3>
<h3>Bilhete</h3>
da
posi√ß√£o. 
<h3>Um</h3>
n√∫mero exclusivo
atribu√≠do a cada
posi√ß√£o.
<h3>Geralmente,</h3>
ele
corresponde 
ao
bilhete da ordem,
segundo o qual a
posi√ß√£o 
foi
aberta, 
exceto
nos casos em que
as opera√ß√µes de
servi√ßo 
no
servidor tenham
alterado o bilhete
da 
ordem. 
<h3>Por</h3>
exemplo, quando
os 
swaps 
se
acumulam com a
reabertura 
de
uma 
posi√ß√£o.
<h3>Para localizar a</h3>
ordem, segundo a
qual foi aberta a
posi√ß√£o, 
voc√™
deve 
utilizar 
a
propriedade
<h3>POSITION_IDENTI</h3>
FIER.
<h3>O</h3>
valor 
da
<h3>POSITION_TICKET</h3>
corresponde 
a
<h3>MqlTradeRequest:</h3>
:position.
long
<h3>POSITION_TIME</h3>
<h3>Hora de abertura</h3>
de uma posi√ß√£o
datetime</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
931
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo</h3>
<h3>POSITION_TIME_MSC</h3>
<h3>Posi√ß√£o de tempo</h3>
de abertura em
milissegundos
desde 01.01.1970
long
<h3>POSITION_TIME_UPDATE</h3>
<h3>Posi√ß√£o de tempo</h3>
de altera√ß√£o
datetime
<h3>POSITION_TIME_UPDATE_MSC</h3>
<h3>Posi√ß√£o de tempo</h3>
de altera√ß√£o em
milissegundo
desde 01.01.1970
long
<h3>POSITION_TYPE</h3>
<h3>Tipo de posi√ß√£o</h3>
<h3>ENUM_POSITION_TYPE</h3>
<h3>POSITION_MAGIC</h3>
<h3>N√∫mero</h3>
m√°gico
de uma posi√ß√£o
(veja
<h3>ORDER_MAGIC)</h3>
long
<h3>POSITION_IDENTIFIER</h3>
<h3>Identificador</h3>
de
posi√ß√£o 
√© 
um
n√∫mero √∫nico que
√© atribu√≠do para
toda nova posi√ß√£o
aberta e n√£o se
altera 
durante
todo o tempo de
vida da posi√ß√£o.
<h3>Movimenta√ß√µes</h3>
de uma posi√ß√£o
n√£o alteram seu
identificador.
<h3>O identificador de</h3>
posi√ß√£o 
√©
indicado em cada
ordem
(ORDER_POSITIO
<h3>N_ID) e transa√ß√£o</h3>
usada para abrir,
alterar ou fech√°-
la. Utilize 
esta
propriedade para
procurar ordens e
transa√ß√µes
associadas com a
posi√ß√£o.
<h3>Durante</h3>
a
revers√£o de uma
long</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
932
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo</h3>
posi√ß√£o no modo
de compensa√ß√£o
(usando 
uma
√∫nica 
transa√ß√£o
de sa√≠da/entrada)
o identificador de
posi√ß√£o
<h3>POSITION_IDENTI</h3>
<h3>FIER</h3>
n√£o 
√©
alterado. 
<h3>No</h3>
entanto, 
o
<h3>POSITION_TICKET</h3>
√© substitu√≠do pelo
bilhete de ordem,
que 
levou 
√†
revers√£o. 
<h3>No</h3>
modo 
de
cobertura, n√£o √©
fornecida 
a
revers√£o 
de
posi√ß√£o.
<h3>POSITION_REASON</h3>
<h3>Raz√£o</h3>
para 
a
abertura 
da
posi√ß√£o
<h3>ENUM_POSITION_REASON</h3>
<h3>Para a fun√ß√£o PositionGetDouble()</h3>
<h3>ENUM_POSITION_PROPERTY_DOUBLE</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo</h3>
<h3>POSITION_VOLUME</h3>
<h3>Volume de uma</h3>
posi√ß√£o
double
<h3>POSITION_PRICE_OPEN</h3>
<h3>Pre√ßo de abertura</h3>
de uma posi√ß√£o
double
<h3>POSITION_SL</h3>
<h3>N√≠vel</h3>
de 
<h3>Stop</h3>
<h3>Loss</h3>
de 
uma
posi√ß√£o aberta
double
<h3>POSITION_TP</h3>
<h3>N√≠vel</h3>
de 
<h3>Take</h3>
<h3>Profit</h3>
de 
uma
posi√ß√£o aberta
double
<h3>POSITION_PRICE_CURRENT</h3>
<h3>Pre√ßo corrente do</h3>
ativo 
de 
uma
posi√ß√£o
double
<h3>POSITION_SWAP</h3>
<h3>Swap acumulativo</h3>
double
<h3>POSITION_PROFIT</h3>
<h3>Lucro corrente</h3>
double</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
933
<h3>Para a fun√ß√£o PositionGetString()</h3>
<h3>ENUM_POSITION_PROPERTY_STRING</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo</h3>
<h3>POSITION_SYMBOL</h3>
<h3>Ativo (symbol) da</h3>
posi√ß√£o
string
<h3>POSITION_COMMENT</h3>
<h3>Coment√°rio</h3>
de
uma posi√ß√£o
string
<h3>POSITION_EXTERNAL_ID</h3>
<h3>ID de posi√ß√£o no</h3>
sistema 
externo
de negocia√ß√£o (na
bolsa de valores)
string
A dire√ß√£o de uma posi√ß√£o em aberto (comprada ou vendida) √© definida atrav√©s do valor proveniente
da enumera√ß√£o ENUM_POSITION_TYPE. A fim de obter o tipo de uma posi√ß√£o em aberto use a fun√ß√£o
PositionGetInteger() com o modificador POSITION_TYPE.
<h3>ENUM_POSITION_TYPE</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>POSITION_TYPE_BUY</h3>
<h3>Compra</h3>
<h3>POSITION_TYPE_SELL</h3>
<h3>Venda</h3>
A propriedade POSITION_REASON cont√©m a raz√£o para a coloca√ß√£o da posi√ß√£o. A posi√ß√£o pode ser
aberta como resultado da ativa√ß√£o de uma ordem colocada a partir de um terminal desktop, aplicativo
m√≥vel ou usando um Expert Advisor, etc. Os valores poss√≠veis POSITION_REASON s√£o descritos na
enumera√ß√£o ENUM_POSITION_REASON.
<h3>ENUM_POSITION_REASON</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>POSITION_REASON_CLIENT</h3>
Posi√ß√£o aberta como resultado da ativa√ß√£o de uma ordem
colocada a partir de um terminal desktop
<h3>POSITION_REASON_MOBILE</h3>
Posi√ß√£o aberta como resultado da ativa√ß√£o de uma ordem
colocada a partir de um aplicativo m√≥vel
<h3>POSITION_REASON_WEB</h3>
Posi√ß√£o aberta como resultado da ativa√ß√£o de uma ordem
colocada a partir da plataforma web
<h3>POSITION_REASON_EXPERT</h3>
Posi√ß√£o aberta como resultado da ativa√ß√£o de uma ordem
colocada a partir de um programa MQL5, Expert Advisor ou
script</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
934
<h3>Propriedades da Transa√ß√£o</h3>
Uma transa√ß√£o √© o reflexo de uma execu√ß√£o de uma negocia√ß√£o baseada em uma ordem que cont√©m
uma solicita√ß√£o de negocia√ß√£o. Cada negocia√ß√£o √© descrita atrav√©s de propriedades que permitem
obter informa√ß√µes sobre ela. A fim de ler valores destas propriedades, as fun√ß√µes do tipo
HistoryDealGet...() s√£o usadas, que retornam valores provenientes das enumera√ß√µes correspondentes.
<h3>Para a fun√ß√£o PlotIndexSetDouble()</h3>
<h3>ENUM_DEAL_PROPERTY_INTEGER</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo</h3>
<h3>DEAL_TICKET</h3>
<h3>Bilhete</h3>
da 
transa√ß√£o. 
<h3>Um</h3>
n√∫mero
exclusivo atribu√≠do a cada transa√ß√£o.
long
<h3>DEAL_ORDER</h3>
N√∫mero da ordem da transa√ß√£o.
long
<h3>DEAL_TIME</h3>
<h3>Propriedades da Transa√ß√£o</h3>
datetime
<h3>DEAL_TIME_MSC</h3>
O tempo de execu√ß√£o de negocia√ß√µes em
milissegundos desde 01.01.1970
long
<h3>DEAL_TYPE</h3>
<h3>Tipo de transa√ß√£o</h3>
<h3>ENUM_DEAL_TYPE</h3>
<h3>DEAL_ENTRY</h3>
<h3>Entrada de uma transa√ß√£o - entrada,</h3>
sa√≠da, revers√£o
<h3>ENUM_DEAL_ENTRY</h3>
<h3>DEAL_MAGIC</h3>
<h3>N√∫mero m√°gico de uma transa√ß√£o (veja</h3>
<h3>ORDER_MAGIC)</h3>
long
<h3>DEAL_REASON</h3>
Raz√£o ou origem para realizar a transa√ß√£o
<h3>ENUM_DEAL_REASON</h3>
<h3>DEAL_POSITION_ID</h3>
<h3>Identificador</h3>
de 
uma 
posi√ß√£o, 
na
abertura, modifica√ß√£o ou fechamento da
qual esta transa√ß√£o tomou parte. Cada
posi√ß√£o tem um identificador √∫nico que √©
atribu√≠do a todas as opera√ß√µes (deals)
executadas para o ativo durante todo o
tempo de vida da posi√ß√£o.
long
<h3>Para a fun√ß√£o HistoryDealGetDouble()</h3>
<h3>ENUM_DEAL_PROPERTY_DOUBLE</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo</h3>
<h3>DEAL_VOLUME</h3>
<h3>Volume da transa√ß√£o</h3>
double
<h3>DEAL_PRICE</h3>
<h3>Pre√ßo da transa√ß√£o</h3>
double
<h3>DEAL_COMMISSION</h3>
<h3>Comiss√£o da transa√ß√£o</h3>
double
<h3>DEAL_SWAP</h3>
<h3>Swap</h3>
acumulativo 
no
fechamento
double
<h3>DEAL_PROFIT</h3>
<h3>Lucro da transa√ß√£o</h3>
double</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
935
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo</h3>
<h3>DEAL_FEE</h3>
<h3>O pagamento da transa√ß√£o √©</h3>
cobrado imediatamente ap√≥s a
ela ser conclu√≠da.
double
<h3>DEAL_SL</h3>
<h3>N√≠vel de Stop Loss</h3>
¬∑ Para 
uma 
opera√ß√£o 
de
entrada ou revers√£o, o valor
<h3>Stop Loss √© tomado da</h3>
ordem que abre ou reverte a
posi√ß√£o
¬∑ Para 
uma 
opera√ß√£o 
de
sa√≠da, o valor do Stop Loss
√© tomado do fechamento da
posi√ß√£o
double
<h3>DEAL_TP</h3>
<h3>N√≠vel Take Profit</h3>
¬∑ Para 
uma 
opera√ß√£o 
de
entrada ou revers√£o, o valor
<h3>Take Profit √© tomado da</h3>
ordem que abre ou reverte a
posi√ß√£o
¬∑ Para 
uma 
opera√ß√£o 
de
sa√≠da, o valor Take Profit √©
tomado do fechamento da
posi√ß√£o
double
<h3>Para a fun√ß√£o HistoryDealGetString()</h3>
<h3>ENUM_DEAL_PROPERTY_STRING</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>Tipo</h3>
<h3>DEAL_SYMBOL</h3>
<h3>Ativo (symbol) da transa√ß√£o</h3>
string
<h3>DEAL_COMMENT</h3>
<h3>Coment√°rio da transa√ß√£o</h3>
string
Cada transa√ß√£o √© caracterizada por um tipo, cujos valores permitidos s√£o enumerados em
ENUM_DEAL_TYPE. A fim de obter informa√ß√µes sobre o tipo de transa√ß√£o, use a fun√ß√£o
HistoryDealGetInteger() com o modificador DEAL_TYPE.
<h3>ENUM_DEAL_TYPE</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>DEAL_TYPE_BUY</h3>
<h3>Compra</h3>
<h3>DEAL_TYPE_SELL</h3>
<h3>Venda</h3>
<h3>DEAL_TYPE_BALANCE</h3>
<h3>Saldo</h3>
<h3>DEAL_TYPE_CREDIT</h3>
<h3>Cr√©dito</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
936
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>DEAL_TYPE_CHARGE</h3>
<h3>Cobran√ßa adicional</h3>
<h3>DEAL_TYPE_CORRECTION</h3>
<h3>Corre√ß√£o</h3>
<h3>DEAL_TYPE_BONUS</h3>
<h3>Bonus</h3>
<h3>DEAL_TYPE_COMMISSION</h3>
<h3>Comiss√£o adicional</h3>
<h3>DEAL_TYPE_COMMISSION_DAI</h3>
<h3>LY</h3>
<h3>Comiss√£o di√°ria</h3>
<h3>DEAL_TYPE_COMMISSION_MO</h3>
<h3>NTHLY</h3>
<h3>Comiss√£o mensal</h3>
<h3>DEAL_TYPE_COMMISSION_AG</h3>
<h3>ENT_DAILY</h3>
<h3>Comiss√£o de agente di√°rio</h3>
<h3>DEAL_TYPE_COMMISSION_AG</h3>
<h3>ENT_MONTHLY</h3>
<h3>Comiss√£o de agente mensal</h3>
<h3>DEAL_TYPE_INTEREST</h3>
<h3>Taxa de juros</h3>
<h3>DEAL_TYPE_BUY_CANCELED</h3>
Opera√ß√£o de compra cancelada. Pode haver uma situa√ß√£o quando
uma opera√ß√£o de compra executada anteriormente √© cancelada.
Neste caso, o tipo de transa√ß√£o executada anteriormente
(DEAL_TYPE_BUY) √© alterada para DEAL_TYPE_BUY_CANCELED, e
seu lucro/preju√≠zo √© zerado Lucro/preju√≠zo obtido anteriormente √©
cobrado/sacado usando uma opera√ß√£o de saldo separada
<h3>DEAL_TYPE_SELL_CANCELED</h3>
Opera√ß√£o de venda cancelada. Pode haver uma situa√ß√£o quando
uma opera√ß√£o de venda executada anteriormente √© cancelada.
Neste caso, o tipo da opera√ß√£o executada anteriormente
(DEAL_TYPE_SELL) √© alterada para DEAL_TYPE_SELL_CANCELED, e
seu lucro/preju√≠zo √© zerado. Lucro/preju√≠zo obtido anteriormente √©
cobrado/sacado usando uma opera√ß√£o de saldo separada
<h3>DEAL_DIVIDEND</h3>
<h3>Opera√ß√£o de dividendos</h3>
<h3>DEAL_DIVIDEND_FRANKED</h3>
<h3>Opera√ß√£o de dividendos franqueados (n√£o tribut√°veis)</h3>
<h3>DEAL_TAX</h3>
<h3>C√°lculo do imposto</h3>
As opera√ß√µes (deal) diferem entre si n√£o somente no seu conjunto de tipos em ENUM_DEAL_TYPE, mas
tamb√©m na forma como elas alteram posi√ß√µes. Isto pode ser uma simples abertura de posi√ß√£o, ou
acumula√ß√£o de uma posi√ß√£o aberta anteriormente (entrada de mercado), encerramento de posi√ß√£o
atrav√©s de uma opera√ß√£o oposta no volume correspondente (sa√≠da de mercado), ou revers√£o de
posi√ß√£o, se a opera√ß√£o em dire√ß√£o oposta cobrir o volume da posi√ß√£o aberta anteriormente.
Todas estas situa√ß√µes s√£o descritas pelos valores provenientes da enumera√ß√£o ENUM_DEAL_ENTRY. A
fim de receber esta informa√ß√£o sobre uma transa√ß√£o, use a fun√ß√£o HistoryDealGetInteger() com o
modificador DEAL_ENTRY.
<h3>ENUM_DEAL_ENTRY</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
937
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>DEAL_ENTRY_IN</h3>
<h3>Entrada</h3>
<h3>DEAL_ENTRY_OUT</h3>
<h3>Sa√≠da</h3>
<h3>DEAL_ENTRY_INOUT</h3>
<h3>Revers√£o</h3>
<h3>DEAL_ENTRY_OUT_BY</h3>
<h3>Fechamento pela posi√ß√£o oposta</h3>
A propriedade DEAL_REASON cont√©m a raz√£o para a realiza√ß√£o da transa√ß√£o. A transa√ß√£o pode ser
realizada como resultado da ativa√ß√£o da ordem colocada a partir do aplicativo m√≥vel ou a partir de um
programa MQL5; ou como resultado de um evento StopOut, ou debitada/creditada a margem de
varia√ß√£o, etc. Os valores poss√≠veis DEAL_REASON s√£o descritos na enumera√ß√£o ENUM_DEAL_REASON.
Para as opera√ß√µes n√£o-comerciais resultantes da altera√ß√£o do balan√ßo, cr√©dito comiss√µes e outras
opera√ß√µes, indica-se como a raz√£o DEAL_REASON_CLIENT.
<h3>ENUM_DEAL_REASON</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>DEAL_REASON_CLIENT</h3>
Transa√ß√£o realizada como resultado da ativa√ß√£o de uma ordem colocada
a partir de um terminal desktop
<h3>DEAL_REASON_MOBILE</h3>
Transa√ß√£o realizada como resultado da ativa√ß√£o de uma ordem colocada
a partir de um aplicativo m√≥vel
<h3>DEAL_REASON_WEB</h3>
Transa√ß√£o realizada como resultado da ativa√ß√£o de uma ordem colocada
a partir da plataforma web
<h3>DEAL_REASON_EXPERT</h3>
Transa√ß√£o realizada como resultado da ativa√ß√£o de uma ordem colocada
a partir de um programa MQL5, Expert Advisor ou script
<h3>DEAL_REASON_SL</h3>
Transa√ß√£o realizada como resultado da ativa√ß√£o de uma ordem Stop Loss
<h3>DEAL_REASON_TP</h3>
Transa√ß√£o realizada como resultado da ativa√ß√£o de uma ordem Take
<h3>Profit</h3>
<h3>DEAL_REASON_SO</h3>
Transa√ß√£o realizada como resultado do evento Stop Out
<h3>DEAL_REASON_ROLLOV</h3>
<h3>ER</h3>
Transa√ß√£o realizada devido √† transfer√™ncia da posi√ß√£o
<h3>DEAL_REASON_VMARGI</h3>
<h3>N</h3>
Transa√ß√£o realizada ap√≥s creditada/debitada a margem de varia√ß√£o
<h3>DEAL_REASON_SPLIT</h3>
Transa√ß√£o realizada ap√≥s o fracionamento (redu√ß√£o do pre√ßo) do
instrumento que tinha a posi√ß√£o aberta durante o fracionamento
<h3>DEAL_REASON_CORPOR</h3>
<h3>ATE_ACTION</h3>
A opera√ß√£o foi realizada como resultado de uma a√ß√£o corporativa: fus√£o
ou renomea√ß√£o de t√≠tulo, transfer√™ncia de um cliente para outra conta,
etc.</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
938
Tipos de Opera√ß√µes de Negocia√ß√£o (trade, transa√ß√µes,
negocia√ß√µes)
A negocia√ß√£o realiza-se usando a fun√ß√£o OrderSend()e enviando ordens n√£o s√≥ para abrir posi√ß√µes,
mas tamb√©m para colocar, modificar e excluir ordens pendentes. Cada ordem de negocia√ß√£o contem
uma indica√ß√£o do tipo de opera√ß√£o solicitada. As opera√ß√µes de negocia√ß√£o s√£o descritas na
enumera√ß√£o ENUM_TRADE_REQUEST_ACTIONS.
<h3>ENUM_TRADE_REQUEST_ACTIONS</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>TRADE_ACTION_DEAL</h3>
Coloca uma ordem de negocia√ß√£o para a transa√ß√£o ser
executada imediatamente usando os par√¢metros especificados
(ordem de mercado)
<h3>TRADE_ACTION_PENDING</h3>
Coloca uma ordem de negocia√ß√£o para a transa√ß√£o ser
executada sob certas condi√ß√µes (ordem pendente)
<h3>TRADE_ACTION_SLTP</h3>
Modifica valores de Stop-Loss e Take-Profit numa posi√ß√£o
aberta
<h3>TRADE_ACTION_MODIFY</h3>
Modifca os par√¢metros de uma ordem colocada anteriormente
<h3>TRADE_ACTION_REMOVE</h3>
<h3>Exclui uma ordem pendente colocada anteriormente</h3>
<h3>TRADE_ACTION_CLOSE_BY</h3>
<h3>Fechar a posi√ß√£o oposta</h3>
Exemplo de opera√ß√£o de negocia√ß√£o TRADE_ACTION_DEAL para abrir uma posi√ß√£o Buy:
</p>
<pre><code class="language-mql5">
#define EXPERT_MAGIC 123456   // MagicNumber do conselheiro
//+------------------------------------------------------------------+
//| Abertura da posi√ß√£o Buy                                          |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- Atualiza√ß√£o e inicializa√ß√£o do pedido e o seu resultado
   MqlTradeRequest request={};
   MqlTradeResult  result={};
//--- par√¢metros do pedido
   request.action   =TRADE_ACTION_DEAL;                     // tipo de opera√ß√£o de neg
   request.symbol   =Symbol();                              // s√≠mbolo
   request.volume   =0.1;                                   // volume de 0.1 lotes
   request.type     =ORDER_TYPE_BUY;                        // tipo de ordem
   request.price    =SymbolInfoDouble(Symbol(),SYMBOL_ASK); // pre√ßo para abertura
   request.deviation=5;                                     // desvio permitido do pre
   request.magic    =EXPERT_MAGIC;                          // MagicNumber da ordem
//--- envio do pedido
   if(!OrderSend(request,result))
      PrintFormat(&quot;OrderSend error %d&quot;,GetLastError());     // se n√£o for poss√≠vel env
//--- informa√ß√£o sobre a opera√ß√£o
   PrintFormat(&quot;retcode=%u  deal=%I64u  order=%I64u&quot;,result.retcode,result.deal,result
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
939
Exemplo de opera√ß√£o de negocia√ß√£oTRADE_ACTION_DEAL para abertura da posi√ß√£o Sell:
</p>
<pre><code class="language-mql5">
#define EXPERT_MAGIC 123456   // MagicNumber do conselheiro
//+------------------------------------------------------------------+
//| Abertura da posi√ß√£o Sell                                         |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- Declara√ß√£o e inicializa√ß√£o do pedido e o seu resultado
   MqlTradeRequest request={};
   MqlTradeResult  result={};
//--- par√¢metros do pedido
   request.action   =TRADE_ACTION_DEAL;                     // tipo de opera√ß√£o de neg
   request.symbol   =Symbol();                              // s√≠mbolo
   request.volume   =0.2;                                   // volume de 0.2 lotes
   request.type     =ORDER_TYPE_SELL;                       // tipo da ordem
   request.price    =SymbolInfoDouble(Symbol(),SYMBOL_BID); // pre√ßo para a abertura
   request.deviation=5;                                     // desvio permitido do pre
   request.magic    =EXPERT_MAGIC;                          // MagicNumber da ordem
//--- envio do pedido
   if(!OrderSend(request,result))
      PrintFormat(&quot;OrderSend error %d&quot;,GetLastError());     // se n√£o for poss√≠vel env
//--- informa√ß√£o sobre a opera√ß√£o
   PrintFormat(&quot;retcode=%u  deal=%I64u  order=%I64u&quot;,result.retcode,result.deal,result
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
</code></pre>
<p>
Exemplo de ordem de negocia√ß√£o TRADE_ACTION_DEAL para fechadura de posi√ß√µes:</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
940
</p>
<pre><code class="language-mql5">
#define EXPERT_MAGIC 123456   // MagicNumber do conselheiro
//+------------------------------------------------------------------+
//| Fechadura de todas as posi√ß√µes                                   |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- declara√ß√£o do pedido e o seu resultado
   MqlTradeRequest request;
   MqlTradeResult  result;
   int total=PositionsTotal(); // n√∫mero de posi√ß√µes abertas   
//--- iterar todas as posi√ß√µes abertas
   for(int i=total-1; i&gt;=0; i--)
     {
      //--- par√¢metros da ordem
      ulong  position_ticket=PositionGetTicket(i);                                    
      string position_symbol=PositionGetString(POSITION_SYMBOL);                      
      int    digits=(int)SymbolInfoInteger(position_symbol,SYMBOL_DIGITS);            
      ulong  magic=PositionGetInteger(POSITION_MAGIC);                                
      double volume=PositionGetDouble(POSITION_VOLUME);                               
      ENUM_POSITION_TYPE type=(ENUM_POSITION_TYPE)PositionGetInteger(POSITION_TYPE);  
      //--- sa√≠da de informa√ß√£o sobre a posi√ß√£o
      PrintFormat(&quot;#%I64u %s  %s  %.2f  %s [%I64d]&quot;,
                  position_ticket,
                  position_symbol,
                  EnumToString(type),
                  volume,
                  DoubleToString(PositionGetDouble(POSITION_PRICE_OPEN),digits),
                  magic);
      //--- se o MagicNumber coincidir
      if(magic==EXPERT_MAGIC)
        {
         //--- zerar os valores do pedido e os seus resultados
         ZeroMemory(request);
         ZeroMemory(result);
         //--- configura√ß√£o dos par√¢metros da ordem
         request.action   =TRADE_ACTION_DEAL;        // tipo de opera√ß√£o de negocia√ß√£o
         request.position =position_ticket;          // bilhete da posi√ß√£o
         request.symbol   =position_symbol;          // s√≠mbolo 
         request.volume   =volume;                   // volume da posi√ß√£o
         request.deviation=5;                        // desvio permitido do pre√ßo
         request.magic    =EXPERT_MAGIC;             // MagicNumber da posi√ß√£o
         //--- coloca√ß√£o do pre√ßo e tipo de ordem dependendo do tipo de ordem
         if(type==POSITION_TYPE_BUY)
           {
            request.price=SymbolInfoDouble(position_symbol,SYMBOL_BID);
            request.type =ORDER_TYPE_SELL;
           }
         else
           {
            request.price=SymbolInfoDouble(position_symbol,SYMBOL_ASK);
            request.type =ORDER_TYPE_BUY;
           }
         //--- sa√≠da de informa√ß√£o sobre o fechamento
         PrintFormat(&quot;Close #%I64d %s %s&quot;,position_ticket,position_symbol,EnumToString
         //--- envio do pedido
         if(!OrderSend(request,result))
            PrintFormat(&quot;OrderSend error %d&quot;,GetLastError());  // se n√£o for poss√≠vel 
         //--- informa√ß√£o sobre a opera√ß√£o 
         PrintFormat(&quot;retcode=%u  deal=%I64u  order=%I64u&quot;,result.retcode,result.deal,
         //---
        }</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
941
</p>
<pre><code class="language-mql5">
     }
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
</code></pre>
<p>
Exemplo de opera√ß√£o de negocia√ß√£oTRADE_ACTION_PENDING para coloca√ß√£o de uma ordem pendente:</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
942
</p>
<pre><code class="language-mql5">
#property description &quot;Exemplo de coloca√ß√£o de ordens pendentes&quot;
#property script_show_inputs
#define EXPERT_MAGIC 123456                             // MagicNumber do conselheiro
input ENUM_ORDER_TYPE orderType=ORDER_TYPE_BUY_LIMIT;   // tipo da ordem
//+------------------------------------------------------------------+
//| Coloca√ß√£o de ordens pendentes                                    |
//+------------------------------------------------------------------+
void OnStart()
  {
//-- declara√ß√£o e inicializa√ß√£o do pedido e o seu resultado
   MqlTradeRequest request={};
   MqlTradeResult  result={};
//--- par√¢metros para coloca√ß√£o da ordem pendente
   request.action   =TRADE_ACTION_PENDING;                             // tipo de oper
   request.symbol   =Symbol();                                         // s√≠mbolo
   request.volume   =0.1;                                              // volume de 0.
   request.deviation=2;                                                //desvio permit
   request.magic    =EXPERT_MAGIC;                                     // MagicNumber 
   int offset = 50;                                                    // deslocamento
   double price;                                                       // pre√ßo de exe
   double point=SymbolInfoDouble(_Symbol,SYMBOL_POINT);                // tamanho do p
   int digits=SymbolInfoInteger(_Symbol,SYMBOL_DIGITS);                // n√∫mero de s√≠
   //--- verifica√ß√£o do tipo de opera√ß√£o
   if(orderType==ORDER_TYPE_BUY_LIMIT)
     {
      request.type     =ORDER_TYPE_BUY_LIMIT;                          // tipo de orde
      price=SymbolInfoDouble(Symbol(),SYMBOL_ASK)-offset*point;        // pre√ßo para a
      request.price    =NormalizeDouble(price,digits);                 // –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω
     }
   else if(orderType==ORDER_TYPE_SELL_LIMIT)
     {
      request.type     =ORDER_TYPE_SELL_LIMIT;                          // —Ç–∏–ø –æ—Ä–¥–µ—Ä–∞
      price=SymbolInfoDouble(Symbol(),SYMBOL_ASK)+offset*point;         // —Ü–µ–Ω–∞ –¥–ª—è –æ—Ç
      request.price    =NormalizeDouble(price,digits);                  // pre√ßo de ab
     }
   else if(orderType==ORDER_TYPE_BUY_STOP)
     {
      request.type =ORDER_TYPE_BUY_STOP;                                // tipo de ord
      price        =SymbolInfoDouble(Symbol(),SYMBOL_ASK)+offset*point; // pre√ßo de ab
      request.price=NormalizeDouble(price,digits);                      // pre√ßo de ab
     }
   else if(orderType==ORDER_TYPE_SELL_STOP)
     {
      request.type     =ORDER_TYPE_SELL_STOP;                           // tipo de ord
      price=SymbolInfoDouble(Symbol(),SYMBOL_ASK)-offset*point;         // pre√ßo para 
      request.price    =NormalizeDouble(price,digits);                  // pre√ßo de ab
     }
   else Alert(&quot;Este exemplo √© apenas para coloca√ß√£o de ordens pendentes&quot;);   // Se a o
//--- enviar a ordem
   if(!OrderSend(request,result))
      PrintFormat(&quot;OrderSend error %d&quot;,GetLastError());                 // Se n√£o for 
//--- informa√ß√µes sobre a opera√ß√£o
   PrintFormat(&quot;retcode=%u  deal=%I64u  order=%I64u&quot;,result.retcode,result.deal,result
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
</code></pre>
<p>
Exemplo da opera√ß√£o de negocia√ß√£o TRADE_ACTION_SLTP para alterar o valor Stop-Loss e Take-Profit
na posi√ß√£o aberta:</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
943
</p>
<pre><code class="language-mql5">
#define EXPERT_MAGIC 123456  // MagicNumber do conselheiro
//+------------------------------------------------------------------+
//| Modifica√ß√£o do Stop-Loss e Take-Profit da posi√ß√£o                |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- declarac√£o do pedido e o seu resultado
   MqlTradeRequest request;
   MqlTradeResult  result;
   int total=PositionsTotal(); // n√∫mero de posi√ß√µes abertas   
//--- iterar sobre todas as posi√ß√µes abertas
   for(int i=0; i&lt;total; i++)
     {
      //--- par√¢metros da ordem
      ulong  position_ticket=PositionGetTicket(i);// bilhete da posi√ß√£o
      string position_symbol=PositionGetString(POSITION_SYMBOL); // s√≠mbolo 
      int    digits=(int)SymbolInfoInteger(position_symbol,SYMBOL_DIGITS); // n√∫mero d
      ulong  magic=PositionGetInteger(POSITION_MAGIC); // MagicNumber da posi√ß√£o
      double volume=PositionGetDouble(POSITION_VOLUME);    // volume da posi√ß√£o
      double sl=PositionGetDouble(POSITION_SL);  // Stop Loss da posi√ß√£o
      double tp=PositionGetDouble(POSITION_TP);  // Take-Profit da posi√ß√£o
      ENUM_POSITION_TYPE type=(ENUM_POSITION_TYPE)PositionGetInteger(POSITION_TYPE);  
      //--- sa√≠da de informa√ß√µes sobre a posi√ß√£o
      PrintFormat(&quot;#%I64u %s  %s  %.2f  %s  sl: %s  tp: %s  [%I64d]&quot;,
                  position_ticket,
                  position_symbol,
                  EnumToString(type),
                  volume,
                  DoubleToString(PositionGetDouble(POSITION_PRICE_OPEN),digits),
                  DoubleToString(sl,digits),
                  DoubleToString(tp,digits),
                  magic);
      //--- se o MagicNumber coincidir, o Stop-Loss e o Take-Profit n√£o est√£o definido
      if(magic==EXPERT_MAGIC &amp;&amp; sl==0 &amp;&amp; tp==0)
        {</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
944
</p>
<pre><code class="language-mql5">
         //--- c√°lculo dos n√≠veis de pre√ßos atuais
         double price=PositionGetDouble(POSITION_PRICE_OPEN);
         double bid=SymbolInfoDouble(position_symbol,SYMBOL_BID);
         double ask=SymbolInfoDouble(position_symbol,SYMBOL_ASK);
         int    stop_level=(int)SymbolInfoInteger(position_symbol,SYMBOL_TRADE_STOPS_L
         double price_level;
         //--- se o n√≠vel de deslocamento m√≠nimo permitido em pontos a partir do pre√ßo
         if(stop_level&lt;=0)
            stop_level=150; // definimos o deslocamento em 150 pontos a partir do pre√ß
         else
            stop_level+=50; // definimos o n√≠vel de deslocamento (SYMBOL_TRADE_STOPS_L
         //--- c√°lculo e arredondamento dos valores Stop-Loss e Take-Profit
         price_level=stop_level*SymbolInfoDouble(position_symbol,SYMBOL_POINT);
         if(type==POSITION_TYPE_BUY)
           {
            sl=NormalizeDouble(bid-price_level,digits);
            tp=NormalizeDouble(ask+price_level,digits);
           }
         else
           {
            sl=NormalizeDouble(ask+price_level,digits);
            tp=NormalizeDouble(bid-price_level,digits);
           }
         //--- zerar os valores de pedido e o seu resultado
         ZeroMemory(request);
         ZeroMemory(result);
         //--- defini√ß√£o dos par√¢metros de opera√ß√£o
         request.action  =TRADE_ACTION_SLTP; // tipo de opera√ß√£o de negocia√ß√£o
         request.position=position_ticket;   // bilhete da posi√ß√£o
         request.symbol=position_symbol;     // s√≠mbolo 
         request.sl      =sl;                // Stop Loss da posi√ß√£o
         request.tp      =tp;                // Take Profit da posi√ß√£o
         request.magic=EXPERT_MAGIC;         // MagicNumber da posi√ß√£o
         //--- sa√≠da de informa√ß√µes sobre a modifica√ß√£o
         PrintFormat(&quot;Modify #%I64d %s %s&quot;,position_ticket,position_symbol,EnumToStrin
         //--- envio do pedido
         if(!OrderSend(request,result))
            PrintFormat(&quot;OrderSend error %d&quot;,GetLastError());  // se n√£o for poss√≠vel 
         //--- informa√ß√µes sobre a opera√ß√£o   
         PrintFormat(&quot;retcode=%u  deal=%I64u  order=%I64u&quot;,result.retcode,result.deal,
        }
     }
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
</code></pre>
<p>
Exemplo de opera√ß√£o de negocia√ß√£o TRADE_ACTION_MODIFY para modificar os n√≠veis de pre√ßos das
ordens pendentes:</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
945
</p>
<pre><code class="language-mql5">
#define EXPERT_MAGIC 123456 // MagicNumber do conselheiro
//+------------------------------------------------------------------+
//| Modifica√ß√£o de ordens pendentes                                  |
//+------------------------------------------------------------------+
void OnStart()
 {
//-- declara√ß√£o e inicializa√ß√£o do pedido e o seu resultado
</code></pre>
<p>
<h3>MqlTradeRequest request={};</h3>
<h3>MqlTradeResult result={};</h3>
 int total=OrdersTotal(); // n√∫mero de ordens pendentes colocadas
</p>
<pre><code class="language-mql5">
//--- iterar todas as ordens pendentes colocadas
</code></pre>
<p>
 for(int i=0; i&lt;total; i++)
</p>
<pre><code class="language-mql5">
 {
 //--- par√¢metros da ordem
</code></pre>
<p>
 ulong order_ticket=OrderGetTicket(i); // bilhete da ordem
 string order_symbol=Symbol(); // s√≠mbolo
 int digits=(int)SymbolInfoInteger(order_symbol,SYMBOL_DIGITS); // n√∫mero de signos de
 ulong magic=OrderGetInteger(ORDER_MAGIC); // MagicNumber da ordem
 double volume=OrderGetDouble(ORDER_VOLUME_CURRENT); // volume atual da ordem
 double sl=OrderGetDouble(ORDER_SL); // Stop Loss atual da ordem
 double tp=OrderGetDouble(ORDER_TP); // Take Profit atual da ordem
 ENUM_ORDER_TYPE type=(ENUM_ORDER_TYPE)OrderGetInteger(ORDER_TYPE); // tipo de ordem
 int offset = 50; // desloca√ß√£o a partir do pre√ßo atual para coloca√ß√£o da ordem, em po
 double price; // pre√ßo de ativa√ß√£o da ordem
 double point=SymbolInfoDouble(order_symbol,SYMBOL_POINT); // tamanho do ponto
</p>
<pre><code class="language-mql5">
 //--- sa√≠da de informa√ß√µes sobre a ordem
</code></pre>
<p>
 PrintFormat(&quot;#%I64u %s %s %.2f %s sl: %s tp: %s [%I64d]&quot;,
 order_ticket,
 order_symbol,
<h3>EnumToString(type),</h3>
 volume,
 DoubleToString(PositionGetDouble(POSITION_PRICE_OPEN),digits),
<h3>DoubleToString(sl,digits),</h3>
<h3>DoubleToString(tp,digits),</h3>
 magic);
</p>
<pre><code class="language-mql5">
 //--- se o MagicNumber coincidir, o Stop Loss e o Take Profit nao foram definidos
</code></pre>
<p>
 if(magic==EXPERT_MAGIC &amp;&amp; sl==0 &amp;&amp; tp==0)
</p>
<pre><code class="language-mql5">
 {
</code></pre>
<p>
 request.action=TRADE_ACTION_MODIFY; // tipo de opera√ß√£o de negocia√ß√£o
 request.order = OrderGetTicket(i); // bilhete da ordem
 request.symbol =Symbol(); // s√≠mbolo
 request.deviation=5; // desvio permitido a partir do pre√ßo
</p>
<pre><code class="language-mql5">
 //--- defini√ß√£o do n√≠vel de pre√ßos Take Profit e Stop Loss da ordem dependendo do seu
</code></pre>
<p>
 if(type==ORDER_TYPE_BUY_LIMIT)
</p>
<pre><code class="language-mql5">
 {
</code></pre>
<p>
 price = SymbolInfoDouble(Symbol(),SYMBOL_ASK)-offset*point; 
 request.tp = NormalizeDouble(price+offset*point,digits);
 request.sl = NormalizeDouble(price-offset*point,digits);
 request.price =NormalizeDouble(price,digits); // pre√ßo de abertura normalizado
 }
 else if(type==ORDER_TYPE_SELL_LIMIT)
</p>
<pre><code class="language-mql5">
 {
</code></pre>
<p>
 price = SymbolInfoDouble(Symbol(),SYMBOL_BID)+offset*point; 
 request.tp = NormalizeDouble(price-offset*point,digits);
 request.sl = NormalizeDouble(price+offset*point,digits);
 request.price =NormalizeDouble(price,digits); // pre√ßo de abertura normalizado
 }
 else if(type==ORDER_TYPE_BUY_STOP)
</p>
<pre><code class="language-mql5">
 {
</code></pre>
<p>
 price = SymbolInfoDouble(Symbol(),SYMBOL_BID)+offset*point; 
 request.tp = NormalizeDouble(price+offset*point,digits);</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
946
 request.sl = NormalizeDouble(price-offset*point,digits);
 request.price =NormalizeDouble(price,digits); // pre√ßo de abertura normalizado
 }
 else if(type==ORDER_TYPE_SELL_STOP)
</p>
<pre><code class="language-mql5">
 {
</code></pre>
<p>
 price = SymbolInfoDouble(Symbol(),SYMBOL_ASK)-offset*point; 
 request.tp = NormalizeDouble(price-offset*point,digits);
 request.sl = NormalizeDouble(price+offset*point,digits);
 request.price =NormalizeDouble(price,digits); // pre√ßo de abertura normalizado
 }
</p>
<pre><code class="language-mql5">
 //--- envio do pedido
</code></pre>
<p>
 if(!OrderSend(request,result))
 PrintFormat(&quot;OrderSend error %d&quot;,GetLastError()); // se n√£o foi poss√≠vel enviar o ped
</p>
<pre><code class="language-mql5">
 //--- informa√ß√µes sobre a opera√ß√£o 
</code></pre>
<p>
 PrintFormat(&quot;retcode=%u deal=%I64u order=%I64u&quot;,result.retcode,result.deal,result.ord
</p>
<pre><code class="language-mql5">
 //--- zerado dos valores do pedido e o seu resultado
</code></pre>
<p>
<h3>ZeroMemory(request);</h3>
<h3>ZeroMemory(result);</h3>
 }
 }
 }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
</code></pre>
<p>
Exemplo de opera√ß√£o de negocia√ß√£o TRADE_ACTION_REMOVE para excluir ordens pendentes:
</p>
<pre><code class="language-mql5">
#define EXPERT_MAGIC 123456  // MagicNumber do conselheiro
//+------------------------------------------------------------------+
//| Exclus√£o de ordens pendentes                                     |
//+------------------------------------------------------------------+
void OnStart()
 {
//-- Declara√ß√£o e inicializa√ß√£o do pedido e resultado 
</code></pre>
<p>
<h3>MqlTradeRequest request={};</h3>
<h3>MqlTradeResult result={};</h3>
 int total=OrdersTotal(); // n√∫mero de ordens pendentes colocadas 
</p>
<pre><code class="language-mql5">
//--- iterar todas as ordens pendentes colocadas 
</code></pre>
<p>
 for(int i=total-1; i&gt;=0; i--)
</p>
<pre><code class="language-mql5">
 {
</code></pre>
<p>
 ulong order_ticket=OrderGetTicket(i); // bilhete da ordem
 ulong magic=OrderGetInteger(ORDER_MAGIC); // MagicNumber da ordem 
</p>
<pre><code class="language-mql5">
 //--- se o MagicNumber coincidir
</code></pre>
<p>
 if(magic==EXPERT_MAGIC)
</p>
<pre><code class="language-mql5">
 {
 //--- zerar os valores do pedido e o resultado
</code></pre>
<p>
<h3>ZeroMemory(request);</h3>
<h3>ZeroMemory(result);</h3>
</p>
<pre><code class="language-mql5">
 //--- instala√ß√£o de par√¢metros de opera√ß√£o 
</code></pre>
<p>
 request.action=TRADE_ACTION_REMOVE; // tipo de opera√ß√£o de negocia√ß√£o
 request.order = order_ticket; // bilhete da ordem
</p>
<pre><code class="language-mql5">
 //--- envio do pedido
</code></pre>
<p>
 if(!OrderSend(request,result))
 PrintFormat(&quot;OrderSend error %d&quot;,GetLastError()); // Se n√£o for capaz de enviar o ped
</p>
<pre><code class="language-mql5">
 //--- informa√ß√µes sobre a opera√ß√£o 
</code></pre>
<p>
 PrintFormat(&quot;retcode=%u deal=%I64u order=%I64u&quot;,result.retcode,result.deal,result.ord
 }
 }
 }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
947
Exemplo de opera√ß√£o de negocia√ß√£o TRADE_ACTION_CLOSE_BY para fechamento da posi√ß√£o usando a
oposta:</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
948
</p>
<pre><code class="language-mql5">
#define EXPERT_MAGIC 123456  // MagicNumber do conselheiro
//+------------------------------------------------------------------+
//| Fechamento de todas as posi√ß√µes opostas                          |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- declara√ß√£o e inicializa√ß√£o do pedido e o seu resultado
   MqlTradeRequest request;
   MqlTradeResult  result;
   int total=PositionsTotal(); // numero de posi√ß√µes abertas   
//--- iterar sobre todas as posi√ß√µes abertas
   for(int i=total-1; i&gt;=0; i--)
     {
      //--- par√¢metros da ordem
      ulong  position_ticket=PositionGetTicket(i);                                    
      string position_symbol=PositionGetString(POSITION_SYMBOL);                      
      int    digits=(int)SymbolInfoInteger(position_symbol,SYMBOL_DIGITS);            
      ulong  magic=PositionGetInteger(POSITION_MAGIC);                                
      double volume=PositionGetDouble(POSITION_VOLUME);                               
      double sl=PositionGetDouble(POSITION_SL);                                       
      double tp=PositionGetDouble(POSITION_TP);                                       
      ENUM_POSITION_TYPE type=(ENUM_POSITION_TYPE)PositionGetInteger(POSITION_TYPE);  
      //--- sa√≠da de informa√ß√µes sobre a posi√ß√£o
      PrintFormat(&quot;#%I64u %s  %s  %.2f  %s  sl: %s  tp: %s  [%I64d]&quot;,
                  position_ticket,
                  position_symbol,
                  EnumToString(type),
                  volume,
                  DoubleToString(PositionGetDouble(POSITION_PRICE_OPEN),digits),
                  DoubleToString(sl,digits),
                  DoubleToString(tp,digits),
                  magic);
      //--- se o MagicNumber coincidir
      if(magic==EXPERT_MAGIC)
        {
         for(int j=0; j&lt;i; j++)
           {
            string symbol=PositionGetSymbol(j); // s√≠mbolo da posi√ß√£o oposta
            //--- se os s√≠mbolos das posi√ß√µes opostas e iniciais coincidirem
            if(symbol==position_symbol &amp;&amp; PositionGetInteger(POSITION_MAGIC)==EXPERT_M
              {
               //--- o tipo de posi√ß√£o oposta
               ENUM_POSITION_TYPE type_by=(ENUM_POSITION_TYPE)PositionGetInteger(POSIT
               //--- sa√≠da, se os s√≠mbolos das posi√ß√µes opostas e iniciais coincidirem
               if(type==type_by)
                  continue;
               //--- zerar os valores do pedido e o seu resultado
               ZeroMemory(request);
               ZeroMemory(result);
               //--- defini√ß√£o os par√¢metros de opera√ß√£o
               request.action=TRADE_ACTION_CLOSE_BY;                         // tipo d
               request.position=position_ticket;                             // bilhet
               request.position_by=PositionGetInteger(POSITION_TICKET);      // bilhet
               //request.symbol     =position_symbol;
               request.magic=EXPERT_MAGIC;                                   // MagicN
               //--- sa√≠da de informa√ß√µes sobre o fechamento pela posi√ß√£o oposta
               PrintFormat(&quot;Close #%I64d %s %s by #%I64d&quot;,position_ticket,position_sym
               //--- envio do pedido
               if(!OrderSend(request,result))
                  PrintFormat(&quot;OrderSend error %d&quot;,GetLastError()); // se n√£o for poss</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
949
</p>
<pre><code class="language-mql5">
               //--- informa√ß√µes sobre a opera√ß√£o   
               PrintFormat(&quot;retcode=%u  deal=%I64u  order=%I64u&quot;,result.retcode,result
              }
           }
        }
     }
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
950
<h3>Tipos de Transa√ß√£o de Negocia√ß√£o</h3>
Ao realizar algumas a√ß√µes espec√≠ficas em uma conta de negocia√ß√£o, seu estado muda. Tais a√ß√µes
includem:
¬∑ Envio de uma solicita√ß√£o de negocia√ß√£o a partir de algum aplicativo MQL5 no terminal usando as
fun√ß√µes OrderSend e OrderSendAsync e sua posterior execu√ß√£o.
¬∑ Envio de uma solicita√ß√£o de negocia√ß√£o por meio da interface gr√°fica do terminal e sua posterior
execu√ß√£o.
¬∑ Ativa√ß√£o de ordens pendentes e ordens de stop no servidor.
¬∑ Realiza√ß√£o de opera√ß√µes no lado de um servidor de negocia√ß√£o.
As seguintes transa√ß√µes de negocia√ß√£o s√£o realizadas como resultado destas a√ß√µes:
¬∑ tratamento de uma solicita√ß√£o de negocia√ß√£o
¬∑ mudan√ßa de ordens de abertura
¬∑ mudan√ßa de hist√≥rico de ordens
¬∑ mudan√ßa de hist√≥rico de opera√ß√µes (deals)
¬∑ mudan√ßa de posi√ß√µes
Por exemplo, ao enviar uma ordem de compra de mercado, ela √© tratada, uma ordem de compra
apropriada √© criada para a conta, a ordem √© ent√£o executada e removida da lista de ordens em
aberto, e ent√£o ela √© adicionada ao hist√≥rico de ordens, uma apropriada opera√ß√£o (deal) √© adicionada
ao hist√≥rico e uma nova posi√ß√£o √© criada. Todas estas a√ß√µes s√£o transa√ß√µes de negocia√ß√£o.
Para deixar um programador rastrear as a√ß√µes realizadas em rela√ß√£o a uma conta de negocia√ß√£o, a
fun√ß√£o OnTradeTransaction foi fornecida. Este handler permite obter transa√ß√µes de negocia√ß√£o
aplicadas a uma conta em aplica√ß√µes MQL5 A descri√ß√£o de uma transa√ß√£o de negocia√ß√£o √© submetida
no primeiro par√¢metro de OnTradeTransation usando a estrutura MqlTradeTransaction.
O tipo de transa√ß√£o de negocia√ß√£o √© submetida no par√¢metro de tipo de estrutura
MqlTradeTransaction. Os poss√≠veis tipos de transa√ß√µes de negocia√ß√£o s√£o descritos atrav√©s da
seguinte enumera√ß√£o:
<h3>ENUM_TRADE_TRANSACTION_TYPE</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>TRADE_TRANSACTION_ORDER_ADD</h3>
Adi√ß√£o de uma nova ordem de abertura.
<h3>TRADE_TRANSACTION_ORDER_UPDATE</h3>
<h3>Atualiza√ß√£o</h3>
de 
uma 
ordem 
de 
aberturar. 
<h3>As</h3>
atualiza√ß√µes incluem n√£o somente mudan√ßas evidentes
provenientes do terminal cliente ou do lado de um
servidor de negocia√ß√£o, mas tamb√©m altera√ß√µes de
estado de uma ordem ao configur√°-lo (por exemplo,
transi√ß√£o 
de 
<h3>ORDER_STATE_STARTED</h3>
para
<h3>ORDER_STATE_PLACED ou de ORDER_STATE_PLACED</h3>
para ORDER_STATE_PARTIAL, etc.).
<h3>TRADE_TRANSACTION_ORDER_DELETE</h3>
Remo√ß√£o de uma ordem da lista de ordens em aberto.
Uma ordem pode ser exclu√≠da da lista de ordens em
aberto como resultado da configura√ß√£o de um</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
951
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
solicita√ß√£o apropriada ou execu√ß√£o (preenchimento)
ou movimenta√ß√£o para o hist√≥rico.
<h3>TRADE_TRANSACTION_DEAL_ADD</h3>
Adi√ß√£o de uma opera√ß√£o (deal) para o hist√≥rico. A
a√ß√£o √© realizada como resultado de uma execu√ß√£o de
uma ordem ou realiza√ß√£o de opera√ß√µes com o saldo da
conta.
<h3>TRADE_TRANSACTION_DEAL_UPDATE</h3>
Atualiza√ß√£o de uma opera√ß√£o (deal) no hist√≥rico. Pode
haver caso quando uma opera√ß√£o (deal) executada
previamente √© alterada em um servidor. Por exemplo,
uma opera√ß√£o (deal) foi alterada em um sistema de
negocia√ß√£o 
externo 
(exchange) 
onde 
ela 
foi
transferida anteriormente por uma corretora (broker).
<h3>TRADE_TRANSACTION_DEAL_DELETE</h3>
Exclus√£o de uma opera√ß√£o (deal) do hist√≥rico. Pode
haver casos quando uma opera√ß√£o (deal) executada
anteriormente √© exclu√≠da de um servidor. Por
exemplo, uma opera√ß√£o (deal) foi exclu√≠da de um
sistema de negocia√ß√£o externo (exchange) onde ela
foi transferida anteriormente por uma corretora
(broker).
<h3>TRADE_TRANSACTION_HISTORY_ADD</h3>
Adi√ß√£o de uma ordem no hist√≥rico como resultado de
uma execu√ß√£o ou cancelamento.
<h3>TRADE_TRANSACTION_HISTORY_UPDATE</h3>
Altera√ß√£o de uma ordem localizada no hist√≥rico de
ordens. Este tipo √© fornecido para aumentar a
funcionalidade no lado de um servidor de negocia√ß√£o.
<h3>TRADE_TRANSACTION_HISTORY_DELETE</h3>
Exclus√£o de uma ordem do hist√≥rico de ordens. Este
tipo √© fornecido para aumentar a funcionalidade no
lado de um servidor de negocia√ß√£o.
<h3>TRADE_TRANSACTION_POSITION</h3>
Altera√ß√£o de uma posi√ß√£o n√£o relacionada com a
execu√ß√£o de uma opera√ß√£o (deal). Este tipo de
transa√ß√£o mostra que uma posi√ß√£o foi alterada pelo
lado de um servidor de negocia√ß√£o. O volume de uma
posi√ß√£o, o pre√ßo de abertura, os n√≠veis de Stop Loss e
Take Profit podem ter sido alterados. Dados sobre
altera√ß√£o 
s√£o 
submetidos 
na 
estrutura
<h3>MqlTradeTransaction</h3>
via 
o 
handler
<h3>OnTradeTransaction. Altera√ß√µes de posi√ß√£o (adi√ß√£o,</h3>
altera√ß√£o ou encerramento), como resultado de uma
execu√ß√£o de opera√ß√£o (deal), n√£o levam a ocorr√™ncia
de uma transa√ß√£o TRADE_TRANSACTION_POSITION.
<h3>TRADE_TRANSACTION_REQUEST</h3>
Notifica√ß√£o do fato de que uma solicita√ß√£o de
negocia√ß√£o foi processada por um servidor e o
resultado processado foi recebido. Apenas o campo
type (tipo de transa√ß√£o de negocia√ß√£o) deve ser
analisado 
em 
tais 
transa√ß√µes 
na 
estrutura</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
952
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
MqlTradeTransaction. 
<h3>O</h3>
segundo 
e 
terceiro
par√¢metros de OnTradeTransaction (request e result)
devem ser analisados para dados adicionais.
Dependendo do tipo da transa√ß√£o de negocia√ß√£o, v√°rios par√¢metros s√£o preenchidos na estrutura
MqlTradeTransaction, descrevendo-a. Uma descri√ß√£o detalhada dos dados submetidos √© mostrada em
Estrutura de uma Transa√ß√£o de Negocia√ß√£o.
<h3>Tamb√©m Veja</h3>
Estrutura de uma Transa√ß√£o de Negocia√ß√£o, OnTradeTransaction</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
953
Ordens de Negocia√ß√£o na Profundidade de Mercado
Para a√ß√µes, a janela Profundidade de Mercado √© dispon√≠vel, onde voc√™ pode ver as ordens de Compra e
Venda correntes. A dire√ß√£o desejada de uma opera√ß√£o de negocia√ß√£o, a quantidade requerida e o
pre√ßo solicitado s√£o especificados em cada ordem.
Para obter informa√ß√µes sobre o estado corrente do DOM por meio de MQL5, a fun√ß√£o MarketBookGet()
√© usada, que coloca uma &quot;fotografia instant√¢nea&quot; do DOM no array de estruturas MqlBookInfo. Cada
elemento do array no campo type cont√©m informa√ß√µes sobre a dire√ß√£o da ordem - o valor da
enumera√ß√£o ENUM_BOOK_TYPE.
<h3>ENUM_BOOK_TYPE</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>BOOK_TYPE_SELL</h3>
<h3>Ordem de venda (Offer)</h3>
<h3>BOOK_TYPE_BUY</h3>
<h3>Ordem de compra (Bid)</h3>
<h3>BOOK_TYPE_SELL_MARKET</h3>
<h3>Ordem de venda (Offer)</h3>
<h3>BOOK_TYPE_BUY_MARKET</h3>
<h3>Ordem de venda (Offer)</h3>
<h3>Tamb√©m Veja</h3>
Estruturas e classes, Estruturas do DOM, Tipos de opera√ß√µes de negocia√ß√£o, Informa√ß√µes de
<h3>Mercado</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
954
<h3>Propriedades de Sinal</h3>
As seguintes enumera√ß√µes s√£o usadas ao trabalhar com sinais de negocia√ß√£o e configura√ß√µes da c√≥pia
de sinal.
Enumera√ß√£o de propriedades do tipo double do sinal de negocia√ß√£o:
<h3>ENUM_SIGNAL_BASE_DOUBLE</h3>
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>SIGNAL_BASE_BALANCE</h3>
<h3>Saldo da conta</h3>
<h3>SIGNAL_BASE_EQUITY</h3>
<h3>Saldo da conta</h3>
<h3>SIGNAL_BASE_GAIN</h3>
<h3>Ganho da conta</h3>
<h3>SIGNAL_BASE_MAX_DRAWDOWN</h3>
<h3>Retirada m√°xima da conta</h3>
<h3>SIGNAL_BASE_PRICE</h3>
<h3>Pre√ßo de assinatura do sinal</h3>
<h3>SIGNAL_BASE_ROI</h3>
<h3>Retorno do Investimento (%)</h3>
Enumera√ß√£o de propriedades do tipo integer do sinal de negocia√ß√£o
<h3>ENUM_SIGNAL_BASE_INTEGER</h3>
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>SIGNAL_BASE_DATE_PUBLISHED</h3>
Data de publica√ß√£o (data em que estar√°
dispon√≠vel para assinar)
<h3>SIGNAL_BASE_DATE_STARTED</h3>
<h3>Data de in√≠cio da monitoriza√ß√£o</h3>
<h3>SIGNAL_BASE_DATE_UPDATED</h3>
Data da √∫ltima atualiza√ß√£o da estat√≠stica de
negocia√ß√£o do sinal
<h3>SIGNAL_BASE_ID</h3>
<h3>ID do sinal</h3>
<h3>SIGNAL_BASE_LEVERAGE</h3>
<h3>Alavancagem da conta</h3>
<h3>SIGNAL_BASE_PIPS</h3>
<h3>Lucro em pips</h3>
<h3>SIGNAL_BASE_RATING</h3>
<h3>Posi√ß√£o na classifica√ß√£o</h3>
<h3>SIGNAL_BASE_SUBSCRIBERS</h3>
<h3>N√∫mero de assinantess</h3>
<h3>SIGNAL_BASE_TRADES</h3>
<h3>N√∫mero de negocia√ß√µes</h3>
<h3>SIGNAL_BASE_TRADE_MODE</h3>
<h3>Tipo de conta (0-real, 1-demo, 2-concurso)</h3>
Enumera√ß√£o de propriedades do tipo string do sinal de negocia√ß√£o:
<h3>ENUM_SIGNAL_BASE_STRING</h3>
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>SIGNAL_BASE_AUTHOR_LOGIN</h3>
<h3>Login do autor</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
955
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>SIGNAL_BASE_BROKER</h3>
<h3>Nome da corretora (empresa)</h3>
<h3>SIGNAL_BASE_BROKER_SERVER</h3>
<h3>Server da corretora</h3>
<h3>SIGNAL_BASE_NAME</h3>
<h3>Nome do sinal</h3>
<h3>SIGNAL_BASE_CURRENCY</h3>
<h3>Moeda base do sinal</h3>
Enumera√ß√£o de propriedades do tipo double das configura√ß√µes de c√≥pia do sinal:
<h3>ENUM_SIGNAL_INFO_DOUBLE</h3>
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>SIGNAL_INFO_EQUITY_LIMIT</h3>
<h3>Limite patrimonial</h3>
<h3>SIGNAL_INFO_SLIPPAGE</h3>
<h3>Deslizamento (usado ao colocar ordens de</h3>
mercado em sincroniza√ß√£o de posi√ß√µes e c√≥pia
de negocia√ß√µes)
<h3>SIGNAL_INFO_VOLUME_PERCENT</h3>
<h3>Porcentagem m√°xima do dep√≥sito utilizado (%),</h3>
r/o
Enumera√ß√£o de propriedades do tipo integer das configura√ß√µes de c√≥pia do sinal:
<h3>ENUM_SIGNAL_INFO_INTEGER</h3>
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>SIGNAL_INFO_CONFIRMATIONS_DISABLED</h3>
<h3>O sinalizador permite a sincroniza√ß√£o sem</h3>
caixa de di√°logo de confirma√ß√£o
<h3>SIGNAL_INFO_COPY_SLTP</h3>
Copia as flags Stop Loss e Take Profit
<h3>SIGNAL_INFO_DEPOSIT_PERCENT</h3>
<h3>Porcentagem de dep√≥sito (%)</h3>
<h3>SIGNAL_INFO_ID</h3>
<h3>ID do sinal, r/o</h3>
<h3>SIGNAL_INFO_SUBSCRIPTION_ENABLED</h3>
<h3>Permiss√£o da flag &quot;Copiar negocia√ß√µes por</h3>
assinaturas&quot;
<h3>SIGNAL_INFO_TERMS_AGREE</h3>
Flag &quot;Concordar com os termos de uso do
servi√ßo de Sinais&quot;, r/o
Enumera√ß√£o de propriedades do tipo  string das configura√ß√µes de c√≥pia do sinal:
<h3>ENUM_SIGNAL_INFO_STRING</h3>
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>SIGNAL_INFO_NAME</h3>
<h3>Nome do sinal, r/o</h3>
<h3>Veja tamb√©m</h3>
<h3>Sinais de Negocia√ß√£o</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
956
<h3>Constantes Nomeados</h3>
Todas as constantes usadas em MQL5 podem ser divididas nos seguintes grupos:
¬∑ Substitui√ß√µes macro predefinidas ‚Äì valores s√£o substitu√≠dos durante compila√ß√£o;
¬∑ Constantes matem√°ticas ‚Äì valores de algumas express√µes matem√°ticas;
¬∑ Constantes de tipo num√©rico ‚Äì algumas restri√ß√µes de tipo simples;
¬∑ C√≥digos de motivos de Desinicializa√ß√£o ‚Äì descri√ß√£o de motivos de n√£o inicializa√ß√£o;
¬∑ Verifica√ß√£o de Ponteiro de Objeto ‚Äì enumera√ß√£o dos tipos de ponteiros retornados pela fun√ß√£o
<h3>CheckPointer();</h3>
¬∑ Outras constantes ‚Äì todas as outras constantes.</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
957
<h3>Substitui√ß√µes de Macro Predefinidas</h3>
Para simplificar o processo de depura√ß√£o e obter informa√ß√µes sobre a opera√ß√£o de um programa-mql5,
existem constantes de macro especiais, valores que s√£o definidos no momento da compila√ß√£o. A
forma mais f√°cil de usar estas constantes √© imprimir estes valores atrav√©s da fun√ß√£o Print(), como √©
mostrado no exemplo.
<h3>Constante</h3>
<h3>Descri√ß√£o</h3>
__CPU_ARCHI
<h3>TECTURE__</h3>
</p>
<pre><code class="language-mql5">
    
</code></pre>
<p>
Nome da arquitetura (conjunto de comandos) para a qual o arquivo EX5 √© criado
no momento da compila√ß√£o
__DATE__
Data de compila√ß√£o do arquivo sem a hora (horas, minutos e segundos s√£o iguais
a 0)
__DATETIME_
_
Data e hora de compila√ß√£o do arquivo
__LINE__
Assinatura da fun√ß√£o em cujo corpo a macro est√° localizada.
__FILE__
<h3>Nome do arquivo compilado corrente</h3>
__PATH__
O caminho absoluto para o arquivo que est√° sendo compilado correntemente
__FUNCTION_
_
Nome da fun√ß√£o, em cujo corpo a macro est√° localizada
__FUNCSIG__
Assinatura da fun√ß√£o em cujo corpo a macro est√° localizada. O registro da
descri√ß√£o completa de fun√ß√µes pode ser √∫til na identifica√ß√£o de fun√ß√µes
sobrecarregadas
__MQLBUILD_
_,
__MQL5BUILD
__
<h3>N√∫mero do compila√ß√£o</h3>
__COUNTER__
Para cada declara√ß√£o de __COUNTER__ que encontra, o compilador substitui no
local o valor do contador de 0 a N-1, onde N √© o n√∫mero de usos no c√≥digo. Ao
recompilar o c√≥digo-fonte sem altera√ß√µes, a ordem de __COUNTER__ √©
garantida.
O valor do contador __COUNTER__ √© calculado da seguinte forma:
¬∑ o valor inicial do contador √© 0,
¬∑ ap√≥s cada uso do contador, seu valor √© aumentado em 1,
¬∑ primeiro, o compilador expande todas as macros e modelos em c√≥digo-
fonte no local,
¬∑ c√≥digo separado √© gerado para cada especializa√ß√£o da fun√ß√£o baseada em
modelo,
¬∑ c√≥digo separado √© gerado para cada especializa√ß√£o da classe/estrutura
baseada em modelo,
¬∑ o compilador ent√£o percorre o c√≥digo-fonte resultante usando a ordem
definida e substitui cada uso de __COUNTER__ que encontra pelo valor do
contador atual.</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
958
<h3>Constante</h3>
<h3>Descri√ß√£o</h3>
No exemplo abaixo, voc√™ pode ver claramente como o compilador processa o
c√≥digo-fonte e substitui o __COUNTER__ encontrado com valores crescentes
sequencialmente.
__RANDOM__
Para cada declara√ß√£o de __RANDOM__, o compilador substitui um n√∫mero
aleat√≥rio ulong no c√≥digo.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
#property copyright &quot;Copyright ¬© 2009, MetaQuotes Software Corp.&quot;
#property link      &quot;https://www.metaquotes.net&quot;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do Expert¬†                               |
//+------------------------------------------------------------------+
void OnInit()
  {
//--- um exemplo de impress√£o de informa√ß√£o na inicializa√ß√£o de um Expert Advisor
   Print(&quot; __FUNCTION__ = &quot;,__FUNCTION__,&quot;  __LINE__ = &quot;,__LINE__);
//--- define o intervalo entre os eventos timer
   EventSetTimer(5);
//---
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de Desinicializa√ß√£o do Expert                             |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
//--- um exemplo de impress√£o de informa√ß√£o na desinicializa√ß√£o de um Expert Advisor
   Print(&quot; __FUNCTION__ = &quot;,__FUNCTION__,&quot;  __LINE__ = &quot;,__LINE__);
//---
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o tick (ponto) de um Expert                                 |
//+------------------------------------------------------------------+
void OnTick()
  {
//--- impress√£o de informa√ß√£o no recebimento de um tick
   Print(&quot; __MQLBUILD__ = &quot;,__MQLBUILD__,&quot;  __FILE__ = &quot;,__FILE__);
   Print(&quot; __FUNCTION__ = &quot;,__FUNCTION__,&quot;  __LINE__ = &quot;,__LINE__);
   test1(__FUNCTION__);
   test2();
//---
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| test1                                                            |
//+------------------------------------------------------------------+
void test1(string par)
  {</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
959
</p>
<pre><code class="language-mql5">
//--- impress√£o de informa√ß√£o dentro da fun√ß√£o
   Print(&quot; __FUNCTION__ = &quot;,__FUNCTION__,&quot;  __LINE__ = &quot;,__LINE__,&quot; par=&quot;,par);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| test2                                                            |
//+------------------------------------------------------------------+
void test2()
  {
//--- impress√£o de informa√ß√£o dentro da fun√ß√£o
   Print(&quot; __FUNCTION__ = &quot;,__FUNCTION__,&quot;  __LINE__ = &quot;,__LINE__);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| OnTimer event handler                                            |
//+------------------------------------------------------------------+
void OnTimer()
  {
//---
   Print(&quot; __FUNCTION__ = &quot;,__FUNCTION__,&quot;  __LINE__ = &quot;,__LINE__);
   test1(__FUNCTION__);
</code></pre>
<p>
  }
Exemplo para aprender a trabalhar com uma macro __COUNTER__
</p>
<pre><code class="language-mql5">
//--- criamos uma macro para impress√£o r√°pida da express√£o e seu valor no log
#define print(expr) Print(#expr,&quot;=&quot;,expr)
//--- definimos uma macro customizada MACRO_COUNTER por meio da macro predefinida __CO
#define MACRO_COUNTER __COUNTER__
//--- definimos o valor da vari√°vel input com a macro __COUNTER__
input int InpVariable = __COUNTER__;
//--- definimos o valor da vari√°vel global com a macro __COUNTER__ antes de definir as
int ExtVariable = __COUNTER__;
//+------------------------------------------------------------------+
//| a fun√ß√£o retorna o valor __COUNTER__                             |
//+------------------------------------------------------------------+
int GlobalFunc(void)
  {
   return(__COUNTER__);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| fun√ß√£o de modelo retorna valor __COUNTER__                       |
//+------------------------------------------------------------------+
</code></pre>
<p>
template&lt;typename T&gt;
</p>
<pre><code class="language-mql5">
int GlobalTemplateFunc(void)
  {</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
960
</p>
<pre><code class="language-mql5">
   return(__COUNTER__);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| estrutura com um m√©todo que retorna __COUNTER__                  |
//+------------------------------------------------------------------+
struct A
  {
   int               dummy;  // n√£o √© usado
   int               Method(void)
     {
      return(__COUNTER__);
     }
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| estrutura baseada em modelo com um m√©todo que retorna __COUNTER__|
//+------------------------------------------------------------------+
</code></pre>
<p>
template&lt;typename T&gt;
</p>
<pre><code class="language-mql5">
struct B
  {
   int               dummy;  // n√£o √© usado
   int               Method(void)
     {
      return(__COUNTER__);
     }
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| estrutura com um m√©todo baseado em modelo que retorna __COUNTER__|
//+------------------------------------------------------------------+
struct C
  {
   int               dummy;  // n√£o √© usado
   template&lt;typename T&gt;
   int               Method(void)
     {
      return(__COUNTER__);
     }
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| fun√ß√£o #2, que retorna o valor __COUNTER__                       |
//+------------------------------------------------------------------+
int GlobalFunc2(void)
  {
   return(__COUNTER__);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Script program start function                                    |</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
961
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
void OnStart(void)
  {
// __COUNTER__ em macros e vari√°veis
   print(MACRO_COUNTER);
   print(InpVariable);
   print(ExtVariable);
</code></pre>
<p>
/--- __COUNTER__ em fun√ß√µes
</p>
<pre><code class="language-mql5">
   print(GlobalFunc());
   print(GlobalFunc());                // o valor n√£o muda
   print(GlobalTemplateFunc&lt;int&gt;());
   print(GlobalTemplateFunc&lt;int&gt;());   // o valor n√£o muda
   print(GlobalTemplateFunc&lt;double&gt;());// o valor mudou
   print(GlobalFunc2());
   print(GlobalFunc2());               // o valor n√£o muda
// __COUNTER__ na estrutura
   A a1, a2;
   print(a1.Method());
   print(a2.Method());                 // o valor n√£o muda
// __COUNTER__ na estrutura baseada em modelo
   B&lt;int&gt; b1, b2;
   B&lt;double&gt; b3;
   print(b1.Method());
   print(b2.Method());                 // o valor n√£o muda
   print(b3.Method());                 // o valor mudou
// __COUNTER__ em uma estrutura com uma fun√ß√£o baseada em modelo
   C c1, c2;
   print(c1.Method&lt;int&gt;());
   print(c1.Method&lt;double&gt;());         // o valor mudou
   print(c2.Method&lt;int&gt;());            // valor como ao chamar c1.Method&lt;int&gt;() pela p
//--- mais uma vez, olhamos para __COUNTER__ na macro e na vari√°vel global
   print(MACRO_COUNTER);  // o valor mudou
   print(ExtGlobal2);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//--- definimos o valor da vari√°vel global com a macro __COUNTER__ ap√≥s as defini√ß√µes 
int ExtGlobal2 = __COUNTER__;
//+------------------------------------------------------------------+
/* Resultado
   __COUNTER__=3
   InpVariable=0
   ExtVariable=1
   GlobalFunc()=5
   GlobalFunc()=5</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
962
</p>
<pre><code class="language-mql5">
   GlobalTemplateFunc&lt;int&gt;()=8
   GlobalTemplateFunc&lt;int&gt;()=8
   GlobalTemplateFunc&lt;double&gt;()=9
   GlobalFunc2()=7
   GlobalFunc2()=7
   a1.Method()=6
   a2.Method()=6
   b1.Method()=10
   b2.Method()=10
   b3.Method()=11
   c1.Method&lt;int&gt;()=12
   c1.Method&lt;double&gt;()=13
   c2.Method&lt;int&gt;()=12
   __COUNTER__=4
   ExtGlobal2=2
</code></pre>
<p>
*/</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
963
<h3>Constantes Matem√°ticas</h3>
Constantes especiais contendo valores que s√£o reservados para algumas express√µes matem√°ticas.
Estas constantes podem ser usadas em qualquer lugar no programa ao inv√©s de calcular seus valores
usando fun√ß√µes matem√°ticas.
<h3>Constante</h3>
<h3>Descri√ß√£o</h3>
<h3>Valor</h3>
<h3>M_E</h3>
e
2.71828182845904523536
<h3>M_LOG2E</h3>
log2(e)
1.44269504088896340736
<h3>M_LOG10E</h3>
log10(e)
0.434294481903251827651
<h3>M_LN2</h3>
ln(2)
0.693147180559945309417
<h3>M_LN10</h3>
ln(10)
2.30258509299404568402
<h3>M_PI</h3>
pi
3.14159265358979323846
<h3>M_PI_2</h3>
pi/2
1.57079632679489661923
<h3>M_PI_4</h3>
pi/4
0.785398163397448309616
<h3>M_1_PI</h3>
1/pi
0.318309886183790671538
<h3>M_2_PI</h3>
2/pi
0.636619772367581343076
<h3>M_2_SQRTPI</h3>
2/sqrt(pi)
1.12837916709551257390
<h3>M_SQRT2</h3>
sqrt(2)
1.41421356237309504880
<h3>M_SQRT1_2</h3>
1/sqrt(2) 
0.707106781186547524401
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- imprime os valores das constantes
   Print(&quot;M_E = &quot;,DoubleToString(M_E,16));
   Print(&quot;M_LOG2E = &quot;,DoubleToString(M_LOG2E,16));
   Print(&quot;M_LOG10E = &quot;,DoubleToString(M_LOG10E,16));
   Print(&quot;M_LN2 = &quot;,DoubleToString(M_LN2,16));
   Print(&quot;M_LN10 = &quot;,DoubleToString(M_LN10,16));
   Print(&quot;M_PI = &quot;,DoubleToString(M_PI,16));
   Print(&quot;M_PI_2 = &quot;,DoubleToString(M_PI_2,16));
   Print(&quot;M_PI_4 = &quot;,DoubleToString(M_PI_4,16));
   Print(&quot;M_1_PI = &quot;,DoubleToString(M_1_PI,16));
   Print(&quot;M_2_PI = &quot;,DoubleToString(M_2_PI,16));
   Print(&quot;M_2_SQRTPI = &quot;,DoubleToString(M_2_SQRTPI,16));
   Print(&quot;M_SQRT2 = &quot;,DoubleToString(M_SQRT2,16));
   Print(&quot;M_SQRT1_2 = &quot;,DoubleToString(M_SQRT1_2,16));</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
964
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
965
<h3>Constantes de Tipo Num√©rico</h3>
Cada tipo num√©rico simples √© destinado para um certo tipo de tarefa e permite otimizar a opera√ß√£o de
um programa-mql5 quando usado corretamente. Para uma melhor legibilidade de c√≥digo e correto
manejo dos resultados de c√°lculos, existem constantes que permitem receber informa√ß√µes sobre um
conjunto de restri√ß√µes definido a um certo tipo de dados simples.
<h3>Constante</h3>
<h3>Descri√ß√£o</h3>
<h3>Valor</h3>
<h3>CHAR_MIN</h3>
<h3>Valor m√≠nimo, que pode ser representado</h3>
pelo tipo char
-128
<h3>CHAR_MAX</h3>
<h3>Valor m√°ximo, que pode ser representado</h3>
pelo tipo char
127
<h3>UCHAR_MAX</h3>
<h3>Valor m√°ximo, que pode ser representado</h3>
pelo tipo uchar
255
<h3>SHORT_MIN</h3>
<h3>Valor m√≠nimo, que pode ser representado</h3>
pelo tipo short
-32768
<h3>SHORT_MAX</h3>
<h3>Valor m√°ximo, que pode ser representado</h3>
pelo tipo short
32767
<h3>USHORT_MAX</h3>
<h3>Valor m√°ximo, que pode ser representado</h3>
pelo tipo ushort
65535
<h3>INT_MIN</h3>
<h3>Valor m√≠nimo, que pode ser representado</h3>
pelo tipo int
-2147483648
<h3>INT_MAX</h3>
<h3>Valor m√°ximo, que pode ser representado</h3>
pelo tipo int
2147483647
<h3>UINT_MAX</h3>
<h3>Valor m√°ximo, que pode ser representado</h3>
pelo tipo uint
4294967295
<h3>LONG_MIN</h3>
<h3>Valor m√≠nimo, que pode ser representado</h3>
pelo tipo long
-9223372036854775808
<h3>LONG_MAX</h3>
<h3>Valor m√°ximo, que pode ser representado</h3>
pelo tipo long
9223372036854775807
<h3>ULONG_MAX</h3>
<h3>Valor m√°ximo, que pode ser representado</h3>
pelo tipo ulong
18446744073709551615
<h3>DBL_MIN</h3>
<h3>Valor positivo m√≠nimo, que pode ser</h3>
representado pelo tipo double
2.2250738585072014e-308
<h3>DBL_MAX</h3>
<h3>Valor m√°ximo, que pode ser representado</h3>
pelo tipo double
1.7976931348623158e+308
<h3>DBL_EPSILON</h3>
<h3>Valor m√≠nimo, que satisfaz a condi√ß√£o:</h3>
1.0+DBL_EPSILON != 1.0 (para o tipo
double)
2.2204460492503131e-016
<h3>DBL_DIG</h3>
<h3>N√∫mero</h3>
de 
algarismos 
decimais
significativos para o tipo double
15</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
966
<h3>Constante</h3>
<h3>Descri√ß√£o</h3>
<h3>Valor</h3>
<h3>DBL_MANT_DIG</h3>
Quantidade de bits em uma mantissa para
o tipo double
53
<h3>DBL_MAX_10_E</h3>
<h3>XP</h3>
<h3>Valor</h3>
decimal 
m√°ximo 
de 
grau 
de
expoente para o tipo double
308
<h3>DBL_MAX_EXP</h3>
Valor bin√°rio m√°ximo de grau de expoente
para o tipo double
1024
<h3>DBL_MIN_10_EX</h3>
<h3>P</h3>
Valor decimal m√≠nimo de grau de expoente
para o tipo double
(-307)
<h3>DBL_MIN_EXP</h3>
Valor bin√°rio m√≠nimo de grau de expoente
para o tipo double
(-1021)
<h3>FLT_MIN</h3>
<h3>Valor positivo m√≠nimo, que pode ser</h3>
representado pelo tipo float
1.175494351e-38
<h3>FLT_MAX</h3>
<h3>Valor m√°ximo, que pode ser representado</h3>
pelo tipo float
3.402823466e+38
<h3>FLT_EPSILON</h3>
<h3>Valor m√≠nimo, que satisfaz a condi√ß√£o:</h3>
1.0+DBL_EPSILON != 1.0 (para o tipo float)
1.192092896e‚Äì07
<h3>FLT_DIG</h3>
<h3>N√∫mero</h3>
de 
algarismos 
decimais
significativos para o tipo float
6
<h3>FLT_MANT_DIG</h3>
Quantidade de bits em uma mantissa para
o tipo float
24
<h3>FLT_MAX_10_E</h3>
<h3>XP</h3>
<h3>Valor</h3>
decimal 
m√°ximo 
de 
grau 
de
expoente para o tipo float
38
<h3>FLT_MAX_EXP</h3>
Valor bin√°rio m√°ximo de grau de expoente
para o tipo float
128
<h3>FLT_MIN_10_EX</h3>
<h3>P</h3>
Valor decimal m√≠nimo de grau de expoente
para o tipo float
-37
<h3>FLT_MIN_EXP</h3>
Valor bin√°rio m√≠nimo de grau de expoente
para o tipo float
(-125)
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
void OnStart()
  {
//--- imprime os valores de constantes
   printf(&quot;CHAR_MIN = %d&quot;,CHAR_MIN);
   printf(&quot;CHAR_MAX = %d&quot;,CHAR_MAX);
   printf(&quot;UCHAR_MAX = %d&quot;,UCHAR_MAX);
   printf(&quot;SHORT_MIN = %d&quot;,SHORT_MIN);
   printf(&quot;SHORT_MAX = %d&quot;,SHORT_MAX);
   printf(&quot;USHORT_MAX = %d&quot;,USHORT_MAX);
   printf(&quot;INT_MIN = %d&quot;,INT_MIN);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
967
</p>
<pre><code class="language-mql5">
   printf(&quot;INT_MAX = %d&quot;,INT_MAX);
   printf(&quot;UINT_MAX = %u&quot;,UINT_MAX);
   printf(&quot;LONG_MIN = %I64d&quot;,LONG_MIN);
   printf(&quot;LONG_MAX = %I64d&quot;,LONG_MAX);
   printf(&quot;ULONG_MAX = %I64u&quot;,ULONG_MAX);
   printf(&quot;EMPTY_VALUE = %.16e&quot;,EMPTY_VALUE);
   printf(&quot;DBL_MIN = %.16e&quot;,DBL_MIN);
   printf(&quot;DBL_MAX = %.16e&quot;,DBL_MAX);
   printf(&quot;DBL_EPSILON = %.16e&quot;,DBL_EPSILON);
   printf(&quot;DBL_DIG = %d&quot;,DBL_DIG);
   printf(&quot;DBL_MANT_DIG = %d&quot;,DBL_MANT_DIG);
   printf(&quot;DBL_MAX_10_EXP =  %d&quot;,DBL_MAX_10_EXP);
   printf(&quot;DBL_MAX_EXP = %d&quot;,DBL_MAX_EXP);
   printf(&quot;DBL_MIN_10_EXP = %d&quot;,DBL_MIN_10_EXP);
   printf(&quot;DBL_MIN_EXP = %d&quot;,DBL_MIN_EXP);
   printf(&quot;FLT_MIN = %.8e&quot;,FLT_MIN);
   printf(&quot;FLT_MAX = %.8e&quot;,FLT_MAX);
   printf(&quot;FLT_EPSILON = %.8e&quot;,FLT_EPSILON);
/*
   CHAR_MIN = -128
   CHAR_MAX = 127
   UCHAR_MAX = 255
   SHORT_MIN = -32768
   SHORT_MAX = 32767
   USHORT_MAX = 65535
   INT_MIN = -2147483648
   INT_MAX = 2147483647
   UINT_MAX = 4294967295
   LONG_MIN = -9223372036854775808
   LONG_MAX = 9223372036854775807
   ULONG_MAX = 18446744073709551615
   EMPTY_VALUE = 1.7976931348623157e+308
   DBL_MIN = 2.2250738585072014e-308
   DBL_MAX = 1.7976931348623157e+308
   DBL_EPSILON = 2.2204460492503131e-16
   DBL_DIG = 15
   DBL_MANT_DIG = 53
   DBL_MAX_10_EXP =  308
   DBL_MAX_EXP = 1024
   DBL_MIN_10_EXP = -307
   DBL_MIN_EXP = -1021
   FLT_MIN = 1.17549435e-38
   FLT_MAX = 3.40282347e+38
   FLT_EPSILON = 1.19209290e-07
</code></pre>
<p>
*/ 
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
968
<h3>C√≥digos de Motivos de Desinicializa√ß√£o</h3>
Os c√≥digos de raz√£o de n√£o inicializa√ß√£o s√£o devolvidos pela fun√ß√£o UninitializeReason(). Os valores
poss√≠veis s√£o os seguintes:
<h3>Constante</h3>
<h3>Valor</h3>
<h3>Descri√ß√£o</h3>
<h3>REASON_PROGRAM</h3>
0
O Expert Advisor terminou sua opera√ß√£o chamando
a fun√ß√£o ExpertRemove()
<h3>REASON_REMOVE</h3>
1
<h3>O programa foi exclu√≠do do gr√°fico</h3>
<h3>REASON_RECOMPILE</h3>
2
<h3>O programa foi recompilado</h3>
<h3>REASON_CHARTCHANGE</h3>
3
O per√≠odo do s√≠mbolo ou gr√°fico foi alterado
<h3>REASON_CHARTCLOSE</h3>
4
<h3>O gr√°fico foi encerrado</h3>
<h3>REASON_PARAMETERS</h3>
5
Os par√¢metros de entrada foram alterados por um
usu√°rio
<h3>REASON_ACCOUNT</h3>
6
Outra conta foi ativada ou o servidor de negocia√ß√£o
foi 
reconectado 
devido 
a 
altera√ß√µes 
nas
configura√ß√µes de conta
<h3>REASON_TEMPLATE</h3>
7
<h3>Um novo modelo foi aplicado</h3>
<h3>REASON_INITFAILED</h3>
8
Esse valor significa que o manipulador OnInit()
retornou um valor diferente de zero
<h3>REASON_CLOSE</h3>
9
<h3>Terminal foi fechado</h3>
O c√≥digo de raz√£o de desinicializa√ß√£o tamb√©m √© passado como um par√¢metro da fun√ß√£o
predeterminada OnDeinit(const int reason).
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| obter descri√ß√£o do texto                                             |
//+------------------------------------------------------------------+
string getUninitReasonText(int reasonCode)
  {
   string text=&quot;&quot;;
//---
   switch(reasonCode)
     {
      case REASON_ACCOUNT:
         text=&quot;Account was changed&quot;;break;
      case REASON_CHARTCHANGE:
         text=&quot;Symbol or timeframe was changed&quot;;break;
      case REASON_CHARTCLOSE:
         text=&quot;Chart was closed&quot;;break;
      case REASON_PARAMETERS:
         text=&quot;Input-parameter was changed&quot;;break;
      case REASON_RECOMPILE:</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
969
</p>
<pre><code class="language-mql5">
         text=&quot;Program &quot;+__FILE__+&quot; was recompiled&quot;;break;
      case REASON_REMOVE:
         text=&quot;Program &quot;+__FILE__+&quot; was removed from chart&quot;;break;
      case REASON_TEMPLATE:
         text=&quot;New template was applied to chart&quot;;break;
      default:text=&quot;Another reason&quot;;
     }
//---
   return text;
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de Desinicializa√ß√£o do Expert                             |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
//--- A primeira maneira de obter o c√≥digo de raz√£o de desinicializa√ß√£o
   Print(__FUNCTION__,&quot;_Uninitalization reason code = &quot;,reason);
//--- A segunda maneira de obter o c√≥digo de raz√£o de desinicializa√ß√£o
   Print(__FUNCTION__,&quot;_UninitReason = &quot;,getUninitReasonText(_UninitReason));
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
970
<h3>Verifica√ß√£o de Ponteiro de Objeto</h3>
A fun√ß√£o CheckPointer() √© usado para verificar o tipo do ponteiro de objeto. A fun√ß√£o retorna um valor
da enumera√ß√£o ENUM_POINTER_TYPE. Caso um ponteiro incorreto seja usado, a execu√ß√£o do
programa ser√° imediatamente finalizada.
Objetos criados por meio do operador new() s√£o do tipo POINTER_DYNAMIC. O operador delete() pode
e deve ser usado somente para tais ponteiros.
Todos os outros ponteiros s√£o do tipo POINTER_AUTOMATIC, que significa que este objeto foi criado
automaticamente pelo ambiente do programa mql5. Tais objetos s√£o exclu√≠dos automaticamente ap√≥s
serem usados.
<h3>ENUM_POINTER_TYPE</h3>
<h3>Constante</h3>
<h3>Descri√ß√£o</h3>
<h3>POINTER_INVALID</h3>
<h3>Ponteiro incorreto</h3>
<h3>POINTER_DYNAMIC</h3>
Ponteiro do objeto criado por meio do operador
new()
<h3>POINTER_AUTOMATIC</h3>
<h3>Ponteiro</h3>
de 
qualquer 
objeto 
criado
automaticamente (sem usar new())
<h3>Tamb√©m Veja</h3>
Erros em Tempo de Execu√ß√£o, Exclus√£o de Objeto Operador delete, CheckPointer</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
971
<h3>Outras Constantes</h3>
A constante CLR_NONE √© usada para indicar a aus√™ncia de cor, ela significa que o objeto gr√°fico ou a
s√©rie gr√°fica de um indicador n√£o ser√£o plotados. Esta constante n√£o foi inclu√≠da na lista de
constantes Web-color, mas ela pode ser aplicada em todo lugar onde os argumentos de cor forem
requeridos.
A constante INVALID_HANDLE pode ser usada para verificar handles de arquivo (veja FileOpen() e
FileFindFirst()). 
<h3>Constante</h3>
<h3>Descri√ß√£o</h3>
<h3>Valor</h3>
<h3>CHARTS_MAX</h3>
<h3>O n√∫mero poss√≠vel m√°ximo de</h3>
gr√°ficos 
abertos
simultaneamente 
em 
um
terminal
100
clrNONE
<h3>Aus√™ncia de cor</h3>
-1
<h3>EMPTY_VALUE</h3>
<h3>Valor vazio em um buffer de</h3>
indicador
<h3>DBL_MAX</h3>
<h3>INVALID_HANDLE</h3>
<h3>Manipulador incorreto</h3>
-1
<h3>IS_DEBUG_MODE</h3>
<h3>Flag</h3>
que 
indica 
que 
um
programa MQL5 opera em
modo de depura√ß√£o
n√£o-zero 
para 
modo 
de
depura√ß√£o, zero caso contr√°rio
<h3>IS_PROFILE_MODE</h3>
<h3>Flag</h3>
que 
indica 
que 
um
programa MQL5 opera em
modo de profiling
n√£o-zero 
para 
modo 
de
profiling, zero caso contr√°rio
<h3>NULL</h3>
<h3>Zero para quaisquer tipos</h3>
0
<h3>WHOLE_ARRAY</h3>
<h3>Significa o n√∫mero de itens</h3>
restantes at√© o final do array,
isto √©, o array inteiro ser√°
processado
-1
<h3>WRONG_VALUE</h3>
<h3>A</h3>
constante 
pode 
ser
implicitamente 
convertido
para 
qualquer 
tipo 
de
enumera√ß√£o
-1
A constante EMPTY_VALUE geralmente corresponde aos valores de indicadores que n√£o s√£o exibidos no
gr√°fico. Por exemplo, para o indicador incorporado Desvio Padr√£o (Standard Deviation) com um
per√≠odo de 20, a linha para as primeiras 19 barras no hist√≥rico n√£o √© exibida no gr√°fico. Se voc√™ criar
um handle deste indicador com a fun√ß√£o iStdDev() e copiar os valores do indicador destas barras para
um array atrav√©s de CopyBuffer(), ent√£o estes valores ser√£o iguais a EMPTY_VALUE.
Voc√™ pode escolher especificar em um indicador customizado seus pr√≥prios valores vazios, indicando
quando o indicador n√£o deve ser desenhado no gr√°fico. Use a fun√ß√£o PlotIndexSetDouble() com a
modificador PLOT_EMPTY_VALUE.</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
972
A constante NULL pode ser atribu√≠do a uma vari√°vel de qualquer tipo simples ou a um objeto,
estrutura ou ponteiro de classe. A atribui√ß√£o NULL a uma vari√°vel string significa a completa
desinicializa√ß√£o desta vari√°vel.
A constante WRONG_VALUE √© destinada para casos em que √© necess√°rio retornar valor de uma
enumera√ß√£o, e ela deve ser um valor errado. Por exemplo, quando n√≥s precisamos informar que um
valor de retorno √© um valor proveniente desta enumera√ß√£o. Vamos considerar como um exemplo a
fun√ß√£o CheckLineStyle(), que retorna o estilo de linha para um objeto, especificado seu nome. Se na
verifica√ß√£o de estilo por ObjectGetInteger() o resultado for true, um valor proveniente de
ENUM_LINE_STYLE √© retornado; caso contr√°rio WRONG_VALUE √© retornado.
</p>
<pre><code class="language-mql5">
void OnStart()
  {
   if(CheckLineStyle(&quot;MyChartObject&quot;)==WRONG_VALUE)
      printf(&quot;Erro ao obter estilo de linha.&quot;);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| retorna o estilo de linha para um obj. espec. atr√°ves de seu nome|
//+------------------------------------------------------------------+
</code></pre>
<p>
<h3>ENUM_LINE_STYLE CheckLineStyle(string name)</h3>
</p>
<pre><code class="language-mql5">
  {
   long style;
//---
   if(ObjectGetInteger(0,name,OBJPROP_STYLE,0,style))
      return((ENUM_LINE_STYLE)style);
   else
      return(WRONG_VALUE);
</code></pre>
<p>
  }
A constante WHOLE_ARRAY √© destinada para fun√ß√µes que requerem especificar o n√∫mero de
elementos nos arrays processados:
¬∑ ArrayCopy();
¬∑ ArrayMinimum(); 
¬∑ ArrayMaximum();
¬∑ FileReadArray();
¬∑ FileWriteArray(). 
Se voc√™ quiser especificar que todos os valores do array a partir de uma posi√ß√£o especificada at√© o
final devem ser processados, voc√™ deve especificar apenas o valor WHOLE_ARRAY.
A constante IS_PROFILE_MODE  permite alterar uma opera√ß√£o de programa para correta coleta de
dados no modo de profiling. Profiling permite medir o tempo de execu√ß√£o de fragmentos individuais
do programa (geralmente abrangendo fun√ß√µes), bem como calcular o n√∫mero de tais chamadas.
Chamadas a fun√ß√£o Sleep() podem ser desabilitadas para determinar o tempo de execu√ß√£o no modo de
profiling, como neste exemplo:
</p>
<pre><code class="language-mql5">
//--- Sleep pode afetar (alterar) enormemente o resultado do profiling</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
973
if(!IS_PROFILE_MODE) Sleep(100); // desabilita a chamada Sleep() no modo de profiling
O valor da constante IS_PROFILE_MODE √© definida pelo compilador durante a compila√ß√£o, enquanto
que ela √© definida para zero no modo convencional. Ao iniciar um programa no modo de profiling, uma
compila√ß√£o especial √© realizada e IS_PROFILE_MODE √© substitu√≠da com um valor n√£o-zero.
A constante IS_DEBUG_MODE pode ser √∫til quando se precisar alterar levemente a opera√ß√£o de um
programa MQL5 no modo de depura√ß√£o. Por exemplo, no modo de depura√ß√£o voc√™ pode precisar exibir
informa√ß√µes de depura√ß√£o adicionais no log do terminal ou criar objetos gr√°ficos adicionais em um
gr√°fico.
O seguinte exemplo cria um objeto Label e define sua descri√ß√£o e cor dependendo do modo de
execu√ß√£o do script. A fim de executar um script em modo de depura√ß√£o a partir do MetaEditor,
pressione F5. Se voc√™ executar um script a partir da janela de navega√ß√£o do terminal, ent√£o a cor e o
texto do objeto Label ser√£o diferentes.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                             Check_DEBUG_MODE.mq5 |
//|                      Copyright ¬© 2009, MetaQuotes Software Corp. |
//|                                        https://www.metaquotes.net |
//+------------------------------------------------------------------+
#property copyright &quot;Copyright ¬© 2009, MetaQuotes Software Corp.&quot;
#property link      &quot;https://www.metaquotes.net&quot;
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//---
   string label_name=&quot;invisible_label&quot;;
   if(ObjectFind(0,label_name)&lt;0)
     {
      Print(&quot;Objeto&quot;,label_name,&quot;n√£o encontrado. C√≥digo de erro = &quot;,GetLastError());
      //--- cria um R√≥tulo (Label)
      ObjectCreate(0,label_name,OBJ_LABEL,0,0,0);
      //--- define coordenada X
      ObjectSetInteger(0,label_name,OBJPROP_XDISTANCE,200);
      //--- define coordenada Y
      ObjectSetInteger(0,label_name,OBJPROP_YDISTANCE,300);
      ResetLastError();
      if(IS_DEBUG_MODE) // modo de depura√ß√£o
        {
         //--- exibe mensagem sobre o modo de execu√ß√£o do script
         ObjectSetString(0,label_name,OBJPROP_TEXT,&quot;DEBUG MODE&quot;);
         //--- defini a cor de texto para vermelho
         if(!ObjectSetInteger(0,label_name,OBJPROP_COLOR,clrRed))
            Print(&quot;N√£o √© poss√≠vel definir a cor. Error&quot;,GetLastError());
        }</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
974
</p>
<pre><code class="language-mql5">
      else              // modo de opera√ß√£o
        {
         ObjectSetString(0,label_name,OBJPROP_TEXT,&quot;RELEASE MODE&quot;);
         //--- defini a cor de texto para vermelho
         if(!ObjectSetInteger(0,label_name,OBJPROP_COLOR,CLR_NONE))
            Print(&quot;N√£o √© poss√≠vel definir a cor. Error &quot;,GetLastError());
        }
      ChartRedraw();
      DebugBreak();    // aqui finaliza√ß√£o ocorrer√°, se n√≥s estivermos em modo de depu
     }
</code></pre>
<p>
  }
<h3>Crypt Methods</h3>
A enumera√ß√£o ENUM_CRYPT_METHOD √© usada para especificar o m√©todo de transforma√ß√£o de dados,
usado nas fun√ß√µes  CryptEncode() e CryptDecode().
<h3>ENUM_CRYPT_METHOD</h3>
<h3>Constant</h3>
<h3>Descri√ß√£o</h3>
<h3>CRYPT_BASE64</h3>
<h3>BASE64</h3>
<h3>CRYPT_AES128</h3>
Criptografia AES com chave de 128 bits (16 bytes)
<h3>CRYPT_AES256</h3>
Criptografia AES com chave de 256 bits (32 bytes)
<h3>CRYPT_DES</h3>
Criptografia DES com chave de 56 bits (7 bytes)
<h3>CRYPT_HASH_SHA1</h3>
<h3>SHA1 HASH caculation</h3>
<h3>CRYPT_HASH_SHA2</h3>
56
<h3>SHA256 HASH caculation</h3>
<h3>CRYPT_HASH_MD5</h3>
<h3>MD5 HASH caculation</h3>
<h3>CRYPT_ARCH_ZIP</h3>
<h3>ZIP archives</h3>
<h3>Tamb√©m Veja</h3>
DebugBreak, Propriedades de programas MQL5 executados, CryptEncode(), CryptDecode()</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
975
<h3>Estruturas de Dados</h3>
A linguagem MQL5 oferece 12 estruturas predefinidas:
¬∑ MqlDateTime √© destinado para trabalhar com data e hora;
¬∑ MqlParam pode enviar par√¢metros de entrada quando criar um indicador usando a fun√ß√£o
<h3>IndicatorCreate();</h3>
¬∑ MqlRates √© destinado para manipular dados hist√≥ricos, ela cont√©m informa√ß√µes sobre o pre√ßo, o
volume e o spread;
¬∑ MqlBookInfo √© destinado para obter informa√ß√µes sobre a O livro de ofertas;
¬∑ MqlTradeRequest √© usado para criar uma solicita√ß√£o para opera√ß√µes de negocia√ß√£o;
¬∑ MqlTradeCheckResult permite verificar se a solicita√ß√£o de negocia√ß√£o est√° prestes antes de ser
enviada;
¬∑ MqlTradeResult cont√©m a resposta do servidor de negocia√ß√£o a uma solicita√ß√£o de negocia√ß√£o,
enviada via fun√ß√£o OrderSend();
¬∑ MqlTradeTransaction cont√©m a descri√ß√£o de uma opera√ß√£o de negocia√ß√£o;
¬∑ MqlTick √© projetado para recuperar rapidamente a maioria das informa√ß√µes requeridas sobre os
pre√ßos atuais.
¬∑ Estruturas do Calend√°rio Econ√¥mico s√£o destinadas para obter informa√ß√µes sobre os eventos do
Calend√°rio econ√¥mico que entram na plataforma MetaTrader 5 em tempo real. Fun√ß√µes do
Calend√°rio econ√¥mico permitem analisar indicadores macroecon√¥micos imediatamente ap√≥s a
publica√ß√£o de novos relat√≥rios, uma vez que os valores reais s√£o transmitidos diretamente da fonte
sem atraso.</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
976
<h3>MqlDateTime</h3>
A estrutura de tipo data cont√©m oito campos do tipo int:
</p>
<pre><code class="language-mql5">
struct MqlDateTime
  {
   int year;           // Ano
   int mon;            // M√™s
   int day;            // Dia
   int hour;           // Hora
   int min;            // Minutos
   int sec;            // Segundos
   int day_of_week;    // Dia da semana (0-domingo, 1-segunda, ... ,6-s√°bado)
   int day_of_year;    // N√∫mero do dia do ano (1 de Janeiro √© atribu√≠do o valor 0)
</code></pre>
<p>
  };
<h3>Observa√ß√£o</h3>
O n√∫mero do dia do ano, day_of_year, para ano bissexto, a partir de mar√ßo, diferir√° do n√∫mero do
dia correspondente a um ano n√£o bissexto.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
void OnStart()
  {
//---
   datetime date1=D&#x27;2008.03.01&#x27;;
   datetime date2=D&#x27;2009.03.01&#x27;;
   MqlDateTime str1,str2;
   TimeToStruct(date1,str1);
   TimeToStruct(date2,str2);
   printf(&quot;%02d.%02d.%4d, day of year = %d&quot;,str1.day,str1.mon,
          str1.year,str1.day_of_year);
   printf(&quot;%02d.%02d.%4d, day of year = %d&quot;,str2.day,str2.mon,
          str2.year,str2.day_of_year);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
/*  Resultado:
   01.03.2008, day of year = 60
   01.03.2009, day of year = 59
</code></pre>
<p>
*/
<h3>Tamb√©m Veja</h3>
<h3>TimeToStruct, Estruturas e Classes</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
977
A Estrutura de Entrada de Par√¢metros de Indicadores
(MqlParam)
A estrutura MqlParam foi projetada especialmente para fornecer par√¢metros de entrada quando criar
um um indicador t√©cnico usando a fun√ß√£o IndicatorCreate().
</p>
<pre><code class="language-mql5">
struct MqlParam
  {
   ENUM_DATATYPE     type;                    // tipo de par√¢metro de entrada, valor d
   long              integer_value;           // campo para armazenar um tipo inteiro
   double            double_value;            // campo para armazenar um tipo double
   string            string_value;            // campo para armazenar um tipo string
</code></pre>
<p>
  };
Todos os par√¢metros de entrada de um indicador s√£o transmitidos na forma de um array do tipo
MqlParam, o campo type de cada elemento deste array especifica o tipo de dado transmitido pelo
elemento. Os valores do indicador devem ser primeiro colocados nos campos apropriados para cada
elemento (in integer_value, in double_value or string_value) dependendo de qual valor da enumera√ß√£o
ENUM_DATATYPE √© especificado no campo type.
Se o valor IND_CUSTOM for passado como tipo do indicador para fun√ß√£o IndicatorCreate(), o primeiro
elemento do array de par√¢metros de entrada deve ter o campo type com o valor de TYPE_STRING
proveniente da enumera√ß√£o ENUM_DATATYPE, e o campo string_value deve conter o nome do
indicador customizado.</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
978
<h3>MqlRates</h3>
Esta estrutura armazena informa√ß√µes sobre os pre√ßos, volumes e spread.
</p>
<pre><code class="language-mql5">
struct MqlRates
  {
   datetime time;         // Hora inicial do per√≠odo
   double   open;         // Pre√ßo de abertura
   double   high;         // O pre√ßo mais alto do per√≠odo
   double   low;          // O pre√ßo mais baixo do per√≠odo
   double   close;        // Pre√ßo de fechamento
   long     tick_volume;  // Volume de Tick
   int      spread;       // Spread
   long     real_volume;  // Volume de negocia√ß√£o
</code></pre>
<p>
  };
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
void OnStart()
  {
   MqlRates rates[];
   int copied=CopyRates(NULL,0,0,100,rates);
   if(copied&lt;=0)
      Print(&quot;Erro ao copiar dados de pre√ßos &quot;,GetLastError());
   else Print(&quot;Copied &quot;,ArraySize(rates),&quot; bars&quot;);
</code></pre>
<p>
  }
<h3>Tamb√©m Veja</h3>
<h3>CopyRates, Acesso a s√©ries de tempo</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
979
<h3>MqlBookInfo</h3>
Fornece informa√ß√µes sobre os dados de profundidade de mercado.
</p>
<pre><code class="language-mql5">
struct MqlBookInfo
  {
   ENUM_BOOK_TYPE   type;            // Tipo de ordem proveniente da enumera√ß√£o ENUM_B
   double           price;           // Pre√ßo
   long             volume;          // Volume
   double           volume_real;     // Volume com maior precis√£o
</code></pre>
<p>
  };
<h3>Observa√ß√£o</h3>
A estrutura MqlBookInfo √© predefinida, portanto ela n√£o requer nenhuma declara√ß√£o ou descri√ß√£o.
Para usar a estrutura, apenas declare a vari√°vel deste tipo.
O DOM (Profundidade de Mercado) √© dispon√≠vel somente para alguns ativos (symbols).
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
   MqlBookInfo priceArray[];
   bool getBook=MarketBookGet(NULL,priceArray);
   if(getBook)
     {
      int size=ArraySize(priceArray);
      Print(&quot;MarketBookInfo sobre &quot;,Symbol());
     }
   else
     {
      Print(&quot;Falha ao receber DOM para o s√≠mbolo &quot;,Symbol());
     }
</code></pre>
<p>
<h3>Tamb√©m Veja</h3>
MarketBookAdd, MarketBookRelease, MarketBookGet, Ordens de Negocia√ß√£o em DOM, Tipos de
<h3>Dados</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
980
A Estrutura de Solicita√ß√£o de Negocia√ß√£o (MqlTradeRequest)
A intera√ß√£o entre o terminal do cliente e o servidor de negocia√ß√£o para colocar ordens realiza-se
usando solicita√ß√µes de negocia√ß√£o (pedidos de negocia√ß√£o). A solicita√ß√£o de negocia√ß√£o √© apresentada
por uma estrutura predefinida especial chamada de MqlTradeRequest, ela cont√©m todos os campos
necess√°rios para realizar opera√ß√µes (deals) de negocia√ß√£o. O resultado do processamento da
solicita√ß√£o √© apresentado pela mesma estrutura MqlTradeResult.
</p>
<pre><code class="language-mql5">
struct MqlTradeRequest
  {
   ENUM_TRADE_REQUEST_ACTIONS    action;           // Tipo de opera√ß√£o de negocia√ß√£o
   ulong                         magic;            // Expert Advisor -conselheiro- ID 
   ulong                         order;            // Bilhetagem da ordem
   string                        symbol;           // S√≠mbolo de negocia√ß√£o
   double                        volume;           // Volume solicitado para uma encom
   double                        price;            // Pre√ßo
   double                        stoplimit;        // N√≠vel StopLimit da ordem
   double                        sl;               // N√≠vel Stop Loss da ordem
   double                        tp;               // N√≠vel Take Profit da ordem
   ulong                         deviation;        // M√°ximo desvio poss√≠vel a partir 
   ENUM_ORDER_TYPE               type;             // Tipo de ordem
   ENUM_ORDER_TYPE_FILLING       type_filling;     // Tipo de execu√ß√£o da ordem
   ENUM_ORDER_TYPE_TIME          type_time;        // Tipo de expira√ß√£o da ordem
   datetime                      expiration;       // Hora de expira√ß√£o da ordem (para
   string                        comment;          // Coment√°rio sobre a ordem
   ulong                         position;         // Bilhete da posi√ß√£o
   ulong                         position_by;      // Bilhete para uma posi√ß√£o oposta
</code></pre>
<p>
  };
<h3>Descri√ß√£o dos Campos</h3>
<h3>Campo</h3>
<h3>Descri√ß√£o</h3>
action
Tipo de opera√ß√£o de negocia√ß√£o. Pode ser um dos valores da enumera√ß√£o
ENUM_TRADE_REQUEST_ACTIONS.
magic
Expert Advisor ID. Permite organizar um processamento anal√≠tico de ordens de
negocia√ß√£o. Cada Expert Advisor pode definir seu pr√≥prio ID (identificador) √∫nico
ao enviar uma solicita√ß√£o de negocia√ß√£o.
order
Bilhetagem (ticket) da ordem. √â usado para modificar ordens pendentes.
symbol
Ativo da ordem. N√£o √© necess√°rio para modifica√ß√£o de ordens e opera√ß√µes de
encerramento de posi√ß√£o.
volume
Volume da ordem solicitada em lotes. Note que o volume real de uma opera√ß√£o
(deal) depender√° do tipo de execu√ß√£o da ordem.
price
Pre√ßo no qual a ordem deve ser executada. Ordens a mercado de ativos, cujo tipo
de execu√ß√£o √© &quot;Market Execution&quot; (SYMBOL_TRADE_EXECUTION_MARKET), de tipo
TRADE_ACTION_DEAL, n√£o necessitam que se especifique o pre√ßo.</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
981
<h3>Campo</h3>
<h3>Descri√ß√£o</h3>
stoplimit
O valor do pre√ßo, no qual a ordem pendente Limit ser√° colocada, quando o pre√ßo
corrente alcan√ßa o valor deste pre√ßo(esta condi√ß√£o √© obrigat√≥ria). At√© l√°, a ordem
pendente n√£o √© colocada. 
sl
Pre√ßo de Stop Loss no caso de um movimento desfavor√°vel de pre√ßo
tp
Pre√ßo de Take Profit no caso de um movimento favor√°vel de pre√ßo
deviation
O m√°ximo desvio de pre√ßo, especificado em pontos
type
Tipo de ordem. Pode ser um dos valores da enumera√ß√£o ENUM_ORDER_TYPE.
type_filling
Tipo de execu√ß√£o da ordem. Pode ser um dos valores da enumera√ß√£o
ENUM_ORDER_TYPE_FILLING.
type_time
Tipo de expira√ß√£o da ordem. Pode ser um dos valores da enumera√ß√£o
ENUM_ORDER_TYPE_TIME.
expiration
Hora de expira√ß√£o da ordem (para ordens do tipo ORDER_TIME_SPECIFIED)
comment
<h3>Coment√°rio sobre a ordem</h3>
position
Bilhete da posi√ß√£o. Deve ser preenchido ao alterar e fechar a posi√ß√£o para a sua
identifica√ß√£o inequ√≠voca. Normalmente, corresponde ao bilhete de ordem, do qual,
como resultado, a posi√ß√£o foi aberta.
position_by
Bilhete da posi√ß√£o oposta. Utiliza-se ao fechar uma posi√ß√£o usando outra oposta,
se estiver aberta no mesmo instrumento, mas na dire√ß√£o oposta.
Para modificar ou fechar posi√ß√µes no sistema de cobertura, voc√™ deve especificar o seu bilhete
(MqlTradeRequest::position). No sistema de compensa√ß√£o o bilhete tamb√©m pode ser
especificado, mas a identifica√ß√£o da posi√ß√£o √© realizada segundo o nome do s√≠mbolo.
Para enviar ordens para realizaropera√ß√µes de negocia√ß√£o (trade)√© necess√°rio usar a fun√ß√£o
OrderSend(). Para cada opera√ß√£o de negocia√ß√£o √© necess√°rio especificar campos obrigat√≥rios; campos
opcionais tamb√©m podem ser preenchidos. Existem sete poss√≠veis casos para enviar uma ordem de
negocia√ß√£o:
<h3>Execu√ß√£o a Pedido</h3>
Esta √© uma ordem de negocia√ß√£o para abrir uma posi√ß√£o no modo Request Execution (negocia√ß√£o
sobre pre√ßos solicitados). Ela requer que se especifique os seguintes 9 campos:
¬∑ action
¬∑ symbol
¬∑ volume
¬∑ price
¬∑ sl
¬∑ tp
¬∑ deviation
¬∑ type
¬∑ type_filling</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
982
Tamb√©m √© poss√≠vel especificar valores dos campos &quot;magic&quot; e &quot;comment&quot;.
<h3>Execu√ß√£o Instant√¢nea</h3>
Esta √© uma ordem de negocia√ß√£o para abrir uma posi√ß√£o no modo Instant Execution (negocia√ß√£o
pelos pre√ßos correntes). Ela requer que se especifique os seguintes 9 campos:
¬∑ action
¬∑ symbol
¬∑ volume
¬∑ price
¬∑ sl
¬∑ tp
¬∑ deviation
¬∑ type
¬∑ type_filling
Tamb√©m √© poss√≠vel especificar valores dos campos &quot;magic&quot; e &quot;comment&quot;.
<h3>Execu√ß√£o de Mercado</h3>
Esta √© uma ordem de negocia√ß√£o para abrir uma posi√ß√£o no modo Market Execution (execu√ß√£o a
mercado). Ela requer que se especifique os seguintes 5 campos:
¬∑ action
¬∑ symbol
¬∑ volume
¬∑ type
¬∑ type_filling
Tamb√©m √© poss√≠vel especificar valores dos campos &quot;magic&quot; e &quot;comment&quot;.
<h3>Execu√ß√£o Exchange</h3>
Esta √© uma ordem de negocia√ß√£o para abrir uma posi√ß√£o no modo Exchange Execution (execu√ß√£o em
um sistema de negocia√ß√£o externo). Ela requer que se especifique os seguintes 5 campos:
¬∑ action
¬∑ symbol
¬∑ volume
¬∑ type
¬∑ type_filling
Tamb√©m √© poss√≠vel especificar valores dos campos &quot;magic&quot; e &quot;comment&quot;.
Exemplo de opera√ß√£o de negocia√ß√£o TRADE_ACTION_DEAL para abrir uma posi√ß√£o Buy:</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
983
</p>
<pre><code class="language-mql5">
#define EXPERT_MAGIC 123456   // MagicNumber do conselheiro
//+------------------------------------------------------------------+
//| Abertura da posi√ß√£o Buy                                          |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- Atualiza√ß√£o e inicializa√ß√£o do pedido e o seu resultado
   MqlTradeRequest request={};
   MqlTradeResult  result={};
//--- par√¢metros do pedido
   request.action   =TRADE_ACTION_DEAL;                     // tipo de opera√ß√£o de neg
   request.symbol   =Symbol();                              // s√≠mbolo
   request.volume   =0.1;                                   // volume de 0.1 lotes
   request.type     =ORDER_TYPE_BUY;                        // tipo de ordem
   request.price    =SymbolInfoDouble(Symbol(),SYMBOL_ASK); // pre√ßo para abertura
   request.deviation=5;                                     // desvio permitido do pre
   request.magic    =EXPERT_MAGIC;                          // MagicNumber da ordem
//--- envio do pedido
   if(!OrderSend(request,result))
      PrintFormat(&quot;OrderSend error %d&quot;,GetLastError());     // se n√£o for poss√≠vel env
//--- informa√ß√£o sobre a opera√ß√£o
   PrintFormat(&quot;retcode=%u  deal=%I64u  order=%I64u&quot;,result.retcode,result.deal,result
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
</code></pre>
<p>
Exemplo de opera√ß√£o de negocia√ß√£oTRADE_ACTION_DEAL para abertura da posi√ß√£o Sell:
</p>
<pre><code class="language-mql5">
#define EXPERT_MAGIC 123456   // MagicNumber do conselheiro
//+------------------------------------------------------------------+
//| Abertura da posi√ß√£o Sell                                         |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- Declara√ß√£o e inicializa√ß√£o do pedido e o seu resultado
   MqlTradeRequest request={};
   MqlTradeResult  result={};
//--- par√¢metros do pedido
   request.action   =TRADE_ACTION_DEAL;                     // tipo de opera√ß√£o de neg
   request.symbol   =Symbol();                              // s√≠mbolo
   request.volume   =0.2;                                   // volume de 0.2 lotes
   request.type     =ORDER_TYPE_SELL;                       // tipo da ordem
   request.price    =SymbolInfoDouble(Symbol(),SYMBOL_BID); // pre√ßo para a abertura
   request.deviation=5;                                     // desvio permitido do pre
   request.magic    =EXPERT_MAGIC;                          // MagicNumber da ordem
//--- envio do pedido
   if(!OrderSend(request,result))
      PrintFormat(&quot;OrderSend error %d&quot;,GetLastError());     // se n√£o for poss√≠vel env
//--- informa√ß√£o sobre a opera√ß√£o
   PrintFormat(&quot;retcode=%u  deal=%I64u  order=%I64u&quot;,result.retcode,result.deal,result
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
</code></pre>
<p>
Exemplo de ordem de negocia√ß√£o TRADE_ACTION_DEAL para fechadura de posi√ß√µes:</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
984
</p>
<pre><code class="language-mql5">
#define EXPERT_MAGIC 123456   // MagicNumber do conselheiro
//+------------------------------------------------------------------+
//| Fechadura de todas as posi√ß√µes                                   |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- declara√ß√£o do pedido e o seu resultado
   MqlTradeRequest request;
   MqlTradeResult  result;
   int total=PositionsTotal(); // n√∫mero de posi√ß√µes abertas   
//--- iterar todas as posi√ß√µes abertas
   for(int i=total-1; i&gt;=0; i--)
     {
      //--- par√¢metros da ordem
      ulong  position_ticket=PositionGetTicket(i);                                    
      string position_symbol=PositionGetString(POSITION_SYMBOL);                      
      int    digits=(int)SymbolInfoInteger(position_symbol,SYMBOL_DIGITS);            
      ulong  magic=PositionGetInteger(POSITION_MAGIC);                                
      double volume=PositionGetDouble(POSITION_VOLUME);                               
      ENUM_POSITION_TYPE type=(ENUM_POSITION_TYPE)PositionGetInteger(POSITION_TYPE);  
      //--- sa√≠da de informa√ß√£o sobre a posi√ß√£o
      PrintFormat(&quot;#%I64u %s  %s  %.2f  %s [%I64d]&quot;,
                  position_ticket,
                  position_symbol,
                  EnumToString(type),
                  volume,
                  DoubleToString(PositionGetDouble(POSITION_PRICE_OPEN),digits),
                  magic);
      //--- se o MagicNumber coincidir
      if(magic==EXPERT_MAGIC)
        {
         //--- zerar os valores do pedido e os seus resultados
         ZeroMemory(request);
         ZeroMemory(result);
         //--- configura√ß√£o dos par√¢metros da ordem
         request.action   =TRADE_ACTION_DEAL;        // tipo de opera√ß√£o de negocia√ß√£o
         request.position =position_ticket;          // bilhete da posi√ß√£o
         request.symbol   =position_symbol;          // s√≠mbolo 
         request.volume   =volume;                   // volume da posi√ß√£o
         request.deviation=5;                        // desvio permitido do pre√ßo
         request.magic    =EXPERT_MAGIC;             // MagicNumber da posi√ß√£o
         //--- coloca√ß√£o do pre√ßo e tipo de ordem dependendo do tipo de ordem
         if(type==POSITION_TYPE_BUY)
           {
            request.price=SymbolInfoDouble(position_symbol,SYMBOL_BID);
            request.type =ORDER_TYPE_SELL;
           }
         else
           {
            request.price=SymbolInfoDouble(position_symbol,SYMBOL_ASK);
            request.type =ORDER_TYPE_BUY;
           }
         //--- sa√≠da de informa√ß√£o sobre o fechamento
         PrintFormat(&quot;Close #%I64d %s %s&quot;,position_ticket,position_symbol,EnumToString
         //--- envio do pedido
         if(!OrderSend(request,result))
            PrintFormat(&quot;OrderSend error %d&quot;,GetLastError());  // se n√£o for poss√≠vel 
         //--- informa√ß√£o sobre a opera√ß√£o 
         PrintFormat(&quot;retcode=%u  deal=%I64u  order=%I64u&quot;,result.retcode,result.deal,
         //---
        }</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
985
</p>
<pre><code class="language-mql5">
     }
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
</code></pre>
<p>
<h3>SL &amp; TP Modifica√ß√£o</h3>
Ordem de negocia√ß√£o para modificar os n√≠veis de pre√ßo StopLoss e/ou TakeProfit Ela requer que se
especifique os seguintes 4 campos:
¬∑ action
¬∑ symbol
¬∑ sl
¬∑ tp
¬∑ position
Exemplo da opera√ß√£o de negocia√ß√£o TRADE_ACTION_SLTP para alterar o valor Stop-Loss e Take-
<h3>Profit na posi√ß√£o aberta:</h3>
</p>
<pre><code class="language-mql5">
#define EXPERT_MAGIC 123456  // MagicNumber do conselheiro
//+------------------------------------------------------------------+
//| Modifica√ß√£o do Stop-Loss e Take-Profit da posi√ß√£o                |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- declarac√£o do pedido e o seu resultado
   MqlTradeRequest request;
   MqlTradeResult  result;
   int total=PositionsTotal(); // n√∫mero de posi√ß√µes abertas   
//--- iterar sobre todas as posi√ß√µes abertas
   for(int i=0; i&lt;total; i++)
     {
      //--- par√¢metros da ordem
      ulong  position_ticket=PositionGetTicket(i);// bilhete da posi√ß√£o
      string position_symbol=PositionGetString(POSITION_SYMBOL); // s√≠mbolo 
      int    digits=(int)SymbolInfoInteger(position_symbol,SYMBOL_DIGITS); // n√∫mero d
      ulong  magic=PositionGetInteger(POSITION_MAGIC); // MagicNumber da posi√ß√£o
      double volume=PositionGetDouble(POSITION_VOLUME);    // volume da posi√ß√£o
      double sl=PositionGetDouble(POSITION_SL);  // Stop Loss da posi√ß√£o
      double tp=PositionGetDouble(POSITION_TP);  // Take-Profit da posi√ß√£o
      ENUM_POSITION_TYPE type=(ENUM_POSITION_TYPE)PositionGetInteger(POSITION_TYPE);  
      //--- sa√≠da de informa√ß√µes sobre a posi√ß√£o
      PrintFormat(&quot;#%I64u %s  %s  %.2f  %s  sl: %s  tp: %s  [%I64d]&quot;,
                  position_ticket,
                  position_symbol,
                  EnumToString(type),
                  volume,
                  DoubleToString(PositionGetDouble(POSITION_PRICE_OPEN),digits),
                  DoubleToString(sl,digits),
                  DoubleToString(tp,digits),
                  magic);
      //--- se o MagicNumber coincidir, o Stop-Loss e o Take-Profit n√£o est√£o definido
      if(magic==EXPERT_MAGIC &amp;&amp; sl==0 &amp;&amp; tp==0)
        {</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
986
</p>
<pre><code class="language-mql5">
         //--- c√°lculo dos n√≠veis de pre√ßos atuais
         double price=PositionGetDouble(POSITION_PRICE_OPEN);
         double bid=SymbolInfoDouble(position_symbol,SYMBOL_BID);
         double ask=SymbolInfoDouble(position_symbol,SYMBOL_ASK);
         int    stop_level=(int)SymbolInfoInteger(position_symbol,SYMBOL_TRADE_STOPS_L
         double price_level;
         //--- se o n√≠vel de deslocamento m√≠nimo permitido em pontos a partir do pre√ßo
         if(stop_level&lt;=0)
            stop_level=150; // definimos o deslocamento em 150 pontos a partir do pre√ß
         else
            stop_level+=50; // definimos o n√≠vel de deslocamento (SYMBOL_TRADE_STOPS_L
         //--- c√°lculo e arredondamento dos valores Stop-Loss e Take-Profit
         price_level=stop_level*SymbolInfoDouble(position_symbol,SYMBOL_POINT);
         if(type==POSITION_TYPE_BUY)
           {
            sl=NormalizeDouble(bid-price_level,digits);
            tp=NormalizeDouble(bid+price_level,digits);
           }
         else
           {
            sl=NormalizeDouble(ask+price_level,digits);
            tp=NormalizeDouble(ask-price_level,digits);
           }
         //--- zerar os valores de pedido e o seu resultado
         ZeroMemory(request);
         ZeroMemory(result);
         //--- defini√ß√£o dos par√¢metros de opera√ß√£o
         request.action  =TRADE_ACTION_SLTP; // tipo de opera√ß√£o de negocia√ß√£o
         request.position=position_ticket;   // bilhete da posi√ß√£o
         request.symbol=position_symbol;     // s√≠mbolo 
         request.sl      =sl;                // Stop Loss da posi√ß√£o
         request.tp      =tp;                // Take Profit da posi√ß√£o
         request.magic=EXPERT_MAGIC;         // MagicNumber da posi√ß√£o
         //--- sa√≠da de informa√ß√µes sobre a modifica√ß√£o
         PrintFormat(&quot;Modify #%I64d %s %s&quot;,position_ticket,position_symbol,EnumToStrin
         //--- envio do pedido
         if(!OrderSend(request,result))
            PrintFormat(&quot;OrderSend error %d&quot;,GetLastError());  // se n√£o for poss√≠vel 
         //--- informa√ß√µes sobre a opera√ß√£o   
         PrintFormat(&quot;retcode=%u  deal=%I64u  order=%I64u&quot;,result.retcode,result.deal,
        }
     }
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
</code></pre>
<p>
<h3>Ordem Pendente</h3>
Ordem de negocia√ß√£o para colocar uma ordem pendente. Ela requer que se especifiquem os
seguintes 11 campos:
¬∑ action
¬∑ symbol
¬∑ volume
¬∑ price
¬∑ stoplimit
¬∑ sl
¬∑ tp</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
987
¬∑ type
¬∑ type_filling
¬∑ type_time
¬∑ expiration
Tamb√©m √© poss√≠vel especificar valores dos campos &quot;magic&quot; e &quot;comment&quot;.
Exemplo de opera√ß√£o de negocia√ß√£o TRADE_ACTION_PENDING para coloca√ß√£o de ordens pendentes:</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
988
</p>
<pre><code class="language-mql5">
#property description &quot;Exemplo de coloca√ß√£o de ordens pendentes&quot;
#property script_show_inputs
#define EXPERT_MAGIC 123456                             // MagicNumber do conselheiro
input ENUM_ORDER_TYPE orderType=ORDER_TYPE_BUY_LIMIT;   // tipo da ordem
//+------------------------------------------------------------------+
//| Coloca√ß√£o de ordens pendentes                                    |
//+------------------------------------------------------------------+
void OnStart()
  {
//-- declara√ß√£o e inicializa√ß√£o do pedido e o seu resultado
   MqlTradeRequest request={};
   MqlTradeResult  result={};
//--- par√¢metros para coloca√ß√£o da ordem pendente
   request.action   =TRADE_ACTION_PENDING;                             // tipo de oper
   request.symbol   =Symbol();                                         // s√≠mbolo
   request.volume   =0.1;                                              // volume de 0.
   request.deviation=2;                                                //desvio permit
   request.magic    =EXPERT_MAGIC;                                     // MagicNumber 
   int offset = 50;                                                    // deslocamento
   double price;                                                       // pre√ßo de exe
   double point=SymbolInfoDouble(_Symbol,SYMBOL_POINT);                // tamanho do p
   int digits=SymbolInfoInteger(_Symbol,SYMBOL_DIGITS);                // n√∫mero de s√≠
   //--- verifica√ß√£o do tipo de opera√ß√£o
   if(orderType==ORDER_TYPE_BUY_LIMIT)
     {
      request.type     =ORDER_TYPE_BUY_LIMIT;                          // tipo de orde
      price=SymbolInfoDouble(Symbol(),SYMBOL_ASK)-offset*point;        // pre√ßo para a
      request.price    =NormalizeDouble(price,digits);                 // –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω
     }
   else if(orderType==ORDER_TYPE_SELL_LIMIT)
     {
      request.type     =ORDER_TYPE_SELL_LIMIT;                          // —Ç–∏–ø –æ—Ä–¥–µ—Ä–∞
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID)+offset*point;         // —Ü–µ–Ω–∞ –¥–ª—è –æ—Ç
      request.price    =NormalizeDouble(price,digits);                  // pre√ßo de ab
     }
   else if(orderType==ORDER_TYPE_BUY_STOP)
     {
      request.type =ORDER_TYPE_BUY_STOP;                                // tipo de ord
      price        =SymbolInfoDouble(Symbol(),SYMBOL_ASK)+offset*point; // pre√ßo de ab
      request.price=NormalizeDouble(price,digits);                      // pre√ßo de ab
     }
   else if(orderType==ORDER_TYPE_SELL_STOP)
     {
      request.type     =ORDER_TYPE_SELL_STOP;                           // tipo de ord
      price=SymbolInfoDouble(Symbol(),SYMBOL_BID)-offset*point;         // pre√ßo para 
      request.price    =NormalizeDouble(price,digits);                  // pre√ßo de ab
     }
   else Alert(&quot;Este exemplo √© apenas para coloca√ß√£o de ordens pendentes&quot;);   // Se a o
//--- enviar a ordem
   if(!OrderSend(request,result))
      PrintFormat(&quot;OrderSend error %d&quot;,GetLastError());                 // Se n√£o for 
//--- informa√ß√µes sobre a opera√ß√£o
   PrintFormat(&quot;retcode=%u  deal=%I64u  order=%I64u&quot;,result.retcode,result.deal,result
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
</code></pre>
<p>
<h3>Modificar Ordem Pendente</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
989
Ordem de negocia√ß√£o para modificar os pre√ßos de uma ordem pendente. Ela requer que se
especifiquem os seguintes 7 campos:
¬∑ action
¬∑ order
¬∑ price
¬∑ sl
¬∑ tp
¬∑ type_time
¬∑ expiration
Exemplo de opera√ß√£o de negocia√ß√£o TRADE_ACTION_MODIFY para modifica√ß√£o dos n√≠veis de pre√ßos
da ordem pendente:</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
990
</p>
<pre><code class="language-mql5">
#define EXPERT_MAGIC 123456 // MagicNumber do conselheiro
//+------------------------------------------------------------------+
//| Modifica√ß√£o de ordens pendentes                                  |
//+------------------------------------------------------------------+
void OnStart()
 {
//-- declara√ß√£o e inicializa√ß√£o do pedido e o seu resultado
</code></pre>
<p>
<h3>MqlTradeRequest request={};</h3>
<h3>MqlTradeResult result={};</h3>
 int total=OrdersTotal(); // n√∫mero de ordens pendentes colocadas
</p>
<pre><code class="language-mql5">
//--- iterar todas as ordens pendentes colocadas
</code></pre>
<p>
 for(int i=0; i&lt;total; i++)
</p>
<pre><code class="language-mql5">
 {
 //--- par√¢metros da ordem
</code></pre>
<p>
 ulong order_ticket=OrderGetTicket(i); // bilhete da ordem
 string order_symbol=Symbol(); // s√≠mbolo
 int digits=(int)SymbolInfoInteger(order_symbol,SYMBOL_DIGITS); // n√∫mero de signos de
 ulong magic=OrderGetInteger(ORDER_MAGIC); // MagicNumber da ordem
 double volume=OrderGetDouble(ORDER_VOLUME_CURRENT); // volume atual da ordem
 double sl=OrderGetDouble(ORDER_SL); // Stop Loss atual da ordem
 double tp=OrderGetDouble(ORDER_TP); // Take Profit atual da ordem
 ENUM_ORDER_TYPE type=(ENUM_ORDER_TYPE)OrderGetInteger(ORDER_TYPE); // tipo de ordem
 int offset = 50; // desloca√ß√£o a partir do pre√ßo atual para coloca√ß√£o da ordem, em po
 double price; // pre√ßo de ativa√ß√£o da ordem
 double point=SymbolInfoDouble(order_symbol,SYMBOL_POINT); // tamanho do ponto
</p>
<pre><code class="language-mql5">
 //--- sa√≠da de informa√ß√µes sobre a ordem
</code></pre>
<p>
 PrintFormat(&quot;#%I64u %s %s %.2f %s sl: %s tp: %s [%I64d]&quot;,
 order_ticket,
 order_symbol,
<h3>EnumToString(type),</h3>
 volume,
 DoubleToString(PositionGetDouble(POSITION_PRICE_OPEN),digits),
<h3>DoubleToString(sl,digits),</h3>
<h3>DoubleToString(tp,digits),</h3>
 magic);
</p>
<pre><code class="language-mql5">
 //--- se o MagicNumber coincidir, o Stop Loss e o Take Profit nao foram definidos
</code></pre>
<p>
 if(magic==EXPERT_MAGIC &amp;&amp; sl==0 &amp;&amp; tp==0)
</p>
<pre><code class="language-mql5">
 {
</code></pre>
<p>
 request.action=TRADE_ACTION_MODIFY; // tipo de opera√ß√£o de negocia√ß√£o
 request.order = OrderGetTicket(i); // bilhete da ordem
 request.symbol =Symbol(); // s√≠mbolo
 request.deviation=5; // desvio permitido a partir do pre√ßo
</p>
<pre><code class="language-mql5">
 //--- defini√ß√£o do n√≠vel de pre√ßos Take Profit e Stop Loss da ordem dependendo do seu
</code></pre>
<p>
 if(type==ORDER_TYPE_BUY_LIMIT)
</p>
<pre><code class="language-mql5">
 {
</code></pre>
<p>
 price = SymbolInfoDouble(Symbol(),SYMBOL_ASK)-offset*point; 
 request.tp = NormalizeDouble(price+offset*point,digits);
 request.sl = NormalizeDouble(price-offset*point,digits);
 request.price =NormalizeDouble(price,digits); // pre√ßo de abertura normalizado
 }
 else if(type==ORDER_TYPE_SELL_LIMIT)
</p>
<pre><code class="language-mql5">
 {
</code></pre>
<p>
 price = SymbolInfoDouble(Symbol(),SYMBOL_BID)+offset*point; 
 request.tp = NormalizeDouble(price-offset*point,digits);
 request.sl = NormalizeDouble(price+offset*point,digits);
 request.price =NormalizeDouble(price,digits); // pre√ßo de abertura normalizado
 }
 else if(type==ORDER_TYPE_BUY_STOP)
</p>
<pre><code class="language-mql5">
 {
</code></pre>
<p>
 price = SymbolInfoDouble(Symbol(),SYMBOL_ASK)+offset*point; 
 request.tp = NormalizeDouble(price+offset*point,digits);</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
991
 request.sl = NormalizeDouble(price-offset*point,digits);
 request.price =NormalizeDouble(price,digits); // pre√ßo de abertura normalizado
 }
 else if(type==ORDER_TYPE_SELL_STOP)
</p>
<pre><code class="language-mql5">
 {
</code></pre>
<p>
 price = SymbolInfoDouble(Symbol(),SYMBOL_BID)-offset*point; 
 request.tp = NormalizeDouble(price-offset*point,digits);
 request.sl = NormalizeDouble(price+offset*point,digits);
 request.price =NormalizeDouble(price,digits); // pre√ßo de abertura normalizado
 }
</p>
<pre><code class="language-mql5">
 //--- envio do pedido
</code></pre>
<p>
 if(!OrderSend(request,result))
 PrintFormat(&quot;OrderSend error %d&quot;,GetLastError()); // se n√£o foi poss√≠vel enviar o ped
</p>
<pre><code class="language-mql5">
 //--- informa√ß√µes sobre a opera√ß√£o 
</code></pre>
<p>
 PrintFormat(&quot;retcode=%u deal=%I64u order=%I64u&quot;,result.retcode,result.deal,result.ord
</p>
<pre><code class="language-mql5">
 //--- zerado dos valores do pedido e o seu resultado
</code></pre>
<p>
<h3>ZeroMemory(request);</h3>
<h3>ZeroMemory(result);</h3>
 }
 }
 }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
</code></pre>
<p>
<h3>Excluir Ordem Pendente</h3>
Ordem de negocia√ß√£o para excluir uma ordem pendente. Ela requer que se especifiquem os
seguintes 2 campos:
¬∑ action
¬∑ order
Exemplo de opera√ß√£o de negocia√ß√£o TRADE_ACTION_REMOVE para excluir ordens pendentes:
</p>
<pre><code class="language-mql5">
#define EXPERT_MAGIC 123456  // MagicNumber do conselheiro</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
992
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Exclus√£o de ordens pendentes                                     |
//+------------------------------------------------------------------+
void OnStart()
 {
//-- Declara√ß√£o e inicializa√ß√£o do pedido e resultado 
</code></pre>
<p>
<h3>MqlTradeRequest request={};</h3>
<h3>MqlTradeResult result={};</h3>
 int total=OrdersTotal(); // n√∫mero de ordens pendentes colocadas 
</p>
<pre><code class="language-mql5">
//--- iterar todas as ordens pendentes colocadas 
</code></pre>
<p>
 for(int i=total-1; i&gt;=0; i--)
</p>
<pre><code class="language-mql5">
 {
</code></pre>
<p>
 ulong order_ticket=OrderGetTicket(i); // bilhete da ordem
 ulong magic=OrderGetInteger(ORDER_MAGIC); // MagicNumber da ordem 
</p>
<pre><code class="language-mql5">
 //--- se o MagicNumber coincidir
</code></pre>
<p>
 if(magic==EXPERT_MAGIC)
</p>
<pre><code class="language-mql5">
 {
 //--- zerar os valores do pedido e o resultado
</code></pre>
<p>
<h3>ZeroMemory(request);</h3>
<h3>ZeroMemory(result);</h3>
</p>
<pre><code class="language-mql5">
 //--- instala√ß√£o de par√¢metros de opera√ß√£o 
</code></pre>
<p>
 request.action=TRADE_ACTION_REMOVE; // tipo de opera√ß√£o de negocia√ß√£o
 request.order = order_ticket; // bilhete da ordem
</p>
<pre><code class="language-mql5">
 //--- envio do pedido
</code></pre>
<p>
 if(!OrderSend(request,result))
 PrintFormat(&quot;OrderSend error %d&quot;,GetLastError()); // Se n√£o for capaz de enviar o ped
</p>
<pre><code class="language-mql5">
 //--- informa√ß√µes sobre a opera√ß√£o 
</code></pre>
<p>
 PrintFormat(&quot;retcode=%u deal=%I64u order=%I64u&quot;,result.retcode,result.deal,result.ord
 }
 }
 }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
</code></pre>
<p>
<h3>Tamb√©m Veja</h3>
Estruturas e Classes, Fun√ß√µes de Negocia√ß√£o (Trade), Propriedades de Ordem</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
993
A Estrutura de Resultados de uma Verifica√ß√£o de Solicita√ß√£o
de Negocia√ß√£o (MqlTradeCheckResult)
Antes de enviar uma solicita√ß√£o de uma opera√ß√£o de negocia√ß√£o para um servidor de negocia√ß√£o, √©
recomendado verific√°-la. A verifica√ß√£o √© realizada usando a fun√ß√£o OrderCheck(), para a qual a
solicita√ß√£o a ser verifica e uma vari√°vel estrutura do tipo MqlTradeCheckResult s√£o passadas. O
resultado da verifica√ß√£o ser√° escrita nesta vari√°vel.
</p>
<pre><code class="language-mql5">
struct MqlTradeCheckResult
  {
   uint         retcode;             // C√≥digo da resposta
   double       balance;             // Saldo ap√≥s a execu√ß√£o da opera√ß√£o (deal)
   double       equity;              // Saldo a mercado (equity) ap√≥s a execu√ß√£o da op
   double       profit;              // Lucro flutuante
   double       margin;              // Requerimentos de Margem
   double       margin_free;         // Margem livre
   double       margin_level;        // N√≠vel de margem
   string       comment;             // Coment√°rio sobre o c√≥digo da resposta (descri√ß
</code></pre>
<p>
  };
<h3>Descri√ß√£o dos Campos</h3>
<h3>Campo</h3>
<h3>Descri√ß√£o</h3>
retcode
<h3>C√≥digo de retorno</h3>
balance
Valor de saldo ap√≥s a execu√ß√£o da opera√ß√£o de negocia√ß√£o
equity
Valor de saldo a mercado ap√≥s a execu√ß√£o da opera√ß√£o de negocia√ß√£o
profit
Valor do lucro flutuante ap√≥s a execu√ß√£o da opera√ß√£o de negocia√ß√£o
margin
Margem requerida para a opera√ß√£o de negocia√ß√£o
margin_free
Margem livre que sobrar√° ap√≥s a execu√ß√£o da opera√ß√£o de negocia√ß√£o
margin_level
N√≠vel de margem que ser√° definida ap√≥s a execu√ß√£o da opera√ß√£o de negocia√ß√£o
comment
Coment√°rio sobre o c√≥digo da resposta, descri√ß√£o do erro
<h3>Tamb√©m Veja</h3>
Estrutura de Solicita√ß√£o de Negocia√ß√£o, Estrutura para Pre√ßos Correntes, OrderSend, OrderCheck</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
994
A Estrutura de um Resultado de Solicita√ß√£o de Negocia√ß√£o
(MqlTradeResult)
Como resultado de uma solicita√ß√£o de negocia√ß√£o, um servidor de negocia√ß√£o retorna dados sobre o
resultado do processamento da solicita√ß√£o de negocia√ß√£o na forma de uma estrutura predefinida
especial de tipo MqlTradeResult.
</p>
<pre><code class="language-mql5">
struct MqlTradeResult
  {
   uint     retcode;          // C√≥digo de retorno da opera√ß√£o
   ulong    deal;             // Bilhetagem (ticket) da opera√ß√£o (deal),se ela for rea
   ulong    order;            // Bilhetagem (ticket) da ordem, se ela for colocada
   double   volume;           // Volume da opera√ß√£o (deal), confirmada pela corretora
   double   price;            // Pre√ßo da opera√ß√£o (deal), se confirmada pela corretor
   double   bid;              // Pre√ßo de Venda corrente
   double   ask;              // Pre√ßo de Compra corrente
   string   comment;          // Coment√°rio da corretora para a opera√ß√£o (por default,
   uint     request_id;       // Identificador da solicita√ß√£o definida pelo terminal d
   int      retcode_external; // C√≥digo de resposta do sistema de negocia√ß√£o exterior
</code></pre>
<p>
  };
<h3>Descri√ß√£o dos Campos</h3>
<h3>Campo</h3>
<h3>Descri√ß√£o</h3>
retcode
 C√≥digo de retorno de um servidor de negocia√ß√£o
deal
Bilhetagem (ticket) da opera√ß√£o (deal), caso uma opera√ß√£o tenha sido
realizada. √â dispon√≠vel para uma opera√ß√£o de negocia√ß√£o de tipo
<h3>TRADE_ACTION_DEAL</h3>
order
Bilhetagem (ticket) da ordem, caso uma ordem tenha sido colocada. √â
dispon√≠vel 
para 
uma 
opera√ß√£o 
de 
negocia√ß√£o 
de 
tipo
<h3>TRADE_ACTION_PENDING</h3>
volume
Volume de opera√ß√£o (deal), confirmado pela corretora. Depende do tipo de
preenchimento da ordem
price
Pre√ßo da opera√ß√£o (deal), confirmado pela corretora. Depende da √°rea de
desvio da requisi√ß√£o de neg√≥cio e/ou sobre opera√ß√£o de neg√≥cios
bid
O pre√ßo corrente de venda de mercado (pre√ßo re-cotado)
ask
O pre√ßo corrente de compra de mercado (pre√ßo re-cotado)
comment
O coment√°rio da corretora para a opera√ß√£o (por default, ele √© preenchido
com a descri√ß√£o c√≥digo de retorno de um servidor de negocia√ß√£o)
request_id
Identificador da solicita√ß√£o definida pelo terminal ao enviar para o
servidor de negocia√ß√£o
retcode_external
C√≥digo de erro retornado pelo sistema de negocia√ß√£o exterior. O uso e
tipos destes erros depender√£o da corretora e do sistema de negocia√ß√£o</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
995
<h3>Campo</h3>
<h3>Descri√ß√£o</h3>
exterior a partir do qual s√£o enviadas as opera√ß√µes de negocia√ß√£o 
O resultado da opera√ß√£o de negocia√ß√£o √© retornado para vari√°vel do tipo MqlTradeResult, que √©
passado como o segundo par√¢metro da fun√ß√£o OrderSend() para realizar opera√ß√µes de negocia√ß√£o. 
O terminal fixa um identificador (ID) de solicita√ß√£o no campo request_id ao enviar-la para o servidor
de negocia√ß√£o usando as fun√ß√µes OrdersSend() e OrderSendAsync(). O terminal recebe mensagens
sobre transa√ß√µes realizadas provenientes do servidor de negocia√ß√£o e as submete para processamento
atrav√©s da fun√ß√£o OnTradeTransaction() contendo os seguintes componentes como par√¢metros:
¬∑ Descri√ß√£o da transa√ß√£o de negocia√ß√£o na estrutura MqlTradeTransaction;
¬∑ Descri√ß√£o da solicita√ß√£o de negocia√ß√£o enviado a partir 
da 
fun√ß√£o 
<h3>OrderSend()</h3>
ou
OrdersSendAsync(). O ID da solicita√ß√£o √© enviado pelo terminal para o servidor de negocia√ß√£o,
enquanto a solicita√ß√£o em si e seu request_id s√£o armazenados na mem√≥ria do terminal;
¬∑ O resultado de execu√ß√£o da solicita√ß√£o de negocia√ß√£o como estrutura MqlTradeResult com o campo
request_id contendo o ID desta solicita√ß√£o.
A fun√ß√£o OnTradeTransaction() recebe tr√™s par√¢metros de entrada mas os √∫ltimos dois devem ser
analisados somente para transa√ß√µes do tipo TRADE_TRANSACTION_REQUEST. Em todos os outros
casos, dados sobre a solicita√ß√£o de negocia√ß√£o e seu resultado de execu√ß√£o n√£o s√£o preenchidos.
Exemplo de an√°lise de par√¢metros pode ser encontrado em Estrutura de uma Solicita√ß√£o de
Negocia√ß√£o.
A defini√ß√£o do request_id pelo terminal na solicita√ß√£o de negocia√ß√£o quando envi√°-la para o servidor √©
introduzido principalmente para trabalhar com a fun√ß√£o ass√≠ncrona OrderSendAsync(). Este
identificador permite associar a a√ß√£o realizada (chamada a fun√ß√µes OrderSend ou OrderSendAsync)
com o resultado desta a√ß√£o enviada para OnTradeTransaction().
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Enviando uma solicita√ß√£o de negocia√ß√£o com o proc. de resultado  |
//+------------------------------------------------------------------+
bool MyOrderSend(MqlTradeRequest request,MqlTradeResult result)
  {
//--- redefine o √∫ltimo c√≥digo de erro para zero
   ResetLastError();
//--- envia solicita√ß√£o
   bool success=OrderSend(request,result);
//--- se o resultado falha - tentar descobrir o porqu√™
   if(!success)
     {
      int answer=result.retcode;
      Print(&quot;TradeLog: Requisi√ß√£o de negocia√ß√£o falhou. Erro = &quot;,GetLastError());
      switch(answer)
        {
         //--- nova cota√ß√£o
         case 10004:
           {</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
996
</p>
<pre><code class="language-mql5">
            Print(&quot;TRADE_RETCODE_REQUOTE&quot;);
            Print(&quot;request.price = &quot;,request.price,&quot;   result.ask = &quot;,
                  result.ask,&quot; result.bid = &quot;,result.bid);
            break;
           }
         //--- ordem n√£o √© aceita pelo servidor
         case 10006:
           {
            Print(&quot;TRADE_RETCODE_REJECT&quot;);
            Print(&quot;request.price = &quot;,request.price,&quot;   result.ask = &quot;,
                  result.ask,&quot; result.bid = &quot;,result.bid);
            break;
           }
         //--- pre√ßo inv√°lido
         case 10015:
           {
            Print(&quot;TRADE_RETCODE_INVALID_PRICE&quot;);
            Print(&quot;request.price = &quot;,request.price,&quot;   result.ask = &quot;,
                  result.ask,&quot; result.bid = &quot;,result.bid);
            break;
           }
         //--- SL e/ou TP inv√°lidos
         case 10016:
           {
            Print(&quot;TRADE_RETCODE_INVALID_STOPS&quot;);
            Print(&quot;request.sl = &quot;,request.sl,&quot; request.tp = &quot;,request.tp);
            Print(&quot;result.ask = &quot;,result.ask,&quot; result.bid = &quot;,result.bid);
            break;
           }
         //--- volume inv√°lido
         case 10014:
           {
            Print(&quot;TRADE_RETCODE_INVALID_VOLUME&quot;);
            Print(&quot;request.volume = &quot;,request.volume,&quot;   result.volume = &quot;,
                  result.volume);
            break;
           }
         //--- sem dinheiro suficiente para uma opera√ß√£o de negocia√ß√£o
         case 10019:
           {
            Print(&quot;TRADE_RETCODE_NO_MONEY&quot;);
            Print(&quot;request.volume = &quot;,request.volume,&quot;   result.volume = &quot;,
                  result.volume,&quot;   result.comment = &quot;,result.comment);
            break;
           }
         //--- alguma outra raz√£o, sa√≠da com o c√≥digo de resposta do servidor
         default:
           {
            Print(&quot;Outra resposta = &quot;,answer);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
997
</p>
<pre><code class="language-mql5">
           }
        }
      //--- notifica sobre o resultado sem sucesso da solicita√ß√£o de negocia√ß√£o retorn
      return(false);
     }
//--- OrderSend() retorna true - repete a resposta
   return(true);
</code></pre>
<p>
  }</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
998
<h3>Estrutura</h3>
de 
um 
<h3>Transa√ß√£o</h3>
de 
<h3>Negocia√ß√£o</h3>
(MqlTradeTransaction)
Ao realizar algumas a√ß√µes espec√≠ficas em uma conta de negocia√ß√£o, seu estado muda. Tais a√ß√µes
includem:
¬∑ Envio de uma solicita√ß√£o de negocia√ß√£o a partir de algum aplicativo MQL5 no terminal usando as
fun√ß√µes OrderSend e OrderSendAsync e sua posterior execu√ß√£o.
¬∑ Envio de uma solicita√ß√£o de negocia√ß√£o por meio da interface gr√°fica do terminal e sua posterior
execu√ß√£o.
¬∑ Ativa√ß√£o de ordens pendentes e ordens de stop no servidor.
¬∑ Realiza√ß√£o de opera√ß√µes no lado de um servidor de negocia√ß√£o.
As seguintes transa√ß√µes de negocia√ß√£o s√£o realizadas como resultado destas a√ß√µes:
¬∑ tratamento de uma solicita√ß√£o de negocia√ß√£o
¬∑ mudan√ßa de ordens de abertura
¬∑ mudan√ßa de hist√≥rico de ordens
¬∑ mudan√ßa de hist√≥rico de opera√ß√µes (deals)
¬∑ mudan√ßa de posi√ß√µes
Por exemplo, ao enviar uma ordem de mercado para compra, ele √© processado, para a conta cria-se a
respetiva ordem para compra, a ordem √© executada, exclu√≠da da lista de ordens abertas, adicionada ao
hist√≥rico de ordens, a seguir, a transa√ß√£o respetiva √© adicionada ao hist√≥rico e, finalmente, √© criada uma
nova posi√ß√£o. Todas estas a√ß√µes s√£o transa√ß√µes financeiras.
Para obter transa√ß√µes financeiras, aplicadas √† conta, a MQL5 disp√µe de um processador especial chamado
de OnTradeTransaction (). Ao primeiro par√¢metro deste processador √© transferida a estrutura
MqlTradeTransaction, que descreve a transa√ß√£o financeira.
</p>
<pre><code class="language-mql5">
struct MqlTradeTransaction
  {
   ulong                         deal;             // Bilhetagem da opera√ß√£o (deal)
   ulong                         order;            // Bilhetagem da ordem
   string                        symbol;           // Nome do ativo da negocia√ß√£o
   ENUM_TRADE_TRANSACTION_TYPE   type;             // Tipo de transa√ß√£o da negocia√ß√£o
   ENUM_ORDER_TYPE               order_type;       // Tipo de ordem
   ENUM_ORDER_STATE              order_state;      // Estado da ordem
   ENUM_DEAL_TYPE                deal_type;        // Tipo de opera√ß√£o (deal)
   ENUM_ORDER_TYPE_TIME          time_type;        // Tipo de ordem por per√≠odo de a√ß√£
   datetime                      time_expiration;  // Hora de expira√ß√£o da ordem
   double                        price;            // Pre√ßo
   double                        price_trigger;    // Pre√ßo de ativa√ß√£o de ordem tipo 
   double                        price_sl;         // N√≠vel de Stop Loss
   double                        price_tp;         // N√≠vel de Take Profit
   double                        volume;           // Volume em lotes
   ulong                         position;         // Position ticket
   ulong                         position_by;      // Ticket of an opposite position
</code></pre>
<p>
  };</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
999
<h3>Descri√ß√£o dos Campos</h3>
<h3>Campo</h3>
<h3>Descri√ß√£o</h3>
deal
Bilhetagem (ticket) da opera√ß√£o.
order
Bilhetagem (ticket) da ordem.
symbol
O nome do ativo da negocia√ß√£o, para o qual a transa√ß√£o √© realizada.
type
Tipo de transa√ß√£o de negocia√ß√£o. O valor pode ser um dos valores da
enumera√ß√£o ENUM_TRADE_TRANSACTION_TYPE.
order_type
Tipo de ordem de negocia√ß√£o. O valor pode ser um dos valores da enumera√ß√£o
ENUM_ORDER_TYPE.
order_state
Estado da ordem de negocia√ß√£o. O valor pode ser um dos valores da
enumera√ß√£o ENUM_ORDER_STATE.
deal_type
Tipo de opera√ß√£o. O valor pode ser um dos valores da enumera√ß√£o
ENUM_DEAL_TYPE.
time_type
Tipo de ordem quanto a expira√ß√£o. O valor pode ser um dos valores da
enumera√ß√£o ENUM_ORDER_TYPE_TIME.
time_expiration
Per√≠odo de expira√ß√£o de uma ordem pendente (para ordens dos tipos
ORDER_TIME_SPECIFIED e ORDER_TIME_SPECIFIED_DAY).
price
Pre√ßo. Dependendo do tipo de transa√ß√£o de negocia√ß√£o, ele pode ser um pre√ßo
de uma ordem, de uma opera√ß√£o (deal), ou de uma posi√ß√£o.
price_trigger
<h3>Pre√ßo</h3>
stop 
(de 
ativa√ß√£o) 
de 
uma 
ordem 
<h3>Stop</h3>
<h3>Limit</h3>
(ORDER_TYPE_BUY_STOP_LIMIT e ORDER_TYPE_SELL_STOP_LIMIT).
price_sl
Pre√ßo Stop Loss. Dependendo do tipo de transa√ß√£o de negocia√ß√£o, ele pode
estar relacionado a uma ordem, a uma opera√ß√£o (deal) ou a uma posi√ß√£o.
price_tp
Pre√ßo Take Profit. Dependendo do tipo de transa√ß√£o de negocia√ß√£o, ele pode
estar relacionado a uma ordem, a uma opera√ß√£o (deal) ou a uma posi√ß√£o.
volume
Volume em lotes. Dependendo do tipo de transa√ß√£o de negocia√ß√£o, ele pode
indicar o valor corrente de uma ordem, de uma opera√ß√£o (deal), ou de uma
posi√ß√£o.
position
Bilhete da posi√ß√£o que foi afetado pela transa√ß√£o.
position_by
Bilhete da posi√ß√£o oposta. Utiliza-se ao fechar uma posi√ß√£o usando outra
oposta, se estiver aberta no mesmo instrumento, mas na dire√ß√£o oposta.
O par√¢metro essencial para an√°lise de uma transa√ß√£o recebida √© o seu tipo, especificado no campo
type. Por exemplo, se uma transa√ß√£o √© do tipo TRADE_TRANSACTION_REQUEST (um resultado de
operar uma negocia√ß√£o requisitada pelo servidor foi recebido), a estrutura possui apenas um campo
√∫nico que √© completamente preenchido - type. Outros campos n√£o s√£o analisados. Neste caso, n√≥s
podemos analisar dois par√¢metros adicionais, request e result, submetidos ao handler
OnTradeTransaction(), como mostrado abaixo.</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1000
Tendo dados sobre um tipo de opera√ß√£o de negocia√ß√£o, voc√™ pode decidir sobre a an√°lise do estado
corrente de ordens, posi√ß√µes e opera√ß√µes (deals) em um conta de negocia√ß√£o. Lembre-se que uma
solicita√ß√£o de negocia√ß√£o enviada ao servidor a partir do terminal pode gerar v√°rias novas transa√ß√µes.
A prioridade de chegada delas no terminal n√£o √© garantida.
A estrutura MqlTradeTransaction √© preenchida de diferentes maneiras dependendo do tipo de
transa√ß√£o de negocia√ß√£o (ENUM_TRADE_TRANSACTION_TYPE):
<h3>TRADE_TRANSACTION_ORDER_* e TRADE_TRANSACTION_HISTORY_*</h3>
Os seguintes campos na estrutura MqlTradeTransaction s√£o preenchidos para transa√ß√µes de
negocia√ß√£o relacionados a manipula√ß√£o de abertura de ordens (TRADE_TRANSACTION_ORDER_ADD,
TRADE_TRANSACTION_ORDER_UPDATE e TRADE_TRANSACTION_ORDER_DELETE) e hist√≥rico de
ordens 
(TRADE_TRANSACTION_HISTORY_ADD, 
<h3>TRADE_TRANSACTION_HISTORY_UPDATE,</h3>
<h3>TRADE_TRANSACTION_HISTORY_DELETE):</h3>
¬∑ order - bilhetagem da ordem;
¬∑ symbol - nome do ativo da ordem;
¬∑ type - tipo de transa√ß√£o de negocia√ß√£o;
¬∑ order_type - tipo de ordem;
¬∑ orders_state - estado corrente da ordem;
¬∑ time_type - tipo de expira√ß√£o da ordem;
¬∑ time_expiration - hora de expira√ß√£o da ordem (para ordens tendo tipos de expira√ß√£o
<h3>ORDER_TIME_SPECIFIED e ORDER_TIME_SPECIFIED_DAY);</h3>
¬∑ price - pre√ßo da ordem especificado por um cliente;
¬∑ price_trigger - pre√ßo de stop de ordem stop limit (somente para ORDER_TYPE_BUY_STOP_LIMIT e
<h3>ORDER_TYPE_SELL_STOP_LIMIT);</h3>
¬∑ price_sl - Pre√ßo de ordem Stop Loss (preenchido, se especificado na ordem);
¬∑ price_tp - Pre√ßo de ordem Take Profit (preenchido, se especificado na ordem);
¬∑ volume - volume corrente da ordem (n√£o preenchida). Volume inicial da ordem pode ser encontra
no hist√≥rico de ordens usando a fun√ß√£o HistoryOrders*.
¬∑ position - bilhete da posi√ß√£o, aberta, fechada ou modificada como resultado da execu√ß√£o da ordem.
<h3>A</h3>
preenchido 
apenas 
para 
ordens 
de 
mercado. 
<h3>N√£o</h3>
√© 
preenchido 
para
TRADE_TRANSACTION_ORDER_ADD.
¬∑ position_by - bilhete da posi√ß√£o oposta. Preenche-se apenas para ordens de fechamento da posi√ß√£o
oposta (close by).
<h3>TRADE_TRANSACTION_DEAL_*</h3>
Os seguintes campos na estrutura MqlTradeTransaction s√£o preenchidos para transa√ß√µes de
negocia√ß√£o 
relacionados 
a 
manipula√ß√£o 
de 
opera√ß√µes 
(TRADE_TRANSACTION_DEAL_ADD,
TRADE_TRANSACTION_DEAL_UPDATE e TRADE_TRANSACTION_DEAL_DELETE):
¬∑ deal - bilhetagem da opera√ß√£o (deal);
¬∑ order - bilhetagem da ordem, baseado na qual uma opera√ß√£o (deal) foi realizada;
¬∑ symbol - nome de ativo da opera√ß√£o (deal);
¬∑ type - tipo de transa√ß√£o de negocia√ß√£o;
¬∑ deal_type - tipo de opera√ß√£o (deal);
¬∑ price - pre√ßo de opera√ß√£o (deal);
¬∑ price_sl - pre√ßo de Stop Loss (preenchido, se especificado na ordem, baseado na qual uma
opera√ß√£o foi realizada);</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1001
¬∑ price_tp - pre√ßo de Take Profit (preenchido, se especificado na ordem, baseado na qual uma
opera√ß√£o foi realizada);
¬∑ volume - volume de opera√ß√£o em lotes.
¬∑ position - bilhete da posi√ß√£o, aberta, fechada ou modificada como resultado da execu√ß√£o da
transa√ß√£o.
¬∑ position_by - bilhete da posi√ß√£o oposta. Preenche-se apenas para transa√ß√µes de fechamento da
posi√ß√£o oposta (out by).
<h3>TRADE_TRANSACTION_POSITION</h3>
Os seguintes campos na estrutura MqlTradeTransaction s√£o preenchidos para transa√ß√µes de
negocia√ß√£o relacionado a mudan√ßa de posi√ß√µes n√£o conectados com execu√ß√£o de opera√ß√µes (deals)
(TRADE_TRANSACTION_POSITION):
¬∑ symbol - nome de ativo da posi√ß√£o;
¬∑ type - tipo de transa√ß√£o de negocia√ß√£o;
¬∑ deal_type - tipo de posi√ß√£o (DEAL_TYPE_BUY ou DEAL_TYPE_SELL);
¬∑ price - pre√ßo m√©dio ponderado de abertura de posi√ß√£o;
¬∑ price_sl - pre√ßo de Stop Loss;
¬∑ price_tp - pre√ßo de Take Profit;
¬∑ volume - volume de posi√ß√£o em lotes, se ele foi alterado.
¬∑ position - bilhete de posi√ß√£o.
Altera√ß√£o de Posi√ß√£o (adi√ß√£o, altera√ß√£o, encerramento), como resultado de uma execu√ß√£o de
opera√ß√£o (deal), n√£o leva a ocorr√™ncia de transa√ß√£o de TRADE_TRANSACTION_POSITION.
<h3>TRADE_TRANSACTION_REQUEST</h3>
Somente um campo na estrutura MqlTradeTransaction √© preenchido para transa√ß√µes de negocia√ß√£o
descrevendo o fato de que uma solicita√ß√£o de negocia√ß√£o foi processada por um servidor e que o
resultado do processamento foi recebido (TRADE_TRANSACTION_REQUEST):
¬∑ type - tipo de transa√ß√£o de negocia√ß√£o;
Somente o campo type (tipo de transa√ß√£o de negocia√ß√£o) de ser analisado para tais transa√ß√µes.
O segundo e terceiro par√¢metros (request e result) da fun√ß√£o OnTradeTransaction deve ser
analisado para dados adicionais.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
input int MagicNumber=1234567;
//--- habilita a classe de negocia√ß√£o CTrade e declara a vari√°vel desta classe
#include &lt;Trade\Trade.mqh&gt;
</code></pre>
<p>
<h3>CTrade trade;</h3>
</p>
<pre><code class="language-mql5">
//--- flags para instala√ß√£o e exclus√£o de ordens pendentes
bool pending_done=false;
bool pending_deleted=false;
//--- bilhetagem da ordem pendente ser√° armazenada aqui
</code></pre>
<p>
ulong order_ticket;
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do Expert¬†                               |
//+------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1002
</p>
<pre><code class="language-mql5">
int OnInit()
  {
//--- define o MagicNumber para marcar todas as nossas ordens
   trade.SetExpertMagicNumber(MagicNumber);
//--- solicita√ß√µes de negocia√ß√£o ser√£o enviadas em modo ass√≠ncrono usando a fun√ß√£o Ord
   trade.SetAsyncMode(true);
//--- inicializa a vari√°vel em zero
   order_ticket=0;
//---
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o tick (ponto) de um Expert                                 |
//+------------------------------------------------------------------+
void OnTick()
  {
//---instalando uma ordem pendente
   if(!pending_done)
     {
      double ask=SymbolInfoDouble(_Symbol,SYMBOL_ASK);
      double buy_stop_price=NormalizeDouble(ask+1000*_Point,(int)SymbolInfoInteger(_Sy
      bool res=trade.BuyStop(0.1,buy_stop_price,_Symbol);
      //--- caso a fun√ß√£o BuyStop() executou com sucesso
      if(res)
        {
         pending_done=true;
         //--- obt√©m um resultado da solicita√ß√£o enviando para CTrade
         MqlTradeResult trade_result;
         trade.Result(trade_result);
         //--- obt√©m o request_id para a solicita√ß√µes enviada
         uint request_id=trade_result.request_id;
         Print(&quot;Pedido foi enviado para definir uma ordem pendente. Request_ID=&quot;,reque
         //--- armazena a bilhetagem da ordem (ser√° zero se usar o modo ass√≠ncrono de 
         order_ticket=trade_result.order;
         //--- tudo est√° feito, sa√≠ cedo do handler OnTick()
         return;
        }
     }
//--- exclui a ordem pendente
   if(!pending_deleted)
      //--- verifica√ß√£o adicional
      if(pending_done &amp;&amp; (order_ticket!=0))
        {
         //--- tenda excluir a ordem pendente
         bool res=trade.OrderDelete(order_ticket);
         Print(&quot;OrderDelete=&quot;,res);
         //--- quando solicita√ß√£o de exclus√£o √© enviada com sucesso
         if(res)
           {</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1003
</p>
<pre><code class="language-mql5">
            pending_deleted=true;
            //--- obt√©m o resultado da execu√ß√£o da solicita√ß√£o
            MqlTradeResult trade_result;
            trade.Result(trade_result);
            //--- peque o ID da solicita√ß√£o proveniente do resultado
            uint request_id=trade_result.request_id;
            //--- exibe no Di√°rio
            Print(&quot;O pedido foi enviado para eliminar uma ordem pendente #&quot;,order_tick
                  &quot;. Request_ID=&quot;,request_id,
                  &quot;\r\n&quot;);
            //--- fixa a bilhetagem da ordem proveniente do resultado da solicita√ß√£o
            order_ticket=trade_result.order;
           }
        }
//---        
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o TradeTransaction¬†                                         |
//+------------------------------------------------------------------+
void OnTradeTransaction(const MqlTradeTransaction &amp;trans,
                        const MqlTradeRequest &amp;request,
                        const MqlTradeResult &amp;result)
  {
//--- obt√©m o tipo de transa√ß√£o como valor de enumera√ß√£o
   ENUM_TRADE_TRANSACTION_TYPE type=(ENUM_TRADE_TRANSACTION_TYPE)trans.type;
//--- se a transa√ß√£o √© a solicita√ß√£o de manipula√ß√£o do resultado, somente seu nome √© e
   if(type==TRADE_TRANSACTION_REQUEST)
     {
      Print(EnumToString(type));
      //--- exibe o a string do nome da solicita√ß√£o manipulada
      Print(&quot;------------RequestDescription\r\n&quot;,RequestDescription(request));
      //--- exibe a descri√ß√£o do resultado da solicita√ß√£o
      Print(&quot;------------ResultDescription\r\n&quot;,TradeResultDescription(result));
      //--- armazena a bilhetagem da ordem para sua exclus√£o na pr√≥xima manipula√ß√£o em
      if(result.order!=0)
        {
         //--- exclui esta ordem atrav√©s de sua bilhetagem na pr√≥xima chamada de OnTic
         order_ticket=result.order;
         Print(&quot; Bilhetagem da ordem pendente &quot;,order_ticket,&quot;\r\n&quot;);
        }
     }
   else // exibe a descri√ß√£o completa para transa√ß√µes de um outro tipo
//--- exibe a descri√ßa√µ da transa√ß√£o recebida no Di√°rio
      Print(&quot;------------TransactionDescription\r\n&quot;,TransactionDescription(trans));
//---     
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Retorna a descri√ß√£o textual da transa√ß√£o¬†                        |</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1004
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
string TransactionDescription(const MqlTradeTransaction &amp;trans)
  {
//--- 
   string desc=EnumToString(trans.type)+&quot;\r\n&quot;;
   desc+=&quot;Ativo: &quot;+trans.symbol+&quot;\r\n&quot;;
   desc+=&quot;Bilhetagem (ticket) da opera√ß√£o: &quot;+(string)trans.deal+&quot;\r\n&quot;;
   desc+=&quot;Tipo de opera√ß√£o: &quot;+EnumToString(trans.deal_type)+&quot;\r\n&quot;;
   desc+=&quot;Bilhetagem (ticket) da ordem: &quot;+(string)trans.order+&quot;\r\n&quot;;
   desc+=&quot;Tipo de ordem: &quot;+EnumToString(trans.order_type)+&quot;\r\n&quot;;
   desc+=&quot;Estado da ordem: &quot;+EnumToString(trans.order_state)+&quot;\r\n&quot;;
   desc+=&quot;Ordem do tipo time: &quot;+EnumToString(trans.time_type)+&quot;\r\n&quot;;
   desc+=&quot;Expira√ß√£o da ordem: &quot;+TimeToString(trans.time_expiration)+&quot;\r\n&quot;;
   desc+=&quot;Pre√ßo: &quot;+StringFormat(&quot;%G&quot;,trans.price)+&quot;\r\n&quot;;
   desc+=&quot;Gatilho do pre√ßo: &quot;+StringFormat(&quot;%G&quot;,trans.price_trigger)+&quot;\r\n&quot;;
   desc+=&quot;Stop Loss: &quot;+StringFormat(&quot;%G&quot;,trans.price_sl)+&quot;\r\n&quot;;
   desc+=&quot;Take Profit: &quot;+StringFormat(&quot;%G&quot;,trans.price_tp)+&quot;\r\n&quot;;
   desc+=&quot;Volume: &quot;+StringFormat(&quot;%G&quot;,trans.volume)+&quot;\r\n&quot;;
//--- retorna a string obtida
   return desc;
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Retorna a descri√ß√£o textual da solicita√ß√£o de negocia√ß√£o¬†        |
//+------------------------------------------------------------------+
string RequestDescription(const MqlTradeRequest &amp;request)
  {
//---
   string desc=EnumToString(request.action)+&quot;\r\n&quot;;
   desc+=&quot;Ativo: &quot;+request.symbol+&quot;\r\n&quot;;
   desc+=&quot;N√∫mero m√°gico: &quot;+StringFormat(&quot;%d&quot;,request.magic)+&quot;\r\n&quot;;
   desc+=&quot;Bilhetagem (ticket) da ordem: &quot;+(string)request.order+&quot;\r\n&quot;;
   desc+=&quot;Tipo de ordem: &quot;+EnumToString(request.type)+&quot;\r\n&quot;;
   desc+=&quot;Preenchimento da ordem: &quot;+EnumToString(request.type_filling)+&quot;\r\n&quot;;
   desc+=&quot;Ordem do tipo time: &quot;+EnumToString(request.type_time)+&quot;\r\n&quot;;
   desc+=&quot;Expira√ß√£o da ordem: &quot;+TimeToString(request.expiration)+&quot;\r\n&quot;;
   desc+=&quot;Pre√ßo: &quot;+StringFormat(&quot;%G&quot;,request.price)+&quot;\r\n&quot;;
   desc+=&quot;Pontos de desvio: &quot;+StringFormat(&quot;%G&quot;,request.deviation)+&quot;\r\n&quot;;
   desc+=&quot;Stop Loss: &quot;+StringFormat(&quot;%G&quot;,request.sl)+&quot;\r\n&quot;;
   desc+=&quot;Take Profit: &quot;+StringFormat(&quot;%G&quot;,request.tp)+&quot;\r\n&quot;;
   desc+=&quot;Stop Limit: &quot;+StringFormat(&quot;%G&quot;,request.stoplimit)+&quot;\r\n&quot;;
   desc+=&quot;Volume: &quot;+StringFormat(&quot;%G&quot;,request.volume)+&quot;\r\n&quot;;
   desc+=&quot;Coment√°rio: &quot;+request.comment+&quot;\r\n&quot;;
//--- retorna a string obtida
   return desc;
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Retorna a desc. textual do resultado da manipula√ß√£o da solic.¬†   |
//+------------------------------------------------------------------+
string TradeResultDescription(const MqlTradeResult &amp;result)</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1005
</p>
<pre><code class="language-mql5">
  {
//---
   string desc=&quot;Retcode &quot;+(string)result.retcode+&quot;\r\n&quot;;
   desc+=&quot;ID da solicita√ß√£o: &quot;+StringFormat(&quot;%d&quot;,result.request_id)+&quot;\r\n&quot;;
   desc+=&quot;Bilhetagem (ticket) da ordem: &quot;+(string)result.order+&quot;\r\n&quot;;
   desc+=&quot;Bilhetagem (ticket) da opera√ß√£o: &quot;+(string)result.deal+&quot;\r\n&quot;;
   desc+=&quot;Volume: &quot;+StringFormat(&quot;%G&quot;,result.volume)+&quot;\r\n&quot;;
   desc+=&quot;Pre√ßo: &quot;+StringFormat(&quot;%G&quot;,result.price)+&quot;\r\n&quot;;
   desc+=&quot;Compra: &quot;+StringFormat(&quot;%G&quot;,result.ask)+&quot;\r\n&quot;;
   desc+=&quot;Venda: &quot;+StringFormat(&quot;%G&quot;,result.bid)+&quot;\r\n&quot;;
   desc+=&quot;Coment√°rio: &quot;+result.comment+&quot;\r\n&quot;;
//--- retorna a string obtida
   return desc;
</code></pre>
<p>
  }
<h3>Tamb√©m Veja</h3>
<h3>Tipos de Transa√ß√£o de Negocia√ß√£o, OnTradeTransaction()</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1006
A Estrutura para Retornar Pre√ßos Correntes (MqlTick)
Esta √© uma estrutura para armazenar os √∫ltimos pre√ßos do ativo. Ela √© projetada para recupera√ß√£o
r√°pida da maioria das informa√ß√µes solicitadas sobre pre√ßos correntes.
</p>
<pre><code class="language-mql5">
struct MqlTick
  {
   datetime     time;          // Hora da √∫ltima atualiza√ß√£o de pre√ßos
   double       bid;           // Pre√ßo corrente de venda
   double       ask;           // Pre√ßo corrente de compra
   double       last;          // Pre√ßo da √∫ltima opera√ß√£o (pre√ßo √∫ltimo)
   ulong        volume;        // Volume para o pre√ßo √∫ltimo corrente
   long         time_msc;      // Tempo do &quot;Last&quot; pre√ßo atualizado em  milissegundos
   uint         flags;         // Flags de tick 
   double       volume_real;   // Volume para o pre√ßo Last atual com maior precis√£o
</code></pre>
<p>
  };
A vari√°vel do tipo MqlTick permite obter valores de Pre√ßo de Compra, Pre√ßo de Venda, Pre√ßo √öltimo e
Volume com uma √∫nica chamada da fun√ß√£o SymbolInfoTick().
Os par√¢metros de cada tick s√£o preenchidos independentemente se existem altera√ß√µes comparadas
com o tick anterior. Assim, √© poss√≠vel descobrir o pre√ßo correto para qualquer momento no passado,
sem a necessidade de procurar os valores anteriores do hist√≥rico do tick. Por exemplo, mesmo que
apenas altere o pre√ßo Bid durante a chegada do tick, a estrutura ainda cont√©m outros par√¢metros,
bem como incluindo o pre√ßo Ask anterior, volume, etc.
Voc√™ pode analisar as flags dos ticks para descobrir quais dados foram alterados exatamente:
¬∑ TICK_FLAG_BID ‚Äì tick alterou o pre√ßo Bid 
¬∑ TICK_FLAG_ASK  ‚Äì tick alterou o pre√ßo Ask
¬∑ TICK_FLAG_LAST ‚Äì tick alterou o √∫ltimo pre√ßo da oferta
¬∑ TICK_FLAG_VOLUME ‚Äì tick alterou o volume
¬∑ TICK_FLAG_BUY ‚Äì tick √© resultado de uma compra
¬∑ TICK_FLAG_SELL ‚Äì tick √© resultado de uma venda
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
void OnTick()
  {
   MqlTick last_tick;
//---
   if(SymbolInfoTick(Symbol(),last_tick))
     {
      Print(last_tick.time,&quot;: Bid = &quot;,last_tick.bid,
            &quot; Ask = &quot;,last_tick.ask,&quot;  Volume = &quot;,last_tick.volume);
     }
   else Print(&quot;SymbolInfoTick() falhou, erro = &quot;,GetLastError());
//---
</code></pre>
<p>
  }
<h3>Tamb√©m Veja</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1007
<h3>Estruturas e Classes,  CopyTicks(), SymbolInfoTick()</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1008
Esta se√ß√£o descreve as estruturas para trabalhar com o Calend√°rio econ√¥mico que est√° dispon√≠vel
diretamente na plataforma MetaTrader. O calend√°rio econ√¥mico √© uma enciclop√©dia pronta com
descri√ß√£o, data de lan√ßamento e grau de import√¢ncia de indicadores macroecon√¥micos. Os valores
reais dos indicadores macroecon√¥micos entram na plataforma MetaTrader imediatamente no momento
da publica√ß√£o e s√£o exibidos no gr√°fico como tags, permitindo monitorar visualmente os indicadores
necess√°rios por pa√≠ses, por moedas e por import√¢ncia. 
As fun√ß√µes do calend√°rio econ√¥mico permitem analisar automaticamente os eventos recebidos de
acordo com crit√©rios de import√¢ncia individuais - pa√≠ses/pares de moedas.
As descri√ß√µes do pa√≠s s√£o especificadas pela estrutura MqlCalendarCountry. S√£o usadas as fun√ß√µes
<h3>CalendarCountryById() e CalendarCountries()</h3>
</p>
<pre><code class="language-mql5">
struct MqlCalendarCountry
  {
   ulong                               id;                    // identificador de pa√≠s
   string                              name;                  // nome do pa√≠s (na codi
   string                              code;                  // nome de c√≥digo do pa√≠
   string                              currency;              // c√≥digo da moeda do pa
   string                              currency_symbol;       // s√≠mbolo da moeda do p
   string                              url_name;              // nome do pa√≠s usado no
</code></pre>
<p>
  };
As descri√ß√µes dos eventos s√£o especificadas pela estrutura MqlCalendarEvent. √â usado nas fun√ß√µes
CalendarEventById(), CalendarEventByCountry() e CalendarEventByCurrency()
</p>
<pre><code class="language-mql5">
struct MqlCalendarEvent
  {
   ulong                               id;                    // identificador de even
   ENUM_CALENDAR_EVENT_TYPE            type;                  // tipo de evento da enu
   ENUM_CALENDAR_EVENT_SECTOR          sector;                // setor ao qual est√° re
   ENUM_CALENDAR_EVENT_FREQUENCY       frequency;             // frequ√™ncia do evento
   ENUM_CALENDAR_EVENT_TIMEMODE        time_mode;             // modo de hora do event
   ulong                               country_id;            // identificador do pa√≠s
   ENUM_CALENDAR_EVENT_UNIT            unit;                  // unidade de medida da 
   ENUM_CALENDAR_EVENT_IMPORTANCE      importance;            // import√¢ncia do evento
   ENUM_CALENDAR_EVENT_MULTIPLIER      multiplier;            // multiplicador da leit
   uint                                digits;                // n√∫mero de casas decim
   string                              source_url;            // URL da fonte em que √©
   string                              event_code;            // c√≥digo do evento
   string                              name;                  // nome do evento na lin
</code></pre>
<p>
  };
Os valores do evento s√£o definidos pela estrutura MqlCalendarValue. √â usado nas fun√ß√µes
<h3>CalendarValueById(),</h3>
<h3>CalendarValueHistoryByEvent(),</h3>
<h3>CalendarValueHistory(),</h3>
<h3>CalendarValueLastByEvent() e CalendarValueLast()</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1009
</p>
<pre><code class="language-mql5">
struct MqlCalendarValue
  {
   ulong                               id;                    // ID do valor
   ulong                               event_id;              // ID do evento
   datetime                            time;                  // hora e data do evento
   datetime                            period;                // per√≠odo de relat√≥rio 
   int                                 revision;              // revis√£o do indicador 
   long                                actual_value;          // valor real em ppm ou 
   long                                prev_value;            // valor anterior em ppm
   long                                revised_prev_value;    // valor anterior revisa
   long                                forecast_value;        // valor previsto em ppm
   ENUM_CALENDAR_EVENT_IMPACT          impact_type;           // impacto potencial na 
¬† //--- fun√ß√µes para verificar valores
   bool                         HasActualValue(void) const;   // retorna true se no ca
   bool                         HasPreviousValue(void) const; // retorna true se no ca
   bool                         HasRevisedValue(void) const;  // retorna true se no ca
   bool                         HasForecastValue(void) const; // retorna true se no ca
¬† //--- fun√ß√µes para obter valores
   double                       GetActualValue(void) const;   // retorna actual_value 
   double                       GetPreviousValue(void) const; // retorna prev_value ou
   double                       GetRevisedValue(void) const;  // retorna revised_prev_
   double                       GetForecastValue(void) const; // retorna forecast_valu
</code></pre>
<p>
  };
A estrutura MqlCalendarValue disponibiliza m√©todo para obter e verificar valores a partir dos campos
actual_value, forecast_value, prev_value e revised_prev_value. Se o valor do campo n√£o estiver
definido, ele armazenar√° o valor LONG_MIN (-9223372036854775808). 
Deve-se ter em mente que os valores nestes campos s√£o armazenados multiplicados por um fator de
um milh√£o. Isso significa que quando as fun√ß√µes CalendarValueById, CalendarValueHistoryByEvent,
<h3>CalendarValueHistory,</h3>
<h3>CalendarValueLastByEvent</h3>
e 
<h3>CalendarValueLast</h3>
recebem 
valores 
em
MqlCalendarValue, √© necess√°rio verificar se os valores LONG_MIN desses campos s√£o iguais; e se no
campo estiver definido o valor, para obter o valor deve-se dividir o valor do campo por 1000 000 (um
milh√£o). Outra maneira de obter valores √© verificar e obter valores por fun√ß√µes da pr√≥pria estrutura
MqlCalendarValue.
Exemplo de processamento de eventos de calend√°rio:
</p>
<pre><code class="language-mql5">
//--- criamos nossa pr√≥pria estrutura para armazenar eventos de calend√°rio com valores
struct AdjustedCalendarValue
  {
   ulong                               id;                    // ID do valor
   ulong                               event_id;              // ID do evento
   datetime                            time;                  // hora e data do evento
   datetime                            period;                // per√≠odo de relat√≥rio 
   int                                 revision;              // revis√£o do indicador 
   double                              actual_value;          // valor atual do indica
   double                              prev_value;            // valor anterior do ind
   double                              revised_prev_value;    // valor anterior revisa</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1010
</p>
<pre><code class="language-mql5">
   double                              forecast_value;        // valor previsto do ind
   ENUM_CALENDAR_EVENT_IMPACT          impact_type;           // impacto potencial na 
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Script program start function                                    |
//+------------------------------------------------------------------+
void OnStart()
  {
//---
//--- c√≥digo do pa√≠s para a Uni√£o Europeia de acordo com o padr√£o ISO 3166-1 Alpha-2
   string EU_code=&quot;EU&quot;;
//--- obtemos todos os valores dos eventos para a Uni√£o Europeia
   MqlCalendarValue values[];
//--- definimos os limites do intervalo do qual tomamos os eventos
   datetime date_from=D&#x27;01.01.2021&#x27;;  // tomamos todos os eventos de 2021
   datetime date_to=0;                // 0 representa todos os eventos conhecidos, mes
//--- solicitamos o hist√≥rico do evento para a Uni√£o Europeia desde 2021
   if(!CalendarValueHistory(values, date_from, date_to, EU_code))
     {
      PrintFormat(&quot;Erro! Falha ao obter eventos por pa√≠s country_code=%s&quot;, EU_code);
      PrintFormat(&quot;C√≥digo de erro: %d&quot;, GetLastError());
      return;
     }
   else
      PrintFormat(&quot;Recebidos valores de eventos para o pa√≠s country_code=%s: %d&quot;,
                  EU_code, ArraySize(values));
//--- reduzimos o tamanho da matriz para exibi√ß√£o no Di√°rio
   if(ArraySize(values)&gt;5)
      ArrayResize(values, 5);
//--- exibimos os valores dos eventos no Di√°rio tal qual como est√£o, sem verifica√ß√µes 
   Print(&quot;Exibimos os valores do calend√°rio tal qual como est√£o&quot;);
   ArrayPrint(values);
//--- verificamos os valores dos campos e os atualizamos para os valores atuais
//--- primeira op√ß√£o para verificar e obter valores
   AdjustedCalendarValue values_adjusted_1[];
   int total=ArraySize(values);
   ArrayResize(values_adjusted_1, total);
//--- copiarmos os valores verificados e corrigidos
   for(int i=0; i&lt;total; i++)
     {
      values_adjusted_1[i].id=values[i].id;
      values_adjusted_1[i].event_id=values[i].event_id;
      values_adjusted_1[i].time=values[i].time;
      values_adjusted_1[i].period=values[i].period;
      values_adjusted_1[i].revision=values[i].revision;
      values_adjusted_1[i].impact_type=values[i].impact_type;
      //--- efetuamos a verifica√ß√£o de valores e dividimos por 1000 000
      if(values[i].actual_value==LONG_MIN)</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1011
</p>
<pre><code class="language-mql5">
         values_adjusted_1[i].actual_value=double(&quot;nan&quot;);
      else
         values_adjusted_1[i].actual_value=values[i].actual_value/1000000.;
      if(values[i].prev_value==LONG_MIN)
         values_adjusted_1[i].prev_value=double(&quot;nan&quot;);
      else
         values_adjusted_1[i].prev_value=values[i].prev_value/1000000.;
      if(values[i].revised_prev_value==LONG_MIN)
         values_adjusted_1[i].revised_prev_value=double(&quot;nan&quot;);
      else
         values_adjusted_1[i].revised_prev_value=values[i].revised_prev_value/1000000.
      if(values[i].forecast_value==LONG_MIN)
         values_adjusted_1[i].forecast_value=double(&quot;nan&quot;);
      else
         values_adjusted_1[i].forecast_value=values[i].forecast_value/1000000.;
     }
   Print(&quot;Primeira maneira de verificar e obter valores do calend√°rio&quot;);
   ArrayPrint(values_adjusted_1);
//--- segunda op√ß√£o para verificar e obter valores
   AdjustedCalendarValue values_adjusted_2[];
   ArrayResize(values_adjusted_2, total);
//--- copiarmos os valores verificados e corrigidos
   for(int i=0; i&lt;total; i++)
     {
      values_adjusted_2[i].id=values[i].id;
      values_adjusted_2[i].event_id=values[i].event_id;
      values_adjusted_2[i].time=values[i].time;
      values_adjusted_2[i].period=values[i].period;
      values_adjusted_2[i].revision=values[i].revision;
      values_adjusted_2[i].impact_type=values[i].impact_type;
      //--- efetuamos as verifica√ß√µes e obtemos valores
      if(values[i].HasActualValue())
         values_adjusted_2[i].actual_value=values[i].GetActualValue();
      else
         values_adjusted_2[i].actual_value=double(&quot;nan&quot;);
      if(values[i].HasPreviousValue())
         values_adjusted_2[i].prev_value=values[i].GetPreviousValue();
      else
         values_adjusted_2[i].prev_value=double(&quot;nan&quot;);
      if(values[i].HasRevisedValue())
         values_adjusted_2[i].revised_prev_value=values[i].GetRevisedValue();
      else
         values_adjusted_2[i].revised_prev_value=double(&quot;nan&quot;);</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1012
</p>
<pre><code class="language-mql5">
      if(values[i].HasForecastValue())
         values_adjusted_2[i].forecast_value=values[i].GetForecastValue();
      else
         values_adjusted_2[i].forecast_value=double(&quot;nan&quot;);
     }
   Print(&quot;Segunda maneira de verificar e obter valores do calend√°rio&quot;);
   ArrayPrint(values_adjusted_2);
//--- terceira op√ß√£o para verificar e obter valores
   AdjustedCalendarValue values_adjusted_3[];
   ArrayResize(values_adjusted_3, total);
//--- copiarmos os valores verificados e corrigidos
   for(int i=0; i&lt;total; i++)
     {
      values_adjusted_3[i].id=values[i].id;
      values_adjusted_3[i].event_id=values[i].event_id;
      values_adjusted_3[i].time=values[i].time;
      values_adjusted_3[i].period=values[i].period;
      values_adjusted_3[i].revision=values[i].revision;
      values_adjusted_3[i].impact_type=values[i].impact_type;
      //--- obtemos valores sem verifica√ß√µes
      values_adjusted_3[i].actual_value=values[i].GetActualValue();
      values_adjusted_3[i].prev_value=values[i].GetPreviousValue();
      values_adjusted_3[i].revised_prev_value=values[i].GetRevisedValue();
      values_adjusted_3[i].forecast_value=values[i].GetForecastValue();
     }
   Print(&quot;Terceira maneira de obter valores do calend√°rio, sem verifica√ß√µes&quot;);
   ArrayPrint(values_adjusted_3);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
/*
   Recebidos os valores de eventos segundo country_code=EU: 1051
</code></pre>
<p>
¬† Exibimos os valores do calend√°rio tal qual como est√£o
</p>
<pre><code class="language-mql5">
         [id] [event_id]              [time]            [period] [revision]       [act
   [0] 144520  999500001 2021.01.04 12:00:00 2020.12.01 00:00:00          3           
   [1] 144338  999520001 2021.01.04 23:30:00 2020.12.29 00:00:00          0           
   [2] 147462  999010020 2021.01.04 23:45:00 1970.01.01 00:00:00          0 -922337203
   [3] 111618  999010018 2021.01.05 12:00:00 2020.11.01 00:00:00          0           
   [4] 111619  999010019 2021.01.05 12:00:00 2020.11.01 00:00:00          0           
</code></pre>
<p>
¬† Primeira maneira de verificar e obter valores de calend√°rio
</p>
<pre><code class="language-mql5">
         [id] [event_id]              [time]            [period] [revision] [actual_va
   [0] 144520  999500001 2021.01.04 12:00:00 2020.12.01 00:00:00          3       55.2
   [1] 144338  999520001 2021.01.04 23:30:00 2020.12.29 00:00:00          0      143.1
   [2] 147462  999010020 2021.01.04 23:45:00 1970.01.01 00:00:00          0           
   [3] 111618  999010018 2021.01.05 12:00:00 2020.11.01 00:00:00          0       11.0
   [4] 111619  999010019 2021.01.05 12:00:00 2020.11.01 00:00:00          0        3.1
</code></pre>
<p>
¬† Segunda maneira de verificar e obter valores do calend√°rio
</p>
<pre><code class="language-mql5">
         [id] [event_id]              [time]            [period] [revision] [actual_va
   [0] 144520  999500001 2021.01.04 12:00:00 2020.12.01 00:00:00          3       55.2</p>
<p></code></pre>
<p>
<h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1013
</p>
<pre><code class="language-mql5">
   [1] 144338  999520001 2021.01.04 23:30:00 2020.12.29 00:00:00          0      143.1
   [2] 147462  999010020 2021.01.04 23:45:00 1970.01.01 00:00:00          0           
   [3] 111618  999010018 2021.01.05 12:00:00 2020.11.01 00:00:00          0       11.0
   [4] 111619  999010019 2021.01.05 12:00:00 2020.11.01 00:00:00          0        3.1
</code></pre>
<p>
¬† Terceira maneira de obter valores do calend√°rio, sem verifica√ß√µes
</p>
<pre><code class="language-mql5">
         [id] [event_id]              [time]            [period] [revision] [actual_va
   [0] 144520  999500001 2021.01.04 12:00:00 2020.12.01 00:00:00          3       55.2
   [1] 144338  999520001 2021.01.04 23:30:00 2020.12.29 00:00:00          0      143.1
   [2] 147462  999010020 2021.01.04 23:45:00 1970.01.01 00:00:00          0           
   [3] 111618  999010018 2021.01.05 12:00:00 2020.11.01 00:00:00          0       11.0
   [4] 111619  999010019 2021.01.05 12:00:00 2020.11.01 00:00:00          0        3.1
</code></pre>
<p>
*/
A frequ√™ncia do evento √© indicada na estrutura MqlCalendarEvent. Poss√≠veis valores s√£o listados 
<h3>ENUM_CALENDAR_EVENT_FREQUENCY</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>CALENDAR_FREQUENCY_NONE</h3>
<h3>Frequ√™ncia de publica√ß√£o n√£o definida</h3>
<h3>CALENDAR_FREQUENCY_WEEK</h3>
<h3>Publica√ß√£o uma vez por semana</h3>
<h3>CALENDAR_FREQUENCY_MONTH</h3>
<h3>Publica√ß√£o uma vez por m√™s</h3>
<h3>CALENDAR_FREQUENCY_QUARTER</h3>
<h3>Publica√ß√£o uma vez por trimestre</h3>
<h3>CALENDAR_FREQUENCY_YEAR</h3>
<h3>Publica√ß√£o uma vez por ano</h3>
<h3>CALENDAR_FREQUENCY_DAY</h3>
<h3>Publica√ß√£o uma vez por dia</h3>
O tipo de evento √© indicado na estrutura MqlCalendarEvent. Poss√≠veis valores s√£o listados 
<h3>ENUM_CALENDAR_EVENT_TYPE</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>CALENDAR_TYPE_EVENT</h3>
Evento (reuni√£o, discurso e assim por diante)
<h3>CALENDAR_TYPE_INDICATOR</h3>
<h3>Indicador</h3>
<h3>CALENDAR_TYPE_HOLIDAY</h3>
<h3>Feriado</h3>
O setor econ√¥mico do evento √© indicado na estrutura MqlCalendarEvent. Poss√≠veis valores s√£o listados 
<h3>ENUM_CALENDAR_EVENT_SECTOR</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>CALENDAR_SECTOR_NONE</h3>
<h3>Setor n√£o definido</h3>
<h3>CALENDAR_SECTOR_MARKET</h3>
<h3>Mercado, bolsa</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1014
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>CALENDAR_SECTOR_GDP</h3>
<h3>Produto Interno Bruto (PIB)</h3>
<h3>CALENDAR_SECTOR_JOBS</h3>
<h3>Mercado laboral</h3>
<h3>CALENDAR_SECTOR_PRICES</h3>
<h3>Pre√ßos</h3>
<h3>CALENDAR_SECTOR_MONEY</h3>
<h3>Dinheiro</h3>
<h3>CALENDAR_SECTOR_TRADE</h3>
<h3>Com√©rcio</h3>
<h3>CALENDAR_SECTOR_GOVERNMENT</h3>
<h3>Governo</h3>
<h3>CALENDAR_SECTOR_BUSINESS</h3>
<h3>Neg√≥cio</h3>
<h3>CALENDAR_SECTOR_CONSUMER</h3>
<h3>Consumo</h3>
<h3>CALENDAR_SECTOR_HOUSING</h3>
<h3>Alojamento</h3>
<h3>CALENDAR_SECTOR_TAXES</h3>
<h3>Impostos</h3>
<h3>CALENDAR_SECTOR_HOLIDAYS</h3>
<h3>Feriados</h3>
A import√¢ncia do evento √© indicada na estrutura MqlCalendarEvent. Poss√≠veis valores s√£o listados 
<h3>ENUM_CALENDAR_EVENT_IMPORTANCE</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>CALENDAR_IMPORTANCE_NONE</h3>
<h3>N√≠vel de import√¢ncia n√£o definido</h3>
<h3>CALENDAR_IMPORTANCE_LOW</h3>
<h3>Baixa import√¢ncia</h3>
<h3>CALENDAR_IMPORTANCE_MODERATE</h3>
<h3>Import√¢ncia m√©dia</h3>
<h3>CALENDAR_IMPORTANCE_HIGH</h3>
<h3>Alta import√¢ncia</h3>
O tipo de unidade das leituras do evento √© indicado na estrutura MqlCalendarEvent. Poss√≠veis valores
s√£o listados ENUM_CALENDAR_EVENT_UNIT
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>CALENDAR_UNIT_NONE</h3>
<h3>Unidade n√£o definida</h3>
<h3>CALENDAR_UNIT_PERCENT</h3>
<h3>Juros</h3>
<h3>CALENDAR_UNIT_CURRENCY</h3>
<h3>Moeda nacional</h3>
<h3>CALENDAR_UNIT_HOUR</h3>
<h3>Horas</h3>
<h3>CALENDAR_UNIT_JOB</h3>
<h3>N√∫mero de empregos</h3>
<h3>CALENDAR_UNIT_RIG</h3>
<h3>Equipamentos de perfura√ß√£o</h3>
<h3>CALENDAR_UNIT_USD</h3>
<h3>D√≥lares estadunidenses</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1015
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>CALENDAR_UNIT_PEOPLE</h3>
<h3>N√∫mero de pessoas</h3>
<h3>CALENDAR_UNIT_MORTGAGE</h3>
<h3>N√∫mero de empr√©stimos hipotec√°rios</h3>
<h3>CALENDAR_UNIT_VOTE</h3>
<h3>N√∫mero de votos</h3>
<h3>CALENDAR_UNIT_BARREL</h3>
<h3>N√∫mero de barris</h3>
<h3>CALENDAR_UNIT_CUBICFEET</h3>
<h3>Volume em p√©s c√∫bicos</h3>
<h3>CALENDAR_UNIT_POSITION</h3>
<h3>Posi√ß√µes l√≠quidas de especuladores</h3>
<h3>CALENDAR_UNIT_BUILDING</h3>
<h3>N√∫mero de edif√≠cios</h3>
Em alguns casos, os valores de um indicador econ√¥mico exigem a indica√ß√£o de um multiplicador que √©
indicado na estrutura MqlCalendarEvent. Poss√≠veis valores de multiplicadores s√£o listados 
<h3>ENUM_CALENDAR_EVENT_MULTIPLIER</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>CALENDAR_MULTIPLIER_NONE</h3>
<h3>Multiplicador n√£o definido</h3>
<h3>CALENDAR_MULTIPLIER_THOUSANDS</h3>
<h3>Milhares</h3>
<h3>CALENDAR_MULTIPLIER_MILLIONS</h3>
<h3>Milh√µes</h3>
<h3>CALENDAR_MULTIPLIER_BILLIONS</h3>
<h3>Bilh√µes</h3>
<h3>CALENDAR_MULTIPLIER_TRILLIONS</h3>
<h3>Trilh√µes</h3>
O impacto potencial do evento na taxa de c√¢mbio nacional √© indicado na estrutura MqlCalendarValue.
<h3>Poss√≠veis valores s√£o listados ENUM_CALENDAR_EVENT_IMPACT</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>CALENDAR_IMPACT_NA</h3>
<h3>Impacto n√£o especificado</h3>
<h3>CALENDAR_IMPACT_POSITIVE</h3>
<h3>Impacto positivo</h3>
<h3>CALENDAR_IMPACT_NEGATIVE</h3>
<h3>Impacto negativo</h3>
A hora do evento √© indicada na estrutura MqlCalendarEvent. Poss√≠veis valores s√£o listados 
<h3>ENUM_CALENDAR_EVENT_TIMEMODE</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>CALENDAR_TIMEMODE_DATETIME</h3>
A fonte publica a hora exata do evento
<h3>CALENDAR_TIMEMODE_DATE</h3>
<h3>Evento leva o dia todo</h3>
<h3>CALENDAR_TIMEMODE_NOTIME</h3>
A fonte n√£o publica a hora do evento</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1016
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>CALENDAR_TIMEMODE_TENTATIVE</h3>
A fonte n√£o publica previamente a hora exata
do evento, apenas seu 
dia. 
<h3>A</h3>
hora 
√©
especificada quando o evento ocorre.
<h3>Veja tamb√©m</h3>
<h3>Calend√°rio econ√¥mico</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1017
<h3>C√≥digos de Erros e Avisos</h3>
<h3>Esta se√ß√£o cont√©m as seguintes descri√ß√µes:</h3>
¬∑ C√≥digos de retorno do servidor de negocia√ß√£o ‚Äì analisando resultados da solicita√ß√£o de negocia√ß√£o
enviada pela fun√ß√£o OrderSend();
¬∑ Avisos do compilador ‚Äì c√≥digos de mensagens de aviso que aparecem na compila√ß√£o (n√£o erros);
¬∑ Erros de compila√ß√£o ‚Äì c√≥digos de mensagens de erro em uma tentativa sem sucesso de compilar;
¬∑ Erros em tempo de execu√ß√£o ‚Äì c√≥digos de erro na execu√ß√£o de programas-mql5, que podem ser
obtidos usando a fun√ß√£o GetLastErtror().</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1018
C√≥digos de Retorno do Servidor de Negocia√ß√£o
Todas as solicita√ß√µes para executar opera√ß√µes de negocia√ß√£o s√£o enviadas como uma estrutura de
uma solicita√ß√£o de negocia√ß√£oMqlTradeRequestusando a fun√ß√£oOrderSend(). O resultado da execu√ß√£o
da fun√ß√£o √© colocado na estrutura MqlTradeResult, cujo campo retcode cont√©m o c√≥digo de retorno do
servidor de negocia√ß√£o. 
<h3>C√≥digo</h3>
<h3>Constante</h3>
<h3>Descri√ß√£o</h3>
10004
<h3>TRADE_RETCODE_REQUOTE</h3>
<h3>Nova Cota√ß√£o</h3>
10006
<h3>TRADE_RETCODE_REJECT</h3>
<h3>Solicita√ß√£o rejeitada</h3>
10007
<h3>TRADE_RETCODE_CANCEL</h3>
<h3>Solicita√ß√£o cancelada pelo negociador</h3>
10008
<h3>TRADE_RETCODE_PLACED</h3>
<h3>Ordem colocada</h3>
10009
<h3>TRADE_RETCODE_DONE</h3>
<h3>Solicita√ß√£o conclu√≠da</h3>
10010
<h3>TRADE_RETCODE_DONE_PARTIAL</h3>
<h3>Somente</h3>
parte 
da 
solicita√ß√£o 
foi
conclu√≠da
10011
<h3>TRADE_RETCODE_ERROR</h3>
<h3>Erro de processamento de solicita√ß√£o</h3>
10012
<h3>TRADE_RETCODE_TIMEOUT</h3>
<h3>Solicita√ß√£o cancelada por expira√ß√£o de</h3>
tempo (timeout)
10013
<h3>TRADE_RETCODE_INVALID</h3>
<h3>Solicita√ß√£o inv√°lida</h3>
10014
<h3>TRADE_RETCODE_INVALID_VOLUME</h3>
<h3>Volume inv√°lido na solicita√ß√£o</h3>
10015
<h3>TRADE_RETCODE_INVALID_PRICE</h3>
<h3>Pre√ßo inv√°lido na solicita√ß√£o</h3>
10016
<h3>TRADE_RETCODE_INVALID_STOPS</h3>
<h3>Stops inv√°lidos na solicita√ß√£o</h3>
10017
<h3>TRADE_RETCODE_TRADE_DISABLED</h3>
<h3>Negocia√ß√£o est√° desabilitada</h3>
10018
<h3>TRADE_RETCODE_MARKET_CLOSED</h3>
<h3>Mercado est√° fechado</h3>
10019
<h3>TRADE_RETCODE_NO_MONEY</h3>
<h3>N√£o existe dinheiro suficiente para</h3>
completar a solicita√ß√£o
10020
<h3>TRADE_RETCODE_PRICE_CHANGED</h3>
<h3>Os pre√ßos se alteraram</h3>
10021
<h3>TRADE_RETCODE_PRICE_OFF</h3>
<h3>N√£o existem cota√ß√µes para processar a</h3>
solicita√ß√£o
10022
<h3>TRADE_RETCODE_INVALID_EXPIRATION</h3>
Data de expira√ß√£o da ordem inv√°lida na
solicita√ß√£o
10023
<h3>TRADE_RETCODE_ORDER_CHANGED</h3>
<h3>Estado da ordem alterada</h3>
10024
<h3>TRADE_RETCODE_TOO_MANY_REQUESTS</h3>
<h3>Solicita√ß√µes com freq√º√™ncia em excesso</h3>
10025
<h3>TRADE_RETCODE_NO_CHANGES</h3>
<h3>Sem altera√ß√µes na solicita√ß√£o</h3>
10026
<h3>TRADE_RETCODE_SERVER_DISABLES_AT</h3>
<h3>Autotrading desabilitado pelo servidor</h3>
10027
<h3>TRADE_RETCODE_CLIENT_DISABLES_AT</h3>
<h3>Autotrading desabilitado pelo terminal</h3>
cliente</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1019
<h3>C√≥digo</h3>
<h3>Constante</h3>
<h3>Descri√ß√£o</h3>
10028
<h3>TRADE_RETCODE_LOCKED</h3>
<h3>Solicita√ß√£o</h3>
bloqueada 
para
processamento
10029
<h3>TRADE_RETCODE_FROZEN</h3>
<h3>Ordem ou posi√ß√£o congeladas</h3>
10030
<h3>TRADE_RETCODE_INVALID_FILL</h3>
<h3>Tipo de preenchimento de ordem inv√°lido</h3>
10031
<h3>TRADE_RETCODE_CONNECTION</h3>
<h3>Sem</h3>
conex√£o 
com 
o 
servidor 
de
negocia√ß√£o
10032
<h3>TRADE_RETCODE_ONLY_REAL</h3>
<h3>Opera√ß√£o √© permitida somente para</h3>
contas reais
10033
<h3>TRADE_RETCODE_LIMIT_ORDERS</h3>
O n√∫mero de ordens pendentes atingiu o
limite
10034
<h3>TRADE_RETCODE_LIMIT_VOLUME</h3>
O volume de ordens e posi√ß√µes para o
ativo atingiu o limite
10035
<h3>TRADE_RETCODE_INVALID_ORDER</h3>
<h3>Incorreto ou proibida tipo de ordem</h3>
10036
<h3>TRADE_RETCODE_POSITION_CLOSED</h3>
<h3>Posi√ß√£o</h3>
com 
a 
especifica√ß√£o
<h3>POSITION_IDENTIFIER j√° foi fechado</h3>
10038
<h3>TRADE_RETCODE_INVALID_CLOSE_VOLUME</h3>
O volume que se pode fechar excede o
volume da posi√ß√£o atual
10039
<h3>TRADE_RETCODE_CLOSE_ORDER_EXIST</h3>
Para a posi√ß√£o indicada j√° existe uma
ordem de fechamento. Pode aoontecer no
trabalho no sistema de cobertura:
¬∑ ao tentar fechar a posi√ß√£o oposta, se
j√° existir uma ordem para fechamento
desta posi√ß√£o
¬∑ ao 
tentar 
fechar 
completa 
ou
parcialmente, se o volume total de
ordens existentes para fechamento e o
volume total da ordem re-colocada
excede o volume da posi√ß√£o atual
10040
<h3>TRADE_RETCODE_LIMIT_POSITIONS</h3>
O n√∫mero de posi√ß√µes abertas, que pode
estar simultaneamente na conta, pode
ser limitado pelas defini√ß√µes do servidor.
Quando √© atingido o limite, em resposta
√† coloca√ß√£o de uma ordem, o servidor
retorna 
o 
erro
TRADE_RETCODE_LIMIT_POSITIONS. 
<h3>A</h3>
restri√ß√£o opera de 
forma 
diferente
dependendo do tipo de c√°lculo para as
posi√ß√µes da conta:
¬∑ Sistema de compensa√ß√£o ‚Äî considera o
n√∫mero de posi√ß√µes abertas. Ao atingir
o limite, a plataforma n√£o permite
colocar novas ordens, cuja execu√ß√£o</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1020
<h3>C√≥digo</h3>
<h3>Constante</h3>
<h3>Descri√ß√£o</h3>
pode aumentar o n√∫mero de posi√ß√µes
abertas. Na verdade, a plataforma ir√°
colocar ordens apenas para os s√≠mbolos
que j√° t√™m posi√ß√µes abertas. No
sistema de compensa√ß√£o, durante a
verifica√ß√£o do limite, n√£o s√£o levadas
em conta as ordens pendentes atuais,
uma vez que sua execu√ß√£o pode
conduzir a uma altera√ß√£o nas posi√ß√µes
atuais, em vez de um aumento do seu
n√∫mero.
¬∑ Sistema de cobertura ‚Äî al√©m das
posi√ß√µes abertas, s√£o consideradas as
ordens pendentes colocadas, uma vez
que sua execu√ß√£o sempre conduz √†
apertura de uma nova posi√ß√£o. Ao
atingir o limite, a plataforma n√£o
permite 
colocar 
tanto 
ordens 
de
mercado para abrir posi√ß√µes quanto
ordens pendentes.
10041
<h3>TRADE_RETCODE_REJECT_CANCEL</h3>
O pedido de ativa√ß√£o da ordem pendente
foi rejeitado, e a ordem cancelada
10042
<h3>TRADE_RETCODE_LONG_ONLY</h3>
<h3>O pedido foi rejeitado, porque, no</h3>
s√≠mbolo, foi definida a regra &quot;Somente
s√£o 
permitidas 
posi√ß√µes
longas&quot;  (POSITION_TYPE_BUY)
10043
<h3>TRADE_RETCODE_SHORT_ONLY</h3>
<h3>O pedido foi rejeitado, porque, no</h3>
s√≠mbolo, foi definida a regra &quot;Somente
s√£o 
permitidas 
posi√ß√µes
curtas&quot; (POSITION_TYPE_SELL)
10044
<h3>TRADE_RETCODE_CLOSE_ONLY</h3>
<h3>O pedido foi rejeitado, porque, no</h3>
s√≠mbolo, foi definida a regra &quot;S√≥ √©
permitido o fechamento de posi√ß√£o&quot;
10045
<h3>TRADE_RETCODE_FIFO_CLOSE</h3>
<h3>O pedido foi rejeitado, porque, no</h3>
s√≠mbolo, foi definida a regra &quot;S√≥ √©
permitido o fechamento da posi√ß√£o
existente 
segundo 
o 
princ√≠pio
<h3>FIFO&quot; (ACCOUNT_FIFO_CLOSE=true)</h3>
10046
<h3>TRADE_RETCODE_HEDGE_PROHIBITED</h3>
<h3>O pedido foi rejeitado, porque, no</h3>
s√≠mbolo, foi definida a regra &quot;Proibido
abrir posi√ß√µes opostas segundo um
mesmo s√≠mbolo&quot;. Por exemplo, se a
conta tiver uma posi√ß√£o Buy, o usu√°rio
n√£o poder√° abrir uma posi√ß√£o Sell ou
colocar uma ordem de venda pendente. A
regra s√≥ pode ser aplicada em contas com</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1021
<h3>C√≥digo</h3>
<h3>Constante</h3>
<h3>Descri√ß√£o</h3>
sistema 
de 
cobertura
(ACCOUNT_MARGIN_MODE=ACCOUNT_MA
RGIN_MODE_RETAIL_HEDGING).</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1022
<h3>Avisos do Compilador</h3>
Os avisos do compilador s√£o exibidos com prop√≥sitos informativos somente e n√£o s√£o mensagens de
erro.
<h3>C√≥digo</h3>
<h3>Descri√ß√£o</h3>
21
Registro incompleto de uma data na string datetime.
22
N√∫mero errado na string datetime para a data. Requerimentos:
<h3>Ano 1970 &lt;= X &lt;= 3000</h3>
<h3>M√™s 0 &lt;X &lt;= 12</h3>
¬† Dia 0 &lt;X &lt;= 31/30/28 (29 )....
23
N√∫mero errado na string datetime para hora. Requerimentos:
<h3>Hora    0 &lt;= X &lt;24</h3>
<h3>Minuto 0 &lt;= X &lt;60</h3>
24
Cor inv√°lida no formato RGB: um dos componentes RGB √© menor que 0 ou maior
que 255
25
Caractere desconhecido das seq√º√™ncias de escape.
¬† Conhecido: \n \r \t \\ \&quot; \&#x27; \X \x
26
Volume grande demais de vari√°veis locais (&gt; 512Kb) da fun√ß√£o, reduza o n√∫mero
29
Enumera√ß√£o j√° definida (duplica√ß√£o) - membros ser√£o adicionados √† primeira
defini√ß√£o
30
<h3>Sobreposi√ß√£o (overriding) de macro</h3>
31
A vari√°vel est√° declarada mas n√£o √© usada em nenhum lugar
32
<h3>Construtor deve ser do tipo void</h3>
33
<h3>Destrutor deve ser do tipo void</h3>
34
Constante n√£o se encaixa na faixa de inteiros (X &gt; _UI64_MAX || X &lt; _I64_MIN) e
ser√° convertido para o tipo double
35
HEX longo demais - mais que 16 caracteres significativos (grupos de 4 bits de
posi√ß√µes mais elevadas s√£o cortados)
36
Sem grupos de 4 bits na string HEX &quot;0x&quot;
37
Sem fun√ß√£o - nada a ser executado
38
<h3>Uma vari√°vel n√£o inicializada sendo usada</h3>
41
Fun√ß√£o n√£o tem corpo, e n√£o √© chamada
43
Poss√≠vel perda de dados na convers√£o Exemplo: int x = (double) z;
44
Perda de precis√£o (de dados) durante convers√£o de uma constante. Exemplo: int x =
<h3>M_PI</h3>
45
Diferen√ßa entre os sinais de operandos em opera√ß√µes de compara√ß√£o. Exemplo:
(char) c1&gt; (uchar) c2</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1023
<h3>C√≥digo</h3>
<h3>Descri√ß√£o</h3>
46
Problemas com importa√ß√£o de fun√ß√£o - declara√ß√£o de #import √© requerida ou o
import de fun√ß√µes est√° fechado
47
Descri√ß√£o grande demais - caracteres extras n√£o ser√£o inclu√≠dos no arquivo
execut√°vel
48
O n√∫mero de buffers de indicador declarados √© menor que o requerido
49
Sem cor para plotar um s√©rie gr√°fica no indicador
50
Sem s√©rie gr√°fica para desenhar o indicador
51
Fun√ß√£o Handler &#x27;OnStart&#x27; n√£o encontrado no script
52
Fun√ß√£o handler &#x27;OnStart&#x27; est√° definido com par√¢metros errados
53
Fun√ß√£o &#x27;OnStart&#x27; pode ser definida somente em um script
54
Fun√ß√£o &#x27;OnInit&#x27; est√° definida com par√¢metros errados
55
Fun√ß√£o &#x27;OnInit&#x27; n√£o √© usada em scripts
56
Fun√ß√£o &#x27;OnDeinit&#x27; est√° definida com par√¢metros errados
57
Fun√ß√£o &#x27;OnDeinit&#x27; n√£o √© usada em scripts
58
Duas fun√ß√µes &#x27;OnCalculate&#x27; est√£o definidas. OnCalculate() com um array de
pre√ßoser√° usada
59
Sobre-preenchimento detectado ao calcular uma constante inteira complexa
60
Provavelmente, a vari√°vel n√£o est√° inicializada.
61
Este declara√ß√£o torna imposs√≠vel de referenciar a vari√°vel local declarada na linha
especificada
62
Esta declara√ß√£o torna imposs√≠vel de referenciar a vari√°vel global declarada na linha
especificada
63
N√£o pode ser usada para array alocado estaticamente
64
Esta declara√ß√£o de vari√°vel oculta vari√°vel predefinida
65
O valor da express√£o √© sempre true/false
66
Usar um vari√°vel ou express√£o de tipo bool em opera√ß√µes matem√°ticas n√£o √©
seguro
67
O resultado da aplica√ß√£o de operador menos un√°rio para um tipo sem sinal ulong √©
indefinido
68
A vers√£o especificada na propriedade #property version n√£o √© aceit√°vel para a
se√ß√£o Market;o formato correto de #property version √© &quot;XXX.YYY&quot;
69
<h3>Declara√ß√£o controlada vazia encontrada</h3>
70
Tipo de retorno de fun√ß√£o inv√°lido ou par√¢metros incorretos durante declara√ß√£o da
fun√ß√£o de manipula√ß√£o de evento</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1024
<h3>C√≥digo</h3>
<h3>Descri√ß√£o</h3>
71
Uma impl√≠cita convers√£o de estruturas para um tipo √© requerida
72
Esta declara√ß√£o torna direto acesso ao membro de uma classe declarada na string
especificada imposs√≠vel. Acesso somente ser√° poss√≠vel com o operador de resolu√ß√£o
de escopo ::
73
A constante bin√°ria √© muito grande, os d√≠gitos de alta ordem ser√£o truncados
74
O par√¢metro no m√©todo da classe heran√ßa tem um diferente modificador const, a
fun√ß√£o derivada tem sobrecarregado a fun√ß√£o geradora
75
Negativo ou deslocamento com valor muito grande em deslocamento de opera√ß√£o
bit a bit, resultado da execu√ß√£o √© indefinido
76
<h3>Fun√ß√£o deve retornar um valor</h3>
77
fun√ß√£o void retorna um valor
78
Nem todos os caminhos de controle retornam um valor
79
Express√µes n√£o s√£o permitidas em uma escala global
80
Verifica a preced√™ncia do operador para um poss√≠vel erro; usa par√™nteses para
esclarecer a preced√™ncia
81
Foi definido duas OnCalCulate(). Ser√° utilizado o modo OHLC
82
Struct sem membros, atribu√≠do o tamanho de 1 byte
83
Valor de retorno da fun√ß√£o deve ser verificado
84
Recursos do indicador √© compilado para depura√ß√£o. Isso retarda o desempenho. Por
favor, recompile o indicador para aumentar o desempenho
85
C√≥digo de caracteres muito grande na linha, deve estar na faixa de 0 a 65535
86
<h3>Caractere n√£o reconhecido na linha</h3>
87
Nenhuma propriedade da janela do indicador (definindo a exibi√ß√£o na janela
principal 
ou 
na 
sub-janela) 
foi 
definida. 
<h3>Propriedade</h3>
</p>
<pre><code class="language-mql5">
#property
</code></pre>
<p>
indicator_chart_window foi aplicada</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1025
<h3>Erros de Compila√ß√£o</h3>
O MetaEditor 5 exibe mensagens de erro sobre os erros de programa detectados pelo compilador
interno durante a compila√ß√£o. A lista destes erros est√£o na tabela dada abaixo. Para compilar um
c√≥digo-fonte em um c√≥digo execut√°vel, pressione F7. Programas que cont√™m erros n√£o podem ser
compilados at√© que os erros identificados pelo compilador sejam eliminados.
<h3>C√≥digo</h3>
<h3>Descri√ß√£o</h3>
100
<h3>Erro de leitura de arquivo</h3>
101
Erro de abertura de arquivo *. EX5 para escrever nele para grava√ß√£o
103
Sem mem√≥ria livre suficiente para completar compila√ß√£o
104
Unidade sint√°tica vazia n√£o reconhecida pelo compilador
105
<h3>Nome de arquivo incorreto em #include</h3>
106
Erro acessando um arquivo em #include (provavelmente o arquivo n√£o existe)
108
<h3>Nome inapropriado para #define</h3>
109
Comando desconhecido de preprocessador (v√°lidos #include, #define, #property,
#import)
110
<h3>Ativo desconhecido para compilador</h3>
111
Fun√ß√£o n√£o implementada (descri√ß√£o est√° presente, mas sem corpo)
112
<h3>Dupla aspas (&quot;) omitida</h3>
113
Chave angular de abertura (&lt;) ou aspas duplas (&quot;) omitida
114
<h3>Aspas simples (&#x27;) omitida</h3>
115
<h3>Chave angular de fechamento &quot;&gt;&quot; omitida</h3>
116
<h3>Tipo n√£o especificado na declara√ß√£o</h3>
117
Sem operador return ou return n√£o encontrado em todas as ramifica√ß√µes da
implementa√ß√£o
118
Colchete de abertura de par√¢metros de chamada era esperada
119
<h3>Erro escrevendo EX5</h3>
120
<h3>Acesso inv√°lido a um array</h3>
121
A fun√ß√£o n√£o √© do tipo void e o operador return deve retornar um valor
122
<h3>Declara√ß√£o incorreta do destrutor</h3>
123
<h3>Dois pontos &quot;:&quot; est√° faltando</h3>
124
<h3>Vari√°vel j√° esta declarada</h3>
125
<h3>Vari√°vel com tal identificador j√° declarado</h3>
126
Nome de vari√°vel √© longo demais (&gt; 250 caracteres)</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1026
<h3>C√≥digo</h3>
<h3>Descri√ß√£o</h3>
127
<h3>Estrutura com tal identificador j√° definida</h3>
128
<h3>Estrutura n√£o est√° definida</h3>
129
Membro de estrutura com o mesmo nome j√° definido
130
<h3>Sem tal membro de estrutura</h3>
131
<h3>Emparelhamento de chaves violado</h3>
132
<h3>Par√™nteses de abertura &quot;(&quot; esperada</h3>
133
<h3>Chaves desbalanceadas (sem &quot;}&quot;)</h3>
134
Dificuldade para compilar (ramifica√ß√µes demais, n√≠veis de empilhamento interno
s√£o sobre-preenchidos
135
Erro de abertura de arquivo para leitura
136
Sem mem√≥ria suficiente para baixar o arquivo fonte em mem√≥ria
137
<h3>Vari√°vel √© esperada</h3>
138
<h3>Refer√™ncia n√£o pode ser inicializada</h3>
140
<h3>Atribui√ß√£o esperada (aparece na declara√ß√£o)</h3>
141
<h3>Chave de abertura &quot;{&quot; esperada</h3>
142
Par√¢metro pode ser um array din√¢mico somente
143
Uso de tipo &quot;void&quot; n√£o √© aceit√°vel
144
Sem par correspondente para &quot;)&quot; ou &quot;]&quot;, isto √©, &quot;(&quot; ou &quot;[&quot; est√° ausente
145
Sem par correspondente para &quot;(&quot; ou &quot;[&quot;, isto √©, &quot;)&quot; ou &quot;]&quot; est√° ausente
146
<h3>Tamanho de array incorreto</h3>
147
<h3>Excesso de par√¢metros (&gt; 64)</h3>
149
Este s√≠mbolo (token) n√£o √© esperado aqui
150
<h3>Uso inv√°lido de opera√ß√£o (operandos inv√°lidos)</h3>
151
Express√£o de tipo void n√£o √© permitido
152
<h3>Operador √© esperado</h3>
153
<h3>Uso incorreto do break</h3>
154
<h3>Ponto e v√≠rgula &quot;;&quot; esperado</h3>
155
<h3>V√≠rgula &quot;,&quot; esperada</h3>
156
Deve ser um tipo classe, n√£o estrutura
157
<h3>Express√£o √© esperada</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1027
<h3>C√≥digo</h3>
<h3>Descri√ß√£o</h3>
158
&quot;n√£o caractere HEX&quot; encontrado em HEX ou n√∫mero longo demais (n√∫mero de
d√≠gitos &gt; 511)
159
<h3>Constante-string tem mais que 65534 caracteres</h3>
160
Defini√ß√£o de fun√ß√£o n√£o √© aceit√°vel aqui
161
<h3>T√©rmino de programa inesperado</h3>
162
<h3>Declara√ß√£o adiantada √© proibida para estruturas</h3>
163
Fun√ß√£o com este nome j√° est√° definida e tem um outro tipo de retorno
164
Fun√ß√£o com este nome j√° est√° definida e tem um conjunto diferente de par√¢metros
165
Fun√ß√£o com este nome j√° est√° definida e implementada
166
Sobrecarga de fun√ß√£o para esta chamada n√£o foi encontrada
167
Fun√ß√£o com um valor de retorno de tipo void n√£o pode retornar um valor
168
<h3>Fun√ß√£o n√£o est√° definida</h3>
170
<h3>Valor √© esperado</h3>
171
Em express√£o case somente constantes inteiras s√£o v√°lidas
172
O valor de case neste switch j√° √© usado
173
<h3>Inteiro √© esperado</h3>
174
Em express√£o #import, nome de arquivo √© esperado
175
Express√µes n√£o s√£o permitidas em n√≠vel global
176
<h3>Par√™nteses &quot;)&quot; omitido antes de &quot;;&quot;</h3>
177
Uma vari√°vel √† esquerda do sinal de igualdade √© esperada
178
O resultado de express√£o n√£o √© usado
179
Declara√ß√£o de vari√°veis n√£o √© permitida em case
180
Convers√£o impl√≠cita de uma string para um n√∫mero
181
Convers√£o impl√≠cita de um n√∫mero para uma string
182
Chamada amb√≠gua de uma fun√ß√£o sobrecarregada (v√°rias sobrecargas se
enquadram)
183
else ilegal sem apropriado if
184
Inv√°lido case ou default sem um switch
185
<h3>Uso inapropriado de retic√™ncia</h3>
186
A seq√º√™ncia de inicializa√ß√£o tem mais elementos que a vari√°vel inicializada
187
<h3>Uma constante paracaseesperada</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1028
<h3>C√≥digo</h3>
<h3>Descri√ß√£o</h3>
188
<h3>Uma express√£o constante requerida</h3>
189
Uma vari√°vel constante n√£o pode ser alterada
190
Colchete de fechamento ou uma v√≠rgula √© esperado (declarando membro de array)
191
<h3>Identificador de enumera√ß√£o j√° definido</h3>
192
Enumera√ß√£o n√£o pode ter modificadores de acesso (const, extern, static)
193
Membro de enumera√ß√£o j√° declarado com um valor diferente
194
Existe uma vari√°vel definida com o mesmo nome
195
Existe uma estrutura definida com o mesmo nome
196
<h3>Nome de membro de enumera√ß√£o esperado</h3>
197
<h3>Express√£o de inteiro esperado</h3>
198
<h3>Divis√£o por zero em express√£o constante</h3>
199
<h3>N√∫mero errado de par√¢metros na fun√ß√£o</h3>
200
Par√¢metro por refer√™ncia deve ser uma vari√°vel
201
Vari√°vel de mesmo tipo para passar por refer√™ncia esperada
202
Uma vari√°vel constante n√£o pode ser passada por uma refer√™ncia n√£o constante
203
<h3>Requer uma constante inteira positiva</h3>
204
Falha em acessar membro protegido de classe
205
Import j√° definido de uma outra forma
208
<h3>Arquivo execut√°vel n√£o criado</h3>
209
Ponto de entrada &#x27;OnCalculate&#x27; n√£o encontrado para o indicador
210
O operador continue pode ser usado somente dentro de um loop
211
Erro acessando membro privado (fechado) de classe
213
M√©todo de estrutura ou classe n√£o est√° declarado
214
Erro acessando m√©todo privado (fechado) de classe
216
C√≥pia de estruturas com objetos n√£o √© permitida
218
<h3>√çndice fora do intervalo do array</h3>
219
Inicializa√ß√£o de array em declara√ß√£o de estrutura ou classe n√£o permitida
220
Construtor de classe n√£o pode ter par√¢metros
221
Destrutor de classe n√£o pode ter par√¢metros
222
M√©todo de classe ou estrutura com o mesmo nome e par√¢metros j√° foi declarado</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1029
<h3>C√≥digo</h3>
<h3>Descri√ß√£o</h3>
223
<h3>Operando esperado</h3>
224
M√©todo de classe ou estrutura com o mesmo nome existe, mas com par√¢metros
diferentes (declara√ß√£o!=implementa√ß√£o)
225
<h3>Fun√ß√£o importada n√£o est√° descrita</h3>
226
ZeroMemory() is not allowed for objects with protected members or inheritance
227
Chamada amb√≠gua da fun√ß√£o sobrecarregada (correspond√™ncia exata de par√¢metros
para v√°rias sobrecargas)
228
<h3>Nome de vari√°vel esperada</h3>
229
Um refer√™ncia n√£o pode ser declarada neste local
230
<h3>J√° usado como nome da enumera√ß√£o</h3>
232
<h3>Classe ou estrutura esperada</h3>
235
N√£o pode chamar operador &#x27;delete&#x27; para excluir o array
236
<h3>Operador &#x27;while&#x27; esperado</h3>
237
<h3>Operador &#x27;delete&#x27; deve ter um ponteiro</h3>
238
<h3>J√° existe &#x27;default&#x27; para este &#x27;switch&#x27;</h3>
239
<h3>Erro de sintaxe</h3>
240
Seq√º√™ncia-escape pode ocorrer somente em strings (come√ßam com &#x27;\&#x27;)
241
Array requerido - colchete &#x27;[&#x27; n√£o se aplica a um array, ou n√£o arrays s√£o passados
como par√¢metros de array
242
N√£o pode ser inicializado atrav√©s da seq√º√™ncia de inicializa√ß√£o
243
<h3>Import n√£o est√° definido</h3>
244
<h3>Erro de otimizador na √°rvore sint√°tica</h3>
245
Estruturas declaradas em excesso (tente simplificar o programa)
246
<h3>Convers√£o do par√¢metro n√£o √© permitida</h3>
247
<h3>Uso incorreto do operador &#x27;delete&#x27;</h3>
248
N√£o √© permitido declarar um ponteiro para uma refer√™ncia
249
N√£o √© permitido declarar uma refer√™ncia para uma refer√™ncia
250
N√£o √© permitido declarar um ponteiro para um ponteiro
251
Declara√ß√£o de estrutura na lista de par√¢metros n√£o √© permitida
252
<h3>Opera√ß√£o inv√°lida de convers√£o de tipo</h3>
253
Um ponteiro pode ser declarado somente para uma classe ou estrutura
256
<h3>Identificador n√£o declarado</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1030
<h3>C√≥digo</h3>
<h3>Descri√ß√£o</h3>
257
<h3>Erro do otimizador de c√≥digo execut√°vel</h3>
258
<h3>Erro de gera√ß√£o de c√≥digo execut√°vel</h3>
260
<h3>Express√£o inv√°lida para o operador &#x27;switch&#x27;</h3>
261
Pool de constantes de string sobre-preenchido, simplifique o programa
262
<h3>N√£o pode converter para enumera√ß√£o</h3>
263
N√£o use &#x27;virtual&#x27; para dados (membros de uma classe ou estrutura)
264
N√£o pode chamar m√©todo protegido de uma classe
265
Fun√ß√µes virtuais sobrepostas retornam um tipo diferente
266
Classe n√£o pode ser herdada de uma estrutura
267
Estrutura n√£o pode ser herdada de uma classe
268
Construtor n√£o pode ser virtual (especificador virtual n√£o √© permitido)
269
<h3>Estrutura n√£o pode ter m√©todos virtuais</h3>
270
<h3>Fun√ß√£o deve ter um corpo</h3>
271
Sobrecarga de fun√ß√µes de sistema (fun√ß√µes de terminal) √© proibida
272
Especificador const n√£o √© v√°lido para fun√ß√µes que n√£o s√£o membros de uma classe
ou estrutura
274
N√£o permitido alterar membros de classe em m√©todo constante
276
<h3>Seq√º√™ncia de inicializa√ß√£o inapropriada</h3>
277
Valor padr√£o faltante para o par√¢metro (declara√ß√£o espec√≠fica de par√¢metros
default)
278
Sobreposi√ß√£o do par√¢metro padr√£o (valores diferentes na declara√ß√£o e
implementa√ß√£o)
279
N√£o permitido chamar m√©todo n√£o constante para um objeto constante
280
Um objeto √© necess√°rio para acessar membros (um ponteiro para uma n√£o
classe/estrutura est√° definido)
281
O nome de uma estrutura j√° declarada n√£o pode ser usado em declara√ß√£o
284
<h3>Convers√£o n√£o autorizada (em heran√ßa fechada)</h3>
285
Estruturas e arrays n√£o podem ser usados como vari√°veis de input
286
Especificador const n√£o √© v√°lido para construtor/destrutor
287
Express√£o de string incorreta para um datetime
288
<h3>Propriedade desconhecida (#property)</h3>
289
<h3>Valor incorreto de uma propriedade</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1031
<h3>C√≥digo</h3>
<h3>Descri√ß√£o</h3>
290
√çndice inv√°lido para uma propriedade em #property
291
<h3>Chamar par√¢metro omitido - &lt;func (x,)&gt;</h3>
293
<h3>Objeto deve ser passado por refer√™ncia</h3>
294
<h3>Array deve ser passado por refer√™ncia</h3>
295
<h3>Fun√ß√£o foi declarada como export√°vel</h3>
296
<h3>Fun√ß√£o n√£o foi declarada como export√°vel</h3>
297
<h3>√â proibido exportar fun√ß√µes importadas</h3>
298
Fun√ß√£o importada n√£o pode ter este par√¢metro (proibido passar um ponteiro, classe
ou estrutura contendo um array din√¢mico, ponteiro, classe, etc.)
299
<h3>Deve ser uma classe</h3>
300
#import n√£o foi fechado
302
<h3>Tipo incompat√≠vel</h3>
303
<h3>Vari√°vel externa (extern)j√° est√° inicializada</h3>
304
<h3>Nenhuma fun√ß√£oexportadaouponto de entradaencontrado</h3>
305
<h3>Chamada expl√≠cita aoconstrutorn√£o √© permitida</h3>
306
<h3>M√©todo foi declarado comoconstante</h3>
307
<h3>M√©todo n√£o foi declarado comoconstante</h3>
308
<h3>Tamanho incorreto do arquivo de recurso</h3>
309
<h3>Nome de recurso incorreto</h3>
310
Erro de abertura de arquivo de recurso
311
Erro de leitura de arquivo de recurso
312
<h3>Tipo de recurso desconhecido</h3>
313
Caminho incorreto para o arquivo de recurso
314
<h3>O nome dorecursoespecificado j√° √© usado</h3>
315
<h3>Argumento esperado para a macro tipo-fun√ß√£o</h3>
316
<h3>S√≠mbolo inesperado na defini√ß√£o de macro</h3>
317
<h3>Erro em par√¢metros formais da macro</h3>
318
N√∫mero inv√°lido de par√¢metros para uma macro
319
<h3>Par√¢metro em excesso para uma macro</h3>
320
<h3>Complexo demais, simplifique a macro</h3>
321
Parametro para EnumToString() somente pode ser uma enumera√ß√£o</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1032
<h3>C√≥digo</h3>
<h3>Descri√ß√£o</h3>
322
O nome do recurso √© longo demais
323
Formato de imagem n√£o suportado (somente BMP com cor de 24 ou 32 bits de
profundidade √© suportado)
324
Um array n√£o pode ser declarado em operador
325
A fun√ß√£o pode ser declarada somente no escopo global
326
A declara√ß√£o n√£o √© permitida para o escopo corrente
327
Inicializa√ß√£o de vari√°veis est√°ticas com os valores de vari√°veis locais n√£o √©
permitida
328
Declara√ß√£o ilegal de um array de objetos que n√£o tem um construtor padr√£o
329
Lista de inicializa√ß√£o permitida somente para construtores
330
Sem defini√ß√£o de fun√ß√£o ap√≥s lista de inicializa√ß√£o
331
<h3>Lista de inicializa√ß√£o est√° vazia</h3>
332
Inicializa√ß√£o de array em um construtor n√£o √© permitida
333
Inicializar membros de uma classe pai na lista de inicializa√ß√£o n√£o √© permitido
334
<h3>Express√£o do tipo inteiro esperado</h3>
335
Mem√≥ria requerida para o array excede o valor m√°ximo
336
Mem√≥ria requerida para a estrutura excede o valor m√°ximo
337
Mem√≥ria requerida para as vari√°veis declaradas no n√≠vel global excede o valor
m√°ximo
338
Mem√≥ria requerida para vari√°veis locais excede o valor m√°ximo
339
<h3>Construtorn√£o definido</h3>
340
<h3>Nome inv√°lido do arquivo de √≠cone</h3>
341
N√£o pode abrir o arquivo de √≠coneno caminho especificado
342
O arquivo de √≠cone est√° incorreto e n√£o √© do formato ICO format
343
Reinicializa√ß√£o de um membro em um construtor de uma classe/estrutura usando a
lista de inicializa√ß√£o
344
Inicializa√ß√£o de membros est√°ticos na lista de inicializa√ß√£o do construtor n√£o √©
permitida
345
Inicializa√ß√£o de um membro n√£o-est√°tico de uma classe/estrutura em n√≠vel global
n√£o √© permitida
346
O nome do m√©todo da classe/estrutura corresponde ao nome de um membro
declarado anteriormente</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1033
<h3>C√≥digo</h3>
<h3>Descri√ß√£o</h3>
347
O nome do membro da classe/estrutura corresponde ao nome de um m√©todo
declarado anteriormente
348
Fun√ß√£o virtual n√£o pode ser declarada como est√°tica
349
O modificador const n√£o √© permitido para fun√ß√µes est√°ticas
350
Construtor ou destrutor n√£o pode ser est√°tico
351
Membros n√£o-est√°ticos de uma classe ou estrutura n√£o podem ser acessados a
partir de uma fun√ß√£o est√°tica
352
Uma opera√ß√£o de sobrecarregada (+,-,[],++,-- etc.) √© esperada ap√≥s a palavra-chave
operator
353
Nem todas as opera√ß√µes podem ser sobrecarregadas em MQL5
354
<h3>Defini√ß√£o n√£o corresponde √† declara√ß√£o</h3>
355
Um n√∫mero inv√°lido de par√¢metros √© especificado para o operador 
356
Fun√ß√£o de manipula√ß√£o de evento n√£o encontrada
357
<h3>M√©todo n√£o pode ser exportado</h3>
358
Um ponteiro para o objeto constante n√£o pode ser normalizado por um objeto n√£o-
constante
359
Templates de classe n√£o s√£o suportados ainda
360
Sobrecargade template de fun√ß√£o n√£o √© suportado ainda
361
Template de fun√ß√£o n√£o pode ser aplicado
362
Par√¢metro amb√≠guo em template de fun√ß√£o (v√°rios tipos de par√¢metros podem ser
aplicados)
363
Incapaz de determinar o tipo do par√¢metro, atrav√©s do qual o argumento do
template de fun√ß√£o deveria ser normalizado
364
N√∫mero incorreto de par√¢metros no template de fun√ß√£o
365
Template de fun√ß√£o n√£o pode ser virtual
366
Templates de fun√ß√£o n√£o podem ser exportados
367
Templates de fun√ß√£o n√£o podem ser importados
368
<h3>Estruturas contendo objetos n√£o s√£o permitidas</h3>
369
Arrays de seq√º√™ncia e estruturas que cont√™m os objetos n√£o s√£o permitidos
370
Um membro est√°tico de classe/estrutura deve ser explicitamente inicializado
371
Limita√ß√£o do compilador: a string n√£o pode conter mais de 65 535 caracteres
372
<h3>Inconsistente #ifdef/#endif</h3>
373
Objeto de classe n√£o pode ser retornado, construtor de c√≥pia n√£o encontrado</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1034
<h3>C√≥digo</h3>
<h3>Descri√ß√£o</h3>
374
Membros e m√©todos n√£o est√°ticos n√£o podem ser usados
375
OnTesterInit() imposs√≠vel de usar sem o OnTesterDeinit()
376
<h3>Redefini√ß√£o do par√¢metro formal &#x27;%s&#x27;</h3>
377
Macro __FUNCSIG__ e __FUNCTION__ n√£o pode aparecer fora de um corpo de
fun√ß√£o
378
Tipo inv√°lido retornado. Por exemplo, este erro ser√° produzido para fun√ß√µes
importadas da DLL que retornam estrutura ou ponteiro.
379
<h3>Erro ao utilizar o modelo</h3>
380
<h3>N√£o √© utilizado</h3>
381
Sintaxe inadmiss√≠vel ao declarar apenas a fun√ß√£o virtual, √© somente permitido
&quot;=NULL&quot; ou &quot;=0&quot;
382
As fun√ß√µes virtuais podem ser declaradas apenas com o especificador da fun√ß√£o
virtual (&quot;=NULL&quot; ou &quot;=0&quot;)
383
√â proibido criar um exemplar de classe abstrata
384
Para uma convers√£o din√¢mica  usando o operador dynamic_cast, o tipo de prop√≥sito
deve ser o ponteiro para o tipo de usu√°rio
385
Espera-se o tipo de &quot;ponteiro para a fun√ß√£o&quot;
386
N√£o s√£o suportados os ponteiros para m√©todos 
387
Erro, n√£o √© poss√≠vel determinar o tipo de ponteiro para a fun√ß√£o
388
A convers√£o de tipo n√£o est√° dispon√≠vel devido a heran√ßafechada
389
A vari√°vel com modificador const deve ser inicializada imediatamente ap√≥s √†
declara√ß√£o
393
Na interface podem ser declarados apenas os m√©todos com acesso p√∫blico
394
Anexo inv√°lido da interface para outra interface
395
A interface pode ser herdada apenas a partir de outra interface
396
<h3>√Ä espera da interface</h3>
397
<h3>As interfaces apenas suportam heran√ßa p√∫blica</h3>
398
<h3>A interface n√£o pode conter membros</h3>
399
N√£o se devem criar diretamente os objetos da interface, s√≥ atrav√©s da heran√ßa
400
O especificador n√£o pode ser usado na declara√ß√£o forward
401
A heran√ßa desta classe n√£o √© poss√≠vel, pois √© declarada com um especificador final
402
√â imposs√≠vel substituir um m√©todo declarado com o especificador final
403
O especificador final s√≥ pode ser aplicado a fun√ß√µes virtuais</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1035
<h3>C√≥digo</h3>
<h3>Descri√ß√£o</h3>
404
Na verdade, o m√©todo marcado com o especificador override n√£o substitui nenhuma
fun√ß√£o de classe base
405
O especificador n√£o √© permitido na defini√ß√£o da fun√ß√£o, mas, sim, apenas na
declara√ß√£o
406
N√£o √© poss√≠vel converter esse tipo no especificado
407
Este tipo n√£o pode ser usado para vari√°vel de recurso
408
<h3>Erro no arquivo do projeto</h3>
409
N√£o pode ser usado como membro union
410
Escolha amb√≠gua para esse nome, √© necess√°rio definir claramente o contexto de uso
411
N√£o se pode usar essa estrutura de uma DLL
412
N√£o se pode chamar uma fun√ß√£o marcada com o especificador delete
413
MQL4 n√£o √© suportado. Para compilar este programa, use o MetaEditor, que est√°
localizado na pasta de instala√ß√£o do seu terminal MetaTrader 4</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1036
<h3>Erros em Tempo de Execu√ß√£o</h3>
GetLastError() √© a fun√ß√£o que retorna o c√≥digo do √∫ltimo erro que est√° armazenado na vari√°vel
predefinida _LastError. Este valor pode ser redefinido para zero atrav√©s da fun√ß√£o ResetLastError().
<h3>Constante</h3>
<h3>C√≥digo</h3>
<h3>Descri√ß√£o</h3>
<h3>ERR_SUCCESS</h3>
0
<h3>A opera√ß√£o conclu√≠da com sucesso</h3>
<h3>ERR_INTERNAL_ERROR</h3>
4001
<h3>Erro interno inesperado</h3>
<h3>ERR_WRONG_INTERNAL_PARAMETER</h3>
4002
<h3>Par√¢metro errado na chamada</h3>
interna da fun√ß√£o do terminal
cliente
<h3>ERR_INVALID_PARAMETER</h3>
4003
<h3>Par√¢metro errado ao chamar a</h3>
fun√ß√£o de sistema
<h3>ERR_NOT_ENOUGH_MEMORY</h3>
4004
<h3>Sem mem√≥ria suficiente para</h3>
executar a fun√ß√£o de sistema
<h3>ERR_STRUCT_WITHOBJECTS_ORCLASS</h3>
4005
<h3>A estrutura cont√©m objetos de</h3>
strings e/ou arrays din√¢micos
e/ou estrutura de tais objetos
e/ou classes
<h3>ERR_INVALID_ARRAY</h3>
4006
<h3>Array de um tipo errado, tamanho</h3>
errado, ou um objeto defeituoso
de um array din√¢mico
<h3>ERR_ARRAY_RESIZE_ERROR</h3>
4007
<h3>Sem mem√≥ria suficiente para a</h3>
realoca√ß√£o de um array, ou uma
tentativa de alterar o tamanho de
um array est√°tico
<h3>ERR_STRING_RESIZE_ERROR</h3>
4008
<h3>Sem mem√≥ria suficiente para a</h3>
realoca√ß√£o de string
<h3>ERR_NOTINITIALIZED_STRING</h3>
4009
<h3>String n√£o inicializada</h3>
<h3>ERR_INVALID_DATETIME</h3>
4010
<h3>Data e/ou hora inv√°lida</h3>
<h3>ERR_ARRAY_BAD_SIZE</h3>
4011
<h3>Total amount of elements in the</h3>
array cannot exceed 2147483647
<h3>ERR_INVALID_POINTER</h3>
4012
<h3>Ponteiro errado</h3>
<h3>ERR_INVALID_POINTER_TYPE</h3>
4013
<h3>Tipo errado de ponteiro</h3>
<h3>ERR_FUNCTION_NOT_ALLOWED</h3>
4014
<h3>Fun√ß√£o</h3>
de 
sistema 
n√£o 
√©
permitida para chamar
<h3>ERR_RESOURCE_NAME_DUPLICATED</h3>
4015
<h3>Os nomes do recurso din√¢mico e</h3>
do est√°tico equivalem
<h3>ERR_RESOURCE_NOT_FOUND</h3>
4016
<h3>Recurso com este nome n√£o foi</h3>
encontrado em EX5</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1037
<h3>Constante</h3>
<h3>C√≥digo</h3>
<h3>Descri√ß√£o</h3>
<h3>ERR_RESOURCE_UNSUPPORTED_TYPE</h3>
4017
<h3>Tipo de recurso n√£o suportado ou</h3>
seu tamanho excede 16 Mb
<h3>ERR_RESOURCE_NAME_IS_TOO_LONG</h3>
4018
<h3>O nome do recurso excede 63</h3>
caracteres
<h3>ERR_MATH_OVERFLOW</h3>
4019
<h3>Durante</h3>
c√°lculo 
de 
fun√ß√µes
matem√°ticas ocorreu um estouro
<h3>ERR_SLEEP_ERROR</h3>
4020
Excede a data de t√©rmino do teste
ap√≥s chamar Sleep()
<h3>ERR_STOPPED</h3>
4022
<h3>Os testes foram interrompidos</h3>
for√ßosamente 
de 
fora. 
<h3>Por</h3>
exemplo, 
ao 
interromper 
a
otimiza√ß√£o, ao fechar a janela de
teste visual ou ao parar o agente
de teste
<h3>ERR_INVALID_TYPE</h3>
4023
<h3>Tipo inv√°lido</h3>
<h3>ERR_INVALID_HANDLE</h3>
4024
<h3>Manipulador inv√°lido</h3>
<h3>ERR_TOO_MANY_OBJECTS</h3>
4025
<h3>Pool de objetos cheio</h3>
<h3>Gr√°ficos</h3>
<h3>ERR_CHART_WRONG_ID</h3>
4101
<h3>Identificador de gr√°fico (chart ID)</h3>
errado
<h3>ERR_CHART_NO_REPLY</h3>
4102
<h3>Gr√°fico n√£o responde</h3>
<h3>ERR_CHART_NOT_FOUND</h3>
4103
<h3>Gr√°fico n√£o encontrado</h3>
<h3>ERR_CHART_NO_EXPERT</h3>
4104
<h3>Nenhum Expert Advisor no gr√°fico</h3>
que pudesse manipular o evento
<h3>ERR_CHART_CANNOT_OPEN</h3>
4105
<h3>Erro de abertura de gr√°fico</h3>
<h3>ERR_CHART_CANNOT_CHANGE</h3>
4106
<h3>Falha ao alterar ativo e per√≠odo</h3>
de um gr√°fico
<h3>ERR_CHART_WRONG_PARAMETER</h3>
4107
Valor de erro do par√¢metro para a
fun√ß√£o que trabalha com gr√°ficos
<h3>ERR_CHART_CANNOT_CREATE_TIMER</h3>
4108
<h3>Falha ao criar timer</h3>
<h3>ERR_CHART_WRONG_PROPERTY</h3>
4109
<h3>Identificador</h3>
de 
propriedade
(property ID) do gr√°fico errado
<h3>ERR_CHART_SCREENSHOT_FAILED</h3>
4110
<h3>Erro criando telas (screenshots)</h3>
<h3>ERR_CHART_NAVIGATE_FAILED</h3>
4111
<h3>Erro navegando atrav√©s de gr√°fico</h3>
<h3>ERR_CHART_TEMPLATE_FAILED</h3>
4112
<h3>Erro aplicando template</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1038
<h3>Constante</h3>
<h3>C√≥digo</h3>
<h3>Descri√ß√£o</h3>
<h3>ERR_CHART_WINDOW_NOT_FOUND</h3>
4113
<h3>Sub-janela contendo o indicador</h3>
n√£o foi encontrada
<h3>ERR_CHART_INDICATOR_CANNOT_ADD</h3>
4114
<h3>Erro adicionando um indicador no</h3>
gr√°fico
<h3>ERR_CHART_INDICATOR_CANNOT_DEL</h3>
4115
<h3>Erro excluindo um indicador do</h3>
gr√°fico
<h3>ERR_CHART_INDICATOR_NOT_FOUND</h3>
4116
<h3>Indicador</h3>
n√£o 
encontrado 
no
gr√°fico especificado
<h3>Objetos Gr√°ficos</h3>
<h3>ERR_OBJECT_ERROR</h3>
4201
<h3>Erro trabalhando com um objeto</h3>
gr√°fico
<h3>ERR_OBJECT_NOT_FOUND</h3>
4202
<h3>Objeto gr√°fico n√£o foi encontrado</h3>
<h3>ERR_OBJECT_WRONG_PROPERTY</h3>
4203
<h3>Identificador</h3>
(ID) 
de 
uma
propriedade de objeto gr√°fico
errado
<h3>ERR_OBJECT_GETDATE_FAILED</h3>
4204
<h3>N√£o</h3>
foi 
poss√≠vel 
obter 
data
correspondente ao valor
<h3>ERR_OBJECT_GETVALUE_FAILED</h3>
4205
<h3>N√£o foi poss√≠vel obter</h3>
valor
correspondente √† data
<h3>MarketInfo</h3>
<h3>ERR_MARKET_UNKNOWN_SYMBOL</h3>
4301
<h3>Ativo desconhecido</h3>
<h3>ERR_MARKET_NOT_SELECTED</h3>
4302
<h3>Ativo n√£o est√° selecionado na</h3>
janela Observa√ß√£o de Mercado
<h3>ERR_MARKET_WRONG_PROPERTY</h3>
4303
<h3>Identificador de uma propriedade</h3>
de ativo errado
<h3>ERR_MARKET_LASTTIME_UNKNOWN</h3>
4304
<h3>Hora do √∫ltimo</h3>
tick 
n√£o 
√©
conhecida (sem ticks)
<h3>ERR_MARKET_SELECT_ERROR</h3>
4305
<h3>Erro adicionando ou excluindo um</h3>
ativo na janela Observa√ß√£o de
<h3>Marcado</h3>
<h3>ERR_MARKET_SELECT_LIMIT</h3>
4306
<h3>Limite de s√≠mbolos selecionados</h3>
em MarketWatch excedido
<h3>ERR_MARKET_SESSION_INDEX</h3>
4307
<h3>√çndice de sess√£o incorreto ao</h3>
chamar 
a 
fun√ß√£o
<h3>SymbolInfoSessionQuote/SymbolIn</h3>
foSessionTrade
<h3>Acesso de Hist√≥rico</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1039
<h3>Constante</h3>
<h3>C√≥digo</h3>
<h3>Descri√ß√£o</h3>
<h3>ERR_HISTORY_NOT_FOUND</h3>
4401
<h3>Hist√≥rico</h3>
solicitado 
n√£o
encontrado
<h3>ERR_HISTORY_WRONG_PROPERTY</h3>
4402
<h3>Identificador (ID) da propriedade</h3>
de hist√≥rico errado
<h3>ERR_HISTORY_TIMEOUT</h3>
4403
<h3>Esgotado o tempo de solicita√ß√£o</h3>
do hist√≥rico
<h3>ERR_HISTORY_BARS_LIMIT</h3>
4404
<h3>N√∫mero de barras restrito pelas</h3>
configura√ß√µes do terminal
<h3>ERR_HISTORY_LOAD_ERRORS</h3>
4405
<h3>Erros m√∫ltiplos ao carregar o</h3>
hist√≥rico
<h3>ERR_HISTORY_SMALL_BUFFER</h3>
4407
<h3>A matriz de recebimento √© muito</h3>
pequena para armazenar todos os
dados solicitados 
<h3>Vari√°veis ‚ÄãGlobais</h3>
<h3>ERR_GLOBALVARIABLE_NOT_FOUND</h3>
4501
<h3>Vari√°vel global do terminal cliente</h3>
n√£o foi encontrada
<h3>ERR_GLOBALVARIABLE_EXISTS</h3>
4502
<h3>Vari√°vel global do terminal cliente</h3>
com o mesmo nome j√° existe
<h3>ERR_GLOBALVARIABLE_NOT_MODIFIED</h3>
4503
<h3>N√£o</h3>
houve 
modifica√ß√µes 
de
vari√°veis ‚Äãglobais
<h3>ERR_GLOBALVARIABLE_CANNOTREAD</h3>
4504
<h3>Foi imposs√≠vel abrir e ler o</h3>
arquivo com 
os 
valores 
das
vari√°veis ‚Äãglobais
<h3>ERR_GLOBALVARIABLE_CANNOTWRITE</h3>
4505
<h3>Foi imposs√≠vel escrever o arquivo</h3>
com os valores das vari√°veis ‚Äã
globais
<h3>ERR_MAIL_SEND_FAILED</h3>
4510
<h3>Envio de email falhou</h3>
<h3>ERR_PLAY_SOUND_FAILED</h3>
4511
<h3>Reprodu√ß√£o de som falhou</h3>
<h3>ERR_MQL5_WRONG_PROPERTY</h3>
4512
<h3>Identificador de propriedade do</h3>
programa errado
<h3>ERR_TERMINAL_WRONG_PROPERTY</h3>
4513
<h3>Identificador de propriedade do</h3>
terminal errado
<h3>ERR_FTP_SEND_FAILED</h3>
4514
<h3>Envio de arquivo via ftp falhou</h3>
<h3>ERR_NOTIFICATION_SEND_FAILED</h3>
4515
<h3>Falha ao enviar uma notifica√ß√£o</h3>
<h3>ERR_NOTIFICATION_WRONG_PARAMETER</h3>
4516
<h3>Par√¢metro inv√°lido para enviar</h3>
uma notifica√ß√£o ‚Äì uma string
vazia ou NULL foi passada para a
fun√ß√£o SendNotification()</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1040
<h3>Constante</h3>
<h3>C√≥digo</h3>
<h3>Descri√ß√£o</h3>
<h3>ERR_NOTIFICATION_WRONG_SETTINGS</h3>
4517
<h3>Configura√ß√µes</h3>
de 
notifica√ß√µes
erradas no terminal (ID n√£o est√°
especificado ou permiss√£o n√£o
est√° definida)
<h3>ERR_NOTIFICATION_TOO_FREQUENT</h3>
4518
<h3>Freq√º√™ncia</h3>
de 
envio 
de
notifica√ß√µes em excesso
<h3>ERR_FTP_NOSERVER</h3>
4519
<h3>O</h3>
servidor 
<h3>FTP</h3>
n√£o 
est√°
especificado nos atributos de
configura√ß√£o
<h3>ERR_FTP_NOLOGIN</h3>
4520
<h3>O login FTP n√£o est√° especificado</h3>
nos atributos de configura√ß√£o
<h3>ERR_FTP_FILE_ERROR</h3>
4521
<h3>O ficheiro n√£o existe</h3>
<h3>ERR_FTP_CONNECT_FAILED</h3>
4522
<h3>A liga√ß√£o ao servidor FTP falhou</h3>
<h3>ERR_FTP_CHANGEDIR</h3>
4523
<h3>N√£o foi encontrado o diret√≥rio no</h3>
servidor FTP para o upload do
ficheiro 
<h3>Buffers de Indicador Customizado</h3>
<h3>ERR_BUFFERS_NO_MEMORY</h3>
4601
<h3>Sem mem√≥ria suficiente para a</h3>
distribui√ß√£o 
de 
buffers 
de
indicador
<h3>ERR_BUFFERS_WRONG_INDEX</h3>
4602
<h3>√çndice de buffer de indicador</h3>
errado
<h3>Propriedades de Indicador Customizado</h3>
<h3>ERR_CUSTOM_WRONG_PROPERTY</h3>
4603
<h3>Identificador (ID) de propriedade</h3>
do indicador customizado errado
<h3>Conta</h3>
<h3>ERR_ACCOUNT_WRONG_PROPERTY</h3>
4701
<h3>Identificador (ID) de propriedade</h3>
da conta errado
<h3>ERR_TRADE_WRONG_PROPERTY</h3>
4751
<h3>Identificador (ID) de propriedade</h3>
da negocia√ß√£o (trade) errado
<h3>ERR_TRADE_DISABLED</h3>
4752
<h3>Negocia√ß√£o via Expert Advisors</h3>
proibida
<h3>ERR_TRADE_POSITION_NOT_FOUND</h3>
4753
<h3>Posi√ß√£o n√£o encontrada</h3>
<h3>ERR_TRADE_ORDER_NOT_FOUND</h3>
4754
<h3>Ordem n√£o encontrada</h3>
<h3>ERR_TRADE_DEAL_NOT_FOUND</h3>
4755
<h3>Opera√ß√£o (deal) n√£o encontrada</h3>
<h3>ERR_TRADE_SEND_FAILED</h3>
4756
<h3>Envio</h3>
de 
solicita√ß√£o 
de
negocia√ß√£o falhou</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1041
<h3>Constante</h3>
<h3>C√≥digo</h3>
<h3>Descri√ß√£o</h3>
<h3>ERR_TRADE_CALC_FAILED</h3>
4758
<h3>Imposs√≠vel calcular o valor do</h3>
√≠ndice de negocia√ß√£o
<h3>Indicadores</h3>
<h3>ERR_INDICATOR_UNKNOWN_SYMBOL</h3>
4801
<h3>Ativo desconhecido</h3>
<h3>ERR_INDICATOR_CANNOT_CREATE</h3>
4802
<h3>Indicador n√£o pode ser criado</h3>
<h3>ERR_INDICATOR_NO_MEMORY</h3>
4803
<h3>Sem mem√≥ria suficiente para</h3>
adicionar o indicador
<h3>ERR_INDICATOR_CANNOT_APPLY</h3>
4804
<h3>O indicador n√£o pode ser aplicado</h3>
a um outro indicador
<h3>ERR_INDICATOR_CANNOT_ADD</h3>
4805
<h3>Erro ao aplicar um indicador ao</h3>
gr√°fico
<h3>ERR_INDICATOR_DATA_NOT_FOUND</h3>
4806
<h3>Dado solicitado n√£o encontrado</h3>
<h3>ERR_INDICATOR_WRONG_HANDLE</h3>
4807
<h3>Manuseio de indicador errado</h3>
<h3>ERR_INDICATOR_WRONG_PARAMETERS</h3>
4808
<h3>Numero errado de par√¢metros ao</h3>
criar um indicador
<h3>ERR_INDICATOR_PARAMETERS_MISSING</h3>
4809
<h3>Sem par√¢metros ao criar um</h3>
indicador
<h3>ERR_INDICATOR_CUSTOM_NAME</h3>
4810
<h3>O primeiro par√¢metro no array</h3>
deve ser o nome do indicador
customizado
<h3>ERR_INDICATOR_PARAMETER_TYPE</h3>
4811
<h3>Tipo de par√¢metro inv√°lido no</h3>
array ao criar um indicador
<h3>ERR_INDICATOR_WRONG_INDEX</h3>
4812
<h3>√çndice</h3>
errado 
de 
buffer 
do
indicador solicitado
<h3>Profundidade de Mercado</h3>
<h3>ERR_BOOKS_CANNOT_ADD</h3>
4901
<h3>Profundidade de Mercado n√£o</h3>
pode ser adicionado
<h3>ERR_BOOKS_CANNOT_DELETE</h3>
4902
<h3>Profundidade de Mercado n√£o</h3>
pode ser removido
<h3>ERR_BOOKS_CANNOT_GET</h3>
4903
<h3>Os dados da Profundidade de</h3>
<h3>Mercado n√£o podem ser obtidos</h3>
<h3>ERR_BOOKS_CANNOT_SUBSCRIBE</h3>
4904
<h3>Erro em subscrever para receber</h3>
novos dados da Profundidade de
<h3>Mercado</h3>
<h3>Opera√ß√µes de Arquivo</h3>
<h3>ERR_TOO_MANY_FILES</h3>
5001
<h3>Mais que 64 arquivos n√£o podem</h3>
ser abertos ao mesmo tempo</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1042
<h3>Constante</h3>
<h3>C√≥digo</h3>
<h3>Descri√ß√£o</h3>
<h3>ERR_WRONG_FILENAME</h3>
5002
<h3>Nome de arquivo inv√°lido</h3>
<h3>ERR_TOO_LONG_FILENAME</h3>
5003
<h3>Nome de arquivo longo demais</h3>
<h3>ERR_CANNOT_OPEN_FILE</h3>
5004
<h3>Erro de abertura de arquivo</h3>
<h3>ERR_FILE_CACHEBUFFER_ERROR</h3>
5005
<h3>Sem mem√≥ria suficiente de cache</h3>
para leitura
<h3>ERR_CANNOT_DELETE_FILE</h3>
5006
<h3>Erro excluindo arquivo</h3>
<h3>ERR_INVALID_FILEHANDLE</h3>
5007
<h3>Um arquivo com este handle foi</h3>
fechado, ou simplesmente n√£o
estava aberto
<h3>ERR_WRONG_FILEHANDLE</h3>
5008
<h3>Handle de arquivo errado</h3>
<h3>ERR_FILE_NOTTOWRITE</h3>
5009
<h3>O arquivo deve estar abertura</h3>
para escrita
<h3>ERR_FILE_NOTTOREAD</h3>
5010
<h3>O arquivo deve estar aberto para</h3>
leitura
<h3>ERR_FILE_NOTBIN</h3>
5011
<h3>O arquivo deve estar aberto como</h3>
um arquivo bin√°rio
<h3>ERR_FILE_NOTTXT</h3>
5012
<h3>O arquivo deve estar aberto como</h3>
um texto
<h3>ERR_FILE_NOTTXTORCSV</h3>
5013
<h3>O arquivo deve estar aberto como</h3>
um texto ou CSV
<h3>ERR_FILE_NOTCSV</h3>
5014
<h3>O arquivo deve estar aberto como</h3>
<h3>CSV</h3>
<h3>ERR_FILE_READERROR</h3>
5015
<h3>Erro de leitura de arquivo</h3>
<h3>ERR_FILE_BINSTRINGSIZE</h3>
5016
<h3>Tamanho da string deve estar</h3>
especificado, porque o arquivo
est√° aberto como bin√°rio
<h3>ERR_INCOMPATIBLE_FILE</h3>
5017
<h3>Um arquivo de texto deve ser</h3>
usado para arrays de strings, para
outros arrays - bin√°rios
<h3>ERR_FILE_IS_DIRECTORY</h3>
5018
Isto n√£o √© um arquivo, isto √© um
diret√≥rio
<h3>ERR_FILE_NOT_EXIST</h3>
5019
<h3>Arquivo inexistente</h3>
<h3>ERR_FILE_CANNOT_REWRITE</h3>
5020
<h3>Arquivo n√£o pode ser reescrito</h3>
<h3>ERR_WRONG_DIRECTORYNAME</h3>
5021
<h3>Nome de diret√≥rio errado</h3>
<h3>ERR_DIRECTORY_NOT_EXIST</h3>
5022
<h3>Diret√≥rio inexistente</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1043
<h3>Constante</h3>
<h3>C√≥digo</h3>
<h3>Descri√ß√£o</h3>
<h3>ERR_FILE_ISNOT_DIRECTORY</h3>
5023
<h3>Isto √© um arquivo, n√£o um</h3>
diret√≥rio
<h3>ERR_CANNOT_DELETE_DIRECTORY</h3>
5024
<h3>O diret√≥rio n√£o pode ser removido</h3>
<h3>ERR_CANNOT_CLEAN_DIRECTORY</h3>
5025
<h3>Falha</h3>
ao 
limpar 
o 
diret√≥rio
(provavelmente 
um 
ou 
mais
arquivos est√£o bloqueados e a
opera√ß√£o de remo√ß√£o falhou)
<h3>ERR_FILE_WRITEERROR</h3>
5026
<h3>Falha ao escrever um recurso para</h3>
um arquivo
<h3>ERR_FILE_ENDOFFILE</h3>
5027
Falha ao ler o pr√≥ximo bloco de
dados a partir do arquivo CSV
(FileReadString, FileReadNumber,
<h3>FileReadDatetime, FileReadBool),</h3>
porque atingido o final do arquivo
<h3>Convers√£o de String</h3>
<h3>ERR_NO_STRING_DATE</h3>
5030
<h3>Sem data na string</h3>
<h3>ERR_WRONG_STRING_DATE</h3>
5031
<h3>Data errada na string</h3>
<h3>ERR_WRONG_STRING_TIME</h3>
5032
<h3>Hora errada na string</h3>
<h3>ERR_STRING_TIME_ERROR</h3>
5033
<h3>Erro convertendo string em data</h3>
<h3>ERR_STRING_OUT_OF_MEMORY</h3>
5034
<h3>Sem mem√≥ria suficiente para a</h3>
string
<h3>ERR_STRING_SMALL_LEN</h3>
5035
<h3>O comprimento da string √© menor</h3>
que o esperado
<h3>ERR_STRING_TOO_BIGNUMBER</h3>
5036
<h3>N√∫mero grande demais, maior</h3>
que ULONG_MAX
<h3>ERR_WRONG_FORMATSTRING</h3>
5037
</p>
<pre><code class="language-mql5">
string de formato inv√°lido
</code></pre>
<p>
<h3>ERR_TOO_MANY_FORMATTERS</h3>
5038
<h3>Quantidade de especificadores de</h3>
formato maior que de par√¢metros
<h3>ERR_TOO_MANY_PARAMETERS</h3>
5039
<h3>Quantidade de par√¢metros maior</h3>
que 
de 
especificadores 
de
formato
<h3>ERR_WRONG_STRING_PARAMETER</h3>
5040
<h3>Par√¢metro</h3>
de 
tipo 
string
defeituoso
<h3>ERR_STRINGPOS_OUTOFRANGE</h3>
5041
<h3>Posi√ß√£o fora da string</h3>
<h3>ERR_STRING_ZEROADDED</h3>
5042
0 adicionado ao final da string,
uma opera√ß√£o in√∫til</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1044
<h3>Constante</h3>
<h3>C√≥digo</h3>
<h3>Descri√ß√£o</h3>
<h3>ERR_STRING_UNKNOWNTYPE</h3>
5043
<h3>Tipo de dado desconhecido ao</h3>
converter para uma string
<h3>ERR_WRONG_STRING_OBJECT</h3>
5044
<h3>Objeto de string defeituoso</h3>
<h3>Opera√ß√µes com Arrays</h3>
<h3>ERR_INCOMPATIBLE_ARRAYS</h3>
5050
Copiando arrays incompat√≠veis.
<h3>Array de string pode ser copiado</h3>
somente para um array de string,
e um array num√©rico - somente
em um array num√©rico
<h3>ERR_SMALL_ASSERIES_ARRAY</h3>
5051
<h3>O</h3>
array 
de 
recep√ß√£o 
est√°
declarado como AS_SERIES, e √© de
tamanho insuficiente.
<h3>ERR_SMALL_ARRAY</h3>
5052
<h3>Array pequeno demais, a posi√ß√£o</h3>
inicial est√° fora do array
<h3>ERR_ZEROSIZE_ARRAY</h3>
5053
<h3>Um array de comprimento zero</h3>
<h3>ERR_NUMBER_ARRAYS_ONLY</h3>
5054
<h3>Deve ser um array num√©rico</h3>
<h3>ERR_ONEDIM_ARRAYS_ONLY</h3>
5055
<h3>Deve ser um array unidimensional</h3>
<h3>ERR_SERIES_ARRAY</h3>
5056
<h3>S√©rie de tempo (timeseries) n√£o</h3>
pode ser usada
<h3>ERR_DOUBLE_ARRAY_ONLY</h3>
5057
Deve ser um array de tipo double
<h3>ERR_FLOAT_ARRAY_ONLY</h3>
5058
Deve ser um array de tipo float
<h3>ERR_LONG_ARRAY_ONLY</h3>
5059
Deve ser um array de tipo long
<h3>ERR_INT_ARRAY_ONLY</h3>
5060
Deve ser um array de tipo int
<h3>ERR_SHORT_ARRAY_ONLY</h3>
5061
Deve ser um array de tipo short
<h3>ERR_CHAR_ARRAY_ONLY</h3>
5062
Deve ser um array de tipo char
<h3>ERR_STRING_ARRAY_ONLY</h3>
5063
<h3>Deve ser uma matriz do tipo</h3>
cadeia de caracteres
<h3>Opera√ß√µes com OpenCL</h3>
<h3>ERR_OPENCL_NOT_SUPPORTED</h3>
5100
<h3>Fun√ß√µes</h3>
<h3>OpenCL</h3>
n√£o 
s√£o
suportados neste computador
<h3>ERR_OPENCL_INTERNAL</h3>
5101
<h3>Erro interno ocorreu ao executar</h3>
<h3>OpenCL</h3>
<h3>ERR_OPENCL_INVALID_HANDLE</h3>
5102
<h3>Handle de OpenCL inv√°lido</h3>
<h3>ERR_OPENCL_CONTEXT_CREATE</h3>
5103
<h3>Erro</h3>
criando 
o 
contexto 
de
<h3>OpenCL</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1045
<h3>Constante</h3>
<h3>C√≥digo</h3>
<h3>Descri√ß√£o</h3>
<h3>ERR_OPENCL_QUEUE_CREATE</h3>
5104
Falha ao criar um fila de execu√ß√£o
em OpenCL
<h3>ERR_OPENCL_PROGRAM_CREATE</h3>
5105
<h3>Erro ocorreu ao compilar um</h3>
programa OpenCL
<h3>ERR_OPENCL_TOO_LONG_KERNEL_NAME</h3>
5106
<h3>Nome</h3>
de 
kernel 
longo
demais(kernel de OpenCL)
<h3>ERR_OPENCL_KERNEL_CREATE</h3>
5107
<h3>Erro criando um kernel de OpenCL</h3>
<h3>ERR_OPENCL_SET_KERNEL_PARAMETER</h3>
5108
<h3>Erro</h3>
ocorreu 
ao 
configurar
par√¢metrospara 
o 
kernel 
de
<h3>OpenCL</h3>
<h3>ERR_OPENCL_EXECUTE</h3>
5109
<h3>Erro em tempo de execu√ß√£o de</h3>
programa de OpenCL
<h3>ERR_OPENCL_WRONG_BUFFER_SIZE</h3>
5110
<h3>Tamanho inv√°lido do buffer de</h3>
<h3>OpenCL</h3>
<h3>ERR_OPENCL_WRONG_BUFFER_OFFSET</h3>
5111
<h3>Deslocamento (offset) inv√°lido do</h3>
buffer de OpenCL
<h3>ERR_OPENCL_BUFFER_CREATE</h3>
5112
<h3>Falha ao criar um buffer de</h3>
<h3>OpenCL</h3>
<h3>ERR_OPENCL_TOO_MANY_OBJECTS</h3>
5113
<h3>Excedido o n√∫mero m√°ximo de</h3>
objetos OpenCL
<h3>ERR_OPENCL_SELECTDEVICE</h3>
5114
<h3>Erro ao selecionar o dispositivo</h3>
<h3>OpenCL</h3>
<h3>Trabalhar com bancos de dados</h3>
<h3>ERR_DATABASE_INTERNAL</h3>
5120
<h3>Erro interno no banco de dados</h3>
<h3>ERR_DATABASE_INVALID_HANDLE</h3>
5121
<h3>Identificador de banco de dados</h3>
inv√°lido
<h3>ERR_DATABASE_TOO_MANY_OBJECTS</h3>
5122
<h3>N√∫mero m√°ximo de objetos de</h3>
banco de dados excedido
<h3>ERR_DATABASE_CONNECT</h3>
5123
<h3>Erro ao conectar ao banco de</h3>
dados
<h3>ERR_DATABASE_EXECUTE</h3>
5124
<h3>Erro de execu√ß√£o de consulta</h3>
<h3>ERR_DATABASE_PREPARE</h3>
5125
<h3>Erro ao criar consulta</h3>
<h3>ERR_DATABASE_NO_MORE_DATA</h3>
5126
<h3>N√£o h√° mais dados de leitura</h3>
<h3>ERR_DATABASE_STEP</h3>
5127
<h3>Erro ao passar para o pr√≥ximo</h3>
registro da consulta
<h3>ERR_DATABASE_NOT_READY</h3>
5128
<h3>Os</h3>
dados 
para 
leitura 
dos
resultados da consulta ainda n√£o</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1046
<h3>Constante</h3>
<h3>C√≥digo</h3>
<h3>Descri√ß√£o</h3>
est√£o prontos
<h3>ERR_DATABASE_BIND_PARAMETERS</h3>
5129
<h3>Erro de substitui√ß√£o autom√°tica</h3>
de par√¢metro na consulta SQL
<h3>Trabalhando com WebRequest()</h3>
<h3>ERR_WEBREQUEST_INVALID_ADDRESS</h3>
5200
<h3>URL inv√°lido</h3>
<h3>ERR_WEBREQUEST_CONNECT_FAILED</h3>
5201
<h3>Falha ao conectar com o URL</h3>
especificado
<h3>ERR_WEBREQUEST_TIMEOUT</h3>
5202
<h3>Tempo limite excedido</h3>
<h3>ERR_WEBREQUEST_REQUEST_FAILED</h3>
5203
<h3>Falha na solicita√ß√£o do HTTP</h3>
<h3>Trabalhando com uma rede (soquetes)</h3>
<h3>ERR_NETSOCKET_INVALIDHANDLE</h3>
5270
<h3>Para a fun√ß√£o foi passado um</h3>
identificador de soquete inv√°lido.
<h3>ERR_NETSOCKET_TOO_MANY_OPENED</h3>
5271
<h3>Muitos soquetes abertos (m√°ximo</h3>
128)
<h3>ERR_NETSOCKET_CANNOT_CONNECT</h3>
5272
<h3>Erro ao conectar-se ao</h3>
host
remoto
<h3>ERR_NETSOCKET_IO_ERROR</h3>
5273
<h3>Erro ao enviar/receber dados do</h3>
soquete
<h3>ERR_NETSOCKET_HANDSHAKE_FAILED</h3>
5274
<h3>Erro ao estabelecer uma conex√£o</h3>
segura (TLS Handshake)
<h3>ERR_NETSOCKET_NO_CERTIFICATE</h3>
5275
<h3>N√£o h√° dados sobre o certificado</h3>
que protege a conex√£o.
<h3>S√≠mbolos personalizados</h3>
<h3>ERR_NOT_CUSTOM_SYMBOL</h3>
5300
<h3>Deve ser especificado o s√≠mbolo</h3>
personalizado
<h3>ERR_CUSTOM_SYMBOL_WRONG_NAME</h3>
5301
<h3>Nome de s√≠mbolo personalizado</h3>
incorreto. No nome do s√≠mbolo √©
poss√≠vel utilizar apenas caracteres
latinos sem pontua√ß√£o, espa√ßos e
caracteres 
especiais 
(s√£o
permitidos &quot;.&quot;, &quot;_&quot;, &quot;&amp;&quot; e &quot;#&quot;).
<h3>N√£o √© recomendado usar</h3>
os
caracteres &lt;, &gt;, :, &quot;, /,\, |, ?, *.
<h3>ERR_CUSTOM_SYMBOL_NAME_LONG</h3>
5302
<h3>Nome demasiado longo para o</h3>
s√≠mbolo personalizado. O nome
n√£o pode exceder 32 caracteres
tendo em conta o 0 final</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1047
<h3>Constante</h3>
<h3>C√≥digo</h3>
<h3>Descri√ß√£o</h3>
<h3>ERR_CUSTOM_SYMBOL_PATH_LONG</h3>
5303
<h3>Caminho demasiado longo para o</h3>
s√≠mbolo personalizado. A caminho
n√£o deve exceder 128 caracteres,
tendo em conta &quot;Custom\\&quot;, o
nome do s√≠mbolo, separadores de
grupos e o 0 final
<h3>ERR_CUSTOM_SYMBOL_EXIST</h3>
5304
<h3>J√°</h3>
existe 
um 
car√°ter
personalizado com esse nome
<h3>ERR_CUSTOM_SYMBOL_ERROR</h3>
5305
<h3>Erro ao criar, excluir ou modificar</h3>
o s√≠mbolo personalizado
<h3>ERR_CUSTOM_SYMBOL_SELECTED</h3>
5306
<h3>Tentativa de excluir um s√≠mbolo</h3>
personalizado 
selecionado 
na
<h3>Observa√ß√£o do mercado (Market</h3>
<h3>Watch)</h3>
<h3>ERR_CUSTOM_SYMBOL_PROPERTY_WRONG</h3>
5307
<h3>Propriedade</h3>
de 
s√≠mbolo
personalizado incorreto
<h3>ERR_CUSTOM_SYMBOL_PARAMETER_ERROR</h3>
5308
<h3>Par√¢metro</h3>
errado 
ao 
definir
propriedade 
do 
s√≠mbolo
personalizado
<h3>ERR_CUSTOM_SYMBOL_PARAMETER_LONG</h3>
5309
<h3>Par√¢metro de cadeia muito longo</h3>
ao definir propriedade do s√≠mbolo
personalizado
<h3>ERR_CUSTOM_TICKS_WRONG_ORDER</h3>
5310
<h3>Array de ticks n√£o sequenciada</h3>
por tempo
<h3>Calend√°rio econ√¥mico</h3>
<h3>ERR_CALENDAR_MORE_DATA</h3>
5400
<h3>Tamanho de array insuficiente</h3>
para obter descri√ß√µes de todos os
valores
<h3>ERR_CALENDAR_TIMEOUT</h3>
5401
<h3>Limite de tempo da solicita√ß√£o</h3>
excedido
<h3>ERR_CALENDAR_NO_DATA</h3>
5402
<h3>Pa√≠s n√£o encontrado</h3>
<h3>Working with databases</h3>
<h3>ERR_DATABASE_ERROR</h3>
5601
<h3>Generic error</h3>
<h3>ERR_DATABASE_LOGIC</h3>
5602
<h3>SQLite internal logic error</h3>
<h3>ERR_DATABASE_PERM</h3>
5603
<h3>Access denied</h3>
<h3>ERR_DATABASE_ABORT</h3>
5604
<h3>Callback routine requested abort</h3>
<h3>ERR_DATABASE_BUSY</h3>
5605
<h3>Database file locked</h3>
<h3>ERR_DATABASE_LOCKED</h3>
5606
<h3>Database table locked</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1048
<h3>Constante</h3>
<h3>C√≥digo</h3>
<h3>Descri√ß√£o</h3>
<h3>ERR_DATABASE_NOMEM</h3>
5607
<h3>Insufficient</h3>
memory 
for
completing operation
<h3>ERR_DATABASE_READONLY</h3>
5608
<h3>Attempt to write to readonly</h3>
database
<h3>ERR_DATABASE_INTERRUPT</h3>
5609
<h3>Operation</h3>
terminated 
by
sqlite3_interrupt()
<h3>ERR_DATABASE_IOERR</h3>
5610
<h3>Disk I/O error</h3>
<h3>ERR_DATABASE_CORRUPT</h3>
5611
<h3>Database disk image corrupted</h3>
<h3>ERR_DATABASE_NOTFOUND</h3>
5612
<h3>Unknown</h3>
operation 
code 
in
sqlite3_file_control()
<h3>ERR_DATABASE_FULL</h3>
5613
<h3>Insertion failed because database</h3>
is full
<h3>ERR_DATABASE_CANTOPEN</h3>
5614
<h3>Unable to open the database file</h3>
<h3>ERR_DATABASE_PROTOCOL</h3>
5615
<h3>Database lock protocol error</h3>
<h3>ERR_DATABASE_EMPTY</h3>
5616
<h3>Internal use only</h3>
<h3>ERR_DATABASE_SCHEMA</h3>
5617
<h3>Database schema changed</h3>
<h3>ERR_DATABASE_TOOBIG</h3>
5618
<h3>String or BLOB exceeds size limit</h3>
<h3>ERR_DATABASE_CONSTRAINT</h3>
5619
<h3>Abort due to constraint violation</h3>
<h3>ERR_DATABASE_MISMATCH</h3>
5620
<h3>Data type mismatch</h3>
<h3>ERR_DATABASE_MISUSE</h3>
5621
<h3>Library used incorrectly</h3>
<h3>ERR_DATABASE_NOLFS</h3>
5622
<h3>Uses OS features not supported</h3>
on host
<h3>ERR_DATABASE_AUTH</h3>
5623
<h3>Authorization denied</h3>
<h3>ERR_DATABASE_FORMAT</h3>
5624
<h3>Not used</h3>
<h3>ERR_DATABASE_RANGE</h3>
5625
<h3>Bind parameter error, incorrect</h3>
index
<h3>ERR_DATABASE_NOTADB</h3>
5626
<h3>File opened that is not database</h3>
file
<h3>M√©todos matriciais e vetoriais</h3>
<h3>ERR_MATRIX_INTERNAL</h3>
5700
<h3>Erro interno do subsistema de</h3>
execu√ß√£o de matrizes/vetores
<h3>ERR_MATRIX_NOT_INITIALIZED</h3>
5701
<h3>Matriz/vetor n√£o inicializado</h3>
<h3>ERR_MATRIX_INCONSISTENT</h3>
5702
<h3>Tamanho de matrizes/vetores em</h3>
opera√ß√£o inconsistente</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1049
<h3>Constante</h3>
<h3>C√≥digo</h3>
<h3>Descri√ß√£o</h3>
<h3>ERR_MATRIX_INVALID_SIZE</h3>
5703
<h3>Tamanho</h3>
da 
matriz/vetor
incorreto
<h3>ERR_MATRIX_INVALID_TYPE</h3>
5704
<h3>Tipo de matriz/vetor inv√°lido</h3>
<h3>ERR_MATRIX_FUNC_NOT_ALLOWED</h3>
5705
<h3>Fun√ß√£o n√£o dispon√≠vel para esta</h3>
matriz/vetor
<h3>ERR_MATRIX_CONTAINS_NAN</h3>
5706
<h3>Matriz/vetor cont√©m n√£o-n√∫meros</h3>
(Nan/Inf)
<h3>Modelos ONNX</h3>
<h3>ERR_ONNX_INTERNAL</h3>
5800
<h3>Erro interno do padr√£o ONNX</h3>
<h3>ERR_ONNX_NOT_INITIALIZED</h3>
5801
<h3>Erro</h3>
de 
inicializa√ß√£o 
<h3>ONNX</h3>
<h3>Runtime API</h3>
<h3>ERR_ONNX_NOT_SUPPORTED</h3>
5802
<h3>Propriedade</h3>
ou 
valor 
n√£o
compat√≠vel 
com 
a 
linguagem
<h3>MQL5</h3>
<h3>ERR_ONNX_RUN_FAILED</h3>
5803
<h3>Erro ao iniciar a ONNX runtime</h3>
<h3>API</h3>
<h3>ERR_ONNX_INVALID_PARAMETERS_COUNT</h3>
5804
<h3>N√∫mero inv√°lido de par√¢metros</h3>
passados para OnnxRun
<h3>ERR_ONNX_INVALID_PARAMETER</h3>
5805
<h3>Valor de par√¢metro incorreto</h3>
<h3>ERR_ONNX_INVALID_PARAMETER_TYPE</h3>
5806
<h3>Tipo de par√¢metro incorreto</h3>
<h3>ERR_ONNX_INVALID_PARAMETER_SIZE</h3>
5807
<h3>Tamanho de par√¢metro incorreto</h3>
<h3>ERR_ONNX_WRONG_DIMENSION</h3>
5808
<h3>Dimens√£o do tensor n√£o definida</h3>
ou especificada incorretamente
<h3>ERR_USER_ERROR_FIRST</h3>
65536
<h3>Erros</h3>
definidos 
pelo 
usu√°rio
come√ßam com este c√≥digo
<h3>Veja Tamb√©m</h3>
C√≥digos de Retorno do Servidor de Negocia√ß√£o</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1050
<h3>Constantes de Entrada e Sa√≠da</h3>
<h3>Constantes:</h3>
¬∑ Flags de abertura de arquivo
¬∑ Propriedades de arquivo
¬∑ Posicionamento dentro de um arquivo
¬∑ Uso de code page
¬∑ MessageBox</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1051
<h3>Flags de Abertura de Arquivo</h3>
Valores de flags de abertura de arquivo especificam o modo de acesso do arquivo. Flags s√£o definidos
como se segue:
<h3>Identificador</h3>
<h3>Valor</h3>
<h3>Descri√ß√£o</h3>
<h3>FILE_READ</h3>
1
Arquivo √© aberto para leitura. Flag √© usado em
FileOpen(). Ao abrir um arquivo, a especifica√ß√£o de
FILE_WRITE e/ou FILE_READ √© requerida.
<h3>FILE_WRITE</h3>
2
Arquivo √© aberto para escrita. Flag √© usado em
FileOpen(). Ao abrir um arquivo, a especifica√ß√£o de
FILE_WRITE e/ou FILE_READ √© requerida.
<h3>FILE_BIN</h3>
4
Modo de leitura/escrita bin√°ria (sem convers√£o string
para string). Flag √© usado em FileOpen()
<h3>FILE_CSV</h3>
8
Arquivo CSV (todos seus elementos s√£o convertidos para
strings do tipo apropriado, unicode ou ansi, e separados
por separador). Flag √© usado em FileOpen()
<h3>FILE_TXT</h3>
16
Arquivo de texto simples (semelhando ao arquivo csv,
mas sem levar em conta os separadores). Flag √© usado
em FileOpen()
<h3>FILE_ANSI</h3>
32
Strings de tipo ANSI (s√≠mbolos de um byte). Flag √© usado
em FileOpen()
<h3>FILE_UNICODE</h3>
64
Strings de tipo UNICODE (s√≠mbolos de dois bytes). Flag √©
usado em FileOpen()
<h3>FILE_SHARE_READ</h3>
128
Acesso compartilhado para leitura a partir de v√°rios
programas. Flag √© usado em FileOpen(), mas ele n√£o
substitui a necessidade de indicar o flag FILE_WRITE
e/ou FILE_READ ao abrir um arquivo.
<h3>FILE_SHARE_WRITE</h3>
256
Acesso compartilhado para escrita a partir de v√°rios
programas. Flag √© usado em FileOpen(), mas ele n√£o
substitui a necessidade de indicar o flag FILE_WRITE
e/ou FILE_READ ao abrir um arquivo.
<h3>FILE_REWRITE</h3>
512
Possibilidade de reescrever o arquivo usando as fun√ß√µes
FileCopy() e FileMove(). O arquivo deve existir ou deve
estar aberto para escrita, de outra forma o arquivo n√£o
ser√° aberto.
<h3>FILE_COMMON</h3>
4096
O caminho do arquivo na pasta comum de todos os
terminais cliente \Terminal\Common\Files. Flag √© usado
em fun√ß√µes FileOpen(), FileCopy(), FileMove() e em
FileIsExist().
Um ou v√°rios flags podem ser especificado ao abrir um arquivo. Esta √© uma combina√ß√£o de flags. A
combina√ß√£o de flags √© escrita usando o sinal de l√≥gica OR (|), que √© posicionado entre os flags</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1052
enumerados. Por exemplo, para abrir um arquivo em formato CSV para leitura e escrita ao mesmo
tempo, especifique a combina√ß√£o FILE_READ|FILE_WRITE|FILE_CSV.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
   int filehandle=FileOpen(filename,FILE_READ|FILE_WRITE|FILE_CSV);
</code></pre>
<p>
Existem algumas caracter√≠sticas espec√≠ficas de funcionamento ao se especificar flags de leitura e
escrita:
¬∑ Se FILE_READ √© especificado, uma tentativa √© feita para abrir um arquivo existente. Caso o arquivo
n√£o exista, a abertura do arquivo falha, um novo arquivo n√£o √© criado.
¬∑ FILE_READ|FILE_WRITE ‚Äì um novo arquivo √© criado caso o arquivo com o nome especificado n√£o
exista.
¬∑ FILE_WRITE ‚Äì o arquivo √© criado novamente com tamanho zero.
Ao abrir um arquivo, a especifica√ß√£o de FILE_WRITE e/ou FILE_READ √© requerida.
Flags que definem o tipo de leitura de um arquivo aberto, possuem prioridade. O flag de mais alta
prioridade √© FILE_CSV, da√≠ vem FILE_BIN, e FILE_TXT √© o de mais baixa prioridade. Assim, se v√°rios
flags s√£o especificados ao mesmo tempo (FILE_TXT|FILE_CSV ou FILE_TXT|FILE_BIN ou FILE_BIN|
FILE_CSV), o flag com a mais alta prioridade ser√° usado.
Flags que definem o tipo de codifica√ß√£o tamb√©m t√™m prioridade. FILE_UNICODE √© de maior prioridade
que FILE_ANSI. Assim, se voc√™ especificar a combina√ß√£o FILE_UNICODE|FILE_ANSI, o flag
FILE_UNICODE ser√° usado.
Se nem FILE_UNICODE ou FILE_ANSI forem indicados, FILE_UNICODE fica impl√≠cito. Se nem FILE_CSV,
ou FILE_BIN, ou FILE_TXT forem especificados, FILE_CSV fica impl√≠cito.
Se um arquivo √© aberto para leitura como um arquivo de texto (FILE_TXT ou FILE_CSV), e no in√≠cio do
arquivo uma indica√ß√£o de dois-bytes 0xff,0xfe √© encontrada, o flag de codifica√ß√£o ser√° FILE_UNICODE,
mesmo se FILE_ANSI for especificado.
<h3>Tamb√©m Veja</h3>
<h3>Fun√ß√µes de Arquivo</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1053
<h3>Propriedades de Arquivo</h3>
A fun√ß√£o FileGetInteger() √© usada para obter propriedades de arquivo. O identificador da propriedade
requerida proveniente da enumera√ß√£o ENUM_FILE_PROPERTY_INTEGER √© passado para ela durante a
chamada.
<h3>ENUM_FILE_PROPERTY_INTEGER</h3>
<h3>ID</h3>
<h3>Descri√ß√£o</h3>
<h3>FILE_EXISTS</h3>
<h3>Verifica a exist√™ncia</h3>
<h3>FILE_CREATE_DATE</h3>
<h3>Data de cria√ß√£o</h3>
<h3>FILE_MODIFY_DATE</h3>
<h3>Data da √∫ltima modifica√ß√£o</h3>
<h3>FILE_ACCESS_DATE</h3>
<h3>Data do √∫ltimo acesso ao arquivo</h3>
<h3>FILE_SIZE</h3>
<h3>Tamanho de arquivo em bytes</h3>
<h3>FILE_POSITION</h3>
<h3>Posi√ß√£o de um ponteiro no arquivo</h3>
<h3>FILE_END</h3>
Obt√©m o sinal de t√©rmino de arquivo
<h3>FILE_LINE_END</h3>
Obt√©m o sinal de termino de linha
<h3>FILE_IS_COMMON</h3>
O arquivo est√° aberto em uma pasta compartilhada por todos os
terminais (veja FILE_COMMON)
<h3>FILE_IS_TEXT</h3>
O arquivo est√° aberto como um arquivo de texto (veja FILE_TXT)
<h3>FILE_IS_BINARY</h3>
O arquivo est√° aberto como um arquivo bin√°rio (veja FILE_BIN)
<h3>FILE_IS_CSV</h3>
O arquivo est√° aberto como CSV (veja FILE_CSV)
<h3>FILE_IS_ANSI</h3>
O arquivo est√° aberto como ANSI (veja FILE_ANSI)
<h3>FILE_IS_READABLE</h3>
O arquivo aberto pode ser lido (veja FILE_READ)
<h3>FILE_IS_WRITABLE</h3>
O arquivo aberto pode ser escrito (veja FILE_WRITE)
A fun√ß√£o FileGetInteger() tem duas op√ß√µes diferentes de chamada. Na primeira op√ß√£o, para obter
propriedades de um arquivo, seu handle √© especificado, que √© obtido na abertura do arquivo usando a
fun√ß√£o FileOpen(). Esta op√ß√£o permite obter todas as propriedades de um arquivo.
A segunda op√ß√£o da fun√ß√£o FileGetInteger() retorna valores de propriedades de arquivo atrav√©s do
nome do arquivo. Usando esta op√ß√£o, somente as seguintes propriedades gerais podem ser obtidas:
¬∑ FILE_EXISTS ‚Äì exist√™ncia de um arquivo com o nome especificado
¬∑ FILE_CREATE_DATE ‚Äì data de cria√ß√£o do arquivo com o nome especificado
¬∑ FILE_MODIFY_DATE ‚Äì data de modifica√ß√£o do arquivo com o nome especificado
¬∑ FILE_ACCESS_DATE - data do √∫ltimo acesso ao arquivo com o nome especificado
¬∑ FILE_SIZE ‚Äì tamanho do arquivo com o nome especificado
Ao tentar obter propriedades outras daquelas especificadas acima, a segunda op√ß√£o de chamada de
FileGetInteger() retornar√° um erro.</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1054
<h3>Posicionamento Dentro de um Arquivo</h3>
A maioria das fun√ß√µes de arquivo √© associada com opera√ß√µes leitura/escrita de dados. Ao mesmo
tempo, usando a fun√ß√£o FileSeek() voc√™ pode especificar a posi√ß√£o de um ponteiro de arquivo para
uma posi√ß√£o dentro do arquivo, a partir da qual a pr√≥xima opera√ß√£o de leitura ou escrita ser√°
realizada. A enumera√ß√£o ENUM_FILE_POSITION cont√©m posi√ß√µes v√°lidas de ponteiro, com a qual voc√™
pode especificar um deslocamento em bytes para a pr√≥xima opera√ß√£o.
<h3>ENUM_FILE_POSITION</h3>
<h3>Identificador</h3>
<h3>Descri√ß√£o</h3>
<h3>SEEK_SET</h3>
<h3>In√≠cio de arquivo</h3>
<h3>SEEK_CUR</h3>
Posi√ß√£o corrente de um ponteiro de arquivo
<h3>SEEK_END</h3>
<h3>Fim de arquivo</h3>
<h3>Tamb√©m Veja</h3>
<h3>FileIsEnding, FileIsLineEnding</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1055
Usando um C√≥digo de P√°gina (Codepage) em Opera√ß√µes de
<h3>Convers√£o de String</h3>
Ao converter vari√°veis string em arrays de tipo char e vice-versa, a codifica√ß√£o que por default
correspodente ao ANSI corrente do sistema operacional Windows (CP_ACP) √© usada em MQL5. Se voc√™
quiser especificar um tipo diferente de codifica√ß√£o, isso pode ser definido como par√¢metro adicional
para as fun√ß√µes CharArrayToString(), StringToCharArray() e FileOpen().
A tabela lista as constantes internas de alguns dos mais populares c√≥digos de p√°gina. C√≥digos de
p√°gina n√£o mencionados podem ser especificados atrav√©s de um c√≥digo correspondente √† p√°gina.
Constantes Internas de C√≥digo de P√°ginas (Codepages)
<h3>Constante</h3>
<h3>Valor</h3>
<h3>Descri√ß√£o</h3>
<h3>CP_ACP</h3>
0
O c√≥digo de p√°gina ANSI do Windows corrente.
<h3>CP_OEMCP</h3>
1
O c√≥digo de p√°gina do sistema OEM corrente.
<h3>CP_MACCP</h3>
2
O c√≥digo de p√°gina do sistema Macintosh corrente.
Note: Este valor √© usado principalmente em c√≥digos de
programa criados antigamente e est√° sem uso
atualmente, j√° que computadores Macintosh modernos
usando Unicode para codifica√ß√£o.
<h3>CP_THREAD_ACP</h3>
3
O c√≥digo de p√°gina ANSI do Windows para o thread
corrente.
<h3>CP_SYMBOL</h3>
42
<h3>C√≥digo de p√°gina de s√≠mbolo</h3>
<h3>CP_UTF7</h3>
65000
C√≥digo de p√°gina UTF-7.
<h3>CP_UTF8</h3>
65001
C√≥digo de p√°gina UTF-8.
<h3>Tamb√©m Veja</h3>
<h3>Propriedades do Terminal Cliente</h3></p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1056
<h3>Constantes da Janela de Di√°logo MessageBox</h3>
Esta se√ß√£o cont√©m c√≥digos de retorno da fun√ß√£o MessageBox(). Se um janela de mensagem tem um
bot√£o Cancel, a fun√ß√£o retorna IDCANCEL no caso da tecla ESC ou o bot√£o Cancel serem pressionados.
Caso n√£o exista nenhum bot√£o Cancel na janela de mensagem, pressionar o ESC n√£o produz nenhum
efeito.
<h3>Constante</h3>
<h3>Valor</h3>
<h3>Descri√ß√£o</h3>
<h3>IDOK</h3>
1
<h3>Bot√£o &quot;OK&quot; foi pressionado</h3>
<h3>IDCANCEL</h3>
2
<h3>Bot√£o &quot;Cancel&quot; foi pressionado</h3>
<h3>IDABORT</h3>
3
<h3>Bot√£o &quot;Abort&quot; foi pressionado</h3>
<h3>IDRETRY</h3>
4
<h3>Bot√£o &quot;Retry&quot; foi pressionado</h3>
<h3>IDIGNORE</h3>
5
<h3>Bot√£o &quot;Ignore&quot; foi pressionado</h3>
<h3>IDYES</h3>
6
<h3>Bot√£o &quot;Yes&quot; foi pressionado</h3>
<h3>IDNO</h3>
7
<h3>Bot√£o &quot;No&quot; foi pressionado</h3>
<h3>IDTRYAGAIN</h3>
10
<h3>Bot√£o &quot;Try Again&quot; foi pressionado</h3>
<h3>IDCONTINUE</h3>
11
<h3>Bot√£o &quot;Continue&quot; foi pressionado</h3>
Os principais flags da fun√ß√£o MessageBox() definem o conte√∫do e comportamento da janela de
di√°logo. Este valor pode ser uma combina√ß√£o dos seguintes grupos de flag:
<h3>Constante</h3>
<h3>Valor</h3>
<h3>Descri√ß√£o</h3>
<h3>MB_OK</h3>
0x00000000
<h3>Janela de mensagem cont√©m somente um</h3>
bot√£o: OK. Default
<h3>MB_OKCANCEL</h3>
0x00000001
Janela de mensagem cont√©m dois bot√µes: OK e
<h3>Cancel</h3>
<h3>MB_ABORTRETRYIGNORE</h3>
0x00000002
<h3>Janela de mensagem cont√©m tr√™s bot√µes:</h3>
<h3>Abort, Retry e Ignore</h3>
<h3>MB_YESNOCANCEL</h3>
0x00000003
Janela de mensagem cont√©m tr√™s bot√µes: Yes,
<h3>No e Cancel</h3>
<h3>MB_YESNO</h3>
0x00000004
Janela de mensagem cont√©m dois bot√µes: Yes e
<h3>No</h3>
<h3>MB_RETRYCANCEL</h3>
0x00000005
Janela de mensagem cont√©m dois bot√µes: Retry
e Cancel
<h3>MB_CANCELTRYCONTINUE</h3>
0x00000006
<h3>Janela de mensagem cont√©m tr√™s bot√µes:</h3>
<h3>Cancel, Try Again, Continue</h3>
Para exibir um √≠cone na janela de mensagem √© necess√°rio especificar flags adicionais:</p>
<p><h3>Constantes, Enumeradores e Estruturas</h3>
¬© 2000-2025, MetaQuotes Ltd.
1057
<h3>Constante</h3>
<h3>Valor</h3>
<h3>Descri√ß√£o</h3>
<h3>MB_ICONSTOP,</h3>
<h3>MB_ICONERROR,</h3>
<h3>MB_ICONHAND</h3>
0x00000010
<h3>O √≠cone de sinal STOP</h3>
<h3>MB_ICONQUESTION</h3>
0x00000020
<h3>O √≠cone de sinal de interroga√ß√£o</h3>
<h3>MB_ICONEXCLAMATION,</h3>
<h3>MB_ICONWARNING</h3>
0x00000030
<h3>O √≠cone de sinal de exclama√ß√£o/aviso</h3>
<h3>MB_ICONINFORMATION,</h3>
<h3>MB_ICONASTERISK</h3>
0x00000040
<h3>O sinal i cercado</h3>
Os bot√µes default s√£o definidos atrav√©s dos seguintes flags:
<h3>Constante</h3>
<h3>Valor</h3>
<h3>Descri√ß√£o</h3>
<h3>MB_DEFBUTTON1</h3>
0x00000000
O primeiro bot√£o MB_DEFBUTTON1 - √© o
default, se os outros bot√µes MB_DEFBUTTON2,
<h3>MB_DEFBUTTON3, ou MB_DEFBUTTON4 n√£o</h3>
forem especificados
<h3>MB_DEFBUTTON2</h3>
0x00000100
<h3>O segundo bot√£o √© o default</h3>
<h3>MB_DEFBUTTON3</h3>
0x00000200
<h3>O terceiro bot√£o √© o default</h3>
<h3>MB_DEFBUTTON4</h3>
0x00000300
<h3>O quarto bot√£o √© o default</h3>
</p>
        </article>
        
        <footer>
            <p>Documenta√ß√£o MQL5 - Fonte: MetaQuotes Ltd.</p>
        </footer>
    </main>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        hljs.highlightAll();
        
        function toggleSidebar() {
            document.querySelector('.sidebar').classList.toggle('open');
        }
        
        function filterNav() {
            const filter = document.getElementById('search').value.toLowerCase();
            const items = document.querySelectorAll('.nav-list li');
            items.forEach(item => {
                const text = item.textContent.toLowerCase();
                item.style.display = text.includes(filter) ? '' : 'none';
            });
        }
    </script>
</body>
</html>