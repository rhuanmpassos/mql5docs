<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calend√°rio econ√¥mico - MQL5 Docs</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
</head>
<body>
    <nav class="sidebar">
        <div class="logo">
            <h1>MQL5 Docs</h1>
            <p>Documenta√ß√£o Completa</p>
        </div>
        <div class="search-box">
            <input type="text" id="search" placeholder="Buscar..." onkeyup="filterNav()">
        </div>
        <ul class="nav-list" id="nav-list">
            <li class=""><a href="index.html">üìö √çndice</a></li>
            <li class=""><a href="introducao.html">Introducao</a></li>
<li class=""><a href="refer√™ncia_mql5.html">Refer√™ncia MQL5</a></li>
<li class=""><a href="elementos_b√°sicos_da_linguagem.html">Elementos B√°sicos da Linguagem</a></li>
<li class=""><a href="constantes,_enumeradores_e_estruturas.html">Constantes, Enumeradores e Estruturas</a></li>
<li class=""><a href="programas_mql5.html">Programas MQL5</a></li>
<li class=""><a href="vari√°veis_predefinidas.html">Vari√°veis Predefinidas</a></li>
<li class=""><a href="fun√ß√µes_comuns.html">Fun√ß√µes Comuns</a></li>
<li class=""><a href="fun√ß√µes_para_array.html">Fun√ß√µes para Array</a></li>
<li class=""><a href="m√©todos_matriciais_e_vetoriais.html">M√©todos matriciais e vetoriais</a></li>
<li class=""><a href="fun√ß√µes_de_convers√£o.html">Fun√ß√µes de Convers√£o</a></li>
<li class=""><a href="fun√ß√µes_matem√°ticas.html">Fun√ß√µes Matem√°ticas</a></li>
<li class=""><a href="fun√ß√µes_de_string.html">Fun√ß√µes de String</a></li>
<li class=""><a href="data_e_hora.html">Data e Hora</a></li>
<li class=""><a href="informa√ß√µes_de_conta.html">Informa√ß√µes de Conta</a></li>
<li class=""><a href="verificando_estado.html">Verificando Estado</a></li>
<li class=""><a href="manipula√ß√£o_de_eventos.html">Manipula√ß√£o de eventos</a></li>
<li class=""><a href="informa√ß√µes_de_mercado.html">Informa√ß√µes de Mercado</a></li>
<li class="active"><a href="calend√°rio_econ√¥mico.html">Calend√°rio econ√¥mico</a></li>
<li class=""><a href="s√©ries_temporais_e_acesso_a_indicadores.html">S√©ries Temporais e Acesso a Indicadores</a></li>
<li class=""><a href="s√≠mbolos_personalizados.html">S√≠mbolos personalizados</a></li>
<li class=""><a href="opera√ß√µes_de_gr√°ficos.html">Opera√ß√µes de Gr√°ficos</a></li>
<li class=""><a href="fun√ß√µes_de_negocia√ß√£o.html">Fun√ß√µes de Negocia√ß√£o</a></li>
<li class=""><a href="gerenciamento_de_sinais.html">Gerenciamento de sinais</a></li>
<li class=""><a href="fun√ß√µes_de_rede.html">Fun√ß√µes de rede</a></li>
<li class=""><a href="vari√°veis_globais_do_terminal.html">Vari√°veis Globais do Terminal</a></li>
<li class=""><a href="fun√ß√µes_de_arquivo.html">Fun√ß√µes de Arquivo</a></li>
<li class=""><a href="indicadores_customizados.html">Indicadores Customizados</a></li>
<li class=""><a href="fun√ß√µes_de_objeto.html">Fun√ß√µes de Objeto</a></li>
<li class=""><a href="indicadores_t√©cnicos.html">Indicadores T√©cnicos</a></li>
<li class=""><a href="trabalhando_com_resultados_de_otimiza√ß√£o.html">Trabalhando com Resultados de Otimiza√ß√£o</a></li>
<li class=""><a href="trabalhando_com_eventos.html">Trabalhando com Eventos</a></li>
<li class=""><a href="trabalhando_com_opencl.html">Trabalhando com OpenCL</a></li>
<li class=""><a href="trabalhar_com_bancos_de_dados.html">Trabalhar com bancos de dados</a></li>
<li class=""><a href="trabalho_com_directx.html">Trabalho com DirectX</a></li>
<li class=""><a href="metatrader_para_python.html">MetaTrader para Python</a></li>
<li class=""><a href="modelos_onnx.html">Modelos ONNX</a></li>
<li class=""><a href="biblioteca_padr√£o.html">Biblioteca Padr√£o</a></li>
<li class=""><a href="migrando_do_mql4.html">Migrando do MQL4</a></li>
<li class=""><a href="lista_de_fun√ß√µes_mql5.html">Lista de Fun√ß√µes MQL5</a></li>
<li class=""><a href="lista_de_constantes_mql5.html">Lista de Constantes MQL5</a></li>

        </ul>
    </nav>
    
    <main class="content">
        <header>
            <button class="menu-toggle" onclick="toggleSidebar()">‚ò∞</button>
            <h1>Calend√°rio econ√¥mico</h1>
        </header>
        
        <article>
            <p><h3>Calend√°rio econ√¥mico</h3>
¬© 2000-2025, MetaQuotes Ltd.
2005
<h3>Fun√ß√µes do Calend√°rio Econ√¥mico</h3>
Esta se√ß√£o descreve as fun√ß√µes para trabalhar com o Calend√°rio econ√¥mico que est√° dispon√≠vel
diretamente na plataforma MetaTrader. O calend√°rio econ√¥mico √© uma enciclop√©dia pronta com
descri√ß√£o, data de lan√ßamento e grau de import√¢ncia de indicadores macroecon√¥micos. Os valores
reais dos indicadores macroecon√¥micos entram na plataforma MetaTrader imediatamente no momento
da publica√ß√£o e s√£o exibidos no gr√°fico como tags, permitindo monitorar visualmente os indicadores
necess√°rios por pa√≠ses, por moedas e por import√¢ncia. 
Todas as fun√ß√µes para trabalhar com o Calend√°rio Econ√¥mico usam o hor√°rio do servidor de
negocia√ß√£o (TimeTradeServer). Isso significa que o tempo na estrutura MqlCalendarValue e os
par√¢metros de tempo de entrada nas fun√ß√µes CalendarValueHistoryByEvent/CalendarValueHistory s√£o
definidos no fuso hor√°rio do servidor de negocia√ß√£o e n√£o no hor√°rio local do usu√°rio. 
As fun√ß√µes do calend√°rio econ√¥mico permitem analisar automaticamente os eventos recebidos de
acordo com crit√©rios de import√¢ncia individuais - pa√≠ses/moedas.
<h3>Fun√ß√£o</h3>
<h3>A√ß√£o</h3>
<h3>CalendarCountryById</h3>
Obt√©m uma descri√ß√£o do pa√≠s por seu ID
<h3>CalendarEventById</h3>
Obt√©m a descri√ß√£o do evento por seu ID
<h3>CalendarValueById</h3>
Obt√©m uma descri√ß√£o do valor do evento por seu ID
<h3>CalendarCountries</h3>
Obt√©m um array de descri√ß√µes dos pa√≠ses dispon√≠veis no
calend√°rio.
<h3>CalendarEventByCountry</h3>
Obt√©m um array de descri√ß√µes de todos os eventos dispon√≠veis no
Calend√°rio, segundo o c√≥digo do pa√≠s especificado
<h3>CalendarEventByCurrency</h3>
Obt√©m um array de descri√ß√µes de todos os eventos dispon√≠veis no
calend√°rio, de acordo com a moeda especificada
<h3>CalendarValueHistoryByEvent</h3>
Obt√©m um array de valores de todos os eventos no intervalo de
tempo especificado, segundo o ID do evento
<h3>CalendarValueHistory</h3>
Obt√©m uma matriz de valores de todos os eventos num
determinado intervalo de tempo com um filtro por pa√≠s e/ou
moeda
<h3>CalendarValueLastByEvent</h3>
Obt√©m um array de valores do eventos por seu ID desde o
momento em que criado do banco de dados do Calend√°rio com o
change_id definido
<h3>CalendarValueLast</h3>
Obt√©m um array de valores de todos os eventos com filtro por pa√≠s
e/ou moeda desde o momento em que criado do banco de dados
do Calend√°rio com o change_id definido</p>
<p><h3>Calend√°rio econ√¥mico</h3>
¬© 2000-2025, MetaQuotes Ltd.
2006
<h3>CalendarCountryById</h3>
Obt√©m a descri√ß√£o do pa√≠s por seu ID.
</p>
<pre><code class="language-mql5">
bool¬† CalendarCountryById(
   const long¬†          country_id,¬†    // identificador do pa√≠s
   MqlCalendarCountry&amp; ¬†country         // vari√°vel para obter a descri√ß√£o do pa√≠s
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
country_id
[in]  ID do pa√≠s segundo o padr√£o ISO 3166-1.
country
[out]  Vari√°vel do tipo MqlCalendarCountry para obter uma descri√ß√£o do pa√≠s.
<h3>Valor retornado</h3>
Retorna true em caso de sucesso, caso contr√°rio, false. Para obter informa√ß√µes de erro, chame a
fun√ß√£o GetLastError(). Poss√≠veis erros:
¬∑ 4001 ‚Äì ERR_INTERNAL_ERROR  (erro geral de tempo de execu√ß√£o),
¬∑ 5402 ‚Äì ERR_CALENDAR_NO_DATA (pa√≠s n√£o encontrado),
¬∑ 5401 ‚Äì ERR_CALENDAR_TIMEOUT (tempo limite de solicita√ß√£o excedido),
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Script program start function                                    |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- obtenha a lista de pa√≠ses do Calend√°rio Econ√¥mico
   MqlCalendarCountry countries[];
   int count=CalendarCountries(countries);
//--- verifique o resultado
   if(count==0)
      PrintFormat(&quot;CalendarCountries() returned 0! Error %d&quot;,GetLastError());
//--- se voc√™ tiver dois ou mais pa√≠ses
   if(count&gt;=2)
     {
      MqlCalendarCountry country;
      //--- agora obtenha a descri√ß√£o do pa√≠s pelo seu identificador
      if(CalendarCountryById(countries[1].id, country))
        {
         //--- prepare a descri√ß√£o do pa√≠s
         string descr=&quot;id = &quot;+IntegerToString(country.id)+&quot;\n&quot;;
         descr+=(&quot;name = &quot; + country.name+&quot;\n&quot;);
         descr+=(&quot;code = &quot; + country.code+&quot;\n&quot;);
         descr+=(&quot;currency = &quot; + country.currency+&quot;\n&quot;);
         descr+=(&quot;currency_symbol = &quot; + country.currency_symbol+&quot;\n&quot;);</p>
<p></code></pre>
<p>
<h3>Calend√°rio econ√¥mico</h3>
¬© 2000-2025, MetaQuotes Ltd.
2007
</p>
<pre><code class="language-mql5">
         descr+=(&quot;url_name = &quot; + country.url_name);         
         //--- imprima a descri√ß√£o do pa√≠s
         Print(descr);
        }
      else
         Print(&quot;CalendarCountryById() failed. Error &quot;,GetLastError());
     }
//---
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
/*
</code></pre>
<p>
<h3>Resultado:</h3>
</p>
<pre><code class="language-mql5">
   id = 999
   name = European Union
   code = EU
   currency = EUR
   currency_symbol = ‚Ç¨
   url_name = european-union
</code></pre>
<p>
*/
<h3>Veja tamb√©m</h3>
<h3>CalendarCountries, CalendarEventByCountry</h3></p>
<p><h3>Calend√°rio econ√¥mico</h3>
¬© 2000-2025, MetaQuotes Ltd.
2008
<h3>CalendarEventById</h3>
Obt√©m uma descri√ß√£o do evento por seu ID.
</p>
<pre><code class="language-mql5">
bool¬† CalendarEventById(
   ulong¬†               event_id,¬†    // ID do evento
   MqlCalendarEvent&amp;   ¬†event         // variable para obter a descri√ß√£o do evento
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
event_id
[in]  ID do evento.
event
[out]  Vari√°vel de tipo MqlCalendarEvent para obter uma descri√ß√£o do evento.
<h3>Valor retornado</h3>
Retorna true em caso de sucesso, caso contr√°rio, false. Para obter informa√ß√µes de erro, chame a
fun√ß√£o GetLastError(). Poss√≠veis erros:
¬∑ 4001 ‚Äì ERR_INTERNAL_ERROR  (erro geral de tempo de execu√ß√£o),
¬∑ 5402 ‚Äì ERR_CALENDAR_NO_DATA (pa√≠s n√£o encontrado),
¬∑ 5401 ‚Äì ERR_CALENDAR_TIMEOUT (tempo limite de solicita√ß√£o excedido),
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Script program start function                                    |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- c√≥digo do pa√≠s para a Alemanha de acordo com a ISO 3166-1 Alpha-2
   string germany_code=&quot;DE&quot;;
//--- obtenha os eventos para a Alemanha
   MqlCalendarEvent events[];
   int events_count=CalendarEventByCountry(germany_code,events);
//--- imprima os eventos para a Alemanha no Di√°rio
   if(events_count&gt;0)
     {
      PrintFormat(&quot;Eventos para a Alemanha: %d&quot;,events_count);
      ArrayPrint(events);
     }
   else
     {
      PrintFormat(&quot;Falha ao obter eventos para o c√≥digo do pa√≠s %s, erro %d&quot;,
                  germany_code,GetLastError());
      //--- conclus√£o antecipada do script
      return;
     }
//--- obtenha a descri√ß√£o do √∫ltimo evento do array events[]</p>
<p></code></pre>
<p>
<h3>Calend√°rio econ√¥mico</h3>
¬© 2000-2025, MetaQuotes Ltd.
2009
</p>
<pre><code class="language-mql5">
   MqlCalendarEvent event;
   ulong event_id=events[events_count-1].id;
   if(CalendarEventById(event_id,event))
     {
      MqlCalendarCountry country; 
      CalendarCountryById(event.country_id,country);
      PrintFormat(&quot;Obtida a descri√ß√£o do evento com event_id=%d&quot;,event_id);
      PrintFormat(&quot;Pa√≠s: %s (c√≥digo do pa√≠s= %d)&quot;,country.name,event.country_id);
      PrintFormat(&quot;Nome do evento: %s&quot;,event.name);
      PrintFormat(&quot;C√≥digo do evento: %s&quot;,event.event_code);
      PrintFormat(&quot;Import√¢ncia do evento: %s&quot;,EnumToString((ENUM_CALENDAR_EVENT_IMPORT
      PrintFormat(&quot;Tipo de evento: %s&quot;,EnumToString((ENUM_CALENDAR_EVENT_TYPE)event.ty
      PrintFormat(&quot;Setor do evento: %s&quot;,EnumToString((ENUM_CALENDAR_EVENT_SECTOR)event
      PrintFormat(&quot;Frequ√™ncia do evento: %s&quot;,EnumToString((ENUM_CALENDAR_EVENT_FREQUEN
      PrintFormat(&quot;Modo de sa√≠da do evento: %s&quot;,EnumToString((ENUM_CALENDAR_EVENT_TIME
      PrintFormat(&quot;Unidade de medida do evento: %s&quot;,EnumToString((ENUM_CALENDAR_EVENT_
      PrintFormat(&quot;N√∫mero de casas decimais: %d&quot;,event.digits);
      PrintFormat(&quot;Multiplicador de valor: %s&quot;,EnumToString((ENUM_CALENDAR_EVENT_MULTI
      PrintFormat(&quot;URL da fonte: %s&quot;,event.source_url);
     }
   else
      PrintFormat(&quot;Falha ao obter a descri√ß√£o do evento para event_d=%s, erro %d&quot;,
                  event_id,GetLastError());
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
/*
</code></pre>
<p>
<h3>Resultado:</h3>
<h3>Eventos para a Alemanha: 50</h3>
</p>
<pre><code class="language-mql5">
             [id] [type] [sector] [frequency] [time_mode] [country_id] [unit] [importa
   [ 0] 276010001      1        6           2           0          276      1         
   [ 1] 276010002      1        6           2           0          276      1         
   [ 2] 276010003      1        4           2           0          276      1         
   [ 3] 276010004      1        4           2           0          276      1         
   ....
   [47] 276500001      1        8           2           0          276      0         
   [48] 276500002      1        8           2           0          276      0         
   [49] 276500003      1        8           2           0          276      0         
</code></pre>
<p>
<h3>Descri√ß√µes de evento recebidas com event_id=276500003</h3>
¬† Pa√≠s: Germany (c√≥digo do pa√≠s = 276)
<h3>Nome do evento: Markit Composite PMI</h3>
<h3>C√≥digo do evento: markit-composite-pmi</h3>
</p>
<pre><code class="language-mql5">
   Import√¢ncia do evento: CALENDAR_IMPORTANCE_MODERATE
   Tipo de evento: CALENDAR_TYPE_INDICATOR
   Setor do evento: CALENDAR_SECTOR_BUSINESS
   Frequ√™ncia do evento: CALENDAR_FREQUENCY_MONTH
   Modo de sa√≠da do evento: CALENDAR_TIMEMODE_DATETIME
   Unidade de medida do evento: CALENDAR_UNIT_NONE
</code></pre>
<p>
<h3>N√∫mero de casas decimais: 1</h3>
</p>
<pre><code class="language-mql5">
   Multiplicador de valor: CALENDAR_MULTIPLIER_NONE
   URL da fonte: https://www.markiteconomics.com</p>
<p></code></pre>
<p>
<h3>Calend√°rio econ√¥mico</h3>
¬© 2000-2025, MetaQuotes Ltd.
2010
*/
<h3>Veja tamb√©m</h3>
CalendarEventByCountry, CalendarEventByCurrency, CalendarValueById</p>
<p><h3>Calend√°rio econ√¥mico</h3>
¬© 2000-2025, MetaQuotes Ltd.
2011
<h3>CalendarValueById</h3>
Obt√©m uma descri√ß√£o do valor do evento por seu ID.
</p>
<pre><code class="language-mql5">
bool¬† CalendarValueById(
   ulong¬†               value_id,¬†    // ID do valor do evento 
   MqlCalendarValue&amp;   ¬†value         // vari√°vel para obter o valor do evento
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
value_id
[in]  Identificador do valor do evento.
value
[out]  Vari√°vel de tipo MqlCalendarValue para obter o valor do evento. Veja um exemplo de
processamento de eventos de calend√°rio. 
<h3>Valor retornado</h3>
Retorna true em caso de sucesso, caso contr√°rio, false. Para obter informa√ß√µes de erro, chame a
fun√ß√£o GetLastError(). Poss√≠veis erros:
¬∑ 4001 ‚Äì ERR_INTERNAL_ERROR  (erro geral de tempo de execu√ß√£o),
¬∑ 5402 ‚Äì ERR_CALENDAR_NO_DATA (pa√≠s n√£o encontrado),
¬∑ 5401 ‚Äì ERR_CALENDAR_TIMEOUT (tempo limite de solicita√ß√£o excedido)
<h3>Observa√ß√£o</h3>
Todas as fun√ß√µes para trabalhar com o Calend√°rio Econ√¥mico usam o hor√°rio do servidor de
negocia√ß√£o (TimeTradeServer). Isso significa que o tempo na estrutura MqlCalendarValue e os
par√¢metros de tempo de entrada nas fun√ß√µes CalendarValueHistoryByEvent/CalendarValueHistory
s√£o definidos no fuso hor√°rio do servidor de negocia√ß√£o e n√£o no hor√°rio local do usu√°rio.
A estrutura MqlCalendarValue disponibiliza m√©todo para obter e verificar valores a partir dos campos
actual_value, forecast_value, prev_value e revised_prev_value. Se o valor do campo n√£o estiver
definido, ele armazenar√° o valor LONG_MIN (-9223372036854775808). 
Deve-se ter em mente que os valores nestes campos s√£o armazenados multiplicados por um fator de
um milh√£o. Isso significa que quando as fun√ß√µes CalendarValueById, CalendarValueHistoryByEvent,
<h3>CalendarValueHistory, CalendarValueLastByEvent e</h3>
<h3>CalendarValueLast recebem</h3>
valores 
em
MqlCalendarValue, √© necess√°rio verificar se os valores LONG_MIN desses campos s√£o iguais; e se no
campo estiver definido o valor, para obter o valor deve-se dividir o valor do campo por 1000 000
(um milh√£o). Outra maneira de obter valores √© verificar e obter valores por fun√ß√µes da pr√≥pria
estrutura MqlCalendarValue.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Script program start function                                    |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- c√≥digo do pa√≠s para o Jap√£o de acordo com a ISO 3166-1 Alpha-2</p>
<p></code></pre>
<p>
<h3>Calend√°rio econ√¥mico</h3>
¬© 2000-2025, MetaQuotes Ltd.
2012
</p>
<pre><code class="language-mql5">
   string japan_code=&quot;JP&quot;;
//--- defina os limites do intervalo de onde s√£o tomados os eventos
   datetime date_from=D&#x27;01.01.2018&#x27;;  // defina todos os eventos de 2018
   datetime date_to=0;                // 0 indica que todos os eventos s√£o conhecidos 
//--- obtenha uma matriz de valores de eventos para o Jap√£o
   MqlCalendarValue values[];
   int values_count=CalendarValueHistory(values,date_from,date_to,japan_code);
//--- passe pelos valores do evento encontrado
   if(values_count&gt;0)
     {
      PrintFormat(&quot;N√∫mero de valores para eventos do Jap√£o: %d&quot;,values_count);
      //--- remova todos os valores &quot;vazios&quot; (actual_value==-9223372036854775808)     
      for(int i=values_count-1;i&gt;=0;i--)
        {
         if(values[i].actual_value==-9223372036854775808)
            ArrayRemove(values,i,1);
        }
      PrintFormat(&quot;N√∫mero de valores ap√≥s a exclus√£o de vazios: %d&quot;,ArraySize(values))
     }
   else
     {
      PrintFormat(&quot;Falha ao obter eventos para o c√≥digo do pa√≠s %s, erro %d&quot;,
                  japan_code,GetLastError());
      //--- conclus√£o antecipada do script
      return;
     }
//--- n√£o deixe mais de 10 valores no array values[]
   if(ArraySize(values)&gt;10)
     {
      PrintFormat(&quot;Reduza a lista de valores para 10 e exiba-a&quot;);
      ArrayRemove(values,0,ArraySize(values)-10);
     }
   ArrayPrint(values);
//--- agora exiba como, com base no value_id conhecido, obt√©m-se uma descri√ß√£o do valo
   for(int i=0;i&lt;ArraySize(values);i++)
     {
      MqlCalendarValue value;
      CalendarValueById(values[i].id,value);
      PrintFormat(&quot;%d: value_id=%d value=%d impact=%s&quot;,
                  i,values[i].id,value.actual_value,EnumToString(ENUM_CALENDAR_EVENT_I
     }
//---
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
/*
</code></pre>
<p>
<h3>Resultado:</h3>
¬† N√∫mero de valores para eventos do Jap√£o: 1734
¬† N√∫mero de valores ap√≥s a exclus√£o de vazios: 1017
¬† Reduza a lista de valores para 10 e exiba-a</p>
<p><h3>Calend√°rio econ√¥mico</h3>
¬© 2000-2025, MetaQuotes Ltd.
2013
</p>
<pre><code class="language-mql5">
        [id] [event_id]              [time]            [period] [revision] [actual_val
   [0] 56500  392030004 2019.03.28 23:30:00 2019.03.01 00:00:00          0         900
   [1] 56501  392030005 2019.03.28 23:30:00 2019.03.01 00:00:00          0         700
   [2] 56502  392030006 2019.03.28 23:30:00 2019.03.01 00:00:00          0        1100
   [3] 56544  392030007 2019.03.28 23:30:00 2019.02.01 00:00:00          0        2300
   [4] 56556  392050002 2019.03.28 23:30:00 2019.02.01 00:00:00          0        1630
   [5] 55887  392020003 2019.03.28 23:50:00 2019.02.01 00:00:00          0         400
   [6] 55888  392020004 2019.03.28 23:50:00 2019.02.01 00:00:00          0       -1800
   [7] 55889  392020002 2019.03.28 23:50:00 2019.02.01 00:00:00          0         200
   [8] 55948  392020006 2019.03.28 23:50:00 2019.02.01 00:00:00          1        1400
   [9] 55949  392020007 2019.03.28 23:50:00 2019.02.01 00:00:00          1       -1000
</code></pre>
<p>
¬† Exiba informa√ß√µes resumidas sobre valores de eventos com base em value_id
</p>
<pre><code class="language-mql5">
   0: value_id=56500 value=900000 impact=CALENDAR_IMPACT_POSITIVE
   1: value_id=56501 value=700000 impact=CALENDAR_IMPACT_NA
   2: value_id=56502 value=1100000 impact=CALENDAR_IMPACT_POSITIVE
   3: value_id=56544 value=2300000 impact=CALENDAR_IMPACT_NEGATIVE
   4: value_id=56556 value=1630000 impact=CALENDAR_IMPACT_POSITIVE
   5: value_id=55887 value=400000 impact=CALENDAR_IMPACT_NEGATIVE
   6: value_id=55888 value=-1800000 impact=CALENDAR_IMPACT_POSITIVE
   7: value_id=55889 value=200000 impact=CALENDAR_IMPACT_NEGATIVE
   8: value_id=55948 value=1400000 impact=CALENDAR_IMPACT_POSITIVE
   9: value_id=55949 value=-1000000 impact=CALENDAR_IMPACT_NEGATIVE
</code></pre>
<p>
*/
<h3>Veja tamb√©m</h3>
CalendarValueHistoryByEvent, CalendarValueHistory, CalendarValueLastByEvent, CalendarValueLast</p>
<p><h3>Calend√°rio econ√¥mico</h3>
¬© 2000-2025, MetaQuotes Ltd.
2014
<h3>CalendarCountries</h3>
Obt√©m um array de descri√ß√µes dos pa√≠ses dispon√≠veis no calend√°rio.
</p>
<pre><code class="language-mql5">
int¬† CalendarCountries(
   MqlCalendarCountry&amp;  countries[]         // array para obter uma lista de descri√ß√µe
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
countries[]
[out]  Array de tipo MqlCalendarCountry para obter descri√ß√µes de todos os pa√≠ses do Calend√°rio.
<h3>Valor retornado</h3>
N√∫mero de descri√ß√µes recebidas. Para obter informa√ß√µes de erro, chame a fun√ß√£o GetLastError().
<h3>Poss√≠veis erros:</h3>
¬∑ 4001 ‚Äì ERR_INTERNAL_ERROR  (erro geral de tempo de execu√ß√£o),
¬∑ 5401 ‚Äì ERR_CALENDAR_TIMEOUT (excedido tempo limite de solicita√ß√£o),
¬∑ 5400 ‚Äì ERR_CALENDAR_MORE_DATA (tamanho de array insuficiente para obter descri√ß√µes de
todos os pa√≠ses, portanto, eles recebem apenas o que foi inclu√≠do).
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Script program start function                                    |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- obtenha a lista de pa√≠ses do Calend√°rio Econ√¥mico
   MqlCalendarCountry countries[];
   int count=CalendarCountries(countries);
//--- Imprima o array no Di√°rio
   if(count&gt;0)
      ArrayPrint(countries);
   else
      PrintFormat(&quot;CalendarCountries() returned 0! Error %d&quot;,GetLastError());
/*
</code></pre>
<p>
<h3>Resultado:</h3>
</p>
<pre><code class="language-mql5">
        [id]           [name] [code] [currency] [currency_symbol]       [url_name] [re
   [ 0]    0 &quot;Worldwide&quot;      &quot;WW&quot;   &quot;ALL&quot;      &quot;&quot;                &quot;worldwide&quot;         
   [ 1]  999 &quot;European Union&quot; &quot;EU&quot;   &quot;EUR&quot;      &quot;‚Ç¨&quot;               &quot;european-union&quot;    
   [ 2]  840 &quot;United States&quot;  &quot;US&quot;   &quot;USD&quot;      &quot;$&quot;               &quot;united-states&quot;     
   [ 3]  124 &quot;Canada&quot;         &quot;CA&quot;   &quot;CAD&quot;      &quot;$&quot;               &quot;canada&quot;            
   [ 4]   36 &quot;Australia&quot;      &quot;AU&quot;   &quot;AUD&quot;      &quot;$&quot;               &quot;australia&quot;         
   [ 5]  554 &quot;New Zealand&quot;    &quot;NZ&quot;   &quot;NZD&quot;      &quot;$&quot;               &quot;new-zealand&quot;       
   [ 6]  392 &quot;Japan&quot;          &quot;JP&quot;   &quot;JPY&quot;      &quot;“ê&quot;               &quot;japan&quot;             
   [ 7]  156 &quot;China&quot;          &quot;CN&quot;   &quot;CNY&quot;      &quot;“ê&quot;               &quot;china&quot;             
   [ 8]  826 &quot;United Kingdom&quot; &quot;GB&quot;   &quot;GBP&quot;      &quot;–à&quot;               &quot;united-kingdom&quot;    
   [ 9]  756 &quot;Switzerland&quot;    &quot;CH&quot;   &quot;CHF&quot;      &quot;‚Ç£&quot;               &quot;switzerland&quot;       </p>
<p></code></pre>
<p>
<h3>Calend√°rio econ√¥mico</h3>
¬© 2000-2025, MetaQuotes Ltd.
2015
</p>
<pre><code class="language-mql5">
   [10]  276 &quot;Germany&quot;        &quot;DE&quot;   &quot;EUR&quot;      &quot;‚Ç¨&quot;               &quot;germany&quot;           
   [11]  250 &quot;France&quot;         &quot;FR&quot;   &quot;EUR&quot;      &quot;‚Ç¨&quot;               &quot;france&quot;            
   [12]  380 &quot;Italy&quot;          &quot;IT&quot;   &quot;EUR&quot;      &quot;‚Ç¨&quot;               &quot;italy&quot;             
   [13]  724 &quot;Spain&quot;          &quot;ES&quot;   &quot;EUR&quot;      &quot;‚Ç¨&quot;               &quot;spain&quot;             
   [14]   76 &quot;Brazil&quot;         &quot;BR&quot;   &quot;BRL&quot;      &quot;R$&quot;              &quot;brazil&quot;            
   [15]  410 &quot;South Korea&quot;    &quot;KR&quot;   &quot;KRW&quot;      &quot;‚Ç©&quot;               &quot;south-korea&quot;       
</code></pre>
<p>
*/
  }
<h3>Veja tamb√©m</h3>
<h3>CalendarEventByCountry, CalendarCountryById</h3></p>
<p><h3>Calend√°rio econ√¥mico</h3>
¬© 2000-2025, MetaQuotes Ltd.
2016
<h3>CalendarEventByCountry</h3>
Obt√©m um array de descri√ß√µes de todos os eventos dispon√≠veis no Calend√°rio, de acordo com o c√≥digo
do pa√≠s especificado.
</p>
<pre><code class="language-mql5">
int¬† CalendarEventByCountry(
   string               country_code,¬†    // c√≥digo do pa√≠s segundo ISO 3166-1 alpha-2
   MqlCalendarEvent&amp;   ¬†events[]          // vari√°vel para obter o array de descri√ß√µes
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
country_code
[in]  C√≥digo do pa√≠s segundo ISO 3166-1 alpha-2
events[]
[out]  Array do tipo MqlCalendarEvent para obter descri√ß√µes de todos os eventos para o pa√≠s
especificado.
<h3>Valor retornado</h3>
N√∫mero de descri√ß√µes recebidas. Para obter informa√ß√µes de erro, chame a fun√ß√£o GetLastError().
<h3>Poss√≠veis erros:</h3>
¬∑ 4001 ‚Äì ERR_INTERNAL_ERROR  (erro geral de tempo de execu√ß√£o),
¬∑ 4004 ‚Äì ERR_NOT_ENOUGH_MEMORY (mem√≥ria insuficiente para execu√ß√£o da solicita√ß√£o),
¬∑ 5401 ‚Äì ERR_CALENDAR_TIMEOUT (excedido tempo limite de solicita√ß√£o),
¬∑ falha ao executar ArrayResize()
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Script program start function                                    |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- c√≥digo do pa√≠s para a Uni√£o Europeia de acordo com a ISO 3166-1 Alpha-2
   string EU_code=&quot;EU&quot;;
//--- obtenha os eventos para a Uni√£o Europeia
   MqlCalendarEvent events[];
   int events_count=CalendarEventByCountry(EU_code,events);
//--- imprima eventos para a Uni√£o Europeia no Di√°rio
   if(events_count&gt;0)
     {
      PrintFormat(&quot;Eventos para a Uni√£o Europeia: %d&quot;,events_count);
      ArrayPrint(events);
     }
//---
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
/*
</code></pre>
<p>
<h3>Resultado:</h3>
<h3>Eventos para a Uni√£o Europeia: 56</h3></p>
<p><h3>Calend√°rio econ√¥mico</h3>
¬© 2000-2025, MetaQuotes Ltd.
2017
</p>
<pre><code class="language-mql5">
             [id] [type]  [country_id] [unit] [importance] [multiplier] [digits] [even
   [ 0] 999010001      0          999      0            2            0        0  &quot;ECB 
   [ 1] 999010002      0          999      0            2            0        0  &quot;ECB 
   [ 2] 999010003      0          999      0            3            0        0  &quot;ECB 
   [ 3] 999010004      0          999      0            3            0        0  &quot;ECB 
   [ 4] 999010005      0          999      0            2            0        0  &quot;ECB 
   [ 5] 999010006      1          999      1            3            0        2  &quot;ECB 
   [ 6] 999010007      1          999      1            3            0        2  &quot;ECB 
   [ 7] 999010008      0          999      0            2            0        0  &quot;ECB 
   [ 8] 999010009      1          999      2            2            3        3  &quot;ECB 
   [ 9] 999010010      0          999      0            2            0        0  &quot;ECB 
   [10] 999010011      0          999      0            2            0        0  &quot;ECB 
   ...
</code></pre>
<p>
*/
<h3>Veja tamb√©m</h3>
<h3>CalendarCountries, CalendarCountryById</h3></p>
<p><h3>Calend√°rio econ√¥mico</h3>
¬© 2000-2025, MetaQuotes Ltd.
2018
<h3>CalendarEventByCurrency</h3>
Obt√©m um array de descri√ß√µes de todos os eventos dispon√≠veis no Calend√°rio para a moeda
especificada.
</p>
<pre><code class="language-mql5">
int¬† CalendarEventByCurrency(
   const string         currency,¬†    // c√≥digo da moeda do pa√≠s 
   MqlCalendarEvent&amp;   ¬†events[]      // vari√°vel para obter o array de descri√ß√µes
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
currency
[in]  C√≥digo da moeda do pa√≠s
events[]
[out]  Array do tipo MqlCalendarEvent para obter descri√ß√µes de todos os eventos da moeda
especificada.
<h3>Valor retornado</h3>
N√∫mero de descri√ß√µes recebidas. Para obter informa√ß√µes de erro, chame a fun√ß√£o GetLastError().
<h3>Poss√≠veis erros:</h3>
¬∑ 4001 ‚Äì ERR_INTERNAL_ERROR  (erro geral de tempo de execu√ß√£o),
¬∑ 4004 ‚Äì ERR_NOT_ENOUGH_MEMORY (mem√≥ria insuficiente para execu√ß√£o da solicita√ß√£o),
¬∑ 5401 ‚Äì ERR_CALENDAR_TIMEOUT (excedido tempo limite de solicita√ß√£o),
¬∑ falha ao executar ArrayResize()
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Script program start function                                    |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- declare um array para receber eventos do Calend√°rio Econ√¥mico
      MqlCalendarEvent events[];
//--- obtenha eventos para a moeda da Uni√£o Europeia      
      int count = CalendarEventByCurrency(&quot;EUR&quot;,events);
      Print(&quot;count = &quot;, count);
//--- por exemplo, 10 eventos s√£o suficientes para n√≥s
      if(count&gt;10)
         ArrayResize(events,10);
//--- imprima eventos no Di√°rio        
      ArrayPrint(events);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
/*
</code></pre>
<p>
<h3>Resultado:</h3>
</p>
<pre><code class="language-mql5">
             [id] [type] [country_id] [unit] [importance]                             
   [0] 999010001      0          999      0            2 &quot;https://www.ecb.europa.eu/ho</p>
<p></code></pre>
<p>
<h3>Calend√°rio econ√¥mico</h3>
¬© 2000-2025, MetaQuotes Ltd.
2019
</p>
<pre><code class="language-mql5">
   [1] 999010002      0          999      0            2 &quot;https://www.ecb.europa.eu/ho
   [2] 999010003      0          999      0            3 &quot;https://www.ecb.europa.eu/ho
   [3] 999010004      0          999      0            3 &quot;https://www.ecb.europa.eu/ho
   [4] 999010005      0          999      0            2 &quot;https://www.ecb.europa.eu/ho
   [5] 999010006      1          999      1            3 &quot;https://www.ecb.europa.eu/ho
   [6] 999010007      1          999      1            3 &quot;https://www.ecb.europa.eu/ho
   [7] 999010008      0          999      0            2 &quot;https://www.ecb.europa.eu/ho
   [8] 999010009      1          999      2            2 &quot;https://www.ecb.europa.eu/ho
   [9] 999010010      0          999      0            2 &quot;https://www.ecb.europa.eu/ho
</code></pre>
<p>
*/  
<h3>Veja tamb√©m</h3>
<h3>CalendarEventById, CalendarEventByCountry</h3></p>
<p><h3>Calend√°rio econ√¥mico</h3>
¬© 2000-2025, MetaQuotes Ltd.
2020
<h3>CalendarValueHistoryByEvent</h3>
Obt√©m um array de valores de todos os eventos no intervalo de tempo especificado, segundo o ID do
evento.
</p>
<pre><code class="language-mql5">
int¬† CalendarValueHistoryByEvent(
   ulong¬†             event_id,¬†         // identificador do evento 
   MqlCalendarValue&amp;  values[],          // array para obter a descri√ß√£o dos valores 
   datetime¬†          datetime_from,¬†    // borda esquerda do intervalo de tempo
   datetime¬†          datetime_to=0  ¬†   // borda direita do intervalo de tempo
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
event_id
[in]  ID do evento.
values[]
[out]  Matriz de tipo MqlCalendarValue para obter valores de eventos. Veja um exemplo de
processamento de eventos de calend√°rio. 
datetime_from
[in]  Data de in√≠cio do intervalo de tempo a partir do qual os eventos s√£o selecionados pelo ID
definido, enquanto datetime_from &lt; datetime_to.
datetime_to=0
[in]   Data final do intervalo de tempo a partir do qual os eventos s√£o selecionados pelo ID
definido. Se n√£o for especificado o par√¢metro datetime_to (ou √© igual a 0), ser√£o retornados todos
os valores de evento da data especificada datetime_from, dispon√≠vel no banco de dados do
Calend√°rio, incluindo os valores dos eventos planejados para o futuro.
<h3>Valor retornado</h3>
Retorna true em caso de sucesso, caso contr√°rio, fals. Para obter informa√ß√µes de erro, chame a
fun√ß√£o GetLastError(). Poss√≠veis erros:
¬∑ 4001 ‚Äì ERR_INTERNAL_ERROR  (erro geral de tempo de execu√ß√£o),
¬∑ 4004 ‚Äì ERR_NOT_ENOUGH_MEMORY (mem√≥ria insuficiente para execu√ß√£o da solicita√ß√£o),
¬∑ 5401 ‚Äì ERR_CALENDAR_TIMEOUT (excedido tempo limite de solicita√ß√£o),
¬∑ 5400 ‚Äì ERR_CALENDAR_MORE_DATA (tamanho de array insuficiente para obter descri√ß√µes de
todos os valores, portanto, eles recebem apenas o que cont√™m).
¬∑ falha ao executar ArrayResize()
Se, para o valor de evento, n√£o houver algum dos campos abaixo
</p>
<pre><code class="language-mql5">
struct MqlCalendarValue
  {
   ...
   long              actual_value;              // valor atual do indicador
   long              prev_value;                // valor anterior do indicador
   long              revised_prev_value;        // valor do evento anterior revi
   long              forecast_value;            // valor previsto do evento
   ...</p>
<p></code></pre>
<p>
<h3>Calend√°rio econ√¥mico</h3>
¬© 2000-2025, MetaQuotes Ltd.
2021
  };
o valor do campo ausente ser√° retornado como INT64_MIN (-9223372036854775808). Veja o exemplo
abaixo para valores de campo revised_prev_value.
<h3>Observa√ß√£o</h3>
Todas as fun√ß√µes para trabalhar com o Calend√°rio Econ√¥mico usam o hor√°rio do servidor de
negocia√ß√£o (TimeTradeServer). Isso significa que o tempo na estrutura MqlCalendarValue e os
par√¢metros de tempo de entrada nas fun√ß√µes CalendarValueHistoryByEvent/CalendarValueHistory
s√£o definidos no fuso hor√°rio do servidor de negocia√ß√£o e n√£o no hor√°rio local do usu√°rio.
A estrutura MqlCalendarValue disponibiliza m√©todo para obter e verificar valores a partir dos campos
actual_value, forecast_value, prev_value e revised_prev_value. Se o valor do campo n√£o estiver
definido, ele armazenar√° o valor LONG_MIN (-9223372036854775808). 
Deve-se ter em mente que os valores nestes campos s√£o armazenados multiplicados por um fator de
um milh√£o. Isso significa que quando as fun√ß√µes CalendarValueById, CalendarValueHistoryByEvent,
<h3>CalendarValueHistory, CalendarValueLastByEvent e</h3>
<h3>CalendarValueLast recebem</h3>
valores 
em
MqlCalendarValue, √© necess√°rio verificar se os valores LONG_MIN desses campos s√£o iguais; e se no
campo estiver definido o valor, para obter o valor deve-se dividir o valor do campo por 1000 000
(um milh√£o). Outra maneira de obter valores √© verificar e obter valores por fun√ß√µes da pr√≥pria
estrutura MqlCalendarValue.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Script program start function                                    |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- c√≥digo do pa√≠s para a Uni√£o Europeia de acordo com a ISO 3166-1 Alpha-2
   string EU_code=&quot;EU&quot;;
//--- obtenha os eventos para a Uni√£o Europeia
   MqlCalendarEvent events[];
   int events_count=CalendarEventByCountry(EU_code,events);
//--- imprima eventos para a Uni√£o Europeia no Di√°rio
   if(events_count&gt;0)
     {
      PrintFormat(&quot;Eventos para a Uni√£o Europeia: %d&quot;,events_count);
      //--- reduza a lista de eventos, para estudar basta deixar 10
      ArrayResize(events,10);
      ArrayPrint(events);
     }
//--- veja que o evento &quot;ECB Interest Rate Decision&quot; tem event_id=999010007
   ulong event_id=events[6].id;        // o ID deste evento pode mudar no Calend√°rio, 
   string event_name=events[6].name;   // nome do evento no Calend√°rio
   PrintFormat(&quot;Obtenha o valor para o evento event_name=%s event_id=%d&quot;,event_name,ev
//--- obtenha todos os valores do evento &quot;ECB Interest Rate Decision&quot;
   MqlCalendarValue values[];
//--- defina os limites do intervalo de onde s√£o tomados os eventos
   datetime date_from=0;           // pegue todos os eventos desde o come√ßo do hist√≥ri</p>
<p></code></pre>
<p>
<h3>Calend√°rio econ√¥mico</h3>
¬© 2000-2025, MetaQuotes Ltd.
2022
</p>
<pre><code class="language-mql5">
   datetime date_to=D&#x27;01.01.2016&#x27;; // pege eventos n√£o mais antigos que 2016
   if(CalendarValueHistoryByEvent(event_id,values,date_from,date_to))
     {
      PrintFormat(&quot;Obtidos valores de eventos %s: %d&quot;,
                  event_name,ArraySize(values));
      //--- reduza a lista de eventos para 10, isso chega 10
      ArrayResize(values,10);
      ArrayPrint(values);
     }
   else
     {
      PrintFormat(&quot;Erro! Falha ao obter valores para o evento event_id=%d&quot;,event_id);
      PrintFormat(&quot;C√≥digo de erro: %d&quot;,GetLastError());
     }
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//---
/*
</code></pre>
<p>
<h3>Resultado:</h3>
<h3>Eventos para a Uni√£o Europeia: 56</h3>
</p>
<pre><code class="language-mql5">
            [id] [type] [sector] [frequency] [time_mode] [country_id] [unit] [importan
   [0] 999010001      0        5           0           0          999      0          
   [1] 999010002      0        5           0           0          999      0          
   [2] 999010003      0        5           0           0          999      0          
   [3] 999010004      0        5           0           0          999      0          
   [4] 999010005      0        5           0           0          999      0          
   [5] 999010006      1        5           0           0          999      1          
   [6] 999010007      1        5           0           0          999      1          
   [7] 999010008      0        5           0           0          999      0          
   [8] 999010009      1        5           0           0          999      2          
   [9] 999010010      0        5           0           0          999      0          
</code></pre>
<p>
¬† Obtenha os valores para o evento event_name=ECB Interest Rate Decision event_id=9990
¬† Obtidos os valores para o evento ECB Interest Rate Decision: 102
</p>
<pre><code class="language-mql5">
       [id] [event_id]              [time]            [period] [revision] [actual_valu
   [0] 2776  999010007 2007.03.08 11:45:00 1970.01.01 00:00:00          0        37500
   [1] 2777  999010007 2007.05.10 11:45:00 1970.01.01 00:00:00          0        37500
   [2] 2778  999010007 2007.06.06 11:45:00 1970.01.01 00:00:00          0        40000
   [3] 2779  999010007 2007.07.05 11:45:00 1970.01.01 00:00:00          0        40000
   [4] 2780  999010007 2007.08.02 11:45:00 1970.01.01 00:00:00          0        40000
   [5] 2781  999010007 2007.09.06 11:45:00 1970.01.01 00:00:00          0        40000
   [6] 2782  999010007 2007.10.04 11:45:00 1970.01.01 00:00:00          0        40000
   [7] 2783  999010007 2007.11.08 12:45:00 1970.01.01 00:00:00          0        40000
   [8] 2784  999010007 2007.12.06 12:45:00 1970.01.01 00:00:00          0        40000
   [9] 2785  999010007 2008.01.10 12:45:00 1970.01.01 00:00:00          0        40000
</code></pre>
<p>
*/
<h3>Veja tamb√©m</h3></p>
<p><h3>Calend√°rio econ√¥mico</h3>
¬© 2000-2025, MetaQuotes Ltd.
2023
CalendarCountries, CalendarEventByCountry, CalendarValueHistory, CalendarEventById,
<h3>CalendarValueById</h3></p>
<p><h3>Calend√°rio econ√¥mico</h3>
¬© 2000-2025, MetaQuotes Ltd.
2024
<h3>CalendarValueHistory</h3>
Obt√©m uma matriz de valores de todos os eventos num determinado intervalo de tempo com um filtro
por pa√≠s e/ou moeda.
</p>
<pre><code class="language-mql5">
int¬† CalendarValueHistory(
   MqlCalendarValue&amp;  values[],              // array para obter descri√ß√µes de valores
   datetime¬†          datetime_from,¬†        // borda esquerda do intervalo de tempo
   datetime¬†          datetime_to=0  ¬†       // borda direita do intervalo de tempo
   const string       country_code=NULL,¬†    // c√≥digo do pa√≠s ISO 3166-1 alpha-2
   const string       currency=NULL     ¬†    // c√≥digo da moeda do pa√≠s 
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
values[]
[out]  Matriz de tipo MqlCalendarValue para obter valores de eventos. Veja um exemplo de
processamento de eventos de calend√°rio. 
datetime_from
[in]  Data de in√≠cio do intervalo de tempo a partir do qual os eventos s√£o selecionados pelo ID
definido, enquanto datetime_from &lt; datetime_to.
datetime_to=0
[in]   Data final do intervalo de tempo a partir do qual os eventos s√£o selecionados pelo ID
definido. Se n√£o for especificado o par√¢metro datetime_to (ou √© igual a 0), ser√£o retornados todos
os valores de evento da data especificada datetime_from, dispon√≠vel no banco de dados do
Calend√°rio, incluindo os valores dos eventos planejados para o futuro.
country_code=NULL
[in]  C√≥digo do pa√≠s segundo ISO 3166-1 alpha-2
currency=NULL
[in]  C√≥digo da moeda do pa√≠s
<h3>Valor retornado</h3>
Se bem-sucedido, retorna o n√∫mero de valores dispon√≠veis no array de valores, caso contr√°rio -1..
Para obter informa√ß√µes de erro, chame a fun√ß√£o GetLastError(). Poss√≠veis erros:
¬∑ 4001 ‚Äì ERR_INTERNAL_ERROR  (erro geral de tempo de execu√ß√£o),
¬∑ 4004 ‚Äì ERR_NOT_ENOUGH_MEMORY (mem√≥ria insuficiente para execu√ß√£o da solicita√ß√£o),
¬∑ 5401 ‚Äì ERR_CALENDAR_TIMEOUT (excedido tempo limite de solicita√ß√£o),
¬∑ 5400 ‚Äì ERR_CALENDAR_MORE_DATA (tamanho de array insuficiente para obter descri√ß√µes de
todos os valores, portanto, eles recebem apenas o que cont√™m).
¬∑ falha ao executar ArrayResize()
<h3>Observa√ß√£o</h3>
Todas as fun√ß√µes para trabalhar com o Calend√°rio Econ√¥mico usam o hor√°rio do servidor de
negocia√ß√£o (TimeTradeServer). Isso significa que o tempo na estrutura MqlCalendarValue e os</p>
<p><h3>Calend√°rio econ√¥mico</h3>
¬© 2000-2025, MetaQuotes Ltd.
2025
par√¢metros de tempo de entrada nas fun√ß√µes CalendarValueHistoryByEvent/CalendarValueHistory
s√£o definidos no fuso hor√°rio do servidor de negocia√ß√£o e n√£o no hor√°rio local do usu√°rio.
Se um array foi passado para a fun√ß√£o events[] de comprimento fixo e, como resultado da
solicita√ß√£o, n√£o havia espa√ßo suficiente para salvar o resultado inteiro, √© mostrado o erro
ERR_CALENDAR_MORE_DATA (5400).
Se n√£o for especificado o par√¢metro datetime_to (=0), ser√£o retornados todos os valores de eventos
a partir da data datetime_from dispon√≠vel no banco de dados do Calend√°rio, incluindo os valores
planejados para o futuro.
Para os filtros country_code e currency valores NULL e &quot;&quot; s√£o equivalentes, eles indicam que n√£o h√°
filtro.
Para country_code deve ser usado o campo code da estrutura MqlCalendarCountry, por exemplo,
&quot;US&quot;, &quot;RU&quot; ou &quot;EU&quot;.
Para currency deve ser usado o campo currency da estrutura MqlCalendarCountry, por exemplo,
&quot;USD&quot;, &quot;RUB&quot; ou &quot;EUR&quot;.
Os filtros s√£o aplicados por conjun√ß√£o, ou seja, atrav√©s do booliano &#x27;E&#x27; s√£o selecionados apenas os
eventos para os quais ambas as condi√ß√µes s√£o atendidas simultaneamente ‚Äì pa√≠s e moeda.
A estrutura MqlCalendarValue disponibiliza m√©todo para obter e verificar valores a partir dos campos
actual_value, forecast_value, prev_value e revised_prev_value. Se o valor do campo n√£o estiver
definido, ele armazenar√° o valor LONG_MIN (-9223372036854775808). 
Deve-se ter em mente que os valores nestes campos s√£o armazenados multiplicados por um fator de
um milh√£o. Isso significa que quando as fun√ß√µes CalendarValueById, CalendarValueHistoryByEvent,
<h3>CalendarValueHistory, CalendarValueLastByEvent e</h3>
<h3>CalendarValueLast recebem</h3>
valores 
em
MqlCalendarValue, √© necess√°rio verificar se os valores LONG_MIN desses campos s√£o iguais; e se no
campo estiver definido o valor, para obter o valor deve-se dividir o valor do campo por 1000 000
(um milh√£o). Outra maneira de obter valores √© verificar e obter valores por fun√ß√µes da pr√≥pria
estrutura MqlCalendarValue.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Script program start function                                    |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- c√≥digo do pa√≠s para a Uni√£o Europeia de acordo com a ISO 3166-1 Alpha-2
   string EU_code=&quot;EU&quot;;
//--- obtenha todos os valores de evento da Uni√£o Europeia
   MqlCalendarValue values[];
//--- defina os limites do intervalo de onde s√£o tomados os eventos
   datetime date_from=D&#x27;01.01.2018&#x27;;  // defina todos os eventos de 2018
   datetime date_to=0;                // 0 indica que todos os eventos s√£o conhecidos 
</code></pre>
<p>
/ --- solicite o hist√≥rico do evento para a Uni√£o Europeia desde 2018
</p>
<pre><code class="language-mql5">
   if(CalendarValueHistory(values,date_from,date_to,EU_code))
     {
      PrintFormat(&quot;Obtidos valores do evento para country_code=%s: %d&quot;,</p>
<p></code></pre>
<p>
<h3>Calend√°rio econ√¥mico</h3>
¬© 2000-2025, MetaQuotes Ltd.
2026
</p>
<pre><code class="language-mql5">
                  EU_code,ArraySize(values));
      //--- reduza o tamanho do array para imprimir no Di√°rio
      ArrayResize(values,10);
//--- imprima o valor dos eventos no Di√°rio
      ArrayPrint(values);      
     }
   else
     {
      PrintFormat(&quot;Erro! Falha ao obter eventos do pa√≠s country_code=%s&quot;,EU_code);
      PrintFormat(&quot;C√≥digo de erro: %d&quot;,GetLastError());
     }
//---
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
/*
</code></pre>
<p>
<h3>Resultado:</h3>
¬† Obtidos os valores de eventos para country_code=EU: 1384
</p>
<pre><code class="language-mql5">
        [id] [event_id]           [time]               [period] [revision]   [actual_v
   [0] 54215  999500001 2018.01.02 09:00:00 2017.12.01 00:00:00          3       60600
   [1] 54221  999500002 2018.01.04 09:00:00 2017.12.01 00:00:00          3       56600
   [2] 54222  999500003 2018.01.04 09:00:00 2017.12.01 00:00:00          3       58100
   [3] 45123  999030005 2018.01.05 10:00:00 2017.11.01 00:00:00          0         600
   [4] 45124  999030006 2018.01.05 10:00:00 2017.11.01 00:00:00          0        2800
   [5] 45125  999030012 2018.01.05 10:00:00 2017.12.01 00:00:00          1         900
   [6] 45126  999030013 2018.01.05 10:00:00 2017.12.01 00:00:00          1        1400
   [7] 54953  999520001 2018.01.05 20:30:00 2018.01.02 00:00:00          0      127900
   [8] 22230  999040003 2018.01.08 10:00:00 2017.12.01 00:00:00          0        9100
   [9] 22231  999040004 2018.01.08 10:00:00 2017.12.01 00:00:00          0       18400
</code></pre>
<p>
*/ 
<h3>Veja tamb√©m</h3>
CalendarCountries, CalendarEventByCountry, CalendarValueHistoryByEvent, CalendarEventById,
<h3>CalendarValueById</h3></p>
<p><h3>Calend√°rio econ√¥mico</h3>
¬© 2000-2025, MetaQuotes Ltd.
2027
<h3>CalendarValueLastByEvent</h3>
Obt√©m um array de valores do eventos por seu ID desde o momento em que criado do banco de dados
do Calend√°rio com o change_id definido.
</p>
<pre><code class="language-mql5">
int¬† CalendarValueLastByEvent(
   ulong¬†               event_id,¬†     // identificador de evento 
   ulong&amp;¬†              change_id,¬†    // identificador do valor do evento 
   MqlCalendarValue&amp;   ¬†values[]       // array para obter descri√ß√µes de valores 
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
event_id
[in]  ID do evento.
change_id
[in][out]  Identificador de altera√ß√£o.
values[]
[out]  Array de tipo MqlCalendarValue para obter valores de eventos. Veja um exemplo de
processamento de eventos de calend√°rio. 
<h3>Valor retornado</h3>
N√∫mero de valores de eventos recebidos. Para obter informa√ß√µes de erro, chame a fun√ß√£o
<h3>GetLastError(). Poss√≠veis erros:</h3>
¬∑ 4001 ‚Äì ERR_INTERNAL_ERROR  (erro geral de tempo de execu√ß√£o),
¬∑ 4004 ‚Äì ERR_NOT_ENOUGH_MEMORY (mem√≥ria insuficiente para execu√ß√£o da solicita√ß√£o),
¬∑ 5401 ‚Äì ERR_CALENDAR_TIMEOUT (excedido tempo limite de solicita√ß√£o),
¬∑ 5400 ‚Äì ERR_CALENDAR_MORE_DATA (tamanho de array insuficiente para obter descri√ß√µes de
todos os valores, portanto, eles recebem apenas o que cont√™m).
¬∑ falha ao executar ArrayResize()
<h3>Observa√ß√£o</h3>
Todas as fun√ß√µes para trabalhar com o Calend√°rio Econ√¥mico usam o hor√°rio do servidor de
negocia√ß√£o (TimeTradeServer). Isso significa que o tempo na estrutura MqlCalendarValue e os
par√¢metros de tempo de entrada nas fun√ß√µes CalendarValueHistoryByEvent/CalendarValueHistory
s√£o definidos no fuso hor√°rio do servidor de negocia√ß√£o e n√£o no hor√°rio local do usu√°rio.
Se um array foi passado para a fun√ß√£o events[] de comprimento fixo e, como resultado da
solicita√ß√£o, n√£o havia espa√ßo suficiente para salvar o resultado inteiro, √© mostrado o erro
ERR_CALENDAR_MORE_DATA (5400).
Se na fun√ß√£o for passado change_id = 0, a fun√ß√£o sempre retornar√° zero, mas ao mesmo tempo
change_id retorna o estado atual do banco de dados do Calend√°rio.
A fun√ß√£o retorna uma matriz de valores para as not√≠cias especificadas e change_id novo que pode
ser usado para chamadas subsequentes desta fun√ß√£o para obter novos valores de not√≠cias. Assim,
chamando esta fun√ß√£o com o √∫ltimo conhecido change_id, pode-se receber atualiza√ß√µes de valores
para uma determinada not√≠cia.</p>
<p><h3>Calend√°rio econ√¥mico</h3>
¬© 2000-2025, MetaQuotes Ltd.
2028
A estrutura MqlCalendarValue disponibiliza m√©todo para obter e verificar valores a partir dos campos
actual_value, forecast_value, prev_value e revised_prev_value. Se o valor do campo n√£o estiver
definido, ele armazenar√° o valor LONG_MIN (-9223372036854775808). 
Deve-se ter em mente que os valores nestes campos s√£o armazenados multiplicados por um fator de
um milh√£o. Isso significa que quando as fun√ß√µes CalendarValueById, CalendarValueHistoryByEvent,
<h3>CalendarValueHistory, CalendarValueLastByEvent e</h3>
<h3>CalendarValueLast recebem</h3>
valores 
em
MqlCalendarValue, √© necess√°rio verificar se os valores LONG_MIN desses campos s√£o iguais; e se no
campo estiver definido o valor, para obter o valor deve-se dividir o valor do campo por 1000 000
(um milh√£o). Outra maneira de obter valores √© verificar e obter valores por fun√ß√µes da pr√≥pria
estrutura MqlCalendarValue.
Um exemplo de um EA que ouve a publica√ß√£o do Nonfarm payrolls:
</p>
<pre><code class="language-mql5">
#property description &quot;Exemplo de uso da fun√ß√£o CalendarValueLastByEvent&quot;
#property description &quot; para pegar a publica√ß√£o do relat√≥rio do evento Nonfarm Payroll
#property description &quot;Para fazer isso, voc√™ precisa obter o ID atual da altera√ß√£o&quot;
#property description &quot; base do Calend√°rio. Em seguida, obter segundo este identificad
#property description &quot; apenas novos eventos atrav√©s de pesquisa no temporizador&quot;
//+------------------------------------------------------------------+
//| Expert initialization function                                   |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- create timer
   EventSetTimer(60);
//---
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Expert deinitialization function                                 |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
//--- destroy timer
   EventKillTimer();
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Expert tick function                                             |
//+------------------------------------------------------------------+
void OnTick()
  {
//---
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Timer function                                                   |
//+------------------------------------------------------------------+
void OnTimer()
  {</p>
<p></code></pre>
<p>
<h3>Calend√°rio econ√¥mico</h3>
¬© 2000-2025, MetaQuotes Ltd.
2029
</p>
<pre><code class="language-mql5">
//--- ID da altera√ß√£o da base do Calend√°rio
   static ulong calendar_change_id=0;
//--- sinal da primeira inicializa√ß√£o
   static bool first=true;
//--- identificador de evento  
   static ulong event_id=0;
//--- nome do evento  
   static string event_name=NULL;
//--- array de valores do evento
   MqlCalendarValue values[];
//--- inicialize - obtenha o calendar_change_id atual
   if(first)
     {
      MqlCalendarEvent events[];
      //--- c√≥digo do pa√≠s para os EUA de acordo com a ISO 3166-1 Alpha-2 
      string USA_code=&quot;US&quot;;
      //--- obtenha eventos para os EUA    
      int events_count=CalendarEventByCountry(USA_code,events);
      //--- posi√ß√£o necess√°rio no array de eventos events
      int event_pos=-1;
      //--- registre os eventos para os EUA no Di√°rio
      if(events_count&gt;0)
        {
         PrintFormat(&quot;%s: Eventos para os EUA: %d&quot;,__FUNCTION__,events_count);
         for(int i=0;i&lt;events_count;i++)
           {
            string event_name_low=events[i].name;
            //--- insira o nome do evento em min√∫sculas            
            if(!StringToLower(event_name_low))
              {
               PrintFormat(&quot;StringToLower() retornou o erro %d&quot;,GetLastError());
               //--- antecipadamente saia da fun√ß√£o
               return;
              }
            //--- procure o evento &quot;Nonfarm Payrolls&quot;            
            if(StringFind(event_name_low,&quot;nonfarm payrolls&quot;)!=-1)
              {
               //--- evento encontrado, lembre-se de seu id
               event_id=events[i].id;
               //--- escreva para o evento &quot;Nonfarm Payrolls&quot; seu nome
               event_name=events[i].name;
               //--- lembre a posi√ß√£o do evento no array events[]               
               event_pos=i;
               //--- na verdade, no Calend√°rio h√° v√°rios eventos contendo o nome &quot;nonf
               PrintFormat(&quot;Evento \&quot;Nonfarm Payrolls\&quot; encontrado: event_id=%d  event
               //--- veja todos os eventos, comente o operador break, para entender me
               break;
              }
           }</p>
<p></code></pre>
<p>
<h3>Calend√°rio econ√¥mico</h3>
¬© 2000-2025, MetaQuotes Ltd.
2030
</p>
<pre><code class="language-mql5">
         //--- reduza a lista, apague os eventos ap√≥s o evento&quot;Nonfarm Payrolls&quot;
         ArrayRemove(events,event_pos+1);
         //--- para facilitar o estudo, deixe 9 eventos antes de &quot;Nonfarm Payrolls&quot;   
         ArrayRemove(events,0,event_pos-9);
         ArrayPrint(events);
        }
      else
        {
         PrintFormat(&quot;%s: CalendarEventByCountry(%s) retornou 0 eventos, c√≥digo de err
                     USA_code,__FUNCTION__,GetLastError());
         //--- falha, tente novamente na pr√≥xima chamada do temporizador         
         return;
        }
      //--- obtenha, para o evento definido, o ID da altera√ß√£o da base do Calend√°rio  
      if(CalendarValueLastByEvent(event_id,calendar_change_id,values)&gt;0)
        {
         //--- este bloco de c√≥digo n√£o pode ser executado na primeira inicializa√ß√£o, 
         PrintFormat(&quot;%s: Obtido ID atual da base do calend√°rio: change_id=%d&quot;,
                     __FUNCTION__,calendar_change_id);
         //--- defina o sinalizador e saia antes do pr√≥ximo evento do temporizador
         first=false;
         return;
        }
      else
        {
         //--- dados n√£o recebidos (para a primeira execu√ß√£o, isso √© normal), verifiqu
         int error_code=GetLastError();
         if(error_code==0)
           {
            PrintFormat(&quot;%s: Obtido ID atual da base do calend√°rio: change_id=%d&quot;,
                        __FUNCTION__,calendar_change_id);
            //--- defina o sinalizador e saia antes do pr√≥ximo evento do temporizador
            first=false;
            //--- agora voc√™ tem o valor calendar_change_id
            return;
           }
         else
           {
            //--- isso √© realmente um erro            
            PrintFormat(&quot;%s: Falha ao obter valores para o evento event_id=%d&quot;,__FUNCT
            PrintFormat(&quot;C√≥digo de erro: %d&quot;,error_code);
            //--- falha, tente novamente na pr√≥xima chamada do temporizador         
            return;
           }
        }
     }
//--- voc√™ tem o √∫ltimo valor conhecido do ID de mudan√ßa do calend√°rio (change_id)</p>
<p></code></pre>
<p>
<h3>Calend√°rio econ√¥mico</h3>
¬© 2000-2025, MetaQuotes Ltd.
2031
</p>
<pre><code class="language-mql5">
   ulong old_change_id=calendar_change_id;
//--- verifique se surgiu um novo valor para o evento &quot;Nonfarm Payrolls&quot;
   if(CalendarValueLastByEvent(event_id,calendar_change_id,values)&gt;0)
     {
      PrintFormat(&quot;%s: Obtidos novos eventos para \&quot;%s\&quot;: %d&quot;,
                  __FUNCTION__,event_name,ArraySize(values));
      //--- exiba no Di√°rio informa√ß√µes do array values 
      ArrayPrint(values);
      //--- exiba no Di√°rio os valores do ID do Calend√°rio - o anterior e o novo
      PrintFormat(&quot;%s: Anterior change_id=%d, novo change_id=%d&quot;,
                  __FUNCTION__,old_change_id,calendar_change_id);
/* 
      escreva aqui o c√≥digo que processar√° a publica√ß√£o de dados sobre o &quot;Nonfarm Payr
      */
     }
//---     
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
/*
</code></pre>
<p>
<h3>Resultado:</h3>
</p>
<pre><code class="language-mql5">
   OnTimer: Eventos para EUA: 202
   Evento &quot;Nonfarm Payrolls&quot; encontrado: event_id=840030016  event_name=Nonfarm Payrol
            [id] [type] [sector] [frequency] [time_mode] [country_id] [unit] [importan
   [0] 840030007      1        4           2           0          840      1          
   [1] 840030008      1        4           2           0          840      1          
   [2] 840030009      1        4           2           0          840      0          
   [3] 840030010      1        4           2           0          840      0          
   [4] 840030011      1        4           2           0          840      1          
   [5] 840030012      1        4           2           0          840      1          
   [6] 840030013      1        4           2           0          840      1          
   [7] 840030014      1        4           2           0          840      1          
   [8] 840030015      1        3           2           0          840      1          
   [9] 840030016      1        3           2           0          840      4          
   OnTimer: Recebido o ID atual da base do Calend√°rio: change_id=33986560
</code></pre>
<p>
*/  
<h3>Veja tamb√©m</h3>
CalendarValueLast, CalendarValueHistory, CalendarValueHistoryByEvent, CalendarValueById</p>
<p><h3>Calend√°rio econ√¥mico</h3>
¬© 2000-2025, MetaQuotes Ltd.
2032
<h3>CalendarValueLast</h3>
Obt√©m um array de valores de todos os eventos com filtro por pa√≠s e/ou moeda desde o momento em
que criado do banco de dados do Calend√°rio com o change_id definido.
</p>
<pre><code class="language-mql5">
int¬† CalendarValueLast(
   ulong&amp;¬†              change_id,¬†            // identificador de altera√ß√£o
   MqlCalendarValue&amp;   ¬†values[],              // array para obter descri√ß√µes de valor
   const string         country_code=NULL,¬†    // c√≥digo do pa√≠s segundo ISO 3166-1 al
   const string         currency=NULL     ¬†    // c√≥digo da moeda do pa√≠s 
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
change_id
[in][out]  Identificador de altera√ß√£o.
values[]
[out]  Array de tipo MqlCalendarValue para obter valores de eventos. Veja um exemplo de
processamento de eventos de calend√°rio. 
country_code=NULL
[in]  C√≥digo do pa√≠s segundo ISO 3166-1 alpha-2
currency=NULL
[in]  C√≥digo da moeda do pa√≠s
<h3>Valor retornado</h3>
N√∫mero de valores de eventos recebidos. Para obter informa√ß√µes de erro, chame a fun√ß√£o
<h3>GetLastError(). Poss√≠veis erros:</h3>
¬∑ 4001 ‚Äì ERR_INTERNAL_ERROR  (erro geral de tempo de execu√ß√£o),
¬∑ 4004 ‚Äì ERR_NOT_ENOUGH_MEMORY (mem√≥ria insuficiente para execu√ß√£o da solicita√ß√£o),
¬∑ 5401 ‚Äì ERR_CALENDAR_TIMEOUT (excedido tempo limite de solicita√ß√£o),
¬∑ 5400 ‚Äì ERR_CALENDAR_MORE_DATA (tamanho de array insuficiente para obter descri√ß√µes de
todos os valores, portanto, eles recebem apenas o que cont√™m).
¬∑ falha ao executar ArrayResize()
<h3>Observa√ß√£o</h3>
Todas as fun√ß√µes para trabalhar com o Calend√°rio Econ√¥mico usam o hor√°rio do servidor de
negocia√ß√£o (TimeTradeServer). Isso significa que o tempo na estrutura MqlCalendarValue e os
par√¢metros de tempo de entrada nas fun√ß√µes CalendarValueHistoryByEvent/CalendarValueHistory
s√£o definidos no fuso hor√°rio do servidor de negocia√ß√£o e n√£o no hor√°rio local do usu√°rio.
Se um array foi passado para a fun√ß√£o events[] de comprimento fixo e, como resultado da
solicita√ß√£o, n√£o havia espa√ßo suficiente para salvar o resultado inteiro, √© mostrado o erro
ERR_CALENDAR_MORE_DATA (5400).
Se na fun√ß√£o for passado change_id = 0, a fun√ß√£o sempre retornar√° zero, mas ao mesmo tempo
change_id retorna o estado atual do banco de dados do Calend√°rio.</p>
<p><h3>Calend√°rio econ√¥mico</h3>
¬© 2000-2025, MetaQuotes Ltd.
2033
Para os filtros country_code e currency valores NULL e &quot;&quot; s√£o equivalentes, eles indicam que n√£o h√°
filtro.
Para country_code deve ser usado o campo code da estrutura MqlCalendarCountry, por exemplo,
&quot;US&quot;, &quot;RU&quot; ou &quot;EU&quot;.
Para currency deve ser usado o campo currency da estrutura MqlCalendarCountry, por exemplo,
&quot;USD&quot;, &quot;RUB&quot; ou &quot;EUR&quot;.
Os filtros s√£o aplicados por conjun√ß√£o, ou seja, atrav√©s do booliano &#x27;E&#x27; s√£o selecionados apenas os
eventos para os quais ambas as condi√ß√µes s√£o atendidas simultaneamente ‚Äì pa√≠s e moeda
A fun√ß√£o retorna uma matriz de valores para as not√≠cias especificadas e change_id novo que pode
ser usado para chamadas subsequentes desta fun√ß√£o para obter novos valores de not√≠cias. Assim,
chamando esta fun√ß√£o com o √∫ltimo conhecido change_id, pode-se receber atualiza√ß√µes de valores
para uma determinada not√≠cia.
A estrutura MqlCalendarValue disponibiliza m√©todo para obter e verificar valores a partir dos campos
actual_value, forecast_value, prev_value e revised_prev_value. Se o valor do campo n√£o estiver
definido, ele armazenar√° o valor LONG_MIN (-9223372036854775808). 
Deve-se ter em mente que os valores nestes campos s√£o armazenados multiplicados por um fator de
um milh√£o. Isso significa que quando as fun√ß√µes CalendarValueById, CalendarValueHistoryByEvent,
<h3>CalendarValueHistory, CalendarValueLastByEvent e</h3>
<h3>CalendarValueLast recebem</h3>
valores 
em
MqlCalendarValue, √© necess√°rio verificar se os valores LONG_MIN desses campos s√£o iguais; e se no
campo estiver definido o valor, para obter o valor deve-se dividir o valor do campo por 1000 000
(um milh√£o). Outra maneira de obter valores √© verificar e obter valores por fun√ß√µes da pr√≥pria
estrutura MqlCalendarValue.
Um exemplo de um EA que ouve a publica√ß√£o de eventos do Calend√°rio Econ√¥mico:
</p>
<pre><code class="language-mql5">
#property description &quot;Exemplo de uso da fun√ß√£o CalendarValueLast&quot;
#property description &quot; para criar um ouvinte de evento do Calend√°rio Econ√¥mico.&quot;
#property description &quot;Para fazer isso, voc√™ precisa obter o ID atual da altera√ß√£o&quot;
#property description &quot; base do Calend√°rio. Em seguida, obter segundo este identificad
#property description &quot; apenas novos eventos atrav√©s de pesquisa no temporizador&quot;
//+------------------------------------------------------------------+
//| Expert initialization function                                   |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- create timer
   EventSetTimer(60);
//---
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Expert deinitialization function                                 |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
//--- destroy timer
   EventKillTimer();</p>
<p></code></pre>
<p>
<h3>Calend√°rio econ√¥mico</h3>
¬© 2000-2025, MetaQuotes Ltd.
2034
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Expert tick function                                             |
//+------------------------------------------------------------------+
void OnTick()
  {
//---
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Timer function                                                   |
//+------------------------------------------------------------------+
void OnTimer()
  {
//--- ID da altera√ß√£o da base do Calend√°rio
   static ulong calendar_change_id=0;
//--- sinal da primeira inicializa√ß√£o
   static bool first=true;
//--- array de valores do evento
   MqlCalendarValue values[];
//--- inicialize - obtenha o calendar_change_id atual
   if(first)
     {
      //--- obtenha o ID da altera√ß√£o da base do Calend√°rio   
      if(CalendarValueLast(calendar_change_id,values)&gt;0)
        {
         //--- este bloco de c√≥digo n√£o pode ser executado na primeira inicializa√ß√£o, 
         PrintFormat(&quot;%s: Obtido ID atual da base do calend√°rio: change_id=%d&quot;,
                     __FUNCTION__,calendar_change_id);
         //--- defina o sinalizador e saia antes do pr√≥ximo evento do temporizador
         first=false;
         return;
        }
      else
        {
         //--- dados n√£o recebidos (para a primeira execu√ß√£o, isso √© normal), verifiqu
         int error_code=GetLastError();
         if(error_code==0)
           {
            PrintFormat(&quot;%s: Obtido ID atual da base do calend√°rio: change_id=%d&quot;,
                        __FUNCTION__,calendar_change_id);
            //--- defina o sinalizador e saia antes do pr√≥ximo evento do temporizador
            first=false;
            //--- agora voc√™ tem o valor calendar_change_id
            return;
           }
         else
           {
            //--- isso √© realmente um erro            </p>
<p></code></pre>
<p>
<h3>Calend√°rio econ√¥mico</h3>
¬© 2000-2025, MetaQuotes Ltd.
2035
</p>
<pre><code class="language-mql5">
            PrintFormat(&quot;%s: Falha ao obter eventos em CalendarValueLast. C√≥digo de er
                        __FUNCTION__,error_code);
            //--- falha ao trabalhar, tente inicializar novamente na pr√≥xima vez que o
            return;
           }
        }
     }
//--- voc√™ tem o √∫ltimo valor conhecido do ID de mudan√ßa do calend√°rio (change_id)
   ulong old_change_id=calendar_change_id;
//--- verifique se apareceram novos eventos do Calend√°rio
   if(CalendarValueLast(calendar_change_id,values)&gt;0)
     {
      PrintFormat(&quot;%s: Obtidos novos eventos do Calend√°rio: %d&quot;,
                  __FUNCTION__,ArraySize(values));
      //--- exiba no Di√°rio informa√ß√µes do array values 
      ArrayPrint(values);
      //--- exiba no Di√°rio os valores do ID do Calend√°rio - o anterior e o novo
      PrintFormat(&quot;%s: Anterior change_id=%d, novo change_id=%d&quot;,
                  __FUNCTION__,old_change_id,calendar_change_id);
      //--- exiba no Di√°rio novos eventos
      ArrayPrint(values);
      /* 
¬†    escreva aqui o seu c√≥digo que ir√° processar o surgimento dos eventos
      */
     }
//---     
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
/*
</code></pre>
<p>
<h3>Exemplo para a opera√ß√£o do &quot;ouvinte&quot;:</h3>
¬† OnTimer: Obtido ID atual da base do calend√°rio: change_id=33281792
¬† OnTimer: Obtidos novos eventos para o Calend√°rio: 1
</p>
<pre><code class="language-mql5">
        [id] [event_id]              [time]            [period] [revision] [actual_val
   [0] 91040   76020013 2019.03.20 15:30:00 1970.01.01 00:00:00          0       -5077
</code></pre>
<p>
¬† OnTimer: Anterior change_id=33281792, novo change_id=33282048
</p>
<pre><code class="language-mql5">
        [id] [event_id]              [time]            [period] [revision] [actual_val
   [0] 91040   76020013 2019.03.20 15:30:00 1970.01.01 00:00:00          0       -5077
</code></pre>
<p>
¬† OnTimer: Obtidos novos eventos para o Calend√°rio: 1
</p>
<pre><code class="language-mql5">
        [id] [event_id]              [time]            [period] [revision]       [actu
   [0] 91041   76020013 2019.03.27 15:30:00 1970.01.01 00:00:00          0 -9223372036
</code></pre>
<p>
¬† OnTimer: Anterior change_id=33282048, novo change_id=33282560
</p>
<pre><code class="language-mql5">
        [id] [event_id]              [time]            [period] [revision]       [actu
   [0] 91041   76020013 2019.03.27 15:30:00 1970.01.01 00:00:00          0 -9223372036
</code></pre>
<p>
*/  
<h3>Veja tamb√©m</h3></p>
<p><h3>Calend√°rio econ√¥mico</h3>
¬© 2000-2025, MetaQuotes Ltd.
2036
CalendarValueLast, CalendarValueHistory, CalendarValueHistoryByEvent, CalendarValueById
</p>
        </article>
        
        <footer>
            <p>Documenta√ß√£o MQL5 - Fonte: MetaQuotes Ltd.</p>
        </footer>
    </main>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        hljs.highlightAll();
        
        function toggleSidebar() {
            document.querySelector('.sidebar').classList.toggle('open');
        }
        
        function filterNav() {
            const filter = document.getElementById('search').value.toLowerCase();
            const items = document.querySelectorAll('.nav-list li');
            items.forEach(item => {
                const text = item.textContent.toLowerCase();
                item.style.display = text.includes(filter) ? '' : 'none';
            });
        }
    </script>
</body>
</html>