<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indicadores T√©cnicos - MQL5 Docs</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
</head>
<body>
    <nav class="sidebar">
        <div class="logo">
            <h1>MQL5 Docs</h1>
            <p>Documenta√ß√£o Completa</p>
        </div>
        <div class="search-box">
            <input type="text" id="search" placeholder="Buscar..." onkeyup="filterNav()">
        </div>
        <ul class="nav-list" id="nav-list">
            <li class=""><a href="index.html">üìö √çndice</a></li>
            <li class=""><a href="introducao.html">Introducao</a></li>
<li class=""><a href="refer√™ncia_mql5.html">Refer√™ncia MQL5</a></li>
<li class=""><a href="elementos_b√°sicos_da_linguagem.html">Elementos B√°sicos da Linguagem</a></li>
<li class=""><a href="constantes,_enumeradores_e_estruturas.html">Constantes, Enumeradores e Estruturas</a></li>
<li class=""><a href="programas_mql5.html">Programas MQL5</a></li>
<li class=""><a href="vari√°veis_predefinidas.html">Vari√°veis Predefinidas</a></li>
<li class=""><a href="fun√ß√µes_comuns.html">Fun√ß√µes Comuns</a></li>
<li class=""><a href="fun√ß√µes_para_array.html">Fun√ß√µes para Array</a></li>
<li class=""><a href="m√©todos_matriciais_e_vetoriais.html">M√©todos matriciais e vetoriais</a></li>
<li class=""><a href="fun√ß√µes_de_convers√£o.html">Fun√ß√µes de Convers√£o</a></li>
<li class=""><a href="fun√ß√µes_matem√°ticas.html">Fun√ß√µes Matem√°ticas</a></li>
<li class=""><a href="fun√ß√µes_de_string.html">Fun√ß√µes de String</a></li>
<li class=""><a href="data_e_hora.html">Data e Hora</a></li>
<li class=""><a href="informa√ß√µes_de_conta.html">Informa√ß√µes de Conta</a></li>
<li class=""><a href="verificando_estado.html">Verificando Estado</a></li>
<li class=""><a href="manipula√ß√£o_de_eventos.html">Manipula√ß√£o de eventos</a></li>
<li class=""><a href="informa√ß√µes_de_mercado.html">Informa√ß√µes de Mercado</a></li>
<li class=""><a href="calend√°rio_econ√¥mico.html">Calend√°rio econ√¥mico</a></li>
<li class=""><a href="s√©ries_temporais_e_acesso_a_indicadores.html">S√©ries Temporais e Acesso a Indicadores</a></li>
<li class=""><a href="s√≠mbolos_personalizados.html">S√≠mbolos personalizados</a></li>
<li class=""><a href="opera√ß√µes_de_gr√°ficos.html">Opera√ß√µes de Gr√°ficos</a></li>
<li class=""><a href="fun√ß√µes_de_negocia√ß√£o.html">Fun√ß√µes de Negocia√ß√£o</a></li>
<li class=""><a href="gerenciamento_de_sinais.html">Gerenciamento de sinais</a></li>
<li class=""><a href="fun√ß√µes_de_rede.html">Fun√ß√µes de rede</a></li>
<li class=""><a href="vari√°veis_globais_do_terminal.html">Vari√°veis Globais do Terminal</a></li>
<li class=""><a href="fun√ß√µes_de_arquivo.html">Fun√ß√µes de Arquivo</a></li>
<li class=""><a href="indicadores_customizados.html">Indicadores Customizados</a></li>
<li class=""><a href="fun√ß√µes_de_objeto.html">Fun√ß√µes de Objeto</a></li>
<li class="active"><a href="indicadores_t√©cnicos.html">Indicadores T√©cnicos</a></li>
<li class=""><a href="trabalhando_com_resultados_de_otimiza√ß√£o.html">Trabalhando com Resultados de Otimiza√ß√£o</a></li>
<li class=""><a href="trabalhando_com_eventos.html">Trabalhando com Eventos</a></li>
<li class=""><a href="trabalhando_com_opencl.html">Trabalhando com OpenCL</a></li>
<li class=""><a href="trabalhar_com_bancos_de_dados.html">Trabalhar com bancos de dados</a></li>
<li class=""><a href="trabalho_com_directx.html">Trabalho com DirectX</a></li>
<li class=""><a href="metatrader_para_python.html">MetaTrader para Python</a></li>
<li class=""><a href="modelos_onnx.html">Modelos ONNX</a></li>
<li class=""><a href="biblioteca_padr√£o.html">Biblioteca Padr√£o</a></li>
<li class=""><a href="migrando_do_mql4.html">Migrando do MQL4</a></li>
<li class=""><a href="lista_de_fun√ß√µes_mql5.html">Lista de Fun√ß√µes MQL5</a></li>
<li class=""><a href="lista_de_constantes_mql5.html">Lista de Constantes MQL5</a></li>

        </ul>
    </nav>
    
    <main class="content">
        <header>
            <button class="menu-toggle" onclick="toggleSidebar()">‚ò∞</button>
            <h1>Indicadores T√©cnicos</h1>
        </header>
        
        <article>
            <p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2764
<h3>Fun√ß√µes Indicadores T√©cnicos</h3>
Todas as fun√ß√µes, como iMA, iAC, iMACD, iIchimoku etc, tem uma c√≥pia do indicador t√©cnico
correspondente criada no cache global do terminal do cliente. Se uma c√≥pia do indicador com esses
par√¢metros j√° existe, a nova c√≥pia n√£o √© criada, e o contador de refer√™ncias para a c√≥pia existente
aumenta.
Essas fun√ß√µes retornam o manipulador da c√≥pia apropriada do indicador. Al√©m disso, usando este
manipulador, voc√™ pode receber os dados calculados pelo indicador correspondente. Os dados do buffer
correspondentes (indicadores t√©cnicos cont√™m dados calculados nos seus buffers internos, que podem
variar de 1 a 5, dependendo do indicador) podem ser copiados para um programa de MQL5 utilizando a
fun√ß√£o CopyBuffer().
Voc√™ n√£o pode consultar os dados do indicador diretamente ap√≥s ter sido criado, porque o c√°lculo de
valores dos indicadores requer algum tempo, por isso √© melhor criar o indicador manipulando em
OnInit(). A Fun√ß√£o iCustom() cria o indicador personalizado correspondente, e retorna seu manipulador
no caso de ser criado com √™xito. Indicadores personalizadas podem conter at√© 512 buffers de
indicador, o conte√∫do do qual pode tamb√©m ser obtida atrav√©s da fun√ß√£o CopyBuffer(), usando o
manipulador obtido.
Existe um m√©todo universal para a cria√ß√£o qualquer indicador t√©cnico usando a fun√ß√£o
IndicatorCreate(). Esta fun√ß√£o aceita os seguintes dados como par√¢metros de entrada:
¬∑ Nome do s√≠mbolo;
¬∑ timeframe;
¬∑ tipo de indicador para criar;
¬∑ n√∫mero de par√¢metros de entrada do indicador;
¬∑ um array do tipo MqlParam contendo todos os par√¢metros de entrada necess√°rios.
A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √© mais utilizado, usando
a fun√ß√£o IndicatorRelease(),onde o manipulador de indicador √© transmitido.
Nota. Chamada repetida da fun√ß√£o do indicador com os mesmos par√¢metros dentro de um MQL5-
programa n√£o resulta num aumento m√∫ltiplo do contador de refer√™ncia, o contador ser√° aumentado
apenas uma vez por 1. No entanto, √© recomendado obter os manipuladores de indicadores em fun√ß√£o
OnInit() ou no construtor da classe, e ainda utilizar estes manipuladores em outras fun√ß√µes. O
contador de refer√™ncia diminui quando um MQL5-programa √© desinicializado.
Todas as fun√ß√µes de indicador tem pelo menos dois par√¢metros - o s√≠mbolo e o per√≠odo. O NULL Valor
do s√≠mbolo significa o s√≠mbolo corrente, o valor 0 (zero) do per√≠odo significa o prazo corrente.
<h3>Fun√ß√£o</h3>
<h3>Retorna o manipulador do indicador:</h3>
iAC
<h3>Accelerator Oscillator</h3>
iAD
<h3>Accumulation/Distribution</h3>
iADX
<h3>Average Directional Index</h3>
iADXWilder
<h3>Average Directional Index by Welles Wilder</h3>
iAlligator
<h3>Alligator</h3></p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2765
<h3>Fun√ß√£o</h3>
<h3>Retorna o manipulador do indicador:</h3>
iAMA
<h3>Adaptive Moving Average</h3>
iAO
<h3>Awesome Oscillator</h3>
iATR
<h3>Average True Range</h3>
iBearsPower
<h3>Bears Power</h3>
iBands
<h3>Bollinger Bands¬Æ</h3>
iBullsPower
<h3>Bulls Power</h3>
iCCI
<h3>Commodity Channel Index</h3>
iChaikin
<h3>Chaikin Oscillator</h3>
iCustom
<h3>Custom indicator</h3>
iDEMA
<h3>Double Exponential Moving Average</h3>
iDeMarker
<h3>DeMarker</h3>
iEnvelopes
<h3>Envelopes</h3>
iForce
<h3>Force Index</h3>
iFractals
<h3>Fractals</h3>
iFrAMA
<h3>Fractal Adaptive Moving Average</h3>
iGator
<h3>Gator Oscillator</h3>
iIchimoku
<h3>Ichimoku Kinko Hyo</h3>
iBWMFI
<h3>Market Facilitation Index by Bill Williams</h3>
iMomentum
<h3>Momentum</h3>
iMFI
<h3>Money Flow Index</h3>
iMA
<h3>Moving Average</h3>
iOsMA
<h3>Moving Average of Oscillator (MACD histogram)</h3>
iMACD
<h3>Moving Averages Convergence-Divergence</h3>
iOBV
<h3>On Balance Volume</h3>
iSAR
<h3>Parabolic Stop And Reverse System</h3>
iRSI
<h3>Relative Strength Index</h3>
iRVI
<h3>Relative Vigor Index</h3>
iStdDev
<h3>Standard Deviation</h3>
iStochastic
<h3>Stochastic Oscillator</h3>
iTEMA
<h3>Triple Exponential Moving Average</h3></p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2766
<h3>Fun√ß√£o</h3>
<h3>Retorna o manipulador do indicador:</h3>
iTriX
<h3>Triple Exponential Moving Averages Oscillator</h3>
iWPR
<h3>Williams&#x27; Percent Range</h3>
iVIDyA
<h3>Variable Index Dynamic Average</h3>
iVolumes
<h3>Volumes</h3></p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2767
iAC
A fun√ß√£o cria o Accelerator Oscillator num cach√™ global do terminal do cliente e retorna seu
manipulador. Tem apenas um buffer.
</p>
<pre><code class="language-mql5">
int¬† iAC(
   string¬†          symbol,¬†    // s√≠mbolo nome
   ENUM_TIMEFRAMES¬† period¬†     // per√≠odo
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in] O nome do s√≠mbolo de seguran√ßa, os dados que devem ser usados para calcular o indicador. O
valor NULL significa o s√≠mbolo atual.
period
[in] O valor do per√≠odo pode ser um dos valores do enumerador ENUM_TIMEFRAMES, 0 (zero)
significa o prazo corrente.
<h3>Valor de retorno</h3>
Retorna o manipulador de um indicador t√©cnico especifico, em caso de falha de retorna
INVALID_HANDLE. A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √©
mais utilizado, usando a fun√ß√£o IndicatorRelease(), onde o manipulador de indicador √© transmitido.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                                     Demo_iAC.mq5 |
//|                        Copyright 2011, MetaQuotes Software Corp. |
//|                                            ;https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;
#property description &quot;O indicador demonstra como obter dados&quot;
#property description &quot;de buffers do indicador para o indicador t√©cnico iAC.&quot;
#property description &quot;Um s√≠mbolo e o prazo utilizado para o c√°lculo do indicador,&quot;
#property description &quot;s√£o definidos pelos par√¢metros de s√≠mbolo e per√≠odo.&quot;
#property description &quot;O m√©todo de cria√ß√£o do manipulador √© definido atrav√©s do par√¢me
#property indicator_separate_window
#property indicator_buffers 2
#property indicator_plots   1
//--- plotagem do iAC
#property indicator_label1  &quot;iAC&quot;
#property indicator_type1   DRAW_COLOR_HISTOGRAM
#property indicator_color1  clrGreen, clrRed
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2768
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Enumerador dos m√©todos de cria√ß√£o do manipulador¬†                |
//+------------------------------------------------------------------+
enum Creation
  {
   Call_iAC,               // usar iAC
   Call_IndicatorCreate    // usar IndicatorCreate
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//--- par√¢metros de entrada
input Creation             type=Call_iAC;          // tipo da fun√ß√£o
input string               symbol=&quot; &quot;;             // s√≠mbolo
input ENUM_TIMEFRAMES      period=PERIOD_CURRENT;  // timeframe
//--- buffers do indicador
double iACBuffer[];
double iACColors[];
//--- vari√°vel para armazenamento do manipulador do indicador iAC
int    handle;
//--- vari√°vel para armazenamento
string name=symbol;
//--- nome do indicador num gr√°fico
string short_name;
//--- n√≥s manteremos o n√∫mero de valores no indicador Accelerator Oscillator
int    bars_calculated=0;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- atribui√ß√£o de arrays para buffers do indicador
   SetIndexBuffer(0,iACBuffer,INDICATOR_DATA);
   SetIndexBuffer(1,iACColors,INDICATOR_COLOR_INDEX);
//--- determinar o s√≠mbolo do indicador, √© desenhado para
   name=symbol;
//--- excluir os espa√ßos √† direita e √† esquerda
   StringTrimRight(name);
   StringTrimLeft(name);
//--- se resulta em comprimento zero da string do &#x27;name&#x27;
   if(StringLen(name)==0)
     {
      //--- tomar o s√≠mbolo do gr√°fico, o indicador est√° anexado para
      name=_Symbol;
     }
//--- criar manipulador do indicador
   if(type==Call_iAC)
      handle=iAC(name,period);
   else
      handle=IndicatorCreate(name,period,IND_AC);
//--- se o manipulador n√£o √© criado
   if(handle==INVALID_HANDLE)</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2769
</p>
<pre><code class="language-mql5">
     {
      //--- mensagem sobre a falha e a sa√≠da do c√≥digo de erro
      PrintFormat(&quot;Falha ao criar o manipulador do indicador iAC para o s√≠mbolo %s/%s,
                  name,
                  EnumToString(period),
                  GetLastError());
      //--- o indicador √© interrompido precocemente
      return(INIT_FAILED);
     }
//--- mostrar o s√≠mbolo/prazo do indicador Accelerator Oscillator, √© calculado para
   short_name=StringFormat(&quot;iAC(%s/%s)&quot;,name,EnumToString(period));
   IndicatorSetString(INDICATOR_SHORTNAME,short_name);
//--- inicializa√ß√£o normal do indicador
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &amp;time[],
                const double &amp;open[],
                const double &amp;high[],
                const double &amp;low[],
                const double &amp;close[],
                const long &amp;tick_volume[],
                const long &amp;volume[],
                const int &amp;spread[])
  {
//--- n√∫mero de valores copiados a partir do indicador iAC
   int values_to_copy;
//--- determinar o n√∫mero de valores calculados no indicador
   int calculated=BarsCalculated(handle);
   if(calculated&lt;=0)
     {
      PrintFormat(&quot;BarsCalculated() retornando %d, c√≥digo de erro %d&quot;,calculated,GetLa
      return(0);
     }
//--- se for o primeiro arranque do c√°lculo do indicador, ou se o n√∫mero de valores em
//--- ou se √© necess√°rio c√°lculo do indicador para duas ou mais barras (isso significa
   if(prev_calculated==0 || calculated!=bars_calculated || rates_total&gt;prev_calculated
     {
      //--- Se o array iACBuffer √© maior do que o n√∫mero de valores no indicador iAC p
      //--- caso contr√°rio, copiamos menor do que o tamanho dos buffers do indicador
      if(calculated&gt;rates_total) values_to_copy=rates_total;
      else                       values_to_copy=calculated;
     }
   else
     {</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2770
</p>
<pre><code class="language-mql5">
      //--- isso significa que n√£o √© a primeira vez do c√°lculo do indicador, √© desde a
      //--- para o c√°lculo n√£o mais do que uma barra √© adicionada
      values_to_copy=(rates_total-prev_calculated)+1;
     }
//--- preencher os arrays iACBuffer e iACColors com valores a partir do indicador Acce
//--- se FillArraysFromBuffer retorna falso, isto significa que a informa√ß√£o ainda n√£o
   if(!FillArraysFromBuffer(iACBuffer,iACColors,handle,values_to_copy)) return(0);
//--- formar a mensagem
   string comm=StringFormat(&quot;%s ==&gt;  Valor atualizado no indicador %s: %d&quot;,
                            TimeToString(TimeCurrent(),TIME_DATE|TIME_SECONDS),
                            short_name,
                            values_to_copy);
//--- exibir a mensagem de servi√ßo no gr√°fico
   Comment(comm);
//--- memorizar o n√∫mero de valores no indicador Accelerator Oscillator
   bars_calculated=calculated;
//--- retorna o valor prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Preenchendo buffers do indicador a partir do indicador iAC       |
//+------------------------------------------------------------------+
bool FillArraysFromBuffer(double &amp;values[],        // valores do buffer do indicator A
                          double &amp;color_indexes[], // buffer de cor(para armazenar o √≠
                          int ind_handle,          // manipulador do indicador iAC
                          int amount               // n√∫mero dos valores copiados
                          )
  {
//--- redefinir o c√≥digo de erro
   ResetLastError();
//--- preencher uma parte do array iACBuffer com valores a partir do buffer do indicad
   if(CopyBuffer(ind_handle,0,0,amount,values)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados a partir do indicador iAC, c√≥digo de erro %d&quot;
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- agora copiar o √≠ndice de cores
   if(CopyBuffer(ind_handle,1,0,amount,color_indexes)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar valores de cor a partir do indicador iAC, c√≥digo de
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- est√° tudo bem
   return(true);
</code></pre>
<p>
  }</p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2771
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de desinicializa√ß√£o do indicador                          |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   if(handle!=INVALID_HANDLE)
      IndicatorRelease(handle);
//--- limpar o gr√°fico ap√≥s excluir o indicador
   Comment(&quot;&quot;);
</code></pre>
<p>
  }</p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2772
iAD
A fun√ß√£o retorna o manipulador do indicador Accumulation/Distribution. Tem apenas um buffer.
</p>
<pre><code class="language-mql5">
int¬† iAD(
   string¬†              symbol,¬†            // s√≠mbolo nome
   ENUM_TIMEFRAMES¬†     period,¬†            // per√≠odo
   ENUM_APPLIED_VOLUME¬† applied_volume¬†     // tipo de volume para o c√°lculo
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in] O nome do s√≠mbolo de seguran√ßa, os dados que devem ser usados para calcular o indicador. O
valor NULL significa o s√≠mbolo atual.
period
[in] O valor do per√≠odo pode ser um dos valores do enumerador ENUM_TIMEFRAMES, 0 (zero)
significa o prazo corrente.
applied_volume
[in]   O volume utilizado. Can be any of ENUM_APPLIED_VOLUME values.
<h3>Valor de retorno</h3>
Retorna o manipulador de um indicador t√©cnico especifico, em caso de falha de retorna
INVALID_HANDLE. A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √©
mais utilizado, usando a fun√ß√£o IndicatorRelease(), onde o manipulador de indicador √© transmitido.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                                     Demo_iAD.mq5 |
//|                        Copyright 2011, MetaQuotes Software Corp. |
//|                                            ;https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;
#property description &quot;O indicador demonstra como obter dados&quot;
#property description &quot;dos buffers do indicador para o indicador t√©cnico iAD.&quot;
#property description &quot;Um s√≠mbolo e o prazo utilizado para o c√°lculo do indicador,&quot;
#property description &quot;s√£o definidos pelos par√¢metros de s√≠mbolo e per√≠odo.&quot;
#property description &quot;O m√©todo de cria√ß√£o do manipulador √© definido atrav√©s do par√¢me
#property indicator_separate_window
#property indicator_buffers 1
#property indicator_plots   1
//--- plotar iAD
#property indicator_label1  &quot;iAD&quot;
#property indicator_type1   DRAW_LINE
#property indicator_color1  clrLightSeaGreen</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2773
</p>
<pre><code class="language-mql5">
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1
//+------------------------------------------------------------------+
//| Enumerador dos m√©todos de cria√ß√£o do manipulador¬†                |
//+------------------------------------------------------------------+
enum Creation
  {
   Call_iAD,               // usar iAD
   Call_IndicatorCreate    // usar IndicatorCreate
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//--- par√¢metros de entrada
input Creation             type=Call_iAD;          // tipo da fun√ß√£o
input ENUM_APPLIED_VOLUME  volumes;                // volume usado
input string               symbol=&quot; &quot;;             // s√≠mbolo
input ENUM_TIMEFRAMES      period=PERIOD_CURRENT;  // timeframe
//--- buffer do indicador
double         iADBuffer[];
//--- vari√°vel para armazenar o manipulador do indicador iAD
int    handle;
//--- vari√°vel para armazenamento
string name=symbol;
//--- nome do indicador num gr√°fico
string short_name;
//--- manteremos o n√∫mero de valores no indicador Accumulation/Distribution
int    bars_calculated=0;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- atribui√ß√£o de array para buffer do indicador
   SetIndexBuffer(0,iADBuffer,INDICATOR_DATA);
//--- determinar o s√≠mbolo do indicador, √© desenhado para
   name=symbol;
//--- excluir os espa√ßos √† direita e √† esquerda
   StringTrimRight(name);
   StringTrimLeft(name);
//--- se resulta em comprimento zero da string do &#x27;name&#x27;
   if(StringLen(name)==0)
     {
      //--- tomar o s√≠mbolo do gr√°fico, o indicador est√° anexado para
      name=_Symbol;
     }
//--- criar manipulador do indicador
   if(type==Call_iAD)
      handle=iAD(name,period,volumes);
   else
     {
      //--- preencher a estrutura com os par√¢metros do indicador</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2774
</p>
<pre><code class="language-mql5">
      MqlParam pars[1];
      pars[0].type=TYPE_INT;
      pars[0].integer_value=volumes;
      handle=IndicatorCreate(name,period,IND_AD,1,pars);
     }
//--- se o manipulador n√£o √© criado
   if(handle==INVALID_HANDLE)
     {
      //--- mensagem sobre a falha e a sa√≠da do c√≥digo de erro
      PrintFormat(&quot;Falha ao criar o manipulador do indicador iAD para o s√≠mbolo %s/%s,
                  name,
                  EnumToString(period),
                  GetLastError());
      //--- o indicador √© interrompido precocemente
      return(INIT_FAILED);
     }
//--- mostrar o s√≠mbolo/prazo, o indicador de Accumulation/Distribution √© calculado pa
   short_name=StringFormat(&quot;iAD(%s/%s)&quot;,name,EnumToString(period));
   IndicatorSetString(INDICATOR_SHORTNAME,short_name);
//--- inicializa√ß√£o normal do indicador  
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &amp;time[],
                const double &amp;open[],
                const double &amp;high[],
                const double &amp;low[],
                const double &amp;close[],
                const long &amp;tick_volume[],
                const long &amp;volume[],
                const int &amp;spread[])
  {
//--- n√∫mero de valores copiados a partir do indicador iAD
   int values_to_copy;
//--- determinar o n√∫mero de valores calculados no indicador
   int calculated=BarsCalculated(handle);
   if(calculated&lt;=0)
     {
      PrintFormat(&quot;BarsCalculated() retornando %d, c√≥digo de erro %d&quot;,calculated,GetLa
      return(0);
     }
//--- se for o primeiro arranque do c√°lculo do indicador, ou se o n√∫mero de valores em
//--- ou se √© necess√°rio c√°lculo do indicador para duas ou mais barras (isso significa
   if(prev_calculated==0 || calculated!=bars_calculated || rates_total&gt;prev_calculated
     {</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2775
</p>
<pre><code class="language-mql5">
      //--- se o array iADBuffer √© maior do que o n√∫mero de valores no indicador iAD p
      //--- caso contr√°rio, copiamos menor do que o tamanho dos buffers do indicador
      if(calculated&gt;rates_total) values_to_copy=rates_total;
      else                       values_to_copy=calculated;
     }
   else
     {
      //--- isso significa que n√£o √© a primeira vez do c√°lculo do indicador, √© desde a
      //--- para o c√°lculo n√£o mais do que uma barra √© adicionada
      values_to_copy=(rates_total-prev_calculated)+1;
     }
//--- preencher o array iADBuffer com valores do indicador Accumulation/Distribution
//--- se FillArraysFromBuffer retorna falso, isto significa que a informa√ß√£o ainda n√£o
   if(!FillArrayFromBuffer(iADBuffer,handle,values_to_copy)) return(0);
//--- formar a mensagem
   string comm=StringFormat(&quot;%s ==&gt;  Valor atualizado no indicador %s: %d&quot;,
                            TimeToString(TimeCurrent(),TIME_DATE|TIME_SECONDS),
                            short_name,
                            values_to_copy);
//--- exibir a mensagem de servi√ßo no gr√°fico
   Comment(comm);
//--- memorizar o n√∫mero de valores no indicador Accumulation/Distribution
   bars_calculated=calculated;
//--- retorna o valor prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Preenchendo buffers do indicador a partir do indicador iAD     |
//+------------------------------------------------------------------+
bool FillArrayFromBuffer(double &amp;values[],   // valores do buffer do indicator da linh
                          int ind_handle,    // manipulador do indicador iAD
                          int amount         // n√∫mero dos valores copiados
                          )
  {
//--- redefinir o c√≥digo de erro
   ResetLastError();
//--- preencher uma parte do array iADBuffer com valores a partir do buffer do indicad
   if(CopyBuffer(ind_handle,0,0,amount,values)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados a partir do indicador iAD, c√≥digo de erro %d&quot;
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- est√° tudo bem
   return(true);
</code></pre>
<p>
  }  
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de desinicializa√ß√£o do indicador                          |</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2776
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   if(handle!=INVALID_HANDLE)
      IndicatorRelease(handle);
//--- limpar o gr√°fico ap√≥s excluir o indicador
   Comment(&quot;&quot;);
</code></pre>
<p>
  }</p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2777
iADX
A fun√ß√£o retorna o manipulador do indicador Average Directional Movement Index.
</p>
<pre><code class="language-mql5">
int¬† iADX(
   string¬†          symbol,¬†        // s√≠mbolo nome
   ENUM_TIMEFRAMES¬† period,¬†        // per√≠odo
   int¬†             adx_period¬†     // per√≠odo m√©dio
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in] O nome do s√≠mbolo de seguran√ßa, os dados que devem ser usados para calcular o indicador. O
valor NULL significa o s√≠mbolo atual.
period
[in] O valor do per√≠odo pode ser um dos valores ENUM_TIMEFRAMES, 0 (zero) significa o prazo
corrente.
adx_period
[in]  Per√≠odo para calcular o √≠ndice.
<h3>Valor de retorno</h3>
Retorna o manipulador de um indicador t√©cnico especifico, em caso de falha de retorna
INVALID_HANDLE. A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √©
mais utilizado, usando a fun√ß√£o IndicatorRelease(), onde o manipulador de indicador √© transmitido.
<h3>Observa√ß√£o</h3>
Os n√∫meros do buffer s√£o os seguintes: 0 - MAIN_LINE, 1 - PLUSDI_LINE, 2 - MINUSDI_LINE.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                                    Demo_iADX.mq5 |
//|                        Copyright 2011, MetaQuotes Software Corp. |
//|                                            ;https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;
#property description &quot;O indicador demonstra como obter dados&quot;
#property description &quot;dos buffers do indicador para o indicador t√©cnico iADX.&quot;
#property description &quot;Um s√≠mbolo e o prazo utilizado para o c√°lculo do indicador,&quot;
#property description &quot;s√£o definidos pelos par√¢metros de s√≠mbolo e per√≠odo.&quot;
#property description &quot;O m√©todo de cria√ß√£o do manipulador √© definido atrav√©s do par√¢me
#property indicator_separate_window
#property indicator_buffers 3
#property indicator_plots   3</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2778
</p>
<pre><code class="language-mql5">
//--- plotar ADX
#property indicator_label1  &quot;ADX&quot;
#property indicator_type1   DRAW_LINE
#property indicator_color1  clrLightSeaGreen
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1
//--- plotar DI_plus
#property indicator_label2  &quot;DI_plus&quot;
#property indicator_type2   DRAW_LINE
#property indicator_color2  clrYellowGreen
#property indicator_style2  STYLE_SOLID
#property indicator_width2  1
//--- plotar DI_minus
#property indicator_label3  &quot;DI_minus&quot;
#property indicator_type3   DRAW_LINE
#property indicator_color3  clrWheat
#property indicator_style3  STYLE_SOLID
#property indicator_width3  1
//+------------------------------------------------------------------+
//| Enumerador dos m√©todos de cria√ß√£o do manipulador¬†                |
//+------------------------------------------------------------------+
enum Creation
  {
   Call_iADX,              // usar iADX
   Call_IndicatorCreate    // usar IndicatorCreate
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//--- par√¢metros de entrada
input Creation             type=Call_iADX;         // tipo da fun√ß√£o
input int                  adx_period=14;          // c√°lculo do per√≠odo
input string               symbol=&quot; &quot;;             // s√≠mbolo
input ENUM_TIMEFRAMES      period=PERIOD_CURRENT;  // timeframe
//--- buffers do indicador
double         ADXBuffer[];
double         DI_plusBuffer[];
double         DI_minusBuffer[];
//--- vari√°vel para armazenar o manipulador do indicador iADX
int    handle;
//--- vari√°vel para armazenamento
string name=symbol;
//--- nome do indicador num gr√°fico
string short_name;
//--- manteremos o n√∫mero de valores no indicador Average Directional Movement Index
int    bars_calculated=0;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- atribui√ß√£o de arrays para buffers do indicador</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2779
</p>
<pre><code class="language-mql5">
   SetIndexBuffer(0,ADXBuffer,INDICATOR_DATA);
   SetIndexBuffer(1,DI_plusBuffer,INDICATOR_DATA);
   SetIndexBuffer(2,DI_minusBuffer,INDICATOR_DATA);
//--- determinar o s√≠mbolo do indicador, √© desenhado para
   name=symbol;
//--- excluir os espa√ßos √† direita e √† esquerda
   StringTrimRight(name);
   StringTrimLeft(name);
//--- se resulta em comprimento zero da string do &#x27;name&#x27;
   if(StringLen(name)==0)
     {
      //--- tomar o s√≠mbolo do gr√°fico, o indicador est√° anexado para
      name=_Symbol;
     }
//--- criar manipulador do indicador
   if(type==Call_iADX)
      handle=iADX(name,period,adx_period);
   else
     {
      //--- preencher a estrutura com os par√¢metros do indicador
      MqlParam pars[1];
      pars[0].type=TYPE_INT;
      pars[0].integer_value=adx_period;
      handle=IndicatorCreate(name,period,IND_ADX,1,pars);
     }
//--- se o manipulador n√£o √© criado
   if(handle==INVALID_HANDLE)
     {
      //--- mensagem sobre a falha e a sa√≠da do c√≥digo de erro
      PrintFormat(&quot;Falha ao criar o manipulador do indicador iADX para o s√≠mbolo %s/%s
                  name,
                  EnumToString(period),
                  GetLastError());
      //--- o indicador √© interrompido precocemente
      return(INIT_FAILED);
     }
//--- mostrar o s√≠mbolo/prazo, o indicador de Average Directional Movement Index √© cal
   short_name=StringFormat(&quot;iADX(%s/%s period=%d)&quot;,name,EnumToString(period),adx_perio
   IndicatorSetString(INDICATOR_SHORTNAME,short_name);
//--- inicializa√ß√£o normal do indicador    
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &amp;time[],
                const double &amp;open[],</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2780
</p>
<pre><code class="language-mql5">
                const double &amp;high[],
                const double &amp;low[],
                const double &amp;close[],
                const long &amp;tick_volume[],
                const long &amp;volume[],
                const int &amp;spread[])
  {
//--- n√∫mero de valores copiados a partir do indicador iADX
   int values_to_copy;
//--- determinar o n√∫mero de valores calculados no indicador
   int calculated=BarsCalculated(handle);
   if(calculated&lt;=0)
     {
      PrintFormat(&quot;BarsCalculated() retornando %d, c√≥digo de erro %d&quot;,calculated,GetLa
      return(0);
     }
//--- se for o primeiro arranque do c√°lculo do indicador, ou se o n√∫mero de valores em
//--- ou se √© necess√°rio c√°lculo do indicador para duas ou mais barras (isso significa
   if(prev_calculated==0 || calculated!=bars_calculated || rates_total&gt;prev_calculated
     {
      //--- se o array iADXBuffer √© maior do que o n√∫mero de valores no indicador iADX
      //--- caso contr√°rio, copiamos menor do que o tamanho dos buffers do indicador
      if(calculated&gt;rates_total) values_to_copy=rates_total;
      else                       values_to_copy=calculated;
     }
   else
     {
      //--- isso significa que n√£o √© a primeira vez do c√°lculo do indicador, √© desde a
      //--- para o c√°lculo n√£o mais do que uma barra √© adicionada
      values_to_copy=(rates_total-prev_calculated)+1;
     }
//--- preencher o array com valores do indicador Average Directional Movement Index
//--- se FillArraysFromBuffer retorna falso, isto significa que a informa√ß√£o ainda n√£o
   if(!FillArraysFromBuffers(ADXBuffer,DI_plusBuffer,DI_minusBuffer,handle,values_to_c
//--- formar a mensagem
   string comm=StringFormat(&quot;%s ==&gt;  Valor atualizado no indicador %s: %d&quot;,
                            TimeToString(TimeCurrent(),TIME_DATE|TIME_SECONDS),
                            short_name,
                            values_to_copy);
//--- exibir a mensagem de servi√ßo no gr√°fico
   Comment(comm);
//--- memorizar o n√∫mero de valores no indicador Average Directional Movement Index
   bars_calculated=calculated;
//--- retorna o valor prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Preenchendo buffers do indicador a partir do indicador iADX      |
//+------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2781
</p>
<pre><code class="language-mql5">
bool FillArraysFromBuffers(double &amp;adx_values[],      // buffer do indicador da linha 
                           double &amp;DIplus_values[],   // buffer do indicador para DI+
                           double &amp;DIminus_values[],  // buffer do indicador para DI-
                           int ind_handle,            // manipulador do indicador iADX
                           int amount                 // n√∫mero dos valores copiados
                           )
  {
//--- redefinir o c√≥digo de erro
   ResetLastError();
//--- preencher uma parte do array iADXBuffer com valores a partir do buffer do indica
   if(CopyBuffer(ind_handle,0,0,amount,adx_values)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados a partir do indicador iADX, c√≥digo de erro %d
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- preencher uma parte do array DI_plusBuffer com valores a partir do buffer do ind
   if(CopyBuffer(ind_handle,1,0,amount,DIplus_values)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados a partir do indicador iADX, c√≥digo de erro %d
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- preencher uma parte do array DI_plusBuffer com valores a partir do buffer do ind
   if(CopyBuffer(ind_handle,2,0,amount,DIminus_values)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados a partir do indicador iADX, c√≥digo de erro %d
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- est√° tudo bem
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de desinicializa√ß√£o do indicador                          |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   if(handle!=INVALID_HANDLE)
      IndicatorRelease(handle);
//--- limpar o gr√°fico ap√≥s excluir o indicador
   Comment(&quot;&quot;);
</code></pre>
<p>
  }</p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2782
iADXWilder
A fun√ß√£o retorna o manipulador de Average Directional Movement Index por Welles Wilder.
</p>
<pre><code class="language-mql5">
int¬† iADXWilder(
   string¬†          symbol,¬†        // s√≠mbolo nome
   ENUM_TIMEFRAMES¬† period,¬†        // per√≠odo
   int¬†             adx_period¬†     // per√≠odo m√©dio
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in] O nome do s√≠mbolo de seguran√ßa, os dados que devem ser usados para calcular o indicador. O
valor NULL significa o s√≠mbolo atual.
period
[in] O valor do per√≠odo pode ser um dos valores ENUM_TIMEFRAMES, 0 (zero) significa o prazo
corrente.
adx_period
[in]  Per√≠odo para calcular o √≠ndice.
<h3>Valor de retorno</h3>
Retorna o manipulador de um indicador t√©cnico especifico, em caso de falha de retorna
INVALID_HANDLE. A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √©
mais utilizado, usando a fun√ß√£o IndicatorRelease(), onde o manipulador de indicador √© transmitido.
<h3>Observa√ß√£o</h3>
Os n√∫meros do buffer s√£o os seguintes: 0 - MAIN_LINE, 1 - PLUSDI_LINE, 2 - MINUSDI_LINE.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                                   iADXWilder.mq5 |
//|                        Copyright 2011, MetaQuotes Software Corp. |
//|                                            ;https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;
#property description &quot;O indicador demonstra como obter dados&quot;
#property description &quot;dos buffers do indicador¬† para o indicador t√©cnico iADXWilder.&quot;
#property description &quot;Um s√≠mbolo e o prazo utilizado para o c√°lculo do indicador,&quot;
#property description &quot;s√£o definidos pelos par√¢metros de s√≠mbolo e per√≠odo.&quot;
#property description &quot;O m√©todo de cria√ß√£o do manipulador √© definido atrav√©s do par√¢me
#property indicator_separate_window
#property indicator_buffers 3
#property indicator_plots   3</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2783
</p>
<pre><code class="language-mql5">
//--- plotar ADX
#property indicator_label1  &quot;ADX&quot;
#property indicator_type1   DRAW_LINE
#property indicator_color1  clrLightSeaGreen
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1
//--- plotar DI_plus
#property indicator_label2  &quot;DI_plus&quot;
#property indicator_type2   DRAW_LINE
#property indicator_color2  clrYellowGreen
#property indicator_style2  STYLE_SOLID
#property indicator_width2  1
//--- plotar DI_minus
#property indicator_label3  &quot;DI_minus&quot;
#property indicator_type3   DRAW_LINE
#property indicator_color3  clrWheat
#property indicator_style3  STYLE_SOLID
#property indicator_width3  1
//+------------------------------------------------------------------+
//| Enumerador dos m√©todos de cria√ß√£o do manipulador¬†                |
//+------------------------------------------------------------------+
enum Creation
  {
   Call_iADXWilder,        // usar iADXWilder
   Call_IndicatorCreate    // usar IndicatorCreate
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//--- par√¢metros de entrada
input Creation             type=Call_iADXWilder;   // tipo da fun√ß√£o
input int                  adx_period=14;          // c√°lculo do per√≠odo
input string               symbol=&quot; &quot;;             // s√≠mbolo
input ENUM_TIMEFRAMES      period=PERIOD_CURRENT;  // timeframe
//--- buffers do indicador
double         ADXBuffer[];
double         DI_plusBuffer[];
double         DI_minusBuffer[];
//--- vari√°vel para armazenar o manipulador do indicador iADXWilder
int    handle;
//--- vari√°vel para armazenamento
string name=symbol;
//--- nome do indicador num gr√°fico
string short_name;
//--- manteremos o n√∫mero de valores no indicador Average Directional Movement Index p
int    bars_calculated=0;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- atribui√ß√£o de arrays para buffers do indicador</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2784
</p>
<pre><code class="language-mql5">
   SetIndexBuffer(0,ADXBuffer,INDICATOR_DATA);
   SetIndexBuffer(1,DI_plusBuffer,INDICATOR_DATA);
   SetIndexBuffer(2,DI_minusBuffer,INDICATOR_DATA);
//--- determinar o s√≠mbolo do indicador, √© desenhado para
   name=symbol;
//--- excluir os espa√ßos √† direita e √† esquerda
   StringTrimRight(name);
   StringTrimLeft(name);
//--- se resulta em comprimento zero da string do &#x27;name&#x27;
   if(StringLen(name)==0)
     {
      //--- tomar o s√≠mbolo do gr√°fico, o indicador est√° anexado para
      name=_Symbol;
     }
//--- criar manipulador do indicador
   if(type==Call_iADXWilder)
      handle=iADXWilder(name,period,adx_period);
   else
     {
      //--- preencher a estrutura com os par√¢metros do indicador
      MqlParam pars[1];
      pars[0].type=TYPE_INT;
      pars[0].integer_value=adx_period;
      handle=IndicatorCreate(name,period,IND_ADXW,1,pars);
     }
//--- se o manipulador n√£o √© criado
   if(handle==INVALID_HANDLE)
     {
      //--- mensagem sobre a falha e a sa√≠da do c√≥digo de erro
      PrintFormat(&quot;Falha ao criar o manipulador do indicador iADXWilder para o s√≠mbolo
                  name,
                  EnumToString(period),
                  GetLastError());
      //--- o indicador √© interrompido precocemente
      return(INIT_FAILED);
     }
//--- mostrar o s√≠mbolo/prazo, o indicador de Average Directional Movement Index por W
   short_name=StringFormat(&quot;iADXWilder(%s/%s period=%d)&quot;,name,EnumToString(period),adx
   IndicatorSetString(INDICATOR_SHORTNAME,short_name);
//--- inicializa√ß√£o normal do indicador    
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &amp;time[],
                const double &amp;open[],</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2785
</p>
<pre><code class="language-mql5">
                const double &amp;high[],
                const double &amp;low[],
                const double &amp;close[],
                const long &amp;tick_volume[],
                const long &amp;volume[],
                const int &amp;spread[])
  {
//--- n√∫mero de valores copiados a partir do indicador iADXWilder
   int values_to_copy;
//--- determinar o n√∫mero de valores calculados no indicador
   int calculated=BarsCalculated(handle);
   if(calculated&lt;=0)
     {
      PrintFormat(&quot;BarsCalculated() retornando %d, c√≥digo de erro %d&quot;,calculated,GetLa
      return(0);
     }
//--- se for o primeiro arranque do c√°lculo do indicador, ou se o n√∫mero de valores em
//--- ou se √© necess√°rio c√°lculo do indicador para duas ou mais barras (isso significa
   if(prev_calculated==0 || calculated!=bars_calculated || rates_total&gt;prev_calculated
     {
      //--- se o array iADXBuffer √© maior do que o n√∫mero de valores no indicador iADX
      //--- caso contr√°rio, copiamos menor do que o tamanho dos buffers do indicador
      if(calculated&gt;rates_total) values_to_copy=rates_total;
      else                       values_to_copy=calculated;
     }
   else
     {
      //--- isso significa que n√£o √© a primeira vez do c√°lculo do indicador, √© desde a
      //--- para o c√°lculo n√£o mais do que uma barra √© adicionada
      values_to_copy=(rates_total-prev_calculated)+1;
     }
//--- preencher o array com valores do indicador Average Directional Movement Index po
//--- se FillArraysFromBuffer retorna falso, isto significa que a informa√ß√£o ainda n√£o
   if(!FillArraysFromBuffers(ADXBuffer,DI_plusBuffer,DI_minusBuffer,handle,values_to_c
//--- formar a mensagem
   string comm=StringFormat(&quot;%s ==&gt;  Valor atualizado no indicador %s: %d&quot;,
                            TimeToString(TimeCurrent(),TIME_DATE|TIME_SECONDS),
                            short_name,
                            values_to_copy);
//--- exibir a mensagem de servi√ßo no gr√°fico
   Comment(comm);
//--- memorizar o n√∫mero de valores no indicador Average Directional Movement Index
   bars_calculated=calculated;
//--- retorna o valor prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Preenchendo buffers do indicador a partir do indicador iADXWilder|
//+------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2786
</p>
<pre><code class="language-mql5">
bool FillArraysFromBuffers(double &amp;adx_values[],      // buffer do indicador da linha 
                           double &amp;DIplus_values[],   // buffer do indicador para DI+
                           double &amp;DIminus_values[],  // buffer do indicador para DI-
                           int ind_handle,            // manipulador do indicador iADX
                           int amount                 // n√∫mero dos valores copiados
                           )
  {
//--- redefinir o c√≥digo de erro
   ResetLastError();
//--- preencher uma parte do array iADXBuffer com valores a partir do buffer do indica
   if(CopyBuffer(ind_handle,0,0,amount,adx_values)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Failed to copy data from the iADXWilder indicator, error code %d&quot;,G
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- preencher uma parte do array DI_plusBuffer com valores a partir do buffer do ind
   if(CopyBuffer(ind_handle,1,0,amount,DIplus_values)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Failed to copy data from the iADXWilder indicator, error code %d&quot;,G
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- preencher uma parte do array DI_plusBuffer com valores a partir do buffer do ind
   if(CopyBuffer(ind_handle,2,0,amount,DIminus_values)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Failed to copy data from the iADXWilder indicator, error code %d&quot;,G
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- est√° tudo bem
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de desinicializa√ß√£o do indicador                          |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   if(handle!=INVALID_HANDLE)
      IndicatorRelease(handle);
//--- limpar o gr√°fico ap√≥s excluir o indicador
   Comment(&quot;&quot;);
</code></pre>
<p>
  }</p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2787
iAlligator
A fun√ß√£o retorna o manipulador do indicador Alligator.
</p>
<pre><code class="language-mql5">
int¬† iAlligator(
   string¬†             symbol,¬†           // s√≠mbolo nome
   ENUM_TIMEFRAMES¬†    period,¬†           // per√≠odo
   int¬†                jaw_period,¬†       // per√≠odo para c√°lculo da mand√≠bula
   int¬†                jaw_shift,¬†        // deslocamento horizontal da mand√≠bula
   int¬†                teeth_period,¬†     // per√≠odo para c√°lculo dos dentes
   int¬†                teeth_shift,¬†      // deslocamento horizontal dos dentes
   int¬†                lips_period,¬†      // per√≠odo para o c√°lculo da boca
   int¬†                lips_shift,¬†       // deslocamento horizontal da boca
   ENUM_MA_METHOD¬†     ma_method,¬†        // tipo de suaviza√ß√£o
   ENUM_APPLIED_PRICE¬† applied_price¬†     // tipo de pre√ßo ou manipulador
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in] O nome do s√≠mbolo de seguran√ßa, os dados que devem ser usados para calcular o indicador. O
valor NULL significa o s√≠mbolo atual.
period
[in] O valor do per√≠odo pode ser um dos valores ENUM_TIMEFRAMES, 0 (zero) significa o prazo
corrente.
jaw_period
[in]  Per√≠odo m√©dio para a linha azul (mand√≠bula do Alligator)
jaw_shift
[in] O deslocamento da linha azul em rela√ß√£o √† tabela de pre√ßos.
teeth_period
[in]   Per√≠odo m√©dio para a linha vermelha (dentes do Alligator).
teeth_shift
[in] O deslocamento da linha vermelha em rela√ß√£o para a tabela de pre√ßos.
lips_period
[in]  Per√≠odo m√©dio para a linha verde (boca de Alligator).
lips_shift
[in] O deslocamento da linha verde em rela√ß√£o √† tabela de pre√ßos.
ma_method
[in]  O m√©todo da m√©dia. Pode ser qualquer um dos valores do ENUM_MA_METHOD.
applied_price
[in]  O pre√ßo usado. Pode ser qualquer das constantes de pre√ßos ENUM_APPLIED_PRICE ou um
manipulador de outro indicador.</p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2788
<h3>Valor de retorno</h3>
Retorna o manipulador de um indicador t√©cnico especifico, em caso de falha de retorna
INVALID_HANDLE. A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √©
mais utilizado, usando a fun√ß√£o IndicatorRelease(), onde o manipulador de indicador √© transmitido.
<h3>Observa√ß√£o</h3>
Os n√∫meros do buffer s√£o os seguintes: 0 - GATORJAW_LINE, 1 - GATORTEETH_LINE, 2 -
GATORLIPS_LINE.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                              Demo_iAlligator.mq5 |
//|                        Copyright 2011, MetaQuotes Software Corp. |
//|                                            ;https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;
#property description &quot;O indicador demonstra como obter dados&quot;
#property description &quot;dos buffers do indicador para o indicador t√©cnico iAlligator.&quot;
#property description &quot;Um s√≠mbolo e o prazo utilizado para o c√°lculo do indicador,&quot;
#property description &quot;s√£o definidos pelos par√¢metros de s√≠mbolo e per√≠odo.&quot;
#property description &quot;O m√©todo de cria√ß√£o do manipulador √© definido atrav√©s do par√¢me
#property description &quot;Todos os outros par√¢metros s√£o similares aos do padr√£o Alligato
#property indicator_chart_window
#property indicator_buffers 3
#property indicator_plots   3
//--- plot Jaws
#property indicator_label1  &quot;Jaws&quot;
#property indicator_type1   DRAW_LINE
#property indicator_color1  clrBlue
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1
//--- plot Teeth
#property indicator_label2  &quot;Teeth&quot;
#property indicator_type2   DRAW_LINE
#property indicator_color2  clrRed
#property indicator_style2  STYLE_SOLID
#property indicator_width2  1
//--- plot Lips
#property indicator_label3  &quot;Lips&quot;
#property indicator_type3   DRAW_LINE
#property indicator_color3  clrLime
#property indicator_style3  STYLE_SOLID
#property indicator_width3  1
//+------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2789
</p>
<pre><code class="language-mql5">
//| Enumerador dos m√©todos de cria√ß√£o do manipulador¬†                |
//+------------------------------------------------------------------+
enum Creation
  {
   Call_iAlligator,        // usar iAlligator
   Call_IndicatorCreate    // usar IndicatorCreate
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//--- par√¢metros de entrada
input Creation             type=Call_iAlligator;   // tipo de fun√ß√£o
input string               symbol=&quot; &quot;;             // s√≠mbolo
input ENUM_TIMEFRAMES      period=PERIOD_CURRENT;  // timeframe
input int                  jaw_period=13;          // per√≠odo da linha da mand√≠bula
input int                  jaw_shift=8;            // deslocamento da linha da mand√≠bu
input int                  teeth_period=8;         // per√≠odo da linha dos dentes
input int                  teeth_shift=5;          // deslocamento da linha dos dentes
input int                  lips_period=5;          // per√≠odo da linha da boca
input int                  lips_shift=3;           // deslocamento da linha da boca
input ENUM_MA_METHOD       MA_method=MODE_SMMA;    // m√©todo das linhas m√©dias do Alli
input ENUM_APPLIED_PRICE   applied_price=PRICE_MEDIAN;// tipo de pre√ßo utilizado para 
//--- buffers do indicador
double         JawsBuffer[];
double         TeethBuffer[];
double         LipsBuffer[];
//--- vari√°vel para armazenar o manipulador do indicador
int    handle;
//--- vari√°vel para armazenamento
string name=symbol;
//--- nome do indicador num gr√°fico
string short_name;
//--- manteremos o n√∫mero de valores dentro do indicador Alligator
int    bars_calculated=0;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- atribui√ß√£o de arrays para buffers do indicador
   SetIndexBuffer(0,JawsBuffer,INDICATOR_DATA);
   SetIndexBuffer(1,TeethBuffer,INDICATOR_DATA);
   SetIndexBuffer(2,LipsBuffer,INDICATOR_DATA);
//--- definir o deslocamento de cada linha
   PlotIndexSetInteger(0,PLOT_SHIFT,jaw_shift);
   PlotIndexSetInteger(1,PLOT_SHIFT,teeth_shift);
   PlotIndexSetInteger(2,PLOT_SHIFT,lips_shift);
//--- determinar o s√≠mbolo do indicador, √© desenhado para
   name=symbol;
//--- excluir os espa√ßos √† direita e √† esquerda
   StringTrimRight(name);
   StringTrimLeft(name);</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2790
</p>
<pre><code class="language-mql5">
//--- se resulta em comprimento zero da string do &#x27;name&#x27;
   if(StringLen(name)==0)
     {
      //--- tomar o s√≠mbolo do gr√°fico, o indicador est√° anexado para
      name=_Symbol;
     }
//--- criar manipulador do indicador
   if(type==Call_iAlligator)
      handle=iAlligator(name,period,jaw_period,jaw_shift,teeth_period,
                        teeth_shift,lips_period,lips_shift,MA_method,applied_price);
   else
     {
      //--- preencher a estrutura com os par√¢metros do indicador
      MqlParam pars[8];
¬†    //--- per√≠odos e deslocamentos das linhas do Alligator
      pars[0].type=TYPE_INT;
      pars[0].integer_value=jaw_period;
      pars[1].type=TYPE_INT;
      pars[1].integer_value=jaw_shift;
      pars[2].type=TYPE_INT;
      pars[2].integer_value=teeth_period;
      pars[3].type=TYPE_INT;
      pars[3].integer_value=teeth_shift;
      pars[4].type=TYPE_INT;
      pars[4].integer_value=lips_period;
      pars[5].type=TYPE_INT;
      pars[5].integer_value=lips_shift;
//--- tipo de suaviza√ß√£o
      pars[6].type=TYPE_INT;
      pars[6].integer_value=MA_method;
//--- tipo de pre√ßo
      pars[7].type=TYPE_INT;
      pars[7].integer_value=applied_price;
//--- criar manipulador
      handle=IndicatorCreate(name,period,IND_ALLIGATOR,8,pars);
     }
//--- se o manipulador n√£o √© criado
   if(handle==INVALID_HANDLE)
     {
      //--- mensagem sobre a falha e a sa√≠da do c√≥digo de erro
      PrintFormat(&quot;Falha ao criar o manipulador do indicador iAlligator para o s√≠mbolo
                  name,
                  EnumToString(period),
                  GetLastError());
      //--- o indicador √© interrompido precocemente
      return(INIT_FAILED);
     }
//--- mostrar o s√≠mbolo/prazo do indicador Alligator calculado para
   short_name=StringFormat(&quot;iAlligator(%s/%s, %d,%d,%d,%d,%d,%d)&quot;,name,EnumToString(pe</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2791
</p>
<pre><code class="language-mql5">
                           jaw_period,jaw_shift,teeth_period,teeth_shift,lips_period,l
   IndicatorSetString(INDICATOR_SHORTNAME,short_name);
//--- inicializa√ß√£o normal do indicador    
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &amp;time[],
                const double &amp;open[],
                const double &amp;high[],
                const double &amp;low[],
                const double &amp;close[],
                const long &amp;tick_volume[],
                const long &amp;volume[],
                const int &amp;spread[])
  {
//--- n√∫mero de valores copiados a partir do indicador iAlligator
   int values_to_copy;
//--- determinar o n√∫mero de valores calculados no indicador
   int calculated=BarsCalculated(handle);
   if(calculated&lt;=0)
     {
      PrintFormat(&quot;BarsCalculated() retornando %d, c√≥digo de erro %d&quot;,calculated,GetLa
      return(0);
     }
//--- se for o primeiro arranque do c√°lculo do indicador, ou se o n√∫mero de valores qu
//--- ou se √© necess√°rio c√°lculo do indicador para duas ou mais barras (isso significa
   if(prev_calculated==0 || calculated!=bars_calculated || rates_total&gt;prev_calculated
     {
      //--- Se o array JawsBuffer √© maior do que o n√∫mero dos valores do indicador iAl
      //--- caso contr√°rio, copiamos menor do que o tamanho dos buffers do indicador
      if(calculated&gt;rates_total) values_to_copy=rates_total;
      else                       values_to_copy=calculated;
     }
   else
     {
      //--- isso significa que n√£o √© a primeira vez do c√°lculo do indicador, √© desde a
      //--- para o c√°lculo n√£o mais do que uma barra √© adicionada
      values_to_copy=(rates_total-prev_calculated)+1;
     }
//--- preencher os arrays com os valores do indicador de Alligator
//--- se FillArraysFromBuffer retorna falso, isto significa que a informa√ß√£o ainda n√£o
   if(!FillArraysFromBuffers(JawsBuffer,jaw_shift,TeethBuffer,teeth_shift,LipsBuffer,l
//--- formar a mensagem
   string comm=StringFormat(&quot;%s ==&gt;  Valor atualizado no indicador %s: %d&quot;,
                            TimeToString(TimeCurrent(),TIME_DATE|TIME_SECONDS),</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2792
</p>
<pre><code class="language-mql5">
                            short_name,
                            values_to_copy);
//--- exibir a mensagem de servi√ßo no gr√°fico
   Comment(comm);
//--- memorizar o n√∫mero de valores dentro do indicador Alligator
   bars_calculated=calculated;
//--- retorna o valor prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }  
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Preencher buffers do indicador a partir do indicador iAlligator  |
//+------------------------------------------------------------------+
bool FillArraysFromBuffers(double &amp;jaws_buffer[],  // buffer do indicador para a linha
                           int j_shift,            // deslocamento da linha da mand√≠bu
                           double &amp;teeth_buffer[], // buffer do indicador para a linha
                           int t_shift,            // deslocamento da linha dos dentes
                           double &amp;lips_buffer[],  // buffer do indicador para a linha
                           int l_shift,            // deslocamento da linha da boca
                           int ind_handle,         // manipulador do indicator iAlliga
                           int amount              // n√∫mero de valores copiados
                           )
  {
//--- redefinir o c√≥digo de erro
   ResetLastError();
//--- preencher uma parte do array JawsBuffer com valores a partir do buffer do indica
   if(CopyBuffer(ind_handle,0,-j_shift,amount,jaws_buffer)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha para copiar dados a partir do indicador iAlligator, c√≥digo de
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- preencher uma parte do array TeethBuffer com valores a partir do buffer do indic
   if(CopyBuffer(ind_handle,1,-t_shift,amount,teeth_buffer)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha para copiar dados a partir do indicador iAlligator, c√≥digo de
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- preencher uma parte do array LipsBuffer com valores a partir do buffer do indica
   if(CopyBuffer(ind_handle,2,-l_shift,amount,lips_buffer)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha para copiar dados a partir do indicador iAlligator, c√≥digo de
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2793
</p>
<pre><code class="language-mql5">
     }
//--- est√° tudo bem
   return(true);
</code></pre>
<p>
  }  
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de desinicializa√ß√£o do indicador                          |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   if(handle!=INVALID_HANDLE)
      IndicatorRelease(handle);
//--- limpar o gr√°fico ap√≥s excluir o indicador
   Comment(&quot;&quot;);
</code></pre>
<p>
  }</p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2794
iAMA
A fun√ß√£o retorna o manipulador do indicador Adaptive Moving Average. Tem apenas um buffer.
</p>
<pre><code class="language-mql5">
int¬† iAMA(
   string¬†             symbol,¬†            // s√≠mbolo nome
   ENUM_TIMEFRAMES¬†    period,¬†            // per√≠odo
   int¬†                ama_period,¬†        // per√≠odo m√©dio para AMA
   int¬†                fast_ma_period,¬†    // per√≠odo r√°pido MA
   int¬†                slow_ma_period,¬†    // per√≠odo lento MA
   int¬†                ama_shift,¬†         // deslocamento horizontal do indicador
   ENUM_APPLIED_PRICE¬† applied_price¬†      // tipo do pre√ßo ou manipular
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in] O nome do s√≠mbolo de seguran√ßa, os dados que devem ser usados para calcular o indicador. O
valor NULL significa o s√≠mbolo atual.
period
[in] O valor do per√≠odo pode ser um dos valores ENUM_TIMEFRAMES, 0 (zero) significa o prazo
corrente.
ama_period
[in]  O per√≠odo de c√°lculo, em que o coeficiente de efici√™ncia √© calculado.
fast_ma_period
[in]  Per√≠odo r√°pido para o c√°lculo do coeficiente de suaviza√ß√£o de um mercado de r√°pido.
slow_ma_period
[in]  Per√≠odo lento para o c√°lculo do coeficiente de suaviza√ß√£o na aus√™ncia de tend√™ncia.
ama_shift
[in]  Deslocamento do indicador relativo ao gr√°fico de pre√ßos.
applied_price
[in]  O pre√ßo usado. Pode ser qualquer das constantes de pre√ßos ENUM_APPLIED_PRICE ou um
manipulador de outro indicador.
<h3>Valor de retorno</h3>
Retorna o manipulador de um indicador t√©cnico especifico, em caso de falha de retorna
INVALID_HANDLE. A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √©
mais utilizado, usando a fun√ß√£o IndicatorRelease(), onde o manipulador de indicador √© transmitido.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                                    Demo_iAMA.mq5 |
//|                        Copyright 2011, MetaQuotes Software Corp. |
//|                                            ;https://www.mql5.com |
//+------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2795
</p>
<pre><code class="language-mql5">
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;
#property description &quot;O indicador demonstra como obter dados&quot;
#property description &quot;de buffers do indicador para o indicador t√©cnico iAMA.&quot;
#property description &quot;Um s√≠mbolo e o prazo utilizado para o c√°lculo do indicador,&quot;
#property description &quot;s√£o definidos pelos par√¢metros de s√≠mbolo e per√≠odo.&quot;
#property description &quot;O m√©todo de cria√ß√£o do manipulador √© definido atrav√©s do par√¢me
#property description &quot;Todos os outros par√¢metros s√£o semelhantes aos do padr√£o AMA.&quot;
#property indicator_chart_window
#property indicator_buffers 1
#property indicator_plots   1
//--- plotar iAMA
#property indicator_label1  &quot;iAMA&quot;
#property indicator_type1   DRAW_LINE
#property indicator_color1  clrRed
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1
//+------------------------------------------------------------------+
//| Enumerador dos m√©todos de cria√ß√£o do manipulador¬†                |
//+------------------------------------------------------------------+
enum Creation
  {
   Call_iAMA,              // use iAMA
   Call_IndicatorCreate    // usar IndicatorCreate
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//--- par√¢metros de entrada
input Creation             type=Call_iAMA;          // tipo de fun√ß√£o
input string               symbol=&quot; &quot;;              // s√≠mbolo
input ENUM_TIMEFRAMES      period=PERIOD_CURRENT;   // timeframe
input int                  ama_period=15;           // per√≠odo para c√°lculo
input int                  fast_ma_period=2;        // per√≠odo da MA r√°pida
input int                  slow_ma_period=30;       // per√≠odo da MA lenta
input int                  ama_shift=0;             // deslocamento horizontal
input ENUM_APPLIED_PRICE   applied_price;           // tipo de pre√ßo
//--- buffer do indicador
double         iAMABuffer[];
//--- vari√°vel para armazenar o manipulador do indicador iAMA
int    handle;
//--- vari√°vel para armazenamento
string name=symbol;
//--- nome do indicador num gr√°fico
string short_name;
//--- manteremos o n√∫mero de valores no indicador Adaptive Moving Average
int    bars_calculated=0;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2796
</p>
<pre><code class="language-mql5">
int OnInit()
  {
//--- mapeamento de buffers do indicador
   SetIndexBuffer(0,iAMABuffer,INDICATOR_DATA);
//--- definir deslocamento
   PlotIndexSetInteger(0,PLOT_SHIFT,ama_shift);   
//--- determinar o s√≠mbolo do indicador, √© desenhado para
   name=symbol;
//--- excluir os espa√ßos √† direita e √† esquerda
   StringTrimRight(name);
   StringTrimLeft(name);
//--- se resulta em comprimento zero da string do &#x27;name&#x27;
   if(StringLen(name)==0)
     {
      //--- tomar o s√≠mbolo do gr√°fico, o indicador est√° anexado para
      name=_Symbol;
     }
//--- criar manipulador do indicador
   if(type==Call_iAMA)
      handle=iAMA(name,period,ama_period,fast_ma_period,slow_ma_period,ama_shift,appli
   else
     {
      //--- preencher a estrutura com os par√¢metros do indicador
      MqlParam pars[5];
      pars[0].type=TYPE_INT;
      pars[0].integer_value=ama_period;
      pars[1].type=TYPE_INT;
      pars[1].integer_value=fast_ma_period;
      pars[2].type=TYPE_INT;
      pars[2].integer_value=slow_ma_period;
      pars[3].type=TYPE_INT;
      pars[3].integer_value=ama_shift;
      //--- tipo de pre√ßo
      pars[4].type=TYPE_INT;
      pars[4].integer_value=applied_price;
      handle=IndicatorCreate(name,period,IND_AMA,5,pars);
     }
//--- se o manipulador n√£o √© criado
   if(handle==INVALID_HANDLE)
     {
      //--- mensagem sobre a falha e a sa√≠da do c√≥digo de erro
      PrintFormat(&quot;Falha ao criar o indicador iAMA para o s√≠mbolo %s/%s, c√≥digo de err
                  name,
                  EnumToString(period),
                  GetLastError());
      //--- o indicador √© interrompido precocemente
      return(INIT_FAILED);
     }
//--- mostrar o s√≠mbolo/prazo, o indicador Adaptive Moving Average √© calculado para</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2797
</p>
<pre><code class="language-mql5">
   short_name=StringFormat(&quot;iAMA(%s/%s,%d,%d,%d,d)&quot;,name,EnumToString(period),ama_peri
   IndicatorSetString(INDICATOR_SHORTNAME,short_name);
//--- inicializa√ß√£o normal do indicador    
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &amp;time[],
                const double &amp;open[],
                const double &amp;high[],
                const double &amp;low[],
                const double &amp;close[],
                const long &amp;tick_volume[],
                const long &amp;volume[],
                const int &amp;spread[])
  {
//--- n√∫mero de valores copiados a partir do indicador iAMA
   int values_to_copy;
//--- determinar o n√∫mero de valores calculados no indicador
   int calculated=BarsCalculated(handle);
   if(calculated&lt;=0)
     {
      PrintFormat(&quot;BarsCalculated() retornando %d, c√≥digo de erro %d&quot;,calculated,GetLa
      return(0);
     }
//--- se √© o primeiro arranque do c√°lculo do indicador ou se o n√∫mero de valores do in
//--- ou se √© necess√°rio c√°lculo do indicador para duas ou mais barras (isso significa
   if(prev_calculated==0 || calculated!=bars_calculated || rates_total&gt;prev_calculated
     {
      //--- se o array iAMABuffer √© maior do que o n√∫mero de valores do indicador iAMA
      //--- caso contr√°rio, copiamos menor do que o tamanho dos buffers do indicador
      if(calculated&gt;rates_total) values_to_copy=rates_total;
      else                       values_to_copy=calculated;
     }
   else
     {
      //--- isso significa que n√£o √© a primeira vez do c√°lculo do indicador, √© desde a
      //--- para o c√°lculo n√£o mais do que uma barra √© adicionada
      values_to_copy=(rates_total-prev_calculated)+1;
     }
//--- preencher os arrays com os valores do indicador Adaptive Moving Average
//--- se FillArraysFromBuffer retorna falso, isto significa que a informa√ß√£o ainda n√£o
   if(!FillArrayFromBuffer(iAMABuffer,ama_shift,handle,values_to_copy)) return(0);
//--- formar a mensagem
   string comm=StringFormat(&quot;%s ==&gt;  Valor atualizado no indicador %s: %d&quot;,
                            TimeToString(TimeCurrent(),TIME_DATE|TIME_SECONDS),</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2798
</p>
<pre><code class="language-mql5">
                            short_name,
                            values_to_copy);
//--- exibir a mensagem de servi√ßo no gr√°fico
   Comment(comm);
//--- memorizar o n√∫mero de valores no indicador Adaptive Moving Average
   bars_calculated=calculated;
//--- retorna o valor prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Preencher o buffer do indicador a partir do indicador iAMA       |
//+------------------------------------------------------------------+
bool FillArrayFromBuffer(double &amp;ama_buffer[],  // buffer do indicador da linha AMA
                         int a_shift,           // deslocamento da linha AMA
                         int ind_handle,        // manipulador do indicador iAMA
                         int amount             // n√∫mero de valores copiados
                         )
  {
//--- redefinir o c√≥digo de erro
   ResetLastError();
//--- Preencher a partir do array iAMABuffer com os valores do buffer do indicador que
   if(CopyBuffer(ind_handle,0,-a_shift,amount,ama_buffer)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados a partir do indicador iAMA, c√≥digo de erro %d
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- est√° tudo bem
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de desinicializa√ß√£o do indicador                          |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   if(handle!=INVALID_HANDLE)
      IndicatorRelease(handle);
//--- limpar o gr√°fico ap√≥s excluir o indicador
   Comment(&quot;&quot;);
</code></pre>
<p>
  }</p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2799
iAO
A fun√ß√£o retorna o manipulador do indicador Awesome Oscillator. Tem apenas um buffer.
</p>
<pre><code class="language-mql5">
int¬† iAO(
   string¬†          symbol,¬†    // s√≠mbolo nome
   ENUM_TIMEFRAMES¬† period¬†     // per√≠odo
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in] O nome do s√≠mbolo de seguran√ßa, os dados que devem ser usados para calcular o indicador. O
valor NULL significa o s√≠mbolo atual.
period
[in] O valor do per√≠odo pode ser um dos valores ENUM_TIMEFRAMES, 0 (zero) significa o prazo
corrente.
<h3>Valor de retorno</h3>
Retorna o manipulador de um indicador t√©cnico especifico, em caso de falha de retorna
INVALID_HANDLE. A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √©
mais utilizado, usando a fun√ß√£o IndicatorRelease(), onde o manipulador de indicador √© transmitido.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                                     Demo_iAO.mq5 |
//|                        Copyright 2011, MetaQuotes Software Corp. |
//|                                            ;https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;
#property description &quot;O indicador demonstra como obter dados&quot;
#property description &quot;de buffers do indicador para o indicador t√©cnico iAO.&quot;
#property description &quot;Um s√≠mbolo e o prazo utilizado para o c√°lculo do indicador,&quot;
#property description &quot;s√£o definidos pelos par√¢metros de s√≠mbolo e per√≠odo.&quot;
#property description &quot;O m√©todo de cria√ß√£o do manipulador √© definido atrav√©s do par√¢me
#property indicator_separate_window
#property indicator_buffers 2
#property indicator_plots   1
//--- plotar iAO
#property indicator_label1  &quot;iAO&quot;
#property indicator_type1   DRAW_COLOR_HISTOGRAM
#property indicator_color1  clrGreen,clrRed
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1
//+------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2800
</p>
<pre><code class="language-mql5">
//| Enumerador dos m√©todos de cria√ß√£o do manipulador¬†                |
//+------------------------------------------------------------------+
enum Creation
  {
   Call_iAO,               // usar iAO
   Call_IndicatorCreate    // usar IndicatorCreate
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//--- par√¢metros de entrada
input Creation             type=Call_iAO;          // tipo de fun√ß√£o
input string               symbol=&quot; &quot;;             // s√≠mbolo
input ENUM_TIMEFRAMES      period=PERIOD_CURRENT;  // timeframe
//--- buffers do indicador
double         iAOBuffer[];
double         iAOColors[];
//--- vari√°vel para armazenar o manipulador do indicador iAO
int    handle;
//--- vari√°vel para armazenamento
string name=symbol;
//--- nome do indicador num gr√°fico
string short_name;
//--- manteremos o n√∫mero de valores no indicador Awesome Oscillator
int    bars_calculated=0;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- atribui√ß√£o de arrays para buffers do indicador
   SetIndexBuffer(0,iAOBuffer,INDICATOR_DATA);
   SetIndexBuffer(1,iAOColors,INDICATOR_COLOR_INDEX);
//--- determinar o s√≠mbolo do indicador, √© desenhado para
   name=symbol;
//--- excluir os espa√ßos √† direita e √† esquerda
   StringTrimRight(name);
   StringTrimLeft(name);
//--- se resulta em comprimento zero da string do &#x27;name&#x27;
   if(StringLen(name)==0)
     {
      //--- tomar o s√≠mbolo do gr√°fico, o indicador est√° anexado para
      name=_Symbol;
     }
//--- criar manipulador do indicador
   if(type==Call_iAO)
      handle=iAO(name,period);
   else
      handle=IndicatorCreate(name,period,IND_AO);
//--- se o manipulador n√£o √© criado
   if(handle==INVALID_HANDLE)
     {</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2801
</p>
<pre><code class="language-mql5">
      //--- mensagem sobre a falha e a sa√≠da do c√≥digo de erro
      PrintFormat(&quot;Falha ao criar o manipulador do indicador iAO para o s√≠mbolo %s/%s,
                  name,
                  EnumToString(period),
                  GetLastError());
      //--- o indicador √© interrompido precocemente
      return(INIT_FAILED);
     }
//--- mostrar o s√≠mbolo/per√≠odo o indicador Awesome Oscillator √© calculado para
   short_name=StringFormat(&quot;iAO(%s/%s)&quot;,name,EnumToString(period));
   IndicatorSetString(INDICATOR_SHORTNAME,short_name);
//--- inicializa√ß√£o normal do indicador
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &amp;time[],
                const double &amp;open[],
                const double &amp;high[],
                const double &amp;low[],
                const double &amp;close[],
                const long &amp;tick_volume[],
                const long &amp;volume[],
                const int &amp;spread[])
  {
//--- n√∫mero de valores copiado do indicator iAO
   int values_to_copy;
//--- determinar o n√∫mero de valores calculados no indicador
   int calculated=BarsCalculated(handle);
   if(calculated&lt;=0)
     {
      PrintFormat(&quot;BarsCalculated() retornando %d, c√≥digo de erro %d&quot;,calculated,GetLa
      return(0);
     }
//--- se for o primeiro arranque do c√°lculo do indicador, ou se o n√∫mero de valores no
//--- ou se √© necess√°rio c√°lculo do indicador para duas ou mais barras (isso significa
   if(prev_calculated==0 || calculated!=bars_calculated || rates_total&gt;prev_calculated
     {
      //--- se o array iAOBuffer √© maior do que os valores no indicador iAO para s√≠mbo
      //--- caso contr√°rio, copiamos menor do que o tamanho dos buffers do indicador
      if(calculated&gt;rates_total) values_to_copy=rates_total;
      else                       values_to_copy=calculated;
     }
   else
     {
      //--- isso significa que n√£o √© a primeira vez do c√°lculo do indicador, √© desde a</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2802
</p>
<pre><code class="language-mql5">
      //--- para o c√°lculo n√£o mais do que uma barra √© adicionada
      values_to_copy=(rates_total-prev_calculated)+1;
     }
//--- preencher os arrays iAOBuffer e iAOColors com valores a partir do indicador Awes
//--- se FillArraysFromBuffer retorna falso, isto significa que a informa√ß√£o ainda n√£o
   if(!FillArraysFromBuffer(iAOBuffer,iAOColors,handle,values_to_copy)) return(0);
//--- formar a mensagem
   string comm=StringFormat(&quot;%s ==&gt;  Valor atualizado no indicador %s: %d&quot;,
                            TimeToString(TimeCurrent(),TIME_DATE|TIME_SECONDS),
                            short_name,
                            values_to_copy);
//--- exibir a mensagem de servi√ßo no gr√°fico
   Comment(comm);
//--- memorizar o n√∫mero de valores no indicador Accelerator Oscillator
   bars_calculated=calculated;
//--- retorna o valor prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Preencher os buffers do indicador a partir do indicador iAO¬†     |
//+------------------------------------------------------------------+
bool FillArraysFromBuffer(double &amp;values[],        // buffer do indicador dos valores 
                          double &amp;color_indexes[], // buffer de cor(para armazenar o √≠
                          int ind_handle,          // manipulador do indicador iAO
                          int amount               // n√∫mero dos valores copiados
                          )
  {
//--- redefinir o c√≥digo de erro
   ResetLastError();
//--- preencher uma parte do array iAOBuffer com valores a partir do buffer do indicad
   if(CopyBuffer(ind_handle,0,0,amount,values)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iAO, c√≥digo de erro %d&quot;,GetLastE
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- agora copiar o √≠ndice de cores
   if(CopyBuffer(ind_handle,1,0,amount,color_indexes)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar valores de cor do indicador iAO, c√≥digo de erro %d&quot;
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- est√° tudo bem
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2803
</p>
<pre><code class="language-mql5">
//| Fun√ß√£o de desinicializa√ß√£o do indicador                          |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   if(handle!=INVALID_HANDLE)
      IndicatorRelease(handle);
//--- limpar o gr√°fico ap√≥s excluir o indicador
   Comment(&quot;&quot;);
</code></pre>
<p>
  }</p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2804
iATR
A fun√ß√£o retorna o manipulador do indicador Average True Range. Tem apenas um buffer.
</p>
<pre><code class="language-mql5">
int¬† iATR(
   string¬†          symbol,¬†       // s√≠mbolo nome
   ENUM_TIMEFRAMES¬† period,¬†       // per√≠odo
   int¬†             ma_period¬†     // per√≠odo m√©dio
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in] O nome do s√≠mbolo de seguran√ßa, os dados que devem ser usados para calcular o indicador. O
valor NULL significa o s√≠mbolo atual.
period
[in] O valor do per√≠odo pode ser um dos valores ENUM_TIMEFRAMES, 0 (zero) significa o prazo
corrente.
ma_period
[in]  O valor do per√≠odo m√©dio para c√°lculo do indicador.
<h3>Valor de retorno</h3>
Retorna o manipulador de um indicador t√©cnico especifico, em caso de falha de retorna
INVALID_HANDLE. A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √©
mais utilizado, usando a fun√ß√£o IndicatorRelease(), onde o manipulador de indicador √© transmitido.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                                    Demo_iATR.mq5 |
//|                        Copyright 2011, MetaQuotes Software Corp. |
//|                                            ;https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;
#property description &quot;O indicador demonstra como obter dados&quot;
#property description &quot;de buffers do indicador para o indicador t√©cnico.&quot;
#property description &quot;Um s√≠mbolo e o prazo utilizado para o c√°lculo do indicador,&quot;
#property description &quot;s√£o definidos pelos par√¢metros de s√≠mbolo e per√≠odo.&quot;
#property description &quot;O m√©todo de cria√ß√£o do manipulador √© definido atrav√©s do par√¢me
#property indicator_separate_window
#property indicator_buffers 1
#property indicator_plots   1
//--- plotar iATR
#property indicator_label1  &quot;iATR&quot;
#property indicator_type1   DRAW_LINE
#property indicator_color1  clrLightSeaGreen</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2805
</p>
<pre><code class="language-mql5">
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1
//+------------------------------------------------------------------+
//| Enumerador dos m√©todos de cria√ß√£o do manipulador¬†                |
//+------------------------------------------------------------------+
enum Creation
  {
   Call_iATR,// usar iATR
   Call_IndicatorCreate    // usar IndicatorCreate
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//--- par√¢metros de entrada
input int                  atr_period=14;          // c√°lculo do per√≠odo
input Creation             type=Call_iATR;          // tipo da fun√ß√£o
input string               symbol=&quot; &quot;;             // s√≠mbolo
input ENUM_TIMEFRAMES      period=PERIOD_CURRENT;  // timeframe
//--- buffer do indicador
double         iATRBuffer[];
//--- vari√°vel para armazenamento do manipulador do indicador iAC
int    handle;
//--- vari√°vel para armazenamento
string name=symbol;
//--- nome do indicador num gr√°fico
string short_name;
//--- manteremos o n√∫mero dos valores do indicador Average True Range indicator
int    bars_calculated=0;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- atribui√ß√£o de array para buffer do indicador
   SetIndexBuffer(0,iATRBuffer,INDICATOR_DATA);
//--- determinar o s√≠mbolo do indicador, √© desenhado para
   name=symbol;
//--- excluir os espa√ßos √† direita e √† esquerda
   StringTrimRight(name);
   StringTrimLeft(name);
//--- se resulta em comprimento zero da string do &#x27;name&#x27;
   if(StringLen(name)==0)
     {
      //--- tomar o s√≠mbolo do gr√°fico, o indicador est√° anexado para
      name=_Symbol;
     }
//--- criar manipulador do indicador
   if(type==Call_iATR)
      handle=iATR(name,period,atr_period);
   else
     {
      //--- preencher a estrutura com os par√¢metros do indicador</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2806
</p>
<pre><code class="language-mql5">
      MqlParam pars[1];
      pars[0].type=TYPE_INT;
      pars[0].integer_value=atr_period;
      handle=IndicatorCreate(name,period,IND_ATR,1,pars);
     }
//--- se o manipulador n√£o √© criado
   if(handle==INVALID_HANDLE)
     {
      //--- mensagem sobre a falha e a sa√≠da do c√≥digo de erro
      PrintFormat(&quot;Falha ao criar o manipulador do indicador iATR para o s√≠mbolo %s/%s
                  name,
                  EnumToString(period),
                  GetLastError());
      //--- o indicador √© interrompido precocemente
      return(INIT_FAILED);
     }
//--- mostra que o s√≠mbolo/prazo do indicador True Range √© calculado para
   short_name=StringFormat(&quot;iATR(%s/%s, period=%d)&quot;,name,EnumToString(period),atr_peri
   IndicatorSetString(INDICATOR_SHORTNAME,short_name);
//--- inicializa√ß√£o normal do indicador
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &amp;time[],
                const double &amp;open[],
                const double &amp;high[],
                const double &amp;low[],
                const double &amp;close[],
                const long &amp;tick_volume[],
                const long &amp;volume[],
                const int &amp;spread[])
  {
//--- n√∫mero de valores copiados a partir do indicador iATR
   int values_to_copy;
//--- determinar o n√∫mero de valores calculados no indicador
   int calculated=BarsCalculated(handle);
   if(calculated&lt;=0)
     {
      PrintFormat(&quot;BarsCalculated() retornando %d, c√≥digo de erro %d&quot;,calculated,GetLa
      return(0);
     }
//--- se √© o princ√≠pio de c√°lculo do indicador ou se √© o n√∫mero de valores modificados
//--- ou se √© necess√°rio c√°lculo do indicador para duas ou mais barras (isso significa
   if(prev_calculated==0 || calculated!=bars_calculated || rates_total&gt;prev_calculated
     {</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2807
</p>
<pre><code class="language-mql5">
      //--- se o array iATRBuffer √© maior do que o n√∫mero de valores no indicador iATR
      //--- caso contr√°rio, copiamos menor do que o tamanho dos buffers do indicador
      if(calculated&gt;rates_total) values_to_copy=rates_total;
      else                       values_to_copy=calculated;
     }
   else
     {
      //--- isso significa que n√£o √© a primeira vez do c√°lculo do indicador, √© desde a
      //--- para o c√°lculo n√£o mais do que uma barra √© adicionada
      values_to_copy=(rates_total-prev_calculated)+1;
     }
//--- preencher o array iATRBuffer com valores do indicador Average True Range
//--- se FillArrayFromBuffer retorna falso, significa que a informa√ß√£o n√£o est√° pronta
   if(!FillArrayFromBuffer(iATRBuffer,handle,values_to_copy)) return(0);
//--- formar a mensagem
   string comm=StringFormat(&quot;%s ==&gt;  Valor atualizado no indicador %s: %d&quot;,
                            TimeToString(TimeCurrent(),TIME_DATE|TIME_SECONDS),
                            short_name,
                            values_to_copy);
//--- exibir a mensagem de servi√ßo no gr√°fico
   Comment(comm);
//--- memorizar o n√∫mero de valores no indicador Accelerator Oscillator
   bars_calculated=calculated;
//--- retorna o valor prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Preenchendo os buffers do indicator a partir do indicador iATR¬†  |
//+------------------------------------------------------------------+
bool FillArrayFromBuffer(double &amp;values[],  // buffer do indicador para valores ATR va
                         int ind_handle,    // manipulador do indicador iATR
                         int amount         // n√∫mero de valores copiados
                         )
  {
//--- redefinir o c√≥digo de erro
   ResetLastError();
//--- preencher parte do array iATRBuffer com valores a partir do buffer do indicador 
   if(CopyBuffer(ind_handle,0,0,amount,values)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar a partir do indicador iATR , c√≥digo de erro %d&quot;,Get
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- est√° tudo bem
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de desinicializa√ß√£o do indicador                          |</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2808
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   if(handle!=INVALID_HANDLE)
      IndicatorRelease(handle);
//--- limpar o gr√°fico ap√≥s excluir o indicador
   Comment(&quot;&quot;);
</code></pre>
<p>
  }</p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2809
iBearsPower
A fun√ß√£o retorna o manipulador do indicador Bears Power. Tem apenas um buffer.
</p>
<pre><code class="language-mql5">
int¬† iBearsPower(
   string¬†             symbol,¬†           // s√≠mbolo nome
   ENUM_TIMEFRAMES¬†    period,¬†           // per√≠odo
   int¬†                ma_period,¬†        // per√≠odo m√©dio
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in] O nome do s√≠mbolo de seguran√ßa, os dados que devem ser usados para calcular o indicador. O
valor NULL significa o s√≠mbolo atual.
period
[in] O valor do per√≠odo pode ser um dos valores ENUM_TIMEFRAMES, 0 (zero) significa o prazo
corrente.
ma_period
[in]  O valor do per√≠odo m√©dio para c√°lculo do indicador.
<h3>Valor de retorno</h3>
Retorna o manipulador de um indicador t√©cnico especifico, em caso de falha de retorna
INVALID_HANDLE. A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √©
mais utilizado, usando a fun√ß√£o IndicatorRelease(), onde o manipulador de indicador √© transmitido.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                             Demo_iBearsPower.mq5 |
//|                        Copyright 2011, MetaQuotes Software Corp. |
//|                                            ;https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;
#property description &quot;O indicador demonstra como obter dados&quot;
#property description &quot;de buffers do indicador para o indicador t√©cnico iBearsPower.&quot;
#property description &quot;Um s√≠mbolo e o prazo utilizado para o c√°lculo do indicador,&quot;
#property description &quot;s√£o definidos pelos par√¢metros de s√≠mbolo e per√≠odo.&quot;
#property description &quot;O m√©todo de cria√ß√£o do manipulador √© definido atrav√©s do par√¢me
#property indicator_separate_window
#property indicator_buffers 1
#property indicator_plots   1
//--- plotar iBearsPower
#property indicator_label1  &quot;iBearsPower&quot;
#property indicator_type1   DRAW_HISTOGRAM
#property indicator_color1  clrSilver</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2810
</p>
<pre><code class="language-mql5">
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1
//+------------------------------------------------------------------+
//| Enumerador dos m√©todos de cria√ß√£o do manipulador¬†                |
//+------------------------------------------------------------------+
enum Creation
  {
   Call_iBearsPower,       // usar iBearsPower
   Call_IndicatorCreate    // usar IndicatorCreate
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//--- par√¢metros de entrada
input Creation             type=Call_iBearsPower;  // tipo da fun√ß√£o
input int                  ma_period=13;           // per√≠odo da m√©dia m√≥vel
input string               symbol=&quot; &quot;;             // s√≠mbolo
input ENUM_TIMEFRAMES      period=PERIOD_CURRENT;  // timeframe
//--- buffer do indicador
double         iBearsPowerBuffer[];
//--- vari√°vel para armazenar o manipulador do indicador iBearsPower
int    handle;
//--- vari√°vel para armazenamento
string name=symbol;
//--- nome do indicador num gr√°fico
string short_name;
//--- manteremos o n√∫mero de valores no indicador Bears Power
int    bars_calculated=0;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- atribui√ß√£o de array para buffer do indicador
   SetIndexBuffer(0,iBearsPowerBuffer,INDICATOR_DATA);
//--- determinar o s√≠mbolo do indicador, √© desenhado para
   name=symbol;
//--- excluir os espa√ßos √† direita e √† esquerda
   StringTrimRight(name);
   StringTrimLeft(name);
//--- se resulta em comprimento zero da string do &#x27;name&#x27;
   if(StringLen(name)==0)
     {
      //--- tomar o s√≠mbolo do gr√°fico, o indicador est√° anexado para
      name=_Symbol;
     }
//--- criar manipulador do indicador
   if(type==Call_iBearsPower)
      handle=iBearsPower(name,period,ma_period);
   else
     {
      //--- preencher a estrutura com os par√¢metros do indicador</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2811
</p>
<pre><code class="language-mql5">
      MqlParam pars[1];
      //--- per√≠odo da m√©dia m√≥vel
      pars[0].type=TYPE_INT;
      pars[0].integer_value=ma_period;
      handle=IndicatorCreate(name,period,IND_BEARS,1,pars);
     }
//--- se o manipulador n√£o √© criado
   if(handle==INVALID_HANDLE)
     {
      //--- mensagem sobre a falha e a sa√≠da do c√≥digo de erro
      PrintFormat(&quot;Falha ao criar o manipulador do indicador iBearsPower para o s√≠mbol
                  name,
                  EnumToString(period),
                  GetLastError());
      //--- o indicador √© interrompido precocemente
      return(INIT_FAILED);
     }
//--- mostrar que o s√≠mbolo/per√≠odo do indicador Bears Power √© calculado para
   short_name=StringFormat(&quot;iBearsPower(%s/%s, period=%d)&quot;,name,EnumToString(period),m
   IndicatorSetString(INDICATOR_SHORTNAME,short_name);
//--- inicializa√ß√£o normal do indicador
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &amp;time[],
                const double &amp;open[],
                const double &amp;high[],
                const double &amp;low[],
                const double &amp;close[],
                const long &amp;tick_volume[],
                const long &amp;volume[],
                const int &amp;spread[])
  {
//--- n√∫mero de valores copiados a partir do indicador iBearsPower
   int values_to_copy;
//--- determinar o n√∫mero de valores calculados no indicador
   int calculated=BarsCalculated(handle);
   if(calculated&lt;=0)
     {
      PrintFormat(&quot;BarsCalculated() retornando %d, c√≥digo de erro %d&quot;,calculated,GetLa
      return(0);
     }
//--- se for o princ√≠pio do c√°lculo do indicador, ou se o n√∫mero de valores √© modifica
//--- ou se √© necess√°rio c√°lculo do indicador para duas ou mais barras (isso significa
   if(prev_calculated==0 || calculated!=bars_calculated || rates_total&gt;prev_calculated</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2812
</p>
<pre><code class="language-mql5">
     {
      //--- se o array iBearsPowerBuffer √© maior do que o n√∫mero de valores no indicad
      //--- caso contr√°rio, copiamos menor do que o tamanho dos buffers do indicador
      if(calculated&gt;rates_total) values_to_copy=rates_total;
      else                       values_to_copy=calculated;
     }
   else
     {
      //--- isso significa que n√£o √© a primeira vez do c√°lculo do indicador, √© desde a
      //--- para o c√°lculo n√£o mais do que uma barra √© adicionada
      values_to_copy=(rates_total-prev_calculated)+1;
     }
//--- preencher o array iBearsPowerBuffer com os valores do indicador Bears Power
//--- se FillArrayFromBuffer retorna falso, significa que a informa√ß√£o n√£o est√° pronta
   if(!FillArrayFromBuffer(iBearsPowerBuffer,handle,values_to_copy)) return(0);
//--- formar a mensagem
   string comm=StringFormat(&quot;%s ==&gt;  Valor atualizado no indicador %s: %d&quot;,
                            TimeToString(TimeCurrent(),TIME_DATE|TIME_SECONDS),
                            short_name,
                            values_to_copy);
//--- exibir a mensagem de servi√ßo no gr√°fico
   Comment(comm);
//--- memorizar o n√∫mero de valores no indicador Bears Power
   bars_calculated=calculated;
//--- retorna o valor prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Preencher buffers do indicador a partir do indicador iBearsPower |
//+------------------------------------------------------------------+
bool FillArrayFromBuffer(double &amp;values[],  // buffer do indicador para valores do ind
                         int ind_handle,    // manipulador do indicator iBearsPower
                         int amount         // n√∫mero de valores copiados
                         )
  {
//--- redefinir o c√≥digo de erro
   ResetLastError();
//--- preencher uma parte do array iBearsPowerBuffer com valores do indicador buffer d
   if(CopyBuffer(ind_handle,0,0,amount,values)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iBearsPower, c√≥digo de erro %d&quot;,
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- est√° tudo bem
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2813
</p>
<pre><code class="language-mql5">
//| Fun√ß√£o de desinicializa√ß√£o do indicador                          |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   if(handle!=INVALID_HANDLE)
      IndicatorRelease(handle);
//--- limpar o gr√°fico ap√≥s excluir o indicador
   Comment(&quot;&quot;);
</code></pre>
<p>
  }</p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2814
iBands
A fun√ß√£o retorna o manipulador do indicador Bollinger Bands¬Æ.
</p>
<pre><code class="language-mql5">
int¬† iBands(
   string¬†             symbol,¬†           // s√≠mbolo nome
   ENUM_TIMEFRAMES¬†    period,¬†           // per√≠odo
   int¬†                bands_period,      // per√≠odo para o c√°lculo da m√©dia da linha
   int¬†                bands_shift,¬†      // deslocamento horizontal do indicador
   double¬†             deviation,¬†        // n√∫mero de desvios padr√£o
   ENUM_APPLIED_PRICE¬† applied_price¬†     // tipo de pre√ßo ou manipulador
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in] O nome do s√≠mbolo de seguran√ßa, os dados que devem ser usados para calcular o indicador. O
valor NULL significa o s√≠mbolo atual.
period
[in] O valor do per√≠odo pode ser um dos valores ENUM_TIMEFRAMES, 0 (zero) significa o prazo
corrente.
bands_period
[in]  O per√≠odo m√©dio da linha principal do indicador.
bands_shift
[in] O deslocamento do indicador em rela√ß√£o ao gr√°fico de pre√ßo.
deviation
[in]  Desvio a partir da linha principal.
applied_price
[in]  O pre√ßo usado. Pode ser qualquer das constantes de pre√ßos ENUM_APPLIED_PRICE ou um
manipulador de outro indicador.
<h3>Valor de retorno</h3>
Retorna o manipulador de um indicador t√©cnico especifico, em caso de falha de retorna
INVALID_HANDLE. A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √©
mais utilizado, usando a fun√ß√£o IndicatorRelease(), onde o manipulador de indicador √© transmitido.
<h3>Observa√ß√£o</h3>
Os n√∫meros de buffer s√£o os seguintes: 0 - BASE_LINE, 1 - UPPER_BAND, 2 - LOWER_BAND
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                                  Demo_iBands.mq5 |
//|                        Copyright 2011, MetaQuotes Software Corp. |
//|                                            ;https://www.mql5.com |
//+------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2815
</p>
<pre><code class="language-mql5">
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;
#property description &quot;O indicador demonstra como obter dados&quot;
#property description &quot;buffers do indicador para o indicador t√©cnico iBands.&quot;
#property description &quot;Um s√≠mbolo e o prazo utilizado para o c√°lculo do indicador,&quot;
#property description &quot;s√£o definidos pelos par√¢metros de s√≠mbolo e per√≠odo.&quot;
#property description &quot;O m√©todo de cria√ß√£o do manipulador √© definido atrav√©s do par√¢me
#property indicator_chart_window
#property indicator_buffers 3
#property indicator_plots   3
//--- plotar linha superior
#property indicator_label1  &quot;Upper&quot;
#property indicator_type1   DRAW_LINE
#property indicator_color1  clrMediumSeaGreen
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1
//--- plotar linha inferior
#property indicator_label2  &quot;Lower&quot;
#property indicator_type2   DRAW_LINE
#property indicator_color2  clrMediumSeaGreen
#property indicator_style2  STYLE_SOLID
#property indicator_width2  1
//--- plotar linha m√©dia
#property indicator_label3  &quot;Middle&quot;
#property indicator_type3   DRAW_LINE
#property indicator_color3  clrMediumSeaGreen
#property indicator_style3  STYLE_SOLID
#property indicator_width3  1
//+------------------------------------------------------------------+
//| Enumerador dos m√©todos de cria√ß√£o do manipulador¬†                |
//+------------------------------------------------------------------+
enum Creation
  {
   Call_iBands,            // usar iBands
   Call_IndicatorCreate    // usar IndicatorCreate
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//--- par√¢metros de entrada
input Creation             type=Call_iBands;          // tipo da fun√ß√£o
input int                  bands_period=20;           // per√≠odo da m√©dia m√≥vel
input int                  bands_shift=0;             // deslocamento
input double               deviation=2.0;             // n√∫mero de desvios padr√£o
input ENUM_APPLIED_PRICE   applied_price=PRICE_CLOSE; // tipo de pre√ßo
input string               symbol=&quot; &quot;;                // s√≠mbolo
input ENUM_TIMEFRAMES      period=PERIOD_CURRENT;     // timeframe
//--- buffers do indicador
double         UpperBuffer[];
double         LowerBuffer[];</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2816
</p>
<pre><code class="language-mql5">
double         MiddleBuffer[];
//--- vari√°vel para armazenar o manipulador do indicador iBands
int    handle;
//--- vari√°vel para armazenamento
string name=symbol;
//--- nome do indicador num gr√°fico
string short_name;
//--- manteremos o n√∫mero de valores no indicador Bollinger Bands
int    bars_calculated=0;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- atribui√ß√£o de arrays para buffers do indicador
   SetIndexBuffer(0,UpperBuffer,INDICATOR_DATA);
   SetIndexBuffer(1,LowerBuffer,INDICATOR_DATA);
   SetIndexBuffer(2,MiddleBuffer,INDICATOR_DATA);
//--- definir o deslocamento de cada linha
   PlotIndexSetInteger(0,PLOT_SHIFT,bands_shift);
   PlotIndexSetInteger(1,PLOT_SHIFT,bands_shift);      
   PlotIndexSetInteger(2,PLOT_SHIFT,bands_shift);      
//--- determinar o s√≠mbolo do indicador, √© desenhado para
   name=symbol;
//--- excluir os espa√ßos √† direita e √† esquerda
   StringTrimRight(name);
   StringTrimLeft(name);
//--- se resulta em comprimento zero da string do &#x27;name&#x27;
   if(StringLen(name)==0)
     {
      //--- tomar o s√≠mbolo do gr√°fico, o indicador est√° anexado para
      name=_Symbol;
     }
//--- criar manipulador do indicador
   if(type==Call_iBands)
      handle=iBands(name,period,bands_period,bands_shift,deviation,applied_price);
   else
     {
      //--- preencher a estrutura com os par√¢metros do indicador
      MqlParam pars[4];
      //--- per√≠odo da m√©dia m√≥vel
      pars[0].type=TYPE_INT;
      pars[0].integer_value=bands_period;
      //--- deslocamento
      pars[1].type=TYPE_INT;
      pars[1].integer_value=bands_shift;
      //--- n√∫mero do desvio padr√£o
      pars[2].type=TYPE_DOUBLE;
      pars[2].double_value=deviation;</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2817
</p>
<pre><code class="language-mql5">
      //--- tipo de pre√ßo
      pars[3].type=TYPE_INT;
      pars[3].integer_value=applied_price;
      handle=IndicatorCreate(name,period,IND_BANDS,4,pars);
     }
//--- se o manipulador n√£o √© criado
   if(handle==INVALID_HANDLE)
     {
      //--- mensagem sobre a falha e a sa√≠da do c√≥digo de erro
      PrintFormat(&quot;Falha ao criar o manipulador do indicador iBands para o s√≠mbolo %s/
                  name,
                  EnumToString(period),
                  GetLastError());
      //--- o indicador √© interrompido precocemente
      return(INIT_FAILED);
     }
//--- mostra que o s√≠mbolo/prazo do indicador Bollinger Bands √© calculado para
   short_name=StringFormat(&quot;iBands(%s/%s, %d,%d,%G,%s)&quot;,name,EnumToString(period),
                           bands_period,bands_shift,deviation,EnumToString(applied_pri
   IndicatorSetString(INDICATOR_SHORTNAME,short_name);
//--- inicializa√ß√£o normal do indicador  
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &amp;time[],
                const double &amp;open[],
                const double &amp;high[],
                const double &amp;low[],
                const double &amp;close[],
                const long &amp;tick_volume[],
                const long &amp;volume[],
                const int &amp;spread[])
  {
//--- n√∫mero de valores copiados a partir do indicador iBands
   int values_to_copy;
//--- determinar o n√∫mero de valores calculados no indicador
   int calculated=BarsCalculated(handle);
   if(calculated&lt;=0)
     {
      PrintFormat(&quot;BarsCalculated() retornando %d, c√≥digo de erro %d&quot;,calculated,GetLa
      return(0);
     }
//--- se for o princ√≠pio do c√°lculo do indicador, ou se o n√∫mero de valores √© modifica
//--- ou se √© necess√°rio c√°lculo do indicador para duas ou mais barras (isso significa
   if(prev_calculated==0 || calculated!=bars_calculated || rates_total&gt;prev_calculated</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2818
</p>
<pre><code class="language-mql5">
     {
      //--- se o tamanho buffers do indicador √© maior do que o n√∫mero de valores no in
      //--- caso contr√°rio, copiamos menor do que o tamanho dos buffers do indicador
      if(calculated&gt;rates_total) values_to_copy=rates_total;
      else                       values_to_copy=calculated;
     }
   else
     {
      //--- isso significa que n√£o √© a primeira vez do c√°lculo do indicador, √© desde a
      //--- para o c√°lculo n√£o mais do que uma barra √© adicionada
      values_to_copy=(rates_total-prev_calculated)+1;
     }
//--- preencher o array com valores do indicador Bollinger Bands
//--- se FillArraysFromBuffer retorna falso, isto significa que a informa√ß√£o ainda n√£o
   if(!FillArraysFromBuffers(MiddleBuffer,UpperBuffer,LowerBuffer,bands_shift,handle,v
//--- formar a mensagem
   string comm=StringFormat(&quot;%s ==&gt;  Valor atualizado no indicador %s: %d&quot;,
                            TimeToString(TimeCurrent(),TIME_DATE|TIME_SECONDS),
                            short_name,
                            values_to_copy);
//--- exibir a mensagem de servi√ßo no gr√°fico
   Comment(comm);
//--- memorizar o n√∫mero de valores no indicador Bollinger Bands
   bars_calculated=calculated;
//--- retorna o valor prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Preencher buffers do indicador a partir do indicador iBands¬†     |
//+------------------------------------------------------------------+
bool FillArraysFromBuffers(double &amp;base_values[],     // buffer do indicador da linha 
                           double &amp;upper_values[],    // buffer do indicador da borda 
                           double &amp;lower_values[],    // buffer do indicador da borda 
                           int shift,                 // deslocamento
                           int ind_handle,            // manipulador do indicador iBan
                           int amount                 // n√∫mero dos valores copiados
                           )
  {
//--- redefinir o c√≥digo de erro
   ResetLastError();
//--- preencher uma parte do array MiddleBuffer com valores do buffer do indicador que
   if(CopyBuffer(ind_handle,0,-shift,amount,base_values)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iBands, c√≥digo de erro %d&quot;,GetLa
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2819
</p>
<pre><code class="language-mql5">
//--- preencher uma parte do array UpperBuffer com valores do buffer do indicador que 
   if(CopyBuffer(ind_handle,1,-shift,amount,upper_values)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iBands, c√≥digo de erro %d&quot;,GetLa
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- preencher uma parte do array LowerBuffer com valores do buffer do indicador que 
   if(CopyBuffer(ind_handle,2,-shift,amount,lower_values)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iBands, c√≥digo de erro %d&quot;,GetLa
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- est√° tudo bem
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de desinicializa√ß√£o do indicador                          |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   if(handle!=INVALID_HANDLE)
      IndicatorRelease(handle);
//--- limpar o gr√°fico ap√≥s excluir o indicador
   Comment(&quot;&quot;);
</code></pre>
<p>
  }</p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2820
iBullsPower
A fun√ß√£o retorna o manipulador do indicador Bulls Power. Tem apenas um buffer.
</p>
<pre><code class="language-mql5">
int¬† iBullsPower(
   string¬†             symbol,¬†           // s√≠mbolo nome
   ENUM_TIMEFRAMES¬†    period,            // per√≠odo
   int¬†                ma_period,¬†        // per√≠odo m√©dio
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in] O nome do s√≠mbolo de seguran√ßa, os dados que devem ser usados para calcular o indicador. O
valor NULL significa o s√≠mbolo atual.
period
[in] O valor do per√≠odo pode ser um dos valores ENUM_TIMEFRAMES, 0 (zero) significa o prazo
corrente.
ma_period
[in]  O per√≠odo m√©dio para c√°lculo do indicador.
<h3>Valor de retorno</h3>
Retorna o manipulador de um indicador t√©cnico especifico, em caso de falha de retorna
INVALID_HANDLE. A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √©
mais utilizado, usando a fun√ß√£o IndicatorRelease(), onde o manipulador de indicador √© transmitido.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                             Demo_iBullsPower.mq5 |
//|                        Copyright 2011, MetaQuotes Software Corp. |
//|                                            ;https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;
#property description &quot;O indicador demonstra como obter dados&quot;
#property description &quot;de buffers do indicador para o indicador t√©cnico iBullsPower.&quot;
#property description &quot;Um s√≠mbolo e o prazo utilizado para o c√°lculo do indicador,&quot;
#property description &quot;s√£o definidos pelos par√¢metros de s√≠mbolo e per√≠odo.&quot;
#property description &quot;O m√©todo de cria√ß√£o do manipulador √© definido atrav√©s do par√¢me
#property indicator_separate_window
#property indicator_buffers 1
#property indicator_plots   1
//--- plotar iBullsPower
#property indicator_label1  &quot;iBullsPower&quot;
#property indicator_type1   DRAW_HISTOGRAM
#property indicator_color1  clrSilver</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2821
</p>
<pre><code class="language-mql5">
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1
//+------------------------------------------------------------------+
//| Enumerador dos m√©todos de cria√ß√£o do manipulador¬†                |
//+------------------------------------------------------------------+
enum Creation
  {
   Call_iBullsPower,       // usar iBullsPower
   Call_IndicatorCreate    // usar IndicatorCreate
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//--- par√¢metros de entrada
input Creation             type=Call_iBullsPower;  // tipo da fun√ß√£o
input int                  ma_period=13;           // per√≠odo da m√©dia m√≥vel
input string               symbol=&quot; &quot;;             // s√≠mbolo
input ENUM_TIMEFRAMES      period=PERIOD_CURRENT;  // timeframe
//--- buffer do indicador
double         iBullsPowerBuffer[];
//--- vari√°vel para armazenar o manipulador do indicador iBullsPower
int    handle;
//--- vari√°vel para armazenamento
string name=symbol;
//--- nome do indicador num gr√°fico
string short_name;
//--- manteremos o n√∫mero de valores no indicador Bulls Power
int    bars_calculated=0;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- atribui√ß√£o de array para buffer do indicador
   SetIndexBuffer(0,iBullsPowerBuffer,INDICATOR_DATA);
//--- determinar o s√≠mbolo do indicador, √© desenhado para
   name=symbol;
//--- excluir os espa√ßos √† direita e √† esquerda
   StringTrimRight(name);
   StringTrimLeft(name);
//--- se resulta em comprimento zero da string do &#x27;name&#x27;
   if(StringLen(name)==0)
     {
      //--- tomar o s√≠mbolo do gr√°fico, o indicador est√° anexado para
      name=_Symbol;
     }
//--- criar manipulador do indicador
   if(type==Call_iBullsPower)
      handle=iBullsPower(name,period,ma_period);
   else
     {
      //--- preencher a estrutura com os par√¢metros do indicador</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2822
</p>
<pre><code class="language-mql5">
      MqlParam pars[1];
      //--- per√≠odo da m√©dia m√≥vel
      pars[0].type=TYPE_INT;
      pars[0].integer_value=ma_period;
      handle=IndicatorCreate(name,period,IND_BULLS,1,pars);
     }
//--- se o manipulador n√£o √© criado
   if(handle==INVALID_HANDLE)
     {
      //--- mensagem sobre a falha e a sa√≠da do c√≥digo de erro
      PrintFormat(&quot;Falha ao criar o manipulador do indicador iBullsPower para o s√≠mbol
                  name,
                  EnumToString(period),
                  GetLastError());
      //--- o indicador √© interrompido precocemente
      return(INIT_FAILED);
     }
//--- mostrar que o s√≠mbolo/per√≠odo do indicador Bulls Power √© calculado para
   short_name=StringFormat(&quot;iBullsPower(%s/%s, period=%d)&quot;,name,EnumToString(period),m
   IndicatorSetString(INDICATOR_SHORTNAME,short_name);
//--- inicializa√ß√£o normal do indicador
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &amp;time[],
                const double &amp;open[],
                const double &amp;high[],
                const double &amp;low[],
                const double &amp;close[],
                const long &amp;tick_volume[],
                const long &amp;volume[],
                const int &amp;spread[])
  {
//--- n√∫mero de valores copiados a partir do indicador iBullsPower
   int values_to_copy;
//--- determinar o n√∫mero de valores calculados no indicador
   int calculated=BarsCalculated(handle);
   if(calculated&lt;=0)
     {
      PrintFormat(&quot;BarsCalculated() retornando %d, c√≥digo de erro %d&quot;,calculated,GetLa
      return(0);
     }
//--- se for o princ√≠pio do c√°lculo do indicador, ou se o n√∫mero de valores √© modifica
//--- ou se √© necess√°rio c√°lculo do indicador para duas ou mais barras (isso significa
   if(prev_calculated==0 || calculated!=bars_calculated || rates_total&gt;prev_calculated</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2823
</p>
<pre><code class="language-mql5">
     {
      //--- se o array iBullsPowerBuffer √© maior do que o n√∫mero de valores no indicad
      //--- caso contr√°rio, copiamos menor do que o tamanho dos buffers do indicador
      if(calculated&gt;rates_total) values_to_copy=rates_total;
      else                       values_to_copy=calculated;
     }
   else
     {
      //--- isso significa que n√£o √© a primeira vez do c√°lculo do indicador, √© desde a
      //--- para o c√°lculo n√£o mais do que uma barra √© adicionada
      values_to_copy=(rates_total-prev_calculated)+1;
     }
//--- preencher o array iBullsPowerBuffer com os valores do indicador Bulls Power
//--- se FillArrayFromBuffer retorna falso, significa que a informa√ß√£o n√£o est√° pronta
   if(!FillArrayFromBuffer(iBullsPowerBuffer,handle,values_to_copy)) return(0);
//--- formar a mensagem
   string comm=StringFormat(&quot;%s ==&gt;  Valor atualizado no indicador %s: %d&quot;,
                            TimeToString(TimeCurrent(),TIME_DATE|TIME_SECONDS),
                            short_name,
                            values_to_copy);
//--- exibir a mensagem de servi√ßo no gr√°fico
   Comment(comm);
//--- memorizar o n√∫mero de valores no indicador Bulls Power
   bars_calculated=calculated;
//--- retorna o valor prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Preencher buffers do indicador a partir do indicador iBullsPower¬†|
//+------------------------------------------------------------------+
bool FillArrayFromBuffer(double &amp;values[],  // buffer do indicador para valores do ind
                         int ind_handle,    // manipulador do indicator iBullsPower
                         int amount         // n√∫mero de valores copiados
                         )
  {
//--- redefinir o c√≥digo de erro
   ResetLastError();
//--- preencher uma parte do array iBullsPowerBuffer com valores do indicador buffer d
   if(CopyBuffer(ind_handle,0,0,amount,values)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iBullsPower, c√≥digo de erro %d&quot;,
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- est√° tudo bem
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2824
</p>
<pre><code class="language-mql5">
//| Fun√ß√£o de desinicializa√ß√£o do indicador                          |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   if(handle!=INVALID_HANDLE)
      IndicatorRelease(handle);
//--- limpar o gr√°fico ap√≥s excluir o indicador
   Comment(&quot;&quot;);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2825
iCCI
A fun√ß√£o retorna o manipulador do indicador Commodity Channel Index. Tem apenas um buffer.
</p>
<pre><code class="language-mql5">
int¬† iCCI(
   string¬†             symbol,¬†           // s√≠mbolo nome
   ENUM_TIMEFRAMES¬†    period,¬†           // per√≠odo
   int¬†                ma_period,¬†        // per√≠odo m√©dio
   ENUM_APPLIED_PRICE¬† applied_price      // tipo de pre√ßo ou de manipulador
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in] O nome do s√≠mbolo de seguran√ßa, os dados que devem ser usados para calcular o indicador. O
valor NULL significa o s√≠mbolo atual.
period
[in] O valor do per√≠odo pode ser um dos valores ENUM_TIMEFRAMES, 0 (zero) significa o prazo
corrente.
ma_period
[in]   O per√≠odo m√©dio para o c√°lculo de indicadores.
applied_price
[in]  O pre√ßo usado. Pode ser qualquer das constantes de pre√ßos ENUM_APPLIED_PRICE ou um
manipulador de outro indicador.
<h3>Valor de retorno</h3>
Retorna o manipulador de um indicador t√©cnico especifico, em caso de falha de retorna
INVALID_HANDLE. A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √©
mais utilizado, usando a fun√ß√£o IndicatorRelease(), onde o manipulador de indicador √© transmitido.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                                    Demo_iCCI.mq5 |
//|                        Copyright 2011, MetaQuotes Software Corp. |
//|                                            ;https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;
#property description &quot;O indicador demonstra como obter dados&quot;
#property description &quot;de buffers do indicador para o indicador t√©cnico iCCI.&quot;
#property description &quot;Um s√≠mbolo e o prazo utilizado para o c√°lculo do indicador,&quot;
#property description &quot;s√£o definidos pelos par√¢metros de s√≠mbolo e per√≠odo.&quot;
#property description &quot;O m√©todo de cria√ß√£o do manipulador √© definido atrav√©s do par√¢me
#property indicator_separate_window
#property indicator_buffers 1</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2826
</p>
<pre><code class="language-mql5">
#property indicator_plots   1
//--- plotar iCCI
#property indicator_label1  &quot;iCCI&quot;
#property indicator_type1   DRAW_LINE
#property indicator_color1  clrLightSeaGreen
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1
//--- n√≠veis horizontais na janela de indicador
#property indicator_level1  -100.0
#property indicator_level2  100.0
//+------------------------------------------------------------------+
//| Enumerador dos m√©todos de cria√ß√£o do manipulador¬†                |
//+------------------------------------------------------------------+
enum Creation
  {
   Call_iCCI,              // usar iCCI
   Call_IndicatorCreate    // usar IndicatorCreate
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//--- par√¢metros de entrada
input Creation             type=Call_iCCI;               // tipo da fun√ß√£o
input int                  ma_period=14;                 // per√≠odo da m√©dia m√≥vel
input ENUM_APPLIED_PRICE   applied_price=PRICE_TYPICAL;  // tipo de pre√ßo
input string               symbol=&quot; &quot;;                   // s√≠mbolo
input ENUM_TIMEFRAMES      period=PERIOD_CURRENT;        // timeframe
//--- buffer do indicador
double         iCCIBuffer[];
//--- vari√°vel para armazenar o manipulador do indicator iCCI
int    handle;
//--- vari√°vel para armazenamento
string name=symbol;
//--- nome do indicador num gr√°fico
string short_name;
//--- manteremos o n√∫mero de valores no indicador Commodity Channel Index
int    bars_calculated=0;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- atribui√ß√£o de array para buffer do indicador
   SetIndexBuffer(0,iCCIBuffer,INDICATOR_DATA);
//--- determinar o s√≠mbolo do indicador, √© desenhado para
   name=symbol;
//--- excluir os espa√ßos √† direita e √† esquerda
   StringTrimRight(name);
   StringTrimLeft(name);
//--- se resulta em comprimento zero da string do &#x27;name&#x27;
   if(StringLen(name)==0)
     {</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2827
</p>
<pre><code class="language-mql5">
      //--- tomar o s√≠mbolo do gr√°fico, o indicador est√° anexado para
      name=_Symbol;
     }
//--- criar manipulador do indicador
   if(type==Call_iCCI)
      handle=iCCI(name,period,ma_period,applied_price);
   else
     {
      //--- preencher a estrutura com os par√¢metros do indicador
      MqlParam pars[2];
      //--- per√≠odo de m√©dia m√≥vel
      pars[0].type=TYPE_INT;
      pars[0].integer_value=ma_period;
      //--- tipo de pre√ßo
      pars[1].type=TYPE_INT;
      pars[1].integer_value=applied_price;
      handle=IndicatorCreate(name,period,IND_CCI,2,pars);
     }
//--- se o manipulador n√£o √© criado
   if(handle==INVALID_HANDLE)
     {
      //--- mensagem sobre a falha e a sa√≠da do c√≥digo de erro
      PrintFormat(&quot;Falha ao criar o manipulador do indicador iCCI para o s√≠mbolo %s/%s
                  name,
                  EnumToString(period),
                  GetLastError());
      //--- o indicador √© interrompido precocemente
      return(INIT_FAILED);
     }
//--- mostra que o s√≠mbolo/prazo do indicador iCCI √© calculado para
   short_name=StringFormat(&quot;iCCI(%s/%s, %d, %s)&quot;,name,EnumToString(period),
                           ma_period,EnumToString(applied_price));
   IndicatorSetString(INDICATOR_SHORTNAME,short_name);
//--- inicializa√ß√£o normal do indicador  
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &amp;time[],
                const double &amp;open[],
                const double &amp;high[],
                const double &amp;low[],
                const double &amp;close[],
                const long &amp;tick_volume[],
                const long &amp;volume[],
                const int &amp;spread[])</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2828
</p>
<pre><code class="language-mql5">
  {
//--- n√∫mero de valores copiados a partir do indicador iCCI
   int values_to_copy;
//--- determinar o n√∫mero de valores calculados no indicador
   int calculated=BarsCalculated(handle);
   if(calculated&lt;=0)
     {
      PrintFormat(&quot;BarsCalculated() retornando %d, c√≥digo de erro %d&quot;,calculated,GetLa
      return(0);
     }
//--- se for o princ√≠pio do c√°lculo do indicador, ou se o n√∫mero de valores √© modifica
//--- ou se √© necess√°rio c√°lculo do indicador para duas ou mais barras (isso significa
   if(prev_calculated==0 || calculated!=bars_calculated || rates_total&gt;prev_calculated
     {
      //--- se o array iCCIBuffer √© maior do que o n√∫mero de valores no indicador iCCI
      //--- caso contr√°rio, copiamos menor do que o tamanho dos buffers do indicador
      if(calculated&gt;rates_total) values_to_copy=rates_total;
      else                       values_to_copy=calculated;
     }
   else
     {
      //--- isso significa que n√£o √© a primeira vez do c√°lculo do indicador, √© desde a
      //--- para o c√°lculo n√£o mais do que uma barra √© adicionada
      values_to_copy=(rates_total-prev_calculated)+1;
     }
//--- preencher o array iCCIBuffer com valores do indicador Commodity Channel Index
//--- se FillArrayFromBuffer retorna falso, significa que a informa√ß√£o n√£o est√° pronta
   if(!FillArrayFromBuffer(iCCIBuffer,handle,values_to_copy)) return(0);
//--- formar a mensagem
   string comm=StringFormat(&quot;%s ==&gt;  Valor atualizado no indicador %s: %d&quot;,
                            TimeToString(TimeCurrent(),TIME_DATE|TIME_SECONDS),
                            short_name,
                            values_to_copy);
//--- exibir a mensagem de servi√ßo no gr√°fico
   Comment(comm);
//--- memorizar o n√∫mero de valores no indicador Commodity Channel Index
   bars_calculated=calculated;
//--- retorna o valor prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Preencher buffers do indicador a partir do indicador iCCI        |
//+------------------------------------------------------------------+
bool FillArrayFromBuffer(double &amp;values[],  // buffer do indicador de valores do Commo
                         int ind_handle,    // manipulador do indicador iCCI
                         int amount         // n√∫mero de valores copiados
                         )
  {
//--- redefinir o c√≥digo de erro</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2829
</p>
<pre><code class="language-mql5">
   ResetLastError();
//--- preencher uma parte do array iCCIBuffer com valores do buffer do indicador que t
   if(CopyBuffer(ind_handle,0,0,amount,values)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iCCI, c√≥digo de erro %d&quot;,GetLast
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- est√° tudo bem
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de desinicializa√ß√£o do indicador                          |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   if(handle!=INVALID_HANDLE)
      IndicatorRelease(handle);
//--- limpar o gr√°fico ap√≥s excluir o indicador
   Comment(&quot;&quot;);
</code></pre>
<p>
  }</p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2830
iChaikin
A fun√ß√£o retorna o manipulador do indicador Chaikin Oscillator. Tem apenas um buffer.
</p>
<pre><code class="language-mql5">
int¬† iChaikin(
   string¬†              symbol,¬†            // s√≠mbolo nome
   ENUM_TIMEFRAMES¬†     period,¬†            // per√≠odo
   int¬†                 fast_ma_period,¬†    // per√≠odo r√°pido
   int¬†                 slow_ma_period,¬†    // per√≠odo lento
   ENUM_MA_METHOD¬†      ma_method,¬†         // tipo suavizado
   ENUM_APPLIED_VOLUME¬† applied_volume      // tipo de volume
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in] O nome do s√≠mbolo de seguran√ßa, os dados que devem ser usados para calcular o indicador. O
valor NULL significa o s√≠mbolo atual.
period
[in] O valor do per√≠odo pode ser um dos valores ENUM_TIMEFRAMES, 0 (zero) significa o prazo
corrente.
fast_ma_period
[in] Per√≠odo m√©dio r√°pido para c√°lculos.
slow_ma_period
[in] Per√≠odo m√©dio lento para c√°lculos.
ma_method
[in]  Tipo suavizado. Pode ser uma das m√©dias constantes de ENUM_MA_METHOD.
applied_volume
[in]  O volume usado. Pode ser uma das constantes do ENUM_APPLIED_VOLUME.
<h3>Valor de retorno</h3>
Retorna o manipulador de um indicador t√©cnico especifico, em caso de falha de retorna
INVALID_HANDLE. A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √©
mais utilizado, usando a fun√ß√£o IndicatorRelease(), onde o manipulador de indicador √© transmitido.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                                Demo_iChaikin.mq5 |
//|                        Copyright 2011, MetaQuotes Software Corp. |
//|                                            ;https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;
#property description &quot;O indicador demonstra como obter dados&quot;</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2831
</p>
<pre><code class="language-mql5">
#property description &quot;de buffers do indicador para o indicador t√©cnico iChaikin.&quot;
#property description &quot;Um s√≠mbolo e o prazo utilizado para o c√°lculo do indicador,&quot;
#property description &quot;s√£o definidos pelos par√¢metros de s√≠mbolo e per√≠odo.&quot;
#property description &quot;O m√©todo de cria√ß√£o do manipulador √© definido atrav√©s do par√¢me
#property indicator_separate_window
#property indicator_buffers 1
#property indicator_plots   1
//--- plotar iChaikin
#property indicator_label1  &quot;iChaikin&quot;
#property indicator_type1   DRAW_LINE
#property indicator_color1  clrLightSeaGreen
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1
//+------------------------------------------------------------------+
//| Enumerador dos m√©todos de cria√ß√£o do manipulador¬†                |
//+------------------------------------------------------------------+
enum Creation
  {
   Call_iChaikin,          // usar iChaikin
   Call_IndicatorCreate    // usar IndicatorCreate
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//--- par√¢metros de entrada
input Creation             type=Call_iChaikin;           // tipo da fun√ß√£o
input int                  fast_ma_period=3;             // per√≠odo r√°pido da m√©dia m√≥
input int                  slow_ma_period=10;            // per√≠odo lento da m√©dia m√≥v
input ENUM_MA_METHOD       ma_method=MODE_EMA;           // tipo de suaviza√ß√£o
input ENUM_APPLIED_VOLUME  applied_volume=VOLUME_TICK;   // tipo de volume
input string               symbol=&quot; &quot;;                   // s√≠mbolo
input ENUM_TIMEFRAMES      period=PERIOD_CURRENT;        // timeframe
//--- buffer do indicador
double         iChaikinBuffer[];
//--- vari√°vel para armazenar o manipulador do indicator iChaikin
int    handle;
//--- vari√°vel para armazenamento
string name=symbol;
//--- nome do indicador num gr√°fico
string short_name;
//--- manteremos o n√∫mero de valores no indicador Chaikin Oscillator
int    bars_calculated=0;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- atribui√ß√£o de array para buffer do indicador
   SetIndexBuffer(0,iChaikinBuffer,INDICATOR_DATA);
//--- determinar o s√≠mbolo do indicador, √© desenhado para
   name=symbol;</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2832
</p>
<pre><code class="language-mql5">
//--- excluir os espa√ßos √† direita e √† esquerda
   StringTrimRight(name);
   StringTrimLeft(name);
//--- se resulta em comprimento zero da string do &#x27;name&#x27;
   if(StringLen(name)==0)
     {
      //--- tomar o s√≠mbolo do gr√°fico, o indicador est√° anexado para
      name=_Symbol;
     }
//--- criar manipulador do indicador
   if(type==Call_iChaikin)
      handle=iChaikin(name,period,fast_ma_period,slow_ma_period,ma_method,applied_volu
   else
     {
      //--- preencher a estrutura com os par√¢metros do indicador
      MqlParam pars[4];
      //--- per√≠odo r√°pido da m√©dia m√≥vel
      pars[0].type=TYPE_INT;
      pars[0].integer_value=fast_ma_period;
      //--- per√≠odo lento da m√©dia m√≥vel
      pars[1].type=TYPE_INT;
      pars[1].integer_value=slow_ma_period;
      //--- tipo de suaviza√ß√£o
      pars[2].type=TYPE_INT;
      pars[2].integer_value=ma_method;
      //--- tipo de volume
      pars[3].type=TYPE_INT;
      pars[3].integer_value=applied_volume;
      handle=IndicatorCreate(name,period,IND_CHAIKIN,4,pars);
     }
//--- se o manipulador n√£o √© criado
   if(handle==INVALID_HANDLE)
     {
      //--- mensagem sobre a falha e a sa√≠da do c√≥digo de erro
      PrintFormat(&quot;Falha ao criar o manipulador do indicador iChaikin para o s√≠mbolo %
                  name,
                  EnumToString(period),
                  GetLastError());
      //--- o indicador √© interrompido precocemente
      return(INIT_FAILED);
     }
//--- mostra que o s√≠mbolo/prazo do indicador Chaikin Oscillator √© calculado para
   short_name=StringFormat(&quot;iChaikin(%s/%s, %d, %d, %s, %s)&quot;,name,EnumToString(period)
                           fast_ma_period,slow_ma_period,
                           EnumToString(ma_method),EnumToString(applied_volume));
   IndicatorSetString(INDICATOR_SHORTNAME,short_name);
//--- inicializa√ß√£o normal do indicador  
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }</p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2833
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &amp;time[],
                const double &amp;open[],
                const double &amp;high[],
                const double &amp;low[],
                const double &amp;close[],
                const long &amp;tick_volume[],
                const long &amp;volume[],
                const int &amp;spread[])
  {
//--- n√∫mero de valores copiados a partir do indicador iChaikin
   int values_to_copy;
//--- determinar o n√∫mero de valores calculados no indicador
   int calculated=BarsCalculated(handle);
   if(calculated&lt;=0)
     {
      PrintFormat(&quot;BarsCalculated() retornando %d, c√≥digo de erro %d&quot;,calculated,GetLa
      return(0);
     }
//--- se for o princ√≠pio do c√°lculo do indicador, ou se o n√∫mero de valores √© modifica
//--- ou se √© necess√°rio c√°lculo do indicador para duas ou mais barras (isso significa
   if(prev_calculated==0 || calculated!=bars_calculated || rates_total&gt;prev_calculated
     {
      //--- se o array iCCIBuffer √© maior do que o n√∫mero de valores no indicador iCha
      //--- caso contr√°rio, copiamos menor do que o tamanho dos buffers do indicador
      if(calculated&gt;rates_total) values_to_copy=rates_total;
      else                       values_to_copy=calculated;
     }
   else
     {
      //--- isso significa que n√£o √© a primeira vez do c√°lculo do indicador, √© desde a
      //--- para o c√°lculo n√£o mais do que uma barra √© adicionada
      values_to_copy=(rates_total-prev_calculated)+1;
     }
//--- preencher o array iChaikinBuffer com valores do indicador Chaikin Oscillator
//--- se FillArrayFromBuffer retorna falso, significa que a informa√ß√£o n√£o est√° pronta
   if(!FillArrayFromBuffer(iChaikinBuffer,handle,values_to_copy)) return(0);
//--- formar a mensagem
   string comm=StringFormat(&quot;%s ==&gt;  Valor atualizado no indicador %s: %d&quot;,
                            TimeToString(TimeCurrent(),TIME_DATE|TIME_SECONDS),
                            short_name,
                            values_to_copy);
//--- exibir a mensagem de servi√ßo no gr√°fico
   Comment(comm);
//--- memorizar o n√∫mero de valores no indicador Chaikin Oscillator</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2834
</p>
<pre><code class="language-mql5">
   bars_calculated=calculated;
//--- retorna o valor prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Preencher buffers do indicador a partir do indicador iChaikin    |
//+------------------------------------------------------------------+
bool FillArrayFromBuffer(double &amp;values[],  // buffer do indicator para valores do Cha
                         int ind_handle,    // manipulador do indicador iChaikin
                         int amount         // n√∫mero de valores copiados
                         )
  {
//--- redefinir o c√≥digo de erro
   ResetLastError();
//--- preencher uma parte do array iChaikinBuffer com valores do buffer do indicador q
   if(CopyBuffer(ind_handle,0,0,amount,values)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iChaikin, c√≥digo de erro %d&quot;,Get
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- est√° tudo bem
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de desinicializa√ß√£o do indicador                          |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   if(handle!=INVALID_HANDLE)
      IndicatorRelease(handle);
//--- limpar o gr√°fico ap√≥s excluir o indicador
   Comment(&quot;&quot;);
</code></pre>
<p>
  }  </p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2835
iCustom
A fun√ß√£o retorna o manipulador de um indicador personalizado especifico.
</p>
<pre><code class="language-mql5">
int¬† iCustom(
   string¬†          symbol,¬†    // s√≠mbolo nome
   ENUM_TIMEFRAMES¬† period,¬†    // per√≠odo
   string¬†          name¬†       // folder/nome_do_indicador_personalizado
   ...¬†                         // lista de par√¢metros de entrada do indicador
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in] O nome do s√≠mbolo de seguran√ßa, os dados que devem ser usados para calcular o indicador. O
valor NULL significa o s√≠mbolo atual.
period
[in] O valor do per√≠odo pode ser um dos valores ENUM_TIMEFRAMES, 0 (zero) significa o prazo
corrente.
name
[in]  Nome do indicador personalizado. Se antes do nome for indicada uma barra invertida &#x27;\&#x27;, o
arquivo EX5 do indicador ser√° procurado em rela√ß√£o √† pasta ra√≠z MQL5. Assim, ao chamar
iCustom(Symbol(), 
<h3>Period(),</h3>
&quot;\FirstIndicator&quot;...) 
o 
indicador 
ser√° 
carregado 
como
MQL5\FirstIndicator.ex5. Se n√£o houver arquivo nesse caminho, ocorrer√° o erro 4802
(ERR_INDICATOR_CANNOT_CREATE).
Se o caminho n√£o come√ßar com &#x27;\&#x27;, o indicador ser√° pesquisado e carregado na seguinte sequ√™ncia:
¬∑ Primeiro, o arquivo EX5 do indicador √© pesquisado na mesma pasta em que localizado o arquivo
EX5 do programa de chamada. Por exemplo, o EA CrossMA.EX5 est√° localizado na pasta
<h3>MQL5\Experts\MyExperts</h3>
e 
cont√©m 
a 
chamada 
iCustom(Symbol(), 
<h3>Period(),</h3>
&quot;SecondIndicator&quot;...), neste caso, a pesquisa do indicador √© realizada com base no caminho
MQL5\Experts\MyExperts\SecondIndicator.ex5.
¬∑ Se o indicador n√£o for encontrado no mesmo diret√≥rio, a pesquisa ser√° realizada em rela√ß√£o ao
diret√≥rio raiz dos indicadores MQL5\Indicators. Em outras palavras, √© procurado o arquivo
MQL5\Indicators\SecondIndicator.ex5. Se o indicador n√£o for encontrado nos dois caminhos, a
fun√ß√£o 
retornar√° 
<h3>NVALID_HANDLE</h3>
e 
ser√° 
gerado 
o 
erro 
4802
(ERR_INDICATOR_CANNOT_CREATE).
Se o caminho do indicador estiver definido num subdiret√≥rio, por exemplo, como
MyIndicators\ThirdIndicator, a pesquisa ser√° realizada pela primeira vez na pasta do programa de
chamada (o EA est√° localizado na pasta MQL5\Experts\MyExperts) com base no caminho
MQL5\Experts\MyExperts\MyIndicators\ThirdIndicator.ex5 e, em seguida, em caso de falha, √©
procurado o arquivo MQL5\Indicators\MyIndicators\ThirdIndicator.ex5. Al√©m disso, com ajuda de
um separador no caminho √© necess√°rio especificar uma barra invertida dupla &#x27;\\&#x27;, por exemplo,
iCustom(Symbol(), Period(), &quot;MyIndicators\\ThirdIndicator&quot;...).
...</p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2836
[in]  entrada-par√¢metros de um indicador personalizado, separados por v√≠rgulas. Tipo e ordem dos
par√¢metros devem coincidir. Se n√£o h√° par√¢metros espec√≠ficos, ent√£o valores padr√µes ser√£o
usados.
<h3>Valor de retorno</h3>
Retorna o manipulador de um indicador t√©cnico especifico, em caso de falha de retorna
INVALID_HANDLE. A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √©
mais utilizado, usando a fun√ß√£o IndicatorRelease(), onde o manipulador de indicador √© transmitido.
<h3>Observa√ß√£o</h3>
Um indicador personalizado deve ser compilado (com extens√£o EX5) e localizado no diret√≥rio
MQL5/Indicadores do terminal do cliente ou seu subdiret√≥rio.
Indicadores que requerem teste s√£o definidos automaticamente a partir da chamada da fun√ß√£o
iCustom(), se o correspondente par√¢metro for definido atrav√©s de um string constante. Para todos
os outros casos (uso da fun√ß√£o IndicatorCreate() ou uso de uma string n√£o-constante no par√¢metro
de define o nome do indicador) a propriedade #property tester_indicator √© requerida:
</p>
<pre><code class="language-mql5">
#property tester_indicator &quot;indicator_name.ex5&quot;
</code></pre>
<p>
 Se o primeiro formul√°rio de chamada √© usado no indicador, ent√£o na inicializa√ß√£o do indicador, na
aba &quot;Par√¢metros&quot;, voc√™ pode escolher dados adicionais para c√°lculo. Se a op√ß√£o &quot;Aplicar para&quot; do
par√¢metro n√£o √© selecionada, o c√°lculo padr√£o baseia-se nos valores &quot;Fechamento&quot; dos pre√ßos.
Quando voc√™ chama um indicador personalizado a partir do programa MQL5, o par√¢metro
Applied_Price ou um manipulador de outro indicador deve ser passado por √∫ltimo, depois de todas as
vari√°veis de entrada do indicador personalizado.
<h3>Tamb√©m Veja</h3>
Propriedades de Programa, S√©ries Temporais e Acesso a Indicadores,IndicatorCreate(),
<h3>IndicatorRelease()</h3>
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
#property indicator_separate_window</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2837
</p>
<pre><code class="language-mql5">
#property indicator_buffers 1
#property indicator_plots   1
//---- Plotar Etiqueta1
#property indicator_label1  &quot;Etiqueta1&quot;
#property indicator_type1   DRAW_LINE
#property indicator_color1  clrRed
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1
//--- par√¢metros de entrada
input int MA_Period=21;
input int MA_Shift=0;
input ENUM_MA_METHOD MA_Method=MODE_SMA;
//--- buffers do indicador
double         Label1Buffer[];
//--- Manipulador do indicador personalizado Moving Average.mq5
int MA_handle;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- mapeamento de buffers do indicador
   SetIndexBuffer(0,Label1Buffer,INDICATOR_DATA);
   ResetLastError();
   MA_handle=iCustom(NULL,0,&quot;Examples\\Custom Moving Average&quot;,
                     MA_Period,
                     MA_Shift,
                     MA_Method,
                     PRICE_CLOSE // usando o fechamento de pre√ßos
                     );
   Print(&quot;MA_handle = &quot;,MA_handle,&quot;  error = &quot;,GetLastError());
//---
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &amp;time[],
                const double &amp;open[],
                const double &amp;high[],
                const double &amp;low[],
                const double &amp;close[],
                const long &amp;tick_volume[],
                const long &amp;volume[],
                const int &amp;spread[])
  {
//--- Copiar os valores do indicador Custom Moving Average para o nosso buffer do indi</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2838
</p>
<pre><code class="language-mql5">
   int copy=CopyBuffer(MA_handle,0,0,rates_total,Label1Buffer);
   Print(&quot;copy = &quot;,copy,&quot;    rates_total = &quot;,rates_total);
//--- Se a nossa tentativa falhou - Reportar isto
   if(copy&lt;=0)
      Print(&quot;Uma tentativa de obter os valores se houve falha do Custom Moving Average
//--- valor retorno de prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2839
iDEMA
A fun√ß√£o retorna o manipulador do indicador Double Exponential Moving Average. Tem apenas um
buffer.
</p>
<pre><code class="language-mql5">
int¬† iDEMA(
   string¬†             symbol,¬†           // s√≠mbolo nome
   ENUM_TIMEFRAMES¬†    period,¬†           // per√≠odo
   int¬†                ma_period,¬†        // per√≠odo m√©dio
   int¬†                ma_shift,¬†         // deslocamento horizontal
   ENUM_APPLIED_PRICE¬† applied_price¬†     // tipo de pre√ßo ou manipulador
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in] O nome do s√≠mbolo de seguran√ßa, os dados que devem ser usados para calcular o indicador. O
valor NULL significa o s√≠mbolo atual.
period
[in] O valor do per√≠odo pode ser um dos valores ENUM_TIMEFRAMES, 0 (zero) significa o prazo
corrente.
ma_period
[in] Per√≠odo m√©dio (barras contadas) para os c√°lculos.
ma_shift
[in]  Deslocamento do indicador relativo ao gr√°fico de pre√ßos.
applied_price
[in]  O pre√ßo usado. Pode ser qualquer das constantes de pre√ßos ENUM_APPLIED_PRICE ou um
manipulador de outro indicador.
<h3>Valor de retorno</h3>
Retorna o manipulador de um indicador t√©cnico especifico, em caso de falha de retorna
INVALID_HANDLE. A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √©
mais utilizado, usando a fun√ß√£o IndicatorRelease(), onde o manipulador de indicador √© transmitido.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                                   Demo_iDEMA.mq5 |
//|                        Copyright 2011, MetaQuotes Software Corp. |
//|                                            ;https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;
#property description &quot;O indicador demonstra como obter dados&quot;
#property description &quot;de buffers do indicador para o indicador t√©cnico iDEMA.&quot;
#property description &quot;Um s√≠mbolo e o prazo utilizado para o c√°lculo do indicador,&quot;</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2840
</p>
<pre><code class="language-mql5">
#property description &quot;s√£o definidos pelos par√¢metros de s√≠mbolo e per√≠odo.&quot;
#property description &quot;O m√©todo de cria√ß√£o do manipulador √© definido atrav√©s do par√¢me
#property indicator_chart_window
#property indicator_buffers 1
#property indicator_plots   1
//--- plotar iDEMA
#property indicator_label1  &quot;iDEMA&quot;
#property indicator_type1   DRAW_LINE
#property indicator_color1  clrRed
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1
//+------------------------------------------------------------------+
//| Enumerador dos m√©todos de cria√ß√£o do manipulador¬†                |
//+------------------------------------------------------------------+
enum Creation
  {
   Call_iDEMA,             // usar iDEMA
   Call_IndicatorCreate    // usar IndicatorCreate
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//--- par√¢metros de entrada
input Creation             type=Call_iDEMA;           // tipo de fun√ß√£o
input int                  ma_period=14;              // per√≠odo de m√©dia m√≥vel
input int                  ma_shift=0;                // deslocamento
input ENUM_APPLIED_PRICE   applied_price=PRICE_CLOSE; // tipo de pre√ßo
input string               symbol=&quot; &quot;;                // s√≠mbolo
input ENUM_TIMEFRAMES      period=PERIOD_CURRENT;     // timeframe
//--- buffer do indicador
double         iDEMABuffer[];
//--- vari√°vel para armazenar o manipulador do indicator iDEMA
int    handle;
//--- vari√°vel para armazenamento
string name=symbol;
//--- nome do indicador num gr√°fico
string short_name;
//--- manteremos o n√∫mero de valores no indicador Double Exponential Moving Average
int    bars_calculated=0;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- atribui√ß√£o de array para buffer do indicador
   SetIndexBuffer(0,iDEMABuffer,INDICATOR_DATA);
   //--- definir deslocamento
   PlotIndexSetInteger(0,PLOT_SHIFT,ma_shift);
//--- determinar o s√≠mbolo do indicador, √© desenhado para
   name=symbol;
//--- excluir os espa√ßos √† direita e √† esquerda</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2841
</p>
<pre><code class="language-mql5">
   StringTrimRight(name);
   StringTrimLeft(name);
//--- se resulta em comprimento zero da string do &#x27;name&#x27;
   if(StringLen(name)==0)
     {
      //--- tomar o s√≠mbolo do gr√°fico, o indicador est√° anexado para
      name=_Symbol;
     }
//--- criar manipulador do indicador
   if(type==Call_iDEMA)
      handle=iDEMA(name,period,ma_period,ma_shift,applied_price);
   else
     {
      //--- preencher a estrutura com os par√¢metros do indicador
      MqlParam pars[3];
      //--- per√≠odo de m√©dia m√≥vel
      pars[0].type=TYPE_INT;
      pars[0].integer_value=ma_period;
      //--- deslocamento
      pars[1].type=TYPE_INT;
      pars[1].integer_value=ma_shift;
      //--- tipo de pre√ßo
      pars[2].type=TYPE_INT;
      pars[2].integer_value=applied_price;
      handle=IndicatorCreate(name,period,IND_DEMA,3,pars);
     }
//--- se o manipulador n√£o √© criado
   if(handle==INVALID_HANDLE)
     {
      //--- mensagem sobre a falha e a sa√≠da do c√≥digo de erro
      PrintFormat(&quot;Falha ao criar o manipulador do indicador iDEMA para o s√≠mbolo %s/%
                  name,
                  EnumToString(period),
                  GetLastError());
      //--- o indicador √© interrompido precocemente
      return(INIT_FAILED);
     }
//--- mostra que o s√≠mbolo/prazo do indicador Double Exponential Moving Average √© calc
   short_name=StringFormat(&quot;iDEMA(%s/%s, %d, %d, %s)&quot;,name,EnumToString(period),
                           ma_period,ma_shift,EnumToString(applied_price));
   IndicatorSetString(INDICATOR_SHORTNAME,short_name);
//--- inicializa√ß√£o normal do indicador  
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2842
</p>
<pre><code class="language-mql5">
                const datetime &amp;time[],
                const double &amp;open[],
                const double &amp;high[],
                const double &amp;low[],
                const double &amp;close[],
                const long &amp;tick_volume[],
                const long &amp;volume[],
                const int &amp;spread[])
  {
//--- n√∫mero de valores copiados a partir do indicador iDEMA
   int values_to_copy;
//--- determinar o n√∫mero de valores calculados no indicador
   int calculated=BarsCalculated(handle);
   if(calculated&lt;=0)
     {
      PrintFormat(&quot;BarsCalculated() retornando %d, c√≥digo de erro %d&quot;,calculated,GetLa
      return(0);
     }
//--- se for o princ√≠pio do c√°lculo do indicador, ou se o n√∫mero de valores √© modifica
//--- ou se √© necess√°rio c√°lculo do indicador para duas ou mais barras (isso significa
   if(prev_calculated==0 || calculated!=bars_calculated || rates_total&gt;prev_calculated
     {
      //--- se o array iDEMABuffer √© maior do que o n√∫mero de valores no indicador iDE
      //--- caso contr√°rio, copiamos menor do que o tamanho dos buffers do indicador
      if(calculated&gt;rates_total) values_to_copy=rates_total;
      else                       values_to_copy=calculated;
     }
   else
     {
      //--- isso significa que n√£o √© a primeira vez do c√°lculo do indicador, √© desde a
      //--- para o c√°lculo n√£o mais do que uma barra √© adicionada
      values_to_copy=(rates_total-prev_calculated)+1;
     }
//--- preencher o array iDEMABuffer com valores do indicador Double Exponential Moving
//--- se FillArrayFromBuffer retorna falso, significa que a informa√ß√£o n√£o est√° pronta
   if(!FillArrayFromBuffer(iDEMABuffer,ma_shift,handle,values_to_copy)) return(0);
//--- formar a mensagem
   string comm=StringFormat(&quot;%s ==&gt;  Valor atualizado no indicador %s: %d&quot;,
                            TimeToString(TimeCurrent(),TIME_DATE|TIME_SECONDS),
                            short_name,
                            values_to_copy);
//--- exibir a mensagem de servi√ßo no gr√°fico
   Comment(comm);
//--- memorizar o n√∫mero de valores no indicador Double Exponential Moving Average
   bars_calculated=calculated;
//--- retorna o valor prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2843
</p>
<pre><code class="language-mql5">
//| Preencher buffers do indicador a partir do indicador iDEMA       |
//+------------------------------------------------------------------+
bool FillArrayFromBuffer(double &amp;values[],  // buffer do indicator para valores do Dou
                         int shift,         // deslocamento
                         int ind_handle,    // manipulador do indicador iDEMA
                         int amount         // n√∫mero de valores copiados
                         )
  {
//--- redefinir o c√≥digo de erro
   ResetLastError();
//--- preencher uma parte do array iDEMABuffer com valores do buffer do indicador que 
   if(CopyBuffer(ind_handle,0,-shift,amount,values)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iDEMA, c√≥digo de erro %d&quot;,GetLas
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- est√° tudo bem
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de desinicializa√ß√£o do indicador                          |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   if(handle!=INVALID_HANDLE)
      IndicatorRelease(handle);
//--- limpar o gr√°fico ap√≥s excluir o indicador
   Comment(&quot;&quot;);
</code></pre>
<p>
  }</p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2844
iDeMarker
A fun√ß√£o retorna o manipulador do indicador Double DeMarker. Tem apenas um buffer.
</p>
<pre><code class="language-mql5">
int¬† iDeMarker(
   string¬†          symbol,¬†       // s√≠mbolo nome
   ENUM_TIMEFRAMES¬† period,¬†       // per√≠odo
   int¬†             ma_period¬†     // per√≠odo m√©dio
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in] O nome do s√≠mbolo de seguran√ßa, os dados que devem ser usados para calcular o indicador. O
valor NULL significa o s√≠mbolo atual.
period
[in] O valor do per√≠odo pode ser um dos valores ENUM_TIMEFRAMES, 0 (zero) significa o prazo
corrente.
ma_period
[in] Per√≠odo m√©dio (barras contadas) para os c√°lculos.
<h3>Valor de retorno</h3>
Retorna o manipulador de um indicador t√©cnico especifico, em caso de falha de retorna
INVALID_HANDLE. A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √©
mais utilizado, usando a fun√ß√£o IndicatorRelease(), onde o manipulador de indicador √© transmitido.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                               Demo_iDeMarker.mq5 |
//|                        Copyright 2011, MetaQuotes Software Corp. |
//|                                            ;https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;
#property description &quot;O indicador demonstra como obter dados&quot;
#property description &quot;de buffers do indicador para o indicador t√©cnico iDeMarker.&quot;
#property description &quot;Um s√≠mbolo e o prazo utilizado para o c√°lculo do indicador,&quot;
#property description &quot;s√£o definidos pelos par√¢metros de s√≠mbolo e per√≠odo.&quot;
#property description &quot;O m√©todo de cria√ß√£o do manipulador √© definido atrav√©s do par√¢me
#property indicator_separate_window
#property indicator_buffers 1
#property indicator_plots   1
//--- plotar iDeMarker
#property indicator_label1  &quot;iDeMarker&quot;\
#property indicator_type1   DRAW_LINE
#property indicator_color1  clrLightSeaGreen</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2845
</p>
<pre><code class="language-mql5">
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1
//--- n√≠veis horizontais na janela de indicador
#property indicator_level1  0.3
#property indicator_level2  0.7
//+------------------------------------------------------------------+
//| Enumerador dos m√©todos de cria√ß√£o do manipulador¬†                |
//+------------------------------------------------------------------+
enum Creation
  {
   Call_iDeMarker,         // usar iDeMarker
   Call_IndicatorCreate    // usar IndicatorCreate
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//--- par√¢metros de entrada
input Creation             type=Call_iDeMarker;       // tipo de fun√ß√£o
input int                  ma_period=14;              // per√≠odo de m√©dia m√≥vel
input string               symbol=&quot; &quot;;                // s√≠mbolo
input ENUM_TIMEFRAMES      period=PERIOD_CURRENT;     // timeframe
//--- buffer do indicador
double         iDeMarkerBuffer[];
//--- vari√°vel para armazenar o manipulador do indicator iDeMarker
int    handle;
//--- vari√°vel para armazenamento
string name=symbol;
//--- nome do indicador num gr√°fico
string short_name;
//--- manteremos o n√∫mero de valores no indicador DeMarker
int    bars_calculated=0;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- atribui√ß√£o de array para buffer do indicador
   SetIndexBuffer(0,iDeMarkerBuffer,INDICATOR_DATA);
//--- determinar o s√≠mbolo do indicador, √© desenhado para
   name=symbol;
//--- excluir os espa√ßos √† direita e √† esquerda
   StringTrimRight(name);
   StringTrimLeft(name);
//--- se resulta em comprimento zero da string do &#x27;name&#x27;
   if(StringLen(name)==0)
     {
      //--- tomar o s√≠mbolo do gr√°fico, o indicador est√° anexado para
      name=_Symbol;
     }
//--- criar manipulador do indicador
   if(type==Call_iDeMarker)
      handle=iDeMarker(name,period,ma_period);</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2846
</p>
<pre><code class="language-mql5">
   else
     {
      //--- preencher a estrutura com os par√¢metros do indicador
      MqlParam pars[1];
      //--- per√≠odo de m√©dia m√≥vel
      pars[0].type=TYPE_INT;
      pars[0].integer_value=ma_period;
      handle=IndicatorCreate(name,period,IND_DEMARKER,1,pars);
     }
//--- se o manipulador n√£o √© criado
   if(handle==INVALID_HANDLE)
     {
      //--- mensagem sobre a falha e a sa√≠da do c√≥digo de erro
      PrintFormat(&quot;Falha ao criar o manipulador do indicador iDeMarker para o s√≠mbolo 
                  name,
                  EnumToString(period),
                  GetLastError());
      //--- o indicador √© interrompido precocemente
      return(INIT_FAILED);
     }
//--- mostra que o s√≠mbolo/prazo do indicador DeMarker √© calculado para
   short_name=StringFormat(&quot;iDeMarker(%s/%s, period=%d)&quot;,name,EnumToString(period),ma_
   IndicatorSetString(INDICATOR_SHORTNAME,short_name);
//--- inicializa√ß√£o normal do indicador  
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &amp;time[],
                const double &amp;open[],
                const double &amp;high[],
                const double &amp;low[],
                const double &amp;close[],
                const long &amp;tick_volume[],
                const long &amp;volume[],
                const int &amp;spread[])
  {
//--- n√∫mero de valores copiados a partir do indicador iDeMarker
   int values_to_copy;
//--- determinar o n√∫mero de valores calculados no indicador
   int calculated=BarsCalculated(handle);
   if(calculated&lt;=0)
     {
      PrintFormat(&quot;BarsCalculated() retornando %d, c√≥digo de erro %d&quot;,calculated,GetLa
      return(0);
     }</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2847
</p>
<pre><code class="language-mql5">
//--- se for o princ√≠pio do c√°lculo do indicador, ou se o n√∫mero de valores √© modifica
//--- ou se √© necess√°rio c√°lculo do indicador para duas ou mais barras (isso significa
   if(prev_calculated==0 || calculated!=bars_calculated || rates_total&gt;prev_calculated
     {
      //--- se o array iDeMarkerBuffer √© maior do que o n√∫mero de valores no indicador
      //--- caso contr√°rio, copiamos menor do que o tamanho dos buffers do indicador
      if(calculated&gt;rates_total) values_to_copy=rates_total;
      else                       values_to_copy=calculated;
     }
   else
     {
      //--- isso significa que n√£o √© a primeira vez do c√°lculo do indicador, √© desde a
      //--- para o c√°lculo n√£o mais do que uma barra √© adicionada
      values_to_copy=(rates_total-prev_calculated)+1;
     }
//--- preencher o array iDeMarkerBuffer com valores do indicador DeMarker
//--- se FillArrayFromBuffer retorna falso, significa que a informa√ß√£o n√£o est√° pronta
   if(!FillArrayFromBuffer(iDeMarkerBuffer,handle,values_to_copy)) return(0);
//--- formar a mensagem
   string comm=StringFormat(&quot;%s ==&gt;  Valor atualizado no indicador %s: %d&quot;,
                            TimeToString(TimeCurrent(),TIME_DATE|TIME_SECONDS),
                            short_name,
                            values_to_copy);
//--- exibir a mensagem de servi√ßo no gr√°fico
   Comment(comm);
//--- memorizar o n√∫mero de valores no indicador DeMarker
   bars_calculated=calculated;
//--- retorna o valor prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Preencher buffers do indicador a partir do indicador iDeMarker   |
//+------------------------------------------------------------------+
bool FillArrayFromBuffer(double &amp;values[],  // buffer do indicator para valores do DeM
                         int ind_handle,    // manipulador do indicador iDeMarker
                         int amount         // n√∫mero de valores copiados
                         )
  {
//--- redefinir o c√≥digo de erro
   ResetLastError();
//--- preencher uma parte do array iDeMarkerBuffer com valores do buffer do indicador 
   if(CopyBuffer(ind_handle,0,0,amount,values)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iDeMarker, c√≥digo de erro %d&quot;,Ge
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- est√° tudo bem</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2848
</p>
<pre><code class="language-mql5">
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de desinicializa√ß√£o do indicador                          |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   if(handle!=INVALID_HANDLE)
      IndicatorRelease(handle);
//--- limpar o gr√°fico ap√≥s excluir o indicador
   Comment(&quot;&quot;);
</code></pre>
<p>
  }</p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2849
iEnvelopes
A fun√ß√£o retorna o manipulador do indicador Envelopes.
</p>
<pre><code class="language-mql5">
int¬† iEnvelopes(
   string¬†             symbol,¬†           // s√≠mbolo nome
   ENUM_TIMEFRAMES¬†    period,¬†           // per√≠odo
   int¬†                ma_period,¬†        // per√≠odo para o c√°lculo da linha da m√©dia 
   int¬†                ma_shift,¬†         // deslocamento horizontal do indicador
   ENUM_MA_METHOD¬†     ma_method,¬†        // tipo de suaviza√ß√£o
   ENUM_APPLIED_PRICE¬† applied_price,¬†    // tipo de pre√ßo ou de manipulador
   double¬†             deviation¬†         // desvio dos limites da linha mediana (em p
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in] O nome do s√≠mbolo de seguran√ßa, os dados que devem ser usados para calcular o indicador. O
valor NULL significa o s√≠mbolo atual.
period
[in] O valor do per√≠odo pode ser um dos valores ENUM_TIMEFRAMES, 0 (zero) significa o prazo
corrente.
ma_period
[in] Per√≠odo da m√©dia m√≥vel para a linha principal.
ma_shift
[in] O deslocamento do indicador em rela√ß√£o √† gr√°fico de pre√ßo.
ma_method
[in]  Tipo suavizado. Pode ser um dos valores ENUM_MA_METHOD.
applied_price
[in]  O pre√ßo usado. Pode ser qualquer das constantes de pre√ßos ENUM_APPLIED_PRICE ou um
manipulador de outro indicador.
deviation
[in]  O desvio da linha principal (em porcentagem).
<h3>Valor de retorno</h3>
Retorna o manipulador de um indicador t√©cnico especifico, em caso de falha de retorna
INVALID_HANDLE. A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √©
mais utilizado, usando a fun√ß√£o IndicatorRelease(), onde o manipulador de indicador √© transmitido.
<h3>Observa√ß√£o</h3>
Os n√∫meros de buffer: 0 - UPPER_LINE, 1 - LOWER_LINE.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2850
</p>
<pre><code class="language-mql5">
//|                                              Demo_iEnvelopes.mq5 |
//|                        Copyright 2011, MetaQuotes Software Corp. |
//|                                            ;https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;
#property description &quot;O indicador demonstra como obter dados&quot;
#property description &quot;de buffers do indicador para o indicador t√©cnico.&quot;
#property description &quot;Um s√≠mbolo e o prazo utilizado para o c√°lculo do indicador,&quot;
#property description &quot;s√£o definidos pelos par√¢metros de s√≠mbolo e per√≠odo.&quot;
#property description &quot;O m√©todo de cria√ß√£o do manipulador √© definido atrav√©s do par√¢me
#property indicator_chart_window
#property indicator_buffers 2
#property indicator_plots   2
//--- plotar linha superior
#property indicator_label1  &quot;Upper&quot;
#property indicator_type1   DRAW_LINE
#property indicator_color1  clrBlue
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1
//--- plotar linha inferior
#property indicator_label2  &quot;Lower&quot;
#property indicator_type2   DRAW_LINE
#property indicator_color2  clrRed
#property indicator_style2  STYLE_SOLID
#property indicator_width2  1
//+------------------------------------------------------------------+
//| Enumerador dos m√©todos de cria√ß√£o do manipulador¬†                |
//+------------------------------------------------------------------+
enum Creation
  {
   Call_iEnvelopes,        // usar iEnvelopes
   Call_IndicatorCreate    // usar IndicatorCreate
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//--- par√¢metros de entrada
input Creation             type=Call_iEnvelopes;      // tipo de fun√ß√£o
input int                  ma_period=14;              // per√≠odo de m√©dia m√≥vel
input int                  ma_shift=0;                // deslocamento
input ENUM_MA_METHOD       ma_method=MODE_SMA;        // tipo de suaviza√ß√£o
input ENUM_APPLIED_PRICE   applied_price=PRICE_CLOSE; // tipo de pre√ßo
input double               deviation=0.1;             // desvio das bordas da m√©dia m√≥
input string               symbol=&quot; &quot;;                // s√≠mbolo
input ENUM_TIMEFRAMES      period=PERIOD_CURRENT;     // timeframe
//--- buffer do indicador
double         UpperBuffer[];
double         LowerBuffer[];
//--- vari√°vel para armazenar o manipulador do indicator iEnvelopes</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2851
</p>
<pre><code class="language-mql5">
int    handle;
//--- vari√°vel para armazenamento
string name=symbol;
//--- nome do indicador num gr√°fico
string short_name;
//--- manteremos o n√∫mero de valores no indicador Envelopes
int    bars_calculated=0;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- atribui√ß√£o de arrays para buffers do indicador
   SetIndexBuffer(0,UpperBuffer,INDICATOR_DATA);
   SetIndexBuffer(1,LowerBuffer,INDICATOR_DATA);
//--- definir o deslocamento de cada linha
   PlotIndexSetInteger(0,PLOT_SHIFT,ma_shift);
   PlotIndexSetInteger(1,PLOT_SHIFT,ma_shift);   
//--- determinar o s√≠mbolo do indicador, √© desenhado para
   name=symbol;
//--- excluir os espa√ßos √† direita e √† esquerda
   StringTrimRight(name);
   StringTrimLeft(name);
//--- se resulta em comprimento zero da string do &#x27;name&#x27;
   if(StringLen(name)==0)
     {
      //--- tomar o s√≠mbolo do gr√°fico, o indicador est√° anexado para
      name=_Symbol;
     }
//--- criar manipulador do indicador
   if(type==Call_iEnvelopes)
      handle=iEnvelopes(name,period,ma_period,ma_shift,ma_method,applied_price,deviati
   else
     {
      //--- preencher a estrutura com os par√¢metros do indicador
      MqlParam pars[5];
      //--- per√≠odo de m√©dia m√≥vel
      pars[0].type=TYPE_INT;
      pars[0].integer_value=ma_period;
      //--- deslocamento
      pars[1].type=TYPE_INT;
      pars[1].integer_value=ma_shift;
      //--- tipo de suaviza√ß√£o
      pars[2].type=TYPE_INT;
      pars[2].integer_value=ma_method;
      //--- tipo de pre√ßo
      pars[3].type=TYPE_INT;
      pars[3].integer_value=applied_price;
      //--- tipo de pre√ßo</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2852
</p>
<pre><code class="language-mql5">
      pars[4].type=TYPE_DOUBLE;
      pars[4].double_value=deviation;
      handle=IndicatorCreate(name,period,IND_ENVELOPES,5,pars);
     }
//--- se o manipulador n√£o √© criado
   if(handle==INVALID_HANDLE)
     {
      //--- mensagem sobre a falha e a sa√≠da do c√≥digo de erro
      PrintFormat(&quot;Falha ao criar o manipulador do indicador iEnvelopes para o s√≠mbolo
                  name,
                  EnumToString(period),
                  GetLastError());
      //--- o indicador √© interrompido precocemente
      return(INIT_FAILED);
     }
//--- mostra que o s√≠mbolo/prazo do indicador Envelopes √© calculado para
   short_name=StringFormat(&quot;iEnvelopes(%s/%s, %d, %d, %s,%s, %G)&quot;,name,EnumToString(pe
   ma_period,ma_shift,EnumToString(ma_method),EnumToString(applied_price),deviation);
   IndicatorSetString(INDICATOR_SHORTNAME,short_name);
//--- inicializa√ß√£o normal do indicador  
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &amp;time[],
                const double &amp;open[],
                const double &amp;high[],
                const double &amp;low[],
                const double &amp;close[],
                const long &amp;tick_volume[],
                const long &amp;volume[],
                const int &amp;spread[])
  {
//--- n√∫mero de valores copiados a partir do indicador iEnvelopes
   int values_to_copy;
//--- determinar o n√∫mero de valores calculados no indicador
   int calculated=BarsCalculated(handle);
   if(calculated&lt;=0)
     {
      PrintFormat(&quot;BarsCalculated() retornando %d, c√≥digo de erro %d&quot;,calculated,GetLa
      return(0);
     }
//--- se for o princ√≠pio do c√°lculo do indicador, ou se o n√∫mero de valores √© modifica
//--- ou se √© necess√°rio c√°lculo do indicador para duas ou mais barras (isso significa
   if(prev_calculated==0 || calculated!=bars_calculated || rates_total&gt;prev_calculated
     {</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2853
</p>
<pre><code class="language-mql5">
      //--- se o array UpperBuffer √© maior do que o n√∫mero de valores no indicador iEn
      //--- caso contr√°rio, copiamos menor do que o tamanho dos buffers do indicador
      if(calculated&gt;rates_total) values_to_copy=rates_total;
      else                       values_to_copy=calculated;
     }
   else
     {
      //--- isso significa que n√£o √© a primeira vez do c√°lculo do indicador, √© desde a
      //--- para o c√°lculo n√£o mais do que uma barra √© adicionada
      values_to_copy=(rates_total-prev_calculated)+1;
     }
//--- preencher os arrays UpperBuffer e LowerBuffer com valores do indicador Envelopes
//--- se FillArrayFromBuffer retorna falso, significa que a informa√ß√£o n√£o est√° pronta
   if(!FillArraysFromBuffers(UpperBuffer,LowerBuffer,ma_shift,handle,values_to_copy)) 
//--- formar a mensagem
   string comm=StringFormat(&quot;%s ==&gt;  Valor atualizado no indicador %s: %d&quot;,
                            TimeToString(TimeCurrent(),TIME_DATE|TIME_SECONDS),
                            short_name,
                            values_to_copy);
//--- exibir a mensagem de servi√ßo no gr√°fico
   Comment(comm);
//--- memorizar o n√∫mero de valores no indicador Envelopes
   bars_calculated=calculated;
//--- retorna o valor prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Preencher buffers do indicador a partir do indicador iEnvelopes  |
//+------------------------------------------------------------------+
bool FillArraysFromBuffers(double &amp;upper_values[],    // buffer do indicator linha da 
                           double &amp;lower_values[],    // indicador da linha da borda i
                           int shift,                 // deslocamento
                           int ind_handle,            // manipulador do indicador iEnv
                           int amount                 // n√∫mero dos valores copiados
                           )
  {
//--- redefinir o c√≥digo de erro
   ResetLastError();
//--- preencher uma parte do array UpperBuffer com valores do buffer do indicador que 
   if(CopyBuffer(ind_handle,0,-shift,amount,upper_values)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iEnvelopes, c√≥digo de erro %d&quot;,G
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- preencher uma parte do array LowerBuffer com valores do buffer do indicador que 
   if(CopyBuffer(ind_handle,1,-shift,amount,lower_values)&lt;0)
     {</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2854
</p>
<pre><code class="language-mql5">
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iEnvelopes, c√≥digo de erro %d&quot;,G
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- est√° tudo bem
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de desinicializa√ß√£o do indicador                          |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   if(handle!=INVALID_HANDLE)
      IndicatorRelease(handle);
//--- limpar o gr√°fico ap√≥s excluir o indicador
   Comment(&quot;&quot;);
</code></pre>
<p>
  }</p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2855
iForce
A fun√ß√£o retorna o manipulador do indicador Force Index. Tem apenas um buffer.
</p>
<pre><code class="language-mql5">
int¬† iForce(
   string¬†             symbol,¬†           // s√≠mbolo nome
   ENUM_TIMEFRAMES¬†    period,¬†           // per√≠odo
   int¬†                ma_period,¬†        // per√≠odo m√©dio
   ENUM_MA_METHOD¬†     ma_method,¬†        // tipo suavizado
   ENUM_APPLIED_VOLUME applied_volume     // tipo de volume para c√°lculo
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in] O nome do s√≠mbolo de seguran√ßa, os dados que devem ser usados para calcular o indicador. O
valor NULL significa o s√≠mbolo atual.
period
[in] O valor do per√≠odo pode ser um dos valores ENUM_TIMEFRAMES, 0 (zero) significa o prazo
corrente.
ma_period
[in] Per√≠odo m√©dio para c√°lculo do indicador.
ma_method
[in]  Tipo suavizado. Pode ser um dos valores ENUM_MA_METHOD.
applied_volume
[in]  O volume usado. Pode ser um dos valores ENUM_APPLIED_VOLUME.
<h3>Valor de retorno</h3>
Retorna o manipulador de um indicador t√©cnico especifico, em caso de falha de retorna
INVALID_HANDLE. A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √©
mais utilizado, usando a fun√ß√£o IndicatorRelease(), onde o manipulador de indicador √© transmitido.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                                  Demo_iForce.mq5 |
//|                        Copyright 2011, MetaQuotes Software Corp. |
//|                                            ;https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;
#property description &quot;O indicador demonstra como obter dados&quot;
#property description &quot;de buffers do indicador para o indicador t√©cnico iForce.&quot;
#property description &quot;Um s√≠mbolo e o prazo utilizado para o c√°lculo do indicador,&quot;
#property description &quot;s√£o definidos pelos par√¢metros de s√≠mbolo e per√≠odo.&quot;
#property description &quot;O m√©todo de cria√ß√£o do manipulador √© definido atrav√©s do par√¢me</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2856
</p>
<pre><code class="language-mql5">
#property indicator_separate_window
#property indicator_buffers 1
#property indicator_plots   1
//--- desenhando iForce
#property indicator_label1  &quot;iForce&quot;
#property indicator_type1   DRAW_LINE
#property indicator_color1  clrLightSeaGreen
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1
//+------------------------------------------------------------------+
//| Enumerador dos m√©todos de cria√ß√£o do manipulador¬†                |
//+------------------------------------------------------------------+
enum Creation
  {
   Call_iForce,            // usar iForce
   Call_IndicatorCreate    // usar IndicatorCreate
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//--- par√¢metros de entrada
input Creation             type=Call_iForce;             // tipo de fun√ß√£o
input int                  ma_period=13;                 // per√≠odo m√©dio
input ENUM_MA_METHOD       ma_method=MODE_SMA;           // tipo de suaviza√ß√£o
input ENUM_APPLIED_VOLUME  applied_volume=VOLUME_TICK;   // tipo de volume
input string               symbol=&quot; &quot;;                   // s√≠mbolo
input ENUM_TIMEFRAMES      period=PERIOD_CURRENT;        // timeframe
//--- buffer do indicador
double         iForceBuffer[];
//--- vari√°vel para armazenar o manipulador do indicator iForce
int    handle;
//--- vari√°vel para armazenamento
string name=symbol;
//--- nome do indicador num gr√°fico
string short_name;
//--- manteremos o n√∫mero de valores no indicador Force
int    bars_calculated=0;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- atribui√ß√£o de array para buffer do indicador
   SetIndexBuffer(0,iForceBuffer,INDICATOR_DATA);
//--- determinar o s√≠mbolo do indicador, √© desenhado para
   name=symbol;
//--- excluir os espa√ßos √† direita e √† esquerda
   StringTrimRight(name);
   StringTrimLeft(name);
//--- se resulta em comprimento zero da string do &#x27;name&#x27;
   if(StringLen(name)==0)</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2857
</p>
<pre><code class="language-mql5">
     {
      //--- tomar o s√≠mbolo do gr√°fico, o indicador est√° anexado para
      name=_Symbol;
     }
//--- criar manipulador do indicador
   if(type==Call_iForce)
      handle=iForce(name,period,ma_period,ma_method,applied_volume);
   else
     {
      //--- preencher a estrutura com os par√¢metros do indicador
      MqlParam pars[3];
      //--- per√≠odo de m√©dia m√≥vel
      pars[0].type=TYPE_INT;
      pars[0].integer_value=ma_period;
      //--- tipo de suaviza√ß√£o
      pars[1].type=TYPE_INT;
      pars[1].integer_value=ma_method;
      //--- tipo de volume
      pars[2].type=TYPE_INT;
      pars[2].integer_value=applied_volume;
      //--- tipo de pre√ßo
      handle=IndicatorCreate(name,period,IND_FORCE,3,pars);
     }
//--- se o manipulador n√£o √© criado
   if(handle==INVALID_HANDLE)
     {
      //--- mensagem sobre a falha e a sa√≠da do c√≥digo de erro
      PrintFormat(&quot;Falha ao criar o manipulador do indicador iForce para o s√≠mbolo %s/
                  name,
                  EnumToString(period),
                  GetLastError());
      //--- o indicador √© interrompido precocemente
      return(INIT_FAILED);
     }
//--- mostra que o s√≠mbolo/prazo do indicador Force √© calculado para
   short_name=StringFormat(&quot;iForce(%s/%s, %d, %s, %s)&quot;,name,EnumToString(period),
                           ma_period,EnumToString(ma_method),EnumToString(applied_volu
   IndicatorSetString(INDICATOR_SHORTNAME,short_name);
//--- inicializa√ß√£o normal do indicador  
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &amp;time[],
                const double &amp;open[],
                const double &amp;high[],</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2858
</p>
<pre><code class="language-mql5">
                const double &amp;low[],
                const double &amp;close[],
                const long &amp;tick_volume[],
                const long &amp;volume[],
                const int &amp;spread[])
  {
//--- n√∫mero de valores copiados a partir do indicador iForce
   int values_to_copy;
//--- determinar o n√∫mero de valores calculados no indicador
   int calculated=BarsCalculated(handle);
   if(calculated&lt;=0)
     {
      PrintFormat(&quot;BarsCalculated() retornando %d, c√≥digo de erro %d&quot;,calculated,GetLa
      return(0);
     }
//--- se for o princ√≠pio do c√°lculo do indicador, ou se o n√∫mero de valores √© modifica
//--- ou se √© necess√°rio c√°lculo do indicador para duas ou mais barras (isso significa
   if(prev_calculated==0 || calculated!=bars_calculated || rates_total&gt;prev_calculated
     {
      //--- se o array iForceBuffer √© maior do que o n√∫mero de valores no indicador iF
      //--- caso contr√°rio, copiamos menor do que o tamanho dos buffers do indicador
      if(calculated&gt;rates_total) values_to_copy=rates_total;
      else                       values_to_copy=calculated;
     }
   else
     {
      //--- isso significa que n√£o √© a primeira vez do c√°lculo do indicador, √© desde a
      //--- para o c√°lculo n√£o mais do que uma barra √© adicionada
      values_to_copy=(rates_total-prev_calculated)+1;
     }
//--- preencher o array iForceBuffer com valores do indicador Force
//--- se FillArrayFromBuffer retorna falso, significa que a informa√ß√£o n√£o est√° pronta
   if(!FillArrayFromBuffer(iForceBuffer,handle,values_to_copy)) return(0);
//--- formar a mensagem
   string comm=StringFormat(&quot;%s ==&gt;  Valor atualizado no indicador %s: %d&quot;,
                            TimeToString(TimeCurrent(),TIME_DATE|TIME_SECONDS),
                            short_name,
                            values_to_copy);
//--- exibir a mensagem de servi√ßo no gr√°fico
   Comment(comm);
//--- memorizar o n√∫mero de valores no indicador Force
   bars_calculated=calculated;
//--- retorna o valor prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Preencher buffers do indicador a partir do indicador iForce      |
//+------------------------------------------------------------------+
bool FillArrayFromBuffer(double &amp;values[],  // buffer do indicator para valores do For</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2859
</p>
<pre><code class="language-mql5">
                         int ind_handle,    // manipulador do indicador iForce
                         int amount         // n√∫mero de valores copiados
                         )
  {
//--- redefinir o c√≥digo de erro
   ResetLastError();
//--- preencher uma parte do array iForceBuffer com valores do buffer do indicador que
   if(CopyBuffer(ind_handle,0,0,amount,values)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iForce, c√≥digo de erro %d&quot;,GetLa
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- est√° tudo bem
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de desinicializa√ß√£o do indicador                          |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   if(handle!=INVALID_HANDLE)
      IndicatorRelease(handle);
//--- limpar o gr√°fico ap√≥s excluir o indicador
   Comment(&quot;&quot;);
</code></pre>
<p>
  }</p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2860
iFractals
A fun√ß√£o retorna o manipulador do indicador Fractals.
</p>
<pre><code class="language-mql5">
int¬† iFractals(
   string¬†          symbol,¬†    // s√≠mbolo nome
   ENUM_TIMEFRAMES¬† period¬†     // per√≠odo
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in] O nome do s√≠mbolo de seguran√ßa, os dados que devem ser usados para calcular o indicador. O
valor NULL significa o s√≠mbolo atual.
period
[in] O valor do per√≠odo pode ser um dos valores ENUM_TIMEFRAMES, 0 (zero) significa o prazo
corrente.
<h3>Valor de retorno</h3>
Retorna o manipulador de um indicador t√©cnico especifico, em caso de falha de retorna
INVALID_HANDLE. A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √©
mais utilizado, usando a fun√ß√£o IndicatorRelease(), onde o manipulador de indicador √© transmitido.
<h3>Observa√ß√£o</h3>
Os n√∫meros de buffer s√£o os seguintes: 0 - UPPER_LINE, 1 - LOWER_LINE.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                               Demo_iFractals.mq5 |
//|                        Copyright 2011, MetaQuotes Software Corp. |
//|                                            ;https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;
#property description &quot;O indicador demonstra como obter dados&quot;
#property description &quot;de buffers do indicador para o indicador t√©cnico iFractals.&quot;
#property description &quot;Um s√≠mbolo e o prazo utilizado para o c√°lculo do indicador,&quot;
#property description &quot;s√£o definidos pelos par√¢metros de s√≠mbolo e per√≠odo.&quot;
#property description &quot;O m√©todo de cria√ß√£o do manipulador √© definido atrav√©s do par√¢me
#property indicator_chart_window
#property indicator_buffers 1
#property indicator_plots   1
#property indicator_chart_window
#property indicator_buffers 2
#property indicator_plots   2
//--- plotar FractalUp</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2861
</p>
<pre><code class="language-mql5">
#property indicator_label1  &quot;FractalUp&quot;
#property indicator_type1   DRAW_ARROW
#property indicator_color1  clrBlue
//--- plotar FractalDown
#property indicator_label2  &quot;FractalDown&quot;
#property indicator_type2   DRAW_ARROW
#property indicator_color2  clrRed
//+------------------------------------------------------------------+
//| Enumerador dos m√©todos de cria√ß√£o do manipulador¬†                |
//+------------------------------------------------------------------+
enum Creation
  {
   Call_iFractals,         // usar iFractals
   Call_IndicatorCreate    // usar IndicatorCreate
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//--- par√¢metros de entrada
input Creation             type=Call_iFractals;          // tipo de fun√ß√£o
input string               symbol=&quot; &quot;;                   // s√≠mbolo
input ENUM_TIMEFRAMES      period=PERIOD_CURRENT;        // timeframe
//--- buffers do indicador
double         FractalUpBuffer[];
double         FractalDownBuffer[];
//--- vari√°vel para armazenar o manipulador do indicator iFractals
int    handle;
//--- vari√°vel para armazenamento
string name=symbol;
//--- nome do indicador num gr√°fico
string short_name;
//--- manteremos o n√∫mero de valores no indicador Fractals
int    bars_calculated=0;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- atribui√ß√£o de arrays para buffers do indicador
   SetIndexBuffer(0,FractalUpBuffer,INDICATOR_DATA);
   SetIndexBuffer(1,FractalDownBuffer,INDICATOR_DATA);
//--- definir c√≥digos usando um s√≠mbolo do conjunto de caractres Wingdings para a prop
   PlotIndexSetInteger(0,PLOT_ARROW,217); // seta acima
   PlotIndexSetInteger(1,PLOT_ARROW,218); // seta abaixo
//--- determinar o s√≠mbolo do indicador, √© desenhado para
   name=symbol;
//--- excluir os espa√ßos √† direita e √† esquerda
   StringTrimRight(name);
   StringTrimLeft(name);
//--- se resulta em comprimento zero da string do &#x27;name&#x27;
   if(StringLen(name)==0)
     {</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2862
</p>
<pre><code class="language-mql5">
      //--- tomar o s√≠mbolo do gr√°fico, o indicador est√° anexado para
      name=_Symbol;
     }
//--- criar manipulador do indicador
   if(type==Call_iFractals)
      handle=iFractals(name,period);
   else
      handle=IndicatorCreate(name,period,IND_FRACTALS);
//--- se o manipulador n√£o √© criado
   if(handle==INVALID_HANDLE)
     {
      //--- mensagem sobre a falha e a sa√≠da do c√≥digo de erro
      PrintFormat(&quot;Falha ao criar o manipulador do indicador iFractals para o s√≠mbolo 
                  name,
                  EnumToString(period),
                  GetLastError());
      //--- o indicador √© interrompido precocemente
      return(INIT_FAILED);
     }
//--- mostra que o s√≠mbolo/prazo do indicador Fractals √© calculado para
   short_name=StringFormat(&quot;iFractals(%s/%s)&quot;,name,EnumToString(period));
   IndicatorSetString(INDICATOR_SHORTNAME,short_name);
//--- inicializa√ß√£o normal do indicador
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &amp;time[],
                const double &amp;open[],
                const double &amp;high[],
                const double &amp;low[],
                const double &amp;close[],
                const long &amp;tick_volume[],
                const long &amp;volume[],
                const int &amp;spread[])
  {
//--- n√∫mero de valores copiados a partir do indicador iFractals
   int values_to_copy;
//--- determinar o n√∫mero de valores calculados no indicador
   int calculated=BarsCalculated(handle);
   if(calculated&lt;=0)
     {
      PrintFormat(&quot;BarsCalculated() retornando %d, c√≥digo de erro %d&quot;,calculated,GetLa
      return(0);
     }
//--- se for o princ√≠pio do c√°lculo do indicador, ou se o n√∫mero de valores √© modifica</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2863
</p>
<pre><code class="language-mql5">
//--- ou se √© necess√°rio c√°lculo do indicador para duas ou mais barras (isso significa
   if(prev_calculated==0 || calculated!=bars_calculated || rates_total&gt;prev_calculated
     {
      //--- se o array FractalUpBuffer √© maior do que o n√∫mero de valores no indicador
      //--- caso contr√°rio, copiamos menor do que o tamanho dos buffers do indicador
      if(calculated&gt;rates_total) values_to_copy=rates_total;
      else                       values_to_copy=calculated;
     }
   else
     {
      //--- isso significa que n√£o √© a primeira vez do c√°lculo do indicador, √© desde a
      //--- para o c√°lculo n√£o mais do que uma barra √© adicionada
      values_to_copy=(rates_total-prev_calculated)+1;
     }
//--- preencher os arrays FractalUpBuffer e FractalDownBuffer com valores do indicador
//--- se FillArrayFromBuffer retorna falso, significa que a informa√ß√£o n√£o est√° pronta
   if(!FillArraysFromBuffers(FractalUpBuffer,FractalDownBuffer,handle,values_to_copy))
//--- formar a mensagem
   string comm=StringFormat(&quot;%s ==&gt;  Valor atualizado no indicador %s: %d&quot;,
                            TimeToString(TimeCurrent(),TIME_DATE|TIME_SECONDS),
                            short_name,
                            values_to_copy);
//--- exibir a mensagem de servi√ßo no gr√°fico
   Comment(comm);
//--- memorizar o n√∫mero de valores no indicador Fractals
   bars_calculated=calculated;
//--- retorna o valor prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Preencher buffers do indicador a partir do indicador iFractals   |
//+------------------------------------------------------------------+
bool FillArraysFromBuffers(double &amp;up_arrows[],        // buffer do indicator para set
                           double &amp;down_arrows[],      // buffer do indicator para set
                           int ind_handle,             // manipulador do indicador iFr
                           int amount                  // n√∫mero de valores copiados
                           )
  {
//--- redefinir o c√≥digo de erro
   ResetLastError();
//--- preencher uma parte do array FractalUpBuffer com valores do buffer do indicador 
   if(CopyBuffer(ind_handle,0,0,amount,up_arrows)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iFractals ao array FractalUpBuff
                  GetLastError());
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2864
</p>
<pre><code class="language-mql5">
//--- preencher uma parte do array FractalDownBuffer com valores do buffer do indicado
   if(CopyBuffer(ind_handle,1,0,amount,down_arrows)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iFractals ao array FractalDownBu
                  GetLastError());
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- est√° tudo bem
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de desinicializa√ß√£o do indicador                          |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   if(handle!=INVALID_HANDLE)
      IndicatorRelease(handle);
//--- limpar o gr√°fico ap√≥s excluir o indicador
   Comment(&quot;&quot;);
</code></pre>
<p>
  }</p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2865
iFrAMA
A fun√ß√£o retorna o manipulador do indicador Fractal Adaptive Moving Average. Tem apenas um buffer.
</p>
<pre><code class="language-mql5">
int¬† iFrAMA(
   string¬†             symbol,¬†           // s√≠mbolo nome
   ENUM_TIMEFRAMES¬†    period,¬†           // per√≠odo
   int¬†                ma_period,¬†        // per√≠odo m√©dio
   int¬†                ma_shift,¬†         // deslocamento horizontal no gr√°fico
   ENUM_APPLIED_PRICE¬† applied_price¬†     // tipo de pre√ßo ou manipulador
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in] O nome do s√≠mbolo de seguran√ßa, os dados que devem ser usados para calcular o indicador. O
valor NULL significa o s√≠mbolo atual.
period
[in] O valor do per√≠odo pode ser um dos valores ENUM_TIMEFRAMES, 0 (zero) significa o prazo
corrente.
ma_period
[in] Per√≠odo (contando as barras) para os c√°lculos do indicador.
ma_shift
[in]  Deslocamento do indicador no gr√°fico de pre√ßo.
applied_price
[in]  O pre√ßo usado. Pode ser qualquer das constantes de pre√ßos ENUM_APPLIED_PRICE ou um
manipulador de outro indicador.
<h3>Valor de retorno</h3>
Retorna o manipulador de um indicador t√©cnico especifico, em caso de falha de retorna
INVALID_HANDLE. A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √©
mais utilizado, usando a fun√ß√£o IndicatorRelease(), onde o manipulador de indicador √© transmitido.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                                  Demo_iFrAMA.mq5 |
//|                        Copyright 2011, MetaQuotes Software Corp. |
//|                                            ;https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;
#property description &quot;O indicador demonstra como obter dados&quot;
#property description &quot;de buffers do indicador para o indicador t√©cnico iFrAMA.&quot;
#property description &quot;Um s√≠mbolo e o prazo utilizado para o c√°lculo do indicador,&quot;
#property description &quot;s√£o definidos pelos par√¢metros de s√≠mbolo e per√≠odo.&quot;</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2866
</p>
<pre><code class="language-mql5">
#property description &quot;O m√©todo de cria√ß√£o do manipulador √© definido atrav√©s do par√¢me
#property indicator_chart_window
#property indicator_buffers 1
#property indicator_plots   1
//--- desenhando iFrAMA
#property indicator_label1  &quot;iFrAMA&quot;
#property indicator_type1   DRAW_LINE
#property indicator_color1  clrBlue
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1
//+------------------------------------------------------------------+
//| Enumerador dos m√©todos de cria√ß√£o do manipulador¬†                |
//+------------------------------------------------------------------+
enum Creation
  {
   Call_iFrAMA,            // usar iFrAMA
   Call_IndicatorCreate    // usar IndicatorCreate
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//--- par√¢metros de entrada
input Creation             type=Call_iFrAMA;             // tipo de fun√ß√£o
input int                  ma_period=14;                 // per√≠odo da m√©dia m√≥vel
input int                  ma_shift=0;                   // deslocamento
input ENUM_APPLIED_PRICE   applied_price=PRICE_CLOSE;    // tipo de pre√ßo
input string               symbol=&quot; &quot;;                   // s√≠mbolo
input ENUM_TIMEFRAMES      period=PERIOD_CURRENT;        // timeframe
//--- buffer do indicador
double         iFrAMABuffer[];
//--- vari√°vel para armazenar o manipulador do indicator iFrAMA
int    handle;
//--- vari√°vel para armazenamento
string name=symbol;
//--- nome do indicador num gr√°fico
string short_name;
//--- manteremos o n√∫mero de valores no indicador Fractal Adaptive Moving Average
int    bars_calculated=0;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- atribui√ß√£o de array para buffer do indicador
   SetIndexBuffer(0,iFrAMABuffer,INDICATOR_DATA);
//--- definir deslocamento
   PlotIndexSetInteger(0,PLOT_SHIFT,ma_shift);
//--- determinar o s√≠mbolo do indicador, √© desenhado para
   name=symbol;
//--- excluir os espa√ßos √† direita e √† esquerda
   StringTrimRight(name);</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2867
</p>
<pre><code class="language-mql5">
   StringTrimLeft(name);
//--- se resulta em comprimento zero da string do &#x27;name&#x27;
   if(StringLen(name)==0)
     {
      //--- tomar o s√≠mbolo do gr√°fico, o indicador est√° anexado para
      name=_Symbol;
     }
//--- criar manipulador do indicador
   if(type==Call_iFrAMA)
      handle=iFrAMA(name,period,ma_period,ma_shift,applied_price);
   else
     {
      //--- preencher a estrutura com os par√¢metros do indicador
      MqlParam pars[3];
      //--- per√≠odo de m√©dia m√≥vel
      pars[0].type=TYPE_INT;
      pars[0].integer_value=ma_period;
      //--- deslocamento
      pars[1].type=TYPE_INT;
      pars[1].integer_value=ma_shift;
      //--- tipo de pre√ßo
      pars[2].type=TYPE_INT;
      pars[2].integer_value=applied_price;
      //--- tipo de pre√ßo
      handle=IndicatorCreate(name,period,IND_FRAMA,3,pars);
     }
//--- se o manipulador n√£o √© criado
   if(handle==INVALID_HANDLE)
     {
      //--- mensagem sobre a falha e a sa√≠da do c√≥digo de erro
      PrintFormat(&quot;Falha ao criar o manipulador do indicador iFrAMA para o s√≠mbolo %s/
                  name,
                  EnumToString(period),
                  GetLastError());
      //--- o indicador √© interrompido precocemente
      return(INIT_FAILED);
     }
//--- mostra que o s√≠mbolo/prazo do indicador iFrAMA √© calculado para
   short_name=StringFormat(&quot;iFrAMA(%s/%s, %d, %d, %s)&quot;,name,EnumToString(period),
                           ma_period,ma_shift,EnumToString(applied_price));
   IndicatorSetString(INDICATOR_SHORTNAME,short_name);
//--- inicializa√ß√£o normal do indicador  
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2868
</p>
<pre><code class="language-mql5">
                const datetime &amp;time[],
                const double &amp;open[],
                const double &amp;high[],
                const double &amp;low[],
                const double &amp;close[],
                const long &amp;tick_volume[],
                const long &amp;volume[],
                const int &amp;spread[])
  {
//--- n√∫mero de valores copiados a partir do indicador iFrAMA
   int values_to_copy;
//--- determinar o n√∫mero de valores calculados no indicador
   int calculated=BarsCalculated(handle);
   if(calculated&lt;=0)
     {
      PrintFormat(&quot;BarsCalculated() retornando %d, c√≥digo de erro %d&quot;,calculated,GetLa
      return(0);
     }
//--- se for o princ√≠pio do c√°lculo do indicador, ou se o n√∫mero de valores √© modifica
//--- ou se √© necess√°rio c√°lculo do indicador para duas ou mais barras (isso significa
   if(prev_calculated==0 || calculated!=bars_calculated || rates_total&gt;prev_calculated
     {
      //--- se o array iFrAMABuffer √© maior do que o n√∫mero de valores no indicador iF
      //--- caso contr√°rio, copiamos menor do que o tamanho dos buffers do indicador
      if(calculated&gt;rates_total) values_to_copy=rates_total;
      else                       values_to_copy=calculated;
     }
   else
     {
      //--- isso significa que n√£o √© a primeira vez do c√°lculo do indicador, √© desde a
      //--- para o c√°lculo n√£o mais do que uma barra √© adicionada
      values_to_copy=(rates_total-prev_calculated)+1;
     }
//--- preencher o array iFrAMABuffer com valores do indicador Fractal Adaptive Moving 
//--- se FillArrayFromBuffer retorna falso, significa que a informa√ß√£o n√£o est√° pronta
   if(!FillArrayFromBuffer(iFrAMABuffer,ma_shift,handle,values_to_copy)) return(0);
//--- formar a mensagem
   string comm=StringFormat(&quot;%s ==&gt;  Valor atualizado no indicador %s: %d&quot;,
                            TimeToString(TimeCurrent(),TIME_DATE|TIME_SECONDS),
                            short_name,
                            values_to_copy);
//--- exibir a mensagem de servi√ßo no gr√°fico
   Comment(comm);
//--- memorizar o n√∫mero de valores no indicador Fractal Adaptive Moving Average
   bars_calculated=calculated;
//--- retorna o valor prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2869
</p>
<pre><code class="language-mql5">
//| Preencher buffers do indicador a partir do indicador iFrAMA      |
//+------------------------------------------------------------------+
bool FillArrayFromBuffer(double &amp;values[],  // buffer do indicator para valores do Fra
                         int shift,         // deslocamento
                         int ind_handle,    // manipulador do indicador iFrAMA
                         int amount         // n√∫mero de valores copiados
                         )
  {
//--- redefinir o c√≥digo de erro
   ResetLastError();
//--- preencher uma parte do array iFrAMABuffer com valores do buffer do indicador que
   if(CopyBuffer(ind_handle,0,-shift,amount,values)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iFrAMA, c√≥digo de erro %d&quot;,GetLa
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- est√° tudo bem
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de desinicializa√ß√£o do indicador                          |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   if(handle!=INVALID_HANDLE)
      IndicatorRelease(handle);
//--- limpar o gr√°fico ap√≥s excluir o indicador
   Comment(&quot;&quot;);
</code></pre>
<p>
  }</p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2870
iGator
A fun√ß√£o retorna o manipulador do indicador Gator. O oscilador mostra a diferen√ßa entre as linhas azul
e vermelha do Jacar√© (histograma superior) e diferen√ßa entre as linhas vermelha e verde (menor
histograma).
</p>
<pre><code class="language-mql5">
int¬† iGator(
   string¬†             symbol,¬†           // s√≠mbolo nome
   ENUM_TIMEFRAMES¬†    period,¬†           // per√≠odo
   int¬†                jaw_period,¬†       // per√≠odo para c√°lculo da mand√≠bula
   int¬†                jaw_shift,¬†        // deslocamento horizontal da mand√≠bula
   int¬†                teeth_period,¬†     // per√≠odo para c√°lculo dos dentes
   int¬†                teeth_shift,¬†      // deslocamento horizontal dos dentes
   int¬†                lips_period,¬†      // per√≠odo para o c√°lculo da boca
   int¬†                lips_shift,¬†       // deslocamento horizontal da boca
   ENUM_MA_METHOD¬†     ma_method,¬†        // tipo de suaviza√ß√£o
   ENUM_APPLIED_PRICE¬† applied_price¬†     // tipo de pre√ßo ou manipulador
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in] O nome do s√≠mbolo de seguran√ßa, os dados que devem ser usados para calcular o indicador. O
valor NULL significa o s√≠mbolo atual.
period
[in] O valor do per√≠odo pode ser um dos valores ENUM_TIMEFRAMES, 0 (zero) significa o prazo
corrente.
jaw_period
[in]  Per√≠odo m√©dio para a linha azul (mand√≠bula do Alligator).
jaw_shift
[in] O deslocamento da linha azul em rela√ß√£o √† tabela de pre√ßos. N√£o est√° diretamente ligado ao
deslocamento visual do histograma do indicador.
teeth_period
[in]   Per√≠odo m√©dio para a linha vermelha (dentes do Alligator).
teeth_shift
[in] O deslocamento da linha vermelha em rela√ß√£o para a tabela de pre√ßos. N√£o est√° diretamente
ligado ao deslocamento visual do histograma do indicador.
lips_period
[in]  Per√≠odo m√©dio para a linha verde (boca de Alligator).
lips_shift
[in] O deslocamento da linha verde em rela√ß√£o √† tabela de pre√ßos. N√£o est√° diretamente ligado ao
deslocamento visual do histograma do indicador.
ma_method
[in]  Tipo suavizado. Pode ser um dos valores ENUM_MA_METHOD.</p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2871
applied_price
[in]  O pre√ßo usado. Pode ser qualquer das constantes de pre√ßos ENUM_APPLIED_PRICE ou um
manipulador de outro indicador.
<h3>Valor de retorno</h3>
Retorna o manipulador de um indicador t√©cnico especifico, em caso de falha de retorna
INVALID_HANDLE. A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √©
mais utilizado, usando a fun√ß√£o IndicatorRelease(), onde o manipulador de indicador √© transmitido.
<h3>Observa√ß√£o</h3>
N√∫meros de buffer: 0 - UPPER_HISTOGRAM, 1 - buffer de cor do histograma superior, 2 -
LOWER_HISTOGRAM, 3 - buffer de cor do histograma inferior.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                                  Demo_iGator.mq5 |
//|                        Copyright 2011, MetaQuotes Software Corp. |
//|                                            ;https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;
#property description &quot;O indicador demonstra como obter dados&quot;
#property description &quot;dos buffers do indicador para o indicador t√©cnico iGator.&quot;
#property description &quot;Um s√≠mbolo e o prazo utilizado para o c√°lculo do indicador,&quot;
#property description &quot;s√£o definidos pelos par√¢metros de s√≠mbolo e per√≠odo.&quot;
#property description &quot;O m√©todo de cria√ß√£o do manipulador √© definido atrav√©s do par√¢me
#property description &quot;Todos os outros par√¢metros s√£o similares aos do padr√£o Gator Os
#property indicator_separate_window
#property indicator_buffers 4
#property indicator_plots   2
//--- desenhando GatorUp
#property indicator_label1  &quot;GatorUp&quot;
#property indicator_type1   DRAW_COLOR_HISTOGRAM
#property indicator_color1  clrGreen, clrRed
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1
//--- desenhando GatorDown
#property indicator_label2  &quot;GatorDown&quot;
#property indicator_type2   DRAW_COLOR_HISTOGRAM
#property indicator_color2  clrGreen, clrRed
#property indicator_style2  STYLE_SOLID
#property indicator_width2  1
//+------------------------------------------------------------------+
//| Enumerador dos m√©todos de cria√ß√£o do manipulador¬†                |
//+------------------------------------------------------------------+
enum Creation</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2872
</p>
<pre><code class="language-mql5">
  {
   Call_iGator,            // usar iGator
   Call_IndicatorCreate    // usar IndicatorCreate
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//--- par√¢metros de entrada
input Creation             type=Call_iGator;       // tipo de fun√ß√£o
input string               symbol=&quot; &quot;;             // s√≠mbolo
input ENUM_TIMEFRAMES      period=PERIOD_CURRENT;  // timeframe
input int                  jaw_period=13;          // per√≠odo da linha da mand√≠bula
input int                  jaw_shift=8;            // deslocamento da linha da mand√≠bu
input int                  teeth_period=8;         // per√≠odo da linha dos dentes
input int                  teeth_shift=5;          // deslocamento da linha dos dentes
input int                  lips_period=5;          // per√≠odo da linha da boca
input int                  lips_shift=3;           // deslocamento da linha da boca
input ENUM_MA_METHOD       MA_method=MODE_SMMA;    // m√©todo das linhas m√©dias do Alli
input ENUM_APPLIED_PRICE   applied_price=PRICE_MEDIAN;// tipo de pre√ßo utilizado para 
//--- buffers do indicador
double         GatorUpBuffer[];
double         GatorUpColors[];
double         GatorDownBuffer[];
double         GatorDownColors[];
//--- vari√°vel para armazenar o manipulador do indicator iGator
int    handle;
//--- vari√°vel para armazenamento
string name=symbol;
//--- nome do indicador num gr√°fico
string short_name;
//--- deslocamento dos valores para os histogramas superior e inferior
int shift;
//--- manteremos o n√∫mero de valores no indicador Gator Oscillator
int    bars_calculated=0;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- atribui√ß√£o de arrays para buffers do indicador
   SetIndexBuffer(0,GatorUpBuffer,INDICATOR_DATA);
   SetIndexBuffer(1,GatorUpColors,INDICATOR_COLOR_INDEX);
   SetIndexBuffer(2,GatorDownBuffer,INDICATOR_DATA);
   SetIndexBuffer(3,GatorDownColors,INDICATOR_COLOR_INDEX);
/*
</code></pre>
<p>
¬† Todas as mudan√ßas nos par√¢metros especificados referem-se o indicador Alligator, que
¬† Isso √© porque eles n√£o se movem como o indicador Gator em si, mas eles se movem conf
¬† Cujo os valores s√£o utilizados para calcular o Gator Oscillator!
*/
</p>
<pre><code class="language-mql5">
//--- vamos calcular o deslocamento para os histogramas superior e inferior, que √© igu
   shift=MathMin(jaw_shift,teeth_shift);
   PlotIndexSetInteger(0,PLOT_SHIFT,shift);</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2873
</p>
<pre><code class="language-mql5">
//--- apesar do indicador conter dois histogramas, o mesmo deslocamento √© usado - esta
   PlotIndexSetInteger(1,PLOT_SHIFT,shift);
//--- determinar o s√≠mbolo do indicador, √© desenhado para
   name=symbol;
//--- excluir os espa√ßos √† direita e √† esquerda
   StringTrimRight(name);
   StringTrimLeft(name);
//--- se resulta em comprimento zero da string do &#x27;name&#x27;
   if(StringLen(name)==0)
     {
      //--- tomar o s√≠mbolo do gr√°fico, o indicador est√° anexado para
      name=_Symbol;
     }
//--- criar manipulador do indicador
   if(type==Call_iGator)
      handle=iGator(name,period,jaw_period,jaw_shift,teeth_period,teeth_shift,
                    lips_period,lips_shift,MA_method,applied_price);
   else
     {
      //--- preencher a estrutura com os par√¢metros do indicador
      MqlParam pars[8];
      //--- per√≠odos e deslocamentos da linhas do Alligator 
      pars[0].type=TYPE_INT;
      pars[0].integer_value=jaw_period;
      pars[1].type=TYPE_INT;
      pars[1].integer_value=jaw_shift;
      pars[2].type=TYPE_INT;
      pars[2].integer_value=teeth_period;
      pars[3].type=TYPE_INT;
      pars[3].integer_value=teeth_shift;
      pars[4].type=TYPE_INT;
      pars[4].integer_value=lips_period;
      pars[5].type=TYPE_INT;
      pars[5].integer_value=lips_shift;
      //--- tipo de suaviza√ß√£o
      pars[6].type=TYPE_INT;
      pars[6].integer_value=MA_method;
      //--- tipo de pre√ßo
      pars[7].type=TYPE_INT;
      pars[7].integer_value=applied_price;
      //--- criando o manipulador
      handle=IndicatorCreate(name,period,IND_GATOR,8,pars);
     }
//--- se o manipulador n√£o √© criado
   if(handle==INVALID_HANDLE)
     {
      //--- mensagem sobre a falha e a sa√≠da do c√≥digo de erro
      PrintFormat(&quot;Falha ao criar o manipulador do indicador iGator para o s√≠mbolo %s/</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2874
</p>
<pre><code class="language-mql5">
                  name,
                  EnumToString(period),
                  GetLastError());
      //--- o indicador √© interrompido precocemente
      return(INIT_FAILED);
     }
//--- mostra que o s√≠mbolo/prazo do indicador Gator Oscillator √© calculado para
   short_name=StringFormat(&quot;iGator(%s/%s, %d, %d ,%d, %d, %d, %d)&quot;,name,EnumToString(p
                           jaw_period,jaw_shift,teeth_period,teeth_shift,lips_period,l
   IndicatorSetString(INDICATOR_SHORTNAME,short_name);
//--- inicializa√ß√£o normal do indicador  
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &amp;time[],
                const double &amp;open[],
                const double &amp;high[],
                const double &amp;low[],
                const double &amp;close[],
                const long &amp;tick_volume[],
                const long &amp;volume[],
                const int &amp;spread[])
  {
//--- n√∫mero de valores copiados a partir do indicador iGator
   int values_to_copy;
//--- determinar o n√∫mero de valores calculados no indicador
   int calculated=BarsCalculated(handle);
   if(calculated&lt;=0)
     {
      PrintFormat(&quot;BarsCalculated() retornando %d, c√≥digo de erro %d&quot;,calculated,GetLa
      return(0);
     }
//--- se for o princ√≠pio do c√°lculo do indicador, ou se o n√∫mero de valores √© modifica
//--- ou se √© necess√°rio c√°lculo do indicador para duas ou mais barras (isso significa
   if(prev_calculated==0 || calculated!=bars_calculated || rates_total&gt;prev_calculated
     {
      //--- se o array GatorUpBuffer √© maior do que o n√∫mero de valores no indicador i
      //--- caso contr√°rio, copiamos menor do que o tamanho dos buffers do indicador
      if(calculated&gt;rates_total) values_to_copy=rates_total;
      else                       values_to_copy=calculated;
     }
   else
     {
      //--- isso significa que n√£o √© a primeira vez do c√°lculo do indicador, √© desde a
      //--- para o c√°lculo n√£o mais do que uma barra √© adicionada</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2875
</p>
<pre><code class="language-mql5">
      values_to_copy=(rates_total-prev_calculated)+1;
     }
//--- preencher os arrays com valores do indicador Gator Oscillator
//--- se FillArraysFromBuffer retorna falso, isto significa que a informa√ß√£o ainda n√£o
   if(!FillArraysFromBuffers(GatorUpBuffer,GatorUpColors,GatorDownBuffer,GatorDownColo
      shift,handle,values_to_copy)) return(0);
//--- formar a mensagem
   string comm=StringFormat(&quot;%s ==&gt;  Valor atualizado no indicador %s: %d&quot;,
                            TimeToString(TimeCurrent(),TIME_DATE|TIME_SECONDS),
                            short_name,
                            values_to_copy);
//--- exibir a mensagem de servi√ßo no gr√°fico
   Comment(comm);
//--- memorizar o n√∫mero de valores no indicador Gator Oscillator
   bars_calculated=calculated;
//--- retorna o valor prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Preencher buffers do indicador a partir do indicador iGator      |
//+------------------------------------------------------------------+
bool FillArraysFromBuffers(double &amp;ups_buffer[],         // buffer do indicator para o
                           double &amp;up_color_buffer[],    // buffer do indicator para o
                           double &amp;downs_buffer[],       // buffer do indicator para o
                           double &amp;downs_color_buffer[], // buffer do indicator para o
                           int u_shift,                  // deslocamento para o histog
                           int ind_handle,               // manipulador do indicador i
                           int amount                    // n√∫mero de valores copiados
                           )
  {
//--- redefinir o c√≥digo de erro
   ResetLastError();
//--- preencher uma parte do array GatorUpBuffer com valores do buffer do indicador qu
   if(CopyBuffer(ind_handle,0,-u_shift,amount,ups_buffer)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iGator, c√≥digo de erro %d&quot;,GetLa
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- preencher uma parte do array GatorUpColors com valores do buffer do indicador qu
   if(CopyBuffer(ind_handle,1,-u_shift,amount,up_color_buffer)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iGator, c√≥digo de erro %d&quot;,GetLa
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2876
</p>
<pre><code class="language-mql5">
//--- preencher uma parte do array GatorDownBuffer com valores do buffer do indicador 
   if(CopyBuffer(ind_handle,2,-u_shift,amount,downs_buffer)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iGator, c√≥digo de erro %d&quot;,GetLa
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- preencher uma parte do array GatorDownColors com valores do buffer do indicador 
   if(CopyBuffer(ind_handle,3,-u_shift,amount,downs_color_buffer)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iGator, c√≥digo de erro %d&quot;,GetLa
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- est√° tudo bem
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de desinicializa√ß√£o do indicador                          |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   if(handle!=INVALID_HANDLE)
      IndicatorRelease(handle);
//--- limpar o gr√°fico ap√≥s excluir o indicador
   Comment(&quot;&quot;);
</code></pre>
<p>
  }</p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2877
iIchimoku
A fun√ß√£o retorna o manipulador do indicador Ichimoku Kinko Hyo.
</p>
<pre><code class="language-mql5">
int¬† iIchimoku(
   string¬†          symbol,¬†           // s√≠mbolo nome
   ENUM_TIMEFRAMES¬† period,¬†           // per√≠odo
   int¬†             tenkan_sen,¬†       // per√≠odo Tenkan-sen
   int¬†             kijun_sen,¬†        // per√≠odo Kijun-sen
   int¬†             senkou_span_b¬†     // per√≠odo Senkou Span B
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in] O nome do s√≠mbolo de seguran√ßa, os dados que devem ser usados para calcular o indicador. O
valor NULL significa o s√≠mbolo atual.
period
[in] O valor do per√≠odo pode ser um dos valores ENUM_TIMEFRAMES, 0 (zero) significa o prazo
corrente.
tenkan_sen
[in] Per√≠odo m√©dio para Tenkan Sen.
kijun_sen
[in] Per√≠odo m√©dio para Kijun Sen.
senkou_span_b
[in] Per√≠odo m√©dio para Senkou Span B.
<h3>Valor de retorno</h3>
Retorna o manipulador de um indicador t√©cnico especifico, em caso de falha de retorna
INVALID_HANDLE. A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √©
mais utilizado, usando a fun√ß√£o IndicatorRelease(), onde o manipulador de indicador √© transmitido.
<h3>Observa√ß√£o</h3>
Os n√∫meros de buffer: 0 - TENKANSEN_LINE, 1 - KIJUNSEN_LINE, 2 - SENKOUSPANA_LINE, 3 -
SENKOUSPANB_LINE, 4 - CHIKOUSPAN_LINE.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                               Demo_iIchimoku.mq5 |
//|                        Copyright 2011, MetaQuotes Software Corp. |
//|                                            ;https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;
#property description &quot;O indicador demonstra como obter dados&quot;</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2878
</p>
<pre><code class="language-mql5">
#property description &quot;de buffers do indicador para o indicador t√©cnico iIchimoku.&quot;
#property description &quot;Um s√≠mbolo e o prazo utilizado para o c√°lculo do indicador,&quot;
#property description &quot;s√£o definidos pelos par√¢metros de s√≠mbolo e per√≠odo.&quot;
#property description &quot;O m√©todo de cria√ß√£o do manipulador √© definido atrav√©s do par√¢me
#property description &quot;Todos os outros par√¢metros, assim como no padr√£o Ichimoku Kinko
#property indicator_chart_window
#property indicator_buffers 5
#property indicator_plots   4
//--- plotar Tenkan_sen
#property indicator_label1  &quot;Tenkan_sen&quot;
#property indicator_type1   DRAW_LINE
#property indicator_color1  clrRed
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1
//--- plotar Kijun_sen
#property indicator_label2  &quot;Kijun_sen&quot;
#property indicator_type2   DRAW_LINE
#property indicator_color2  clrBlue
#property indicator_style2  STYLE_SOLID
#property indicator_width2  1
//--- plotar Senkou_Span
#property indicator_label3  &quot;Senkou Span A;Senkou Span B&quot; // two fields will be shown 
#property indicator_type3   DRAW_FILLING
#property indicator_color3  clrSandyBrown, clrThistle
#property indicator_style3  STYLE_SOLID
#property indicator_width3  1
//--- plotar Chikou_Span
#property indicator_label4  &quot;Chikou_Span&quot;
#property indicator_type4   DRAW_LINE
#property indicator_color4  clrLime
#property indicator_style4  STYLE_SOLID
#property indicator_width4  1
//+------------------------------------------------------------------+
//| Enumerador dos m√©todos de cria√ß√£o do manipulador¬†                |
//+------------------------------------------------------------------+
enum Creation
  {
   Call_iIchimoku,         // usar iIchimoku
   Call_IndicatorCreate    // usar IndicatorCreate
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//--- par√¢metros de entrada
input Creation             type=Call_iIchimoku;       // tipo de fun√ß√£o
input int                  tenkan_sen=9;              // per√≠odo Tenkan-sen
input int                  kijun_sen=26;              // per√≠odo Kijun-sen
input int                  senkou_span_b=52;          // per√≠odo Senkou Span B
input string               symbol=&quot; &quot;;                // s√≠mbolo
input ENUM_TIMEFRAMES      period=PERIOD_CURRENT;     // timeframe
//--- buffer do indicador</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2879
</p>
<pre><code class="language-mql5">
double         Tenkan_sen_Buffer[];
double         Kijun_sen_Buffer[];
double         Senkou_Span_A_Buffer[];
double         Senkou_Span_B_Buffer[];
double         Chinkou_Span_Buffer[];
//--- vari√°vel para armazenar o manipulador do indicator iIchimoku
int    handle;
//--- vari√°vel para armazenamento
string name=symbol;
//--- nome do indicador num gr√°fico
string short_name;
//--- manteremos o n√∫mero de valores no indicador Ichimoku Kinko Hyo
int    bars_calculated=0;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- atribui√ß√£o de arrays para buffers do indicador
   SetIndexBuffer(0,Tenkan_sen_Buffer,INDICATOR_DATA);
   SetIndexBuffer(1,Kijun_sen_Buffer,INDICATOR_DATA);
   SetIndexBuffer(2,Senkou_Span_A_Buffer,INDICATOR_DATA);
   SetIndexBuffer(3,Senkou_Span_B_Buffer,INDICATOR_DATA);
   SetIndexBuffer(4,Chinkou_Span_Buffer,INDICATOR_DATA);
//--- definir o deslocamento para o canal Senkou Span das barras kijun_sen na futura d
   PlotIndexSetInteger(2,PLOT_SHIFT,kijun_sen);
//--- n√£o √© necess√°rio definir um deslocamento para a linha Span Chinkou, uma vez que 
//--- j√° est√£o armazenados com um deslocamento na iIchimoku
//--- determinar o s√≠mbolo do indicador, √© desenhado para
   name=symbol;
//--- excluir os espa√ßos √† direita e √† esquerda
   StringTrimRight(name);
   StringTrimLeft(name);
//--- se resulta em comprimento zero da string do &#x27;name&#x27;
   if(StringLen(name)==0)
     {
      //--- tomar o s√≠mbolo do gr√°fico, o indicador est√° anexado para
      name=_Symbol;
     }
//--- criar manipulador do indicador
   if(type==Call_iIchimoku)
      handle=iIchimoku(name,period,tenkan_sen,kijun_sen,senkou_span_b);
   else
     {
      //--- preencher a estrutura com os par√¢metros do indicador
      MqlParam pars[3];
      //--- per√≠odos e deslocamentos da linhas do Alligator 
      pars[0].type=TYPE_INT;
      pars[0].integer_value=tenkan_sen;</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2880
</p>
<pre><code class="language-mql5">
      pars[1].type=TYPE_INT;
      pars[1].integer_value=kijun_sen;
      pars[2].type=TYPE_INT;
      pars[2].integer_value=senkou_span_b;
      //--- criando o manipulador
      handle=IndicatorCreate(name,period,IND_ICHIMOKU,3,pars);
     }
//--- se o manipulador n√£o √© criado
   if(handle==INVALID_HANDLE)
     {
      //--- mensagem sobre a falha e a sa√≠da do c√≥digo de erro
      PrintFormat(&quot;Falha ao criar o manipulador do indicador iIchimoku para o s√≠mbolo 
                  name,
                  EnumToString(period),
                  GetLastError());
      //--- o indicador √© interrompido precocemente
      return(INIT_FAILED);
     }
//--- mostra que o s√≠mbolo/prazo do indicador Ichimoku Kinko Hyo √© calculado para
   short_name=StringFormat(&quot;iIchimoku(%s/%s, %d, %d ,%d)&quot;,name,EnumToString(period),
                           tenkan_sen,kijun_sen,senkou_span_b);
   IndicatorSetString(INDICATOR_SHORTNAME,short_name);
//--- inicializa√ß√£o normal do indicador    
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &amp;time[],
                const double &amp;open[],
                const double &amp;high[],
                const double &amp;low[],
                const double &amp;close[],
                const long &amp;tick_volume[],
                const long &amp;volume[],
                const int &amp;spread[])
  {
//--- n√∫mero de valores copiados a partir do indicador iIchimoku
   int values_to_copy;
//--- determinar o n√∫mero de valores calculados no indicador
   int calculated=BarsCalculated(handle);
   if(calculated&lt;=0)
     {
      PrintFormat(&quot;BarsCalculated() retornando %d, c√≥digo de erro %d&quot;,calculated,GetLa
      return(0);
     }
//--- se for o princ√≠pio do c√°lculo do indicador, ou se o n√∫mero de valores √© modifica</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2881
</p>
<pre><code class="language-mql5">
//--- ou se √© necess√°rio c√°lculo do indicador para duas ou mais barras (isso significa
   if(prev_calculated==0 || calculated!=bars_calculated || rates_total&gt;prev_calculated
     {
      //--- se o array Tenkan_sen_Buffer √© maior do que o n√∫mero de valores no indicad
      //--- caso contr√°rio, copiamos menor do que o tamanho dos buffers do indicador
      if(calculated&gt;rates_total) values_to_copy=rates_total;
      else                       values_to_copy=calculated;
     }
   else
     {
      //--- isso significa que n√£o √© a primeira vez do c√°lculo do indicador, √© desde a
      //--- para o c√°lculo n√£o mais do que uma barra √© adicionada
      values_to_copy=(rates_total-prev_calculated)+1;
     }
//--- preencher os arrays com valores do indicador Ichimoku Kinko Hyo
//--- se FillArraysFromBuffer retorna falso, isto significa que a informa√ß√£o ainda n√£o
   if(!FillArraysFromBuffers(Tenkan_sen_Buffer,Kijun_sen_Buffer,Senkou_Span_A_Buffer,S
      kijun_sen,handle,values_to_copy)) return(0);
//--- formar a mensagem
   string comm=StringFormat(&quot;%s ==&gt;  Valor atualizado no indicador %s: %d&quot;,
                            TimeToString(TimeCurrent(),TIME_DATE|TIME_SECONDS),
                            short_name,
                            values_to_copy);
//--- exibir a mensagem de servi√ßo no gr√°fico
   Comment(comm);
//--- memorizar o n√∫mero de valores no indicador Ichimoku Kinko Hyo
   bars_calculated=calculated;
//--- retorna o valor prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Preencher buffers do indicador a partir do indicador iIchimoku   |
//+------------------------------------------------------------------+
bool FillArraysFromBuffers(double &amp;tenkan_sen_buffer[],     // buffer do indicador da 
                           double &amp;kijun_sen_buffer[],      // buffer do indicator da 
                           double &amp;senkou_span_A_buffer[],  // buffer do indicator da 
                           double &amp;senkou_span_B_buffer[],  // buffer do indicator da 
                           double &amp;chinkou_span_buffer[],   // buffer do indicator da 
                           int senkou_span_shift,           // deslocamento das linhas
                           int ind_handle,                  // manipulador do iIchimok
                           int amount                       // n√∫mero de valores copia
                           )
  {
//--- redefinir o c√≥digo de erro
   ResetLastError();
//--- preencher uma parte do array Tenkan_sen_Buffer com valores do buffer do indicado
   if(CopyBuffer(ind_handle,0,0,amount,tenkan_sen_buffer)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2882
</p>
<pre><code class="language-mql5">
      PrintFormat(&quot;1.Falha ao copiar dados do indicador iIchimoku, c√≥digo de erro %d&quot;,
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- preencher uma parte do array Kijun_sen_Buffer com valores do buffer do indicador
   if(CopyBuffer(ind_handle,1,0,amount,kijun_sen_buffer)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;2.Falha ao copiar dados do indicador iIchimoku, c√≥digo de erro %d&quot;,
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- preencher uma parte do array Chinkou_Span_Buffer com valores do buffer do indica
//--- se senkou_span_shift&gt;0, a linha √© deslocada na dire√ß√£o futura pelas barras senko
   if(CopyBuffer(ind_handle,2,-senkou_span_shift,amount,senkou_span_A_buffer)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;3.Falha ao copiar dados do indicador iIchimoku, c√≥digo de erro %d&quot;,
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- preencher uma parte do array com valores do buffer do indicador que tem √≠ndice 3
//--- se senkou_span_shift&gt;0, a linha √© deslocada na dire√ß√£o futura pelas barras senko
   if(CopyBuffer(ind_handle,3,-senkou_span_shift,amount,senkou_span_B_buffer)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;4.Falha ao copiar dados do indicador iIchimoku, c√≥digo de erro %d&quot;,
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- preencher uma parte do array Senkou_Span_B_Buffer com valores do buffer do indic
//--- ao copiar Chinkou Span, n√£o precisamos considerar a mudan√ßa, uma vez que os dado
//--- j√° est√£o armazenados com um deslocamento na iIchimoku  
   if(CopyBuffer(ind_handle,4,0,amount,chinkou_span_buffer)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;5.Falha ao copiar dados do indicador iIchimoku, c√≥digo de erro %d&quot;,
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- est√° tudo bem
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de desinicializa√ß√£o do indicador                          |</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2883
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   if(handle!=INVALID_HANDLE)
      IndicatorRelease(handle);
//--- limpar o gr√°fico ap√≥s excluir o indicador
   Comment(&quot;&quot;);
</code></pre>
<p>
  }</p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2884
iBWMFI
A fun√ß√£o retorna o manipulador do indicador Market Facilitation Index. Tem apenas um buffer.
</p>
<pre><code class="language-mql5">
int¬† iBWMFI(
   string¬†              symbol,¬†            // s√≠mbolo nome
   ENUM_TIMEFRAMES¬†     period,¬†            // per√≠odo
   ENUM_APPLIED_VOLUME¬† applied_volume¬†     // tipo de volume para o c√°lculo
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in] O nome do s√≠mbolo de seguran√ßa, os dados que devem ser usados para calcular o indicador. O
valor NULL significa o s√≠mbolo atual.
period
[in] O valor do per√≠odo pode ser um dos valores ENUM_TIMEFRAMES, 0 (zero) significa o prazo
corrente.
applied_volume
[in]  O volume usado. Pode ser uma das constantes do ENUM_APPLIED_VOLUME.
<h3>Valor de retorno</h3>
Retorna o manipulador de um indicador t√©cnico especifico, em caso de falha de retorna
INVALID_HANDLE. A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √©
mais utilizado, usando a fun√ß√£o IndicatorRelease(), onde o manipulador de indicador √© transmitido.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                                  Demo_iBWMFI.mq5 |
//|                        Copyright 2011, MetaQuotes Software Corp. |
//|                                            ;https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;
#property description &quot;O indicador demonstra como obter dados&quot;
#property description &quot;de buffers do indicador para o indicador t√©cnico iBWMFI.&quot;
#property description &quot;Um s√≠mbolo e o prazo utilizado para o c√°lculo do indicador,&quot;
#property description &quot;s√£o definidos pelos par√¢metros de s√≠mbolo e per√≠odo.&quot;
#property description &quot;O m√©todo de cria√ß√£o do manipulador √© definido atrav√©s do par√¢me
#property indicator_separate_window
#property indicator_buffers 2
#property indicator_plots   1
//--- plotar iBWMFI
#property indicator_label1  &quot;iBWMFI&quot;
#property indicator_type1   DRAW_COLOR_HISTOGRAM
#property indicator_color1  clrLime,clrSaddleBrown,clrBlue,clrPink</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2885
</p>
<pre><code class="language-mql5">
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1
//+------------------------------------------------------------------+
//| Enumerador dos m√©todos de cria√ß√£o do manipulador¬†                |
//+------------------------------------------------------------------+
enum Creation
  {
   Call_iBWMFI,            // usar iBWMFI
   Call_IndicatorCreate    // usar IndicatorCreate
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//--- par√¢metros de entrada
input Creation             type=Call_iBWMFI;          // tipo de fun√ß√£o
input ENUM_APPLIED_VOLUME  applied_volume=VOLUME_TICK;// tipo de volume
input string               symbol=&quot; &quot;;                // s√≠mbolo
input ENUM_TIMEFRAMES      period=PERIOD_CURRENT;     // timeframe
//--- buffer do indicador
double         iBWMFIBuffer[];
double         iBWMFIColors[];
//--- vari√°vel para armazenar o manipulador do indicator iBWMFI
int    handle;
//--- vari√°vel para armazenamento
string name=symbol;
//--- nome do indicador num gr√°fico
string short_name;
//--- vari√°vel para armazenar o manipulador do indicador Market Facilitation Index por
int    bars_calculated=0;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- atribui√ß√£o de arrays para buffers do indicador
   SetIndexBuffer(0,iBWMFIBuffer,INDICATOR_DATA);
   SetIndexBuffer(1,iBWMFIColors,INDICATOR_COLOR_INDEX);
//--- determinar o s√≠mbolo do indicador, √© desenhado para
   name=symbol;
//--- excluir os espa√ßos √† direita e √† esquerda
   StringTrimRight(name);
   StringTrimLeft(name);
//--- se resulta em comprimento zero da string do &#x27;name&#x27;
   if(StringLen(name)==0)
     {
      //--- tomar o s√≠mbolo do gr√°fico, o indicador est√° anexado para
      name=_Symbol;
     }
//--- criar manipulador do indicador
   if(type==Call_iBWMFI)
      handle=iBWMFI(name,period,applied_volume);
   else</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2886
</p>
<pre><code class="language-mql5">
     {
      //--- preencher a estrutura com os par√¢metros do indicador
      MqlParam pars[1];
      //--- tipo de volume
      pars[0].type=TYPE_INT;
      pars[0].integer_value=applied_volume;
      handle=IndicatorCreate(name,period,IND_BWMFI,1,pars);
     }
//--- se o manipulador n√£o √© criado
   if(handle==INVALID_HANDLE)
     {
      //--- mensagem sobre a falha e a sa√≠da do c√≥digo de erro
      PrintFormat(&quot;Falha ao criar o manipulador do indicador iBWMFI para o s√≠mbolo %s/
                  name,
                  EnumToString(period),
                  GetLastError());
      //--- o indicador √© interrompido precocemente
      return(INIT_FAILED);
     }
//--- mostrar que o s√≠mbolo/per√≠odo do indicador Market Facilitation Index por Bill Wi
   short_name=StringFormat(&quot;iBWMFI(%s/%s, %s)&quot;,name,EnumToString(period),
                           EnumToString(applied_volume));
   IndicatorSetString(INDICATOR_SHORTNAME,short_name);
//--- inicializa√ß√£o normal do indicador  
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &amp;time[],
                const double &amp;open[],
                const double &amp;high[],
                const double &amp;low[],
                const double &amp;close[],
                const long &amp;tick_volume[],
                const long &amp;volume[],
                const int &amp;spread[])
  {
//--- n√∫mero de valores copiado do indicador iBWMFI
   int values_to_copy;
//--- determinar o n√∫mero de valores calculados no indicador
   int calculated=BarsCalculated(handle);
   if(calculated&lt;=0)
     {
      PrintFormat(&quot;BarsCalculated() retornando %d, c√≥digo de erro %d&quot;,calculated,GetLa
      return(0);
     }</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2887
</p>
<pre><code class="language-mql5">
//--- se for o princ√≠pio do c√°lculo do indicador, ou se o n√∫mero de valores √© modifica
//--- ou se √© necess√°rio c√°lculo do indicador para duas ou mais barras (isso significa
   if(prev_calculated==0 || calculated!=bars_calculated || rates_total&gt;prev_calculated
     {
      //--- se o array iBWMFIBuffer √© maior do que o n√∫mero de valores no indicador iB
      //--- caso contr√°rio, copiamos menor do que o tamanho dos buffers do indicador
      if(calculated&gt;rates_total) values_to_copy=rates_total;
      else                       values_to_copy=calculated;
     }
   else
     {
      //--- isso significa que n√£o √© a primeira vez do c√°lculo do indicador, √© desde a
      //--- para o c√°lculo n√£o mais do que uma barra √© adicionada
      values_to_copy=(rates_total-prev_calculated)+1;
     }
//--- preencher os arrays com os valores do indicador Market Facilitation Index por Bi
//--- se FillArraysFromBuffer retorna falso, isto significa que a informa√ß√£o ainda n√£o
   if(!FillArraysFromBuffers(iBWMFIBuffer,iBWMFIColors,handle,values_to_copy)) return
//--- formar a mensagem
   string comm=StringFormat(&quot;%s ==&gt;  Valor atualizado no indicador %s: %d&quot;,
                            TimeToString(TimeCurrent(),TIME_DATE|TIME_SECONDS),
                            short_name,
                            values_to_copy);
//--- exibir a mensagem de servi√ßo no gr√°fico
   Comment(comm);
//--- memorizar o n√∫mero de valores no indicador Market Facilitation Index por Bill Wi
   bars_calculated=calculated;
//--- retorna o valor prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Preencher buffers do indicador a partir do indicador iBWMFI      |
//+------------------------------------------------------------------+
bool FillArraysFromBuffers(double &amp;values[],    // buffer do indicator para os valores
                           double &amp;colors[],    // buffer do indicator para cores do h
                           int ind_handle,      // manipulado do indicador iBWMFI
                           int amount           // n√∫mero de valores copiado
                           )
  {
//--- redefinir o c√≥digo de erro
   ResetLastError();
//--- preencher uma parte do array iBWMFIBuffer com valores do indicador buffer do ind
   if(CopyBuffer(ind_handle,0,0,amount,values)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iBWMFI, c√≥digo de erro %d&quot;,GetLa
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2888
</p>
<pre><code class="language-mql5">
//--- preencher uma parte do array iBWMFIColors com valores do buffer do indicador que
   if(CopyBuffer(ind_handle,1,0,amount,colors)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iBWMFI, c√≥digo de erro %d&quot;,GetLa
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- est√° tudo bem
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de desinicializa√ß√£o do indicador                          |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   if(handle!=INVALID_HANDLE)
      IndicatorRelease(handle);
//--- limpar o gr√°fico ap√≥s excluir o indicador
   Comment(&quot;&quot;);
</code></pre>
<p>
  }</p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2889
iMomentum
A fun√ß√£o retorna o manipulador do indicador Momentum. Tem apenas um buffer.
</p>
<pre><code class="language-mql5">
int¬† iMomentum(
   string¬†              symbol,¬†           // s√≠mbolo nome
   ENUM_TIMEFRAMES¬†     period,¬†           // per√≠odo
   int¬†                 mom_period,        // per√≠odo m√©dio
   ENUM_APPLIED_PRICE ¬† applied_price¬†     // tipo de pre√ßo ou de manipulador
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in] O nome do s√≠mbolo de seguran√ßa, os dados que devem ser usados para calcular o indicador. O
valor NULL significa o s√≠mbolo atual.
period
[in] O valor do per√≠odo pode ser um dos valores ENUM_TIMEFRAMES, 0 (zero) significa o prazo
corrente.
mom_period
[in]  Per√≠odo m√©dio(barras contadas) para o c√°lculo de modifica√ß√£o do pre√ßo.
applied_price
[in]  O pre√ßo usado. Pode ser qualquer das constantes de pre√ßos ENUM_APPLIED_PRICE ou um
manipulador de outro indicador.
<h3>Valor de retorno</h3>
Retorna o manipulador de um indicador t√©cnico especifico, em caso de falha de retorna
INVALID_HANDLE. A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √©
mais utilizado, usando a fun√ß√£o IndicatorRelease(), onde o manipulador de indicador √© transmitido.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                               Demo_iMomentum.mq5 |
//|                        Copyright 2011, MetaQuotes Software Corp. |
//|                                            ;https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;
#property description &quot;O indicador demonstra como obter dados&quot;
#property description &quot;de buffers do indicador para o indicador t√©cnico iMomentum.&quot;
#property description &quot;Um s√≠mbolo e o prazo utilizado para o c√°lculo do indicador,&quot;
#property description &quot;s√£o definidos pelos par√¢metros de s√≠mbolo e per√≠odo.&quot;
#property description &quot;O m√©todo de cria√ß√£o do manipulador √© definido atrav√©s do par√¢me
#property description &quot;Todos os outros par√¢metros s√£o similares ao padr√£o Momentum.&quot;
#property indicator_separate_window</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2890
</p>
<pre><code class="language-mql5">
#property indicator_buffers 1
#property indicator_plots   1
//--- plotar iMomentum
#property indicator_label1  &quot;iMomentum&quot;
#property indicator_type1   DRAW_LINE
#property indicator_color1  clrDodgerBlue
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1
//+------------------------------------------------------------------+
//| Enumerador dos m√©todos de cria√ß√£o do manipulador¬†                |
//+------------------------------------------------------------------+
enum Creation
  {
   Call_iMomentum,         // usar iMomentum
   Call_IndicatorCreate    // usar IndicatorCreate
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//--- par√¢metros de entrada
input Creation             type=Call_iMomentum;       // tipo de fun√ß√£o
input int                  mom_period=14;             // per√≠odo do indicador Momentum
input ENUM_APPLIED_PRICE   applied_price=PRICE_CLOSE; // tipo de pre√ßo
input string               symbol=&quot; &quot;;                // s√≠mbolo
input ENUM_TIMEFRAMES      period=PERIOD_CURRENT;     // timeframe
//--- buffer do indicador
double         iMomentumBuffer[];
//--- vari√°vel para armazenar o manipulador do indicator iMomentum
int    handle;
//--- vari√°vel para armazenamento
string name=symbol;
//--- nome do indicador num gr√°fico
string short_name;
//--- manteremos o n√∫mero de valores no indicador Momentum
int    bars_calculated=0;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- atribui√ß√£o de array para buffer do indicador
   SetIndexBuffer(0,iMomentumBuffer,INDICATOR_DATA);
//--- determinar o s√≠mbolo do indicador, √© desenhado para
   name=symbol;
//--- excluir os espa√ßos √† direita e √† esquerda
   StringTrimRight(name);
   StringTrimLeft(name);
//--- se resulta em comprimento zero da string do &#x27;name&#x27;
   if(StringLen(name)==0)
     {
      //--- tomar o s√≠mbolo do gr√°fico, o indicador est√° anexado para
      name=_Symbol;</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2891
</p>
<pre><code class="language-mql5">
     }
//--- criar manipulador do indicador
   if(type==Call_iMomentum)
      handle=iMomentum(name,period,mom_period,applied_price);
   else
     {
      //--- preencher a estrutura com os par√¢metros do indicador
      MqlParam pars[2];
      //--- per√≠odo
      pars[0].type=TYPE_INT;
      pars[0].integer_value=mom_period;
      //--- tipo de pre√ßo
      pars[1].type=TYPE_INT;
      pars[1].integer_value=applied_price;
      handle=IndicatorCreate(name,period,IND_MOMENTUM,2,pars);
     }
//--- se o manipulador n√£o √© criado
   if(handle==INVALID_HANDLE)
     {
      //--- mensagem sobre a falha e a sa√≠da do c√≥digo de erro
      PrintFormat(&quot;Falha ao criar o manipulador do indicador iMomentum para o s√≠mbolo 
                  name,
                  EnumToString(period),
                  GetLastError());
      //--- o indicador √© interrompido precocemente
      return(INIT_FAILED);
     }
//--- mostra que o s√≠mbolo/prazo do indicador Momentum √© calculado para
   short_name=StringFormat(&quot;iMomentum(%s/%s, %d, %s)&quot;,name,EnumToString(period),
                           mom_period, EnumToString(applied_price));
   IndicatorSetString(INDICATOR_SHORTNAME,short_name);
//--- inicializa√ß√£o normal do indicador  
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &amp;time[],
                const double &amp;open[],
                const double &amp;high[],
                const double &amp;low[],
                const double &amp;close[],
                const long &amp;tick_volume[],
                const long &amp;volume[],
                const int &amp;spread[])
  {
//--- n√∫mero de valores copiados a partir do indicador iMomentum</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2892
</p>
<pre><code class="language-mql5">
   int values_to_copy;
//--- determinar o n√∫mero de valores calculados no indicador
   int calculated=BarsCalculated(handle);
   if(calculated&lt;=0)
     {
      PrintFormat(&quot;BarsCalculated() retornando %d, c√≥digo de erro %d&quot;,calculated,GetLa
      return(0);
     }
//--- se for o princ√≠pio do c√°lculo do indicador, ou se o n√∫mero de valores √© modifica
//--- ou se √© necess√°rio c√°lculo do indicador para duas ou mais barras (isso significa
   if(prev_calculated==0 || calculated!=bars_calculated || rates_total&gt;prev_calculated
     {
      //--- se o array iMomentumBuffer √© maior do que o n√∫mero de valores no indicador
      //--- caso contr√°rio, copiamos menor do que o tamanho dos buffers do indicador
      if(calculated&gt;rates_total) values_to_copy=rates_total;
      else                       values_to_copy=calculated;
     }
   else
     {
      //--- isso significa que n√£o √© a primeira vez do c√°lculo do indicador, √© desde a
      //--- para o c√°lculo n√£o mais do que uma barra √© adicionada
      values_to_copy=(rates_total-prev_calculated)+1;
     }
//--- preencher o array iMomentumBuffer com valores do indicador Momentum
//--- se FillArrayFromBuffer retorna falso, significa que a informa√ß√£o n√£o est√° pronta
   if(!FillArrayFromBuffer(iMomentumBuffer,handle,values_to_copy)) return(0);
//--- formar a mensagem
   string comm=StringFormat(&quot;%s ==&gt;  Valor atualizado no indicador %s: %d&quot;,
                            TimeToString(TimeCurrent(),TIME_DATE|TIME_SECONDS),
                            short_name,
                            values_to_copy);
//--- exibir a mensagem de servi√ßo no gr√°fico
   Comment(comm);
//--- memorizar o n√∫mero de valores no indicador Momentum
   bars_calculated=calculated;
//--- retorna o valor prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Preencher buffers do indicador a partir do indicador iMomentum   |
//+------------------------------------------------------------------+
bool FillArrayFromBuffer(double &amp;values[],  // buffer do indicator para valores do Mom
                         int ind_handle,    // manipulador do indicador iMomentum
                         int amount         // n√∫mero de valores copiados
                         )
  {
//--- redefinir o c√≥digo de erro
   ResetLastError();
//--- preencher uma parte do array iMomentumBuffer com valores do buffer do indicador </p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2893
</p>
<pre><code class="language-mql5">
   if(CopyBuffer(ind_handle,0,0,amount,values)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iMomentum, c√≥digo de erro %d&quot;,Ge
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- est√° tudo bem
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de desinicializa√ß√£o do indicador                          |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   if(handle!=INVALID_HANDLE)
      IndicatorRelease(handle);
//--- limpar o gr√°fico ap√≥s excluir o indicador
   Comment(&quot;&quot;);
</code></pre>
<p>
  }  </p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2894
iMFI
A fun√ß√£o retorna o manipulador do indicador Money Flow Index.
</p>
<pre><code class="language-mql5">
int¬† iMFI(
   string¬†              symbol,¬†            // s√≠mbolo nome
   ENUM_TIMEFRAMES¬†     period,¬†            // per√≠odo
   int¬†                 ma_period,¬†         // per√≠odo m√©dio
   ENUM_APPLIED_VOLUME¬† applied_volume¬†     // tipo de volume para o c√°lculo
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in] O nome do s√≠mbolo de seguran√ßa, os dados que devem ser usados para calcular o indicador. O
valor NULL significa o s√≠mbolo atual.
period
[in] O valor do per√≠odo pode ser um dos valores ENUM_TIMEFRAMES, 0 (zero) significa o prazo
corrente.
ma_period
[in] Per√≠odo m√©dio (barras contadas) para c√°lculo.
applied_volume
[in]  O volume usado. Pode ser um dos valores ENUM_APPLIED_VOLUME.
<h3>Valor de retorno</h3>
Retorna o manipulador de um indicador t√©cnico especifico, em caso de falha de retorna
INVALID_HANDLE. A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √©
mais utilizado, usando a fun√ß√£o IndicatorRelease(), onde o manipulador de indicador √© transmitido.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                                    Demo_iMFI.mq5 |
//|                        Copyright 2011, MetaQuotes Software Corp. |
//|                                            ;https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;
#property description &quot;O indicador demonstra como obter dados&quot;
#property description &quot;de buffers do indicador para o indicador t√©cnico iMFI.&quot;
#property description &quot;Um s√≠mbolo e o prazo utilizado para o c√°lculo do indicador,&quot;
#property description &quot;s√£o definidos pelos par√¢metros de s√≠mbolo e per√≠odo.&quot;
#property description &quot;O m√©todo de cria√ß√£o do manipulador √© definido atrav√©s do par√¢me
#property description &quot;Todos os outros par√¢metros s√£o similares ao padr√£o Money Flow I
#property indicator_separate_window
#property indicator_buffers 1</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2895
</p>
<pre><code class="language-mql5">
#property indicator_plots   1
//--- plotar iMFI
#property indicator_label1  &quot;iMFI&quot;
#property indicator_type1   DRAW_LINE
#property indicator_color1  clrDodgerBlue
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1
//--- n√≠veis horizontais na janela de indicador
#property indicator_level1  20
#property indicator_level2  80
//+------------------------------------------------------------------+
//| Enumerador dos m√©todos de cria√ß√£o do manipulador¬†                |
//+------------------------------------------------------------------+
enum Creation
  {
   Call_iMFI,              // usar iMFI
   Call_IndicatorCreate    // usar IndicatorCreate
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//--- par√¢metros de entrada
input Creation             type=Call_iMFI;               // tipo de fun√ß√£o
input int                  ma_period=14;                 // per√≠odo
input ENUM_APPLIED_VOLUME  applied_volume=VOLUME_TICK;   // tipo de volume
input string               symbol=&quot; &quot;;                   // s√≠mbolo
input ENUM_TIMEFRAMES      period=PERIOD_CURRENT;        // timeframe
//--- buffer do indicador
double         iMFIBuffer[];
//--- vari√°vel para armazenar o manipulador do indicator iMFI
int    handle;
//--- vari√°vel para armazenamento
string name=symbol;
//--- nome do indicador num gr√°fico
string short_name;
//--- manteremos o n√∫mero de valores no indicador Money Flow Index
int    bars_calculated=0;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- atribui√ß√£o de array para buffer do indicador
   SetIndexBuffer(0,iMFIBuffer,INDICATOR_DATA);
//--- determinar o s√≠mbolo do indicador, √© desenhado para  
   name=symbol;
//--- excluir os espa√ßos √† direita e √† esquerda
   StringTrimRight(name);
   StringTrimLeft(name);
//--- se resulta em comprimento zero da string do &#x27;name&#x27;
   if(StringLen(name)==0)
     {</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2896
</p>
<pre><code class="language-mql5">
      //--- tomar o s√≠mbolo do gr√°fico, o indicador est√° anexado para
      name=_Symbol;
     }
//--- criar manipulador do indicador
   if(type==Call_iMFI)
      handle=iMFI(name,period,ma_period,applied_volume);
   else
     {
      //--- preencher a estrutura com os par√¢metros do indicador
      MqlParam pars[2];
      //--- per√≠odo
      pars[0].type=TYPE_INT;
      pars[0].integer_value=ma_period;
      //--- tipo de volume
      pars[1].type=TYPE_INT;
      pars[1].integer_value=applied_volume;
      handle=IndicatorCreate(name,period,IND_MFI,2,pars);
     }
//--- se o manipulador n√£o √© criado
   if(handle==INVALID_HANDLE)
     {
      //--- mensagem sobre a falha e a sa√≠da do c√≥digo de erro
      PrintFormat(&quot;Falha ao criar o manipulador do indicador para o s√≠mbolo %s/%s, c√≥d
                  name,
                  EnumToString(period),
                  GetLastError());
      //--- o indicador √© interrompido precocemente
      return(INIT_FAILED);
     }
//--- mostra que o s√≠mbolo/prazo do indicador Money Flow Index √© calculado para
   short_name=StringFormat(&quot;iMFI(%s/%s, %d, %s)&quot;,name,EnumToString(period),
                           ma_period, EnumToString(applied_volume));
   IndicatorSetString(INDICATOR_SHORTNAME,short_name);
//--- inicializa√ß√£o normal do indicador
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &amp;time[],
                const double &amp;open[],
                const double &amp;high[],
                const double &amp;low[],
                const double &amp;close[],
                const long &amp;tick_volume[],
                const long &amp;volume[],
                const int &amp;spread[])</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2897
</p>
<pre><code class="language-mql5">
  {
//--- n√∫mero de valores copiados a partir do indicador iMFI
   int values_to_copy;
//--- determinar o n√∫mero de valores calculados no indicador
   int calculated=BarsCalculated(handle);
   if(calculated&lt;=0)
     {
      PrintFormat(&quot;BarsCalculated() retornando %d, c√≥digo de erro %d&quot;,calculated,GetLa
      return(0);
     }
//--- se for o princ√≠pio do c√°lculo do indicador, ou se o n√∫mero de valores √© modifica
//--- ou se √© necess√°rio c√°lculo do indicador para duas ou mais barras (isso significa
   if(prev_calculated==0 || calculated!=bars_calculated || rates_total&gt;prev_calculated
     {
      //--- se o array iMFIBuffer √© maior do que o n√∫mero de valores no indicador iMFI
      //--- caso contr√°rio, copiamos menor do que o tamanho dos buffers do indicador
      if(calculated&gt;rates_total) values_to_copy=rates_total;
      else                       values_to_copy=calculated;
     }
   else
     {
      //--- isso significa que n√£o √© a primeira vez do c√°lculo do indicador, √© desde a
      //--- para o c√°lculo n√£o mais do que uma barra √© adicionada
      values_to_copy=(rates_total-prev_calculated)+1;
     }
//--- preencher o array iMFIBuffer com valores do indicador Money Flow Index
//--- se FillArrayFromBuffer retorna falso, significa que a informa√ß√£o n√£o est√° pronta
   if(!FillArrayFromBuffer(iMFIBuffer,handle,values_to_copy)) return(0);
//--- formar a mensagem
   string comm=StringFormat(&quot;%s ==&gt;  Valor atualizado no indicador %s: %d&quot;,
                            TimeToString(TimeCurrent(),TIME_DATE|TIME_SECONDS),
                            short_name,
                            values_to_copy);
//--- exibir a mensagem de servi√ßo no gr√°fico
   Comment(comm);
//--- memorizar o n√∫mero de valores no indicador Flow Index
   bars_calculated=calculated;
//--- retorna o valor prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Preencher buffers do indicador a partir do indicador iMFI        |
//+------------------------------------------------------------------+
bool FillArrayFromBuffer(double &amp;values[],  // buffer do indicator para valores do Mon
                         int ind_handle,    // manipulador do indicador iMFI
                         int amount         // n√∫mero de valores copiados
                         )
  {
//--- redefinir o c√≥digo de erro</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2898
</p>
<pre><code class="language-mql5">
   ResetLastError();
//--- preencher uma parte do array iMFIBuffer com valores do buffer do indicador que t
   if(CopyBuffer(ind_handle,0,0,amount,values)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iMFI, c√≥digo de erro %d&quot;,GetLast
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- est√° tudo bem
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de desinicializa√ß√£o do indicador                          |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   if(handle!=INVALID_HANDLE)
      IndicatorRelease(handle);
//--- limpar o gr√°fico ap√≥s excluir o indicador
   Comment(&quot;&quot;);
</code></pre>
<p>
  }   </p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2899
iMA
A fun√ß√£o retorna o manipulador do indicador Moving Average. Tem apenas um buffer.
</p>
<pre><code class="language-mql5">
int¬† iMA(
   string¬†              symbol,¬†           // s√≠mbolo nome
   ENUM_TIMEFRAMES¬†     period,¬†           // per√≠odo
   int¬†                 ma_period,¬†        // per√≠odo m√©dio
   int¬†                 ma_shift,¬†         // deslocamento horizontal
   ENUM_MA_METHOD¬†      ma_method,¬†        // tipo suavizado
   ENUM_APPLIED_PRICE ¬† applied_price¬†     // tipo de pre√ßo ou de manipulador
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in] O nome do s√≠mbolo de seguran√ßa, os dados que devem ser usados para calcular o indicador. O
valor NULL significa o s√≠mbolo atual.
period
[in] O valor do per√≠odo pode ser um dos valores ENUM_TIMEFRAMES, 0 (zero) significa o prazo
corrente.
ma_period
[in] Per√≠odo m√©dio para c√°lculo da m√©dia m√≥vel.
ma_shift
[in]  Deslocamento do indicador relativo ao gr√°fico de pre√ßos.
ma_method
[in]  Tipo suavizado. Pode ser um dos valores ENUM_MA_METHOD.
applied_price
[in]  O pre√ßo usado. Pode ser qualquer das constantes de pre√ßos ENUM_APPLIED_PRICE ou um
manipulador de outro indicador.
<h3>Valor de retorno</h3>
Retorna o manipulador de um indicador t√©cnico especifico, em caso de falha de retorna
INVALID_HANDLE. A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √©
mais utilizado, usando a fun√ß√£o IndicatorRelease(), onde o manipulador de indicador √© transmitido.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                                     Demo_iMA.mq5 |
//|                        Copyright 2011, MetaQuotes Software Corp. |
//|                                            ;https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2900
</p>
<pre><code class="language-mql5">
#property description &quot;O indicador demonstra como obter dados&quot;
#property description &quot;de buffers do indicador para o indicador t√©cnico iMA.&quot;
#property description &quot;Um s√≠mbolo e o prazo utilizado para o c√°lculo do indicador,&quot;
#property description &quot;s√£o definidos pelos par√¢metros de s√≠mbolo e per√≠odo.&quot;
#property description &quot;O m√©todo de cria√ß√£o do manipulador √© definido atrav√©s do par√¢me
#property description &quot;Todos os outros par√¢metros, assim como no padr√£o Moving Average
#property indicator_chart_window
#property indicator_buffers 1
#property indicator_plots   1
//--- plotar iMA
#property indicator_label1  &quot;iMA&quot;
#property indicator_type1   DRAW_LINE
#property indicator_color1  clrRed
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1
//+------------------------------------------------------------------+
//| Enumerador dos m√©todos de cria√ß√£o do manipulador¬†                |
//+------------------------------------------------------------------+
enum Creation
  {
   Call_iMA,               // usar iMA
   Call_IndicatorCreate    // usar IndicatorCreate
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//--- par√¢metros de entrada
input Creation             type=Call_iMA;                // tipo de fun√ß√£o
input int                  ma_period=10;                 // per√≠odo da m√©dia m√≥vel
input int                  ma_shift=0;                   // deslocamento
input ENUM_MA_METHOD       ma_method=MODE_SMA;           // tipo de suaviza√ß√£o
input ENUM_APPLIED_PRICE   applied_price=PRICE_CLOSE;    // tipo de pre√ßo
input string               symbol=&quot; &quot;;                   // s√≠mbolo
input ENUM_TIMEFRAMES      period=PERIOD_CURRENT;        // timeframe
//--- buffer do indicador
double         iMABuffer[];
//--- vari√°vel para armazenar o manipulador do indicator iMA
int    handle;
//--- vari√°vel para armazenamento
string name=symbol;
//--- nome do indicador num gr√°fico
string short_name;
//--- manteremos o n√∫mero de valores no indicador Moving Average
int    bars_calculated=0;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- atribui√ß√£o de array para buffer do indicador
   SetIndexBuffer(0,iMABuffer,INDICATOR_DATA);</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2901
</p>
<pre><code class="language-mql5">
//--- definir deslocamento
   PlotIndexSetInteger(0,PLOT_SHIFT,ma_shift);   
//--- determinar o s√≠mbolo do indicador, √© desenhado para  
   name=symbol;
//--- excluir os espa√ßos √† direita e √† esquerda
   StringTrimRight(name);
   StringTrimLeft(name);
//--- se resulta em comprimento zero da string do &#x27;name&#x27;
   if(StringLen(name)==0)
     {
      //--- tomar o s√≠mbolo do gr√°fico, o indicador est√° anexado para
      name=_Symbol;
     }
//--- criar manipulador do indicador
   if(type==Call_iMA)
      handle=iMA(name,period,ma_period,ma_shift,ma_method,applied_price);
   else
     {
      //--- preencher a estrutura com os par√¢metros do indicador
      MqlParam pars[4];
      //--- per√≠odo
      pars[0].type=TYPE_INT;
      pars[0].integer_value=ma_period;
      //--- deslocamento
      pars[1].type=TYPE_INT;
      pars[1].integer_value=ma_shift;
      //--- tipo de suaviza√ß√£o
      pars[2].type=TYPE_INT;
      pars[2].integer_value=ma_method;
      //--- tipo de pre√ßo
      pars[3].type=TYPE_INT;
      pars[3].integer_value=applied_price;
      handle=IndicatorCreate(name,period,IND_MA,4,pars);
     }
//--- se o manipulador n√£o √© criado
   if(handle==INVALID_HANDLE)
     {
      //--- mensagem sobre a falha e a sa√≠da do c√≥digo de erro
      PrintFormat(&quot;Falha ao criar o manipulador do indicador iMA para o s√≠mbolo %s/%s,
                  name,
                  EnumToString(period),
                  GetLastError());
      //--- o indicador √© interrompido precocemente
      return(INIT_FAILED);
     }
//--- mostra que o s√≠mbolo/prazo do indicador Moving Average √© calculado para
   short_name=StringFormat(&quot;iMA(%s/%s, %d, %d, %s, %s)&quot;,name,EnumToString(period),
                           ma_period, ma_shift,EnumToString(ma_method),EnumToString(ap
   IndicatorSetString(INDICATOR_SHORTNAME,short_name);</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2902
</p>
<pre><code class="language-mql5">
//--- inicializa√ß√£o normal do indicador
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &amp;time[],
                const double &amp;open[],
                const double &amp;high[],
                const double &amp;low[],
                const double &amp;close[],
                const long &amp;tick_volume[],
                const long &amp;volume[],
                const int &amp;spread[])
  {
//--- n√∫mero de valores copiados a partir do indicador iMA
   int values_to_copy;
//--- determinar o n√∫mero de valores calculados no indicador
   int calculated=BarsCalculated(handle);
   if(calculated&lt;=0)
     {
      PrintFormat(&quot;BarsCalculated() retornando %d, c√≥digo de erro %d&quot;,calculated,GetLa
      return(0);
     }
//--- se for o princ√≠pio do c√°lculo do indicador, ou se o n√∫mero de valores √© modifica
//--- ou se √© necess√°rio c√°lculo do indicador para duas ou mais barras (isso significa
   if(prev_calculated==0 || calculated!=bars_calculated || rates_total&gt;prev_calculated
     {
      //--- se o array iMABuffer √© maior do que o n√∫mero de valores no indicador iMA p
      //--- caso contr√°rio, copiamos menor do que o tamanho dos buffers do indicador
      if(calculated&gt;rates_total) values_to_copy=rates_total;
      else                       values_to_copy=calculated;
     }
   else
     {
      //--- isso significa que n√£o √© a primeira vez do c√°lculo do indicador, √© desde a
      //--- para o c√°lculo n√£o mais do que uma barra √© adicionada
      values_to_copy=(rates_total-prev_calculated)+1;
     }
//--- preencher o array iMABuffer com valores do indicador Adaptive Moving Average
//--- se FillArrayFromBuffer retorna falso, significa que a informa√ß√£o n√£o est√° pronta
   if(!FillArrayFromBuffer(iMABuffer,ma_shift,handle,values_to_copy)) return(0);
//--- formar a mensagem
   string comm=StringFormat(&quot;%s ==&gt;  Valor atualizado no indicador %s: %d&quot;,
                            TimeToString(TimeCurrent(),TIME_DATE|TIME_SECONDS),
                            short_name,
                            values_to_copy);</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2903
</p>
<pre><code class="language-mql5">
//--- exibir a mensagem de servi√ßo no gr√°fico
   Comment(comm);
//--- memorizar o n√∫mero de valores no indicador Moving Average
   bars_calculated=calculated;
//--- retorna o valor prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Preencher buffers do indicador a partir do indicador MA          |
//+------------------------------------------------------------------+
bool FillArrayFromBuffer(double &amp;values[],   // buffer do indicator para valores do Mo
                         int shift,         // deslocamento
                         int ind_handle,     // manipulador do indicador iMA
                         int amount          // n√∫mero de valores copiados
                         )
  {
//--- redefinir o c√≥digo de erro
   ResetLastError();
//--- preencher uma parte do array iMABuffer com valores do buffer do indicador que te
   if(CopyBuffer(ind_handle,0,-shift,amount,values)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iMA, c√≥digo de erro %d&quot;,GetLastE
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- est√° tudo bem
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de desinicializa√ß√£o do indicador                          |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   if(handle!=INVALID_HANDLE)
      IndicatorRelease(handle);
//--- limpar o gr√°fico ap√≥s excluir o indicador
   Comment(&quot;&quot;);
</code></pre>
<p>
  }     </p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2904
iOsMA
A fun√ß√£o retorna o manipulador do indicador Moving Average of Oscillator. O oscilador –ûs–ú–ê mostra a
diferen√ßa entre valores do indicador MACD e sua linha de sinal. Tem apenas um buffer.
</p>
<pre><code class="language-mql5">
int¬† iOsMA(
   string¬†             symbol,¬†             // s√≠mbolo nome
   ENUM_TIMEFRAMES¬†    period,¬†             // per√≠odo
   int¬†                fast_ema_period,¬†    // per√≠odo M√©dia M√≥vel R√°pida
   int¬†                slow_ema_period,¬†    // per√≠odo M√©dia M√≥vel Lenta
   int¬†                signal_period,¬†      // per√≠odo para diferen√ßa entre as m√©dias
   ENUM_APPLIED_PRICE¬† applied_price¬†       // tipo de pre√ßo ou de manipulador
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in] O nome do s√≠mbolo de seguran√ßa, os dados que devem ser usados para calcular o indicador. O
valor NULL significa o s√≠mbolo atual.
period
[in] O valor do per√≠odo pode ser um dos valores ENUM_TIMEFRAMES, 0 (zero) significa o prazo
corrente.
fast_ema_period
[in]  Per√≠odo para c√°lculo da M√©dia M√≥vel R√°pida.
slow_ema_period
[in]  Per√≠odo para c√°lculo da M√©dia M√≥vel Lenta.
signal_period
[in]  Per√≠odo para o c√°lculo da linha de sinal.
applied_price
[in]  O pre√ßo usado. Pode ser qualquer das constantes de pre√ßos ENUM_APPLIED_PRICE ou um
manipulador de outro indicador.
<h3>Valor de retorno</h3>
Retorna o manipulador de um indicador t√©cnico especifico, em caso de falha de retorna
INVALID_HANDLE. A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √©
mais utilizado, usando a fun√ß√£o IndicatorRelease(), onde o manipulador de indicador √© transmitido.
<h3>Observa√ß√£o</h3>
Em alguns sistemas este oscilador √© tamb√©m conhecido como histograma MACD.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                                   Demo_iOsMA.mq5 |
//|                        Copyright 2011, MetaQuotes Software Corp. |
//|                                            ;https://www.mql5.com |</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2905
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;
#property description &quot;O indicador demonstra como obter dados&quot;
#property description &quot;de buffers do indicador para o indicador t√©cnico iOsMA.&quot;
#property description &quot;Um s√≠mbolo e o prazo utilizado para o c√°lculo do indicador,&quot;
#property description &quot;s√£o definidos pelos par√¢metros de s√≠mbolo e per√≠odo.&quot;
#property description &quot;O m√©todo de cria√ß√£o do manipulador √© definido atrav√©s do par√¢me
#property description &quot;Todos os outros par√¢metros s√£o similares ao padr√£o Moving Avera
#property indicator_separate_window
#property indicator_buffers 1
#property indicator_plots   1
//--- plotar iOsMA
#property indicator_label1  &quot;iOsMA&quot;
#property indicator_type1   DRAW_HISTOGRAM
#property indicator_color1  clrSilver
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1
//+------------------------------------------------------------------+
//| Enumerador dos m√©todos de cria√ß√£o do manipulador¬†                |
//+------------------------------------------------------------------+
enum Creation
  {
   Call_iOsMA,             // usar iOsMA
   Call_IndicatorCreate    // usar IndicatorCreate
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//--- par√¢metros de entrada
input Creation             type=Call_iOsMA;           // tipo de fun√ß√£o
input int                  fast_ema_period=12;        // per√≠odo da M√©dia M√≥vel R√°pida
input int                  slow_ema_period=26;        // per√≠odo da M√©dia M√≥vel Lenta
input int                  signal_period=9;           // per√≠odo da diferen√ßa entre as
input ENUM_APPLIED_PRICE   applied_price=PRICE_CLOSE; // tipo de pre√ßo
input string               symbol=&quot; &quot;;                // s√≠mbolo
input ENUM_TIMEFRAMES      period=PERIOD_CURRENT;     // timeframe
//--- buffer do indicador
double         iOsMABuffer[];
//--- vari√°vel para armazenar o manipulador do indicador iAMA
int    handle;
//--- vari√°vel para armazenamento
string name=symbol;
//--- nome do indicador num gr√°fico
string short_name;
//--- manteremos o n√∫mero de valores no indicador Moving Average
int    bars_calculated=0;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2906
</p>
<pre><code class="language-mql5">
int OnInit()
  {
//--- atribui√ß√£o de array para buffer do indicador
   SetIndexBuffer(0,iOsMABuffer,INDICATOR_DATA);
//--- determinar o s√≠mbolo do indicador, √© desenhado para
   name=symbol;
//--- excluir os espa√ßos √† direita e √† esquerda
   StringTrimRight(name);
   StringTrimLeft(name);
//--- se resulta em comprimento zero da string do &#x27;name&#x27;
   if(StringLen(name)==0)
     {
      //--- tomar o s√≠mbolo do gr√°fico, o indicador est√° anexado para
      name=_Symbol;
     }
//--- criar manipulador do indicador
   if(type==Call_iOsMA)
      handle=iOsMA(name,period,fast_ema_period,slow_ema_period,signal_period,applied_p
   else
     {
      //--- preencher a estrutura com os par√¢metros do indicador
      MqlParam pars[4];
      //--- per√≠odo da m√©dia m√≥vel r√°pida
      pars[0].type=TYPE_INT;
      pars[0].integer_value=fast_ema_period;
      //--- per√≠odo lento da m√©dia m√≥vel
      pars[1].type=TYPE_INT;
      pars[1].integer_value=slow_ema_period;
      //--- per√≠odo m√©dio da diferen√ßa entre a m√©dia m√≥vel r√°pida e a lenta
      pars[2].type=TYPE_INT;
      pars[2].integer_value=signal_period;
      //--- tipo de pre√ßo
      pars[3].type=TYPE_INT;
      pars[3].integer_value=applied_price;
      handle=IndicatorCreate(name,period,IND_OSMA,4,pars);
     }
//--- se o manipulador n√£o √© criado
   if(handle==INVALID_HANDLE)
     {
      //--- mensagem sobre a falha e a sa√≠da do c√≥digo de erro
      PrintFormat(&quot;Falha ao criar o manipulador do indicador iOsMA para o s√≠mbolo %s/%
                  name,
                  EnumToString(period),
                  GetLastError());
      //--- o indicador √© interrompido precocemente
      return(INIT_FAILED);
     }
//--- mostra que o s√≠mbolo/prazo do indicador Moving Average of Oscillator √© calculado
   short_name=StringFormat(&quot;iOsMA(%s/%s,%d,%d,%d,%s)&quot;,name,EnumToString(period),</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2907
</p>
<pre><code class="language-mql5">
                           fast_ema_period,slow_ema_period,signal_period,EnumToString
   IndicatorSetString(INDICATOR_SHORTNAME,short_name);
//--- inicializa√ß√£o normal do indicador    
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &amp;time[],
                const double &amp;open[],
                const double &amp;high[],
                const double &amp;low[],
                const double &amp;close[],
                const long &amp;tick_volume[],
                const long &amp;volume[],
                const int &amp;spread[])
  {
//--- n√∫mero de valores copiados a partir do indicador iOsMA
   int values_to_copy;
//--- determinar o n√∫mero de valores calculados no indicador
   int calculated=BarsCalculated(handle);
   if(calculated&lt;=0)
     {
      PrintFormat(&quot;BarsCalculated() retornando %d, c√≥digo de erro %d&quot;,calculated,GetLa
      return(0);
     }
//--- se for o princ√≠pio do c√°lculo do indicador, ou se o n√∫mero de valores √© modifica
//--- ou se √© necess√°rio c√°lculo do indicador para duas ou mais barras (isso significa
   if(prev_calculated==0 || calculated!=bars_calculated || rates_total&gt;prev_calculated
     {
      //--- se o array iOsMABuffer √© maior do que o n√∫mero de valores no indicador iOs
      //--- caso contr√°rio, copiamos menor do que o tamanho dos buffers do indicador
      if(calculated&gt;rates_total) values_to_copy=rates_total;
      else                       values_to_copy=calculated;
     }
   else
     {
      //--- isso significa que n√£o √© a primeira vez do c√°lculo do indicador, √© desde a
      //--- para o c√°lculo n√£o mais do que uma barra √© adicionada
      values_to_copy=(rates_total-prev_calculated)+1;
     }
//--- preencher os arrays com valores do indicador iOsMA
//--- se FillArrayFromBuffer retorna falso, significa que a informa√ß√£o n√£o est√° pronta
   if(!FillArrayFromBuffer(iOsMABuffer,handle,values_to_copy)) return(0);
//--- formar a mensagem
   string comm=StringFormat(&quot;%s ==&gt;  Valor atualizado no indicador %s: %d&quot;,
                            TimeToString(TimeCurrent(),TIME_DATE|TIME_SECONDS),</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2908
</p>
<pre><code class="language-mql5">
                            short_name,
                            values_to_copy);
//--- exibir a mensagem de servi√ßo no gr√°fico
   Comment(comm);
//--- memorizar o n√∫mero de valores no indicador Moving Average of Oscillator
   bars_calculated=calculated;
//--- retorna o valor prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Preencher buffers do indicador a partir do indicador iOsMA       |
//+------------------------------------------------------------------+
bool FillArrayFromBuffer(double &amp;ama_buffer[],  // buffer do indicator para valores do
                         int ind_handle,        // manipulador do indicador iOsMA
                         int amount             // n√∫mero de valores copiados
                         )
  {
//--- redefinir o c√≥digo de erro
   ResetLastError();
//--- preencher uma parte do array iOsMABuffer com valores do buffer do indicador que 
   if(CopyBuffer(ind_handle,0,0,amount,ama_buffer)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iOsMA, c√≥digo de erro %d&quot;,GetLas
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- est√° tudo bem
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de desinicializa√ß√£o do indicador                          |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   if(handle!=INVALID_HANDLE)
      IndicatorRelease(handle);
//--- limpar o gr√°fico ap√≥s excluir o indicador
   Comment(&quot;&quot;);
</code></pre>
<p>
  }  </p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2909
iMACD
A fun√ß√£o retorna o manipulador do indicador Moving Averages Convergence/Divergence. Em sistemas
onde –ûs–ú–ê √© chamado Histograma MACD, este indicador √© apresentado com duas linhas. No terminal
do cliente, o indicador Moving Averages Convergence/Divergence √© apresentado como um histograma.
</p>
<pre><code class="language-mql5">
int¬† iMACD(
   string¬†             symbol,¬†             // s√≠mbolo nome
   ENUM_TIMEFRAMES¬†    period,¬†             // per√≠odo
   int¬†                fast_ema_period,¬†    // per√≠odo para c√°lculo da m√©dia m√≥vel r√°p
   int¬†                slow_ema_period,¬†    // per√≠odo para c√°lculo da m√©dia m√≥vel len
   int¬†                signal_period,¬†      // per√≠odo para diferen√ßa entre as m√©dias
   ENUM_APPLIED_PRICE¬† applied_price¬†       // tipo de pre√ßo ou de manipulador
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in] O nome do s√≠mbolo de seguran√ßa, os dados que devem ser usados para calcular o indicador. O
valor NULL significa o s√≠mbolo atual.
period
[in] O valor do per√≠odo pode ser um dos valores ENUM_TIMEFRAMES, 0 (zero) significa o prazo
corrente.
fast_ema_period
[in]  Per√≠odo para c√°lculo da M√©dia M√≥vel R√°pida.
slow_ema_period
[in]  Per√≠odo para c√°lculo da M√©dia M√≥vel Lenta.
signal_period
[in]  Per√≠odo para c√°lculo da linha de Sinal.
applied_price
[in]  O pre√ßo usado. Pode ser qualquer das constantes de pre√ßos ENUM_APPLIED_PRICE ou um
manipulador de outro indicador.
<h3>Valor de retorno</h3>
Retorna o manipulador de um indicador t√©cnico especifico, em caso de falha de retorna
INVALID_HANDLE. A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √©
mais utilizado, usando a fun√ß√£o IndicatorRelease(), onde o manipulador de indicador √© transmitido.
<h3>Observa√ß√£o</h3>
Os n√∫meros de buffer s√£o os seguintes: 0 - MAIN_LINE, 1 - SIGNAL_LINE.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                                   Demo_iMACD.mq5 |
//|                        Copyright 2011, MetaQuotes Software Corp. |</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2910
</p>
<pre><code class="language-mql5">
//|                                            ;https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;
#property description &quot;O indicador demonstra como obter dados&quot;
#property description &quot;de buffers do indicador para o indicador t√©cnico iMACD.&quot;
#property description &quot;Um s√≠mbolo e o prazo utilizado para o c√°lculo do indicador,&quot;
#property description &quot;s√£o definidos pelos par√¢metros de s√≠mbolo e per√≠odo.&quot;
#property description &quot;O m√©todo de cria√ß√£o do manipulador √© definido atrav√©s do par√¢me
#property description &quot;Todos os outros par√¢metros, assim como no padr√£o MACD.&quot;
#property indicator_separate_window
#property indicator_buffers 2
#property indicator_plots   2
//--- plotar MACD
#property indicator_label1  &quot;MACD&quot;
#property indicator_type1   DRAW_HISTOGRAM
#property indicator_color1  clrSilver
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1
//--- plotar Signal
#property indicator_label2  &quot;Signal&quot;
#property indicator_type2   DRAW_LINE
#property indicator_color2  clrRed
#property indicator_style2  STYLE_DOT
#property indicator_width2  1
//+------------------------------------------------------------------+
//| Enumerador dos m√©todos de cria√ß√£o do manipulador¬†                |
//+------------------------------------------------------------------+
enum Creation
  {
   Call_iMACD,             // usar iMACD
   Call_IndicatorCreate    // usar IndicatorCreate
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//--- par√¢metros de entrada
input Creation             type=Call_iMACD;           // tipo de fun√ß√£o
input int                  fast_ema_period=12;        // per√≠odo da M√©dia M√≥vel R√°pida
input int                  slow_ema_period=26;        // per√≠odo da M√©dia M√≥vel Lenta
input int                  signal_period=9;           // per√≠odo da diferen√ßa entre as
input ENUM_APPLIED_PRICE   applied_price=PRICE_CLOSE; // tipo de pre√ßo
input string               symbol=&quot; &quot;;                // s√≠mbolo
input ENUM_TIMEFRAMES      period=PERIOD_CURRENT;     // timeframe
//--- buffers do indicador
double         MACDBuffer[];
double         SignalBuffer[];
//--- vari√°vel para armazenar o manipulador do indicator iMACD
int    handle;
//--- vari√°vel para armazenamento</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2911
</p>
<pre><code class="language-mql5">
string name=symbol;
//--- nome do indicador num gr√°fico
string short_name;
//--- manteremos o n√∫mero de valores no indicador Moving Averages Convergence/Divergen
int    bars_calculated=0;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- atribui√ß√£o de arrays para buffers do indicador
   SetIndexBuffer(0,MACDBuffer,INDICATOR_DATA);
   SetIndexBuffer(1,SignalBuffer,INDICATOR_DATA);
//--- determinar o s√≠mbolo do indicador, √© desenhado para
   name=symbol;
//--- excluir os espa√ßos √† direita e √† esquerda
   StringTrimRight(name);
   StringTrimLeft(name);
//--- se resulta em comprimento zero da string do &#x27;name&#x27;
   if(StringLen(name)==0)
     {
      //--- tomar o s√≠mbolo do gr√°fico, o indicador est√° anexado para
      name=_Symbol;
     }
//--- criar manipulador do indicador
   if(type==Call_iMACD)
      handle=iMACD(name,period,fast_ema_period,slow_ema_period,signal_period,applied_p
   else
     {
      //--- preencher a estrutura com os par√¢metros do indicador
      MqlParam pars[4];
      //--- per√≠odo da m√©dia m√≥vel r√°pida
      pars[0].type=TYPE_INT;
      pars[0].integer_value=fast_ema_period;
      //--- per√≠odo lento da m√©dia m√≥vel
      pars[1].type=TYPE_INT;
      pars[1].integer_value=slow_ema_period;
      //--- per√≠odo m√©dio da diferen√ßa entre a m√©dia m√≥vel r√°pida e a lenta
      pars[2].type=TYPE_INT;
      pars[2].integer_value=signal_period;
      //--- tipo de pre√ßo
      pars[3].type=TYPE_INT;
      pars[3].integer_value=applied_price;
      handle=IndicatorCreate(name,period,IND_MACD,4,pars);
     }
//--- se o manipulador n√£o √© criado
   if(handle==INVALID_HANDLE)
     {
      //--- mensagem sobre a falha e a sa√≠da do c√≥digo de erro</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2912
</p>
<pre><code class="language-mql5">
      PrintFormat(&quot;Falha ao criar o manipulador do indicador iMACD para o s√≠mbolo %s/%
                  name,
                  EnumToString(period),
                  GetLastError());
      //--- o indicador √© interrompido precocemente
      return(INIT_FAILED);
     }
//--- mostra que o s√≠mbolo/prazo do indicador Moving Average Convergence/Divergence √© 
   short_name=StringFormat(&quot;iMACD(%s/%s,%d,%d,%d,%s)&quot;,name,EnumToString(period),
                           fast_ema_period,slow_ema_period,signal_period,EnumToString
   IndicatorSetString(INDICATOR_SHORTNAME,short_name);
//--- inicializa√ß√£o normal do indicador  
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &amp;time[],
                const double &amp;open[],
                const double &amp;high[],
                const double &amp;low[],
                const double &amp;close[],
                const long &amp;tick_volume[],
                const long &amp;volume[],
                const int &amp;spread[])
  {
//--- n√∫mero de valores copiados a partir do indicador iMACD
   int values_to_copy;
//--- determinar o n√∫mero de valores calculados no indicador
   int calculated=BarsCalculated(handle);
   if(calculated&lt;=0)
     {
      PrintFormat(&quot;BarsCalculated() retornando %d, c√≥digo de erro %d&quot;,calculated,GetLa
      return(0);
     }
//--- se for o princ√≠pio do c√°lculo do indicador, ou se o n√∫mero de valores √© modifica
//--- ou se √© necess√°rio c√°lculo do indicador para duas ou mais barras (isso significa
   if(prev_calculated==0 || calculated!=bars_calculated || rates_total&gt;prev_calculated
     {
      //--- se o array MACDBuffer √© maior do que o n√∫mero de valores no indicador iMAC
      //--- caso contr√°rio, copiamos menor do que o tamanho dos buffers do indicador
      if(calculated&gt;rates_total) values_to_copy=rates_total;
      else                       values_to_copy=calculated;
     }
   else
     {
      //--- isso significa que n√£o √© a primeira vez do c√°lculo do indicador, √© desde a</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2913
</p>
<pre><code class="language-mql5">
      //--- para o c√°lculo n√£o mais do que uma barra √© adicionada
      values_to_copy=(rates_total-prev_calculated)+1;
     }
//--- preencher os arrays com valores do indicador iMACD
//--- se FillArraysFromBuffer retorna falso, isto significa que a informa√ß√£o ainda n√£o
   if(!FillArraysFromBuffers(MACDBuffer,SignalBuffer,handle,values_to_copy)) return(0)
//--- formar a mensagem
   string comm=StringFormat(&quot;%s ==&gt;  Valor atualizado no indicador %s: %d&quot;,
                            TimeToString(TimeCurrent(),TIME_DATE|TIME_SECONDS),
                            short_name,
                            values_to_copy);
//--- exibir a mensagem de servi√ßo no gr√°fico
   Comment(comm);
//--- memorizar o n√∫mero de valores no indicador¬†Moving Averages Convergence/Divergenc
   bars_calculated=calculated;
//--- retorna o valor prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Preencher buffers do indicador a partir do indicador iMACD       |
//+------------------------------------------------------------------+
bool FillArraysFromBuffers(double &amp;macd_buffer[],    // buffer do indicator para valor
                           double &amp;signal_buffer[],  // buffer do indicator da linha d
                           int ind_handle,           // manipulador do indicador iMACD
                           int amount                // n√∫mero de valores copiados
                           )
  {
//--- redefinir o c√≥digo de erro
   ResetLastError();
//--- preencher uma parte do array iMACDBuffer com valores do buffer do indicador que 
   if(CopyBuffer(ind_handle,0,0,amount,macd_buffer)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iMACD, c√≥digo de erro %d&quot;,GetLas
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- preencher uma parte do array SignalBuffer com valores do buffer do indicador que
   if(CopyBuffer(ind_handle,1,0,amount,signal_buffer)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iMACD, c√≥digo de erro %d&quot;,GetLas
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- est√° tudo bem
   return(true);
</code></pre>
<p>
  }</p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2914
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de desinicializa√ß√£o do indicador                          |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   if(handle!=INVALID_HANDLE)
      IndicatorRelease(handle);
//--- limpar o gr√°fico ap√≥s excluir o indicador
   Comment(&quot;&quot;);
</code></pre>
<p>
  }</p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2915
iOBV
A fun√ß√£o retorna o manipulador do indicador On Balance Volume. Tem apenas um buffer.
</p>
<pre><code class="language-mql5">
int¬† iOBV(
   string¬†               symbol,¬†            // s√≠mbolo nome
   ENUM_TIMEFRAMES¬†      period,¬†            // per√≠odo
   ENUM_APPLIED_VOLUME ¬† applied_volume¬†     // tipo de volume para c√°lculo
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in] O nome do s√≠mbolo de seguran√ßa, os dados que devem ser usados para calcular o indicador. O
valor NULL significa o s√≠mbolo atual.
period
[in] O valor do per√≠odo pode ser um dos valores ENUM_TIMEFRAMES, 0 (zero) significa o prazo
corrente.
applied_volume
[in]  O volume usado. Pode ser um dos valores ENUM_APPLIED_VOLUME.
<h3>Valor de retorno</h3>
Retorna o manipulador de um indicador t√©cnico especifico, em caso de falha de retorna
INVALID_HANDLE. A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √©
mais utilizado, usando a fun√ß√£o IndicatorRelease(), onde o manipulador de indicador √© transmitido.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                                    Demo_iOBV.mq5 |
//|                        Copyright 2011, MetaQuotes Software Corp. |
//|                                            ;https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;
#property description &quot;O indicador demonstra como obter dados&quot;
#property description &quot;de buffers do indicador para o indicador t√©cnico iOBV.&quot;
#property description &quot;Um s√≠mbolo e o prazo utilizado para o c√°lculo do indicador,&quot;
#property description &quot;s√£o definidos pelos par√¢metros de s√≠mbolo e per√≠odo.&quot;
#property description &quot;O m√©todo de cria√ß√£o do manipulador √© definido atrav√©s do par√¢me
#property indicator_separate_window
#property indicator_buffers 1
#property indicator_plots   1
//--- plotar iOBV
#property indicator_label1  &quot;iOBV&quot;
#property indicator_type1   DRAW_LINE
#property indicator_color1  clrLightSeaGreen</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2916
</p>
<pre><code class="language-mql5">
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1
//+------------------------------------------------------------------+
//| Enumerador dos m√©todos de cria√ß√£o do manipulador¬†                |
//+------------------------------------------------------------------+
enum Creation
  {
   Call_iOBV ,             // usar iOBV
   Call_IndicatorCreate    // usar IndicatorCreate
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//--- par√¢metros de entrada
input Creation             type=Call_iOBV;               // tipo de fun√ß√£o
input ENUM_APPLIED_VOLUME  applied_volume=VOLUME_TICK;   // tipo de volume
input string               symbol=&quot; &quot;;                   // s√≠mbolo
input ENUM_TIMEFRAMES      period=PERIOD_CURRENT;        // timeframe
//--- buffers do indicador
double         iOBVBuffer[];
//--- vari√°vel para armazenar o manipulador do indicator iOBV
int    handle;
//--- vari√°vel para armazenamento
string name=symbol;
//--- nome do indicador num gr√°fico
string short_name;
//--- manteremos o n√∫mero de valores no indicador On Balance Volume
int    bars_calculated=0;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- atribui√ß√£o de array para buffer do indicador
   SetIndexBuffer(0,iOBVBuffer,INDICATOR_DATA);
//--- determinar o s√≠mbolo do indicador, √© desenhado para
   name=symbol;
//--- excluir os espa√ßos √† direita e √† esquerda
   StringTrimRight(name);
   StringTrimLeft(name);
//--- se resulta em comprimento zero da string do &#x27;name&#x27;
   if(StringLen(name)==0)
     {
      //--- tomar o s√≠mbolo do gr√°fico, o indicador est√° anexado para
      name=_Symbol;
     }
//--- criar manipulador do indicador
   if(type==Call_iOBV)
      handle=iOBV(name,period,applied_volume);
   else
     {
      //--- preencher a estrutura com os par√¢metros do indicador</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2917
</p>
<pre><code class="language-mql5">
      MqlParam pars[1];
      //--- tipo de volume
      pars[0].type=TYPE_INT;
      pars[0].integer_value=applied_volume;
      handle=IndicatorCreate(name,period,IND_OBV,1,pars);
     }
//--- se o manipulador n√£o √© criado
   if(handle==INVALID_HANDLE)
     {
      //--- mensagem sobre a falha e a sa√≠da do c√≥digo de erro
      PrintFormat(&quot;Falha ao criar o manipulador do indicador para o s√≠mbolo %s/%s, c√≥d
                  name,
                  EnumToString(period),
                  GetLastError());
      //--- o indicador √© interrompido precocemente
      return(INIT_FAILED);
     }
//--- mostra que o s√≠mbolo/prazo do indicador On Balance Volume √© calculado para
   short_name=StringFormat(&quot;iOBV(%s/%s, %s)&quot;,name,EnumToString(period),
                           EnumToString(applied_volume));
   IndicatorSetString(INDICATOR_SHORTNAME,short_name);
//--- inicializa√ß√£o normal do indicador  
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &amp;time[],
                const double &amp;open[],
                const double &amp;high[],
                const double &amp;low[],
                const double &amp;close[],
                const long &amp;tick_volume[],
                const long &amp;volume[],
                const int &amp;spread[])
  {
//--- n√∫mero de valores copiados a partir do indicador iOBV
   int values_to_copy;
//--- determinar o n√∫mero de valores calculados no indicador
   int calculated=BarsCalculated(handle);
   if(calculated&lt;=0)
     {
      PrintFormat(&quot;BarsCalculated() retornando %d, c√≥digo de erro %d&quot;,calculated,GetLa
      return(0);
     }
//--- se for o princ√≠pio do c√°lculo do indicador, ou se o n√∫mero de valores √© modifica
//--- ou se √© necess√°rio c√°lculo do indicador para duas ou mais barras (isso significa</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2918
</p>
<pre><code class="language-mql5">
   if(prev_calculated==0 || calculated!=bars_calculated || rates_total&gt;prev_calculated
     {
      //--- se o array iOBVBuffer √© maior do que o n√∫mero de valores no indicador iOBV
      //--- caso contr√°rio, copiamos menor do que o tamanho dos buffers do indicador
      if(calculated&gt;rates_total) values_to_copy=rates_total;
      else                       values_to_copy=calculated;
     }
   else
     {
      //--- isso significa que n√£o √© a primeira vez do c√°lculo do indicador, √© desde a
      //--- para o c√°lculo n√£o mais do que uma barra √© adicionada
      values_to_copy=(rates_total-prev_calculated)+1;
     }
//--- preencher o array com valores do indicador iOBV
//--- se FillArrayFromBuffer retorna falso, significa que a informa√ß√£o n√£o est√° pronta
   if(!FillArrayFromBuffer(iOBVBuffer,handle,values_to_copy)) return(0);
//--- formar a mensagem
   string comm=StringFormat(&quot;%s ==&gt;  Valor atualizado no indicador %s: %d&quot;,
                            TimeToString(TimeCurrent(),TIME_DATE|TIME_SECONDS),
                            short_name,
                            values_to_copy);
//--- exibir a mensagem de servi√ßo no gr√°fico
   Comment(comm);
//--- memorizar o n√∫mero de valores no indicador On Balance Volume
   bars_calculated=calculated;
//--- retorna o valor prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Preencher buffers do indicador a partir do indicador iOBV        |
//+------------------------------------------------------------------+
bool FillArrayFromBuffer(double &amp;obv_buffer[],  // buffer do indicator para valores do
                         int ind_handle,        // manipulador do indicador iOBV
                         int amount             // n√∫mero de valores copiados
                         )
  {
//--- redefinir o c√≥digo de erro
   ResetLastError();
//--- preencher uma parte do array iOBVBuffer com valores do buffer do indicador que t
   if(CopyBuffer(ind_handle,0,0,amount,obv_buffer)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iOBV, c√≥digo de erro %d&quot;,GetLast
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- est√° tudo bem
   return(true);
</code></pre>
<p>
  }</p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2919
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de desinicializa√ß√£o do indicador                          |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   if(handle!=INVALID_HANDLE)
      IndicatorRelease(handle);
//--- limpar o gr√°fico ap√≥s excluir o indicador
   Comment(&quot;&quot;);
</code></pre>
<p>
  }   </p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2920
iSAR
A fun√ß√£o retorna o manipulador do indicador Parabolic Stop and Reverse system. Tem apenas um
buffer.
</p>
<pre><code class="language-mql5">
int¬† iSAR(
   string¬†          symbol,¬†     // s√≠mbolo nome
   ENUM_TIMEFRAMES¬† period,¬†     // per√≠odo
   double¬†          step,¬†       // incrementar passo
   double¬†          maximum¬†     // m√°ximo n√≠vel de parada
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in] O nome do s√≠mbolo de seguran√ßa, os dados que devem ser usados para calcular o indicador. O
valor NULL significa o s√≠mbolo atual.
period
[in] O valor do per√≠odo pode ser um dos valores ENUM_TIMEFRAMES, 0 (zero) significa o prazo
corrente.
step
[in]  O n√≠vel de parada incrementado, usualmente 0.02.
maximum
[in]  O m√°ximo n√≠vel de parada, usualmente 0.2.
<h3>Valor de retorno</h3>
Retorna o manipulador de um indicador t√©cnico especifico, em caso de falha de retorna
INVALID_HANDLE. A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √©
mais utilizado, usando a fun√ß√£o IndicatorRelease(), onde o manipulador de indicador √© transmitido.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                                    Demo_iSAR.mq5 |
//|                        Copyright 2011, MetaQuotes Software Corp. |
//|                                            ;https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;
#property description &quot;O indicador demonstra como obter dados&quot;
#property description &quot;de buffers do indicador para o indicador t√©cnico iSAR.&quot;
#property description &quot;Um s√≠mbolo e o prazo utilizado para o c√°lculo do indicador,&quot;
#property description &quot;s√£o definidos pelos par√¢metros de s√≠mbolo e per√≠odo.&quot;
#property description &quot;O m√©todo de cria√ß√£o do manipulador √© definido atrav√©s do par√¢me
#property description &quot;Todos os outros par√¢metros s√£o similares ao padr√£o Parabolic St
#property indicator_chart_window</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2921
</p>
<pre><code class="language-mql5">
#property indicator_buffers 1
#property indicator_plots   1
//--- desenhando iSAR
#property indicator_label1  &quot;iSAR&quot;
#property indicator_type1   DRAW_ARROW
#property indicator_color1  clrBlue
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1
//+------------------------------------------------------------------+
//| Enumerador dos m√©todos de cria√ß√£o do manipulador¬†                |
//+------------------------------------------------------------------+
enum Creation
  {
   Call_iSAR,              // usar iSAR
   Call_IndicatorCreate    // usar IndicatorCreate
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//--- par√¢metros de entrada
input Creation             type=Call_iSAR;               // tipo de fun√ß√£o
input double               step=0.02;                    // passo - o fator de acelera
input double               maximum=0.2;                  // m√°ximo valor do passo
input string               symbol=&quot; &quot;;                   // s√≠mbolo
input ENUM_TIMEFRAMES      period=PERIOD_CURRENT;        // timeframe
//--- buffers do indicador
double         iSARBuffer[];
//--- vari√°vel para armazenar o manipulador do indicator iSAR
int    handle;
//--- vari√°vel para armazenamento
string name=symbol;
//--- nome do indicador num gr√°fico
string short_name;
//--- manteremos o n√∫mero de valores no indicador Parabolic SAR
int    bars_calculated=0;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- atribui√ß√£o de array para buffer do indicador
   SetIndexBuffer(0,iSARBuffer,INDICATOR_DATA);
//--- definir um c√≥digo de s√≠mbolo do conjunto de caracteres Wingdings para a propried
   PlotIndexSetInteger(0,PLOT_ARROW,159);
//--- determinar o s√≠mbolo do indicador, √© desenhado para
   name=symbol;
//--- excluir os espa√ßos √† direita e √† esquerda
   StringTrimRight(name);
   StringTrimLeft(name);
//--- se resulta em comprimento zero da string do &#x27;name&#x27;
   if(StringLen(name)==0)
     {</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2922
</p>
<pre><code class="language-mql5">
      //--- tomar o s√≠mbolo do gr√°fico, o indicador est√° anexado para
      name=_Symbol;
     }
//--- criar manipulador do indicador
   if(type==Call_iSAR)
      handle=iSAR(name,period,step,maximum);
   else
     {
      //--- preencher a estrutura com os par√¢metros do indicador
      MqlParam pars[2];
      //--- valor do passo
      pars[0].type=TYPE_DOUBLE;
      pars[0].double_value=step;
      //--- limite do valor do passo que pode ser usado para os c√°lculos
      pars[1].type=TYPE_DOUBLE;
      pars[1].double_value=maximum;
      handle=IndicatorCreate(name,period,IND_SAR,2,pars);
     }
//--- se o manipulador n√£o √© criado
   if(handle==INVALID_HANDLE)
     {
      //--- mensagem sobre a falha e a sa√≠da do c√≥digo de erro
      PrintFormat(&quot;Falha ao criar o manipulador do indicador iSAR para o s√≠mbolo %s/%s
                  name,
                  EnumToString(period),
                  GetLastError());
      //--- o indicador √© interrompido precocemente
      return(INIT_FAILED);
     }
//--- mostra que o s√≠mbolo/prazo do indicador Parabolic SAR √© calculado para
   short_name=StringFormat(&quot;iSAR(%s/%s, %G, %G)&quot;,name,EnumToString(period),
                           step,maximum);
   IndicatorSetString(INDICATOR_SHORTNAME,short_name);
//--- inicializa√ß√£o normal do indicador
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &amp;time[],
                const double &amp;open[],
                const double &amp;high[],
                const double &amp;low[],
                const double &amp;close[],
                const long &amp;tick_volume[],
                const long &amp;volume[],
                const int &amp;spread[])</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2923
</p>
<pre><code class="language-mql5">
  {
//--- n√∫mero de valores copiados a partir do indicador iSAR
   int values_to_copy;
//--- determinar o n√∫mero de valores calculados no indicador
   int calculated=BarsCalculated(handle);
   if(calculated&lt;=0)
     {
      PrintFormat(&quot;BarsCalculated() retornando %d, c√≥digo de erro %d&quot;,calculated,GetLa
      return(0);
     }
//--- se for o princ√≠pio do c√°lculo do indicador, ou se o n√∫mero de valores √© modifica
//--- ou se √© necess√°rio c√°lculo do indicador para duas ou mais barras (isso significa
   if(prev_calculated==0 || calculated!=bars_calculated || rates_total&gt;prev_calculated
     {
      //--- se o array iSARBuffer √© maior do que o n√∫mero de valores no indicador iSAR
      //--- caso contr√°rio, copiamos menor do que o tamanho dos buffers do indicador
      if(calculated&gt;rates_total) values_to_copy=rates_total;
      else                       values_to_copy=calculated;
     }
   else
     {
      //--- isso significa que n√£o √© a primeira vez do c√°lculo do indicador, √© desde a
      //--- para o c√°lculo n√£o mais do que uma barra √© adicionada
      values_to_copy=(rates_total-prev_calculated)+1;
     }
//--- preencher os arrays com valores do indicador iSAR
//--- se FillArrayFromBuffer retorna falso, significa que a informa√ß√£o n√£o est√° pronta
   if(!FillArrayFromBuffer(iSARBuffer,handle,values_to_copy)) return(0);
//--- formar a mensagem
   string comm=StringFormat(&quot;%s ==&gt;  Valor atualizado no indicador %s: %d&quot;,
                            TimeToString(TimeCurrent(),TIME_DATE|TIME_SECONDS),
                            short_name,
                            values_to_copy);
//--- exibir a mensagem de servi√ßo no gr√°fico
   Comment(comm);
//--- memorizar o n√∫mero de valores no indicador SAR
   bars_calculated=calculated;
//--- retorna o valor prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Preencher buffers do indicador a partir do indicador iSAR        |
//+------------------------------------------------------------------+
bool FillArrayFromBuffer(double &amp;sar_buffer[],  // buffer do indicator para valores do
                         int ind_handle,        // manipulador do indicador iSAR
                         int amount             // n√∫mero de valores copiados
                         )
  {
//--- redefinir o c√≥digo de erro</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2924
</p>
<pre><code class="language-mql5">
   ResetLastError();
//--- preencher uma parte do array iSARBuffer com valores do buffer do indicador que t
   if(CopyBuffer(ind_handle,0,0,amount,sar_buffer)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iSAR, c√≥digo de erro %d&quot;,GetLast
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- est√° tudo bem
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de desinicializa√ß√£o do indicador                          |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   if(handle!=INVALID_HANDLE)
      IndicatorRelease(handle);
//--- limpar o gr√°fico ap√≥s excluir o indicador
   Comment(&quot;&quot;);
</code></pre>
<p>
  }    </p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2925
iRSI
A fun√ß√£o retorna o manipulador do indicador Relative Strength Index. Tem apenas um buffer.
</p>
<pre><code class="language-mql5">
int¬† iRSI(
   string¬†             symbol,¬†           // s√≠mbolo nome
   ENUM_TIMEFRAMES¬†    period,¬†           // per√≠odo
   int¬†                ma_period,¬†        // per√≠odo m√©dio
   ENUM_APPLIED_PRICE¬† applied_price¬†     // tipo de pre√ßo ou manipulador
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in] O nome do s√≠mbolo de seguran√ßa, os dados que devem ser usados para calcular o indicador. O
valor NULL significa o s√≠mbolo atual.
period
[in] O valor do per√≠odo pode ser um dos valores ENUM_TIMEFRAMES, 0 (zero) significa o prazo
corrente.
ma_period
[in]  Per√≠odo m√©dio para c√°lculo do RSI.
applied_price
[in]  O pre√ßo usado. Pode ser qualquer das constantes de pre√ßos ENUM_APPLIED_PRICE ou um
manipulador de outro indicador.
<h3>Valor de retorno</h3>
Retorna o manipulador de um indicador t√©cnico especifico, em caso de falha de retorna
INVALID_HANDLE. A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √©
mais utilizado, usando a fun√ß√£o IndicatorRelease(), onde o manipulador de indicador √© transmitido.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                                    Demo_iRSI.mq5 |
//|                        Copyright 2011, MetaQuotes Software Corp. |
//|                                            ;https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;
#property description &quot;O indicador demonstra como obter dados&quot;
#property description &quot;de buffers do indicador para o indicador t√©cnico iRSI.&quot;
#property description &quot;Um s√≠mbolo e o prazo utilizado para o c√°lculo do indicador,&quot;
#property description &quot;s√£o definidos pelos par√¢metros de s√≠mbolo e per√≠odo.&quot;
#property description &quot;O m√©todo de cria√ß√£o do manipulador √© definido atrav√©s do par√¢me
#property description &quot;Todos os outros par√¢metros s√£o similares ao padr√£o Relative Str
#property indicator_separate_window</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2926
</p>
<pre><code class="language-mql5">
#property indicator_buffers 1
#property indicator_plots   1
//--- desenhando iRSI
#property indicator_label1  &quot;iRSI&quot;
#property indicator_type1   DRAW_LINE
#property indicator_color1  clrDodgerBlue
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1
//--- limites para mostrar os valores na janela do indicador
#property indicator_maximum 100
#property indicator_minimum 0
//--- n√≠veis horizontais na janela de indicador
#property indicator_level1  70.0
#property indicator_level2  30.0
//+------------------------------------------------------------------+
//| Enumerador dos m√©todos de cria√ß√£o do manipulador¬†                |
//+------------------------------------------------------------------+
enum Creation
  {
   Call_iRSI,              // usar iRSI
   Call_IndicatorCreate    // usar IndicatorCreate
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//--- par√¢metros de entrada
input Creation             type=Call_iRSI;               // tipo de fun√ß√£o
input int                  ma_period=14;                 // per√≠odo da m√©dia m√≥vel
input ENUM_APPLIED_PRICE   applied_price=PRICE_CLOSE;    // tipo de pre√ßo
input string               symbol=&quot; &quot;;                   // s√≠mbolo
input ENUM_TIMEFRAMES      period=PERIOD_CURRENT;        // timeframe
//--- buffer do indicador
double         iRSIBuffer[];
//--- vari√°vel para armazenar o manipulador do indicator iRSI
int    handle;
//--- vari√°vel para armazenamento
string name=symbol;
//--- nome do indicador num gr√°fico
string short_name;
//--- manteremos o n√∫mero de valores no indicador Relative Strength Index
int    bars_calculated=0;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- atribui√ß√£o de array para buffer do indicador
   SetIndexBuffer(0,iRSIBuffer,INDICATOR_DATA);
//--- determinar o s√≠mbolo do indicador, √© desenhado para
   name=symbol;
//--- excluir os espa√ßos √† direita e √† esquerda
   StringTrimRight(name);</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2927
</p>
<pre><code class="language-mql5">
   StringTrimLeft(name);
//--- se resulta em comprimento zero da string do &#x27;name&#x27;
   if(StringLen(name)==0)
     {
      //--- tomar o s√≠mbolo do gr√°fico, o indicador est√° anexado para
      name=_Symbol;
     }
//--- criar manipulador do indicador
   if(type==Call_iRSI)
      handle=iRSI(name,period,ma_period,applied_price);
   else
     {
      //--- preencher a estrutura com os par√¢metros do indicador
      MqlParam pars[2];
      //--- per√≠odo de m√©dia m√≥vel
      pars[0].type=TYPE_INT;
      pars[0].integer_value=ma_period;
      //--- limite do valor do passo que pode ser usado para os c√°lculos
      pars[1].type=TYPE_INT;
      pars[1].integer_value=applied_price;
      handle=IndicatorCreate(name,period,IND_RSI,2,pars);
     }
//--- se o manipulador n√£o √© criado
   if(handle==INVALID_HANDLE)
     {
      //--- mensagem sobre a falha e a sa√≠da do c√≥digo de erro
      PrintFormat(&quot;Falha ao criar o manipulador do indicador iRSI para o s√≠mbolo %s/%s
                  name,
                  EnumToString(period),
                  GetLastError());
      //--- o indicador √© interrompido precocemente
      return(INIT_FAILED);
     }
//--- mostra que o s√≠mbolo/prazo do indicador Relative Strength Index √© calculado para
   short_name=StringFormat(&quot;iRSI(%s/%s, %d, %d)&quot;,name,EnumToString(period),
                           ma_period,applied_price);
   IndicatorSetString(INDICATOR_SHORTNAME,short_name);
//--- inicializa√ß√£o normal do indicador
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &amp;time[],
                const double &amp;open[],
                const double &amp;high[],
                const double &amp;low[],</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2928
</p>
<pre><code class="language-mql5">
                const double &amp;close[],
                const long &amp;tick_volume[],
                const long &amp;volume[],
                const int &amp;spread[])
  {
//--- n√∫mero de valores copiados a partir do indicador iRSI
   int values_to_copy;
//--- determinar o n√∫mero de valores calculados no indicador
   int calculated=BarsCalculated(handle);
   if(calculated&lt;=0)
     {
      PrintFormat(&quot;BarsCalculated() retornando %d, c√≥digo de erro %d&quot;,calculated,GetLa
      return(0);
     }
//--- se for o princ√≠pio do c√°lculo do indicador, ou se o n√∫mero de valores √© modifica
//--- ou se √© necess√°rio c√°lculo do indicador para duas ou mais barras (isso significa
   if(prev_calculated==0 || calculated!=bars_calculated || rates_total&gt;prev_calculated
     {
      //--- se o array iRSIBuffer √© maior do que o n√∫mero de valores no indicador iRSI
      //--- caso contr√°rio, copiamos menor do que o tamanho dos buffers do indicador
      if(calculated&gt;rates_total) values_to_copy=rates_total;
      else                       values_to_copy=calculated;
     }
   else
     {
      //--- isso significa que n√£o √© a primeira vez do c√°lculo do indicador, √© desde a
      //--- para o c√°lculo n√£o mais do que uma barra √© adicionada
      values_to_copy=(rates_total-prev_calculated)+1;
     }
//--- preencher o array com valores do indicador iRSI
//--- se FillArrayFromBuffer retorna falso, significa que a informa√ß√£o n√£o est√° pronta
   if(!FillArrayFromBuffer(iRSIBuffer,handle,values_to_copy)) return(0);
//--- formar a mensagem
   string comm=StringFormat(&quot;%s ==&gt;  Valor atualizado no indicador %s: %d&quot;,
                            TimeToString(TimeCurrent(),TIME_DATE|TIME_SECONDS),
                            short_name,
                            values_to_copy);
//--- exibir a mensagem de servi√ßo no gr√°fico
   Comment(comm);
//--- memorizar o n√∫mero de valores no indicador Relative Strength Index
   bars_calculated=calculated;
//--- retorna o valor prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Preencher buffers do indicador a partir do indicador¬†            |
//+------------------------------------------------------------------+
bool FillArrayFromBuffer(double &amp;rsi_buffer[],  // buffer do indicator para valores do
                         int ind_handle,        // manipulador do indicador iRSI</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2929
</p>
<pre><code class="language-mql5">
                         int amount             // n√∫mero de valores copiados
                         )
  {
//--- redefinir o c√≥digo de erro
   ResetLastError();
//--- preencher uma parte do array iRSIBuffer com valores do buffer do indicador que t
   if(CopyBuffer(ind_handle,0,0,amount,rsi_buffer)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iRSI, c√≥digo de erro %d&quot;,GetLast
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- est√° tudo bem
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de desinicializa√ß√£o do indicador                          |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   if(handle!=INVALID_HANDLE)
      IndicatorRelease(handle);
//--- limpar o gr√°fico ap√≥s excluir o indicador
   Comment(&quot;&quot;);
</code></pre>
<p>
  }     </p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2930
iRVI
A fun√ß√£o retorna o manipulador do indicador Relative Vigor Index.
</p>
<pre><code class="language-mql5">
int¬† iRVI(
   string¬†          symbol,¬†       // s√≠mbolo nome
   ENUM_TIMEFRAMES¬† period,¬†       // per√≠odo
   int¬†             ma_period¬†     // per√≠odo m√©dio
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in] O nome do s√≠mbolo de seguran√ßa, os dados que devem ser usados para calcular o indicador. O
valor NULL significa o s√≠mbolo atual.
period
[in] O valor do per√≠odo pode ser um dos valores ENUM_TIMEFRAMES, 0 (zero) significa o prazo
corrente.
ma_period
[in]  Per√≠odo m√©dio para c√°lculo do indicador RVI.
<h3>Valor de retorno</h3>
Retorna o manipulador de um indicador t√©cnico especifico, em caso de falha de retorna
INVALID_HANDLE. A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √©
mais utilizado, usando a fun√ß√£o IndicatorRelease(), onde o manipulador de indicador √© transmitido.
<h3>Observa√ß√£o</h3>
Os n√∫meros de buffer s√£o os seguintes: 0 - MAIN_LINE, 1 - SIGNAL_LINE.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                                    Demo_iRVI.mq5 |
//|                        Copyright 2011, MetaQuotes Software Corp. |
//|                                            ;https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;
#property description &quot;O indicador demonstra como obter dados&quot;
#property description &quot;de buffers do indicador para o indicador t√©cnico iRVI.&quot;
#property description &quot;Um s√≠mbolo e o prazo utilizado para o c√°lculo do indicador,&quot;
#property description &quot;s√£o definidos pelos par√¢metros de s√≠mbolo e per√≠odo.&quot;
#property description &quot;O m√©todo de cria√ß√£o do manipulador √© definido atrav√©s do par√¢me
#property description &quot;Todos os outros par√¢metros s√£o similares ao padr√£o Relative Vig
#property indicator_separate_window
#property indicator_buffers 2</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2931
</p>
<pre><code class="language-mql5">
#property indicator_plots   2
//--- plotar RVI
#property indicator_label1  &quot;RVI&quot;
#property indicator_type1   DRAW_LINE
#property indicator_color1  clrGreen
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1
//--- plotar Signal
#property indicator_label2  &quot;Signal&quot;
#property indicator_type2   DRAW_LINE
#property indicator_color2  clrRed
#property indicator_style2  STYLE_SOLID
#property indicator_width2  1
//+------------------------------------------------------------------+
//| Enumerador dos m√©todos de cria√ß√£o do manipulador¬†                |
//+------------------------------------------------------------------+
enum Creation
  {
   Call_iRVI,              // usar iRVI
   Call_IndicatorCreate    // usar IndicatorCreate
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//--- par√¢metros de entrada
input Creation             type=Call_iRVI;               // tipo de fun√ß√£o
input int                  ma_period=10;                 // per√≠odo para c√°lculos
input string               symbol=&quot; &quot;;                   // s√≠mbolo
input ENUM_TIMEFRAMES      period=PERIOD_CURRENT;        // timeframe
//--- buffers do indicador
double         RVIBuffer[];
double         SignalBuffer[];
//--- vari√°vel para armazenar o manipulador do indicator iRVI
int    handle;
//--- vari√°vel para armazenamento
string name=symbol;
//--- nome do indicador num gr√°fico
string short_name;
//--- manteremos o n√∫mero de valores no indicador Relative Vigor Index
int    bars_calculated=0;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- atribui√ß√£o de arrays para buffers do indicador
   SetIndexBuffer(0,RVIBuffer,INDICATOR_DATA);
   SetIndexBuffer(1,SignalBuffer,INDICATOR_DATA);
//--- determinar o s√≠mbolo do indicador, √© desenhado para
   name=symbol;
//--- excluir os espa√ßos √† direita e √† esquerda
   StringTrimRight(name);</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2932
</p>
<pre><code class="language-mql5">
   StringTrimLeft(name);
//--- se resulta em comprimento zero da string do &#x27;name&#x27;
   if(StringLen(name)==0)
     {
      //--- tomar o s√≠mbolo do gr√°fico, o indicador est√° anexado para
      name=_Symbol;
     }
//--- criar manipulador do indicador
   if(type==Call_iRVI)
      handle=iRVI(name,period,ma_period);
   else
     {
      //--- preencher a estrutura com os par√¢metros do indicador
      MqlParam pars[1];
      //--- per√≠odo para c√°lculos
      pars[0].type=TYPE_INT;
      pars[0].integer_value=ma_period;
      handle=IndicatorCreate(name,period,IND_RVI,1,pars);
     }
//--- se o manipulador n√£o √© criado
   if(handle==INVALID_HANDLE)
     {
      //--- mensagem sobre a falha e a sa√≠da do c√≥digo de erro
      PrintFormat(&quot;Falha ao criar o manipulador do indicador iRVI para o s√≠mbolo %s/%s
                  name,
                  EnumToString(period),
                  GetLastError());
      //--- o indicador √© interrompido precocemente
      return(INIT_FAILED);
     }
//--- mostra que o s√≠mbolo/prazo do indicador Relative Vigor Index √© calculado para
   short_name=StringFormat(&quot;iRVI(%s/%s, %d, %d)&quot;,name,EnumToString(period),ma_period);
   IndicatorSetString(INDICATOR_SHORTNAME,short_name);
//--- inicializa√ß√£o normal do indicador
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &amp;time[],
                const double &amp;open[],
                const double &amp;high[],
                const double &amp;low[],
                const double &amp;close[],
                const long &amp;tick_volume[],
                const long &amp;volume[],
                const int &amp;spread[])</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2933
</p>
<pre><code class="language-mql5">
  {
//--- n√∫mero de valores copiados a partir do indicador iRVI
   int values_to_copy;
//--- determinar o n√∫mero de valores calculados no indicador
   int calculated=BarsCalculated(handle);
   if(calculated&lt;=0)
     {
      PrintFormat(&quot;BarsCalculated() retornando %d, c√≥digo de erro %d&quot;,calculated,GetLa
      return(0);
     }
//--- se for o princ√≠pio do c√°lculo do indicador, ou se o n√∫mero de valores √© modifica
//--- ou se √© necess√°rio c√°lculo do indicador para duas ou mais barras (isso significa
   if(prev_calculated==0 || calculated!=bars_calculated || rates_total&gt;prev_calculated
     {
      //--- se o array RVIBuffer √© maior do que o n√∫mero de valores no indicador iRVI 
      //--- caso contr√°rio, copiamos menor do que o tamanho dos buffers do indicador
      if(calculated&gt;rates_total) values_to_copy=rates_total;
      else                       values_to_copy=calculated;
     }
   else
     {
      //--- isso significa que n√£o √© a primeira vez do c√°lculo do indicador, √© desde a
      //--- para o c√°lculo n√£o mais do que uma barra √© adicionada
      values_to_copy=(rates_total-prev_calculated)+1;
     }
//--- preencher o array com valores do indicador iRVI
//--- se FillArrayFromBuffer retorna falso, significa que a informa√ß√£o n√£o est√° pronta
   if(!FillArrayFromBuffer(RVIBuffer,SignalBuffer,handle,values_to_copy)) return(0);
//--- formar a mensagem
   string comm=StringFormat(&quot;%s ==&gt;  Valor atualizado no indicador %s: %d&quot;,
                            TimeToString(TimeCurrent(),TIME_DATE|TIME_SECONDS),
                            short_name,
                            values_to_copy);
//--- exibir a mensagem de servi√ßo no gr√°fico
   Comment(comm);
//--- memorizar o n√∫mero de valores no indicador Relative Vigor Index
   bars_calculated=calculated;
//--- retorna o valor prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Preencher buffers do indicador a partir do indicador iRVI        |
//+------------------------------------------------------------------+
bool FillArrayFromBuffer(double &amp;rvi_buffer[],     // buffer do indicator para valores
                         double &amp;signal_buffer[],  // buffer do indicator da linha de 
                         int ind_handle,           // manipulador do indicador iRVI
                         int amount                // n√∫mero de valores copiados
                         )
  {</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2934
</p>
<pre><code class="language-mql5">
//--- redefinir o c√≥digo de erro
   ResetLastError();
//--- preencher uma parte do array iRVIBuffer com valores do buffer do indicador que t
   if(CopyBuffer(ind_handle,0,0,amount,rvi_buffer)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iRVI, c√≥digo de erro %d&quot;,GetLast
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- preencher uma parte do array SignalBuffer com valores do buffer do indicador que
   if(CopyBuffer(ind_handle,1,0,amount,signal_buffer)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iRVI, c√≥digo de erro %d&quot;,GetLast
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- est√° tudo bem
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de desinicializa√ß√£o do indicador                          |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   if(handle!=INVALID_HANDLE)
      IndicatorRelease(handle);
//--- limpar o gr√°fico ap√≥s excluir o indicador
   Comment(&quot;&quot;);
</code></pre>
<p>
  }</p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2935
iStdDev
A fun√ß√£o retorna o manipulador do indicador Standard Deviation. Tem apenas um buffer.
</p>
<pre><code class="language-mql5">
int¬† iStdDev(
   string¬†             symbol,¬†           // s√≠mbolo nome
   ENUM_TIMEFRAMES¬†    period,¬†           // per√≠odo
   int¬†                ma_period,¬†        // per√≠odo m√©dio
   int¬†                ma_shift,¬†         // deslocamento horizontal
   ENUM_MA_METHOD¬†     ma_method,¬†        // tipo suavizado
   ENUM_APPLIED_PRICE¬† applied_price¬†     // tipo de pre√ßo ou manipulador
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in] O nome do s√≠mbolo de seguran√ßa, os dados que devem ser usados para calcular o indicador. O
valor NULL significa o s√≠mbolo atual.
period
[in] O valor do per√≠odo pode ser um dos valores ENUM_TIMEFRAMES, 0 (zero) significa o prazo
corrente.
ma_period
[in]  Per√≠odo m√©dio para c√°lculos do indicador.
ma_shift
[in]  Deslocamento do indicador relativo ao gr√°fico de pre√ßos.
ma_method
[in]  Tipo de m√©dia. Pode ser qualquer um dos valores do ENUM_MA_METHOD.
applied_price
[in]  O pre√ßo usado. Pode ser qualquer das constantes de pre√ßos ENUM_APPLIED_PRICE ou um
manipulador de outro indicador.
<h3>Valor de retorno</h3>
Retorna o manipulador de um indicador t√©cnico especifico, em caso de falha de retorna
INVALID_HANDLE. A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √©
mais utilizado, usando a fun√ß√£o IndicatorRelease(), onde o manipulador de indicador √© transmitido.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                                 Demo_iStdDev.mq5 |
//|                        Copyright 2011, MetaQuotes Software Corp. |
//|                                            ;https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2936
</p>
<pre><code class="language-mql5">
#property description &quot;O indicador demonstra como obter dados&quot;
#property description &quot;de buffers do indicador para o indicador t√©cnico iStdDev.&quot;
#property description &quot;Um s√≠mbolo e o prazo utilizado para o c√°lculo do indicador,&quot;
#property description &quot;s√£o definidos pelos par√¢metros de s√≠mbolo e per√≠odo.&quot;
#property description &quot;O m√©todo de cria√ß√£o do manipulador √© definido atrav√©s do par√¢me
#property description &quot;Todos os outros par√¢metros s√£o similares ao padr√£o Deviation.&quot;
#property indicator_separate_window
#property indicator_buffers 1
#property indicator_plots   1
//--- plotar iStdDev
#property indicator_label1  &quot;iStdDev&quot;
#property indicator_type1   DRAW_LINE
#property indicator_color1  clrMediumSeaGreen
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1
//+------------------------------------------------------------------+
//| Enumerador dos m√©todos de cria√ß√£o do manipulador¬†                |
//+------------------------------------------------------------------+
enum Creation
  {
   Call_iStdDev,           // usar iStdDev
   Call_IndicatorCreate    // usar IndicatorCreate
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//--- par√¢metros de entrada
input Creation             type=Call_iStdDev;         // tipo de fun√ß√£o
input int                  ma_period=20;              // per√≠odo m√©dio
input int                  ma_shift=0;                // deslocamento
input ENUM_MA_METHOD       ma_method=MODE_SMA;        // tipo de suaviza√ß√£o
input ENUM_APPLIED_PRICE   applied_price=PRICE_CLOSE; // tipo de pre√ßo
input string               symbol=&quot; &quot;;                // s√≠mbolo
input ENUM_TIMEFRAMES      period=PERIOD_CURRENT;     // timeframe
//--- buffer do indicador
double         iStdDevBuffer[];
//--- vari√°vel para armazenar o manipulador do indicator iStdDev
int    handle;
//--- vari√°vel para armazenamento
string name=symbol;
//--- nome do indicador num gr√°fico
string short_name;
//--- manteremos o n√∫mero de valores no indicador Standard Deviation
int    bars_calculated=0;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- atribui√ß√£o de array para buffer do indicador
   SetIndexBuffer(0,iStdDevBuffer,INDICATOR_DATA);</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2937
</p>
<pre><code class="language-mql5">
//--- definir deslocamento
   PlotIndexSetInteger(0,PLOT_SHIFT,ma_shift);
//--- determinar o s√≠mbolo do indicador, √© desenhado para
   name=symbol;
//--- excluir os espa√ßos √† direita e √† esquerda
   StringTrimRight(name);
   StringTrimLeft(name);
//--- se resulta em comprimento zero da string do &#x27;name&#x27;
   if(StringLen(name)==0)
     {
      //--- tomar o s√≠mbolo do gr√°fico, o indicador est√° anexado para
      name=_Symbol;
     }
//--- criar manipulador do indicador
   if(type==Call_iStdDev)
      handle=iStdDev(name,period,ma_period,ma_shift,ma_method,applied_price);
   else
     {
      //--- preencher a estrutura com os par√¢metros do indicador
      MqlParam pars[4];
      //--- per√≠odo
      pars[0].type=TYPE_INT;
      pars[0].integer_value=ma_period;
      //--- deslocamento
      pars[1].type=TYPE_INT;
      pars[1].integer_value=ma_shift;
      //--- tipo de suaviza√ß√£o
      pars[2].type=TYPE_INT;
      pars[2].integer_value=ma_method;
      //--- tipo de pre√ßo
      pars[3].type=TYPE_INT;
      pars[3].integer_value=applied_price;
      handle=IndicatorCreate(name,period,IND_STDDEV,4,pars);
     }
//--- se o manipulador n√£o √© criado
   if(handle==INVALID_HANDLE)
     {
      //--- mensagem sobre a falha e a sa√≠da do c√≥digo de erro
      PrintFormat(&quot;Falha ao criar o manipulador do indicador iStdDev para o s√≠mbolo %s
                  name,
                  EnumToString(period),
                  GetLastError());
      //--- o indicador √© interrompido precocemente
      return(INIT_FAILED);
     }
//--- mostra que o s√≠mbolo/prazo do indicador Standard Deviation √© calculado para
   short_name=StringFormat(&quot;iStdDev(%s/%s, %d, %d, %s, %s)&quot;,name,EnumToString(period),
                           ma_period,ma_shift,EnumToString(ma_method),EnumToString(app
   IndicatorSetString(INDICATOR_SHORTNAME,short_name);</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2938
</p>
<pre><code class="language-mql5">
//--- inicializa√ß√£o normal do indicador  
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &amp;time[],
                const double &amp;open[],
                const double &amp;high[],
                const double &amp;low[],
                const double &amp;close[],
                const long &amp;tick_volume[],
                const long &amp;volume[],
                const int &amp;spread[])
  {
//--- n√∫mero de valores copiados a partir do indicador iStdDev
   int values_to_copy;
//--- determinar o n√∫mero de valores calculados no indicador
   int calculated=BarsCalculated(handle);
   if(calculated&lt;=0)
     {
      PrintFormat(&quot;BarsCalculated() retornando %d, c√≥digo de erro %d&quot;,calculated,GetLa
      return(0);
     }
//--- se for o princ√≠pio do c√°lculo do indicador, ou se o n√∫mero de valores √© modifica
//--- ou se √© necess√°rio c√°lculo do indicador para duas ou mais barras (isso significa
   if(prev_calculated==0 || calculated!=bars_calculated || rates_total&gt;prev_calculated
     {
      //--- se o array iStdDevBuffer √© maior do que o n√∫mero de valores no indicador i
      //--- caso contr√°rio, copiamos menor do que o tamanho dos buffers do indicador
      if(calculated&gt;rates_total) values_to_copy=rates_total;
      else                       values_to_copy=calculated;
     }
   else
     {
      //--- isso significa que n√£o √© a primeira vez do c√°lculo do indicador, √© desde a
      //--- para o c√°lculo n√£o mais do que uma barra √© adicionada
      values_to_copy=(rates_total-prev_calculated)+1;
     }
//--- preencher o array com valores do indicador Standard Deviation
//--- se FillArrayFromBuffer retorna falso, significa que a informa√ß√£o n√£o est√° pronta
   if(!FillArrayFromBuffer(iStdDevBuffer,ma_shift,handle,values_to_copy)) return(0);
//--- formar a mensagem
   string comm=StringFormat(&quot;%s ==&gt;  Valor atualizado no indicador %s: %d&quot;,
                            TimeToString(TimeCurrent(),TIME_DATE|TIME_SECONDS),
                            short_name,
                            values_to_copy);</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2939
</p>
<pre><code class="language-mql5">
//--- exibir a mensagem de servi√ßo no gr√°fico
   Comment(comm);
//--- memorizar o n√∫mero de valores no indicador Standard Deviation
   bars_calculated=calculated;
//--- retorna o valor prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Preencher buffers do indicador a partir do indicador iStdDev     |
//+------------------------------------------------------------------+
bool FillArrayFromBuffer(double &amp;std_buffer[],  // buffer do indicator para linha Stan
                         int std_shift,         // deslocamento da linha Standard Devi
                         int ind_handle,        // manipulador do indicador iStdDev
                         int amount             // n√∫mero de valores copiados
                         )
  {
//--- redefinir o c√≥digo de erro
   ResetLastError();
//--- preencher uma parte do array iStdDevBuffer com valores do buffer do indicador qu
   if(CopyBuffer(ind_handle,0,-std_shift,amount,std_buffer)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iStdDev, c√≥digo de erro %d&quot;,GetL
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- est√° tudo bem
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de desinicializa√ß√£o do indicador                          |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   if(handle!=INVALID_HANDLE)
      IndicatorRelease(handle);
//--- limpar o gr√°fico ap√≥s excluir o indicador
   Comment(&quot;&quot;);
</code></pre>
<p>
  }</p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2940
iStochastic
A fun√ß√£o retorna o manipulador do indicador Stochastic Oscillator.
</p>
<pre><code class="language-mql5">
int¬† iStochastic(
   string¬†          symbol,¬†         // s√≠mbolo nome
   ENUM_TIMEFRAMES¬† period,¬†         // per√≠odo
   int¬†             Kperiod,¬†        // K-period (n√∫mero de barras para c√°lculos)
   int¬†             Dperiod,¬†        // D-period (per√≠odo da primeira suaviza√ß√£o)
   int¬†             slowing,¬†        // final da suaviza√ß√£o
   ENUM_MA_METHOD¬†  ma_method,¬†      // tipo de suaviza√ß√£o
   ENUM_STO_PRICE¬†  price_field¬†     // m√©todo de c√°lculo estoc√°stico
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in] O nome do s√≠mbolo de seguran√ßa, os dados que devem ser usados para calcular o indicador. O
valor NULL significa o s√≠mbolo atual.
period
[in] O valor do per√≠odo pode ser um dos valores ENUM_TIMEFRAMES, 0 (zero) significa o prazo
corrente.
<h3>Kperiod</h3>
[in]  Per√≠odo m√©dio (barras contadas) para o c√°lculo da linha K%.
<h3>Dperiod</h3>
[in]  Per√≠odo m√©dio (barras contadas) para o c√°lculo da linha %D.
slowing
[in]  Valor da desacelera√ß√£o.
ma_method
[in]  Tipo de m√©dia. Pode ser qualquer um dos valores do ENUM_MA_METHOD.
price_field
[in]  Par√¢metros de sele√ß√£o de pre√ßo para c√°lculos. Pode ser um dos valoresENUM_STO_PRICE.
<h3>Valor de retorno</h3>
Retorna o manipulador de um indicador t√©cnico especifico, em caso de falha de retorna
INVALID_HANDLE. A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √©
mais utilizado, usando a fun√ß√£o IndicatorRelease(), onde o manipulador de indicador √© transmitido.
<h3>Observa√ß√£o</h3>
O n√∫mero de buffer: 0 - MAIN_LINE, 1 - SIGNAL_LINE.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                             Demo_iStochastic.mq5 |</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2941
</p>
<pre><code class="language-mql5">
//|                        Copyright 2011, MetaQuotes Software Corp. |
//|                                            ;https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;
#property description &quot;O indicador demonstra como obter dados&quot;
#property description &quot;de buffers do indicador para o indicador t√©cnico iStochastic.&quot;
#property description &quot;Um s√≠mbolo e o prazo utilizado para o c√°lculo do indicador,&quot;
#property description &quot;s√£o definidos pelos par√¢metros de s√≠mbolo e per√≠odo.&quot;
#property description &quot;O m√©todo de cria√ß√£o do manipulador √© definido atrav√©s do par√¢me
#property description &quot;Todos os outros par√¢metros s√£o similares ao padr√£o.&quot;
#property indicator_separate_window
#property indicator_buffers 2
#property indicator_plots   2
//--- plotar Stochastic
#property indicator_label1  &quot;Stochastic&quot;
#property indicator_type1   DRAW_LINE
#property indicator_color1  clrLightSeaGreen
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1
//--- plotar Signal
#property indicator_label2  &quot;Signal&quot;
#property indicator_type2   DRAW_LINE
#property indicator_color2  clrRed
#property indicator_style2  STYLE_SOLID
#property indicator_width2  1
//--- definir o limite dos valores do indicador
#property indicator_minimum 0
#property indicator_maximum 100
//--- n√≠veis horizontais na janela de indicador
#property indicator_level1  -100.0
#property indicator_level2  100.0
//+------------------------------------------------------------------+
//| Enumerador dos m√©todos de cria√ß√£o do manipulador¬†                |
//+------------------------------------------------------------------+
enum Creation
  {
   Call_iStochastic,       // usar iStochastic
   Call_IndicatorCreate    // usar IndicatorCreate
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//--- par√¢metros de entrada
input Creation             type=Call_iStochastic;     // tipo de fun√ß√£o
input int                  Kperiod=5;                 // o per√≠odo K ( o n√∫mero de bar
input int                  Dperiod=3;                 // o per√≠odo D (o per√≠odo da sua
input int                  slowing=3;                 // per√≠odo final da suaviza√ß√£o
input ENUM_MA_METHOD       ma_method=MODE_SMA;        // tipo de suaviza√ß√£o
input ENUM_STO_PRICE       price_field=STO_LOWHIGH;   // m√©todo de c√°lculo do Estoc√°st</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2942
</p>
<pre><code class="language-mql5">
input string               symbol=&quot; &quot;;                // s√≠mbolo
input ENUM_TIMEFRAMES      period=PERIOD_CURRENT;     // timeframe
//--- buffers do indicador
double         StochasticBuffer[];
double         SignalBuffer[];
//--- vari√°vel para armazenar o manipulador do indicator iStochastic
int    handle;
//--- vari√°vel para armazenamento
string name=symbol;
//--- nome do indicador num gr√°fico
string short_name;
//--- manteremos o n√∫mero de valores no indicador Stochastic Oscillatorr
int    bars_calculated=0;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- atribui√ß√£o de arrays para buffers do indicador
   SetIndexBuffer(0,StochasticBuffer,INDICATOR_DATA);
   SetIndexBuffer(1,SignalBuffer,INDICATOR_DATA);
//--- determinar o s√≠mbolo do indicador, √© desenhado para
   name=symbol;
//--- excluir os espa√ßos √† direita e √† esquerda
   StringTrimRight(name);
   StringTrimLeft(name);
//--- se resulta em comprimento zero da string do &#x27;name&#x27;
   if(StringLen(name)==0)
     {
      //--- tomar o s√≠mbolo do gr√°fico, o indicador est√° anexado para
      name=_Symbol;
     }
//--- criar manipulador do indicador
   if(type==Call_iStochastic)
      handle=iStochastic(name,period,Kperiod,Dperiod,slowing,ma_method,price_field);
   else
     {
      //--- preencher a estrutura com os par√¢metros do indicador
      MqlParam pars[5];
      //--- o per√≠odo K para c√°lculos
      pars[0].type=TYPE_INT;
      pars[0].integer_value=Kperiod;
      //--- o per√≠odo D para suaviza√ß√£o prim√°ria
      pars[1].type=TYPE_INT;
      pars[1].integer_value=Dperiod;
      //--- o per√≠odo K final para suaviza√ß√£o
      pars[2].type=TYPE_INT;
      pars[2].integer_value=slowing;
      //--- tipo de suaviza√ß√£o</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2943
</p>
<pre><code class="language-mql5">
      pars[3].type=TYPE_INT;
      pars[3].integer_value=ma_method;
      //--- m√©todo de c√°lculo do Estoc√°stico
      pars[4].type=TYPE_INT;
      pars[4].integer_value=price_field;
      handle=IndicatorCreate(name,period,IND_STOCHASTIC,5,pars);
     }
//--- se o manipulador n√£o √© criado
   if(handle==INVALID_HANDLE)
     {
      //--- mensagem sobre a falha e a sa√≠da do c√≥digo de erro
      PrintFormat(&quot;Falha ao criar o manipulador do indicador para o s√≠mbolo %s/%s, c√≥d
                  name,
                  EnumToString(period),
                  GetLastError());
      //--- o indicador √© interrompido precocemente
      return(INIT_FAILED);
     }
//--- mostra que o s√≠mbolo/prazo do indicador Stochastic Oscillator √© calculado para
   short_name=StringFormat(&quot;iStochastic(%s/%s, %d, %d, %d, %s, %s)&quot;,name,EnumToString
                           Kperiod,Dperiod,slowing,EnumToString(ma_method),EnumToStrin
   IndicatorSetString(INDICATOR_SHORTNAME,short_name);
//--- inicializa√ß√£o normal do indicador
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &amp;time[],
                const double &amp;open[],
                const double &amp;high[],
                const double &amp;low[],
                const double &amp;close[],
                const long &amp;tick_volume[],
                const long &amp;volume[],
                const int &amp;spread[])
  {
//--- n√∫mero de valores copiados a partir do indicador iStochastic
   int values_to_copy;
//--- determinar o n√∫mero de valores calculados no indicador
   int calculated=BarsCalculated(handle);
   if(calculated&lt;=0)
     {
      PrintFormat(&quot;BarsCalculated() retornando %d, c√≥digo de erro %d&quot;,calculated,GetLa
      return(0);
     }
//--- se for o princ√≠pio do c√°lculo do indicador, ou se o n√∫mero de valores √© modifica</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2944
</p>
<pre><code class="language-mql5">
//--- ou se √© necess√°rio c√°lculo do indicador para duas ou mais barras (isso significa
   if(prev_calculated==0 || calculated!=bars_calculated || rates_total&gt;prev_calculated
     {
      //--- se o array StochasticBuffer √© maior do que o n√∫mero de valores no indicado
      //--- caso contr√°rio, copiamos menor do que o tamanho dos buffers do indicador
      if(calculated&gt;rates_total) values_to_copy=rates_total;
      else                       values_to_copy=calculated;
     }
   else
     {
      //--- isso significa que n√£o √© a primeira vez do c√°lculo do indicador, √© desde a
      //--- para o c√°lculo n√£o mais do que uma barra √© adicionada
      values_to_copy=(rates_total-prev_calculated)+1;
     }
//--- preencher os arrays com valores do indicador iStochastic
//--- se FillArraysFromBuffer retorna falso, isto significa que a informa√ß√£o ainda n√£o
   if(!FillArraysFromBuffers(StochasticBuffer,SignalBuffer,handle,values_to_copy)) ret
//--- formar a mensagem
   string comm=StringFormat(&quot;%s ==&gt;  Valor atualizado no indicador %s: %d&quot;,
                            TimeToString(TimeCurrent(),TIME_DATE|TIME_SECONDS),
                            short_name,
                            values_to_copy);
//--- exibir a mensagem de servi√ßo no gr√°fico
   Comment(comm);
//--- memorizar o n√∫mero de valores no indicador Stochastic Oscillator
   bars_calculated=calculated;
//--- retorna o valor prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Preencher buffers do indicador a partir do indicador iStochastic |
//+------------------------------------------------------------------+
bool FillArraysFromBuffers(double &amp;main_buffer[],    // buffer do indicador dos valore
                           double &amp;signal_buffer[],  // buffer do indicator da linha d
                           int ind_handle,           // manipulador do indicador iStoc
                           int amount                // n√∫mero de valores copiados
                           )
  {
//--- redefinir o c√≥digo de erro
   ResetLastError();
//--- preencher uma parte do array StochasticBuffer com valores do buffer do indicador
   if(CopyBuffer(ind_handle,MAIN_LINE,0,amount,main_buffer)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iStochastic, c√≥digo de erro %d&quot;,
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- preencher uma parte do array SignalBuffer com valores do buffer do indicador que</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2945
</p>
<pre><code class="language-mql5">
   if(CopyBuffer(ind_handle,SIGNAL_LINE,0,amount,signal_buffer)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iStochastic, c√≥digo de erro %d&quot;,
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- est√° tudo bem
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de desinicializa√ß√£o do indicador                          |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   if(handle!=INVALID_HANDLE)
      IndicatorRelease(handle);
//--- limpar o gr√°fico ap√≥s excluir o indicador
   Comment(&quot;&quot;);
</code></pre>
<p>
  }</p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2946
iTEMA
A fun√ß√£o retorna o manipulador do indicador Triple Exponential Moving Average. Tem apenas um
buffer.
</p>
<pre><code class="language-mql5">
int¬† iTEMA(
   string¬†             symbol,¬†           // s√≠mbolo nome
   ENUM_TIMEFRAMES¬†    period,¬†           // per√≠odo
   int¬†                ma_period,¬†        // per√≠odo m√©dio
   int¬†                ma_shift,¬†         // deslocamento horizontal indicador
   ENUM_APPLIED_PRICE¬† applied_price¬†     // tipo de pre√ßo ou manipulador
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in] O nome do s√≠mbolo de seguran√ßa, os dados que devem ser usados para calcular o indicador. O
valor NULL significa o s√≠mbolo atual.
period
[in] O valor do per√≠odo pode ser um dos valores ENUM_TIMEFRAMES, 0 (zero) significa o prazo
corrente.
ma_period
[in]  Per√≠odo m√©dio (barras contadas) para c√°lculo.
ma_shift
[in]  Deslocamento do indicador relativo √† tabela de pre√ßos.
applied_price
[in]  O pre√ßo usado. Pode ser qualquer das constantes de pre√ßos ENUM_APPLIED_PRICE ou um
manipulador de outro indicador.
<h3>Valor de retorno</h3>
Retorna o manipulador de um indicador t√©cnico especifico, em caso de falha de retorna
INVALID_HANDLE. A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √©
mais utilizado, usando a fun√ß√£o IndicatorRelease(), onde o manipulador de indicador √© transmitido.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                                   Demo_iTEMA.mq5 |
//|                        Copyright 2011, MetaQuotes Software Corp. |
//|                                            ;https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;
#property description &quot;O indicador demonstra como obter dados&quot;
#property description &quot;de buffers do indicador para o indicador t√©cnico iTEMA.&quot;
#property description &quot;Um s√≠mbolo e o prazo utilizado para o c√°lculo do indicador,&quot;</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2947
</p>
<pre><code class="language-mql5">
#property description &quot;s√£o definidos pelos par√¢metros de s√≠mbolo e per√≠odo.&quot;
#property description &quot;O m√©todo de cria√ß√£o do manipulador √© definido atrav√©s do par√¢me
#property description &quot;Todos os outros par√¢metros s√£o similares ao padr√£o Triple Expon
#property indicator_chart_window
#property indicator_buffers 1
#property indicator_plots   1
//--- plotar iTEMA
#property indicator_label1  &quot;iTEMA&quot;
#property indicator_type1   DRAW_LINE
#property indicator_color1  clrRed
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1
//+------------------------------------------------------------------+
//| Enumerador dos m√©todos de cria√ß√£o do manipulador¬†                |
//+------------------------------------------------------------------+
enum Creation
  {
   Call_iTEMA,             // usar iTEMA
   Call_IndicatorCreate    // usar IndicatorCreate
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//--- par√¢metros de entrada
input Creation             type=Call_iTEMA;           // tipo de fun√ß√£o
input int                  ma_period=14;              // per√≠odo m√©dio
input int                  ma_shift=0;                // deslocamento
input ENUM_APPLIED_PRICE   applied_price=PRICE_CLOSE; // tipo de pre√ßo
input string               symbol=&quot; &quot;;                // s√≠mbolo
input ENUM_TIMEFRAMES      period=PERIOD_CURRENT;     // timeframe
//--- buffer do indicador
double         iTEMABuffer[];
//--- vari√°vel para armazenar o manipulador do indicator Triple Exponential Moving Ave
int    handle;
//--- vari√°vel para armazenamento
string name=symbol;
//--- nome do indicador num gr√°fico
string short_name;
//--- manteremos o n√∫mero de valores no indicador Triple Exponential Moving Average
int    bars_calculated=0;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- atribui√ß√£o de array para buffer do indicador
   SetIndexBuffer(0,iTEMABuffer,INDICATOR_DATA);
//--- definir deslocamento
   PlotIndexSetInteger(0,PLOT_SHIFT,ma_shift);
//--- determinar o s√≠mbolo do indicador, √© desenhado para
   name=symbol;</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2948
</p>
<pre><code class="language-mql5">
//--- excluir os espa√ßos √† direita e √† esquerda
   StringTrimRight(name);
   StringTrimLeft(name);
//--- se resulta em comprimento zero da string do &#x27;name&#x27;
   if(StringLen(name)==0)
     {
      //--- tomar o s√≠mbolo do gr√°fico, o indicador est√° anexado para
      name=_Symbol;
     }
//--- criar manipulador do indicador
   if(type==Call_iTEMA)
      handle=iTEMA(name,period,ma_period,ma_shift,applied_price);
   else
     {
      //--- preencher a estrutura com os par√¢metros do indicador
      MqlParam pars[3];
      //--- per√≠odo
      pars[0].type=TYPE_INT;
      pars[0].integer_value=ma_period;
      //--- deslocamento
      pars[1].type=TYPE_INT;
      pars[1].integer_value=ma_shift;
      //--- tipo de pre√ßo
      pars[2].type=TYPE_INT;
      pars[2].integer_value=applied_price;
      handle=IndicatorCreate(name,period,IND_TEMA,3,pars);
     }
//--- se o manipulador n√£o √© criado
   if(handle==INVALID_HANDLE)
     {
      //--- mensagem sobre a falha e a sa√≠da do c√≥digo de erro
      PrintFormat(&quot;Falha ao criar o manipulador do indicador iTEMA para o s√≠mbolo %s/%
                  name,
                  EnumToString(period),
                  GetLastError());
      //--- o indicador √© interrompido precocemente
      return(INIT_FAILED);
     }
//--- mostra que o s√≠mbolo/prazo do indicador Triple Exponential Moving Average √© calc
   short_name=StringFormat(&quot;iTEMA(%s/%s, %d, %d, %s)&quot;,name,EnumToString(period),
                           ma_period,ma_shift,EnumToString(applied_price));
   IndicatorSetString(INDICATOR_SHORTNAME,short_name);
//--- inicializa√ß√£o normal do indicador  
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2949
</p>
<pre><code class="language-mql5">
                const int prev_calculated,
                const datetime &amp;time[],
                const double &amp;open[],
                const double &amp;high[],
                const double &amp;low[],
                const double &amp;close[],
                const long &amp;tick_volume[],
                const long &amp;volume[],
                const int &amp;spread[])
  {
//--- n√∫mero de valores copiados a partir do indicador iTEMA
   int values_to_copy;
//--- determinar o n√∫mero de valores calculados no indicador
   int calculated=BarsCalculated(handle);
   if(calculated&lt;=0)
     {
      PrintFormat(&quot;BarsCalculated() retornando %d, c√≥digo de erro %d&quot;,calculated,GetLa
      return(0);
     }
//--- se for o princ√≠pio do c√°lculo do indicador, ou se o n√∫mero de valores √© modifica
//--- ou se √© necess√°rio c√°lculo do indicador para duas ou mais barras (isso significa
   if(prev_calculated==0 || calculated!=bars_calculated || rates_total&gt;prev_calculated
     {
      //--- se o array iTEMABuffer √© maior do que o n√∫mero de valores no indicador iTE
      //--- caso contr√°rio, copiamos menor do que o tamanho dos buffers do indicador
      if(calculated&gt;rates_total) values_to_copy=rates_total;
      else                       values_to_copy=calculated;
     }
   else
     {
      //--- isso significa que n√£o √© a primeira vez do c√°lculo do indicador, √© desde a
      //--- para o c√°lculo n√£o mais do que uma barra √© adicionada
      values_to_copy=(rates_total-prev_calculated)+1;
     }
//--- preencher o array com valores do indicador Triple Exponential Moving Average
//--- se FillArrayFromBuffer retorna falso, significa que a informa√ß√£o n√£o est√° pronta
   if(!FillArrayFromBuffer(iTEMABuffer,ma_shift,handle,values_to_copy)) return(0);
//--- formar a mensagem
   string comm=StringFormat(&quot;%s ==&gt;  Valor atualizado no indicador %s: %d&quot;,
                            TimeToString(TimeCurrent(),TIME_DATE|TIME_SECONDS),
                            short_name,
                            values_to_copy);
//--- exibir a mensagem de servi√ßo no gr√°fico
   Comment(comm);
//--- memorizar o n√∫mero de valores no indicador Triple Exponential Moving Average
   bars_calculated=calculated;
//--- retorna o valor prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }</p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2950
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Preencher buffers do indicador a partir do indicador iTEMA       |
//+------------------------------------------------------------------+
bool FillArrayFromBuffer(double &amp;tema_buffer[], // buffer do indicator para valores do
                         int t_shift,           // deslocamento da linha
                         int ind_handle,        // manipulador do indicador iTEMA
                         int amount             // n√∫mero de valores copiados
                         )
  {
//--- redefinir o c√≥digo de erro
   ResetLastError();
//--- preencher uma parte do array iTEMABuffer com valores do buffer do indicador que 
   if(CopyBuffer(ind_handle,0,-t_shift,amount,tema_buffer)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iTEMA, c√≥digo de erro %d&quot;,GetLas
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- est√° tudo bem
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de desinicializa√ß√£o do indicador                          |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   if(handle!=INVALID_HANDLE)
      IndicatorRelease(handle);
//--- limpar o gr√°fico ap√≥s excluir o indicador
   Comment(&quot;&quot;);
</code></pre>
<p>
  }</p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2951
iTriX
A fun√ß√£o retorna o manipulador do indicador Triple Exponential Moving Averages Oscillator. Tem
apenas um buffer.
</p>
<pre><code class="language-mql5">
int¬† iTriX(
   string¬†             symbol,¬†           // s√≠mbolo nome
   ENUM_TIMEFRAMES¬†    period,¬†           // per√≠odo
   int¬†                ma_period,¬†        // per√≠odo m√©dio
   ENUM_APPLIED_PRICE¬† applied_price¬†     // tipo de pre√ßo ou manipulador
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in] O nome do s√≠mbolo de seguran√ßa, os dados que devem ser usados para calcular o indicador. O
valor NULL significa o s√≠mbolo atual.
period
[in] O valor do per√≠odo pode ser um dos valores ENUM_TIMEFRAMES, 0 (zero) significa o prazo
corrente.
ma_period
[in]  Per√≠odo m√©dio (barras contadas) para c√°lculos.
applied_price
[in]  O pre√ßo usado. Pode ser qualquer das constantes de pre√ßos ENUM_APPLIED_PRICE ou um
manipulador de outro indicador.
<h3>Valor de retorno</h3>
Retorna o manipulador de um indicador t√©cnico especifico, em caso de falha de retorna
INVALID_HANDLE. A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √©
mais utilizado, usando a fun√ß√£o IndicatorRelease(), onde o manipulador de indicador √© transmitido.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                                   Demo_iTriX.mq5 |
//|                        Copyright 2011, MetaQuotes Software Corp. |
//|                                            ;https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;
#property description &quot;O indicador demonstra como obter dados&quot;
#property description &quot;de buffers do indicador para o indicador t√©cnico iTriX.&quot;
#property description &quot;Um s√≠mbolo e o prazo utilizado para o c√°lculo do indicador,&quot;
#property description &quot;s√£o definidos pelos par√¢metros de s√≠mbolo e per√≠odo.&quot;
#property description &quot;O m√©todo de cria√ß√£o do manipulador √© definido atrav√©s do par√¢me
#property indicator_separate_window</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2952
</p>
<pre><code class="language-mql5">
#property indicator_buffers 1
#property indicator_plots   1
//--- plotar iTriX
#property indicator_label1  &quot;iTriX&quot;
#property indicator_type1   DRAW_LINE
#property indicator_color1  clrRed
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1
//+------------------------------------------------------------------+
//| Enumerador dos m√©todos de cria√ß√£o do manipulador¬†                |
//+------------------------------------------------------------------+
enum Creation
  {
   Call_iTriX,             // usar iTriX
   Call_IndicatorCreate    // usar IndicatorCreate
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//--- par√¢metros de entrada
input Creation             type=Call_iTriX;           // tipo de fun√ß√£o
input int                  ma_period=14;              // per√≠odo
input ENUM_APPLIED_PRICE   applied_price=PRICE_CLOSE; // tipo de pre√ßo
input string               symbol=&quot; &quot;;                // s√≠mbolo
input ENUM_TIMEFRAMES      period=PERIOD_CURRENT;     // timeframe
//--- buffer do indicador
double         iTriXBuffer[];
//--- vari√°vel para armazenar o manipulador do indicator iTriX
int    handle;
//--- vari√°vel para armazenamento
string name=symbol;
//--- nome do indicador num gr√°fico
string short_name;
//--- manteremos o n√∫mero de valores no indicador Triple Exponential Moving Averages O
int    bars_calculated=0;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- atribui√ß√£o de array para buffer do indicador
   SetIndexBuffer(0,iTriXBuffer,INDICATOR_DATA);
//--- determinar o s√≠mbolo do indicador, √© desenhado para
   name=symbol;
//--- excluir os espa√ßos √† direita e √† esquerda
   StringTrimRight(name);
   StringTrimLeft(name);
//--- se resulta em comprimento zero da string do &#x27;name&#x27;
   if(StringLen(name)==0)
     {
      //--- tomar o s√≠mbolo do gr√°fico, o indicador est√° anexado para
      name=_Symbol;</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2953
</p>
<pre><code class="language-mql5">
     }
//--- criar manipulador do indicador
   if(type==Call_iTriX)
      handle=iTriX(name,period,ma_period,applied_price);
   else
     {
      //--- preencher a estrutura com os par√¢metros do indicador
      MqlParam pars[2];
      //--- per√≠odo
      pars[0].type=TYPE_INT;
      pars[0].integer_value=ma_period;
      //--- tipo de pre√ßo
      pars[1].type=TYPE_INT;
      pars[1].integer_value=applied_price;      
      handle=IndicatorCreate(name,period,IND_TRIX,2,pars);
     }
//--- se o manipulador n√£o √© criado
   if(handle==INVALID_HANDLE)
     {
      //--- mensagem sobre a falha e a sa√≠da do c√≥digo de erro
      PrintFormat(&quot;Falha ao criar o manipulador do indicador iTriX para o s√≠mbolo %s/%
                  name,
                  EnumToString(period),
                  GetLastError());
      //--- o indicador √© interrompido precocemente
      return(INIT_FAILED);
     }
//--- mostra que o s√≠mbolo/prazo do indicador Triple Exponential Moving Averages Oscil
   short_name=StringFormat(&quot;iTriX(%s/%s, %d, %s)&quot;,name,EnumToString(period),
                          ma_period,EnumToString(applied_price));
   IndicatorSetString(INDICATOR_SHORTNAME,short_name);
//--- inicializa√ß√£o normal do indicador  
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &amp;time[],
                const double &amp;open[],
                const double &amp;high[],
                const double &amp;low[],
                const double &amp;close[],
                const long &amp;tick_volume[],
                const long &amp;volume[],
                const int &amp;spread[])
  {
//--- n√∫mero de valores copiados a partir do indicador iTriX</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2954
</p>
<pre><code class="language-mql5">
   int values_to_copy;
//--- determinar o n√∫mero de valores calculados no indicador
   int calculated=BarsCalculated(handle);
   if(calculated&lt;=0)
     {
      PrintFormat(&quot;BarsCalculated() retornando %d, c√≥digo de erro %d&quot;,calculated,GetLa
      return(0);
     }
//--- se for o princ√≠pio do c√°lculo do indicador, ou se o n√∫mero de valores √© modifica
//--- ou se √© necess√°rio c√°lculo do indicador para duas ou mais barras (isso significa
   if(prev_calculated==0 || calculated!=bars_calculated || rates_total&gt;prev_calculated
     {
      //--- se o array iTriXBuffer √© maior do que o n√∫mero de valores no indicador iTr
      //--- caso contr√°rio, copiamos menor do que o tamanho dos buffers do indicador
      if(calculated&gt;rates_total) values_to_copy=rates_total;
      else                       values_to_copy=calculated;
     }
   else
     {
      //--- isso significa que n√£o √© a primeira vez do c√°lculo do indicador, √© desde a
      //--- para o c√°lculo n√£o mais do que uma barra √© adicionada
      values_to_copy=(rates_total-prev_calculated)+1;
     }
//--- preencher o array com valores do indicador Triple Exponential Moving Averages Os
//--- se FillArrayFromBuffer retorna falso, significa que a informa√ß√£o n√£o est√° pronta
   if(!FillArrayFromBuffer(iTriXBuffer,handle,values_to_copy)) return(0);
//--- formar a mensagem
   string comm=StringFormat(&quot;%s ==&gt;  Valor atualizado no indicador %s: %d&quot;,
                            TimeToString(TimeCurrent(),TIME_DATE|TIME_SECONDS),
                            short_name,
                            values_to_copy);
//--- exibir a mensagem de servi√ßo no gr√°fico
   Comment(comm);
//--- memorizar o n√∫mero de valores no indicador Triple Exponential Moving Averages Os
   bars_calculated=calculated;
//--- retorna o valor prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Preencher buffers do indicador a partir do indicador iTriX       |
//+------------------------------------------------------------------+
bool FillArrayFromBuffer(double &amp;trix_buffer[], // buffer do indicator para valores do
                         int ind_handle,        // manipulador do indicador iTriX
                         int amount             // n√∫mero de valores copiados
                         )
  {
//--- redefinir o c√≥digo de erro
   ResetLastError();
//--- preencher uma parte do array iTriXBuffer com valores do buffer do indicador que </p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2955
</p>
<pre><code class="language-mql5">
   if(CopyBuffer(ind_handle,0,0,amount,trix_buffer)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iTriX, c√≥digo de erro %d&quot;,GetLas
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- est√° tudo bem
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de desinicializa√ß√£o do indicador                          |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   if(handle!=INVALID_HANDLE)
      IndicatorRelease(handle);
//--- limpar o gr√°fico ap√≥s excluir o indicador
   Comment(&quot;&quot;);
</code></pre>
<p>
  }  </p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2956
iWPR
A fun√ß√£o retorna o manipulador do indicador Larry Williams&#x27; Percent Range. Tem apenas um buffer.
</p>
<pre><code class="language-mql5">
int¬† iWPR(
   string¬†          symbol,¬†         // s√≠mbolo nome
   ENUM_TIMEFRAMES¬† period,¬†         // per√≠odo
   int¬†             calc_period¬†     // per√≠odo m√©dio
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in] O nome do s√≠mbolo de seguran√ßa, os dados que devem ser usados para calcular o indicador. O
valor NULL significa o s√≠mbolo atual.
period
[in] O valor do per√≠odo pode ser um dos valores ENUM_TIMEFRAMES, 0 (zero) significa o prazo
corrente.
calc_period
[in]  Per√≠odo (barras contadas) para c√°lculo do indicador.
<h3>Valor de retorno</h3>
Retorna o manipulador de um indicador t√©cnico especifico, em caso de falha de retorna
INVALID_HANDLE. A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √©
mais utilizado, usando a fun√ß√£o IndicatorRelease(), onde o manipulador de indicador √© transmitido.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                                    Demo_iWPR.mq5 |
//|                        Copyright 2011, MetaQuotes Software Corp. |
//|                                            ;https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;
#property description &quot;O indicador demonstra como obter dados&quot;
#property description &quot;de buffers do indicador para o indicador t√©cnico iWPR.&quot;
#property description &quot;Um s√≠mbolo e o prazo utilizado para o c√°lculo do indicador,&quot;
#property description &quot;s√£o definidos pelos par√¢metros de s√≠mbolo e per√≠odo.&quot;
#property description &quot;O m√©todo de cria√ß√£o do manipulador √© definido atrav√©s do par√¢me
#property indicator_separate_window
#property indicator_buffers 1
#property indicator_plots   1
//--- plotar iWPR
#property indicator_label1  &quot;iWPR&quot;
#property indicator_type1   DRAW_LINE
#property indicator_color1  clrCyan</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2957
</p>
<pre><code class="language-mql5">
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1
//--- definir o limite dos valores do indicador
#property indicator_minimum -100
#property indicator_maximum 0
//--- n√≠veis horizontais na janela de indicador
#property indicator_level1  -20.0
#property indicator_level2  -80.0
//+------------------------------------------------------------------+
//| Enumerador dos m√©todos de cria√ß√£o do manipulador¬†                |
//+------------------------------------------------------------------+
enum Creation
  {
   Call_iWPR,              // usar iWPR
   Call_IndicatorCreate    // usar IndicatorCreate
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//--- par√¢metros de entrada
input Creation             type=Call_iWPR;            // tipo de fun√ß√£o
input int                  calc_period=14;            // per√≠odo
input string               symbol=&quot; &quot;;                // s√≠mbolo
input ENUM_TIMEFRAMES      period=PERIOD_CURRENT;     // timeframe
//--- buffer do indicador
double         iWPRBuffer[];
//--- vari√°vel para armazenar o manipulador do indicator iWPR
int    handle;
//--- vari√°vel para armazenamento
string name=symbol;
//--- nome do indicador num gr√°fico
string short_name;
//--- manteremos o n√∫mero de valores no indicador Larry Williams&#x27; Percent Range
int    bars_calculated=0;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- atribui√ß√£o de array para buffer do indicador
   SetIndexBuffer(0,iWPRBuffer,INDICATOR_DATA);
//--- determinar o s√≠mbolo do indicador, √© desenhado para
   name=symbol;
//--- excluir os espa√ßos √† direita e √† esquerda
   StringTrimRight(name);
   StringTrimLeft(name);
//--- se resulta em comprimento zero da string do &#x27;name&#x27;
   if(StringLen(name)==0)
     {
      //--- tomar o s√≠mbolo do gr√°fico, o indicador est√° anexado para
      name=_Symbol;
     }</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2958
</p>
<pre><code class="language-mql5">
//--- criar manipulador do indicador
   if(type==Call_iWPR)
      handle=iWPR(name,period,calc_period);
   else
     {
      //--- preencher a estrutura com os par√¢metros do indicador
      MqlParam pars[1];
      //--- per√≠odo
      pars[0].type=TYPE_INT;
      pars[0].integer_value=calc_period;
      handle=IndicatorCreate(name,period,IND_WPR,1,pars);
     }
//--- se o manipulador n√£o √© criado
   if(handle==INVALID_HANDLE)
     {
      //--- mensagem sobre a falha e a sa√≠da do c√≥digo de erro
      PrintFormat(&quot;Falha ao criar o manipulador do indicador iWPR para o s√≠mbolo %s/%s
                  name,
                  EnumToString(period),
                  GetLastError());
      //--- o indicador √© interrompido precocemente
      return(INIT_FAILED);
     }
//--- mostra que o s√≠mbolo/prazo do indicador Williams&#x27; Percent Range √© calculado para
   short_name=StringFormat(&quot;iWPR(%s/%s, %d)&quot;,name,EnumToString(period),calc_period);
   IndicatorSetString(INDICATOR_SHORTNAME,short_name);
//--- inicializa√ß√£o normal do indicador
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &amp;time[],
                const double &amp;open[],
                const double &amp;high[],
                const double &amp;low[],
                const double &amp;close[],
                const long &amp;tick_volume[],
                const long &amp;volume[],
                const int &amp;spread[])
  {
//--- n√∫mero de valores copiados a partir do indicador iWPR
   int values_to_copy;
//--- determinar o n√∫mero de valores calculados no indicador
   int calculated=BarsCalculated(handle);
   if(calculated&lt;=0)
     {</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2959
</p>
<pre><code class="language-mql5">
      PrintFormat(&quot;BarsCalculated() retornando %d, c√≥digo de erro %d&quot;,calculated,GetLa
      return(0);
     }
//--- se for o princ√≠pio do c√°lculo do indicador, ou se o n√∫mero de valores √© modifica
//--- ou se √© necess√°rio c√°lculo do indicador para duas ou mais barras (isso significa
   if(prev_calculated==0 || calculated!=bars_calculated || rates_total&gt;prev_calculated
     {
      //--- se o array iWPRBuffer √© maior do que o n√∫mero de valores no indicador iWPR
      //--- caso contr√°rio, copiamos menor do que o tamanho dos buffers do indicador
      if(calculated&gt;rates_total) values_to_copy=rates_total;
      else                       values_to_copy=calculated;
     }
   else
     {
      //--- isso significa que n√£o √© a primeira vez do c√°lculo do indicador, √© desde a
      //--- para o c√°lculo n√£o mais do que uma barra √© adicionada
      values_to_copy=(rates_total-prev_calculated)+1;
     }
//--- preencher o array com valores do indicador Williams&#x27; Percent Range
//--- se FillArrayFromBuffer retorna falso, significa que a informa√ß√£o n√£o est√° pronta
   if(!FillArrayFromBuffer(iWPRBuffer,handle,values_to_copy)) return(0);
//--- formar a mensagem
   string comm=StringFormat(&quot;%s ==&gt;  Valor atualizado no indicador %s: %d&quot;,
                            TimeToString(TimeCurrent(),TIME_DATE|TIME_SECONDS),
                            short_name,
                            values_to_copy);
//--- exibir a mensagem de servi√ßo no gr√°fico
   Comment(comm);
//--- memorizar o n√∫mero de valores no indicador Larry Williams&#x27; Percent Range
   bars_calculated=calculated;
//--- retorna o valor prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Preencher buffers do indicador a partir do indicador iWPR        |
//+------------------------------------------------------------------+
bool FillArrayFromBuffer(double &amp;wpr_buffer[],  // buffer do indicator para valores do
                         int ind_handle,        // manipulador do indicador iWPR
                         int amount             // n√∫mero de valores copiados
                         )
  {
//--- redefinir o c√≥digo de erro
   ResetLastError();
//--- preencher uma parte do array iWPRBuffer com valores do buffer do indicador que t
   if(CopyBuffer(ind_handle,0,0,amount,wpr_buffer)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iWPR, c√≥digo de erro %d&quot;,GetLast
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o </p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2960
</p>
<pre><code class="language-mql5">
      return(false);
     }
//--- est√° tudo bem
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de desinicializa√ß√£o do indicador                          |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   if(handle!=INVALID_HANDLE)
      IndicatorRelease(handle);
//--- limpar o gr√°fico ap√≥s excluir o indicador
   Comment(&quot;&quot;);
</code></pre>
<p>
  }</p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2961
iVIDyA
A fun√ß√£o retorna o manipulador do indicador Variable Index Dynamic Average. Tem apenas um buffer.
</p>
<pre><code class="language-mql5">
int¬† iVIDyA(
   string¬†             symbol,¬†           // s√≠mbolo nome
   ENUM_TIMEFRAMES¬†    period,¬†           // per√≠odo
   int¬†                cmo_period,¬†       // per√≠odo para indicador Chande Momentum
   int¬†                ema_period,¬†       // per√≠odo suavizado do indicador EMA
   int¬†                ma_shift,¬†         // deslocamento horizontal no gr√°fico
   ENUM_APPLIED_PRICE¬† applied_price¬†     // tipo de pre√ßo ou manipulador
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in] O nome do s√≠mbolo de seguran√ßa, os dados que devem ser usados para calcular o indicador. O
valor NULL significa o s√≠mbolo atual.
period
[in] O valor do per√≠odo pode ser um dos valores ENUM_TIMEFRAMES, 0 (zero) significa o prazo
corrente.
cmo_period
[in]  Per√≠odo (barras contadas) para c√°lculo do indicador Chande Momentum Oscillator.
ema_period
[in]   Per√≠odo do indicador EMA (barras contadas) para c√°lculo do fator de suaviza√ß√£o.
ma_shift
[in]  Deslocamento do indicador relativo ao gr√°fico de pre√ßos.
applied_price
[in]  O pre√ßo usado. Pode ser qualquer das constantes de pre√ßos ENUM_APPLIED_PRICE ou um
manipulador de outro indicador.
<h3>Valor de retorno</h3>
Retorna o manipulador de um indicador t√©cnico especifico, em caso de falha de retorna
INVALID_HANDLE. A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √©
mais utilizado, usando a fun√ß√£o IndicatorRelease(), onde o manipulador de indicador √© transmitido.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                                  Demo_iVIDyA.mq5 |
//|                        Copyright 2011, MetaQuotes Software Corp. |
//|                                            ;https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2962
</p>
<pre><code class="language-mql5">
#property description &quot;O indicador demonstra como obter dados&quot;
#property description &quot;de buffers do indicador para o indicador t√©cnico iVIDyA.&quot;
#property description &quot;Um s√≠mbolo e o prazo utilizado para o c√°lculo do indicador,&quot;
#property description &quot;s√£o definidos pelos par√¢metros de s√≠mbolo e per√≠odo.&quot;
#property description &quot;O m√©todo de cria√ß√£o do manipulador √© definido atrav√©s do par√¢me
#property description &quot;Todos os outros par√¢metros s√£o similares ao padr√£o Variable Ind
#property indicator_chart_window
#property indicator_buffers 1
#property indicator_plots   1
//--- plotar iVIDyA
#property indicator_label1  &quot;iVIDyA&quot;
#property indicator_type1   DRAW_LINE
#property indicator_color1  clrBlue
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1
//+------------------------------------------------------------------+
//| Enumerador dos m√©todos de cria√ß√£o do manipulador¬†                |
//+------------------------------------------------------------------+
enum Creation
  {
   Call_iVIDyA,            // usar iVIDyA
   Call_IndicatorCreate    // usar IndicatorCreate
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//--- par√¢metros de entrada
input Creation             type=Call_iVIDyA;          // tipo de fun√ß√£o
input int                  cmo_period=15;             // o per√≠odo do indicador Chande
input int                  ema_period=12;             // per√≠odo do fator de suaviza√ß√£
input int                  ma_shift=0;                // deslocamento
input ENUM_APPLIED_PRICE   applied_price=PRICE_CLOSE; // tipo de pre√ßo
input string               symbol=&quot; &quot;;                // s√≠mbolo
input ENUM_TIMEFRAMES      period=PERIOD_CURRENT;     // timeframe
//--- buffer do indicador
double         iVIDyABuffer[];
//--- vari√°vel para armazenar o manipulador do indicator iVIDyA
int    handle;
//--- vari√°vel para armazenamento
string name=symbol;
//--- nome do indicador num gr√°fico
string short_name;
//--- manteremos o n√∫mero de valores no indicador Variable Index Dynamic Average
int    bars_calculated=0;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- atribui√ß√£o de array para buffer do indicador
   SetIndexBuffer(0,iVIDyABuffer,INDICATOR_DATA);</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2963
</p>
<pre><code class="language-mql5">
//--- definir deslocamento
   PlotIndexSetInteger(0,PLOT_SHIFT,ma_shift);
//--- determinar o s√≠mbolo do indicador, √© desenhado para
   name=symbol;
//--- excluir os espa√ßos √† direita e √† esquerda
   StringTrimRight(name);
   StringTrimLeft(name);
//--- se resulta em comprimento zero da string do &#x27;name&#x27;
   if(StringLen(name)==0)
     {
      //--- tomar o s√≠mbolo do gr√°fico, o indicador est√° anexado para
      name=_Symbol;
     }
//--- criar manipulador do indicador
   if(type==Call_iVIDyA)
      handle=iVIDyA(name,period,cmo_period,ema_period,ma_shift,applied_price);
   else
     {
      //--- preencher a estrutura com os par√¢metros do indicador
      MqlParam pars[4];
      //--- o per√≠odo do indicador Chande Momentum
      pars[0].type=TYPE_INT;
      pars[0].integer_value=cmo_period;
      //--- per√≠odo do fator de suaviza√ß√£o
      pars[1].type=TYPE_INT;
      pars[1].integer_value=ema_period;
      //--- deslocamento
      pars[2].type=TYPE_INT;
      pars[2].integer_value=ma_shift;
      //--- tipo de pre√ßo
      pars[3].type=TYPE_INT;
      pars[3].integer_value=applied_price;
      handle=IndicatorCreate(name,period,IND_VIDYA,4,pars);
     }
//--- se o manipulador n√£o √© criado
   if(handle==INVALID_HANDLE)
     {
      //--- mensagem sobre a falha e a sa√≠da do c√≥digo de erro
      PrintFormat(&quot;Falha ao criar o manipulador do indicador iVIDyA para o s√≠mbolo %s/
                  name,
                  EnumToString(period),
                  GetLastError());
      //--- o indicador √© interrompido precocemente
      return(INIT_FAILED);
     }
//--- mostra que o s√≠mbolo/prazo do indicador Variable Index Dynamic Average √© calcula
   short_name=StringFormat(&quot;iVIDyA(%s/%s, %d, %d, %d, %s)&quot;,name,EnumToString(period),
                           cmo_period,ema_period,ma_shift,EnumToString(applied_price))
   IndicatorSetString(INDICATOR_SHORTNAME,short_name);</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2964
</p>
<pre><code class="language-mql5">
//--- inicializa√ß√£o normal do indicador  
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &amp;time[],
                const double &amp;open[],
                const double &amp;high[],
                const double &amp;low[],
                const double &amp;close[],
                const long &amp;tick_volume[],
                const long &amp;volume[],
                const int &amp;spread[])
  {
//--- n√∫mero de valores copiados a partir do indicador iVIDyA
   int values_to_copy;
//--- determinar o n√∫mero de valores calculados no indicador
   int calculated=BarsCalculated(handle);
   if(calculated&lt;=0)
     {
      PrintFormat(&quot;BarsCalculated() retornando %d, c√≥digo de erro %d&quot;,calculated,GetLa
      return(0);
     }
//--- se for o princ√≠pio do c√°lculo do indicador, ou se o n√∫mero de valores √© modifica
//--- ou se √© necess√°rio c√°lculo do indicador para duas ou mais barras (isso significa
   if(prev_calculated==0 || calculated!=bars_calculated || rates_total&gt;prev_calculated
     {
      //--- se o array iVIDyABuffer √© maior do que o n√∫mero de valores no indicador iV
      //--- caso contr√°rio, copiamos menor do que o tamanho dos buffers do indicador
      if(calculated&gt;rates_total) values_to_copy=rates_total;
      else                       values_to_copy=calculated;
     }
   else
     {
      //--- isso significa que n√£o √© a primeira vez do c√°lculo do indicador, √© desde a
      //--- para o c√°lculo n√£o mais do que uma barra √© adicionada
      values_to_copy=(rates_total-prev_calculated)+1;
     }
//--- preencher o array com valores do indicador Variable Index Dynamic Average
//--- se FillArrayFromBuffer retorna falso, significa que a informa√ß√£o n√£o est√° pronta
   if(!FillArrayFromBuffer(iVIDyABuffer,ma_shift,handle,values_to_copy)) return(0);
//--- formar a mensagem
   string comm=StringFormat(&quot;%s ==&gt;  Valor atualizado no indicador %s: %d&quot;,
                            TimeToString(TimeCurrent(),TIME_DATE|TIME_SECONDS),
                            short_name,
                            values_to_copy);</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2965
</p>
<pre><code class="language-mql5">
//--- exibir a mensagem de servi√ßo no gr√°fico
   Comment(comm);
//--- memorizar o n√∫mero de valores no indicador Variable Index Dynamic Average
   bars_calculated=calculated;
//--- retorna o valor prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Preencher buffers do indicador a partir do indicador iVIDyA      |
//+------------------------------------------------------------------+
bool FillArrayFromBuffer(double &amp;vidya_buffer[],// buffer do indicator para valores do
                         int v_shift,           // deslocamento da linha
                         int ind_handle,        // manipulador do indicador iVIDyA
                         int amount             // n√∫mero de valores copiados
                         )
  {
//--- redefinir o c√≥digo de erro
   ResetLastError();
//--- preencher uma parte do array iVIDyABuffer com valores do buffer do indicador que
   if(CopyBuffer(ind_handle,0,-v_shift,amount,vidya_buffer)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iVIDyA, c√≥digo de erro %d&quot;,GetLa
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- est√° tudo bem
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de desinicializa√ß√£o do indicador                          |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   if(handle!=INVALID_HANDLE)
      IndicatorRelease(handle);
//--- limpar o gr√°fico ap√≥s excluir o indicador
   Comment(&quot;&quot;);
</code></pre>
<p>
  }</p>
<p><h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2966
iVolumes
A fun√ß√£o retorna o manipulador do indicador. Tem apenas um buffer.
</p>
<pre><code class="language-mql5">
int¬† iVolumes(
   string¬†              symbol,¬†            // s√≠mbolo nome
   ENUM_TIMEFRAMES¬†     period,¬†            // per√≠odo
   ENUM_APPLIED_VOLUME¬† applied_volume¬†     // tipo de volume para o c√°lculo
   )
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in] O nome do s√≠mbolo de seguran√ßa, os dados que devem ser usados para calcular o indicador. O
valor NULL significa o s√≠mbolo atual.
period
[in] O valor do per√≠odo pode ser um dos valores ENUM_TIMEFRAMES, 0 (zero) significa o prazo
corrente.
applied_volume
[in]   O volume utilizado. Pode ser um dos valores ENUM_APPLIED_VOLUME.
<h3>Valor de retorno</h3>
Retorna o manipulador de um indicador t√©cnico especifico, em caso de falha de retorna
INVALID_HANDLE. A mem√≥ria do computador pode ser liberada a partir de um indicador que n√£o √©
mais utilizado, usando a fun√ß√£o IndicatorRelease(), onde o manipulador de indicador √© transmitido.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                                Demo_iVolumes.mq5 |
//|                        Copyright 2011, MetaQuotes Software Corp. |
//|                                            ;https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;
#property description &quot;O indicador demonstra como obter dados&quot;
#property description &quot;de buffers do indicador para o indicador t√©cnico iVolumes.&quot;
#property description &quot;Um s√≠mbolo e o prazo utilizado para o c√°lculo do indicador,&quot;
#property description &quot;s√£o definidos pelos par√¢metros de s√≠mbolo e per√≠odo.&quot;
#property description &quot;O m√©todo de cria√ß√£o do manipulador √© definido atrav√©s do par√¢me
#property indicator_separate_window
#property indicator_buffers 2
#property indicator_plots   1
//--- plotar iVolumes
#property indicator_label1  &quot;iVolumes&quot;
#property indicator_type1   DRAW_COLOR_HISTOGRAM
#property indicator_color1  clrGreen, clrRed</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2967
</p>
<pre><code class="language-mql5">
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1
//+------------------------------------------------------------------+
//| Enumerador dos m√©todos de cria√ß√£o do manipulador¬†                |
//+------------------------------------------------------------------+
enum Creation
  {
   Call_iVolumes,          // usar iVolumes
   Call_IndicatorCreate    // usar IndicatorCreate
</code></pre>
<p>
  };
</p>
<pre><code class="language-mql5">
//--- par√¢metros de entrada
input Creation             type=Call_iVolumes;           // tipo de fun√ß√£o
input ENUM_APPLIED_VOLUME  applied_volume=VOLUME_TICK;   // tipo de volume
input string               symbol=&quot; &quot;;                   // s√≠mbolo
input ENUM_TIMEFRAMES      period=PERIOD_CURRENT;        // timeframe
//--- buffers do indicador
double         iVolumesBuffer[];
double         iVolumesColors[];
//--- vari√°vel para armazenar o manipulador do indicator iVolumes
int    handle;
//--- vari√°vel para armazenamento
string name=symbol;
//--- nome do indicador num gr√°fico
string short_name;
//--- manteremos o n√∫mero de valores no indicador Volumes
int    bars_calculated=0;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- atribui√ß√£o de array para buffer do indicador
   SetIndexBuffer(0,iVolumesBuffer,INDICATOR_DATA);
   SetIndexBuffer(1,iVolumesColors,INDICATOR_COLOR_INDEX);
//--- determinar o s√≠mbolo do indicador, √© desenhado para
   name=symbol;
//--- excluir os espa√ßos √† direita e √† esquerda
   StringTrimRight(name);
   StringTrimLeft(name);
//--- se resulta em comprimento zero da string do &#x27;name&#x27;
   if(StringLen(name)==0)
     {
      //--- tomar o s√≠mbolo do gr√°fico, o indicador est√° anexado para
      name=_Symbol;
     }
//--- criar manipulador do indicador
   if(type==Call_iVolumes)
      handle=iVolumes(name,period,applied_volume);
   else</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2968
</p>
<pre><code class="language-mql5">
     {
      //--- preencher a estrutura com os par√¢metros do indicador
      MqlParam pars[1];
      //--- tipo de pre√ßo
      pars[0].type=TYPE_INT;
      pars[0].integer_value=applied_volume;
      handle=IndicatorCreate(name,period,IND_VOLUMES,1,pars);
     }
//--- se o manipulador n√£o √© criado
   if(handle==INVALID_HANDLE)
     {
      //--- mensagem sobre a falha e a sa√≠da do c√≥digo de erro
      PrintFormat(&quot;Falha ao criar o manipulador do indicador iVolumes para o s√≠mbolo %
                  name,
                  EnumToString(period),
                  GetLastError());
      //--- o indicador √© interrompido precocemente
      return(INIT_FAILED);
     }
//--- mostra que o s√≠mbolo/prazo do indicador Volumes √© calculado para
   short_name=StringFormat(&quot;iVolumes(%s/%s, %s)&quot;,name,EnumToString(period),EnumToStrin
   IndicatorSetString(INDICATOR_SHORTNAME,short_name);
//--- inicializa√ß√£o normal do indicador  
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &amp;time[],
                const double &amp;open[],
                const double &amp;high[],
                const double &amp;low[],
                const double &amp;close[],
                const long &amp;tick_volume[],
                const long &amp;volume[],
                const int &amp;spread[])
  {
//--- n√∫mero de valores copiados a partir do indicador
   int values_to_copy;
//--- determinar o n√∫mero de valores calculados no indicador
   int calculated=BarsCalculated(handle);
   if(calculated&lt;=0)
     {
      PrintFormat(&quot;BarsCalculated() retornando %d, c√≥digo de erro %d&quot;,calculated,GetLa
      return(0);
     }
//--- se for o princ√≠pio do c√°lculo do indicador, ou se o n√∫mero de valores √© modifica</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2969
</p>
<pre><code class="language-mql5">
//--- ou se √© necess√°rio c√°lculo do indicador para duas ou mais barras (isso significa
   if(prev_calculated==0 || calculated!=bars_calculated || rates_total&gt;prev_calculated
     {
      //--- se o array iVolumesBuffer √© maior do que o n√∫mero de valores no indicador 
      //--- caso contr√°rio, copiamos menor do que o tamanho dos buffers do indicador
      if(calculated&gt;rates_total) values_to_copy=rates_total;
      else                       values_to_copy=calculated;
     }
   else
     {
      //--- isso significa que n√£o √© a primeira vez do c√°lculo do indicador, √© desde a
      //--- para o c√°lculo n√£o mais do que uma barra √© adicionada
      values_to_copy=(rates_total-prev_calculated)+1;
     }
//--- preencher os arrays com valores do indicador iVolumes
//--- se FillArraysFromBuffer retorna falso, isto significa que a informa√ß√£o ainda n√£o
   if(!FillArraysFromBuffers(iVolumesBuffer,iVolumesColors,handle,values_to_copy)) ret
//--- formar a mensagem
   string comm=StringFormat(&quot;%s ==&gt;  Valor atualizado no indicador %s: %d&quot;,
                            TimeToString(TimeCurrent(),TIME_DATE|TIME_SECONDS),
                            short_name,
                            values_to_copy);
//--- exibir a mensagem de servi√ßo no gr√°fico
   Comment(comm);
//--- memorizar o n√∫mero de valores no indicador Volumes
   bars_calculated=calculated;
//--- retorna o valor prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Preencher buffers do indicador a partir do indicador iVolumes    |
//+------------------------------------------------------------------+
bool FillArraysFromBuffers(double &amp;volume_buffer[],   // buffer do indicator para valo
                           double &amp;color_buffer[],    // buffer do indicator de cores
                           int ind_handle,            // manipulador do indicador iVol
                           int amount                 // n√∫mero dos valores copiados
                           )
  {
//--- redefinir o c√≥digo de erro
   ResetLastError();
//--- preencher uma parte do array iVolumesBuffer com valores do buffer do indicador q
   if(CopyBuffer(ind_handle,0,0,amount,volume_buffer)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iVolumes, c√≥digo de erro %d&quot;,Get
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- preencher uma parte do array iVolumesColors com valores do buffer do indicador q</p>
<p></code></pre>
<p>
<h3>Indicadores T√©cnicos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2970
</p>
<pre><code class="language-mql5">
   if(CopyBuffer(ind_handle,1,0,amount,color_buffer)&lt;0)
     {
      //--- Se a c√≥pia falhar, informe o c√≥digo de erro
      PrintFormat(&quot;Falha ao copiar dados do indicador iVolumes, c√≥digo de erro %d&quot;,Get
      //--- parar com resultado zero - significa que indicador √© considerado como n√£o 
      return(false);
     }
//--- est√° tudo bem
   return(true);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de desinicializa√ß√£o do indicador                          |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   if(handle!=INVALID_HANDLE)
      IndicatorRelease(handle);
//--- limpar o gr√°fico ap√≥s excluir o indicador
   Comment(&quot;&quot;);
</code></pre>
<p>
  }  
</p>
        </article>
        
        <footer>
            <p>Documenta√ß√£o MQL5 - Fonte: MetaQuotes Ltd.</p>
        </footer>
    </main>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        hljs.highlightAll();
        
        function toggleSidebar() {
            document.querySelector('.sidebar').classList.toggle('open');
        }
        
        function filterNav() {
            const filter = document.getElementById('search').value.toLowerCase();
            const items = document.querySelectorAll('.nav-list li');
            items.forEach(item => {
                const text = item.textContent.toLowerCase();
                item.style.display = text.includes(filter) ? '' : 'none';
            });
        }
    </script>
</body>
</html>