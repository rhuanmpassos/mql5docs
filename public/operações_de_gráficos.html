<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Opera√ß√µes de Gr√°ficos - MQL5 Docs</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
</head>
<body>
    <nav class="sidebar">
        <div class="logo">
            <h1>MQL5 Docs</h1>
            <p>Documenta√ß√£o Completa</p>
        </div>
        <div class="search-box">
            <input type="text" id="search" placeholder="Buscar..." onkeyup="filterNav()">
        </div>
        <ul class="nav-list" id="nav-list">
            <li class=""><a href="index.html">üìö √çndice</a></li>
            <li class=""><a href="introducao.html">Introducao</a></li>
<li class=""><a href="refer√™ncia_mql5.html">Refer√™ncia MQL5</a></li>
<li class=""><a href="elementos_b√°sicos_da_linguagem.html">Elementos B√°sicos da Linguagem</a></li>
<li class=""><a href="constantes,_enumeradores_e_estruturas.html">Constantes, Enumeradores e Estruturas</a></li>
<li class=""><a href="programas_mql5.html">Programas MQL5</a></li>
<li class=""><a href="vari√°veis_predefinidas.html">Vari√°veis Predefinidas</a></li>
<li class=""><a href="fun√ß√µes_comuns.html">Fun√ß√µes Comuns</a></li>
<li class=""><a href="fun√ß√µes_para_array.html">Fun√ß√µes para Array</a></li>
<li class=""><a href="m√©todos_matriciais_e_vetoriais.html">M√©todos matriciais e vetoriais</a></li>
<li class=""><a href="fun√ß√µes_de_convers√£o.html">Fun√ß√µes de Convers√£o</a></li>
<li class=""><a href="fun√ß√µes_matem√°ticas.html">Fun√ß√µes Matem√°ticas</a></li>
<li class=""><a href="fun√ß√µes_de_string.html">Fun√ß√µes de String</a></li>
<li class=""><a href="data_e_hora.html">Data e Hora</a></li>
<li class=""><a href="informa√ß√µes_de_conta.html">Informa√ß√µes de Conta</a></li>
<li class=""><a href="verificando_estado.html">Verificando Estado</a></li>
<li class=""><a href="manipula√ß√£o_de_eventos.html">Manipula√ß√£o de eventos</a></li>
<li class=""><a href="informa√ß√µes_de_mercado.html">Informa√ß√µes de Mercado</a></li>
<li class=""><a href="calend√°rio_econ√¥mico.html">Calend√°rio econ√¥mico</a></li>
<li class=""><a href="s√©ries_temporais_e_acesso_a_indicadores.html">S√©ries Temporais e Acesso a Indicadores</a></li>
<li class=""><a href="s√≠mbolos_personalizados.html">S√≠mbolos personalizados</a></li>
<li class="active"><a href="opera√ß√µes_de_gr√°ficos.html">Opera√ß√µes de Gr√°ficos</a></li>
<li class=""><a href="fun√ß√µes_de_negocia√ß√£o.html">Fun√ß√µes de Negocia√ß√£o</a></li>
<li class=""><a href="gerenciamento_de_sinais.html">Gerenciamento de sinais</a></li>
<li class=""><a href="fun√ß√µes_de_rede.html">Fun√ß√µes de rede</a></li>
<li class=""><a href="vari√°veis_globais_do_terminal.html">Vari√°veis Globais do Terminal</a></li>
<li class=""><a href="fun√ß√µes_de_arquivo.html">Fun√ß√µes de Arquivo</a></li>
<li class=""><a href="indicadores_customizados.html">Indicadores Customizados</a></li>
<li class=""><a href="fun√ß√µes_de_objeto.html">Fun√ß√µes de Objeto</a></li>
<li class=""><a href="indicadores_t√©cnicos.html">Indicadores T√©cnicos</a></li>
<li class=""><a href="trabalhando_com_resultados_de_otimiza√ß√£o.html">Trabalhando com Resultados de Otimiza√ß√£o</a></li>
<li class=""><a href="trabalhando_com_eventos.html">Trabalhando com Eventos</a></li>
<li class=""><a href="trabalhando_com_opencl.html">Trabalhando com OpenCL</a></li>
<li class=""><a href="trabalhar_com_bancos_de_dados.html">Trabalhar com bancos de dados</a></li>
<li class=""><a href="trabalho_com_directx.html">Trabalho com DirectX</a></li>
<li class=""><a href="metatrader_para_python.html">MetaTrader para Python</a></li>
<li class=""><a href="modelos_onnx.html">Modelos ONNX</a></li>
<li class=""><a href="biblioteca_padr√£o.html">Biblioteca Padr√£o</a></li>
<li class=""><a href="migrando_do_mql4.html">Migrando do MQL4</a></li>
<li class=""><a href="lista_de_fun√ß√µes_mql5.html">Lista de Fun√ß√µes MQL5</a></li>
<li class=""><a href="lista_de_constantes_mql5.html">Lista de Constantes MQL5</a></li>

        </ul>
    </nav>
    
    <main class="content">
        <header>
            <button class="menu-toggle" onclick="toggleSidebar()">‚ò∞</button>
            <h1>Opera√ß√µes de Gr√°ficos</h1>
        </header>
        
        <article>
            <p><h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2217
<h3>Opera√ß√µes de Gr√°ficos</h3>
As fun√ß√µes para definir as propriedades do gr√°fico (ChartSetInteger, ChartSetDouble e ChartSetString)
s√£o ass√≠ncronas e servem para o envio de altera√ß√µes para o gr√°fico. Quando essas fun√ß√µes s√£o
executadas com sucesso, o comando entra na fila geral de eventos do gr√°fico. A altera√ß√£o das
propriedades do gr√°fico √© feita durante o processamento da fila de eventos de dado gr√°fico. 
Por esse motivo, voc√™ n√£o deve esperar uma atualiza√ß√£o imediata do gr√°fico, ap√≥s chamar fun√ß√µes
ass√≠ncronas. Para for√ßar a atualiza√ß√£o de apar√™ncia e propriedades do gr√°fico, use a fun√ß√£o
ChartRedraw().
<h3>Fun√ß√£o</h3>
<h3>A√ß√£o</h3>
<h3>ChartApplyTemplate</h3>
Aplica o modelo espec√≠fico de um arquivo especificado para o gr√°fico
<h3>ChartSaveTemplate</h3>
Salva as configura√ß√µes atuais do gr√°fico em um modelo com um
nome especificado
<h3>ChartWindowFind</h3>
Retorna o n√∫mero de uma sub-janela onde um indicador √© plotado
<h3>ChartTimePriceToXY</h3>
Converte as coordenadas do gr√°fico a partir da representa√ß√£o
tempo/pre√ßo para as coordenadas X e Y
<h3>ChartXYToTimePrice</h3>
Converte as coordenadas X e Y no gr√°fico para os valores de tempo e
pre√ßo
<h3>ChartOpen</h3>
Abre um novo gr√°fico com o s√≠mbolo e per√≠odo especificados
<h3>ChartClose</h3>
<h3>Fecha um gr√°fico especificado</h3>
<h3>ChartFirst</h3>
Retorna o ID do primeiro gr√°fico do terminal do cliente
<h3>ChartNext</h3>
Retorna o ID do gr√°fico do pr√≥ximo gr√°fico para um especificado
<h3>ChartSymbol</h3>
Retorna o nome do s√≠mbolo do gr√°fico especificado
<h3>ChartPeriod</h3>
Retorna o valor do per√≠odo do gr√°fico especificado
<h3>ChartRedraw</h3>
Chama um redesenho for√ßado de um gr√°fico especificado
<h3>ChartSetDouble</h3>
Define o valor duplo para uma propriedade correspondente do gr√°fico
especificado
<h3>ChartSetInteger</h3>
Define um valor inteiro (datetime, int, color, bool ou char) para uma
propriedade correspondente do gr√°fico especificado
<h3>ChartSetString</h3>
Define o valor da sequ√™ncia para uma propriedade do gr√°fico
especificado
<h3>ChartGetDouble</h3>
Retorna a propriedade de valor duplo do gr√°fico especificado
<h3>ChartGetInteger</h3>
Retorna a propriedade de valor inteiro do gr√°fico especificado
<h3>ChartGetString</h3>
Retorna a propriedade de valor da sequ√™ncia do gr√°fico especificado
<h3>ChartNavigate</h3>
<h3>Executa</h3>
deslocamento 
do 
gr√°fico 
especificado 
no 
n√∫mero
especificado de barras em rela√ß√£o √† posi√ß√£o definida no gr√°fico</p>
<p><h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2218
<h3>Fun√ß√£o</h3>
<h3>A√ß√£o</h3>
<h3>ChartID</h3>
<h3>Retorna o ID do gr√°fico atual</h3>
<h3>ChartIndicatorAdd</h3>
Adiciona um indicador com o identificador definido a uma janela do
gr√°fico especificado
<h3>ChartIndicatorDelete</h3>
Remove um indicador com um nome definido a partir de janela do
gr√°fico especificado
<h3>ChartIndicatorGet</h3>
Retorna o manuseio do indicador com nome abreviado definido na
janela do gr√°fico especificado
<h3>ChartIndicatorName</h3>
Retorna o nome abreviado do indicador pelo n√∫mero na lista de
indicadores sobre a janela do gr√°fico especificado
<h3>ChartIndicatorsTotal</h3>
Retorna o n√∫mero total de indicadores utilizados para a janela do
gr√°fico especificado
<h3>ChartWindowOnDropped</h3>
Retorna o n√∫mero (√≠ndice) da sub-janela do gr√°fico, o Expert Advisor
ou o script foi solto pelo mouse
<h3>ChartPriceOnDropped</h3>
Retorna a coordenada de pre√ßo do ponto do gr√°fico em que o Expert
Advisor ou o script foi solto pelo mouse
<h3>ChartTimeOnDropped</h3>
Retorna a coordenada de tempo do ponto do gr√°fico em que o Expert
Advisor ou Script foi solto pelo mouse
<h3>ChartXOnDropped</h3>
Retorna a coordenada X do ponto do gr√°fico em que o Expert Advisor
ou script foi solto
<h3>ChartYOnDropped</h3>
Retorna a coordenada Y do ponto do gr√°fico em que o Expert Advisor
ou script foi solto
<h3>ChartSetSymbolPeriod</h3>
Modifica o valor do s√≠mbolo e um per√≠odo do gr√°fico especificado
<h3>ChartScreenShot</h3>
Fornece uma captura de tela do gr√°fico de seu estado atual em
formato GIF, PNG ou BMP, dependendo da extens√£o especificada</p>
<p><h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2219
<h3>ChartApplyTemplate</h3>
Aplica-se um modelo espec√≠fico de um arquivo especificado para o gr√°fico. O comando √© adicionado
para plotar uma fila de mensagens de gr√°fico e ser√° executado ap√≥s o processamento de todos os
comandos anteriores. 
</p>
<pre><code class="language-mql5">
bool¬† ChartApplyTemplate(
   long¬†         chart_id,     // ID Gr√°fico
   const string¬† filename¬†     // Nome Arquivo Modelo (Template)
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
chart_id
[in]  ID Gr√°fico. Significa o gr√°fico atual.
filename
[in]  O nome do arquivo contendo o modelo.
<h3>Valor do Retorno</h3>
Retorna verdadeiro se o comando foi adicionado √† fila do gr√°fico, caso contr√°rio ser√° falso. Para
obter uma informa√ß√£o sobre o erro, chamar a fun√ß√£o GetLastError().
<h3>Observa√ß√£o</h3>
O Assessor Especialista (Expert Advisor) ser√° descarregado e n√£o poder√° ser capaz de continuar
operando em caso de carregamento bem sucedido de um novo modelo de gr√°fico que estiver
anexado.
Ao aplicar o modelo ao gr√°fico, permiss√µes de negocia√ß√£o podem ser limitadas devido a raz√µes de
seguran√ßa:
A permiss√£o de negocia√ß√£o ao vivo n√£o pode ser estendida para os Expert Advisors
lan√ßados aplicando o modelo usando a fun√ß√£o ChartApplyTemplate().
Se o programa mql5 chamar a fun√ß√£o ChartApplyTemplate() n√£o possuir permiss√£o para negociar, o
Expert Advisor lan√ßado atrav√©s do modelo tamb√©m n√£o ser√° capaz de negociar, independentemente
das configura√ß√µes do modelo.
Se o programa mql5 chamar a fun√ß√£o ChartApplyTemplate() possuir permiss√£o para negociar,
enquanto n√£o h√° tal permiss√£o nas configura√ß√µes do modelo, o Expert Advisor lan√ßado atrav√©s do
modelo n√£o ser√° capaz de negociar.
<h3>Usando Modelos (Templates)</h3>
Os recursos da linguagem MQL5 permitem a configura√ß√£o de propriedades de m√∫ltiplos gr√°ficos,
incluindo cores usando a fun√ß√£o ChartSetInteger():
¬∑ Cor do fundo do gr√°fico;
¬∑ Cor dos eixos, escala e da linha OHLC;
¬∑ Cor da grade;
¬∑ Cor de volumes e n√≠veis de posi√ß√µes abertas;</p>
<p><h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2220
¬∑ Cor da barra de alta, sombra e borda da barra de alta (tamb√©m denominado como casti√ßal ou vela de
alta);
¬∑ Cor da barra de baixa, sombra e borda da barra de baixa (tamb√©m denominado como casti√ßal ou
vela de baixa);
¬∑ Cor da linha do gr√°fico e barra Doji (tamb√©m denominado como casti√ßal ou vela Doji);
¬∑ Cor do corpo da barra de alta (tamb√©m denominado como casti√ßal ou vela de alta);
¬∑ Cor do corpo da barra de baixa (tamb√©m denominado como casti√ßal ou vela de baixa);
¬∑ Cor da linha do pre√ßo de compra;
¬∑ Cor da linha do pre√ßo de venda;
¬∑ Cor da linha do √∫ltimo acordo de pre√ßo (Last);
¬∑ Cor dos n√≠veis das ordens de paradas, Parar Perda e Tomar Lucro (Stop Loss e Take Profit).
Al√©m disso, pode haver m√∫ltiplos  objetos gr√°ficos e  indicadores sobre um gr√°fico. Voc√™ pode
configurar um gr√°fico com todos os indicadores necess√°rios uma √∫nica vez e salvar como um modelo
(template). Este modelo salvo poder√° ser aplicado em qualquer gr√°fico. 
A fun√ß√£o ChartApplyTemplate() √© destinada ao uso de um modelo (template) salvo previamente, e
pode ser usada em qualquer programa MQL5. O caminho para o arquivo que armazena o modelo
(template) √© passado como o segundo par√¢metro para o ChartApplyTemplate(). O arquivo do modelo
(template) √© procurado de acordo com as seguintes regras:
¬∑ se a barra invertida &quot;\&quot; separador (escrito como &quot;\\&quot;) √© colocada no in√≠cio do percurso, o modelo
(template) √© procurado em rela√ß√£o ao caminho _terminal_dados_diret√≥rio\ MQL5 (path
_terminal_data_directory\MQL5);
¬∑ se n√£o existir uma barra invertida, o modelo √© procurado em rela√ß√£o ao arquivo execut√°vel EX5, em
que √© chamado o ChartApplyTemplate();
¬∑ se um modelo n√£o √© encontrado nas duas primeiras variantes, a pesquisa √© executada na pasta
terminal_diretorio\Profiles\Templates\.
Aqui o terminal_directory √© a pasta onde o Terminal do Cliente MetaTrader 5 est√° sendo executado, e
o terminal_dados_diret√≥rio (terminal_data_directory) √© a pasta em que os arquivos edit√°veis s√£o
armazenados, a sua localiza√ß√£o depende do sistema operacional,nome do usu√°rio e as configura√ß√µes
de seguran√ßa do computador. Normalmente, eles s√£o pastas diferentes, mas em alguns casos, eles
podem coincidir.
A localiza√ß√£o das pastas terminal_data_directory e terminal_directory pode ser obtida utilizando a
fun√ß√£o TerminalInfoString().
</p>
<pre><code class="language-mql5">
//--- diret√≥rio de onde o terminal √© iniciado
   string terminal_path=TerminalInfoString(TERMINAL_PATH);
   Print(&quot;Terminal diret√≥rio:&quot;,terminal_path);
//--- terminal dados diret√≥rio, em que a pasta MQL5 com os EAs e indicadores est√£o loc
   string terminal_data_path=TerminalInfoString(TERMINAL_DATA_PATH);
   Print(&quot;Terminal dados diret√≥rio:&quot;,terminal_data_path);
</code></pre>
<p>
<h3>Por exemplo:</h3>
</p>
<pre><code class="language-mql5">
//--- busca de um modelo (template) no terminal_dados_diret√≥rio\MQL5\
</code></pre>
<p>
<h3>ChartApplyTemplate(0,&quot;\\primeiro_modelo.tpl&quot;))</h3>
</p>
<pre><code class="language-mql5">
//--- busca de um modelo em diret√≥rio_de_EX5_arquivo\, em seguida a pasta terminal_dad
</code></pre>
<p>
<h3>ChartApplyTemplate(0,&quot;segundo_modelo.tpl&quot;))</h3></p>
<p><h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2221
</p>
<pre><code class="language-mql5">
//--- busca de um modelo em diret√≥rio_de_EX5_arquivo\My_templates\, em seguida a pasta
</code></pre>
<p>
ChartApplyTemplate(0,&quot;My_templates\\terceiro_modelo.tpl&quot;))
Os modelos n√£o s√£o recursos, eles n√£o podem ser inclu√≠dos em um arquivo execut√°vel EX5.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de in√≠cio do programa script                              |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- Exemplo de aplica√ß√£o do modelo, localizado em \MQL5\Files
   if(FileIsExist(&quot;my_template.tpl&quot;))
     {
      Print(&quot;O arquivo my_template.tpl foi encontrado em \Files&#x27;&quot;);
      //--- Aplicar modelo
      if(ChartApplyTemplate(0,&quot;\\Files\\my_template.tpl&quot;))
        {
         Print(&quot;O modelo &#x27;my_template.tpl&#x27; foi aplicado com sucesso&quot;);
         //--- redesenhar gr√°fico
         ChartRedraw();
        }
      else
         Print(&quot;Falha ao aplicar&#x27;my_template.tpl&#x27;, c√≥digo de erro &quot;,GetLastError());
     }
   else
     {
      Print(&quot;Arquivo &#x27;my_template.tpl&#x27; n√£o encontrado em&quot;
            +TerminalInfoString(TERMINAL_PATH)+&quot;\\MQL5\\Files&quot;);
     }
</code></pre>
<p>
  }
<h3>Tamb√©m Veja</h3>
<h3>Recursos</h3></p>
<p><h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2222
<h3>ChartSaveTemplate</h3>
Salva as configura√ß√µes atuais do gr√°fico em um template (modelo) com um nome especificado.
</p>
<pre><code class="language-mql5">
bool¬† ChartSaveTemplate(
   long¬†         chart_id,     // ID Gr√°fico
   const string¬† filename¬†     // Nome do arquivo para salvar o template (modelo)
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
chart_id
[in]  ID Gr√°fico. Significa o gr√°fico atual.
filename
[in]  O nome do arquivo para salvar o template (modelo). A extens√£o &quot;.tpl&quot; ser√° adicionada
automaticamente no arquivo, onde n√£o √© preciso especific√°-lo. O template (modelo) √© salvo no
terminal_directory\Profiles\Templates\ e pode ser utilizado para a aplica√ß√£o manual no terminal.
Se j√° existir um template (modelo) com o mesmo nome de arquivo, os conte√∫dos deste arquivo
ser√£o substitu√≠dos.
<h3>Valor do Retorno</h3>
Se bem sucedida, a fun√ß√£o retorna true, caso contr√°rio ela retorna false. Para obter informa√ß√£o
sobre o erro, chamar a fun√ß√£o GetLastError().
<h3>Observa√ß√£o</h3>
Usando templates (modelos), voc√™ pode salvar as configura√ß√µes de gr√°fico com todos os indicadores
e objetos gr√°ficos aplicados, para depois aplic√°-los em outro gr√°fico.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                       Test_ChartSaveTemplate.mq5 |
//|                         Copyright 2000-2024, MetaQuotes Ltd. |
//|                                              https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;
#property script_show_inputs
//--- par√¢metros de entrada
input string               symbol=&quot;GBPUSD&quot;;  // O s√≠mbolo do novo gr√°fico
input ENUM_TIMEFRAMES      period=PERIOD_H3; // O prazo do novo gr√°fico
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- Primeiros indicadores anexados ao gr√°fico
   int handle;</p>
<p></code></pre>
<p>
<h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2223
</p>
<pre><code class="language-mql5">
//--- Preparar indicador para uso
   if(!PrepareZigzag(NULL,0,handle)) return; // Falhou, sair
//--- Anexar o indicador ao atual gr√°fico, mas em janela separada.
   if(!ChartIndicatorAdd(0,1,handle))
     {
      PrintFormat(&quot;Falha para anexar no gr√°fico %s/%s um indicador com o handle=%d. C√≥
                  _Symbol,
                  EnumToString(_Period),
                  handle,
                  GetLastError());
      //--- Finalizar a opera√ß√£o do programa
      return;
     }
//--- Atualizar o gr√°fico para ver o indicator
   ChartRedraw();
//--- Encontre as duas √∫ltimas fracturas do zigzag
   double two_values[];
   datetime two_times[];
   if(!GetLastTwoFractures(two_values,two_times,handle))
     {
      PrintFormat(&quot;Falha para localizar duas √∫ltimas fracturas no ZigZag!&quot;);
      //--- Finalizar a opera√ß√£o do programa
      return;
     }
//--- Anexar agora um canal de desvio padr√£o
   string channel=&quot;StdDeviation Channel&quot;;
   if(!ObjectCreate(0,channel,OBJ_STDDEVCHANNEL,0,two_times[1],0))
     {
      PrintFormat(&quot;Falha ao criar objeto %s. C√≥digo de erro %d&quot;,
                  EnumToString(OBJ_STDDEVCHANNEL),GetLastError());
      return;
     }
   else
     {
      //--- O canal foi criado, definir o segundo ponto
      ObjectSetInteger(0,channel,OBJPROP_TIME,1,two_times[0]);
      //--- Define uma dica de contexto (tooltip) para o canal
      ObjectSetString(0,channel,OBJPROP_TOOLTIP,&quot;Demonstra√ß√£o no ajuda MQL5&quot;);
      //--- Atualizar o gr√°fico
      ChartRedraw();
     }
//--- Salve o resultado em um template (modelo)
   ChartSaveTemplate(0,&quot;StdDevChannelOnZigzag&quot;);
//--- Abrir um novo gr√°fico e aplicar um modelo salvo a ele
   long new_chart=ChartOpen(symbol,period);
   //--- Habilitar uma dica de contexto (tootips) para objetos gr√°ficos
   ChartSetInteger(new_chart,CHART_SHOW_OBJECT_DESCR,true);
   if(new_chart!=0)
     {</p>
<p></code></pre>
<p>
<h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2224
</p>
<pre><code class="language-mql5">
      //--- Aplicar uma template (modelo) salvo para o gr√°fico
      ChartApplyTemplate(new_chart,&quot;StdDevChannelOnZigzag&quot;);
     }
   Sleep(10000);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Cria um manipulador ziguezague e garante disponibilidade de seus dados|
//+------------------------------------------------------------------+
bool PrepareZigzag(string sym,ENUM_TIMEFRAMES tf,int &amp;h)
  {
   ResetLastError();
//--- O indicador de ziguezague deve estar localizado em terminal_data_folder\MQL5\Exa
   h=iCustom(sym,tf,&quot;Examples\\Zigzag&quot;);
   if(h==INVALID_HANDLE)
     {
      PrintFormat(&quot;%s: Falha ao criar manipulador do indicador Zigzag. C√≥digo de erro 
                  __FUNCTION__,GetLastError());
      return false;
     }
//--- Quando √© criado um manipulador de indicador, requer tempo para calcular valores
   int k=0; // O n√∫mero de tentativas de espera para o c√°lculo de indicadores
//--- Aguarda at√© que o c√°lculo fa√ßa um loop (volta completa), pausando por 50 milisse
   while(BarsCalculated(h)&lt;=0)
     {
      k++;
      //--- Mostrar o n√∫mero de tentativas
      PrintFormat(&quot;%s: k=%d&quot;,__FUNCTION__,k);
      //--- Espera 50 milissegundos at√© que o indicador seja calculado
      Sleep(50);
      //--- Se mais de 100 tentativas, ent√£o algo est√° errado
      if(k&gt;100)
        {
         //--- Reportar um problema
         PrintFormat(&quot;Falha ao calcular o indicador para %d tentativas!&quot;);
         //--- Terminar a opera√ß√£o do programa
         return false;
        }
     }
//--- Tudo est√° pronto, o indicador √© criado e os valores s√£o calculados
   return true;
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|Busca para as √∫ltimas duas fracturas de zigzag e lugar para arrays|
//+------------------------------------------------------------------+
bool GetLastTwoFractures(double &amp;get_values[],datetime &amp;get_times[],int handle)
  {
   double values[];         // Uma array para os valores de ziguezague
   datetime times[];        // Uma array para obter tempo
   int size=100;            // Tamanho da array</p>
<p></code></pre>
<p>
<h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2225
</p>
<pre><code class="language-mql5">
   ResetLastError();
//--- Copiar os √∫ltimos 100 valores do indicador
   int copied=CopyBuffer(handle,0,0,size,values);
//--- Conferir o n√∫mero de valores copiados
   if(copied&lt;100)
     {
      PrintFormat(&quot;%s: Falha para copiar valores %d do indicador com o handle=%d. C√≥di
                  __FUNCTION__,size,handle,GetLastError());
      return false;
     }
//--- Definir a ordem de acesso para a array como um tempo de series (timeseries)
   ArraySetAsSeries(values,true);
//--- Escreva aqui o n√∫mero de baras, em que foram encontradas fracturas
   int positions[];
//--- Definir tamanhos de array
   ArrayResize(get_values,3); ArrayResize(get_times,3); ArrayResize(positions,3);
//--- Contadores
   int i=0,k=0;
//--- Comece a procurar por fracturas
   while(i&lt;100)
     {
      double v=values[i];
      //--- N√≥s n√£o estamos interessados em valores vazios
      if(v!=0.0)
        {
         //--- Relembra o n√∫mero de barras
         positions[k]=i;
         //--- Relembra o valor do zigzag sobre a fractura
         get_values[k]=values[i];
         PrintFormat(&quot;%s: Zigzag[%d]=%G&quot;,__FUNCTION__,i,values[i]);
         //--- Aumentar o contador
         k++;
         //--- Se duas fraturas encontrados, quebrar o loop (ciclo)
         if(k&gt;2) break;
        }
      i++;
     }
//--- Definir a ordem de acesso √†s arrays como nas s√©ries de tempo (timeseries)
   ArraySetAsSeries(times,true);   ArraySetAsSeries(get_times,true);
   if(CopyTime(_Symbol,_Period,0,size,times)&lt;=0)
     {
      PrintFormat(&quot;%s: Falha ao copiar valores %d a partir CopyTime(). C√≥digo de erro 
                  __FUNCTION__,size,GetLastError());
      return false;
     }
//--- Abra o tempo da abertura da barra, que ocorreu nas duas √∫ltias fracturas
   get_times[0]=times[positions[1]];// O √∫ltimo, mas um valor ser√° escrito como a prim
   get_times[1]=times[positions[2]];// O valor em terceiro lugar, a partir do final se
   PrintFormat(&quot;%s: primeiro=%s,  segundo=%s&quot;,__FUNCTION__,TimeToString(get_times[1]),</p>
<p></code></pre>
<p>
<h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2226
</p>
<pre><code class="language-mql5">
//--- Bem sucedido
   return true;
</code></pre>
<p>
  }
<h3>Tamb√©m Veja</h3>
<h3>ChartApplyTemplate(), Recursos</h3></p>
<p><h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2227
<h3>ChartWindowFind</h3>
A fun√ß√£o retorna o n√∫mero para uma sub-janela quando um indicador √© desenhado. Existem 2
variantes da fun√ß√£o.
1. As pesquisas de fun√ß√£o no gr√°fico indicado para a sub-janela especificado com o &quot;nome abreviado&quot;
do indicador (o nome abreviado √© exibida na parte superior esquerda da sub-janela), e retorna o
n√∫mero da sub-janela em caso de sucesso.
</p>
<pre><code class="language-mql5">
int¬† ChartWindowFind(
   long¬†    chart_id,¬†                 // identificar gr√°fico
   string¬†  indicator_shortname        // nome abreviado do indicador, veja INDICATOR_
</code></pre>
<p>
2. A fun√ß√£o deve ser chamado a partir de um indicador personalizado. Retorna o n√∫mero de uma sub-
janela onde um indicador est√° funcionando.
</p>
<pre><code class="language-mql5">
int¬† ChartWindowFind();
</code></pre>
<p>
<h3>Par√¢metros</h3>
chart_id
[in]  ID Gr√°fico. 0 (zero) indica a sub-janela gr√°fico principal.
indicator_shortname
[in]  Nome abreviado do indicador.
<h3>Valor do Retorno</h3>
N√∫mero da sub-janela em caso de sucesso. Em caso de falha a fun√ß√£o retorna -1.
<h3>Observa√ß√£o</h3>
Se a segunda variante da fun√ß√£o (sem par√¢metros) √© chamado de um script ou Expert Advisor, a
fun√ß√£o retorna -1.
N√£o confundir o nome abreviado de um indicador e um nome de arquivo, que √© especificado quando
o indicador √© criado usando as fun√ß√µes iCustom() e IndicatorCreate(). Se o nome abreviado de um
indicador n√£o √© definido de forma explicita, ent√£o o nome do arquivo contendo o c√≥digo-fonte do
indicador ser√° especificado durante a compila√ß√£o. 
√â importante para formar corretamente o nome abreviado de um indicador, que √© registrado na
propriedade INDICATOR_SHORTNAME usando a fun√ß√£o IndicatorSetString(). √â recomendado que o
nome abreviado deve conter valores de todos os par√¢metros de entrada do indicador, porque sendo
o indicador exclu√≠do do gr√°fico pela fun√ß√£o ChartIndicatorDelete(), ele √© identificado pelo nome
abreviado.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
#property script_show_inputs
//--- par√¢metros de entrada
input string   shortname=&quot;MACD(12,26,9)&quot;;
//+------------------------------------------------------------------+
//| Retorna o m√∫mero da janela do gr√°fico com este indicador         |
//+------------------------------------------------------------------+</p>
<p></code></pre>
<p>
<h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2228
</p>
<pre><code class="language-mql5">
int GetIndicatorSubWindowNumber(long chartID=0,string short_name=&quot;&quot;)
  {
   int window=-1;
//--- 
   if((ENUM_PROGRAM_TYPE)MQL5InfoInteger(MQL5_PROGRAM_TYPE)==PROGRAM_INDICATOR)
     {
      //--- a fun√ß√£o √© chamada a partir do indicador, o nome n√£o √© necess√°rio
      window=ChartWindowFind();
     }
   else
     {
      //--- a fun√ß√£o √© chamada a partir de um Expert Advisor ou script
      window=ChartWindowFind(0,short_name);
      if(window==-1) Print(__FUNCTION__+&quot;(): Erro = &quot;,GetLastError());
     }
//---
   return(window);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//---
   int window=GetIndicatorSubWindowNumber(0,shortname);
   if(window!=-1)
      Print(&quot;Indicador &quot;+shortname+&quot; est√° na janela #&quot;+(string)window);
   else
      Print(&quot;Indicador &quot;+shortname+&quot; n√£o foi encontrado. window = &quot;+(string)window);
</code></pre>
<p>
  }
<h3>Tamb√©m Veja</h3>
<h3>ObjectCreate(), ObjectFind()</h3></p>
<p><h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2229
<h3>ChartTimePriceToXY</h3>
Converte as coordenadas do gr√°fico a partir da representa√ß√£o tempo/pre√ßo para as coordenadas X e Y.
</p>
<pre><code class="language-mql5">
bool¬† ChartTimePriceToXY(
   long¬†          chart_id,¬†    // ID Gr√°fico
   int¬†           sub_window,   // O n√∫mero de sub-janelas
   datetime¬†      time, ¬†       // Tempo do gr√°fico
   double¬†        price, ¬†      // Pre√ßo no gr√°fico
   int&amp;¬†          x, ¬†          // A coordenada X para o tempo no gr√°fico
   int&amp;¬†          y  ¬†          // A coordenada Y para o tempo no gr√°fico
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
chart_id
[in]  ID Gr√°fico. Representa o gr√°fico atual.
sub_window
[in]  O numero da sub-janela do gr√°fico. 0 (zero) significa a principal janela do gr√°fico.
time
[in]  O valor do tempo do gr√°fico, valores em pixels para o qual vai ser recebido ao longo do eixo
X. A origem est√° no canto superior esquerdo da principal janela do gr√°fico.
price
[in]   O valor do pre√ßo no gr√°fico, valores em pixels para o qual vai ser recebido ao longo do eixo
Y. A origem est√° no canto superior esquerdo da principal janela do gr√°fico.
x
[out]  A vari√°vel, dentro do qual a convers√£o do tempo para X ser√° recebida.
y
[out]  A vari√°vel, dentro do qual a convers√£o do pre√ßo para Y ser√° recebida.
<h3>Valor retornado</h3>
Retorna true se bem sucedido, caso contr√°rio false. Para obter informa√ß√£o sobre o erro, chamamos
a fun√ß√£o GetLastError().
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
#define   BAR_NUMBER    0  // n√∫mero da barra a partir da qual obtemos o pre√ßo e a hor
//+------------------------------------------------------------------+
//| Script program start function                                    |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- copiamos os dados de uma barra segundo o √≠ndice BAR_NUMBER
   MqlRates rates[]={};
   if(CopyRates(_Symbol, _Period, BAR_NUMBER, 1, rates)!=1)</p>
<p></code></pre>
<p>
<h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2230
</p>
<pre><code class="language-mql5">
     {
      PrintFormat(&quot;CopyRates() failed for bar %d. Error %d&quot;, BAR_NUMBER, GetLastError
      return;
     }
       
//--- converte os valores de pre√ßo e tempo em coordenadas de pixels para o gr√°fico
   int x=0, y=0;
   ResetLastError();
   if(!ChartTimePriceToXY(ChartID(), 0, rates[0].time, rates[0].close, x, y))
     {
      Print(&quot;ChartTimePriceToXY() failed. Error &quot;, GetLastError());
      return;
     }
     
//--- imprimimos no log resultado
   PrintFormat(&quot;For bar[%d] with opening time %s and price %.*f, the chart coordinates
   
   /*
   Resultado:
   For bar[0] with opening time 2024.08.09 15:06 and price 1.27378, the chart coordina
   */
</code></pre>
<p>
  }
<h3>Tamb√©m Veja</h3>
<h3>ChartXYToTimePrice()</h3></p>
<p><h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2231
<h3>ChartXYToTimePrice</h3>
Converte as coordenadas X e Y no gr√°fico para os valores de tempo e pre√ßo.
</p>
<pre><code class="language-mql5">
bool¬† ChartXYToTimePrice(
   long¬†          chart_id,¬†    // ID Gr√°fico
   int ¬†          x, ¬†          // A coordenada X no Gr√°fico
   int¬†           y, ¬†          // A coordenada Y no Gr√°fico
   int&amp;¬†          sub_window,   // O numero da sub-janela
   datetime&amp;      time, ¬†       // Tempo no gr√°fico
   double&amp;¬†       price  ¬†      // Pre√ßo no gr√°fico
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
chart_id
[in]  ID Gr√°fico. Significa o gr√°fico atual.
x
[in]  A coordenada X.
y
[in]  A coordenada Y.
sub_window
[out]  A vari√°vel, em que o n√∫mero de sub-janela gr√°fico ser√° escrito. 0 (zero) significa a principal
janela do gr√°fico.
time
[out]  O valor do tempo do gr√°fico, valores em pixels para o qual vai ser recebido ao longo do eixo
X. A origem est√° no canto superior esquerdo da principal janela do gr√°fico.
price
[out]  O valor do pre√ßo no gr√°fico, valores em pixels para o qual vai ser recebido ao longo do eixo
Y. A origem est√° no canto superior esquerdo da principal janela do gr√°fico.
<h3>Valor do Retorno</h3>
Retorna true se bem sucedido, caso contr√°rio false. Para obter informa√ß√£o sobre o erro, chamar a
fun√ß√£o GetLastError().
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o ChartEvent                                                |
//+------------------------------------------------------------------+
void OnChartEvent(const int id,
                  const long &amp;lparam,
                  const double &amp;dparam,
                  const string &amp;sparam)
  {
//--- Mostra os par√¢metros do evento no gr√°fico</p>
<p></code></pre>
<p>
<h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2232
</p>
<pre><code class="language-mql5">
   Comment(__FUNCTION__,&quot;: id=&quot;,id,&quot; lparam=&quot;,lparam,&quot; dparam=&quot;,dparam,&quot; sparam=&quot;,spar
//--- Se este √© um evento de um mouse clicando no gr√°fico
   if(id==CHARTEVENT_CLICK)
     {
      //--- Preparar vari√°veis
      int      x     =(int)lparam;
      int      y     =(int)dparam;
      datetime dt    =0;
      double   price =0;
      int      window=0;
      //--- Converter as coordenadas X e Y em termos de data/hora
      if(ChartXYToTimePrice(0,x,y,window,dt,price))
        {
         PrintFormat(&quot;Janela=%d X=%d  Y=%d  =&gt;  Tempo=%s  Pre√ßo=%G&quot;,window,x,y,TimeToS
         //--- Executar a convers√£o inversa: (X,Y) =&gt; (Tempo,Pre√ßo)
         if(ChartTimePriceToXY(0,window,dt,price,x,y))
            PrintFormat(&quot;Tempo=%s  Pre√ßo=%G  =&gt;  X=%d  Y=%d&quot;,TimeToString(dt),price,x,
         else
            Print(&quot;ChartTimePriceToXY c√≥digo de erro de retorno: &quot;,GetLastError());
         //--- delete lines
         ObjectDelete(0,&quot;V Line&quot;);
         ObjectDelete(0,&quot;H Line&quot;);
         //--- create horizontal and vertical lines of the crosshair
         ObjectCreate(0,&quot;H Line&quot;,OBJ_HLINE,window,dt,price);
         ObjectCreate(0,&quot;V Line&quot;,OBJ_VLINE,window,dt,price);
         ChartRedraw(0);
        }
      else
         Print(&quot;ChartXYToTimePrice c√≥digo de erro de retorno: &quot;,GetLastError());
      Print(&quot;+--------------------------------------------------------------+&quot;);
     }
</code></pre>
<p>
  }
<h3>Tamb√©m Veja</h3>
<h3>ChartTimePriceToXY()</h3></p>
<p><h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2233
<h3>ChartOpen</h3>
Abre um novo gr√°fico com o s√≠mbolo e per√≠odo especificado.
long¬† ChartOpen(
</p>
<pre><code class="language-mql5">
   string¬†          symbol,¬†    // Nome Simbolo
   ENUM_TIMEFRAMES¬† period¬†     // Per√≠odo
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
symbol
[in]  Simbolo do gr√°fico. NULL significa o s√≠mbolo do gr√°fico de corrente (Expert Advisor √©
anexado).
period
[in]  Per√≠odo do Gr√°fico (Prazo). Pode ser um dos valores de ENUM_TIMEFRAMES. 0 (zero) significa
o per√≠odo do atual gr√°fico.
<h3>Valor retornado</h3>
Se com sucesso, retorna √† abertura do ID gr√°fico. Caso contr√°rio, retorna 0(zero).
<h3>Observa√ß√£o</h3>
O n√∫mero m√°ximo poss√≠vel de cartas abertas simultaneamente no terminal n√£o pode exceder o valor
CHARTS_MAX.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
#define CHART_SYMBOL  NULL
#define CHART_PERIOD  PERIOD_CURRENT
//+------------------------------------------------------------------+
//| Script program start function                                    |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- definimos o s√≠mbolo e o per√≠odo de tempo para o novo gr√°fico
   string symbol=CHART_SYMBOL;
   if(symbol==NULL)
      symbol=Symbol();
   ENUM_TIMEFRAMES timeframe = (CHART_PERIOD==PERIOD_CURRENT ? Period() : CHART_PERIOD
   
//--- abrimos um novo gr√°fico com o s√≠mbolo e o per√≠odo especificados
   long chart_id=ChartOpen(symbol, timeframe);
   if(chart_id==0)
     {
      Print(&quot;ChartOpen() failed. Error &quot;, GetLastError());
      return;
     }</p>
<p></code></pre>
<p>
<h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2234
</p>
<pre><code class="language-mql5">
//--- imprimimos no log os par√¢metros do gr√°fico aberto
   PrintFormat(&quot;A new chart of the %s symbol has been opened with a period of %s and C
               symbol, StringSubstr(EnumToString(timeframe), 7), chart_id);
   /*
¬†  resultado:
   A new chart of the GBPUSD symbol has been opened with a period of M1 and ChartID 13
   */
</code></pre>
<p>
  }</p>
<p><h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2235
<h3>ChartFirst</h3>
Retorna o ID do primeiro gr√°fico do terminal de cliente.
long¬† ChartFirst();
<h3>Valor retornado</h3>
ID Gr√°fico.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Script program start function                                    |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- obtemos o identificador do primeiro gr√°fico aberto no terminal do cliente
   long            chart_id= ChartFirst();
   
//--- mediante o identificador recebido, obtemos adicionalmente o s√≠mbolo e o per√≠odo 
   string          symbol  = ChartSymbol(chart_id);
   ENUM_TIMEFRAMES period  = ChartPeriod(chart_id);
   
//--- registramos no log a descri√ß√£o do primeiro gr√°fico do terminal do cliente
   PrintFormat(&quot;ID of the first chart of the client terminal: %I64d, chart symbol: %s,
   /*
¬†  resultado
   ID of the first chart of the client terminal: 133246248352168440, chart symbol: EUR
   */
</code></pre>
<p>
  }</p>
<p><h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2236
<h3>ChartNext</h3>
Retorna o ID do gr√°fico do pr√≥ximo gr√°fico para um especificado.
long¬† ChartNext(
</p>
<pre><code class="language-mql5">
   long¬† chart_id¬†     // ID gr√°fico
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
chart_id
[in]  ID Gr√°fico. 0 (zero) n√£o significa o quadro atual. 0 (zero) significa &quot;retornar o ID do primeiro
gr√°fico&quot;.
<h3>Valor do Retorno</h3>
ID Gr√°fico. Se este for o fim da lista de gr√°fico, ele retorna -1.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//--- vari√°veis ‚Äãpara ID gr√°fico 
   long currChart,prevChart=ChartFirst();
   int i=0,limit=100;
   Print(&quot;ChartFirst =&quot;,ChartSymbol(prevChart),&quot; ID =&quot;,prevChart);
   while(i&lt;limit)// Temos certamente n√£o mais do que 100 gr√°ficos abertos
     {
      currChart=ChartNext(prevChart); // Obter o ID do novo gr√°fico usando o ID gr√°fic
      if(currChart&lt;0) break;          // Ter atingido o fim da lista de gr√°fico
      Print(i,ChartSymbol(currChart),&quot; ID =&quot;,currChart);
      prevChart=currChart;// vamos salvar o ID do gr√°fico atual para o ChartNext()
      i++;// N√£o esque√ßa de aumentar o contador
     }</p>
<p></code></pre>
<p>
<h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2237
<h3>ChartClose</h3>
Fecha o gr√°fico especificado.
</p>
<pre><code class="language-mql5">
bool¬† ChartClose(
   long¬† chart_id=0¬†     // ID gr√°fico
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
chart_id=0
[in]  ID Gr√°fico. Representa o gr√°fico atual.
<h3>Valor retornado</h3>
Se com sucesso, retorna true, caso contr√°rio √© false.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Script program start function                                    |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- abrimos um novo gr√°fico com um s√≠mbolo e um per√≠odo como o gr√°fico atual
   long chart_id=ChartOpen(_Symbol, _Period);
   if(chart_id==0)
     {
      Print(&quot;ChartOpen() failed. Error &quot;, GetLastError());
      return;
     }
//--- imprimimos no log os par√¢metros do gr√°fico aberto
   PrintFormat(&quot;A new chart of the %s symbol has been opened with a period of %s and C
               _Symbol, StringSubstr(EnumToString(_Period), 7), chart_id);
//--- esperamos dois segundos e fechamos o gr√°fico rec√©m aberto
   PrintFormat(&quot;Waiting 3 seconds before closing a newly opened chart with ID %I64d ..
   Sleep(3000);
   ResetLastError();
   if(!ChartClose(chart_id))
     {
      Print(&quot;ChartClose() failed. Error &quot;, GetLastError());
      return;
     }
//--- imprimimos no log uma mensagem sobre o encerramento bem sucedido do programa
   PrintFormat(&quot;The chart with ID %I64d was successfully closed&quot;, chart_id);
   /*
¬†  resultado:
   A new chart of the GBPUSD symbol has been opened with a period of M1 and ChartID 13</p>
<p></code></pre>
<p>
<h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2238
</p>
<pre><code class="language-mql5">
   Waiting 3 seconds before closing a newly opened chart with ID 133346697706632016 ..
   The chart with ID 133346697706632016 was successfully closed
   */
</code></pre>
<p>
  }</p>
<p><h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2239
<h3>ChartSymbol</h3>
Retorna o nome do s√≠mbolo do gr√°fico especificado.
</p>
<pre><code class="language-mql5">
string¬† ChartSymbol(
   long¬† chart_id=0¬†     // ID gr√°fico
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
chart_id=0
[in]  ID Gr√°fico. Representa o gr√°fico atual.
<h3>Valor retornado</h3>
Se o gr√°fico n√£o existe, o resultado ser√° uma string (seq√º√™ncia) vazia.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Script program start function                                    |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- obtemos o s√≠mbolo do gr√°fico atual e enviamos o valor obtido para o log
   string chart_symbol = ChartSymbol();
   Print(&quot;Current chart symbol: &quot;, chart_symbol);
   
//--- pegamos o identificador de um gr√°fico existente (nesse caso, o atual)
   long chart_id=ChartID();
   chart_symbol=ChartSymbol(chart_id);
   PrintFormat(&quot;Chart symbol with ID %I64d: %s&quot;, chart_id, chart_symbol);
//--- definimos um identificador de gr√°fico aleat√≥rio quando um s√≠mbolo √© recebido
   chart_symbol = ChartSymbol(1234567890);
   if(chart_symbol==&quot;&quot;)
      Print(&quot;The chart with ID 1234567890 does not exist&quot;);
   else
      Print(&quot;Chart symbol with ID 1234567890: &quot;, chart_symbol);
   /*
   Resultado:
   Current chart symbol: GBPUSD
   Chart symbol with ID 132966427583395104: GBPUSD
   The chart with ID 1234567890 does not exist
   */
</code></pre>
<p>
  }
<h3>Tamb√©m Veja</h3>
<h3>ChartSetSymbolPeriod</h3></p>
<p><h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2240
<h3>ChartPeriod</h3>
Retorna o periodo do gr√°fico especificado.
<h3>ENUM_TIMEFRAMES¬† ChartPeriod(</h3>
</p>
<pre><code class="language-mql5">
   long¬† chart_id=0¬†     // ID gr√°fico
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
chart_id=0
[in]  ID Gr√°fico. Representa o gr√°fico atual.
<h3>Valor retornado</h3>
A fun√ß√£o retorna um valor ENUM_TIMEFRAMES. Se gr√°fico n√£o existir retorna 0 (zero).
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Script program start function                                    |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- obtemos o per√≠odo do gr√°fico atual e enviamos o valor obtido para o log
   ENUM_TIMEFRAMES period=ChartPeriod();
   Print(&quot;Current chart period: &quot;, EnumToString(period));
   
//--- recebemos o identificador do gr√°fico existente (nesse caso, o gr√°fico atual)
   long chart_id=ChartID();
   period=ChartPeriod(chart_id);
   PrintFormat(&quot;Chart period with ID %I64d: %s&quot;, chart_id, EnumToString(period));
   
//--- definimos um identificador aleat√≥rio para o gr√°fico
   period=ChartPeriod(1234567890);
   if(period==0)
      Print(&quot;The chart with ID 1234567890 does not exist&quot;);
   else
      Print(&quot;Chart period with ID 1234567890: &quot;, EnumToString(period));
   /*
   resultado:
   Current chart period: PERIOD_M15
   Chart period with ID 133510090240498505: PERIOD_M15
   The chart with ID 1234567890 does not exist
   */
</code></pre>
<p>
  }</p>
<p><h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2241
<h3>ChartRedraw</h3>
Chama o redesenho for√ßado do gr√°fico especificado.
</p>
<pre><code class="language-mql5">
void¬† ChartRedraw(
   long¬† chart_id=0¬†     // ID gr√°fico
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
chart_id=0
[in]  ID Gr√°fico. Representa o gr√°fico atual.
<h3>Observa√ß√£o</h3>
Normalmente √© utilizado ap√≥s mudar a propriedade do objeto.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
#define   WIDTH      50    // largura do ret√¢ngulo em barras
//+------------------------------------------------------------------+
//| Script program start function                                    |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- obtemos o identificador do gr√°fico atual e definimos o nome do objeto gr√°fico
   long   chart_id = ChartID();
   string obj_name = MQLInfoString(MQL_PROGRAM_NAME)+&quot;_RectLabel&quot;;
   
//--- obtemos duas coordenadas de tempo do ret√¢ngulo
   datetime time1  = iTime(_Symbol, _Period, WIDTH);
   datetime time2  = iTime(_Symbol, _Period, 0);
   if(time1==0 || time2==0)
     {
      Print(&quot;Error getting time &quot;, GetLastError());
      return;
     }
//--- obtemos os pre√ßos m√°ximo e m√≠nimo no intervalo da largura do ret√¢ngulo
   double price1 = HighestHigh(_Symbol, _Period, 0, WIDTH);
   double price2 = LowestLow(_Symbol, _Period, 0, WIDTH);
   if(price1==EMPTY_VALUE || price2==EMPTY_VALUE)
      return;
//--- criamos um objeto ret√¢ngulo
   Print(&quot;Create a wheat-colored rectangle&quot;);
   if(!ObjectCreate(chart_id, obj_name, OBJ_RECTANGLE, 0, time1, price1, time2, price2
     {
      Print(&quot;ObjectCreate() failed. Error &quot;, GetLastError());
      return;</p>
<p></code></pre>
<p>
<h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2242
</p>
<pre><code class="language-mql5">
     }
//--- preenchemos o ret√¢ngulo com a cor original
   ObjectSetInteger(chart_id, obj_name, OBJPROP_FILL, true);
   ObjectSetInteger(chart_id, obj_name, OBJPROP_BACK, true);
   ObjectSetInteger(chart_id, obj_name, OBJPROP_COLOR, clrWheat);
   ChartRedraw();
   
//--- aguardamos um segundo, preenchemos o ret√¢ngulo com a cor ‚ÄúDodgerBlue‚Äù e atualiza
   Sleep(1000);
   Print(&quot;Change color to DodgerBlue&quot;);
   ObjectSetInteger(chart_id, obj_name, OBJPROP_COLOR, clrDodgerBlue);
   ChartRedraw();
   
//--- aguardamos um segundo, preenchemos o ret√¢ngulo com a cor ‚ÄúDodgerBlue‚Äù e atualiza
   Sleep(1000);
   Print(&quot;Change color to LimeGreen&quot;);
   ObjectSetInteger(chart_id, obj_name, OBJPROP_COLOR, clrLimeGreen);
   ChartRedraw();
   
//--- aguardamos um segundo, preenchemos o ret√¢ngulo com a cor ‚ÄúOrangeRed‚Äù e atualizam
   Sleep(1000);
   Print(&quot;Change color to OrangeRed&quot;);
   ObjectSetInteger(chart_id, obj_name, OBJPROP_COLOR, clrOrangeRed);
   ChartRedraw();
   
//--- aguardamos um segundo, preenchemos o ret√¢ngulo com a cor ‚ÄúWheat‚Äù e atualizamos o
   Sleep(1000);
   Print(&quot;Reset color to original&quot;);
   ObjectSetInteger(chart_id, obj_name, OBJPROP_COLOR, clrWheat);
   ChartRedraw();
   
//--- ap√≥s tr√™s segundos, removemos o objeto do gr√°fico
   Sleep(3000);
   Print(&quot;Delete the rectangle&quot;);
   ObjectDelete(chart_id, obj_name);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Retorna o High m√°ximo no intervalo de barras especificado       |
//+------------------------------------------------------------------+
double HighestHigh(const string symbol, const ENUM_TIMEFRAMES timeframe, const uint st
  {
   ResetLastError();
   int index=iHighest(symbol, timeframe, MODE_HIGH, count, start);
   if(index==-1)
     {
      PrintFormat(&quot;%s: iHighest() failed. Error %d&quot;,__FUNCTION__, GetLastError());
      return(EMPTY_VALUE);
     }</p>
<p></code></pre>
<p>
<h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2243
</p>
<pre><code class="language-mql5">
   GetLastError();
   double price=iHigh(symbol, timeframe, index);
   if(price==0)
     {
      PrintFormat(&quot;%s: iHigh() failed. Error %d&quot;,__FUNCTION__, GetLastError());
      return(EMPTY_VALUE);
     }
   return(price);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Retorna o Low m√°ximo no intervalo de barras especificado       |
//+------------------------------------------------------------------+
double LowestLow(const string symbol, const ENUM_TIMEFRAMES timeframe, const uint star
  {
   ResetLastError();
   int index=iLowest(symbol, timeframe, MODE_LOW, count, start);
   if(index==-1)
     {
      PrintFormat(&quot;%s: iLowest() failed. Error %d&quot;,__FUNCTION__, GetLastError());
      return(EMPTY_VALUE);
     }
   GetLastError();
   double price=iLow(symbol, timeframe, index);
   if(price==0)
     {
      PrintFormat(&quot;%s: iLow() failed. Error %d&quot;,__FUNCTION__, GetLastError());
      return(EMPTY_VALUE);
     }
   return(price);
</code></pre>
<p>
  }
<h3>Tamb√©m Veja</h3>
<h3>Fun√ß√µes de objetos</h3></p>
<p><h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2244
<h3>ChartSetDouble</h3>
Define um valor para uma propriedade espec√≠fica de um gr√°fico. Propriedade de gr√°fico deve ser do
tipo double. Este comando √© adicionado a uma fila de mensagens de gr√°fico e ser√° executado ap√≥s o
processamento de todos os comandos anteriores. 
</p>
<pre><code class="language-mql5">
bool¬† ChartSetDouble(
   long¬†                          chart_id,¬†    // ID Gr√°fico
   ENUM_CHART_PROPERTY_DOUBLE¬†    prop_id,¬†     // ID Propriedade
   double¬†                        value¬†        // Valor
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
chart_id
[in]  ID Gr√°fico. Representa o gr√°fico atual.
prop_id
[in]  ID Propriedade do gr√°fico. Pode ser um valores de ENUM_CHART_PROPERTY_DOUBLE (exceto
apenas a leitura das propriedades).
value
[in] Valor da Propriedade.
<h3>Valor retornado</h3>
Retorna verdadeiro se o comando foi adicionado √† fila do gr√°fico, caso contr√°rio ser√° falso. Para
obter uma informa√ß√£o sobre o erro, chamar a fun√ß√£o GetLastError().
<h3>Observa√ß√£o</h3>
A fun√ß√£o √© ass√≠ncrona, isto √©, ela n√£o espera a execu√ß√£o do comando que foi colocado com sucesso
na fila do gr√°fico especificado, em vez disso, ela retorna o controle imediatamente. A propriedade
ser√° alterada somente ap√≥s o processamento do comando na fila do gr√°fico. Para executar
imediatamente comandos na fila de agendamento, voc√™ precisa chamar a fun√ß√£o ChartRedraw.
Se quiser alterar v√°rias propriedades do gr√°fico de uma s√≥ vez, voc√™ dever√° executar as fun√ß√µes
correspondentes (ChartSetString, ChartSetDouble, ChartSetString) num bloco de c√≥digo e, em
seguida, chamar uma vez ChartRedraw.
Para verificar o resultado da execu√ß√£o, voc√™ pode usar a fun√ß√£o que solicita a propriedade
especificada do gr√°fico (ChartGetInteger, ChartGetDouble, ChartSetString). Ao fazer isto, deve-se
ter em mente que essas fun√ß√µes s√£o s√≠ncronas e esperam o resultado da execu√ß√£o. 
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Script program start function                                    |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- obtemos o identificador do gr√°fico atual
   long chart_id = ChartID();
   </p>
<p></code></pre>
<p>
<h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2245
</p>
<pre><code class="language-mql5">
//--- lembramo-nos do recuo original da barra zero em rela√ß√£o √† borda direita em porce
   double shift = ChartGetDouble(chart_id, CHART_SHIFT_SIZE);
   bool   scroll= ChartGetInteger(chart_id,CHART_AUTOSCROLL);
   
//--- redefinimos o sinalizador para rolagem autom√°tica do gr√°fico
   ChartSetInteger(chart_id, CHART_AUTOSCROLL, true);
   PrintFormat(&quot;Initial chart shift size: %.2f&quot;, shift);
//--- em la√ßos de 2,0% a 50,0% em incrementos de 0,5%
   for(int i=20; i&lt;=500; i+=5)
     {
      //--- definimos o tamanho do recuo como i / 10 e imprimimos no log o valor defin
      ChartSetDouble(chart_id, CHART_SHIFT_SIZE, i/10.0);
      PrintFormat(&quot;Set chart shift size to %.1f%%&quot;, i/10.0);
      
      //--- mantemos a barra zero do gr√°fico √† dist√¢ncia de recuo definida
      ChartNavigate(chart_id, CHART_END, 0);
      
      //--- aguardamos um pouco mais
      Sleep(16);
     }
//--- definimos o recuo inicial e a rolagem autom√°tica do gr√°fico
   Print(&quot;Set the chart shift size to the initial value of &quot;, shift);
   ChartSetDouble(ChartID(), CHART_SHIFT_SIZE, shift);
   ChartSetInteger(chart_id, CHART_AUTOSCROLL, scroll);
</code></pre>
<p>
  }</p>
<p><h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2246
<h3>ChartSetInteger</h3>
Define um valor para a propriedade de correspond√™ncia de um gr√°fico especificado. Propriedade do
gr√°fico deve obrigatoriamente ser datetime,¬†int,¬†color,¬†bool¬†ou¬†char. O comando √© adicionado para
plotar uma fila de mensagens de gr√°fico e ser√° executado ap√≥s o processamento de todos os
comandos anteriores. 
</p>
<pre><code class="language-mql5">
bool¬† ChartSetInteger(
   long¬†                          chart_id,¬†    // ID Gr√°fico
   ENUM_CHART_PROPERTY_INTEGER¬†   prop_id,¬†     // ID Propriedade
   long¬†                          value¬†        // Valor
   );
</code></pre>
<p>
Define o valor para a respectiva propriedade da subjanela especificada
</p>
<pre><code class="language-mql5">
bool¬† ChartSetInteger(
   long¬†                          chart_id,¬†    // ID Gr√°fico
   ENUM_CHART_PROPERTY_INTEGER¬†   prop_id,¬†     // ID Propriedade
   int¬†                           sub_window,   // N√∫mero da sub-janela
   long¬†                          value¬†        // Valor
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
chart_id
[in]  ID Gr√°fico. Significa o gr√°fico atual.
prop_id
[in]  ID Propriedade do gr√°fico. Pode ser um valores de ENUM_CHART_PROPERTY_INTEGER (exceto
apenas a leitura das propriedades).
sub_window
[in]  N√∫mero de sub-janela do gr√°fico. Para o primeiro caso, o valor padr√£o √© 0 (janela do gr√°fico
principal). A maioria das propriedades n√£o requerem uma n√∫mero de sub-janela.
value
[in]  Valor de propriedade.
<h3>Valor do Retorno</h3>
Retorna verdadeiro se o comando foi adicionado √† fila do gr√°fico, caso contr√°rio ser√° falso. Para
obter uma informa√ß√£o sobre o erro, chamar a fun√ß√£o GetLastError().
<h3>Observa√ß√£o</h3>
A fun√ß√£o √© ass√≠ncrona, isto √©, ela n√£o espera a execu√ß√£o do comando que foi colocado com sucesso
na fila do gr√°fico especificado, em vez disso, ela retorna o controle imediatamente. A propriedade
ser√° alterada somente ap√≥s o processamento do comando na fila do gr√°fico. Para executar
imediatamente comandos na fila de agendamento, voc√™ precisa chamar a fun√ß√£o ChartRedraw.
Se quiser alterar v√°rias propriedades gr√°ficas de uma s√≥ vez, voc√™ dever√° executar as fun√ß√µes
correspondentes (ChartSetString, ChartSetDouble, ChartSetString) num bloco de c√≥digo e, em
seguida, chamar uma vez ChartRedraw.</p>
<p><h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2247
Para verificar o resultado da execu√ß√£o, voc√™ pode usar a fun√ß√£o que solicita a propriedade
especificada do gr√°fico (ChartGetInteger, ChartGetDouble, ChartSetString). Ao fazer isto, deve-se
ter em mente que essas fun√ß√µes s√£o s√≠ncronas e esperam o resultado da execu√ß√£o. 
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Expert initialization function                                   |
//+------------------------------------------------------------------+
void OnInit()
  {
//--- incluir mensagens sobre o movimento do mouse na janela do gr√°fico
   ChartSetInteger(0,CHART_EVENT_MOUSE_MOVE,1);
//--- a atualiza√ß√£o for√ßada das propriedades do gr√°fico garante a prontid√£o para o pro
   ChartRedraw();
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| MouseState                                                       |
//+------------------------------------------------------------------+
string MouseState(uint state)
  {
   string res;
   res+=&quot;\nML: &quot;   +(((state&amp; 1)== 1)?&quot;DN&quot;:&quot;UP&quot;);   // mouse left
   res+=&quot;\nMR: &quot;   +(((state&amp; 2)== 2)?&quot;DN&quot;:&quot;UP&quot;);   // mouse right 
   res+=&quot;\nMM: &quot;   +(((state&amp;16)==16)?&quot;DN&quot;:&quot;UP&quot;);   // mouse middle
   res+=&quot;\nMX: &quot;   +(((state&amp;32)==32)?&quot;DN&quot;:&quot;UP&quot;);   // mouse first X key
   res+=&quot;\nMY: &quot;   +(((state&amp;64)==64)?&quot;DN&quot;:&quot;UP&quot;);   // mouse second X key
   res+=&quot;\nSHIFT: &quot;+(((state&amp; 4)== 4)?&quot;DN&quot;:&quot;UP&quot;);   // shift key
   res+=&quot;\nCTRL: &quot; +(((state&amp; 8)== 8)?&quot;DN&quot;:&quot;UP&quot;);   // control key
   return(res);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| ChartEvent function                                              |
//+------------------------------------------------------------------+
void OnChartEvent(const int id,const long &amp;lparam,const double &amp;dparam,const string &amp;s
  {
   if(id==CHARTEVENT_MOUSE_MOVE)
      Comment(&quot;POINT: &quot;,(int)lparam,&quot;,&quot;,(int)dparam,&quot;\n&quot;,MouseState((uint)sparam));
</code></pre>
<p>
  }</p>
<p><h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2248
<h3>ChartSetString</h3>
Define um valor para a propriedade de correspond√™ncia de um gr√°fico especificado. Propriedade de
Gr√°fico deve ser do tipo string (seq√º√™ncia). O comando √© adicionado para plotar uma fila de
mensagens de gr√°fico e ser√° executado ap√≥s o processamento de todos os comandos anteriores. 
</p>
<pre><code class="language-mql5">
bool¬† ChartSetString(
   long¬†                        chart_id,¬†   // ID Gr√°fico
   ENUM_CHART_PROPERTY_STRING¬†  prop_id,¬†    // ID Propriedade
   string¬†                      str_value¬†   // Valor
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
chart_id
[in]  ID Gr√°fico. Significa o gr√°fico atual.
prop_id
[in]  ID Propriedade do gr√°fico. Pode ser um valores de ENUM_CHART_PROPERTY_STRING (exceto
apenas a leitura das propriedades).
str_value
[in]  Valor de propriedade string. Comprimento da seq√º√™ncia n√£o pode exceder 2045 caracteres
(caracteres extras ser√£o truncados).
<h3>Valor do Retorno</h3>
Retorna verdadeiro se o comando foi adicionado √† fila do gr√°fico, caso contr√°rio ser√° falso. Para
obter uma informa√ß√£o sobre o erro, chamar a fun√ß√£o GetLastError().
<h3>Observa√ß√£o</h3>
ChartSetString pode ser usado para um coment√°rio de sa√≠da no gr√°fico ao inv√©s da fun√ß√£o
Comment. 
A fun√ß√£o √© ass√≠ncrona, isto √©, ela n√£o espera a execu√ß√£o do comando que foi colocado com sucesso
na fila do gr√°fico especificado, em vez disso, ela retorna o controle imediatamente. A propriedade
ser√° alterada somente ap√≥s o processamento do comando na fila do gr√°fico. Para executar
imediatamente comandos na fila de agendamento, voc√™ precisa chamar a fun√ß√£o ChartRedraw.
Se quiser alterar v√°rias propriedades gr√°ficas de uma s√≥ vez, voc√™ dever√° executar as fun√ß√µes
correspondentes (ChartSetString, ChartSetDouble, ChartSetString) num bloco de c√≥digo e, em
seguida, chamar uma vez ChartRedraw.
Para verificar o resultado da execu√ß√£o, voc√™ pode usar a fun√ß√£o que solicita a propriedade
especificada do gr√°fico (ChartGetInteger, ChartGetDouble, ChartSetString). Ao fazer isto, deve-se
ter em mente que essas fun√ß√µes s√£o s√≠ncronas e esperam o resultado da execu√ß√£o. 
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
void OnTick()
  {
//---
   double Ask,Bid;</p>
<p></code></pre>
<p>
<h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2249
</p>
<pre><code class="language-mql5">
   int Spread;
   Ask=SymbolInfoDouble(Symbol(),SYMBOL_ASK);
   Bid=SymbolInfoDouble(Symbol(),SYMBOL_BID);
   Spread=SymbolInfoInteger(Symbol(),SYMBOL_SPREAD);
   string comment=StringFormat(&quot;–í—ã–≤–æ–¥–∏–º —Ü–µ–Ω—ã:\nAsk = %G\nBid = %G\nSpread = %d&quot;,
                               Ask,Bid,Spread);
   ChartSetString(0,CHART_COMMENT,comment);
</code></pre>
<p>
  }
<h3>Tamb√©m Veja</h3>
<h3>Comment, ChartGetString</h3></p>
<p><h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2250
<h3>ChartGetDouble</h3>
Retorna o valor de a propriedade correspondente do gr√°fico especificado. Propriedade do gr√°fico deve
ser do tipo double. Existem duas variantes desta fun√ß√£o.
1. Retorna diretamente o valor da propriedade.
</p>
<pre><code class="language-mql5">
double¬† ChartGetDouble(
   long¬†                        chart_id,¬†        // ID Gr√°fico
   ENUM_CHART_PROPERTY_DOUBLE¬†  prop_id,¬†         // ID Propriedade
   int¬†                         sub_window=0      // n√∫mero da sub-janela, se necess√°r
   );
</code></pre>
<p>
2. Retorna true ou false, dependendo do sucesso na execu√ß√£o da fun√ß√£o. Se for bem sucedido, o valor
da propriedade √© colocado num alvo vari√°vel double_var passado como refer√™ncia.
</p>
<pre><code class="language-mql5">
bool¬† ChartGetDouble(
   long¬†                        chart_id,¬†        // ID Gr√°fico
   ENUM_CHART_PROPERTY_DOUBLE¬†  prop_id,¬†         // ID Propriedade
   int¬†                         sub_window,       // N√∫mero da sub-janela
   double&amp;¬†                     double_var¬†       // Alvo vari√°vel para a propriedade 
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
chart_id
[in]  ID Gr√°fico. Significa o gr√°fico atual.
prop_id
[in] 
 
<h3>ID</h3>
<h3>Propriedade</h3>
do 
gr√°fico. 
<h3>Este</h3>
valor 
pode 
ser 
um 
dos 
valores
ENUM_CHART_PROPERTY_DOUBLE.
sub_window
[in]  N√∫mero de sub-janela do gr√°fico. Para o primeiro caso, o valor padr√£o √© 0 (janela do gr√°fico
principal). A maioria das propriedades n√£o requerem uma n√∫mero de sub-janela.
double_var
[out]  Vari√°vel alvo de tipo double (duplo) para a propriedade solicitada.
<h3>Valor do Retorno</h3>
Valor de tipo double.
Para a segunda chamada caso retorne verdadeiro (true) se a propriedade especificada est√°
dispon√≠vel e seu valor foi armazenado dentro da vari√°vel double_var, caso contr√°rio retorna false.
Para obter uma informa√ß√£o adicional sobre o erro, √© necess√°rio chamar a fun√ß√£o GetLastError().
<h3>Observa√ß√£o</h3>
A fun√ß√£o √© s√≠ncrona, isto √©, ela espera a execu√ß√£o de todos os comandos, que foram colocados na
fila do gr√°fico antes de serem chamados.
<h3>Exemplo:</h3></p>
<p><h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2251
</p>
<pre><code class="language-mql5">
void OnStart()
  {
   double priceMin=ChartGetDouble(0,CHART_PRICE_MIN,0);
   double priceMax=ChartGetDouble(0,CHART_PRICE_MAX,0);
   Print(&quot;CHART_PRICE_MIN =&quot;,priceMin);
   Print(&quot;CHART_PRICE_MAX =&quot;,priceMax);
</code></pre>
<p>
  }</p>
<p><h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2252
<h3>ChartGetInteger</h3>
Retorna o valor de uma propriedade correspondente do gr√°fico especificado. Propriedade do gr√°fico √©
obrigat√≥rio ser do tipo datetime,¬†int¬†ou¬†bool . Existem duas variantes das chamadas desta fun√ß√£o.
1. Retorna diretamente o valor da propriedade.
long¬† ChartGetInteger(
</p>
<pre><code class="language-mql5">
   long¬†                         chart_id,¬†        // ID Gr√°fico
   ENUM_CHART_PROPERTY_INTEGER¬†  prop_id,¬†         // ID Propriedade
   int¬†                          sub_window=0      // n√∫mero da sub-janela, se necess√°
   );
</code></pre>
<p>
2. Retorna true ou false, dependendo do sucesso na execu√ß√£o da fun√ß√£o. Se for bem sucedido, o valor
da propriedade √© colocado num alvo vari√°vel long_var passado como refer√™ncia.
</p>
<pre><code class="language-mql5">
bool¬† ChartGetInteger(
   long¬†                         chart_id,¬†        // ID Gr√°fico
   ENUM_CHART_PROPERTY_INTEGER¬†  prop_id,¬†         // ID Propriedade
   int¬†                          sub_window,       // N√∫mero da sub-janela
   long&amp;¬†                        long_var  ¬†       // Alvo vari√°vel para a propriedade
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
chart_id
[in]  ID Gr√°fico. Significa o gr√°fico atual.
prop_id
[in] 
 
<h3>ID</h3>
<h3>Propriedade</h3>
do 
gr√°fico. 
<h3>Este</h3>
valor 
pode 
ser 
um 
dos 
valores
ENUM_CHART_PROPERTY_INTEGER.
sub_window
[in]  N√∫mero de sub-janela do gr√°fico. Para o primeiro caso, o valor padr√£o √© 0 (janela do gr√°fico
principal). A maioria das propriedades n√£o requerem uma n√∫mero de sub-janela.
long_var
[out]  Alvo vari√°vel do tipo long para a propriedade solicitada.
<h3>Valor do Retorno</h3>
Valor de tipo long.
Para a segunda chamada caso retorne true se a propriedade especificada est√° dispon√≠vel e seu valor
foi armazenado dentro da vari√°vel long_var, caso contr√°rio retorna false. Para obter uma
informa√ß√£o adicional sobre o error, √© necess√°rio chamar a fun√ß√£o GetLastError().
<h3>Observa√ß√£o</h3>
A fun√ß√£o √© s√≠ncrona, isto √©, ela espera a execu√ß√£o de todos os comandos, que foram colocados na
fila do gr√°fico antes de serem chamados.
<h3>Exemplo:</h3></p>
<p><h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2253
</p>
<pre><code class="language-mql5">
void OnStart()
  {
   int height=ChartGetInteger(0,CHART_HEIGHT_IN_PIXELS,0);
   int width=ChartGetInteger(0,CHART_WIDTH_IN_PIXELS,0);
   Print(&quot;CHART_HEIGHT_IN_PIXELS =&quot;,height,&quot;pixels&quot;);
   Print(&quot;CHART_WIDTH_IN_PIXELS =&quot;,width,&quot;pixels&quot;);
</code></pre>
<p>
  }</p>
<p><h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2254
<h3>ChartGetString</h3>
Retorna o valor de uma propriedade correspondente do gr√°fico especificado. Propriedade de Gr√°fico
deve ser do tipo string. Existem duas variantes das chamadas desta fun√ß√£o.
1. Retorna diretamente o valor da propriedade.
</p>
<pre><code class="language-mql5">
string¬† ChartGetString(
   long¬†                        chart_id,         // ID Gr√°fico
   ENUM_CHART_PROPERTY_STRING¬†  prop_id ¬†         // ID Propriedade
   );
</code></pre>
<p>
2. Retorna true ou false, dependendo do sucesso na execu√ß√£o da fun√ß√£o. Se for bem sucedido, o valor
da propriedade √© colocado num alvo vari√°vel string_var passado como refer√™ncia.
</p>
<pre><code class="language-mql5">
bool¬† ChartGetString(
   long¬†                        chart_id,¬†       // ID Gr√°fico
   ENUM_CHART_PROPERTY_STRING¬†  prop_id,¬†        // ID Propriedade
   string&amp;¬†                     string_var       // Alvo vari√°vel para a propriedade
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
chart_id
[in]  ID Gr√°fico. Significa o gr√°fico atual.
prop_id
[in] 
 
<h3>ID</h3>
<h3>Propriedade</h3>
do 
gr√°fico. 
<h3>Este</h3>
valor 
pode 
ser 
um 
dos 
valores
ENUM_CHART_PROPERTY_STRING.
string_var
[out]  Alvo vari√°vel do tipo string para a propriedade solicitada.
<h3>Valor do Retorno</h3>
Valor de tipo string.
Para a segunda chamada caso retorne true se a propriedade especificada est√° dispon√≠vel e seu valor
foi armazenado dentro da vari√°vel string_var, caso contr√°rio retorna false. Para obter uma
informa√ß√£o adicional sobre o error, √© necess√°rio chamar a fun√ß√£o GetLastError().
<h3>Observa√ß√£o</h3>
ChartGetString pode ser usado para leitura dos coment√°rios plotados no gr√°fico usando fun√ß√µes
Comment ou ChartSetString.
A fun√ß√£o √© s√≠ncrona, isto √©, ela espera a execu√ß√£o de todos os comandos, que foram colocados na
fila do gr√°fico antes de serem chamados.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
void OnStart()
  {
   ChartSetString(0,CHART_COMMENT,&quot;Test comment.\nSecond line.\nThird!&quot;);</p>
<p></code></pre>
<p>
<h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2255
</p>
<pre><code class="language-mql5">
   ChartRedraw();
   Sleep(1000);
   string comm=ChartGetString(0,CHART_COMMENT);
   Print(comm);
</code></pre>
<p>
  }
<h3>Tamb√©m Veja</h3>
<h3>Comment, ChartSetString</h3></p>
<p><h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2256
<h3>ChartNavigate</h3>
Executa deslocamento do gr√°fico especificado pelo n√∫mero especificado de barras em rela√ß√£o a
posi√ß√£o especificada no gr√°fico.
</p>
<pre><code class="language-mql5">
bool¬† ChartNavigate(
   long¬†                 chart_id,¬†    // ID Gr√°fico
   ENUM_CHART_POSITION¬†  position,¬†    // Posi√ß√£o
   int¬†                  shift=0¬†      // Valor deslocamento
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
chart_id
[in]  ID Gr√°fico. Significa o gr√°fico atual.
position
[in]  Posi√ß√£o do gr√°fico para realizar um deslocamento. Pode ser um dos valores
ENUM_CHART_POSITION.
shift=0
[in]  N√∫mero de barras para deslocar o gr√°fico. Valor positivo significa que o deslocamento √© para
a direita (para o fim do gr√°fico), o valor negativo significa que o desvio √© para a esquerda (para o
in√≠cio do gr√°fico). O deslocamento zero pode ser usado para navegar ao in√≠cio ou para ao fim do
gr√°fico.
<h3>Valor do Retorno</h3>
Retorna true se bem sucedido, caso contr√°rio false.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- manipular gr√°fico atual
   long handle=ChartID();
   string comm=&quot;&quot;;
   if(handle&gt;0) //se bem sucedida, configurar o gr√°fico
     {
      //--- desabilitar auto rolagem
      ChartSetInteger(handle,CHART_AUTOSCROLL,false);
      //--- definir uma mudan√ßa da margem direita do gr√°fico
      ChartSetInteger(handle,CHART_SHIFT,true);
      //--- desenhar casti√ßais
      ChartSetInteger(handle,CHART_MODE,CHART_CANDLES);
      //--- definir o modo de exibi√ß√£o para volume de tick (ponto)
      ChartSetInteger(handle,CHART_SHOW_VOLUMES,CHART_VOLUME_TICK);
      //--- preparar um texto para a sa√≠da em Comment()</p>
<p></code></pre>
<p>
<h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2257
</p>
<pre><code class="language-mql5">
      comm=&quot;Rolar 10 barras para a direita do come√ßo do hist√≥rico&quot;;
      //--- mostrar coment√°rio
      Comment(comm);
      //--- rolar 10 barras para a direita do come√ßo do hist√≥rico
      ChartNavigate(handle,CHART_BEGIN,10);
      //--- come√ßar com o n√∫mero da primeira barra vis√≠vel no gr√°fico (numera√ß√£o como 
      long first_bar=ChartGetInteger(0,CHART_FIRST_VISIBLE_BAR,0);
      //--- adicionar linha de caractere
      comm=comm+&quot;\r\n&quot;;
      //--- adicionar coment√°rio
      comm=comm+&quot;A primeira barra √© o n√∫mero no gr√°fico &quot;+IntegerToString(first_bar)+&quot;
      //--- mostrar coment√°rio
      Comment(comm);
      //--- aguardar 5 segundos para ver como o gr√°fico se move
      Sleep(5000);
      //--- adicionar texto de comet√°rio
      comm=comm+&quot;\r\n&quot;+&quot;Rolar 10 barras para a esquerda da margem direita do gr√°fico&quot;;
      Comment(comm);
      //--- rolar 10 barras para a esquerda da margem direita do gr√°fico
      ChartNavigate(handle,CHART_END,-10);
      //--- come√ßar com o n√∫mero da primeira barra vis√≠vel no gr√°fico (numera√ß√£o como 
      first_bar=ChartGetInteger(0,CHART_FIRST_VISIBLE_BAR,0);
      comm=comm+&quot;\r\n&quot;;
      comm=comm+&quot;A primeira barra √© o n√∫mero no gr√°fico &quot;+IntegerToString(first_bar)+&quot;
      Comment(comm);
      //--- aguardar 5 segundos para ver como o gr√°fico se move
      Sleep(5000);
      //--- novo bloco de rolagem do gr√°fico
      comm=comm+&quot;\r\n&quot;+&quot;Rolar 300 barras para a direita do in√≠cio do hist√≥rico&quot;;
      Comment(comm);
      //--- rolar 300 barras para a direita do in√≠cio do hist√≥rico
      ChartNavigate(handle,CHART_BEGIN,300);
      first_bar=ChartGetInteger(0,CHART_FIRST_VISIBLE_BAR,0);
      comm=comm+&quot;\r\n&quot;;
      comm=comm+&quot;A primeira barra √© o n√∫mero no gr√°fico &quot;+IntegerToString(first_bar)+&quot;
      Comment(comm);
      //--- aguardar 5 segundos para ver como o gr√°fico se move
      Sleep(5000);
      //--- novo bloco de rolagem do gr√°fico
      comm=comm+&quot;\r\n&quot;+&quot;Rolar 300 barras para a esquerda da margem direita do gr√°fico&quot;
      Comment(comm);
      //--- rolar 300 barras √† esquerda da margem direita do gr√°fico
      ChartNavigate(handle,CHART_END,-300);
      first_bar=ChartGetInteger(0,CHART_FIRST_VISIBLE_BAR,0);
      comm=comm+&quot;\r\n&quot;;
      comm=comm+&quot;A primeira barra √© o n√∫mero no gr√°fico &quot;+IntegerToString(first_bar)+&quot;</p>
<p></code></pre>
<p>
<h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2258
</p>
<pre><code class="language-mql5">
      Comment(comm);
     }
</code></pre>
<p>
  }</p>
<p><h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2259
<h3>ChartID</h3>
Retorna o ID do gr√°fico atual.
long¬† ChartID();
<h3>Valor retornado</h3>
Valor tipo long. 
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Script program start function                                    |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- vari√°veis para identificadores de gr√°ficos
   long curr_chart=ChartFirst();
   int i=0;
   //--- imprimimos no log os dados do primeiro gr√°fico
   PrintFormat(&quot;Chart[%d] ID: %I64d,  symbol: %s&quot;, i, curr_chart, ChartSymbol(curr_cha
   
//--- antes de atingirmos o limite do gr√°ficos abertos (CHARTS_MAX)
   while(!IsStopped() &amp;&amp; i &lt; CHARTS_MAX)
     {
      //--- incrementarmos o contador de gr√°ficos
      i++;
      //--- com base no gr√°fico anterior, obtemos o identificador do pr√≥ximo gr√°fico
      curr_chart=ChartNext(curr_chart);
      
      //--- Caso tenhamos chegado ao final da lista de gr√°ficos, encerramos o ciclo
      if(curr_chart&lt;0)
         break;
         
      //--- imprimimos no log os dados do pr√≥ximo gr√°fico
      PrintFormat(&quot;Chart[%d] ID: %I64d,  symbol: %s&quot;, i, curr_chart, ChartSymbol(curr_
     }
   /*
¬†  resultado:
   Chart[0] ID: 133246248352168440,  symbol: EURUSD
   Chart[1] ID: 133346697706632015,  symbol: USDJPY
   Chart[2] ID: 133246248352168439,  symbol: GBPUSD
   Chart[3] ID: 133346697706632009,  symbol: RU000A103661
   Chart[4] ID: 133346697706632010,  symbol: AEM4
   Chart[5] ID: 133346697706632011,  symbol: AA.SPB
   Chart[6] ID: 133346697706632012,  symbol: ALLFUTMIX
   Chart[7] ID: 133346697706632013,  symbol: EURUSD
   Chart[8] ID: 133346697706632014,  symbol: SBER
   */</p>
<p></code></pre>
<p>
<h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2260
  }</p>
<p><h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2261
<h3>ChartIndicatorAdd</h3>
Adiciona um indicador com o identificador especificado para uma janela de gr√°fico especificado.
Indicador e gr√°fico devem ser gerados sobre o mesmo s√≠mbolo e prazo.
</p>
<pre><code class="language-mql5">
bool¬† ChartIndicatorAdd(
   long¬† chart_id,¬†                // ID Gr√°fico
   int¬†  sub_window ¬†              // n√∫mero da sub-janela
   int¬†  indicator_handle ¬†        // manipulador do indicador
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
chart_id
[in]  ID Gr√°fico. Significa o gr√°fico atual.
sub_window
[in]  O n√∫mero de sub-janelas do gr√°fico. 0 (zero) significa a principal janela do gr√°fico. Para
adicionar um indicador em uma nova janela,o par√¢metro obrigatoriamente deve ser maior do que
o √≠ndice da √∫ltima janela existente, isto √©, igual a CHART_WINDOWS_TOTAL. Se o valor do
par√¢metro √© maior que CHART_WINDOWS_TOTAL, uma nova janela n√£o ser√° criada, e o indicador
n√£o ser√° adicionado. 
indicator_handle
[in]  O identificador do indicador.
<h3>Valor do Retorno</h3>
A fun√ß√£o retorna verdadeira (true) em caso de sucesso, caso contr√°rio ela retorna false. A fim de
obter informa√ß√£o sobre  erro, chama a fun√ß√£o GetLastError(). Erro 4114 significa que o gr√°fico e um
indicador adicionado difere pelo seus s√≠mbolos ou prazo.
<h3>Observa√ß√£o</h3>
Se um indicador deve ser elaborado numa sub-janela separada (por exemplo, construindo um iMACD
ou um indicador personalizado com propriedade especificada #property indicator_separate_window)
√© aplicada √† janela de gr√°fico principal,n√£o pode ser vis√≠vel embora ainda estar√° presente na lista
de indicadores. Isto significa que a escala do indicador √© diferente da escala do gr√°fico de pre√ßo, e
aplicado ao valor do indicador n√£o se enquadra na faixa visualizada do gr√°fico de pre√ßo. Neste caso,
GetLastError() retorna c√≥digo zero indicando a aus√™ncia de um erro. Os valores de tal indicador
&quot;invis√≠vel&quot; pode ser visto na Janela de Dados (Data Window) e recebidos a partir de outras
aplica√ß√µes MQL5.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
#property description &quot;Expert Advisor demonstrando o trabalho com a fun√ß√£o ChartIndica
#property description &quot;Ap√≥s o lan√ßamento no gr√°fico (e receber o erro no Jornal), abri
#property description &quot;Propriedades do Expert Advisor e especificar &lt;s√≠mbolo&gt; correto 
#property description &quot;Indicador MACD sera adicionado no grafico.&quot;
//--- par√¢metros de entrada
input string          symbol=&quot;AUDUSD&quot;;    // nome do s√≠mbolo
input ENUM_TIMEFRAMES period=PERIOD_M12;  // time frame</p>
<p></code></pre>
<p>
<h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2262
</p>
<pre><code class="language-mql5">
input int    fast_ema_period=12;          // per√≠odo r√°pido MACD
input int    slow_ema_period=26;          // per√≠odo lento MACD
input int      signal_period=9;           // per√≠odo de sinal
input ENUM_APPLIED_PRICE apr=PRICE_CLOSE; // tipo de pre√ßo para c√°lculo do iMACD
int indicator_handle=INVALID_HANDLE;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do Expert¬†                               |
//+------------------------------------------------------------------+
int OnInit()
  {
//---
   indicator_handle=iMACD(symbol,period,fast_ema_period,slow_ema_period,signal_period,
//--- tentar adicionar o indicador no gr√°fico
   if(!AddIndicator())
     {
      //--- Fun√ß√£o AddIndicator() recusou acrescentar o indicador no gr√°fico
      int answer=MessageBox(&quot;Voc√™ quer adicionar MACD do gr√°fico de qualquer maneira?&quot;
                            &quot;S√≠mbolo e/ou prazo de tempo incorreto para adicionar o in
                            MB_YESNO // &quot;Sim&quot; e &quot;N√£o&quot; bot√µes de sele√ß√£o ser√° mostrado
                            );
      //--- se um usu√°rio ainda insiste no uso incorreto de ChartIndicatorAdd()
      if(answer==IDYES)
        {
         //--- em primeiro lugar, uma entrada jornal ser√° publicado sobre isso
         PrintFormat(&quot;Aten√ß√£o! %s: Tentando adicionar indicador MACD(%s/%s) em gr√°fico
                     __FUNCTION__,symbol,EnumToString(period),_Symbol,EnumToString(_Pe
         //---receber o n√∫mero de uma nova sub-janela, para a qual vamos tentar adicio
         int subwindow=(int)ChartGetInteger(0,CHART_WINDOWS_TOTAL);
         //--- agora faz uma tentativa fadada a falhar
         if(!ChartIndicatorAdd(0,subwindow,indicator_handle))
            PrintFormat(&quot;Falha ao adicionar o indicador MACD %d na janela do gr√°fico. 
                        subwindow,GetLastError());
        }
     }
//---
   return(INIT_SUCCEEDED);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o tick (ponto) de um Expert                                 |
//+------------------------------------------------------------------+
void OnTick()
  {
// Assessor especialista (expert advisor) n√£o executa nada
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o para verificar e adicionar o indicador no gr√°fico¬†        |
//+------------------------------------------------------------------+
bool AddIndicator()</p>
<p></code></pre>
<p>
<h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2263
</p>
<pre><code class="language-mql5">
  {
//--- mensagem exibida
   string message;
//--- verificar se o s√≠mbolo do indicador e s√≠mbolo do gr√°fico combinam entre si
   if(symbol!=_Symbol)
     {
      message=&quot;Exibindo o uso da fun√ß√£o Demo_ChartIndicatorAdd():&quot;;
      message=message+&quot;\r\n&quot;;
      message=message+&quot;N√£o √© poss√≠vel adicionar o indicador calculado com outro s√≠mbol
      message=message+&quot;\r\n&quot;;
      message=message+&quot;Especifique o s√≠mbolo gr√°fico na propriedade do Expert Advisor 
      Alert(message);
      //---sa√≠da prematura, o indicador n√£o ser√° adicionado no gr√°fico
      return false;
     }
//--- verificar se o indicador e prazo do gr√°fico combinam entre si
   if(period!=_Period)
     {
      message=&quot;N√£o √© poss√≠vel adicionar o indicador calculado em outro prazo de tempo 
      message=message+&quot;\r\n&quot;;
      message=message+&quot;Especifique o prazo de tempo do gr√°fico na propriedades do Expe
      Alert(message);
      //---sa√≠da prematura, o indicador n√£o ser√° adicionado no gr√°fico
      return false;
     }
//--- todas verifica√ß√µes completadas, simbolo e prazo do indicador corresponde ao gr√°f
   if(indicator_handle==INVALID_HANDLE)
     {
      Print(__FUNCTION__,&quot;  Criando indicador MACD&quot;);
      indicator_handle=iMACD(symbol,period,fast_ema_period,slow_ema_period,signal_peri
      if(indicator_handle==INVALID_HANDLE)
        {
         Print(&quot;Falha para criar indicador MACD. C√≥digo de erro &quot;,GetLastError());
        }
     }
//--- redefine o c√≥digo de erro
   ResetLastError();
//--- aplicar o indicador para o gr√°fico
   Print(__FUNCTION__,&quot;  Adicionando indicador MACD no gr√°fico&quot;);
   Print(&quot;MACD √© gerada em &quot;,symbol,&quot;/&quot;,EnumToString(period));
//---receber o n√∫mero de uma nova sub-janela, para o qual √© adicionado o indicador MAC
   int subwindow=(int)ChartGetInteger(0,CHART_WINDOWS_TOTAL);
   PrintFormat(&quot;Adicionado indicador MACD na janela do gr√°fico %d&quot;,subwindow);
   if(!ChartIndicatorAdd(0,subwindow,indicator_handle))
     {
      PrintFormat(&quot;Falha para adicionar indicador MACD na janela do gr√°fico %d. C√≥digo
                  subwindow,GetLastError());
     }
//--- indicador adicionado com sucesso</p>
<p></code></pre>
<p>
<h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2264
</p>
<pre><code class="language-mql5">
   return(true);
</code></pre>
<p>
  }
<h3>Veja tamb√©m</h3>
ChartIndicatorDelete(), ChartIndicatorName(), ChartIndicatorsTotal(), iCustom(), IndicatorCreate()</p>
<p><h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2265
<h3>ChartIndicatorDelete</h3>
Remove um indicador com um nome especificado a partir de janela do gr√°fico especificado.
</p>
<pre><code class="language-mql5">
bool¬† ChartIndicatorDelete(
   long¬†          chart_id,¬†             // ID Gr√°fico
   int¬†           sub_window ¬†           // n√∫mero da sub-janela
   const string¬†  indicator_shortname    // nome abreviado do indicador
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
chart_id
[in]  ID Gr√°fico. 0 (zero) indica a sub-janela gr√°fico principal.
sub_window
[in]  N√∫mero de sub-janela do gr√°fico. 0 (zero) indica o sub-janela gr√°fico principal.
const indicator_shortname
[in]  O nome abreviado do indicador que √© definido na propriedade do INDICATOR_SHORTNAME
com a fun√ß√£o IndicatorSetString(). Para obter o nome abreviado de um indicador usar a fun√ß√£o
ChartIndicatorName().
<h3>Valor do Retorno</h3>
Retorna true em caso de sucesso deletando o indicador. Do contr√°rio ele retorna false. Para obter
detalhes do erro use a fun√ß√£o GetLastError().
<h3>Observa√ß√£o</h3>
Se houver dois indicadores com nove abreviados iguais na subjanela do gr√°fico, o primeiro da linha
ser√° deletado.
Se outros indicadores neste gr√°fico s√£o baseadas nos valores do indicador que est√° sendo deletado,
estes indicadores tamb√©m ser√£o deletados.
N√£o confundir o nome abreviado do indicador e o nome do arquivo que √© especificado ao criar um
indicador usando as fun√ß√µes iCustom() e IndicatorCreate(). Se o nome abreviado de um indicador
n√£o √© definido de forma explicita, o nome do arquivo contendo o c√≥digo-fonte do indicador ser√°
especificado durante a compila√ß√£o. 
Deletando um indicador de um gr√°fico n√£o significa que seu c√°lculo ser√° exclu√≠do da me m√≥ria do
terminal. Para liberar o manuseio do indicador usar a fun√ß√£o IndicatorRelease().
<h3>Nome</h3>
abreviado 
do 
indicador 
deve 
ser 
formado 
corretamente. 
a 
propriedade
INDICATOR_SHORTNAME ser√° escrita usando a fun√ß√£oIndicatorSetString(). S√© recomendado que o
nome abreviado deve conter valores de todos os par√¢metros de entrada do indicador, porque sendo
o indicador exclu√≠do do gr√°fico pela fun√ß√£o ChartIndicatorDelete(), ele √© identificado pelo nome
abreviado.
Exemplo de exclus√£o de um indicador ap√≥s inicializa√ß√£o ter falhado:
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//|                                    Demo_ChartIndicatorDelete.mq5 |
//|                         Copyright 2000-2024, MetaQuotes Ltd. |</p>
<p></code></pre>
<p>
<h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2266
</p>
<pre><code class="language-mql5">
//|                                              https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright &quot;Copyright 2000-2024, MetaQuotes Ltd.&quot;
#property link      &quot;https://www.mql5.com&quot;
#property version   &quot;1.00&quot;
#property indicator_separate_window
#property indicator_buffers 1
#property indicator_plots   1
//--- plotar Histograma
#property indicator_label1  &quot;Histogram&quot;
#property indicator_type1   DRAW_HISTOGRAM
#property indicator_color1  clrRed
#property indicator_style1  STYLE_SOLID
#property indicator_width1  1
//--- par√¢metros de entrada
input int      first_param=1;
input int      second_param=2;
input int      third_param=3;
input bool     wrong_init=true;
//--- buffers do indicador
double         HistogramBuffer[];
string         shortname;
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do indicador customizado¬†                |
//+------------------------------------------------------------------+
int OnInit()
  {
   int res=INIT_SUCCEEDED;
//---Vincular a array HistogramBuffer para a buffer (mem√≥ria tempor√°ria) do indicador
   SetIndexBuffer(0,HistogramBuffer,INDICATOR_DATA);
//--- Construir um nome abreviado de indicador baseado nos par√¢metro de entrada
   shortname=StringFormat(&quot;Demo_ChartIndicatorDelete(%d,%d,%d)&quot;,
                          first_param,second_param,third_param);
   IndicatorSetString(INDICATOR_SHORTNAME,shortname);
//--- Se a conclus√£o for√ßada de um indicador est√° definida, retornar um valor n√£o-zero
   if(wrong_init) res=INIT_FAILED;
   return(res);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o de itera√ß√£o do indicador customizado¬†                     |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &amp;time[],
                const double &amp;open[],
                const double &amp;high[],
                const double &amp;low[],
                const double &amp;close[],
                const long &amp;tick_volume[],</p>
<p></code></pre>
<p>
<h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2267
</p>
<pre><code class="language-mql5">
                const long &amp;volume[],
                const int &amp;spread[])
  {
//--- Posi√ß√£o de partida para trabalhar num loop
   int start=prev_calculated-1;
   if(start&lt;0) start=0;
//--- Preencher o buffer do indicador com valores
   for(int i=start;i&lt;rates_total;i++)
     {
      HistogramBuffer[i]=close[i];
     }
//--- valor retorno de prev_calculated para a pr√≥xima chamada
   return(rates_total);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Um processador do evento de desinicializada (Deinit)¬†            |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   PrintFormat(&quot;%s: C√≥digo de raz√£o de finaliza√ß√£o=%d&quot;,__FUNCTION__,reason);
   if(reason==REASON_INITFAILED)
     {
      PrintFormat(&quot;Um indicador com um nome abreviado %s (arquivo %s) se exclui do gr√°
      int window=ChartWindowFind();
      bool res=ChartIndicatorDelete(0,window,shortname);
      //--- Analisar o resultado de chamada de ChartIndicatorDelete()
      if(!res)
        {
         PrintFormat(&quot;Falha para deletar o indicador %s partir da janela #%d. C√≥digo d
                     shortname,window,GetLastError());
        }
     }
</code></pre>
<p>
  }
<h3>Tamb√©m Veja</h3>
ChartIndicatorAdd(), ChartIndicatorName(), ChartIndicatorsTotal(), iCustom(), IndicatorCreate(), 
<h3>IndicatorSetString()</h3></p>
<p><h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2268
<h3>ChartIndicatorGet</h3>
Retorna o manuseio do indicador com nome abreviado especificado na janela do gr√°fico especificado.
</p>
<pre><code class="language-mql5">
int¬† ChartIndicatorGet(
   long¬†          chart_id,¬†             // ID gr√°fico\
   int¬†           sub_window ¬†           // O numero da sub-janela
   const string¬†  indicator_shortname ¬†  // Nome abreviado do indicador
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
chart_id
[in]  ID Gr√°fico. Significa o gr√°fico atual.
sub_window
[in]  O numero da sub-janela do gr√°fico. 0 (zero) significa a principal janela do gr√°fico.
const indicator_shortname
[in]  O nome abreviado do indicador que √© definido na propriedade INDICATOR_SHORTNAME ser√°
escrita usando a fun√ß√£o IndicatorSetString(). Para obter o nome abreviado de um indicador usar a
fun√ß√£o ChartIndicatorName().
<h3>Valor do Retorno</h3>
A fun√ß√£o retorna bem sucedida, caso contr√°rio retorna INVALID_HANDLE. Para obter informa√ß√µes
sobre o erro, chame a fun√ß√£o GetLastError().
<h3>Observa√ß√£o</h3>
O handle do indicador obtido com ajuda da fun√ß√£o ChartIndicatorGet() aumenta o contador interno
de uso desse indicador. O sistema de execu√ß√£o do terminal mant√©m carregados todos os indicadores
cujo contador √© maior que zero. Por isso, um handle de indicador desnecess√°rio deve ser imediata e
explicitamente liberado com ajuda de IndicatorRelease() no mesmo programa que o recebe,
conforme mostrado no exemplo abaixo. Caso contr√°rio, ser√° imposs√≠vel encontrar o identificador
&quot;abandonado&quot; e liber√°-lo corretamente desde outro programa.
Ao criar um indicador, tenha cuidado para formar sua abrevia√ß√£o, o que est√° escrito na propriedade
INDICATOR_SHORTNAME usando a fun√ß√£o IndicatorSetString(). √â recomendado que o nome
abreviado deve conter valores de todos os par√¢metros de entrada do indicador, porque sendo o
indicador exclu√≠do do gr√°fico pela fun√ß√£o ChartIndicatorGet() ele √© identificado pelo nome
abreviado.
Outra forma de identificar o indicador √© obtendo uma lista de seus par√¢metros para um
manipulador, usando a fun√ß√£o IndicatorParameters() e, em seguida, analisar os valores obtidos.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Programa Script da fun√ß√£o start (iniciar)¬†                       |
//+------------------------------------------------------------------+
void OnStart()
  {
   //--- O n√∫mero de janelas no gr√°fico (ao menos uma janela principal est√° sempre pre</p>
<p></code></pre>
<p>
<h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2269
</p>
<pre><code class="language-mql5">
   int windows=(int)ChartGetInteger(0,CHART_WINDOWS_TOTAL);
   //--- Verifique todas as janelas
   for(int w=0;w&lt;windows;w++)
     {
      //--- o n√∫mero de indicadores nesta janela/sub-janela
      int total=ChartIndicatorsTotal(0,w);
      //--- Passar por todos os indicadores na janela
      for(int i=0;i&lt;total;i++)
        {
         //--- obt√©m o nome abreviado do indicador
         string name=ChartIndicatorName(0,w,i);
         //--- obter o manipulador (handle) de um indicador
         int handle=ChartIndicatorGet(0,w,name);
         //--- Adicionar o log
         PrintFormat(&quot;Janela=%d,  √≠ndice=%d,  nome=%s,  manipulador (handle)=%d&quot;,w,i,n
         //--- You should obligatorily release the indicator handle when it is no long
         IndicatorRelease(handle);
        }
     }
</code></pre>
<p>
  }
<h3>Tamb√©m Veja</h3>
ChartIndicatorAdd(), ChartIndicatorName(), ChartIndicatorsTotal(), IndicatorParameters()</p>
<p><h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2270
<h3>ChartIndicatorName</h3>
Retorna o nome abreviado do indicador mediante o n√∫mero na lista de indicadores da janela do gr√°fico
especificado.
</p>
<pre><code class="language-mql5">
string¬† ChartIndicatorName(
   long¬† chart_id,¬†     // ID gr√°fico
   int¬†  sub_window ¬†   // numero de sub-janelas
   int¬†  index ¬†        // √≠ndice do indicador na lista de indicadores adicionada a su
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
chart_id
[in]  ID Gr√°fico. 0 (zero) indica a sub-janela gr√°fico principal.
sub_window
[in]  N√∫mero de sub-janela do gr√°fico. 0 (zero) indica o sub-janela gr√°fico principal.
index
[in]  √≠ndice do indicador na lista de indicadores. A numera√ß√£o de indicadores come√ßam com zero,
ou seja, o primeiro indicador da lista tem o √≠ndice 0. Para obter o c√≥digo do √∫ltimo erro, voc√™
tamb√©m pode usar a fun√ß√£o ChartIndicatorsTotal().
<h3>Valor retornado</h3>
O nome abreviado do indicador que √© definido na propriedade INDICATOR_SHORTNAME com a
fun√ß√£o IndicatorSetString(). Para obter detalhes do erro use a fun√ß√£o GetLastError().
<h3>Observa√ß√£o</h3>
N√£o confundir o nome abreviado do indicador e o nome do arquivo que √© especificado ao criar um
indicador usando as fun√ß√µes iCustom() e IndicatorCreate(). Se o nome abreviado de um indicador
n√£o √© definido de forma explicita, o nome do arquivo contendo o c√≥digo-fonte do indicador ser√°
especificado durante a compila√ß√£o.
<h3>Nome</h3>
abreviado 
do 
indicador 
deve 
ser 
formado 
corretamente. 
a 
propriedade
INDICATOR_SHORTNAME ser√° escrita usando a fun√ß√£oIndicatorSetString(). S√© recomendado que o
nome abreviado deve conter valores de todos os par√¢metros de entrada do indicador, porque, como
o indicador exclu√≠do do gr√°fico pela fun√ß√£o ChartIndicatorDelete(), ele √© identificado pelo nome
abreviado.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Script program start function                                    |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- obtemos o identificador do gr√°fico atual e o n√∫mero de suas subjanelas, incluind
   long chart_id = ChartID();
   int  wnd_total= (int)ChartGetInteger(0,CHART_WINDOWS_TOTAL);
   </p>
<p></code></pre>
<p>
<h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2271
</p>
<pre><code class="language-mql5">
//--- percorremos todas as janelas do gr√°fico atual
   for(int w=0; w&lt;wnd_total; w++)
     {
      //--- obtemos o n√∫mero de indicadores anexados √† janela do gr√°fico especificada 
      int ind_total=ChartIndicatorsTotal(chart_id, w);
      
      //--- imprimimos o t√≠tulo da janela do gr√°fico selecionado
      PrintFormat(&quot;Chart window %d indicators: &quot;, w);
      
      //--- obtemos todos os nomes dos indicadores anexados √† janela selecionada no la
      string ind_names=&quot;&quot;;
      for(int i=0; i&lt;ind_total; i++)
        {
         ind_names+=&quot;  &quot;+ChartIndicatorName(chart_id, w, i)+(i&lt;ind_total-1 ? &quot;\n&quot;: &quot;&quot;)
        }
      //--- imprimimos no log a lista de nomes de todos os indicadores anexados √† jane
      Print(ind_names);
     }
   /*
¬†  Resultado:
   Chart window 0 indicators: 
     AMA(9,2,30)
     SAR(0.02,0.20)
     Fractals
   Chart window 1 indicators: 
     RSI(14)
     AMA(9,2,30)
   Chart window 2 indicators: 
     MFI(14)
   */
</code></pre>
<p>
  }
<h3>Tamb√©m Veja</h3>
ChartIndicatorAdd(), ChartIndicatorDelete(), ChartIndicatorsTotal(), iCustom(), IndicatorCreate(),
<h3>IndicatorSetString()</h3></p>
<p><h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2272
<h3>ChartIndicatorsTotal</h3>
Retorna o n√∫mero de todos indicadores utilizados para a janela do gr√°fico especificado
</p>
<pre><code class="language-mql5">
int¬† ChartIndicatorsTotal(
   long¬† chart_id,¬†     // ID gr√°fico
   int¬†  sub_window ¬†   // numero de sub-janelas
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
chart_id
[in]  ID Gr√°fico. 0 (zero) indica a sub-janela gr√°fico principal.
sub_window
[in]  N√∫mero de sub-janela do gr√°fico. 0 (zero) indica o sub-janela gr√°fico principal.
<h3>Valor retornado</h3>
O n√∫mero de indicadores na janela de gr√°fico especificado. Para obter detalhes do erro use a fun√ß√£o
GetLastError().
<h3>Observa√ß√£o</h3>
A fun√ß√£o permite uma buscar atrav√©s de todos os indicadores anexados ao gr√°fico. A fun√ß√£o
permite uma pesquisa atrav√©s de todos os indicadores anexados ao gr√°fico. O n√∫mero de todas as
janelas do gr√°fico pode ser obtido a partir da propriedade CHART_WINDOWS_TOTAL usando a
fun√ß√£o ChartGetInteger().
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Script program start function                                    |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- obtemos o identificador do gr√°fico atual e o n√∫mero de suas subjanelas, incluind
   long chart_id = ChartID();
   int  wnd_total= (int)ChartGetInteger(0,CHART_WINDOWS_TOTAL);
   
//--- percorremos todas as janelas do gr√°fico atual
   for(int w=0; w&lt;wnd_total; w++)
     {
      //--- obtemos o n√∫mero de indicadores anexados √† janela do gr√°fico especificada 
      int ind_total=ChartIndicatorsTotal(chart_id, w);
      
      //--- imprimimos o n√∫mero de indicadores anexados √† janela de gr√°fico especifica
      PrintFormat(&quot;Chart ID %I64d, subwindow %d. Attached indicators: %d&quot;, chart_id, w
     }
   /*
¬†  Resultado:
   Chart ID 133246248352168439, subwindow 0. Attached indicators: 3</p>
<p></code></pre>
<p>
<h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2273
</p>
<pre><code class="language-mql5">
   Chart ID 133246248352168439, subwindow 1. Attached indicators: 2
   Chart ID 133246248352168439, subwindow 2. Attached indicators: 1
   */
</code></pre>
<p>
  }
<h3>Tamb√©m Veja</h3>
ChartIndicatorAdd(), ChartIndicatorDelete(), iCustom(), IndicatorCreate(), IndicatorSetString()</p>
<p><h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2274
<h3>ChartWindowOnDropped</h3>
Retorna o n√∫mero (√≠ndice) da sub-janela do gr√°fico, o Assessor Especialista (Expert Advisor) ou Script
foi derrubado. 0 (zero) significa a principal janela do gr√°fico.
</p>
<pre><code class="language-mql5">
int¬† ChartWindowOnDropped();
</code></pre>
<p>
<h3>Valor do Retorno</h3>
Valor do tipo int.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
   int myWindow=ChartWindowOnDropped();
   int windowsTotal=ChartGetInteger(0,CHART_WINDOWS_TOTAL);
   Print(&quot;Script √© executado na janela #&quot;+myWindow+
         &quot;. Total de janelas no gr√°fico &quot;+ChartSymbol()+&quot;:&quot;,windowsTotal);
</code></pre>
<p>
<h3>Tamb√©m Veja</h3>
ChartPriceOnDropped, ChartTimeOnDropped, ChartXOnDropped, ChartYOnDropped</p>
<p><h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2275
<h3>ChartPriceOnDropped</h3>
Retorna a coordenada de pre√ßo do ponto do gr√°fico, o Assessor Especialista (Expert Advisor) ou Script
foi derrubado.
</p>
<pre><code class="language-mql5">
double¬† ChartPriceOnDropped();
</code></pre>
<p>
<h3>Valor do Retorno</h3>
Value of double type.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
   double p=ChartPriceOnDropped();
   Print(&quot;ChartPriceOnDropped() = &quot;,p);
</code></pre>
<p>
<h3>Tamb√©m Veja</h3>
<h3>ChartXOnDropped, ChartYOnDropped</h3></p>
<p><h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2276
<h3>ChartTimeOnDropped</h3>
Retorna a coordenada de tempo correspondente ao ponto do gr√°fico, o Assessor Especialista (Expert
Advisor) ou Script foi derrubado.
datetime¬† ChartTimeOnDropped();
<h3>Valor do Retorno</h3>
Valor tipo datetime.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
   datetime t=ChartTimeOnDropped();
   Print(&quot;Script foi lan√ßado sobre &quot;+t);
</code></pre>
<p>
<h3>Tamb√©m Veja</h3>
<h3>ChartXOnDropped, ChartYOnDropped</h3></p>
<p><h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2277
<h3>ChartXOnDropped</h3>
Retorna a coordenada X do ponto do gr√°fico, o Assessor Especialista (Expert Advisor) ou Script foi
derrubado.
</p>
<pre><code class="language-mql5">
int¬† ChartXOnDropped();
</code></pre>
<p>
<h3>Valor do Retorno</h3>
O valor da coordenada X.
<h3>Observa√ß√£o</h3>
Dire√ß√£o do eixo X a partir da esquerda para a direita.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
   int X=ChartXOnDropped();
   int Y=ChartYOnDropped();
   Print(&quot;(X,Y) = (&quot;+X+&quot;,&quot;+Y+&quot;)&quot;);
</code></pre>
<p>
<h3>Tamb√©m Veja</h3>
 ChartWindowOnDropped, ChartPriceOnDropped, ChartTimeOnDropped</p>
<p><h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2278
<h3>ChartYOnDropped</h3>
Retorna a coordenada X do ponto do gr√°fico, o Assessor Especialista (Expert Advisor) ou Script foi
encerrado.
</p>
<pre><code class="language-mql5">
int¬† ChartYOnDropped();
</code></pre>
<p>
<h3>Valor retornado</h3>
O valor da coordenada Y.
<h3>Observa√ß√£o</h3>
Dire√ß√£o do eixo Y a partir de cima para baixo.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Script program start function                                    |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- obtemos e imprimimos as coordenadas X e Y do ponto do gr√°fico, onde esse script 
   int x=ChartXOnDropped();
   int y=ChartYOnDropped();
   PrintFormat(&quot;Script dropped to coordinates X = %d, Y = %d&quot;, x, y);
   /*
   Resultado:
   Script dropped to coordinates X = 429, Y = 114
   */
</code></pre>
<p>
  }
<h3>Tamb√©m Veja</h3>
 ChartWindowOnDropped, ChartPriceOnDropped, ChartTimeOnDropped</p>
<p><h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2279
<h3>ChartSetSymbolPeriod</h3>
Modifica o valor do s√≠mbolo e o per√≠odo do gr√°fico especificado. A fun√ß√£o √© ass√≠ncrona, ou seja, envia
o comando e n√£o espera a conclus√£o da execu√ß√£o. Este comando √© adicionado a uma fila de
mensagens de gr√°fico e ser√° executado ap√≥s o processamento de todos os comandos anteriores.
</p>
<pre><code class="language-mql5">
bool¬† ChartSetSymbolPeriod(
   long¬†            chart_id,¬†    // ID Gr√°fico
   string¬†          symbol,¬†      // Nome s√≠mbolo
   ENUM_TIMEFRAMES¬† period¬†       // Per√≠odo
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
chart_id
[in]  ID Gr√°fico. Representa o gr√°fico atual.
symbol
[in]  Simbolo do gr√°fico. Valor NULL significa o s√≠mbolo gr√°fico atual (Expert Advisor √© anexado)
period
[in]  Per√≠odo do Gr√°fico (Prazo). Pode ser um dos valores de ENUM_TIMEFRAMES. 0 (zero) significa
o per√≠odo do atual gr√°fico.
<h3>Valor retornado</h3>
Retorna verdadeiro se o comando foi adicionado √† fila do gr√°fico, caso contr√°rio ser√° falso. Para
obter uma informa√ß√£o sobre o erro, chamar a fun√ß√£o GetLastError().
<h3>Observa√ß√£o</h3>
O s√≠mbolo/per√≠odo de mudan√ßa desencadeia a reinicializa√ß√£o do Expert Advisor, anexado ao gr√°fico.
A chamada da fun√ß√£o ChartSetSymbolPeriod, com o mesmo s√≠mbolo e timeframe, pode ser utilizada
para atualizar o gr√°fico (semelhante ao comando Refresh no terminal). A atualiza√ß√£o do gr√°fico, por
sua vez , inicia o rec√°lculo dos indicadores vinculados a ele. Assim, voc√™ pode calcular o indicador
no gr√°fico, mesmo na aus√™ncia de ticks (por exemplo, nos fins-de-semana e feriados).
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
#define   SYMBOL    &quot;GBPUSD&quot;
#define   PERIOD    PERIOD_H1
//+------------------------------------------------------------------+
//| Script program start function                                    |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- obtemos o identificador do gr√°fico atual, seu s√≠mbolo e per√≠odo
   long            chart_id= ChartID();
   string          symbol  = Symbol();
   ENUM_TIMEFRAMES period  = Period();</p>
<p></code></pre>
<p>
<h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2280
</p>
<pre><code class="language-mql5">
//--- no log informamos sobre a altera√ß√£o do s√≠mbolo e do per√≠odo do gr√°fico atual par
   PrintFormat(&quot;Change the %s symbol and the %s period of the chart %I64u to %s %s&quot;,
               symbol, TimeframeDescrioption(period), chart_id, SYMBOL, TimeframeDescr
               
//--- alteramos o s√≠mbolo e o per√≠odo do gr√°fico
   ChartSetSymbolPeriod(chart_id, SYMBOL, PERIOD);
   /*
   Resultado:
   Change the EURUSD symbol and the M1 period of the chart 133246248352168440 to GBPUS
   */
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Retorna a descri√ß√£o do per√≠odo do gr√°fico¬†                    |
//+------------------------------------------------------------------+
string TimeframeDescrioption(const ENUM_TIMEFRAMES timeframe)
  {
   return(StringSubstr(EnumToString(timeframe), 7));
</code></pre>
<p>
  }
<h3>Veja Tamb√©m</h3>
<h3>ChartSymbol, ChartPeriod</h3></p>
<p><h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2281
<h3>ChartScreenShot</h3>
Providencia uma imagem do gr√°fico de seu estado atual para um formato GIF, PNG ou BMP
dependendo da extens√£o especificada.
</p>
<pre><code class="language-mql5">
bool¬† ChartScreenShot(
   long¬†            chart_id,¬†                  // ID Gr√°fico
   string¬†          filename,¬†                  // Nome do S√≠mbolo
   int¬†             width,¬†                     // Largura
   int¬†             height,¬†                    // Altura
   ENUM_ALIGN_MODE¬† align_mode=ALIGN_RIGHT¬†     // Tipo de alinhamento
   );
</code></pre>
<p>
<h3>Par√¢metros</h3>
chart_id
[in]  ID Gr√°fico. Significa o gr√°fico atual.
filename
[in]  Nome do arquivo de imagem. N√£o pode exceder 63 caracteres. Arquivos de captura de tela
s√£o colocados no \Files diret√≥rio.
width
[in]  Captura de tela com largura em pixels.
height
[in]  Captura de tela com altura em pixels.
align_mode=ALIGN_RIGHT
[in]  Modo de sa√≠da de uma Captura de tela estreita. O valor da enumera√ß√£o ENUM_ALIGN_MODE.
ALIGN_RIGHT significa alinhamento para a margem direita (a sa√≠da a partir do final). ALIGN_LEFT
significa justificar esquerda.
<h3>Valor do Retorno</h3>
Retorna true se bem sucedido, caso contr√°rio false.
<h3>Observa√ß√£o</h3>
Se voc√™ precisa tomar uma captura de tela de um gr√°fico a partir de uma determinada posi√ß√£o, em
primeiro lugar, √© necess√°rio posicionar o gr√°fico usando a fun√ß√£o ChartNavigate(). Se o tamanho
horizontal da captura de tela √© menor do que a janela do gr√°fico, ou a parte direita da janela do
gr√°fico, ou a sua parte esquerda est√° de sa√≠da, depende das configura√ß√µes do align_mode.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
#property description &quot;O Expert Advisor demonstra como criar uma s√©rie de captura de t
#property description  gr√°fico usando a fun√ß√£o ChartScreenShot(). Por conveni√™ncia, o 
#property description &quot;mostrando sobre o gr√°fico. A altura e a largura das imagens s√£o
#define        WIDTH  800     // ChartScreenShot() para Chamar a largura da imagem
#define        HEIGHT 600     // ChartScreenShot() para Chamar a altura da imagem</p>
<p></code></pre>
<p>
<h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2282
</p>
<pre><code class="language-mql5">
//--- par√¢metros de entrada
input int      pictures=5;    // O n√∫mero de imagens em s√©rie
int            mode=-1;       // -1 denota uma mudan√ßa para a borda direita do gr√°fico
int            bars_shift=300;// O n√∫mero de barras de rolagem quando o gr√°fico est√° u
//+------------------------------------------------------------------+
//| Fun√ß√£o de inicializa√ß√£o do Expert¬†                               |
//+------------------------------------------------------------------+
void OnInit()
  {
//--- Desabilita gr√°fico autoscroll
   ChartSetInteger(0,CHART_AUTOSCROLL,false);
//--- Definir o deslocamento da borda direita do gr√°fico
   ChartSetInteger(0,CHART_SHIFT,true);
//--- Mostra uma casti√ßal (vela ou barra) do gr√°fico
   ChartSetInteger(0,CHART_MODE,CHART_CANDLES);
//---
   Print(&quot;Prepara√ß√£o do Expert Advisor est√° completada&quot;);
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o tick (ponto) de um Expert                                 |
//+------------------------------------------------------------------+
void OnTick()
  {
//---
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
//+------------------------------------------------------------------+
//| Fun√ß√£o ChartEvent                                                |
//+------------------------------------------------------------------+
void OnChartEvent(const int id,
                  const long &amp;lparam,
                  const double &amp;dparam,
                  const string &amp;sparam)
  {
//--- Mostra o nome da fun√ß√£o, chamar tempo e identificador de evento
   Print(__FUNCTION__,TimeCurrent(),&quot;   id=&quot;,id,&quot;   mode=&quot;,mode);
//--- Manipular o evento CHARTEVENT_CLICK (&quot;Um clique do mouse sobre o gr√°fico&quot;)
   if(id==CHARTEVENT_CLICK)
     {
      //--- Deslocamento inicial para a borda do gr√°fico
      int pos=0;
      //--- Opera√ß√£o com a borda esquerda do gr√°fico
      if(mode&gt;0)
        {
         //--- Rolar o gr√°fico para a borda esquerda
         ChartNavigate(0,CHART_BEGIN,pos);
         for(int i=0;i&lt;pictures;i++)
           {
            //--- Preparar o texto para mostrar no gr√°fico e um nome de arquivo</p>
<p></code></pre>
<p>
<h3>Opera√ß√µes de Gr√°ficos</h3>
¬© 2000-2025, MetaQuotes Ltd.
2283
</p>
<pre><code class="language-mql5">
            string name=&quot;ChartScreenShot&quot;+&quot;CHART_BEGIN&quot;+string(pos)+&quot;.gif&quot;;
            //--- Mostrar o nome no gr√°fico como um coment√°rio
            Comment(name);
            //--- Salvar a captura de tela do gr√°fico em um arquivo no terminal_direct
            if(ChartScreenShot(0,name,WIDTH,HEIGHT,ALIGN_LEFT))
               Print(&quot;N√≥s salvamos a captura de tela &quot;,name);
            //---
            pos+=bars_shift;
            //--- D√™ tempo ao utilizador para olhar a nova parte nova do gr√°fico
            Sleep(3000);
            //--- Rolar o gr√°fico diante da atual posi√ß√£o do bars_shift bars para a di
            ChartNavigate(0,CHART_CURRENT_POS,bars_shift);
           }
         //--- Altere o modo para o oposto
         mode*=-1;
        }
      else // Opera√ß√£o com a borda direita do gr√°fico
        {
         //--- Rolar o gr√°fico para a borda direita
         ChartNavigate(0,CHART_END,pos);
         for(int i=0;i&lt;pictures;i++)
           {
            //--- Preparar o texto para mostrar no gr√°fico e um nome de arquivo
            string name=&quot;ChartScreenShot&quot;+&quot;CHART_END&quot;+string(pos)+&quot;.gif&quot;;
            //--- Mostrar o nome no gr√°fico como um coment√°rio
            Comment(name);
            //--- Salvar a captura de tela do gr√°fico em um arquivo no terminal_direct
            if(ChartScreenShot(0,name,WIDTH,HEIGHT,ALIGN_RIGHT))
               Print(&quot;N√≥s salvamos a captura de tela &quot;,name);
            //---
            pos+=bars_shift;
            //--- D√™ tempo ao utilizador para olhar a nova parte nova do gr√°fico
            Sleep(3000);
            //--- Rolar o gr√°fico diante da atual posi√ß√£o do bars_shift bars para a di
            ChartNavigate(0,CHART_CURRENT_POS,-bars_shift);
           }
         //--- Altere o modo para o oposto
         mode*=-1;
        }
     }  // End of CHARTEVENT_CLICK event handling
//--- Fim do manipulador (handler) OnChartEvent()  
</code></pre>
<p>
  }
<h3>Tamb√©m Veja</h3>
<h3>ChartNavigate(), Recursos</h3>
</p>
        </article>
        
        <footer>
            <p>Documenta√ß√£o MQL5 - Fonte: MetaQuotes Ltd.</p>
        </footer>
    </main>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        hljs.highlightAll();
        
        function toggleSidebar() {
            document.querySelector('.sidebar').classList.toggle('open');
        }
        
        function filterNav() {
            const filter = document.getElementById('search').value.toLowerCase();
            const items = document.querySelectorAll('.nav-list li');
            items.forEach(item => {
                const text = item.textContent.toLowerCase();
                item.style.display = text.includes(filter) ? '' : 'none';
            });
        }
    </script>
</body>
</html>