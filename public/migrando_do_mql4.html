<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Migrando do MQL4 - MQL5 Docs</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
</head>
<body>
    <nav class="sidebar">
        <div class="logo">
            <h1>MQL5 Docs</h1>
            <p>Documenta√ß√£o Completa</p>
        </div>
        <div class="search-box">
            <input type="text" id="search" placeholder="Buscar..." onkeyup="filterNav()">
        </div>
        <ul class="nav-list" id="nav-list">
            <li class=""><a href="index.html">üìö √çndice</a></li>
            <li class=""><a href="introducao.html">Introducao</a></li>
<li class=""><a href="refer√™ncia_mql5.html">Refer√™ncia MQL5</a></li>
<li class=""><a href="elementos_b√°sicos_da_linguagem.html">Elementos B√°sicos da Linguagem</a></li>
<li class=""><a href="constantes,_enumeradores_e_estruturas.html">Constantes, Enumeradores e Estruturas</a></li>
<li class=""><a href="programas_mql5.html">Programas MQL5</a></li>
<li class=""><a href="vari√°veis_predefinidas.html">Vari√°veis Predefinidas</a></li>
<li class=""><a href="fun√ß√µes_comuns.html">Fun√ß√µes Comuns</a></li>
<li class=""><a href="fun√ß√µes_para_array.html">Fun√ß√µes para Array</a></li>
<li class=""><a href="m√©todos_matriciais_e_vetoriais.html">M√©todos matriciais e vetoriais</a></li>
<li class=""><a href="fun√ß√µes_de_convers√£o.html">Fun√ß√µes de Convers√£o</a></li>
<li class=""><a href="fun√ß√µes_matem√°ticas.html">Fun√ß√µes Matem√°ticas</a></li>
<li class=""><a href="fun√ß√µes_de_string.html">Fun√ß√µes de String</a></li>
<li class=""><a href="data_e_hora.html">Data e Hora</a></li>
<li class=""><a href="informa√ß√µes_de_conta.html">Informa√ß√µes de Conta</a></li>
<li class=""><a href="verificando_estado.html">Verificando Estado</a></li>
<li class=""><a href="manipula√ß√£o_de_eventos.html">Manipula√ß√£o de eventos</a></li>
<li class=""><a href="informa√ß√µes_de_mercado.html">Informa√ß√µes de Mercado</a></li>
<li class=""><a href="calend√°rio_econ√¥mico.html">Calend√°rio econ√¥mico</a></li>
<li class=""><a href="s√©ries_temporais_e_acesso_a_indicadores.html">S√©ries Temporais e Acesso a Indicadores</a></li>
<li class=""><a href="s√≠mbolos_personalizados.html">S√≠mbolos personalizados</a></li>
<li class=""><a href="opera√ß√µes_de_gr√°ficos.html">Opera√ß√µes de Gr√°ficos</a></li>
<li class=""><a href="fun√ß√µes_de_negocia√ß√£o.html">Fun√ß√µes de Negocia√ß√£o</a></li>
<li class=""><a href="gerenciamento_de_sinais.html">Gerenciamento de sinais</a></li>
<li class=""><a href="fun√ß√µes_de_rede.html">Fun√ß√µes de rede</a></li>
<li class=""><a href="vari√°veis_globais_do_terminal.html">Vari√°veis Globais do Terminal</a></li>
<li class=""><a href="fun√ß√µes_de_arquivo.html">Fun√ß√µes de Arquivo</a></li>
<li class=""><a href="indicadores_customizados.html">Indicadores Customizados</a></li>
<li class=""><a href="fun√ß√µes_de_objeto.html">Fun√ß√µes de Objeto</a></li>
<li class=""><a href="indicadores_t√©cnicos.html">Indicadores T√©cnicos</a></li>
<li class=""><a href="trabalhando_com_resultados_de_otimiza√ß√£o.html">Trabalhando com Resultados de Otimiza√ß√£o</a></li>
<li class=""><a href="trabalhando_com_eventos.html">Trabalhando com Eventos</a></li>
<li class=""><a href="trabalhando_com_opencl.html">Trabalhando com OpenCL</a></li>
<li class=""><a href="trabalhar_com_bancos_de_dados.html">Trabalhar com bancos de dados</a></li>
<li class=""><a href="trabalho_com_directx.html">Trabalho com DirectX</a></li>
<li class=""><a href="metatrader_para_python.html">MetaTrader para Python</a></li>
<li class=""><a href="modelos_onnx.html">Modelos ONNX</a></li>
<li class=""><a href="biblioteca_padr√£o.html">Biblioteca Padr√£o</a></li>
<li class="active"><a href="migrando_do_mql4.html">Migrando do MQL4</a></li>
<li class=""><a href="lista_de_fun√ß√µes_mql5.html">Lista de Fun√ß√µes MQL5</a></li>
<li class=""><a href="lista_de_constantes_mql5.html">Lista de Constantes MQL5</a></li>

        </ul>
    </nav>
    
    <main class="content">
        <header>
            <button class="menu-toggle" onclick="toggleSidebar()">‚ò∞</button>
            <h1>Migrando do MQL4</h1>
        </header>
        
        <article>
            <p><h3>Migrando do MQL4</h3>
¬© 2000-2025, MetaQuotes Ltd.
6810
Migrando da linguagem de programa√ß√£o MQL4 para MQL5
MQL5 √© a evolu√ß√£o do seu antecessor - a linguagem de programa√ß√£o MQL4, onde in√∫meros
indicadores, scripts e Expert Advisors foram escritos. Apesar do fato de que a nova linguagem de
programa√ß√£o √© grandemente compat√≠vel com a linguagem da gera√ß√£o anterior, ainda existem algumas
diferen√ßas entre as linguagens. E quando migrar de programas, essas diferen√ßas devem ser
observadas.
Esta se√ß√£o cont√©m informa√ß√µes destinadas a facilitar a adapta√ß√£o dos c√≥digos para a nova linguagem
MQL5 ao programadores que conhecem MQL4.
<h3>Em primeiro lugar, deve-se observar:</h3>
¬∑ A nova linguagem n√£o cont√©m fun√ß√µes start(), init() e deinit().
¬∑ N√£o h√° limite para o n√∫mero de buffers de indicador.
¬∑ DLLs s√£o carregadas imediatamente ap√≥s o carregamento de um Expert Advisor (ou qualquer outro
programa MQL5).
¬∑ Verifica√ß√£o das condi√ß√µes l√≥gicas √© reduzida.
¬∑ Quando os limites de um matriz forem ultrapassados, o desempenho em curso √© finalizado
(criticamente - com a sa√≠da de um erro).
¬∑ Origin√°rios de operadores em C++.
¬∑ A linguagem oferece o tipo de convers√£o impl√≠cita (mesmo de string para um n√∫mero).
¬∑ As vari√°veis locais n√£o s√£o inicializados automaticamente (exceto para strings).
¬∑ Matrizes de local comum s√£o exclu√≠das automaticamente.
<h3>Fun√ß√µes Especiais init, start e deinit</h3>
A linguagem MQL4 cont√©m apenas estas tr√™s fun√ß√µes pr√©-definidas que s√£o usadas no indicador, script
ou Expert Advisor (n√£o contando a inclus√£o dos arquivos *.mqh e dos arquivos de biblioteca). Em
MQL5 n√£o existem estas fun√ß√µes, mas foram criadas fun√ß√µes an√°logas. A tabela mostra a
correspond√™ncia aproximada das fun√ß√µes.
<h3>MQL4</h3>
<h3>MQL5</h3>
init
<h3>OnInit</h3>
start
<h3>OnStart</h3>
deinit
<h3>OnDeinit</h3>
Fun√ß√µes OnInit e OnDeinit desempenham o mesmo papel que as fun√ß√µes init e deinit em MQL4 - elas
s√£o projetadas para encontrar o c√≥digo, que ser√° realizado durante a inicializa√ß√£o e finaliza√ß√£o dos
programas MQL5. Voc√™ pode simplesmente renomear estas fun√ß√µes em conformidade, ou deix√°-las
como est√£o, mas deve adicionar chamadas dessas fun√ß√µes em lugares correspondentes.
<h3>Exemplo:</h3>
</p>
<pre><code class="language-mql5">
void OnInit()
  {
//--- Fun√ß√£o nomeada durante a inicializa√ß√£o</p>
<p></code></pre>
<p>
<h3>Migrando do MQL4</h3>
¬© 2000-2025, MetaQuotes Ltd.
6811
</p>
<pre><code class="language-mql5">
   init();
</code></pre>
<p>
  }
</p>
<pre><code class="language-mql5">
void OnDeinit(const int reason)
  {
//--- Fun√ß√£o nomeada durante a desinicializa√ß√£o
   deinit();
//---
</code></pre>
<p>
  }
A fun√ß√£o start √© substitu√≠da por OnStart apenas em scripts. Em Expert Advisors e indicadores ser√°
renomeado para OnTick e OnCalculate, respectivamente. O c√≥digo que est√° para ser executado
durante a opera√ß√£o do programa MQL5 ser√° centrado nestas tr√™s fun√ß√µes:
programa mql5
principal fun√ß√£o
script
<h3>OnStart</h3>
indicador
<h3>OnCalculate</h3>
<h3>Expert Advisor</h3>
<h3>OnTick</h3>
Se o c√≥digo do indicador ou script n√£o cont√©m a fun√ß√£o principal, ou o nome da fun√ß√£o √© diferente,
esta fun√ß√£o n√£o ser√° executada. Isso significa que se o c√≥digo fonte de um script n√£o cont√©m OnStart,
esse c√≥digo ser√° compilado como um Expert Advisor.
Se um c√≥digo de indicador n√£o cont√©m a fun√ß√£o OnCalculate, a compila√ß√£o deste indicador ser√°
imposs√≠vel.
<h3>Vari√°veis Predefinidas</h3>
Em MQL5 n√£o existem as vari√°veis pr√©-definidas como Ask, Bid, Bars. As vari√°veis de Point e Digits
t√™m uma grafia ligeiramente diferente:
<h3>MQL4</h3>
<h3>MQL5</h3>
<h3>Digits</h3>
_Digits
<h3>Point</h3>
_Point
_LastError
_Period
_Symbol
_StopFlag
_UninitReason
<h3>Acesso as Timeseries</h3></p>
<p><h3>Migrando do MQL4</h3>
¬© 2000-2025, MetaQuotes Ltd.
6812
Em MQL5 n√£o existem as timeseries predefinidas como Open[], High[], Low[], Close[], Volume[] e
Time[]. A profundidade necess√°ria de uma timeseries agora pode ser definida atrav√©s das fun√ß√µes
correspondentes para acessar as timeseries.
<h3>Expert Advisors</h3>
Expert Advisors em MQL5 n√£o requerem a presen√ßa obrigat√≥ria de fun√ß√µes que manipulam os eventos
de recebimento de um novo tick - OnTick, com √© realizado em MQL4 (a fun√ß√£o de arranque em MQL4 √©
executado quando um novo tick √© recebido). Em MQL5, os Expert Advisors podem conter fun√ß√µes pr√©-
definidas do manipulador de v√°rios tipos de eventos:
¬∑ OnTick ‚Äì recebimento de um novo tick;
¬∑ OnTimer ‚Äì evento de timer;
¬∑ OnTrade - evento de trade;
¬∑ OnChartEvent ‚Äì eventos de entrada do teclado e mouse, eventos de um objeto gr√°fico em
movimento, evento de edi√ß√£o de texto completo na entrada da etiqueta do objeto LabelEdit;
¬∑ OnBookEvent ‚Äì evento do status de mudan√ßa da Profundidade do Mercado.
<h3>Indicadores Customizados</h3>
Em MQL4, o n√∫mero de buffers de indicador √© limitado e n√£o pode ultrapassar a 8. Em MQL5 n√£o
existem estas limita√ß√µes, mas deve ser lembrado que cada buffer de indicador requer a aloca√ß√£o de
uma certa parte da mem√≥ria para a sua localiza√ß√£o no terminal, por isto esta nova possibilidade n√£o
deve ser utilizada abusivamente.
MQL4 oferece apenas 6 tipos de plotagem de indicadores personalizados, enquanto MQL5 agora
oferece 18 estilos de desenho. Os nomes dos tipos de desenho n√£o mudaram, mas a ideologia da
representa√ß√£o gr√°fica dos indicadores mudou significativamente.
A dire√ß√£o da indexa√ß√£o nos buffers de indicador tamb√©m √© diferente. Por padr√£o, em MQL5 todos os
buffers de indicador tem o comportamento de matrizes comuns, ou seja, o elemento 0 (zero) indexado
√© o mais antigo no hist√≥rico e, como os √≠ndices aumentam, passamos dos dados mais antigos para os
mais recentes.
A √∫nica fun√ß√£o para trabalhar com indicadores personalizados que foi preservado da linguagem MQL4 √©
a fun√ß√£o SetIndexBuffer, mas para ser utilizada; agora deve ser especificado o tipo de dado a ser
armazenado em um matriz, ligada ao buffer do indicador.
As propriedades de indicadores personalizados tamb√©m foram modificadas e ampliadas. Novas fun√ß√µes
para acesso a timeseries foram adicionadas, de modo que o algoritmo de c√°lculo total deve ser
reexaminado.
<h3>Graphical Objects</h3>
O n√∫mero de objetos gr√°ficos em MQL5 foi aumentado significativamente. Al√©m disso, objetos
gr√°ficos agora s√£o posicionados no gr√°fico com a precis√£o de um segundo em qualquer per√≠odo de
tempo - agora objetos de pontos de ancoragem n√£o s√£o arredondados para o tempo de abertura da
barra de pre√ßo no gr√°fico em curso.</p>
<p><h3>Migrando do MQL4</h3>
¬© 2000-2025, MetaQuotes Ltd.
6813
Agora para Setas, Textos e Objetos de Etiqueta voc√™ pode especificar m√©todos de vincula√ß√£o, e para a
Etiqueta, Bot√£o, Gr√°fico, Etiqueta Bitmap e Editar, os objetos podem ser configurados no canto do
gr√°fico onde um objeto est√° ligado.
</p>
        </article>
        
        <footer>
            <p>Documenta√ß√£o MQL5 - Fonte: MetaQuotes Ltd.</p>
        </footer>
    </main>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        hljs.highlightAll();
        
        function toggleSidebar() {
            document.querySelector('.sidebar').classList.toggle('open');
        }
        
        function filterNav() {
            const filter = document.getElementById('search').value.toLowerCase();
            const items = document.querySelectorAll('.nav-list li');
            items.forEach(item => {
                const text = item.textContent.toLowerCase();
                item.style.display = text.includes(filter) ? '' : 'none';
            });
        }
    </script>
</body>
</html>